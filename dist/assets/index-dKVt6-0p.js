function rg(i,n){for(var r=0;r<n.length;r++){const a=n[r];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in i)){const c=Object.getOwnPropertyDescriptor(a,l);c&&Object.defineProperty(i,l,c.get?c:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();function Qu(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function sg(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var n=i.default;if(typeof n=="function"){var r=function a(){var l=!1;try{l=this instanceof a}catch{}return l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(i).forEach(function(a){var l=Object.getOwnPropertyDescriptor(i,a);Object.defineProperty(r,a,l.get?l:{enumerable:!0,get:function(){return i[a]}})}),r}var hu={exports:{}},Di={},fu={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mh;function ig(){if(Mh)return Ue;Mh=1;var i=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.iterator;function b(w){return w===null||typeof w!="object"?null:(w=x&&w[x]||w["@@iterator"],typeof w=="function"?w:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,S={};function _(w,O,q){this.props=w,this.context=O,this.refs=S,this.updater=q||C}_.prototype.isReactComponent={},_.prototype.setState=function(w,O){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,O,"setState")},_.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function B(){}B.prototype=_.prototype;function F(w,O,q){this.props=w,this.context=O,this.refs=S,this.updater=q||C}var L=F.prototype=new B;L.constructor=F,T(L,_.prototype),L.isPureReactComponent=!0;var W=Array.isArray,te=Object.prototype.hasOwnProperty,Z={current:null},ie={key:!0,ref:!0,__self:!0,__source:!0};function me(w,O,q){var Y,re={},oe=null,ee=null;if(O!=null)for(Y in O.ref!==void 0&&(ee=O.ref),O.key!==void 0&&(oe=""+O.key),O)te.call(O,Y)&&!ie.hasOwnProperty(Y)&&(re[Y]=O[Y]);var le=arguments.length-2;if(le===1)re.children=q;else if(1<le){for(var ke=Array(le),Ae=0;Ae<le;Ae++)ke[Ae]=arguments[Ae+2];re.children=ke}if(w&&w.defaultProps)for(Y in le=w.defaultProps,le)re[Y]===void 0&&(re[Y]=le[Y]);return{$$typeof:i,type:w,key:oe,ref:ee,props:re,_owner:Z.current}}function Ne(w,O){return{$$typeof:i,type:w.type,key:O,ref:w.ref,props:w.props,_owner:w._owner}}function Oe(w){return typeof w=="object"&&w!==null&&w.$$typeof===i}function V(w){var O={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(q){return O[q]})}var de=/\/+/g;function ne(w,O){return typeof w=="object"&&w!==null&&w.key!=null?V(""+w.key):O.toString(36)}function z(w,O,q,Y,re){var oe=typeof w;(oe==="undefined"||oe==="boolean")&&(w=null);var ee=!1;if(w===null)ee=!0;else switch(oe){case"string":case"number":ee=!0;break;case"object":switch(w.$$typeof){case i:case n:ee=!0}}if(ee)return ee=w,re=re(ee),w=Y===""?"."+ne(ee,0):Y,W(re)?(q="",w!=null&&(q=w.replace(de,"$&/")+"/"),z(re,O,q,"",function(Ae){return Ae})):re!=null&&(Oe(re)&&(re=Ne(re,q+(!re.key||ee&&ee.key===re.key?"":(""+re.key).replace(de,"$&/")+"/")+w)),O.push(re)),1;if(ee=0,Y=Y===""?".":Y+":",W(w))for(var le=0;le<w.length;le++){oe=w[le];var ke=Y+ne(oe,le);ee+=z(oe,O,q,ke,re)}else if(ke=b(w),typeof ke=="function")for(w=ke.call(w),le=0;!(oe=w.next()).done;)oe=oe.value,ke=Y+ne(oe,le++),ee+=z(oe,O,q,ke,re);else if(oe==="object")throw O=String(w),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return ee}function se(w,O,q){if(w==null)return w;var Y=[],re=0;return z(w,Y,"","",function(oe){return O.call(q,oe,re++)}),Y}function xe(w){if(w._status===-1){var O=w._result;O=O(),O.then(function(q){(w._status===0||w._status===-1)&&(w._status=1,w._result=q)},function(q){(w._status===0||w._status===-1)&&(w._status=2,w._result=q)}),w._status===-1&&(w._status=0,w._result=O)}if(w._status===1)return w._result.default;throw w._result}var K={current:null},Q={transition:null},ue={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:Q,ReactCurrentOwner:Z};function j(){throw Error("act(...) is not supported in production builds of React.")}return Ue.Children={map:se,forEach:function(w,O,q){se(w,function(){O.apply(this,arguments)},q)},count:function(w){var O=0;return se(w,function(){O++}),O},toArray:function(w){return se(w,function(O){return O})||[]},only:function(w){if(!Oe(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},Ue.Component=_,Ue.Fragment=r,Ue.Profiler=l,Ue.PureComponent=F,Ue.StrictMode=a,Ue.Suspense=m,Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,Ue.act=j,Ue.cloneElement=function(w,O,q){if(w==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+w+".");var Y=T({},w.props),re=w.key,oe=w.ref,ee=w._owner;if(O!=null){if(O.ref!==void 0&&(oe=O.ref,ee=Z.current),O.key!==void 0&&(re=""+O.key),w.type&&w.type.defaultProps)var le=w.type.defaultProps;for(ke in O)te.call(O,ke)&&!ie.hasOwnProperty(ke)&&(Y[ke]=O[ke]===void 0&&le!==void 0?le[ke]:O[ke])}var ke=arguments.length-2;if(ke===1)Y.children=q;else if(1<ke){le=Array(ke);for(var Ae=0;Ae<ke;Ae++)le[Ae]=arguments[Ae+2];Y.children=le}return{$$typeof:i,type:w.type,key:re,ref:oe,props:Y,_owner:ee}},Ue.createContext=function(w){return w={$$typeof:h,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},w.Provider={$$typeof:c,_context:w},w.Consumer=w},Ue.createElement=me,Ue.createFactory=function(w){var O=me.bind(null,w);return O.type=w,O},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(w){return{$$typeof:p,render:w}},Ue.isValidElement=Oe,Ue.lazy=function(w){return{$$typeof:g,_payload:{_status:-1,_result:w},_init:xe}},Ue.memo=function(w,O){return{$$typeof:y,type:w,compare:O===void 0?null:O}},Ue.startTransition=function(w){var O=Q.transition;Q.transition={};try{w()}finally{Q.transition=O}},Ue.unstable_act=j,Ue.useCallback=function(w,O){return K.current.useCallback(w,O)},Ue.useContext=function(w){return K.current.useContext(w)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(w){return K.current.useDeferredValue(w)},Ue.useEffect=function(w,O){return K.current.useEffect(w,O)},Ue.useId=function(){return K.current.useId()},Ue.useImperativeHandle=function(w,O,q){return K.current.useImperativeHandle(w,O,q)},Ue.useInsertionEffect=function(w,O){return K.current.useInsertionEffect(w,O)},Ue.useLayoutEffect=function(w,O){return K.current.useLayoutEffect(w,O)},Ue.useMemo=function(w,O){return K.current.useMemo(w,O)},Ue.useReducer=function(w,O,q){return K.current.useReducer(w,O,q)},Ue.useRef=function(w){return K.current.useRef(w)},Ue.useState=function(w){return K.current.useState(w)},Ue.useSyncExternalStore=function(w,O,q){return K.current.useSyncExternalStore(w,O,q)},Ue.useTransition=function(){return K.current.useTransition()},Ue.version="18.3.1",Ue}var Uh;function Ku(){return Uh||(Uh=1,fu.exports=ig()),fu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fh;function ag(){if(Fh)return Di;Fh=1;var i=Ku(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(p,m,y){var g,x={},b=null,C=null;y!==void 0&&(b=""+y),m.key!==void 0&&(b=""+m.key),m.ref!==void 0&&(C=m.ref);for(g in m)a.call(m,g)&&!c.hasOwnProperty(g)&&(x[g]=m[g]);if(p&&p.defaultProps)for(g in m=p.defaultProps,m)x[g]===void 0&&(x[g]=m[g]);return{$$typeof:n,type:p,key:b,ref:C,props:x,_owner:l.current}}return Di.Fragment=r,Di.jsx=h,Di.jsxs=h,Di}var Wh;function og(){return Wh||(Wh=1,hu.exports=ag()),hu.exports}var o=og(),N=Ku();const Jt=Qu(N),lg=rg({__proto__:null,default:Jt},[N]);var ao={},pu={exports:{}},Vt={},mu={exports:{}},gu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bh;function ug(){return Bh||(Bh=1,function(i){function n(Q,ue){var j=Q.length;Q.push(ue);e:for(;0<j;){var w=j-1>>>1,O=Q[w];if(0<l(O,ue))Q[w]=ue,Q[j]=O,j=w;else break e}}function r(Q){return Q.length===0?null:Q[0]}function a(Q){if(Q.length===0)return null;var ue=Q[0],j=Q.pop();if(j!==ue){Q[0]=j;e:for(var w=0,O=Q.length,q=O>>>1;w<q;){var Y=2*(w+1)-1,re=Q[Y],oe=Y+1,ee=Q[oe];if(0>l(re,j))oe<O&&0>l(ee,re)?(Q[w]=ee,Q[oe]=j,w=oe):(Q[w]=re,Q[Y]=j,w=Y);else if(oe<O&&0>l(ee,j))Q[w]=ee,Q[oe]=j,w=oe;else break e}}return ue}function l(Q,ue){var j=Q.sortIndex-ue.sortIndex;return j!==0?j:Q.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var h=Date,p=h.now();i.unstable_now=function(){return h.now()-p}}var m=[],y=[],g=1,x=null,b=3,C=!1,T=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(Q){for(var ue=r(y);ue!==null;){if(ue.callback===null)a(y);else if(ue.startTime<=Q)a(y),ue.sortIndex=ue.expirationTime,n(m,ue);else break;ue=r(y)}}function W(Q){if(S=!1,L(Q),!T)if(r(m)!==null)T=!0,xe(te);else{var ue=r(y);ue!==null&&K(W,ue.startTime-Q)}}function te(Q,ue){T=!1,S&&(S=!1,B(me),me=-1),C=!0;var j=b;try{for(L(ue),x=r(m);x!==null&&(!(x.expirationTime>ue)||Q&&!V());){var w=x.callback;if(typeof w=="function"){x.callback=null,b=x.priorityLevel;var O=w(x.expirationTime<=ue);ue=i.unstable_now(),typeof O=="function"?x.callback=O:x===r(m)&&a(m),L(ue)}else a(m);x=r(m)}if(x!==null)var q=!0;else{var Y=r(y);Y!==null&&K(W,Y.startTime-ue),q=!1}return q}finally{x=null,b=j,C=!1}}var Z=!1,ie=null,me=-1,Ne=5,Oe=-1;function V(){return!(i.unstable_now()-Oe<Ne)}function de(){if(ie!==null){var Q=i.unstable_now();Oe=Q;var ue=!0;try{ue=ie(!0,Q)}finally{ue?ne():(Z=!1,ie=null)}}else Z=!1}var ne;if(typeof F=="function")ne=function(){F(de)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,se=z.port2;z.port1.onmessage=de,ne=function(){se.postMessage(null)}}else ne=function(){_(de,0)};function xe(Q){ie=Q,Z||(Z=!0,ne())}function K(Q,ue){me=_(function(){Q(i.unstable_now())},ue)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Q){Q.callback=null},i.unstable_continueExecution=function(){T||C||(T=!0,xe(te))},i.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ne=0<Q?Math.floor(1e3/Q):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_getFirstCallbackNode=function(){return r(m)},i.unstable_next=function(Q){switch(b){case 1:case 2:case 3:var ue=3;break;default:ue=b}var j=b;b=ue;try{return Q()}finally{b=j}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Q,ue){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var j=b;b=Q;try{return ue()}finally{b=j}},i.unstable_scheduleCallback=function(Q,ue,j){var w=i.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?w+j:w):j=w,Q){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=j+O,Q={id:g++,callback:ue,priorityLevel:Q,startTime:j,expirationTime:O,sortIndex:-1},j>w?(Q.sortIndex=j,n(y,Q),r(m)===null&&Q===r(y)&&(S?(B(me),me=-1):S=!0,K(W,j-w))):(Q.sortIndex=O,n(m,Q),T||C||(T=!0,xe(te))),Q},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(Q){var ue=b;return function(){var j=b;b=ue;try{return Q.apply(this,arguments)}finally{b=j}}}}(gu)),gu}var $h;function cg(){return $h||($h=1,mu.exports=ug()),mu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zh;function dg(){if(zh)return Vt;zh=1;var i=Ku(),n=cg();function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,l={};function c(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(l[e]=t,e=0;e<t.length;e++)a.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},x={};function b(e){return m.call(x,e)?!0:m.call(g,e)?!1:y.test(e)?x[e]=!0:(g[e]=!0,!1)}function C(e,t,s,u){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return u?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function T(e,t,s,u){if(t===null||typeof t>"u"||C(e,t,s,u))return!0;if(u)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function S(e,t,s,u,d,f,v){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=u,this.attributeNamespace=d,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=v}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_[e]=new S(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];_[t]=new S(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){_[e]=new S(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_[e]=new S(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_[e]=new S(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){_[e]=new S(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){_[e]=new S(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){_[e]=new S(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){_[e]=new S(e,5,!1,e.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function F(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(B,F);_[t]=new S(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(B,F);_[t]=new S(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(B,F);_[t]=new S(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){_[e]=new S(e,1,!1,e.toLowerCase(),null,!1,!1)}),_.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){_[e]=new S(e,1,!1,e.toLowerCase(),null,!0,!0)});function L(e,t,s,u){var d=_.hasOwnProperty(t)?_[t]:null;(d!==null?d.type!==0:u||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(T(t,s,d,u)&&(s=null),u||d===null?b(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):d.mustUseProperty?e[d.propertyName]=s===null?d.type===3?!1:"":s:(t=d.attributeName,u=d.attributeNamespace,s===null?e.removeAttribute(t):(d=d.type,s=d===3||d===4&&s===!0?"":""+s,u?e.setAttributeNS(u,t,s):e.setAttribute(t,s))))}var W=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,te=Symbol.for("react.element"),Z=Symbol.for("react.portal"),ie=Symbol.for("react.fragment"),me=Symbol.for("react.strict_mode"),Ne=Symbol.for("react.profiler"),Oe=Symbol.for("react.provider"),V=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),xe=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),Q=Symbol.iterator;function ue(e){return e===null||typeof e!="object"?null:(e=Q&&e[Q]||e["@@iterator"],typeof e=="function"?e:null)}var j=Object.assign,w;function O(e){if(w===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);w=t&&t[1]||""}return`
`+w+e}var q=!1;function Y(e,t){if(!e||q)return"";q=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(M){var u=M}Reflect.construct(e,[],t)}else{try{t.call()}catch(M){u=M}e.call(t.prototype)}else{try{throw Error()}catch(M){u=M}e()}}catch(M){if(M&&u&&typeof M.stack=="string"){for(var d=M.stack.split(`
`),f=u.stack.split(`
`),v=d.length-1,k=f.length-1;1<=v&&0<=k&&d[v]!==f[k];)k--;for(;1<=v&&0<=k;v--,k--)if(d[v]!==f[k]){if(v!==1||k!==1)do if(v--,k--,0>k||d[v]!==f[k]){var E=`
`+d[v].replace(" at new "," at ");return e.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",e.displayName)),E}while(1<=v&&0<=k);break}}}finally{q=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?O(e):""}function re(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=Y(e.type,!1),e;case 11:return e=Y(e.type.render,!1),e;case 1:return e=Y(e.type,!0),e;default:return""}}function oe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ie:return"Fragment";case Z:return"Portal";case Ne:return"Profiler";case me:return"StrictMode";case ne:return"Suspense";case z:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case V:return(e.displayName||"Context")+".Consumer";case Oe:return(e._context.displayName||"Context")+".Provider";case de:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case se:return t=e.displayName||null,t!==null?t:oe(e.type)||"Memo";case xe:t=e._payload,e=e._init;try{return oe(e(t))}catch{}}return null}function ee(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(t);case 8:return t===me?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function le(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ke(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ae(e){var t=ke(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),u=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var d=s.get,f=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(v){u=""+v,f.call(this,v)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function We(e){e._valueTracker||(e._valueTracker=Ae(e))}function Ge(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),u="";return e&&(u=ke(e)?e.checked?"true":"false":e.value),e=u,e!==s?(t.setValue(e),!0):!1}function Xe(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ie(e,t){var s=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function I(e,t){var s=t.defaultValue==null?"":t.defaultValue,u=t.checked!=null?t.checked:t.defaultChecked;s=le(t.value!=null?t.value:s),e._wrapperState={initialChecked:u,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function U(e,t){t=t.checked,t!=null&&L(e,"checked",t,!1)}function fe(e,t){U(e,t);var s=le(t.value),u=t.type;if(s!=null)u==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(u==="submit"||u==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ye(e,t.type,s):t.hasOwnProperty("defaultValue")&&ye(e,t.type,le(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Se(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var u=t.type;if(!(u!=="submit"&&u!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function ye(e,t,s){(t!=="number"||Xe(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var be=Array.isArray;function Ce(e,t,s,u){if(e=e.options,t){t={};for(var d=0;d<s.length;d++)t["$"+s[d]]=!0;for(s=0;s<e.length;s++)d=t.hasOwnProperty("$"+e[s].value),e[s].selected!==d&&(e[s].selected=d),d&&u&&(e[s].defaultSelected=!0)}else{for(s=""+le(s),t=null,d=0;d<e.length;d++){if(e[d].value===s){e[d].selected=!0,u&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Te(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(r(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Me(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(r(92));if(be(s)){if(1<s.length)throw Error(r(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:le(s)}}function lt(e,t){var s=le(t.value),u=le(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),u!=null&&(e.defaultValue=""+u)}function vt(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ft(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ft(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ft(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Wt,dn=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,u,d){MSApp.execUnsafeLocalFunction(function(){return e(t,s,u,d)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Wt=Wt||document.createElement("div"),Wt.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Wt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Et(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Ct={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wt=["Webkit","ms","Moz","O"];Object.keys(Ct).forEach(function(e){wt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ct[t]=Ct[e]})});function Gn(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Ct.hasOwnProperty(e)&&Ct[e]?(""+t).trim():t+"px"}function en(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var u=s.indexOf("--")===0,d=Gn(s,t[s],u);s==="float"&&(s="cssFloat"),u?e.setProperty(s,d):e[s]=d}}var To=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Er(e,t){if(t){if(To[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(r(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(t.style!=null&&typeof t.style!="object")throw Error(r(62))}}function Cr(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ts=null;function ns(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xs=null,Vn=null,Jn=null;function rs(e){if(e=xi(e)){if(typeof Xs!="function")throw Error(r(280));var t=e.stateNode;t&&(t=ba(t),Xs(e.stateNode,e.type,t))}}function Xi(e){Vn?Jn?Jn.push(e):Jn=[e]:Vn=e}function Zi(){if(Vn){var e=Vn,t=Jn;if(Jn=Vn=null,rs(e),t)for(e=0;e<t.length;e++)rs(t[e])}}function ea(e,t){return e(t)}function ta(){}var Zs=!1;function na(e,t,s){if(Zs)return e(t,s);Zs=!0;try{return ea(e,t,s)}finally{Zs=!1,(Vn!==null||Jn!==null)&&(ta(),Zi())}}function Qn(e,t){var s=e.stateNode;if(s===null)return null;var u=ba(s);if(u===null)return null;s=u[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(r(231,t,typeof s));return s}var ei=!1;if(p)try{var Tr={};Object.defineProperty(Tr,"passive",{get:function(){ei=!0}}),window.addEventListener("test",Tr,Tr),window.removeEventListener("test",Tr,Tr)}catch{ei=!1}function Po(e,t,s,u,d,f,v,k,E){var M=Array.prototype.slice.call(arguments,3);try{t.apply(s,M)}catch(G){this.onError(G)}}var Pr=!1,ss=null,is=!1,ti=null,Kn={onError:function(e){Pr=!0,ss=e}};function Oo(e,t,s,u,d,f,v,k,E){Pr=!1,ss=null,Po.apply(Kn,arguments)}function Ao(e,t,s,u,d,f,v,k,E){if(Oo.apply(this,arguments),Pr){if(Pr){var M=ss;Pr=!1,ss=null}else throw Error(r(198));is||(is=!0,ti=M)}}function Tn(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function D(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $(e){if(Tn(e)!==e)throw Error(r(188))}function ae(e){var t=e.alternate;if(!t){if(t=Tn(e),t===null)throw Error(r(188));return t!==e?null:e}for(var s=e,u=t;;){var d=s.return;if(d===null)break;var f=d.alternate;if(f===null){if(u=d.return,u!==null){s=u;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===s)return $(d),e;if(f===u)return $(d),t;f=f.sibling}throw Error(r(188))}if(s.return!==u.return)s=d,u=f;else{for(var v=!1,k=d.child;k;){if(k===s){v=!0,s=d,u=f;break}if(k===u){v=!0,u=d,s=f;break}k=k.sibling}if(!v){for(k=f.child;k;){if(k===s){v=!0,s=f,u=d;break}if(k===u){v=!0,u=f,s=d;break}k=k.sibling}if(!v)throw Error(r(189))}}if(s.alternate!==u)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?e:t}function he(e){return e=ae(e),e!==null?Le(e):null}function Le(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Le(e);if(t!==null)return t;e=e.sibling}return null}var ze=n.unstable_scheduleCallback,qe=n.unstable_cancelCallback,Be=n.unstable_shouldYield,Bt=n.unstable_requestPaint,Je=n.unstable_now,Pn=n.unstable_getCurrentPriorityLevel,Ve=n.unstable_ImmediatePriority,tt=n.unstable_UserBlockingPriority,Qt=n.unstable_NormalPriority,Or=n.unstable_LowPriority,On=n.unstable_IdlePriority,Ee=null,tn=null;function Re(e){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(Ee,e,void 0,(e.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:bp,wp=Math.log,xp=Math.LN2;function bp(e){return e>>>=0,e===0?32:31-(wp(e)/xp|0)|0}var ra=64,sa=4194304;function ni(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ia(e,t){var s=e.pendingLanes;if(s===0)return 0;var u=0,d=e.suspendedLanes,f=e.pingedLanes,v=s&268435455;if(v!==0){var k=v&~d;k!==0?u=ni(k):(f&=v,f!==0&&(u=ni(f)))}else v=s&~d,v!==0?u=ni(v):f!==0&&(u=ni(f));if(u===0)return 0;if(t!==0&&t!==u&&(t&d)===0&&(d=u&-u,f=t&-t,d>=f||d===16&&(f&4194240)!==0))return t;if((u&4)!==0&&(u|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=u;0<t;)s=31-hn(t),d=1<<s,u|=e[s],t&=~d;return u}function kp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sp(e,t){for(var s=e.suspendedLanes,u=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes;0<f;){var v=31-hn(f),k=1<<v,E=d[v];E===-1?((k&s)===0||(k&u)!==0)&&(d[v]=kp(k,t)):E<=t&&(e.expiredLanes|=k),f&=~k}}function Io(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pc(){var e=ra;return ra<<=1,(ra&4194240)===0&&(ra=64),e}function Ro(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function ri(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-hn(t),e[t]=s}function _p(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var u=e.eventTimes;for(e=e.expirationTimes;0<s;){var d=31-hn(s),f=1<<d;t[d]=0,u[d]=-1,e[d]=-1,s&=~f}}function Do(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var u=31-hn(s),d=1<<u;d&t|e[u]&t&&(e[u]|=t),s&=~d}}var Qe=0;function mc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var gc,Lo,yc,vc,wc,Mo=!1,aa=[],Yn=null,Xn=null,Zn=null,si=new Map,ii=new Map,er=[],jp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xc(e,t){switch(e){case"focusin":case"focusout":Yn=null;break;case"dragenter":case"dragleave":Xn=null;break;case"mouseover":case"mouseout":Zn=null;break;case"pointerover":case"pointerout":si.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ii.delete(t.pointerId)}}function ai(e,t,s,u,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:s,eventSystemFlags:u,nativeEvent:f,targetContainers:[d]},t!==null&&(t=xi(t),t!==null&&Lo(t)),e):(e.eventSystemFlags|=u,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function Np(e,t,s,u,d){switch(t){case"focusin":return Yn=ai(Yn,e,t,s,u,d),!0;case"dragenter":return Xn=ai(Xn,e,t,s,u,d),!0;case"mouseover":return Zn=ai(Zn,e,t,s,u,d),!0;case"pointerover":var f=d.pointerId;return si.set(f,ai(si.get(f)||null,e,t,s,u,d)),!0;case"gotpointercapture":return f=d.pointerId,ii.set(f,ai(ii.get(f)||null,e,t,s,u,d)),!0}return!1}function bc(e){var t=Ar(e.target);if(t!==null){var s=Tn(t);if(s!==null){if(t=s.tag,t===13){if(t=D(s),t!==null){e.blockedOn=t,wc(e.priority,function(){yc(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function oa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Fo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var u=new s.constructor(s.type,s);ts=u,s.target.dispatchEvent(u),ts=null}else return t=xi(s),t!==null&&Lo(t),e.blockedOn=s,!1;t.shift()}return!0}function kc(e,t,s){oa(e)&&s.delete(t)}function Ep(){Mo=!1,Yn!==null&&oa(Yn)&&(Yn=null),Xn!==null&&oa(Xn)&&(Xn=null),Zn!==null&&oa(Zn)&&(Zn=null),si.forEach(kc),ii.forEach(kc)}function oi(e,t){e.blockedOn===t&&(e.blockedOn=null,Mo||(Mo=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ep)))}function li(e){function t(d){return oi(d,e)}if(0<aa.length){oi(aa[0],e);for(var s=1;s<aa.length;s++){var u=aa[s];u.blockedOn===e&&(u.blockedOn=null)}}for(Yn!==null&&oi(Yn,e),Xn!==null&&oi(Xn,e),Zn!==null&&oi(Zn,e),si.forEach(t),ii.forEach(t),s=0;s<er.length;s++)u=er[s],u.blockedOn===e&&(u.blockedOn=null);for(;0<er.length&&(s=er[0],s.blockedOn===null);)bc(s),s.blockedOn===null&&er.shift()}var as=W.ReactCurrentBatchConfig,la=!0;function Cp(e,t,s,u){var d=Qe,f=as.transition;as.transition=null;try{Qe=1,Uo(e,t,s,u)}finally{Qe=d,as.transition=f}}function Tp(e,t,s,u){var d=Qe,f=as.transition;as.transition=null;try{Qe=4,Uo(e,t,s,u)}finally{Qe=d,as.transition=f}}function Uo(e,t,s,u){if(la){var d=Fo(e,t,s,u);if(d===null)nl(e,t,u,ua,s),xc(e,u);else if(Np(d,e,t,s,u))u.stopPropagation();else if(xc(e,u),t&4&&-1<jp.indexOf(e)){for(;d!==null;){var f=xi(d);if(f!==null&&gc(f),f=Fo(e,t,s,u),f===null&&nl(e,t,u,ua,s),f===d)break;d=f}d!==null&&u.stopPropagation()}else nl(e,t,u,null,s)}}var ua=null;function Fo(e,t,s,u){if(ua=null,e=ns(u),e=Ar(e),e!==null)if(t=Tn(e),t===null)e=null;else if(s=t.tag,s===13){if(e=D(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ua=e,null}function Sc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pn()){case Ve:return 1;case tt:return 4;case Qt:case Or:return 16;case On:return 536870912;default:return 16}default:return 16}}var tr=null,Wo=null,ca=null;function _c(){if(ca)return ca;var e,t=Wo,s=t.length,u,d="value"in tr?tr.value:tr.textContent,f=d.length;for(e=0;e<s&&t[e]===d[e];e++);var v=s-e;for(u=1;u<=v&&t[s-u]===d[f-u];u++);return ca=d.slice(e,1<u?1-u:void 0)}function da(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ha(){return!0}function jc(){return!1}function Kt(e){function t(s,u,d,f,v){this._reactName=s,this._targetInst=d,this.type=u,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var k in e)e.hasOwnProperty(k)&&(s=e[k],this[k]=s?s(f):f[k]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ha:jc,this.isPropagationStopped=jc,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ha)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ha)},persist:function(){},isPersistent:ha}),t}var os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bo=Kt(os),ui=j({},os,{view:0,detail:0}),Pp=Kt(ui),$o,zo,ci,fa=j({},ui,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ho,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ci&&(ci&&e.type==="mousemove"?($o=e.screenX-ci.screenX,zo=e.screenY-ci.screenY):zo=$o=0,ci=e),$o)},movementY:function(e){return"movementY"in e?e.movementY:zo}}),Nc=Kt(fa),Op=j({},fa,{dataTransfer:0}),Ap=Kt(Op),Ip=j({},ui,{relatedTarget:0}),qo=Kt(Ip),Rp=j({},os,{animationName:0,elapsedTime:0,pseudoElement:0}),Dp=Kt(Rp),Lp=j({},os,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mp=Kt(Lp),Up=j({},os,{data:0}),Ec=Kt(Up),Fp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $p(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Bp[e])?!!t[e]:!1}function Ho(){return $p}var zp=j({},ui,{key:function(e){if(e.key){var t=Fp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=da(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ho,charCode:function(e){return e.type==="keypress"?da(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?da(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qp=Kt(zp),Hp=j({},fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cc=Kt(Hp),Gp=j({},ui,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ho}),Vp=Kt(Gp),Jp=j({},os,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qp=Kt(Jp),Kp=j({},fa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Yp=Kt(Kp),Xp=[9,13,27,32],Go=p&&"CompositionEvent"in window,di=null;p&&"documentMode"in document&&(di=document.documentMode);var Zp=p&&"TextEvent"in window&&!di,Tc=p&&(!Go||di&&8<di&&11>=di),Pc=" ",Oc=!1;function Ac(e,t){switch(e){case"keyup":return Xp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ic(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ls=!1;function em(e,t){switch(e){case"compositionend":return Ic(t);case"keypress":return t.which!==32?null:(Oc=!0,Pc);case"textInput":return e=t.data,e===Pc&&Oc?null:e;default:return null}}function tm(e,t){if(ls)return e==="compositionend"||!Go&&Ac(e,t)?(e=_c(),ca=Wo=tr=null,ls=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tc&&t.locale!=="ko"?null:t.data;default:return null}}var nm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!nm[e.type]:t==="textarea"}function Dc(e,t,s,u){Xi(u),t=va(t,"onChange"),0<t.length&&(s=new Bo("onChange","change",null,s,u),e.push({event:s,listeners:t}))}var hi=null,fi=null;function rm(e){Zc(e,0)}function pa(e){var t=fs(e);if(Ge(t))return e}function sm(e,t){if(e==="change")return t}var Lc=!1;if(p){var Vo;if(p){var Jo="oninput"in document;if(!Jo){var Mc=document.createElement("div");Mc.setAttribute("oninput","return;"),Jo=typeof Mc.oninput=="function"}Vo=Jo}else Vo=!1;Lc=Vo&&(!document.documentMode||9<document.documentMode)}function Uc(){hi&&(hi.detachEvent("onpropertychange",Fc),fi=hi=null)}function Fc(e){if(e.propertyName==="value"&&pa(fi)){var t=[];Dc(t,fi,e,ns(e)),na(rm,t)}}function im(e,t,s){e==="focusin"?(Uc(),hi=t,fi=s,hi.attachEvent("onpropertychange",Fc)):e==="focusout"&&Uc()}function am(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pa(fi)}function om(e,t){if(e==="click")return pa(t)}function lm(e,t){if(e==="input"||e==="change")return pa(t)}function um(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fn=typeof Object.is=="function"?Object.is:um;function pi(e,t){if(fn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),u=Object.keys(t);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var d=s[u];if(!m.call(t,d)||!fn(e[d],t[d]))return!1}return!0}function Wc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bc(e,t){var s=Wc(e);e=0;for(var u;s;){if(s.nodeType===3){if(u=e+s.textContent.length,e<=t&&u>=t)return{node:s,offset:t-e};e=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Wc(s)}}function $c(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$c(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function zc(){for(var e=window,t=Xe();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Xe(e.document)}return t}function Qo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function cm(e){var t=zc(),s=e.focusedElem,u=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&$c(s.ownerDocument.documentElement,s)){if(u!==null&&Qo(s)){if(t=u.start,e=u.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=s.textContent.length,f=Math.min(u.start,d);u=u.end===void 0?f:Math.min(u.end,d),!e.extend&&f>u&&(d=u,u=f,f=d),d=Bc(s,f);var v=Bc(s,u);d&&v&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==v.node||e.focusOffset!==v.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),f>u?(e.addRange(t),e.extend(v.node,v.offset)):(t.setEnd(v.node,v.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dm=p&&"documentMode"in document&&11>=document.documentMode,us=null,Ko=null,mi=null,Yo=!1;function qc(e,t,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Yo||us==null||us!==Xe(u)||(u=us,"selectionStart"in u&&Qo(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),mi&&pi(mi,u)||(mi=u,u=va(Ko,"onSelect"),0<u.length&&(t=new Bo("onSelect","select",null,t,s),e.push({event:t,listeners:u}),t.target=us)))}function ma(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var cs={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionend:ma("Transition","TransitionEnd")},Xo={},Hc={};p&&(Hc=document.createElement("div").style,"AnimationEvent"in window||(delete cs.animationend.animation,delete cs.animationiteration.animation,delete cs.animationstart.animation),"TransitionEvent"in window||delete cs.transitionend.transition);function ga(e){if(Xo[e])return Xo[e];if(!cs[e])return e;var t=cs[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Hc)return Xo[e]=t[s];return e}var Gc=ga("animationend"),Vc=ga("animationiteration"),Jc=ga("animationstart"),Qc=ga("transitionend"),Kc=new Map,Yc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nr(e,t){Kc.set(e,t),c(t,[e])}for(var Zo=0;Zo<Yc.length;Zo++){var el=Yc[Zo],hm=el.toLowerCase(),fm=el[0].toUpperCase()+el.slice(1);nr(hm,"on"+fm)}nr(Gc,"onAnimationEnd"),nr(Vc,"onAnimationIteration"),nr(Jc,"onAnimationStart"),nr("dblclick","onDoubleClick"),nr("focusin","onFocus"),nr("focusout","onBlur"),nr(Qc,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pm=new Set("cancel close invalid load scroll toggle".split(" ").concat(gi));function Xc(e,t,s){var u=e.type||"unknown-event";e.currentTarget=s,Ao(u,t,void 0,e),e.currentTarget=null}function Zc(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var u=e[s],d=u.event;u=u.listeners;e:{var f=void 0;if(t)for(var v=u.length-1;0<=v;v--){var k=u[v],E=k.instance,M=k.currentTarget;if(k=k.listener,E!==f&&d.isPropagationStopped())break e;Xc(d,k,M),f=E}else for(v=0;v<u.length;v++){if(k=u[v],E=k.instance,M=k.currentTarget,k=k.listener,E!==f&&d.isPropagationStopped())break e;Xc(d,k,M),f=E}}}if(is)throw e=ti,is=!1,ti=null,e}function nt(e,t){var s=t[ll];s===void 0&&(s=t[ll]=new Set);var u=e+"__bubble";s.has(u)||(ed(t,e,2,!1),s.add(u))}function tl(e,t,s){var u=0;t&&(u|=4),ed(s,e,u,t)}var ya="_reactListening"+Math.random().toString(36).slice(2);function yi(e){if(!e[ya]){e[ya]=!0,a.forEach(function(s){s!=="selectionchange"&&(pm.has(s)||tl(s,!1,e),tl(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ya]||(t[ya]=!0,tl("selectionchange",!1,t))}}function ed(e,t,s,u){switch(Sc(t)){case 1:var d=Cp;break;case 4:d=Tp;break;default:d=Uo}s=d.bind(null,t,s,e),d=void 0,!ei||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),u?d!==void 0?e.addEventListener(t,s,{capture:!0,passive:d}):e.addEventListener(t,s,!0):d!==void 0?e.addEventListener(t,s,{passive:d}):e.addEventListener(t,s,!1)}function nl(e,t,s,u,d){var f=u;if((t&1)===0&&(t&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var k=u.stateNode.containerInfo;if(k===d||k.nodeType===8&&k.parentNode===d)break;if(v===4)for(v=u.return;v!==null;){var E=v.tag;if((E===3||E===4)&&(E=v.stateNode.containerInfo,E===d||E.nodeType===8&&E.parentNode===d))return;v=v.return}for(;k!==null;){if(v=Ar(k),v===null)return;if(E=v.tag,E===5||E===6){u=f=v;continue e}k=k.parentNode}}u=u.return}na(function(){var M=f,G=ns(s),J=[];e:{var H=Kc.get(e);if(H!==void 0){var ce=Bo,ge=e;switch(e){case"keypress":if(da(s)===0)break e;case"keydown":case"keyup":ce=qp;break;case"focusin":ge="focus",ce=qo;break;case"focusout":ge="blur",ce=qo;break;case"beforeblur":case"afterblur":ce=qo;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Nc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Ap;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=Vp;break;case Gc:case Vc:case Jc:ce=Dp;break;case Qc:ce=Qp;break;case"scroll":ce=Pp;break;case"wheel":ce=Yp;break;case"copy":case"cut":case"paste":ce=Mp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Cc}var ve=(t&4)!==0,ut=!ve&&e==="scroll",A=ve?H!==null?H+"Capture":null:H;ve=[];for(var P=M,R;P!==null;){R=P;var X=R.stateNode;if(R.tag===5&&X!==null&&(R=X,A!==null&&(X=Qn(P,A),X!=null&&ve.push(vi(P,X,R)))),ut)break;P=P.return}0<ve.length&&(H=new ce(H,ge,null,s,G),J.push({event:H,listeners:ve}))}}if((t&7)===0){e:{if(H=e==="mouseover"||e==="pointerover",ce=e==="mouseout"||e==="pointerout",H&&s!==ts&&(ge=s.relatedTarget||s.fromElement)&&(Ar(ge)||ge[An]))break e;if((ce||H)&&(H=G.window===G?G:(H=G.ownerDocument)?H.defaultView||H.parentWindow:window,ce?(ge=s.relatedTarget||s.toElement,ce=M,ge=ge?Ar(ge):null,ge!==null&&(ut=Tn(ge),ge!==ut||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(ce=null,ge=M),ce!==ge)){if(ve=Nc,X="onMouseLeave",A="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(ve=Cc,X="onPointerLeave",A="onPointerEnter",P="pointer"),ut=ce==null?H:fs(ce),R=ge==null?H:fs(ge),H=new ve(X,P+"leave",ce,s,G),H.target=ut,H.relatedTarget=R,X=null,Ar(G)===M&&(ve=new ve(A,P+"enter",ge,s,G),ve.target=R,ve.relatedTarget=ut,X=ve),ut=X,ce&&ge)t:{for(ve=ce,A=ge,P=0,R=ve;R;R=ds(R))P++;for(R=0,X=A;X;X=ds(X))R++;for(;0<P-R;)ve=ds(ve),P--;for(;0<R-P;)A=ds(A),R--;for(;P--;){if(ve===A||A!==null&&ve===A.alternate)break t;ve=ds(ve),A=ds(A)}ve=null}else ve=null;ce!==null&&td(J,H,ce,ve,!1),ge!==null&&ut!==null&&td(J,ut,ge,ve,!0)}}e:{if(H=M?fs(M):window,ce=H.nodeName&&H.nodeName.toLowerCase(),ce==="select"||ce==="input"&&H.type==="file")var we=sm;else if(Rc(H))if(Lc)we=lm;else{we=am;var _e=im}else(ce=H.nodeName)&&ce.toLowerCase()==="input"&&(H.type==="checkbox"||H.type==="radio")&&(we=om);if(we&&(we=we(e,M))){Dc(J,we,s,G);break e}_e&&_e(e,H,M),e==="focusout"&&(_e=H._wrapperState)&&_e.controlled&&H.type==="number"&&ye(H,"number",H.value)}switch(_e=M?fs(M):window,e){case"focusin":(Rc(_e)||_e.contentEditable==="true")&&(us=_e,Ko=M,mi=null);break;case"focusout":mi=Ko=us=null;break;case"mousedown":Yo=!0;break;case"contextmenu":case"mouseup":case"dragend":Yo=!1,qc(J,s,G);break;case"selectionchange":if(dm)break;case"keydown":case"keyup":qc(J,s,G)}var je;if(Go)e:{switch(e){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else ls?Ac(e,s)&&(Pe="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Pe="onCompositionStart");Pe&&(Tc&&s.locale!=="ko"&&(ls||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&ls&&(je=_c()):(tr=G,Wo="value"in tr?tr.value:tr.textContent,ls=!0)),_e=va(M,Pe),0<_e.length&&(Pe=new Ec(Pe,e,null,s,G),J.push({event:Pe,listeners:_e}),je?Pe.data=je:(je=Ic(s),je!==null&&(Pe.data=je)))),(je=Zp?em(e,s):tm(e,s))&&(M=va(M,"onBeforeInput"),0<M.length&&(G=new Ec("onBeforeInput","beforeinput",null,s,G),J.push({event:G,listeners:M}),G.data=je))}Zc(J,t)})}function vi(e,t,s){return{instance:e,listener:t,currentTarget:s}}function va(e,t){for(var s=t+"Capture",u=[];e!==null;){var d=e,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Qn(e,s),f!=null&&u.unshift(vi(e,f,d)),f=Qn(e,t),f!=null&&u.push(vi(e,f,d))),e=e.return}return u}function ds(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function td(e,t,s,u,d){for(var f=t._reactName,v=[];s!==null&&s!==u;){var k=s,E=k.alternate,M=k.stateNode;if(E!==null&&E===u)break;k.tag===5&&M!==null&&(k=M,d?(E=Qn(s,f),E!=null&&v.unshift(vi(s,E,k))):d||(E=Qn(s,f),E!=null&&v.push(vi(s,E,k)))),s=s.return}v.length!==0&&e.push({event:t,listeners:v})}var mm=/\r\n?/g,gm=/\u0000|\uFFFD/g;function nd(e){return(typeof e=="string"?e:""+e).replace(mm,`
`).replace(gm,"")}function wa(e,t,s){if(t=nd(t),nd(e)!==t&&s)throw Error(r(425))}function xa(){}var rl=null,sl=null;function il(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var al=typeof setTimeout=="function"?setTimeout:void 0,ym=typeof clearTimeout=="function"?clearTimeout:void 0,rd=typeof Promise=="function"?Promise:void 0,vm=typeof queueMicrotask=="function"?queueMicrotask:typeof rd<"u"?function(e){return rd.resolve(null).then(e).catch(wm)}:al;function wm(e){setTimeout(function(){throw e})}function ol(e,t){var s=t,u=0;do{var d=s.nextSibling;if(e.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"){if(u===0){e.removeChild(d),li(t);return}u--}else s!=="$"&&s!=="$?"&&s!=="$!"||u++;s=d}while(s);li(t)}function rr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function sd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var hs=Math.random().toString(36).slice(2),kn="__reactFiber$"+hs,wi="__reactProps$"+hs,An="__reactContainer$"+hs,ll="__reactEvents$"+hs,xm="__reactListeners$"+hs,bm="__reactHandles$"+hs;function Ar(e){var t=e[kn];if(t)return t;for(var s=e.parentNode;s;){if(t=s[An]||s[kn]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=sd(e);e!==null;){if(s=e[kn])return s;e=sd(e)}return t}e=s,s=e.parentNode}return null}function xi(e){return e=e[kn]||e[An],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function ba(e){return e[wi]||null}var ul=[],ps=-1;function sr(e){return{current:e}}function rt(e){0>ps||(e.current=ul[ps],ul[ps]=null,ps--)}function Ze(e,t){ps++,ul[ps]=e.current,e.current=t}var ir={},Tt=sr(ir),$t=sr(!1),Ir=ir;function ms(e,t){var s=e.type.contextTypes;if(!s)return ir;var u=e.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===t)return u.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in s)d[f]=t[f];return u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function zt(e){return e=e.childContextTypes,e!=null}function ka(){rt($t),rt(Tt)}function id(e,t,s){if(Tt.current!==ir)throw Error(r(168));Ze(Tt,t),Ze($t,s)}function ad(e,t,s){var u=e.stateNode;if(t=t.childContextTypes,typeof u.getChildContext!="function")return s;u=u.getChildContext();for(var d in u)if(!(d in t))throw Error(r(108,ee(e)||"Unknown",d));return j({},s,u)}function Sa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ir,Ir=Tt.current,Ze(Tt,e),Ze($t,$t.current),!0}function od(e,t,s){var u=e.stateNode;if(!u)throw Error(r(169));s?(e=ad(e,t,Ir),u.__reactInternalMemoizedMergedChildContext=e,rt($t),rt(Tt),Ze(Tt,e)):rt($t),Ze($t,s)}var In=null,_a=!1,cl=!1;function ld(e){In===null?In=[e]:In.push(e)}function km(e){_a=!0,ld(e)}function ar(){if(!cl&&In!==null){cl=!0;var e=0,t=Qe;try{var s=In;for(Qe=1;e<s.length;e++){var u=s[e];do u=u(!0);while(u!==null)}In=null,_a=!1}catch(d){throw In!==null&&(In=In.slice(e+1)),ze(Ve,ar),d}finally{Qe=t,cl=!1}}return null}var gs=[],ys=0,ja=null,Na=0,nn=[],rn=0,Rr=null,Rn=1,Dn="";function Dr(e,t){gs[ys++]=Na,gs[ys++]=ja,ja=e,Na=t}function ud(e,t,s){nn[rn++]=Rn,nn[rn++]=Dn,nn[rn++]=Rr,Rr=e;var u=Rn;e=Dn;var d=32-hn(u)-1;u&=~(1<<d),s+=1;var f=32-hn(t)+d;if(30<f){var v=d-d%5;f=(u&(1<<v)-1).toString(32),u>>=v,d-=v,Rn=1<<32-hn(t)+d|s<<d|u,Dn=f+e}else Rn=1<<f|s<<d|u,Dn=e}function dl(e){e.return!==null&&(Dr(e,1),ud(e,1,0))}function hl(e){for(;e===ja;)ja=gs[--ys],gs[ys]=null,Na=gs[--ys],gs[ys]=null;for(;e===Rr;)Rr=nn[--rn],nn[rn]=null,Dn=nn[--rn],nn[rn]=null,Rn=nn[--rn],nn[rn]=null}var Yt=null,Xt=null,st=!1,pn=null;function cd(e,t){var s=ln(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function dd(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Yt=e,Xt=rr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Yt=e,Xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Rr!==null?{id:Rn,overflow:Dn}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=ln(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,Yt=e,Xt=null,!0):!1;default:return!1}}function fl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function pl(e){if(st){var t=Xt;if(t){var s=t;if(!dd(e,t)){if(fl(e))throw Error(r(418));t=rr(s.nextSibling);var u=Yt;t&&dd(e,t)?cd(u,s):(e.flags=e.flags&-4097|2,st=!1,Yt=e)}}else{if(fl(e))throw Error(r(418));e.flags=e.flags&-4097|2,st=!1,Yt=e}}}function hd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Yt=e}function Ea(e){if(e!==Yt)return!1;if(!st)return hd(e),st=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!il(e.type,e.memoizedProps)),t&&(t=Xt)){if(fl(e))throw fd(),Error(r(418));for(;t;)cd(e,t),t=rr(t.nextSibling)}if(hd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Xt=rr(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Xt=null}}else Xt=Yt?rr(e.stateNode.nextSibling):null;return!0}function fd(){for(var e=Xt;e;)e=rr(e.nextSibling)}function vs(){Xt=Yt=null,st=!1}function ml(e){pn===null?pn=[e]:pn.push(e)}var Sm=W.ReactCurrentBatchConfig;function bi(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(r(309));var u=s.stateNode}if(!u)throw Error(r(147,e));var d=u,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(v){var k=d.refs;v===null?delete k[f]:k[f]=v},t._stringRef=f,t)}if(typeof e!="string")throw Error(r(284));if(!s._owner)throw Error(r(290,e))}return e}function Ca(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pd(e){var t=e._init;return t(e._payload)}function md(e){function t(A,P){if(e){var R=A.deletions;R===null?(A.deletions=[P],A.flags|=16):R.push(P)}}function s(A,P){if(!e)return null;for(;P!==null;)t(A,P),P=P.sibling;return null}function u(A,P){for(A=new Map;P!==null;)P.key!==null?A.set(P.key,P):A.set(P.index,P),P=P.sibling;return A}function d(A,P){return A=pr(A,P),A.index=0,A.sibling=null,A}function f(A,P,R){return A.index=R,e?(R=A.alternate,R!==null?(R=R.index,R<P?(A.flags|=2,P):R):(A.flags|=2,P)):(A.flags|=1048576,P)}function v(A){return e&&A.alternate===null&&(A.flags|=2),A}function k(A,P,R,X){return P===null||P.tag!==6?(P=au(R,A.mode,X),P.return=A,P):(P=d(P,R),P.return=A,P)}function E(A,P,R,X){var we=R.type;return we===ie?G(A,P,R.props.children,X,R.key):P!==null&&(P.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===xe&&pd(we)===P.type)?(X=d(P,R.props),X.ref=bi(A,P,R),X.return=A,X):(X=Xa(R.type,R.key,R.props,null,A.mode,X),X.ref=bi(A,P,R),X.return=A,X)}function M(A,P,R,X){return P===null||P.tag!==4||P.stateNode.containerInfo!==R.containerInfo||P.stateNode.implementation!==R.implementation?(P=ou(R,A.mode,X),P.return=A,P):(P=d(P,R.children||[]),P.return=A,P)}function G(A,P,R,X,we){return P===null||P.tag!==7?(P=zr(R,A.mode,X,we),P.return=A,P):(P=d(P,R),P.return=A,P)}function J(A,P,R){if(typeof P=="string"&&P!==""||typeof P=="number")return P=au(""+P,A.mode,R),P.return=A,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case te:return R=Xa(P.type,P.key,P.props,null,A.mode,R),R.ref=bi(A,null,P),R.return=A,R;case Z:return P=ou(P,A.mode,R),P.return=A,P;case xe:var X=P._init;return J(A,X(P._payload),R)}if(be(P)||ue(P))return P=zr(P,A.mode,R,null),P.return=A,P;Ca(A,P)}return null}function H(A,P,R,X){var we=P!==null?P.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return we!==null?null:k(A,P,""+R,X);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case te:return R.key===we?E(A,P,R,X):null;case Z:return R.key===we?M(A,P,R,X):null;case xe:return we=R._init,H(A,P,we(R._payload),X)}if(be(R)||ue(R))return we!==null?null:G(A,P,R,X,null);Ca(A,R)}return null}function ce(A,P,R,X,we){if(typeof X=="string"&&X!==""||typeof X=="number")return A=A.get(R)||null,k(P,A,""+X,we);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case te:return A=A.get(X.key===null?R:X.key)||null,E(P,A,X,we);case Z:return A=A.get(X.key===null?R:X.key)||null,M(P,A,X,we);case xe:var _e=X._init;return ce(A,P,R,_e(X._payload),we)}if(be(X)||ue(X))return A=A.get(R)||null,G(P,A,X,we,null);Ca(P,X)}return null}function ge(A,P,R,X){for(var we=null,_e=null,je=P,Pe=P=0,kt=null;je!==null&&Pe<R.length;Pe++){je.index>Pe?(kt=je,je=null):kt=je.sibling;var He=H(A,je,R[Pe],X);if(He===null){je===null&&(je=kt);break}e&&je&&He.alternate===null&&t(A,je),P=f(He,P,Pe),_e===null?we=He:_e.sibling=He,_e=He,je=kt}if(Pe===R.length)return s(A,je),st&&Dr(A,Pe),we;if(je===null){for(;Pe<R.length;Pe++)je=J(A,R[Pe],X),je!==null&&(P=f(je,P,Pe),_e===null?we=je:_e.sibling=je,_e=je);return st&&Dr(A,Pe),we}for(je=u(A,je);Pe<R.length;Pe++)kt=ce(je,A,Pe,R[Pe],X),kt!==null&&(e&&kt.alternate!==null&&je.delete(kt.key===null?Pe:kt.key),P=f(kt,P,Pe),_e===null?we=kt:_e.sibling=kt,_e=kt);return e&&je.forEach(function(mr){return t(A,mr)}),st&&Dr(A,Pe),we}function ve(A,P,R,X){var we=ue(R);if(typeof we!="function")throw Error(r(150));if(R=we.call(R),R==null)throw Error(r(151));for(var _e=we=null,je=P,Pe=P=0,kt=null,He=R.next();je!==null&&!He.done;Pe++,He=R.next()){je.index>Pe?(kt=je,je=null):kt=je.sibling;var mr=H(A,je,He.value,X);if(mr===null){je===null&&(je=kt);break}e&&je&&mr.alternate===null&&t(A,je),P=f(mr,P,Pe),_e===null?we=mr:_e.sibling=mr,_e=mr,je=kt}if(He.done)return s(A,je),st&&Dr(A,Pe),we;if(je===null){for(;!He.done;Pe++,He=R.next())He=J(A,He.value,X),He!==null&&(P=f(He,P,Pe),_e===null?we=He:_e.sibling=He,_e=He);return st&&Dr(A,Pe),we}for(je=u(A,je);!He.done;Pe++,He=R.next())He=ce(je,A,Pe,He.value,X),He!==null&&(e&&He.alternate!==null&&je.delete(He.key===null?Pe:He.key),P=f(He,P,Pe),_e===null?we=He:_e.sibling=He,_e=He);return e&&je.forEach(function(ng){return t(A,ng)}),st&&Dr(A,Pe),we}function ut(A,P,R,X){if(typeof R=="object"&&R!==null&&R.type===ie&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case te:e:{for(var we=R.key,_e=P;_e!==null;){if(_e.key===we){if(we=R.type,we===ie){if(_e.tag===7){s(A,_e.sibling),P=d(_e,R.props.children),P.return=A,A=P;break e}}else if(_e.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===xe&&pd(we)===_e.type){s(A,_e.sibling),P=d(_e,R.props),P.ref=bi(A,_e,R),P.return=A,A=P;break e}s(A,_e);break}else t(A,_e);_e=_e.sibling}R.type===ie?(P=zr(R.props.children,A.mode,X,R.key),P.return=A,A=P):(X=Xa(R.type,R.key,R.props,null,A.mode,X),X.ref=bi(A,P,R),X.return=A,A=X)}return v(A);case Z:e:{for(_e=R.key;P!==null;){if(P.key===_e)if(P.tag===4&&P.stateNode.containerInfo===R.containerInfo&&P.stateNode.implementation===R.implementation){s(A,P.sibling),P=d(P,R.children||[]),P.return=A,A=P;break e}else{s(A,P);break}else t(A,P);P=P.sibling}P=ou(R,A.mode,X),P.return=A,A=P}return v(A);case xe:return _e=R._init,ut(A,P,_e(R._payload),X)}if(be(R))return ge(A,P,R,X);if(ue(R))return ve(A,P,R,X);Ca(A,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,P!==null&&P.tag===6?(s(A,P.sibling),P=d(P,R),P.return=A,A=P):(s(A,P),P=au(R,A.mode,X),P.return=A,A=P),v(A)):s(A,P)}return ut}var ws=md(!0),gd=md(!1),Ta=sr(null),Pa=null,xs=null,gl=null;function yl(){gl=xs=Pa=null}function vl(e){var t=Ta.current;rt(Ta),e._currentValue=t}function wl(e,t,s){for(;e!==null;){var u=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,u!==null&&(u.childLanes|=t)):u!==null&&(u.childLanes&t)!==t&&(u.childLanes|=t),e===s)break;e=e.return}}function bs(e,t){Pa=e,gl=xs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(qt=!0),e.firstContext=null)}function sn(e){var t=e._currentValue;if(gl!==e)if(e={context:e,memoizedValue:t,next:null},xs===null){if(Pa===null)throw Error(r(308));xs=e,Pa.dependencies={lanes:0,firstContext:e}}else xs=xs.next=e;return t}var Lr=null;function xl(e){Lr===null?Lr=[e]:Lr.push(e)}function yd(e,t,s,u){var d=t.interleaved;return d===null?(s.next=s,xl(t)):(s.next=d.next,d.next=s),t.interleaved=s,Ln(e,u)}function Ln(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var or=!1;function bl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function lr(e,t,s){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,($e&2)!==0){var d=u.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),u.pending=t,Ln(e,s)}return d=u.interleaved,d===null?(t.next=t,xl(u)):(t.next=d.next,d.next=t),u.interleaved=t,Ln(e,s)}function Oa(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var u=t.lanes;u&=e.pendingLanes,s|=u,t.lanes=s,Do(e,s)}}function wd(e,t){var s=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var d=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var v={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};f===null?d=f=v:f=f.next=v,s=s.next}while(s!==null);f===null?d=f=t:f=f.next=t}else d=f=t;s={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:u.shared,effects:u.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Aa(e,t,s,u){var d=e.updateQueue;or=!1;var f=d.firstBaseUpdate,v=d.lastBaseUpdate,k=d.shared.pending;if(k!==null){d.shared.pending=null;var E=k,M=E.next;E.next=null,v===null?f=M:v.next=M,v=E;var G=e.alternate;G!==null&&(G=G.updateQueue,k=G.lastBaseUpdate,k!==v&&(k===null?G.firstBaseUpdate=M:k.next=M,G.lastBaseUpdate=E))}if(f!==null){var J=d.baseState;v=0,G=M=E=null,k=f;do{var H=k.lane,ce=k.eventTime;if((u&H)===H){G!==null&&(G=G.next={eventTime:ce,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var ge=e,ve=k;switch(H=t,ce=s,ve.tag){case 1:if(ge=ve.payload,typeof ge=="function"){J=ge.call(ce,J,H);break e}J=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ve.payload,H=typeof ge=="function"?ge.call(ce,J,H):ge,H==null)break e;J=j({},J,H);break e;case 2:or=!0}}k.callback!==null&&k.lane!==0&&(e.flags|=64,H=d.effects,H===null?d.effects=[k]:H.push(k))}else ce={eventTime:ce,lane:H,tag:k.tag,payload:k.payload,callback:k.callback,next:null},G===null?(M=G=ce,E=J):G=G.next=ce,v|=H;if(k=k.next,k===null){if(k=d.shared.pending,k===null)break;H=k,k=H.next,H.next=null,d.lastBaseUpdate=H,d.shared.pending=null}}while(!0);if(G===null&&(E=J),d.baseState=E,d.firstBaseUpdate=M,d.lastBaseUpdate=G,t=d.shared.interleaved,t!==null){d=t;do v|=d.lane,d=d.next;while(d!==t)}else f===null&&(d.shared.lanes=0);Fr|=v,e.lanes=v,e.memoizedState=J}}function xd(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var u=e[t],d=u.callback;if(d!==null){if(u.callback=null,u=s,typeof d!="function")throw Error(r(191,d));d.call(u)}}}var ki={},Sn=sr(ki),Si=sr(ki),_i=sr(ki);function Mr(e){if(e===ki)throw Error(r(174));return e}function kl(e,t){switch(Ze(_i,t),Ze(Si,e),Ze(Sn,ki),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ft(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ft(t,e)}rt(Sn),Ze(Sn,t)}function ks(){rt(Sn),rt(Si),rt(_i)}function bd(e){Mr(_i.current);var t=Mr(Sn.current),s=Ft(t,e.type);t!==s&&(Ze(Si,e),Ze(Sn,s))}function Sl(e){Si.current===e&&(rt(Sn),rt(Si))}var it=sr(0);function Ia(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _l=[];function jl(){for(var e=0;e<_l.length;e++)_l[e]._workInProgressVersionPrimary=null;_l.length=0}var Ra=W.ReactCurrentDispatcher,Nl=W.ReactCurrentBatchConfig,Ur=0,at=null,pt=null,xt=null,Da=!1,ji=!1,Ni=0,_m=0;function Pt(){throw Error(r(321))}function El(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!fn(e[s],t[s]))return!1;return!0}function Cl(e,t,s,u,d,f){if(Ur=f,at=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ra.current=e===null||e.memoizedState===null?Cm:Tm,e=s(u,d),ji){f=0;do{if(ji=!1,Ni=0,25<=f)throw Error(r(301));f+=1,xt=pt=null,t.updateQueue=null,Ra.current=Pm,e=s(u,d)}while(ji)}if(Ra.current=Ua,t=pt!==null&&pt.next!==null,Ur=0,xt=pt=at=null,Da=!1,t)throw Error(r(300));return e}function Tl(){var e=Ni!==0;return Ni=0,e}function _n(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?at.memoizedState=xt=e:xt=xt.next=e,xt}function an(){if(pt===null){var e=at.alternate;e=e!==null?e.memoizedState:null}else e=pt.next;var t=xt===null?at.memoizedState:xt.next;if(t!==null)xt=t,pt=e;else{if(e===null)throw Error(r(310));pt=e,e={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},xt===null?at.memoizedState=xt=e:xt=xt.next=e}return xt}function Ei(e,t){return typeof t=="function"?t(e):t}function Pl(e){var t=an(),s=t.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=e;var u=pt,d=u.baseQueue,f=s.pending;if(f!==null){if(d!==null){var v=d.next;d.next=f.next,f.next=v}u.baseQueue=d=f,s.pending=null}if(d!==null){f=d.next,u=u.baseState;var k=v=null,E=null,M=f;do{var G=M.lane;if((Ur&G)===G)E!==null&&(E=E.next={lane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),u=M.hasEagerState?M.eagerState:e(u,M.action);else{var J={lane:G,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null};E===null?(k=E=J,v=u):E=E.next=J,at.lanes|=G,Fr|=G}M=M.next}while(M!==null&&M!==f);E===null?v=u:E.next=k,fn(u,t.memoizedState)||(qt=!0),t.memoizedState=u,t.baseState=v,t.baseQueue=E,s.lastRenderedState=u}if(e=s.interleaved,e!==null){d=e;do f=d.lane,at.lanes|=f,Fr|=f,d=d.next;while(d!==e)}else d===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Ol(e){var t=an(),s=t.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=e;var u=s.dispatch,d=s.pending,f=t.memoizedState;if(d!==null){s.pending=null;var v=d=d.next;do f=e(f,v.action),v=v.next;while(v!==d);fn(f,t.memoizedState)||(qt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),s.lastRenderedState=f}return[f,u]}function kd(){}function Sd(e,t){var s=at,u=an(),d=t(),f=!fn(u.memoizedState,d);if(f&&(u.memoizedState=d,qt=!0),u=u.queue,Al(Nd.bind(null,s,u,e),[e]),u.getSnapshot!==t||f||xt!==null&&xt.memoizedState.tag&1){if(s.flags|=2048,Ci(9,jd.bind(null,s,u,d,t),void 0,null),bt===null)throw Error(r(349));(Ur&30)!==0||_d(s,t,d)}return d}function _d(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=at.updateQueue,t===null?(t={lastEffect:null,stores:null},at.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function jd(e,t,s,u){t.value=s,t.getSnapshot=u,Ed(t)&&Cd(e)}function Nd(e,t,s){return s(function(){Ed(t)&&Cd(e)})}function Ed(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!fn(e,s)}catch{return!0}}function Cd(e){var t=Ln(e,1);t!==null&&vn(t,e,1,-1)}function Td(e){var t=_n();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:e},t.queue=e,e=e.dispatch=Em.bind(null,at,e),[t.memoizedState,e]}function Ci(e,t,s,u){return e={tag:e,create:t,destroy:s,deps:u,next:null},t=at.updateQueue,t===null?(t={lastEffect:null,stores:null},at.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(u=s.next,s.next=e,e.next=u,t.lastEffect=e)),e}function Pd(){return an().memoizedState}function La(e,t,s,u){var d=_n();at.flags|=e,d.memoizedState=Ci(1|t,s,void 0,u===void 0?null:u)}function Ma(e,t,s,u){var d=an();u=u===void 0?null:u;var f=void 0;if(pt!==null){var v=pt.memoizedState;if(f=v.destroy,u!==null&&El(u,v.deps)){d.memoizedState=Ci(t,s,f,u);return}}at.flags|=e,d.memoizedState=Ci(1|t,s,f,u)}function Od(e,t){return La(8390656,8,e,t)}function Al(e,t){return Ma(2048,8,e,t)}function Ad(e,t){return Ma(4,2,e,t)}function Id(e,t){return Ma(4,4,e,t)}function Rd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dd(e,t,s){return s=s!=null?s.concat([e]):null,Ma(4,4,Rd.bind(null,t,e),s)}function Il(){}function Ld(e,t){var s=an();t=t===void 0?null:t;var u=s.memoizedState;return u!==null&&t!==null&&El(t,u[1])?u[0]:(s.memoizedState=[e,t],e)}function Md(e,t){var s=an();t=t===void 0?null:t;var u=s.memoizedState;return u!==null&&t!==null&&El(t,u[1])?u[0]:(e=e(),s.memoizedState=[e,t],e)}function Ud(e,t,s){return(Ur&21)===0?(e.baseState&&(e.baseState=!1,qt=!0),e.memoizedState=s):(fn(s,t)||(s=pc(),at.lanes|=s,Fr|=s,e.baseState=!0),t)}function jm(e,t){var s=Qe;Qe=s!==0&&4>s?s:4,e(!0);var u=Nl.transition;Nl.transition={};try{e(!1),t()}finally{Qe=s,Nl.transition=u}}function Fd(){return an().memoizedState}function Nm(e,t,s){var u=hr(e);if(s={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null},Wd(e))Bd(t,s);else if(s=yd(e,t,s,u),s!==null){var d=Dt();vn(s,e,u,d),$d(s,t,u)}}function Em(e,t,s){var u=hr(e),d={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null};if(Wd(e))Bd(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var v=t.lastRenderedState,k=f(v,s);if(d.hasEagerState=!0,d.eagerState=k,fn(k,v)){var E=t.interleaved;E===null?(d.next=d,xl(t)):(d.next=E.next,E.next=d),t.interleaved=d;return}}catch{}finally{}s=yd(e,t,d,u),s!==null&&(d=Dt(),vn(s,e,u,d),$d(s,t,u))}}function Wd(e){var t=e.alternate;return e===at||t!==null&&t===at}function Bd(e,t){ji=Da=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function $d(e,t,s){if((s&4194240)!==0){var u=t.lanes;u&=e.pendingLanes,s|=u,t.lanes=s,Do(e,s)}}var Ua={readContext:sn,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useInsertionEffect:Pt,useLayoutEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useMutableSource:Pt,useSyncExternalStore:Pt,useId:Pt,unstable_isNewReconciler:!1},Cm={readContext:sn,useCallback:function(e,t){return _n().memoizedState=[e,t===void 0?null:t],e},useContext:sn,useEffect:Od,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,La(4194308,4,Rd.bind(null,t,e),s)},useLayoutEffect:function(e,t){return La(4194308,4,e,t)},useInsertionEffect:function(e,t){return La(4,2,e,t)},useMemo:function(e,t){var s=_n();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var u=_n();return t=s!==void 0?s(t):t,u.memoizedState=u.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},u.queue=e,e=e.dispatch=Nm.bind(null,at,e),[u.memoizedState,e]},useRef:function(e){var t=_n();return e={current:e},t.memoizedState=e},useState:Td,useDebugValue:Il,useDeferredValue:function(e){return _n().memoizedState=e},useTransition:function(){var e=Td(!1),t=e[0];return e=jm.bind(null,e[1]),_n().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var u=at,d=_n();if(st){if(s===void 0)throw Error(r(407));s=s()}else{if(s=t(),bt===null)throw Error(r(349));(Ur&30)!==0||_d(u,t,s)}d.memoizedState=s;var f={value:s,getSnapshot:t};return d.queue=f,Od(Nd.bind(null,u,f,e),[e]),u.flags|=2048,Ci(9,jd.bind(null,u,f,s,t),void 0,null),s},useId:function(){var e=_n(),t=bt.identifierPrefix;if(st){var s=Dn,u=Rn;s=(u&~(1<<32-hn(u)-1)).toString(32)+s,t=":"+t+"R"+s,s=Ni++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=_m++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Tm={readContext:sn,useCallback:Ld,useContext:sn,useEffect:Al,useImperativeHandle:Dd,useInsertionEffect:Ad,useLayoutEffect:Id,useMemo:Md,useReducer:Pl,useRef:Pd,useState:function(){return Pl(Ei)},useDebugValue:Il,useDeferredValue:function(e){var t=an();return Ud(t,pt.memoizedState,e)},useTransition:function(){var e=Pl(Ei)[0],t=an().memoizedState;return[e,t]},useMutableSource:kd,useSyncExternalStore:Sd,useId:Fd,unstable_isNewReconciler:!1},Pm={readContext:sn,useCallback:Ld,useContext:sn,useEffect:Al,useImperativeHandle:Dd,useInsertionEffect:Ad,useLayoutEffect:Id,useMemo:Md,useReducer:Ol,useRef:Pd,useState:function(){return Ol(Ei)},useDebugValue:Il,useDeferredValue:function(e){var t=an();return pt===null?t.memoizedState=e:Ud(t,pt.memoizedState,e)},useTransition:function(){var e=Ol(Ei)[0],t=an().memoizedState;return[e,t]},useMutableSource:kd,useSyncExternalStore:Sd,useId:Fd,unstable_isNewReconciler:!1};function mn(e,t){if(e&&e.defaultProps){t=j({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Rl(e,t,s,u){t=e.memoizedState,s=s(u,t),s=s==null?t:j({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Fa={isMounted:function(e){return(e=e._reactInternals)?Tn(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var u=Dt(),d=hr(e),f=Mn(u,d);f.payload=t,s!=null&&(f.callback=s),t=lr(e,f,d),t!==null&&(vn(t,e,d,u),Oa(t,e,d))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var u=Dt(),d=hr(e),f=Mn(u,d);f.tag=1,f.payload=t,s!=null&&(f.callback=s),t=lr(e,f,d),t!==null&&(vn(t,e,d,u),Oa(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Dt(),u=hr(e),d=Mn(s,u);d.tag=2,t!=null&&(d.callback=t),t=lr(e,d,u),t!==null&&(vn(t,e,u,s),Oa(t,e,u))}};function zd(e,t,s,u,d,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,f,v):t.prototype&&t.prototype.isPureReactComponent?!pi(s,u)||!pi(d,f):!0}function qd(e,t,s){var u=!1,d=ir,f=t.contextType;return typeof f=="object"&&f!==null?f=sn(f):(d=zt(t)?Ir:Tt.current,u=t.contextTypes,f=(u=u!=null)?ms(e,d):ir),t=new t(s,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Fa,e.stateNode=t,t._reactInternals=e,u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=f),t}function Hd(e,t,s,u){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,u),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,u),t.state!==e&&Fa.enqueueReplaceState(t,t.state,null)}function Dl(e,t,s,u){var d=e.stateNode;d.props=s,d.state=e.memoizedState,d.refs={},bl(e);var f=t.contextType;typeof f=="object"&&f!==null?d.context=sn(f):(f=zt(t)?Ir:Tt.current,d.context=ms(e,f)),d.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(Rl(e,t,f,s),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&Fa.enqueueReplaceState(d,d.state,null),Aa(e,s,d,u),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function Ss(e,t){try{var s="",u=t;do s+=re(u),u=u.return;while(u);var d=s}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:d,digest:null}}function Ll(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Ml(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var Om=typeof WeakMap=="function"?WeakMap:Map;function Gd(e,t,s){s=Mn(-1,s),s.tag=3,s.payload={element:null};var u=t.value;return s.callback=function(){Ga||(Ga=!0,Xl=u),Ml(e,t)},s}function Vd(e,t,s){s=Mn(-1,s),s.tag=3;var u=e.type.getDerivedStateFromError;if(typeof u=="function"){var d=t.value;s.payload=function(){return u(d)},s.callback=function(){Ml(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(s.callback=function(){Ml(e,t),typeof u!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var v=t.stack;this.componentDidCatch(t.value,{componentStack:v!==null?v:""})}),s}function Jd(e,t,s){var u=e.pingCache;if(u===null){u=e.pingCache=new Om;var d=new Set;u.set(t,d)}else d=u.get(t),d===void 0&&(d=new Set,u.set(t,d));d.has(s)||(d.add(s),e=Hm.bind(null,e,t,s),t.then(e,e))}function Qd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Kd(e,t,s,u,d){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Mn(-1,1),t.tag=2,lr(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=d,e)}var Am=W.ReactCurrentOwner,qt=!1;function Rt(e,t,s,u){t.child=e===null?gd(t,null,s,u):ws(t,e.child,s,u)}function Yd(e,t,s,u,d){s=s.render;var f=t.ref;return bs(t,d),u=Cl(e,t,s,u,f,d),s=Tl(),e!==null&&!qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Un(e,t,d)):(st&&s&&dl(t),t.flags|=1,Rt(e,t,u,d),t.child)}function Xd(e,t,s,u,d){if(e===null){var f=s.type;return typeof f=="function"&&!iu(f)&&f.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=f,Zd(e,t,f,u,d)):(e=Xa(s.type,null,u,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&d)===0){var v=f.memoizedProps;if(s=s.compare,s=s!==null?s:pi,s(v,u)&&e.ref===t.ref)return Un(e,t,d)}return t.flags|=1,e=pr(f,u),e.ref=t.ref,e.return=t,t.child=e}function Zd(e,t,s,u,d){if(e!==null){var f=e.memoizedProps;if(pi(f,u)&&e.ref===t.ref)if(qt=!1,t.pendingProps=u=f,(e.lanes&d)!==0)(e.flags&131072)!==0&&(qt=!0);else return t.lanes=e.lanes,Un(e,t,d)}return Ul(e,t,s,u,d)}function eh(e,t,s){var u=t.pendingProps,d=u.children,f=e!==null?e.memoizedState:null;if(u.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(js,Zt),Zt|=s;else{if((s&1073741824)===0)return e=f!==null?f.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ze(js,Zt),Zt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=f!==null?f.baseLanes:s,Ze(js,Zt),Zt|=u}else f!==null?(u=f.baseLanes|s,t.memoizedState=null):u=s,Ze(js,Zt),Zt|=u;return Rt(e,t,d,s),t.child}function th(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Ul(e,t,s,u,d){var f=zt(s)?Ir:Tt.current;return f=ms(t,f),bs(t,d),s=Cl(e,t,s,u,f,d),u=Tl(),e!==null&&!qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Un(e,t,d)):(st&&u&&dl(t),t.flags|=1,Rt(e,t,s,d),t.child)}function nh(e,t,s,u,d){if(zt(s)){var f=!0;Sa(t)}else f=!1;if(bs(t,d),t.stateNode===null)Ba(e,t),qd(t,s,u),Dl(t,s,u,d),u=!0;else if(e===null){var v=t.stateNode,k=t.memoizedProps;v.props=k;var E=v.context,M=s.contextType;typeof M=="object"&&M!==null?M=sn(M):(M=zt(s)?Ir:Tt.current,M=ms(t,M));var G=s.getDerivedStateFromProps,J=typeof G=="function"||typeof v.getSnapshotBeforeUpdate=="function";J||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(k!==u||E!==M)&&Hd(t,v,u,M),or=!1;var H=t.memoizedState;v.state=H,Aa(t,u,v,d),E=t.memoizedState,k!==u||H!==E||$t.current||or?(typeof G=="function"&&(Rl(t,s,G,u),E=t.memoizedState),(k=or||zd(t,s,k,u,H,E,M))?(J||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(t.flags|=4194308)):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=u,t.memoizedState=E),v.props=u,v.state=E,v.context=M,u=k):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),u=!1)}else{v=t.stateNode,vd(e,t),k=t.memoizedProps,M=t.type===t.elementType?k:mn(t.type,k),v.props=M,J=t.pendingProps,H=v.context,E=s.contextType,typeof E=="object"&&E!==null?E=sn(E):(E=zt(s)?Ir:Tt.current,E=ms(t,E));var ce=s.getDerivedStateFromProps;(G=typeof ce=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(k!==J||H!==E)&&Hd(t,v,u,E),or=!1,H=t.memoizedState,v.state=H,Aa(t,u,v,d);var ge=t.memoizedState;k!==J||H!==ge||$t.current||or?(typeof ce=="function"&&(Rl(t,s,ce,u),ge=t.memoizedState),(M=or||zd(t,s,M,u,H,ge,E)||!1)?(G||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,ge,E),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,ge,E)),typeof v.componentDidUpdate=="function"&&(t.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof v.componentDidUpdate!="function"||k===e.memoizedProps&&H===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||k===e.memoizedProps&&H===e.memoizedState||(t.flags|=1024),t.memoizedProps=u,t.memoizedState=ge),v.props=u,v.state=ge,v.context=E,u=M):(typeof v.componentDidUpdate!="function"||k===e.memoizedProps&&H===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||k===e.memoizedProps&&H===e.memoizedState||(t.flags|=1024),u=!1)}return Fl(e,t,s,u,f,d)}function Fl(e,t,s,u,d,f){th(e,t);var v=(t.flags&128)!==0;if(!u&&!v)return d&&od(t,s,!1),Un(e,t,f);u=t.stateNode,Am.current=t;var k=v&&typeof s.getDerivedStateFromError!="function"?null:u.render();return t.flags|=1,e!==null&&v?(t.child=ws(t,e.child,null,f),t.child=ws(t,null,k,f)):Rt(e,t,k,f),t.memoizedState=u.state,d&&od(t,s,!0),t.child}function rh(e){var t=e.stateNode;t.pendingContext?id(e,t.pendingContext,t.pendingContext!==t.context):t.context&&id(e,t.context,!1),kl(e,t.containerInfo)}function sh(e,t,s,u,d){return vs(),ml(d),t.flags|=256,Rt(e,t,s,u),t.child}var Wl={dehydrated:null,treeContext:null,retryLane:0};function Bl(e){return{baseLanes:e,cachePool:null,transitions:null}}function ih(e,t,s){var u=t.pendingProps,d=it.current,f=!1,v=(t.flags&128)!==0,k;if((k=v)||(k=e!==null&&e.memoizedState===null?!1:(d&2)!==0),k?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),Ze(it,d&1),e===null)return pl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(v=u.children,e=u.fallback,f?(u=t.mode,f=t.child,v={mode:"hidden",children:v},(u&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=v):f=Za(v,u,0,null),e=zr(e,u,s,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=Bl(s),t.memoizedState=Wl,e):$l(t,v));if(d=e.memoizedState,d!==null&&(k=d.dehydrated,k!==null))return Im(e,t,v,u,k,d,s);if(f){f=u.fallback,v=t.mode,d=e.child,k=d.sibling;var E={mode:"hidden",children:u.children};return(v&1)===0&&t.child!==d?(u=t.child,u.childLanes=0,u.pendingProps=E,t.deletions=null):(u=pr(d,E),u.subtreeFlags=d.subtreeFlags&14680064),k!==null?f=pr(k,f):(f=zr(f,v,s,null),f.flags|=2),f.return=t,u.return=t,u.sibling=f,t.child=u,u=f,f=t.child,v=e.child.memoizedState,v=v===null?Bl(s):{baseLanes:v.baseLanes|s,cachePool:null,transitions:v.transitions},f.memoizedState=v,f.childLanes=e.childLanes&~s,t.memoizedState=Wl,u}return f=e.child,e=f.sibling,u=pr(f,{mode:"visible",children:u.children}),(t.mode&1)===0&&(u.lanes=s),u.return=t,u.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=u,t.memoizedState=null,u}function $l(e,t){return t=Za({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Wa(e,t,s,u){return u!==null&&ml(u),ws(t,e.child,null,s),e=$l(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Im(e,t,s,u,d,f,v){if(s)return t.flags&256?(t.flags&=-257,u=Ll(Error(r(422))),Wa(e,t,v,u)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=u.fallback,d=t.mode,u=Za({mode:"visible",children:u.children},d,0,null),f=zr(f,d,v,null),f.flags|=2,u.return=t,f.return=t,u.sibling=f,t.child=u,(t.mode&1)!==0&&ws(t,e.child,null,v),t.child.memoizedState=Bl(v),t.memoizedState=Wl,f);if((t.mode&1)===0)return Wa(e,t,v,null);if(d.data==="$!"){if(u=d.nextSibling&&d.nextSibling.dataset,u)var k=u.dgst;return u=k,f=Error(r(419)),u=Ll(f,u,void 0),Wa(e,t,v,u)}if(k=(v&e.childLanes)!==0,qt||k){if(u=bt,u!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(u.suspendedLanes|v))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,Ln(e,d),vn(u,e,d,-1))}return su(),u=Ll(Error(r(421))),Wa(e,t,v,u)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=Gm.bind(null,e),d._reactRetry=t,null):(e=f.treeContext,Xt=rr(d.nextSibling),Yt=t,st=!0,pn=null,e!==null&&(nn[rn++]=Rn,nn[rn++]=Dn,nn[rn++]=Rr,Rn=e.id,Dn=e.overflow,Rr=t),t=$l(t,u.children),t.flags|=4096,t)}function ah(e,t,s){e.lanes|=t;var u=e.alternate;u!==null&&(u.lanes|=t),wl(e.return,t,s)}function zl(e,t,s,u,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:d}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=u,f.tail=s,f.tailMode=d)}function oh(e,t,s){var u=t.pendingProps,d=u.revealOrder,f=u.tail;if(Rt(e,t,u.children,s),u=it.current,(u&2)!==0)u=u&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ah(e,s,t);else if(e.tag===19)ah(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}u&=1}if(Ze(it,u),(t.mode&1)===0)t.memoizedState=null;else switch(d){case"forwards":for(s=t.child,d=null;s!==null;)e=s.alternate,e!==null&&Ia(e)===null&&(d=s),s=s.sibling;s=d,s===null?(d=t.child,t.child=null):(d=s.sibling,s.sibling=null),zl(t,!1,d,s,f);break;case"backwards":for(s=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Ia(e)===null){t.child=d;break}e=d.sibling,d.sibling=s,s=d,d=e}zl(t,!0,s,null,f);break;case"together":zl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ba(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Un(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Fr|=t.lanes,(s&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,s=pr(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=pr(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Rm(e,t,s){switch(t.tag){case 3:rh(t),vs();break;case 5:bd(t);break;case 1:zt(t.type)&&Sa(t);break;case 4:kl(t,t.stateNode.containerInfo);break;case 10:var u=t.type._context,d=t.memoizedProps.value;Ze(Ta,u._currentValue),u._currentValue=d;break;case 13:if(u=t.memoizedState,u!==null)return u.dehydrated!==null?(Ze(it,it.current&1),t.flags|=128,null):(s&t.child.childLanes)!==0?ih(e,t,s):(Ze(it,it.current&1),e=Un(e,t,s),e!==null?e.sibling:null);Ze(it,it.current&1);break;case 19:if(u=(s&t.childLanes)!==0,(e.flags&128)!==0){if(u)return oh(e,t,s);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ze(it,it.current),u)break;return null;case 22:case 23:return t.lanes=0,eh(e,t,s)}return Un(e,t,s)}var lh,ql,uh,ch;lh=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},ql=function(){},uh=function(e,t,s,u){var d=e.memoizedProps;if(d!==u){e=t.stateNode,Mr(Sn.current);var f=null;switch(s){case"input":d=Ie(e,d),u=Ie(e,u),f=[];break;case"select":d=j({},d,{value:void 0}),u=j({},u,{value:void 0}),f=[];break;case"textarea":d=Te(e,d),u=Te(e,u),f=[];break;default:typeof d.onClick!="function"&&typeof u.onClick=="function"&&(e.onclick=xa)}Er(s,u);var v;s=null;for(M in d)if(!u.hasOwnProperty(M)&&d.hasOwnProperty(M)&&d[M]!=null)if(M==="style"){var k=d[M];for(v in k)k.hasOwnProperty(v)&&(s||(s={}),s[v]="")}else M!=="dangerouslySetInnerHTML"&&M!=="children"&&M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(l.hasOwnProperty(M)?f||(f=[]):(f=f||[]).push(M,null));for(M in u){var E=u[M];if(k=d?.[M],u.hasOwnProperty(M)&&E!==k&&(E!=null||k!=null))if(M==="style")if(k){for(v in k)!k.hasOwnProperty(v)||E&&E.hasOwnProperty(v)||(s||(s={}),s[v]="");for(v in E)E.hasOwnProperty(v)&&k[v]!==E[v]&&(s||(s={}),s[v]=E[v])}else s||(f||(f=[]),f.push(M,s)),s=E;else M==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,k=k?k.__html:void 0,E!=null&&k!==E&&(f=f||[]).push(M,E)):M==="children"?typeof E!="string"&&typeof E!="number"||(f=f||[]).push(M,""+E):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&(l.hasOwnProperty(M)?(E!=null&&M==="onScroll"&&nt("scroll",e),f||k===E||(f=[])):(f=f||[]).push(M,E))}s&&(f=f||[]).push("style",s);var M=f;(t.updateQueue=M)&&(t.flags|=4)}},ch=function(e,t,s,u){s!==u&&(t.flags|=4)};function Ti(e,t){if(!st)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function Ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,u=0;if(t)for(var d=e.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=u,e.childLanes=s,t}function Dm(e,t,s){var u=t.pendingProps;switch(hl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(t),null;case 1:return zt(t.type)&&ka(),Ot(t),null;case 3:return u=t.stateNode,ks(),rt($t),rt(Tt),jl(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(e===null||e.child===null)&&(Ea(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,pn!==null&&(tu(pn),pn=null))),ql(e,t),Ot(t),null;case 5:Sl(t);var d=Mr(_i.current);if(s=t.type,e!==null&&t.stateNode!=null)uh(e,t,s,u,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!u){if(t.stateNode===null)throw Error(r(166));return Ot(t),null}if(e=Mr(Sn.current),Ea(t)){u=t.stateNode,s=t.type;var f=t.memoizedProps;switch(u[kn]=t,u[wi]=f,e=(t.mode&1)!==0,s){case"dialog":nt("cancel",u),nt("close",u);break;case"iframe":case"object":case"embed":nt("load",u);break;case"video":case"audio":for(d=0;d<gi.length;d++)nt(gi[d],u);break;case"source":nt("error",u);break;case"img":case"image":case"link":nt("error",u),nt("load",u);break;case"details":nt("toggle",u);break;case"input":I(u,f),nt("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!f.multiple},nt("invalid",u);break;case"textarea":Me(u,f),nt("invalid",u)}Er(s,f),d=null;for(var v in f)if(f.hasOwnProperty(v)){var k=f[v];v==="children"?typeof k=="string"?u.textContent!==k&&(f.suppressHydrationWarning!==!0&&wa(u.textContent,k,e),d=["children",k]):typeof k=="number"&&u.textContent!==""+k&&(f.suppressHydrationWarning!==!0&&wa(u.textContent,k,e),d=["children",""+k]):l.hasOwnProperty(v)&&k!=null&&v==="onScroll"&&nt("scroll",u)}switch(s){case"input":We(u),Se(u,f,!0);break;case"textarea":We(u),vt(u);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(u.onclick=xa)}u=d,t.updateQueue=u,u!==null&&(t.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ft(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=v.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof u.is=="string"?e=v.createElement(s,{is:u.is}):(e=v.createElement(s),s==="select"&&(v=e,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):e=v.createElementNS(e,s),e[kn]=t,e[wi]=u,lh(e,t,!1,!1),t.stateNode=e;e:{switch(v=Cr(s,u),s){case"dialog":nt("cancel",e),nt("close",e),d=u;break;case"iframe":case"object":case"embed":nt("load",e),d=u;break;case"video":case"audio":for(d=0;d<gi.length;d++)nt(gi[d],e);d=u;break;case"source":nt("error",e),d=u;break;case"img":case"image":case"link":nt("error",e),nt("load",e),d=u;break;case"details":nt("toggle",e),d=u;break;case"input":I(e,u),d=Ie(e,u),nt("invalid",e);break;case"option":d=u;break;case"select":e._wrapperState={wasMultiple:!!u.multiple},d=j({},u,{value:void 0}),nt("invalid",e);break;case"textarea":Me(e,u),d=Te(e,u),nt("invalid",e);break;default:d=u}Er(s,d),k=d;for(f in k)if(k.hasOwnProperty(f)){var E=k[f];f==="style"?en(e,E):f==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&dn(e,E)):f==="children"?typeof E=="string"?(s!=="textarea"||E!=="")&&Et(e,E):typeof E=="number"&&Et(e,""+E):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(l.hasOwnProperty(f)?E!=null&&f==="onScroll"&&nt("scroll",e):E!=null&&L(e,f,E,v))}switch(s){case"input":We(e),Se(e,u,!1);break;case"textarea":We(e),vt(e);break;case"option":u.value!=null&&e.setAttribute("value",""+le(u.value));break;case"select":e.multiple=!!u.multiple,f=u.value,f!=null?Ce(e,!!u.multiple,f,!1):u.defaultValue!=null&&Ce(e,!!u.multiple,u.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=xa)}switch(s){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ot(t),null;case 6:if(e&&t.stateNode!=null)ch(e,t,e.memoizedProps,u);else{if(typeof u!="string"&&t.stateNode===null)throw Error(r(166));if(s=Mr(_i.current),Mr(Sn.current),Ea(t)){if(u=t.stateNode,s=t.memoizedProps,u[kn]=t,(f=u.nodeValue!==s)&&(e=Yt,e!==null))switch(e.tag){case 3:wa(u.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&wa(u.nodeValue,s,(e.mode&1)!==0)}f&&(t.flags|=4)}else u=(s.nodeType===9?s:s.ownerDocument).createTextNode(u),u[kn]=t,t.stateNode=u}return Ot(t),null;case 13:if(rt(it),u=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(st&&Xt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)fd(),vs(),t.flags|=98560,f=!1;else if(f=Ea(t),u!==null&&u.dehydrated!==null){if(e===null){if(!f)throw Error(r(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[kn]=t}else vs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ot(t),f=!1}else pn!==null&&(tu(pn),pn=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=s,t):(u=u!==null,u!==(e!==null&&e.memoizedState!==null)&&u&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(it.current&1)!==0?mt===0&&(mt=3):su())),t.updateQueue!==null&&(t.flags|=4),Ot(t),null);case 4:return ks(),ql(e,t),e===null&&yi(t.stateNode.containerInfo),Ot(t),null;case 10:return vl(t.type._context),Ot(t),null;case 17:return zt(t.type)&&ka(),Ot(t),null;case 19:if(rt(it),f=t.memoizedState,f===null)return Ot(t),null;if(u=(t.flags&128)!==0,v=f.rendering,v===null)if(u)Ti(f,!1);else{if(mt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(v=Ia(e),v!==null){for(t.flags|=128,Ti(f,!1),u=v.updateQueue,u!==null&&(t.updateQueue=u,t.flags|=4),t.subtreeFlags=0,u=s,s=t.child;s!==null;)f=s,e=u,f.flags&=14680066,v=f.alternate,v===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=v.childLanes,f.lanes=v.lanes,f.child=v.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=v.memoizedProps,f.memoizedState=v.memoizedState,f.updateQueue=v.updateQueue,f.type=v.type,e=v.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Ze(it,it.current&1|2),t.child}e=e.sibling}f.tail!==null&&Je()>Ns&&(t.flags|=128,u=!0,Ti(f,!1),t.lanes=4194304)}else{if(!u)if(e=Ia(v),e!==null){if(t.flags|=128,u=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Ti(f,!0),f.tail===null&&f.tailMode==="hidden"&&!v.alternate&&!st)return Ot(t),null}else 2*Je()-f.renderingStartTime>Ns&&s!==1073741824&&(t.flags|=128,u=!0,Ti(f,!1),t.lanes=4194304);f.isBackwards?(v.sibling=t.child,t.child=v):(s=f.last,s!==null?s.sibling=v:t.child=v,f.last=v)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Je(),t.sibling=null,s=it.current,Ze(it,u?s&1|2:s&1),t):(Ot(t),null);case 22:case 23:return ru(),u=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==u&&(t.flags|=8192),u&&(t.mode&1)!==0?(Zt&1073741824)!==0&&(Ot(t),t.subtreeFlags&6&&(t.flags|=8192)):Ot(t),null;case 24:return null;case 25:return null}throw Error(r(156,t.tag))}function Lm(e,t){switch(hl(t),t.tag){case 1:return zt(t.type)&&ka(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ks(),rt($t),rt(Tt),jl(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Sl(t),null;case 13:if(rt(it),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));vs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return rt(it),null;case 4:return ks(),null;case 10:return vl(t.type._context),null;case 22:case 23:return ru(),null;case 24:return null;default:return null}}var $a=!1,At=!1,Mm=typeof WeakSet=="function"?WeakSet:Set,pe=null;function _s(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(u){ot(e,t,u)}else s.current=null}function Hl(e,t,s){try{s()}catch(u){ot(e,t,u)}}var dh=!1;function Um(e,t){if(rl=la,e=zc(),Qo(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var d=u.anchorOffset,f=u.focusNode;u=u.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break e}var v=0,k=-1,E=-1,M=0,G=0,J=e,H=null;t:for(;;){for(var ce;J!==s||d!==0&&J.nodeType!==3||(k=v+d),J!==f||u!==0&&J.nodeType!==3||(E=v+u),J.nodeType===3&&(v+=J.nodeValue.length),(ce=J.firstChild)!==null;)H=J,J=ce;for(;;){if(J===e)break t;if(H===s&&++M===d&&(k=v),H===f&&++G===u&&(E=v),(ce=J.nextSibling)!==null)break;J=H,H=J.parentNode}J=ce}s=k===-1||E===-1?null:{start:k,end:E}}else s=null}s=s||{start:0,end:0}}else s=null;for(sl={focusedElem:e,selectionRange:s},la=!1,pe=t;pe!==null;)if(t=pe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pe=e;else for(;pe!==null;){t=pe;try{var ge=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var ve=ge.memoizedProps,ut=ge.memoizedState,A=t.stateNode,P=A.getSnapshotBeforeUpdate(t.elementType===t.type?ve:mn(t.type,ve),ut);A.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var R=t.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(X){ot(t,t.return,X)}if(e=t.sibling,e!==null){e.return=t.return,pe=e;break}pe=t.return}return ge=dh,dh=!1,ge}function Pi(e,t,s){var u=t.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&e)===e){var f=d.destroy;d.destroy=void 0,f!==void 0&&Hl(t,s,f)}d=d.next}while(d!==u)}}function za(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var u=s.create;s.destroy=u()}s=s.next}while(s!==t)}}function Gl(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function hh(e){var t=e.alternate;t!==null&&(e.alternate=null,hh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[kn],delete t[wi],delete t[ll],delete t[xm],delete t[bm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fh(e){return e.tag===5||e.tag===3||e.tag===4}function ph(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vl(e,t,s){var u=e.tag;if(u===5||u===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=xa));else if(u!==4&&(e=e.child,e!==null))for(Vl(e,t,s),e=e.sibling;e!==null;)Vl(e,t,s),e=e.sibling}function Jl(e,t,s){var u=e.tag;if(u===5||u===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(u!==4&&(e=e.child,e!==null))for(Jl(e,t,s),e=e.sibling;e!==null;)Jl(e,t,s),e=e.sibling}var jt=null,gn=!1;function ur(e,t,s){for(s=s.child;s!==null;)mh(e,t,s),s=s.sibling}function mh(e,t,s){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(Ee,s)}catch{}switch(s.tag){case 5:At||_s(s,t);case 6:var u=jt,d=gn;jt=null,ur(e,t,s),jt=u,gn=d,jt!==null&&(gn?(e=jt,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):jt.removeChild(s.stateNode));break;case 18:jt!==null&&(gn?(e=jt,s=s.stateNode,e.nodeType===8?ol(e.parentNode,s):e.nodeType===1&&ol(e,s),li(e)):ol(jt,s.stateNode));break;case 4:u=jt,d=gn,jt=s.stateNode.containerInfo,gn=!0,ur(e,t,s),jt=u,gn=d;break;case 0:case 11:case 14:case 15:if(!At&&(u=s.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var f=d,v=f.destroy;f=f.tag,v!==void 0&&((f&2)!==0||(f&4)!==0)&&Hl(s,t,v),d=d.next}while(d!==u)}ur(e,t,s);break;case 1:if(!At&&(_s(s,t),u=s.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=s.memoizedProps,u.state=s.memoizedState,u.componentWillUnmount()}catch(k){ot(s,t,k)}ur(e,t,s);break;case 21:ur(e,t,s);break;case 22:s.mode&1?(At=(u=At)||s.memoizedState!==null,ur(e,t,s),At=u):ur(e,t,s);break;default:ur(e,t,s)}}function gh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Mm),t.forEach(function(u){var d=Vm.bind(null,e,u);s.has(u)||(s.add(u),u.then(d,d))})}}function yn(e,t){var s=t.deletions;if(s!==null)for(var u=0;u<s.length;u++){var d=s[u];try{var f=e,v=t,k=v;e:for(;k!==null;){switch(k.tag){case 5:jt=k.stateNode,gn=!1;break e;case 3:jt=k.stateNode.containerInfo,gn=!0;break e;case 4:jt=k.stateNode.containerInfo,gn=!0;break e}k=k.return}if(jt===null)throw Error(r(160));mh(f,v,d),jt=null,gn=!1;var E=d.alternate;E!==null&&(E.return=null),d.return=null}catch(M){ot(d,t,M)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yh(t,e),t=t.sibling}function yh(e,t){var s=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yn(t,e),jn(e),u&4){try{Pi(3,e,e.return),za(3,e)}catch(ve){ot(e,e.return,ve)}try{Pi(5,e,e.return)}catch(ve){ot(e,e.return,ve)}}break;case 1:yn(t,e),jn(e),u&512&&s!==null&&_s(s,s.return);break;case 5:if(yn(t,e),jn(e),u&512&&s!==null&&_s(s,s.return),e.flags&32){var d=e.stateNode;try{Et(d,"")}catch(ve){ot(e,e.return,ve)}}if(u&4&&(d=e.stateNode,d!=null)){var f=e.memoizedProps,v=s!==null?s.memoizedProps:f,k=e.type,E=e.updateQueue;if(e.updateQueue=null,E!==null)try{k==="input"&&f.type==="radio"&&f.name!=null&&U(d,f),Cr(k,v);var M=Cr(k,f);for(v=0;v<E.length;v+=2){var G=E[v],J=E[v+1];G==="style"?en(d,J):G==="dangerouslySetInnerHTML"?dn(d,J):G==="children"?Et(d,J):L(d,G,J,M)}switch(k){case"input":fe(d,f);break;case"textarea":lt(d,f);break;case"select":var H=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var ce=f.value;ce!=null?Ce(d,!!f.multiple,ce,!1):H!==!!f.multiple&&(f.defaultValue!=null?Ce(d,!!f.multiple,f.defaultValue,!0):Ce(d,!!f.multiple,f.multiple?[]:"",!1))}d[wi]=f}catch(ve){ot(e,e.return,ve)}}break;case 6:if(yn(t,e),jn(e),u&4){if(e.stateNode===null)throw Error(r(162));d=e.stateNode,f=e.memoizedProps;try{d.nodeValue=f}catch(ve){ot(e,e.return,ve)}}break;case 3:if(yn(t,e),jn(e),u&4&&s!==null&&s.memoizedState.isDehydrated)try{li(t.containerInfo)}catch(ve){ot(e,e.return,ve)}break;case 4:yn(t,e),jn(e);break;case 13:yn(t,e),jn(e),d=e.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(Yl=Je())),u&4&&gh(e);break;case 22:if(G=s!==null&&s.memoizedState!==null,e.mode&1?(At=(M=At)||G,yn(t,e),At=M):yn(t,e),jn(e),u&8192){if(M=e.memoizedState!==null,(e.stateNode.isHidden=M)&&!G&&(e.mode&1)!==0)for(pe=e,G=e.child;G!==null;){for(J=pe=G;pe!==null;){switch(H=pe,ce=H.child,H.tag){case 0:case 11:case 14:case 15:Pi(4,H,H.return);break;case 1:_s(H,H.return);var ge=H.stateNode;if(typeof ge.componentWillUnmount=="function"){u=H,s=H.return;try{t=u,ge.props=t.memoizedProps,ge.state=t.memoizedState,ge.componentWillUnmount()}catch(ve){ot(u,s,ve)}}break;case 5:_s(H,H.return);break;case 22:if(H.memoizedState!==null){xh(J);continue}}ce!==null?(ce.return=H,pe=ce):xh(J)}G=G.sibling}e:for(G=null,J=e;;){if(J.tag===5){if(G===null){G=J;try{d=J.stateNode,M?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(k=J.stateNode,E=J.memoizedProps.style,v=E!=null&&E.hasOwnProperty("display")?E.display:null,k.style.display=Gn("display",v))}catch(ve){ot(e,e.return,ve)}}}else if(J.tag===6){if(G===null)try{J.stateNode.nodeValue=M?"":J.memoizedProps}catch(ve){ot(e,e.return,ve)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===e)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===e)break e;for(;J.sibling===null;){if(J.return===null||J.return===e)break e;G===J&&(G=null),J=J.return}G===J&&(G=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:yn(t,e),jn(e),u&4&&gh(e);break;case 21:break;default:yn(t,e),jn(e)}}function jn(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(fh(s)){var u=s;break e}s=s.return}throw Error(r(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(Et(d,""),u.flags&=-33);var f=ph(e);Jl(e,f,d);break;case 3:case 4:var v=u.stateNode.containerInfo,k=ph(e);Vl(e,k,v);break;default:throw Error(r(161))}}catch(E){ot(e,e.return,E)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Fm(e,t,s){pe=e,vh(e)}function vh(e,t,s){for(var u=(e.mode&1)!==0;pe!==null;){var d=pe,f=d.child;if(d.tag===22&&u){var v=d.memoizedState!==null||$a;if(!v){var k=d.alternate,E=k!==null&&k.memoizedState!==null||At;k=$a;var M=At;if($a=v,(At=E)&&!M)for(pe=d;pe!==null;)v=pe,E=v.child,v.tag===22&&v.memoizedState!==null?bh(d):E!==null?(E.return=v,pe=E):bh(d);for(;f!==null;)pe=f,vh(f),f=f.sibling;pe=d,$a=k,At=M}wh(e)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,pe=f):wh(e)}}function wh(e){for(;pe!==null;){var t=pe;if((t.flags&8772)!==0){var s=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:At||za(5,t);break;case 1:var u=t.stateNode;if(t.flags&4&&!At)if(s===null)u.componentDidMount();else{var d=t.elementType===t.type?s.memoizedProps:mn(t.type,s.memoizedProps);u.componentDidUpdate(d,s.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&xd(t,f,u);break;case 3:var v=t.updateQueue;if(v!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}xd(t,v,s)}break;case 5:var k=t.stateNode;if(s===null&&t.flags&4){s=k;var E=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&s.focus();break;case"img":E.src&&(s.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var M=t.alternate;if(M!==null){var G=M.memoizedState;if(G!==null){var J=G.dehydrated;J!==null&&li(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}At||t.flags&512&&Gl(t)}catch(H){ot(t,t.return,H)}}if(t===e){pe=null;break}if(s=t.sibling,s!==null){s.return=t.return,pe=s;break}pe=t.return}}function xh(e){for(;pe!==null;){var t=pe;if(t===e){pe=null;break}var s=t.sibling;if(s!==null){s.return=t.return,pe=s;break}pe=t.return}}function bh(e){for(;pe!==null;){var t=pe;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{za(4,t)}catch(E){ot(t,s,E)}break;case 1:var u=t.stateNode;if(typeof u.componentDidMount=="function"){var d=t.return;try{u.componentDidMount()}catch(E){ot(t,d,E)}}var f=t.return;try{Gl(t)}catch(E){ot(t,f,E)}break;case 5:var v=t.return;try{Gl(t)}catch(E){ot(t,v,E)}}}catch(E){ot(t,t.return,E)}if(t===e){pe=null;break}var k=t.sibling;if(k!==null){k.return=t.return,pe=k;break}pe=t.return}}var Wm=Math.ceil,qa=W.ReactCurrentDispatcher,Ql=W.ReactCurrentOwner,on=W.ReactCurrentBatchConfig,$e=0,bt=null,ct=null,Nt=0,Zt=0,js=sr(0),mt=0,Oi=null,Fr=0,Ha=0,Kl=0,Ai=null,Ht=null,Yl=0,Ns=1/0,Fn=null,Ga=!1,Xl=null,cr=null,Va=!1,dr=null,Ja=0,Ii=0,Zl=null,Qa=-1,Ka=0;function Dt(){return($e&6)!==0?Je():Qa!==-1?Qa:Qa=Je()}function hr(e){return(e.mode&1)===0?1:($e&2)!==0&&Nt!==0?Nt&-Nt:Sm.transition!==null?(Ka===0&&(Ka=pc()),Ka):(e=Qe,e!==0||(e=window.event,e=e===void 0?16:Sc(e.type)),e)}function vn(e,t,s,u){if(50<Ii)throw Ii=0,Zl=null,Error(r(185));ri(e,s,u),(($e&2)===0||e!==bt)&&(e===bt&&(($e&2)===0&&(Ha|=s),mt===4&&fr(e,Nt)),Gt(e,u),s===1&&$e===0&&(t.mode&1)===0&&(Ns=Je()+500,_a&&ar()))}function Gt(e,t){var s=e.callbackNode;Sp(e,t);var u=ia(e,e===bt?Nt:0);if(u===0)s!==null&&qe(s),e.callbackNode=null,e.callbackPriority=0;else if(t=u&-u,e.callbackPriority!==t){if(s!=null&&qe(s),t===1)e.tag===0?km(Sh.bind(null,e)):ld(Sh.bind(null,e)),vm(function(){($e&6)===0&&ar()}),s=null;else{switch(mc(u)){case 1:s=Ve;break;case 4:s=tt;break;case 16:s=Qt;break;case 536870912:s=On;break;default:s=Qt}s=Oh(s,kh.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function kh(e,t){if(Qa=-1,Ka=0,($e&6)!==0)throw Error(r(327));var s=e.callbackNode;if(Es()&&e.callbackNode!==s)return null;var u=ia(e,e===bt?Nt:0);if(u===0)return null;if((u&30)!==0||(u&e.expiredLanes)!==0||t)t=Ya(e,u);else{t=u;var d=$e;$e|=2;var f=jh();(bt!==e||Nt!==t)&&(Fn=null,Ns=Je()+500,Br(e,t));do try{zm();break}catch(k){_h(e,k)}while(!0);yl(),qa.current=f,$e=d,ct!==null?t=0:(bt=null,Nt=0,t=mt)}if(t!==0){if(t===2&&(d=Io(e),d!==0&&(u=d,t=eu(e,d))),t===1)throw s=Oi,Br(e,0),fr(e,u),Gt(e,Je()),s;if(t===6)fr(e,u);else{if(d=e.current.alternate,(u&30)===0&&!Bm(d)&&(t=Ya(e,u),t===2&&(f=Io(e),f!==0&&(u=f,t=eu(e,f))),t===1))throw s=Oi,Br(e,0),fr(e,u),Gt(e,Je()),s;switch(e.finishedWork=d,e.finishedLanes=u,t){case 0:case 1:throw Error(r(345));case 2:$r(e,Ht,Fn);break;case 3:if(fr(e,u),(u&130023424)===u&&(t=Yl+500-Je(),10<t)){if(ia(e,0)!==0)break;if(d=e.suspendedLanes,(d&u)!==u){Dt(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=al($r.bind(null,e,Ht,Fn),t);break}$r(e,Ht,Fn);break;case 4:if(fr(e,u),(u&4194240)===u)break;for(t=e.eventTimes,d=-1;0<u;){var v=31-hn(u);f=1<<v,v=t[v],v>d&&(d=v),u&=~f}if(u=d,u=Je()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Wm(u/1960))-u,10<u){e.timeoutHandle=al($r.bind(null,e,Ht,Fn),u);break}$r(e,Ht,Fn);break;case 5:$r(e,Ht,Fn);break;default:throw Error(r(329))}}}return Gt(e,Je()),e.callbackNode===s?kh.bind(null,e):null}function eu(e,t){var s=Ai;return e.current.memoizedState.isDehydrated&&(Br(e,t).flags|=256),e=Ya(e,t),e!==2&&(t=Ht,Ht=s,t!==null&&tu(t)),e}function tu(e){Ht===null?Ht=e:Ht.push.apply(Ht,e)}function Bm(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var u=0;u<s.length;u++){var d=s[u],f=d.getSnapshot;d=d.value;try{if(!fn(f(),d))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function fr(e,t){for(t&=~Kl,t&=~Ha,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-hn(t),u=1<<s;e[s]=-1,t&=~u}}function Sh(e){if(($e&6)!==0)throw Error(r(327));Es();var t=ia(e,0);if((t&1)===0)return Gt(e,Je()),null;var s=Ya(e,t);if(e.tag!==0&&s===2){var u=Io(e);u!==0&&(t=u,s=eu(e,u))}if(s===1)throw s=Oi,Br(e,0),fr(e,t),Gt(e,Je()),s;if(s===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$r(e,Ht,Fn),Gt(e,Je()),null}function nu(e,t){var s=$e;$e|=1;try{return e(t)}finally{$e=s,$e===0&&(Ns=Je()+500,_a&&ar())}}function Wr(e){dr!==null&&dr.tag===0&&($e&6)===0&&Es();var t=$e;$e|=1;var s=on.transition,u=Qe;try{if(on.transition=null,Qe=1,e)return e()}finally{Qe=u,on.transition=s,$e=t,($e&6)===0&&ar()}}function ru(){Zt=js.current,rt(js)}function Br(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,ym(s)),ct!==null)for(s=ct.return;s!==null;){var u=s;switch(hl(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&ka();break;case 3:ks(),rt($t),rt(Tt),jl();break;case 5:Sl(u);break;case 4:ks();break;case 13:rt(it);break;case 19:rt(it);break;case 10:vl(u.type._context);break;case 22:case 23:ru()}s=s.return}if(bt=e,ct=e=pr(e.current,null),Nt=Zt=t,mt=0,Oi=null,Kl=Ha=Fr=0,Ht=Ai=null,Lr!==null){for(t=0;t<Lr.length;t++)if(s=Lr[t],u=s.interleaved,u!==null){s.interleaved=null;var d=u.next,f=s.pending;if(f!==null){var v=f.next;f.next=d,u.next=v}s.pending=u}Lr=null}return e}function _h(e,t){do{var s=ct;try{if(yl(),Ra.current=Ua,Da){for(var u=at.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}Da=!1}if(Ur=0,xt=pt=at=null,ji=!1,Ni=0,Ql.current=null,s===null||s.return===null){mt=1,Oi=t,ct=null;break}e:{var f=e,v=s.return,k=s,E=t;if(t=Nt,k.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var M=E,G=k,J=G.tag;if((G.mode&1)===0&&(J===0||J===11||J===15)){var H=G.alternate;H?(G.updateQueue=H.updateQueue,G.memoizedState=H.memoizedState,G.lanes=H.lanes):(G.updateQueue=null,G.memoizedState=null)}var ce=Qd(v);if(ce!==null){ce.flags&=-257,Kd(ce,v,k,f,t),ce.mode&1&&Jd(f,M,t),t=ce,E=M;var ge=t.updateQueue;if(ge===null){var ve=new Set;ve.add(E),t.updateQueue=ve}else ge.add(E);break e}else{if((t&1)===0){Jd(f,M,t),su();break e}E=Error(r(426))}}else if(st&&k.mode&1){var ut=Qd(v);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),Kd(ut,v,k,f,t),ml(Ss(E,k));break e}}f=E=Ss(E,k),mt!==4&&(mt=2),Ai===null?Ai=[f]:Ai.push(f),f=v;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var A=Gd(f,E,t);wd(f,A);break e;case 1:k=E;var P=f.type,R=f.stateNode;if((f.flags&128)===0&&(typeof P.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(cr===null||!cr.has(R)))){f.flags|=65536,t&=-t,f.lanes|=t;var X=Vd(f,k,t);wd(f,X);break e}}f=f.return}while(f!==null)}Eh(s)}catch(we){t=we,ct===s&&s!==null&&(ct=s=s.return);continue}break}while(!0)}function jh(){var e=qa.current;return qa.current=Ua,e===null?Ua:e}function su(){(mt===0||mt===3||mt===2)&&(mt=4),bt===null||(Fr&268435455)===0&&(Ha&268435455)===0||fr(bt,Nt)}function Ya(e,t){var s=$e;$e|=2;var u=jh();(bt!==e||Nt!==t)&&(Fn=null,Br(e,t));do try{$m();break}catch(d){_h(e,d)}while(!0);if(yl(),$e=s,qa.current=u,ct!==null)throw Error(r(261));return bt=null,Nt=0,mt}function $m(){for(;ct!==null;)Nh(ct)}function zm(){for(;ct!==null&&!Be();)Nh(ct)}function Nh(e){var t=Ph(e.alternate,e,Zt);e.memoizedProps=e.pendingProps,t===null?Eh(e):ct=t,Ql.current=null}function Eh(e){var t=e;do{var s=t.alternate;if(e=t.return,(t.flags&32768)===0){if(s=Dm(s,t,Zt),s!==null){ct=s;return}}else{if(s=Lm(s,t),s!==null){s.flags&=32767,ct=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{mt=6,ct=null;return}}if(t=t.sibling,t!==null){ct=t;return}ct=t=e}while(t!==null);mt===0&&(mt=5)}function $r(e,t,s){var u=Qe,d=on.transition;try{on.transition=null,Qe=1,qm(e,t,s,u)}finally{on.transition=d,Qe=u}return null}function qm(e,t,s,u){do Es();while(dr!==null);if(($e&6)!==0)throw Error(r(327));s=e.finishedWork;var d=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var f=s.lanes|s.childLanes;if(_p(e,f),e===bt&&(ct=bt=null,Nt=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Va||(Va=!0,Oh(Qt,function(){return Es(),null})),f=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||f){f=on.transition,on.transition=null;var v=Qe;Qe=1;var k=$e;$e|=4,Ql.current=null,Um(e,s),yh(s,e),cm(sl),la=!!rl,sl=rl=null,e.current=s,Fm(s),Bt(),$e=k,Qe=v,on.transition=f}else e.current=s;if(Va&&(Va=!1,dr=e,Ja=d),f=e.pendingLanes,f===0&&(cr=null),Re(s.stateNode),Gt(e,Je()),t!==null)for(u=e.onRecoverableError,s=0;s<t.length;s++)d=t[s],u(d.value,{componentStack:d.stack,digest:d.digest});if(Ga)throw Ga=!1,e=Xl,Xl=null,e;return(Ja&1)!==0&&e.tag!==0&&Es(),f=e.pendingLanes,(f&1)!==0?e===Zl?Ii++:(Ii=0,Zl=e):Ii=0,ar(),null}function Es(){if(dr!==null){var e=mc(Ja),t=on.transition,s=Qe;try{if(on.transition=null,Qe=16>e?16:e,dr===null)var u=!1;else{if(e=dr,dr=null,Ja=0,($e&6)!==0)throw Error(r(331));var d=$e;for($e|=4,pe=e.current;pe!==null;){var f=pe,v=f.child;if((pe.flags&16)!==0){var k=f.deletions;if(k!==null){for(var E=0;E<k.length;E++){var M=k[E];for(pe=M;pe!==null;){var G=pe;switch(G.tag){case 0:case 11:case 15:Pi(8,G,f)}var J=G.child;if(J!==null)J.return=G,pe=J;else for(;pe!==null;){G=pe;var H=G.sibling,ce=G.return;if(hh(G),G===M){pe=null;break}if(H!==null){H.return=ce,pe=H;break}pe=ce}}}var ge=f.alternate;if(ge!==null){var ve=ge.child;if(ve!==null){ge.child=null;do{var ut=ve.sibling;ve.sibling=null,ve=ut}while(ve!==null)}}pe=f}}if((f.subtreeFlags&2064)!==0&&v!==null)v.return=f,pe=v;else e:for(;pe!==null;){if(f=pe,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Pi(9,f,f.return)}var A=f.sibling;if(A!==null){A.return=f.return,pe=A;break e}pe=f.return}}var P=e.current;for(pe=P;pe!==null;){v=pe;var R=v.child;if((v.subtreeFlags&2064)!==0&&R!==null)R.return=v,pe=R;else e:for(v=P;pe!==null;){if(k=pe,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:za(9,k)}}catch(we){ot(k,k.return,we)}if(k===v){pe=null;break e}var X=k.sibling;if(X!==null){X.return=k.return,pe=X;break e}pe=k.return}}if($e=d,ar(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(Ee,e)}catch{}u=!0}return u}finally{Qe=s,on.transition=t}}return!1}function Ch(e,t,s){t=Ss(s,t),t=Gd(e,t,1),e=lr(e,t,1),t=Dt(),e!==null&&(ri(e,1,t),Gt(e,t))}function ot(e,t,s){if(e.tag===3)Ch(e,e,s);else for(;t!==null;){if(t.tag===3){Ch(t,e,s);break}else if(t.tag===1){var u=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(cr===null||!cr.has(u))){e=Ss(s,e),e=Vd(t,e,1),t=lr(t,e,1),e=Dt(),t!==null&&(ri(t,1,e),Gt(t,e));break}}t=t.return}}function Hm(e,t,s){var u=e.pingCache;u!==null&&u.delete(t),t=Dt(),e.pingedLanes|=e.suspendedLanes&s,bt===e&&(Nt&s)===s&&(mt===4||mt===3&&(Nt&130023424)===Nt&&500>Je()-Yl?Br(e,0):Kl|=s),Gt(e,t)}function Th(e,t){t===0&&((e.mode&1)===0?t=1:(t=sa,sa<<=1,(sa&130023424)===0&&(sa=4194304)));var s=Dt();e=Ln(e,t),e!==null&&(ri(e,t,s),Gt(e,s))}function Gm(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Th(e,s)}function Vm(e,t){var s=0;switch(e.tag){case 13:var u=e.stateNode,d=e.memoizedState;d!==null&&(s=d.retryLane);break;case 19:u=e.stateNode;break;default:throw Error(r(314))}u!==null&&u.delete(t),Th(e,s)}var Ph;Ph=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||$t.current)qt=!0;else{if((e.lanes&s)===0&&(t.flags&128)===0)return qt=!1,Rm(e,t,s);qt=(e.flags&131072)!==0}else qt=!1,st&&(t.flags&1048576)!==0&&ud(t,Na,t.index);switch(t.lanes=0,t.tag){case 2:var u=t.type;Ba(e,t),e=t.pendingProps;var d=ms(t,Tt.current);bs(t,s),d=Cl(null,t,u,e,d,s);var f=Tl();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zt(u)?(f=!0,Sa(t)):f=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,bl(t),d.updater=Fa,t.stateNode=d,d._reactInternals=t,Dl(t,u,e,s),t=Fl(null,t,u,!0,f,s)):(t.tag=0,st&&f&&dl(t),Rt(null,t,d,s),t=t.child),t;case 16:u=t.elementType;e:{switch(Ba(e,t),e=t.pendingProps,d=u._init,u=d(u._payload),t.type=u,d=t.tag=Qm(u),e=mn(u,e),d){case 0:t=Ul(null,t,u,e,s);break e;case 1:t=nh(null,t,u,e,s);break e;case 11:t=Yd(null,t,u,e,s);break e;case 14:t=Xd(null,t,u,mn(u.type,e),s);break e}throw Error(r(306,u,""))}return t;case 0:return u=t.type,d=t.pendingProps,d=t.elementType===u?d:mn(u,d),Ul(e,t,u,d,s);case 1:return u=t.type,d=t.pendingProps,d=t.elementType===u?d:mn(u,d),nh(e,t,u,d,s);case 3:e:{if(rh(t),e===null)throw Error(r(387));u=t.pendingProps,f=t.memoizedState,d=f.element,vd(e,t),Aa(t,u,null,s);var v=t.memoizedState;if(u=v.element,f.isDehydrated)if(f={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){d=Ss(Error(r(423)),t),t=sh(e,t,u,s,d);break e}else if(u!==d){d=Ss(Error(r(424)),t),t=sh(e,t,u,s,d);break e}else for(Xt=rr(t.stateNode.containerInfo.firstChild),Yt=t,st=!0,pn=null,s=gd(t,null,u,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(vs(),u===d){t=Un(e,t,s);break e}Rt(e,t,u,s)}t=t.child}return t;case 5:return bd(t),e===null&&pl(t),u=t.type,d=t.pendingProps,f=e!==null?e.memoizedProps:null,v=d.children,il(u,d)?v=null:f!==null&&il(u,f)&&(t.flags|=32),th(e,t),Rt(e,t,v,s),t.child;case 6:return e===null&&pl(t),null;case 13:return ih(e,t,s);case 4:return kl(t,t.stateNode.containerInfo),u=t.pendingProps,e===null?t.child=ws(t,null,u,s):Rt(e,t,u,s),t.child;case 11:return u=t.type,d=t.pendingProps,d=t.elementType===u?d:mn(u,d),Yd(e,t,u,d,s);case 7:return Rt(e,t,t.pendingProps,s),t.child;case 8:return Rt(e,t,t.pendingProps.children,s),t.child;case 12:return Rt(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(u=t.type._context,d=t.pendingProps,f=t.memoizedProps,v=d.value,Ze(Ta,u._currentValue),u._currentValue=v,f!==null)if(fn(f.value,v)){if(f.children===d.children&&!$t.current){t=Un(e,t,s);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var k=f.dependencies;if(k!==null){v=f.child;for(var E=k.firstContext;E!==null;){if(E.context===u){if(f.tag===1){E=Mn(-1,s&-s),E.tag=2;var M=f.updateQueue;if(M!==null){M=M.shared;var G=M.pending;G===null?E.next=E:(E.next=G.next,G.next=E),M.pending=E}}f.lanes|=s,E=f.alternate,E!==null&&(E.lanes|=s),wl(f.return,s,t),k.lanes|=s;break}E=E.next}}else if(f.tag===10)v=f.type===t.type?null:f.child;else if(f.tag===18){if(v=f.return,v===null)throw Error(r(341));v.lanes|=s,k=v.alternate,k!==null&&(k.lanes|=s),wl(v,s,t),v=f.sibling}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===t){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}Rt(e,t,d.children,s),t=t.child}return t;case 9:return d=t.type,u=t.pendingProps.children,bs(t,s),d=sn(d),u=u(d),t.flags|=1,Rt(e,t,u,s),t.child;case 14:return u=t.type,d=mn(u,t.pendingProps),d=mn(u.type,d),Xd(e,t,u,d,s);case 15:return Zd(e,t,t.type,t.pendingProps,s);case 17:return u=t.type,d=t.pendingProps,d=t.elementType===u?d:mn(u,d),Ba(e,t),t.tag=1,zt(u)?(e=!0,Sa(t)):e=!1,bs(t,s),qd(t,u,d),Dl(t,u,d,s),Fl(null,t,u,!0,e,s);case 19:return oh(e,t,s);case 22:return eh(e,t,s)}throw Error(r(156,t.tag))};function Oh(e,t){return ze(e,t)}function Jm(e,t,s,u){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(e,t,s,u){return new Jm(e,t,s,u)}function iu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qm(e){if(typeof e=="function")return iu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===de)return 11;if(e===se)return 14}return 2}function pr(e,t){var s=e.alternate;return s===null?(s=ln(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Xa(e,t,s,u,d,f){var v=2;if(u=e,typeof e=="function")iu(e)&&(v=1);else if(typeof e=="string")v=5;else e:switch(e){case ie:return zr(s.children,d,f,t);case me:v=8,d|=8;break;case Ne:return e=ln(12,s,t,d|2),e.elementType=Ne,e.lanes=f,e;case ne:return e=ln(13,s,t,d),e.elementType=ne,e.lanes=f,e;case z:return e=ln(19,s,t,d),e.elementType=z,e.lanes=f,e;case K:return Za(s,d,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Oe:v=10;break e;case V:v=9;break e;case de:v=11;break e;case se:v=14;break e;case xe:v=16,u=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return t=ln(v,s,t,d),t.elementType=e,t.type=u,t.lanes=f,t}function zr(e,t,s,u){return e=ln(7,e,u,t),e.lanes=s,e}function Za(e,t,s,u){return e=ln(22,e,u,t),e.elementType=K,e.lanes=s,e.stateNode={isHidden:!1},e}function au(e,t,s){return e=ln(6,e,null,t),e.lanes=s,e}function ou(e,t,s){return t=ln(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Km(e,t,s,u,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ro(0),this.expirationTimes=Ro(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ro(0),this.identifierPrefix=u,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function lu(e,t,s,u,d,f,v,k,E){return e=new Km(e,t,s,k,E),t===1?(t=1,f===!0&&(t|=8)):t=0,f=ln(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:u,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},bl(f),e}function Ym(e,t,s){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:u==null?null:""+u,children:e,containerInfo:t,implementation:s}}function Ah(e){if(!e)return ir;e=e._reactInternals;e:{if(Tn(e)!==e||e.tag!==1)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(r(171))}if(e.tag===1){var s=e.type;if(zt(s))return ad(e,s,t)}return t}function Ih(e,t,s,u,d,f,v,k,E){return e=lu(s,u,!0,e,d,f,v,k,E),e.context=Ah(null),s=e.current,u=Dt(),d=hr(s),f=Mn(u,d),f.callback=t??null,lr(s,f,d),e.current.lanes=d,ri(e,d,u),Gt(e,u),e}function eo(e,t,s,u){var d=t.current,f=Dt(),v=hr(d);return s=Ah(s),t.context===null?t.context=s:t.pendingContext=s,t=Mn(f,v),t.payload={element:e},u=u===void 0?null:u,u!==null&&(t.callback=u),e=lr(d,t,v),e!==null&&(vn(e,d,v,f),Oa(e,d,v)),v}function to(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Rh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function uu(e,t){Rh(e,t),(e=e.alternate)&&Rh(e,t)}function Xm(){return null}var Dh=typeof reportError=="function"?reportError:function(e){console.error(e)};function cu(e){this._internalRoot=e}no.prototype.render=cu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));eo(e,t,null,null)},no.prototype.unmount=cu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wr(function(){eo(null,e,null,null)}),t[An]=null}};function no(e){this._internalRoot=e}no.prototype.unstable_scheduleHydration=function(e){if(e){var t=vc();e={blockedOn:null,target:e,priority:t};for(var s=0;s<er.length&&t!==0&&t<er[s].priority;s++);er.splice(s,0,e),s===0&&bc(e)}};function du(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ro(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Lh(){}function Zm(e,t,s,u,d){if(d){if(typeof u=="function"){var f=u;u=function(){var M=to(v);f.call(M)}}var v=Ih(t,u,e,0,null,!1,!1,"",Lh);return e._reactRootContainer=v,e[An]=v.current,yi(e.nodeType===8?e.parentNode:e),Wr(),v}for(;d=e.lastChild;)e.removeChild(d);if(typeof u=="function"){var k=u;u=function(){var M=to(E);k.call(M)}}var E=lu(e,0,!1,null,null,!1,!1,"",Lh);return e._reactRootContainer=E,e[An]=E.current,yi(e.nodeType===8?e.parentNode:e),Wr(function(){eo(t,E,s,u)}),E}function so(e,t,s,u,d){var f=s._reactRootContainer;if(f){var v=f;if(typeof d=="function"){var k=d;d=function(){var E=to(v);k.call(E)}}eo(t,v,e,d)}else v=Zm(s,t,e,d,u);return to(v)}gc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=ni(t.pendingLanes);s!==0&&(Do(t,s|1),Gt(t,Je()),($e&6)===0&&(Ns=Je()+500,ar()))}break;case 13:Wr(function(){var u=Ln(e,1);if(u!==null){var d=Dt();vn(u,e,1,d)}}),uu(e,1)}},Lo=function(e){if(e.tag===13){var t=Ln(e,134217728);if(t!==null){var s=Dt();vn(t,e,134217728,s)}uu(e,134217728)}},yc=function(e){if(e.tag===13){var t=hr(e),s=Ln(e,t);if(s!==null){var u=Dt();vn(s,e,t,u)}uu(e,t)}},vc=function(){return Qe},wc=function(e,t){var s=Qe;try{return Qe=e,t()}finally{Qe=s}},Xs=function(e,t,s){switch(t){case"input":if(fe(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var u=s[t];if(u!==e&&u.form===e.form){var d=ba(u);if(!d)throw Error(r(90));Ge(u),fe(u,d)}}}break;case"textarea":lt(e,s);break;case"select":t=s.value,t!=null&&Ce(e,!!s.multiple,t,!1)}},ea=nu,ta=Wr;var eg={usingClientEntryPoint:!1,Events:[xi,fs,ba,Xi,Zi,nu]},Ri={findFiberByHostInstance:Ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tg={bundleType:Ri.bundleType,version:Ri.version,rendererPackageName:Ri.rendererPackageName,rendererConfig:Ri.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=he(e),e===null?null:e.stateNode},findFiberByHostInstance:Ri.findFiberByHostInstance||Xm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var io=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!io.isDisabled&&io.supportsFiber)try{Ee=io.inject(tg),tn=io}catch{}}return Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eg,Vt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!du(t))throw Error(r(200));return Ym(e,t,null,s)},Vt.createRoot=function(e,t){if(!du(e))throw Error(r(299));var s=!1,u="",d=Dh;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(u=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=lu(e,1,!1,null,null,s,!1,u,d),e[An]=t.current,yi(e.nodeType===8?e.parentNode:e),new cu(t)},Vt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=he(t),e=e===null?null:e.stateNode,e},Vt.flushSync=function(e){return Wr(e)},Vt.hydrate=function(e,t,s){if(!ro(t))throw Error(r(200));return so(null,e,t,!0,s)},Vt.hydrateRoot=function(e,t,s){if(!du(e))throw Error(r(405));var u=s!=null&&s.hydratedSources||null,d=!1,f="",v=Dh;if(s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),t=Ih(t,null,e,1,s??null,d,!1,f,v),e[An]=t.current,yi(e),u)for(e=0;e<u.length;e++)s=u[e],d=s._getVersion,d=d(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,d]:t.mutableSourceEagerHydrationData.push(s,d);return new no(t)},Vt.render=function(e,t,s){if(!ro(t))throw Error(r(200));return so(null,e,t,!1,s)},Vt.unmountComponentAtNode=function(e){if(!ro(e))throw Error(r(40));return e._reactRootContainer?(Wr(function(){so(null,null,e,!1,function(){e._reactRootContainer=null,e[An]=null})}),!0):!1},Vt.unstable_batchedUpdates=nu,Vt.unstable_renderSubtreeIntoContainer=function(e,t,s,u){if(!ro(s))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return so(e,t,s,!1,u)},Vt.version="18.3.1-next-f1338f8080-20240426",Vt}var qh;function Df(){if(qh)return pu.exports;qh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),pu.exports=dg(),pu.exports}var Hh;function hg(){if(Hh)return ao;Hh=1;var i=Df();return ao.createRoot=i.createRoot,ao.hydrateRoot=i.hydrateRoot,ao}var fg=hg();const pg=Qu(fg);Df();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qi(){return qi=Object.assign?Object.assign.bind():function(i){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])}return i},qi.apply(this,arguments)}var Sr;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Sr||(Sr={}));const Gh="popstate";function mg(i){i===void 0&&(i={});function n(a,l){let{pathname:c,search:h,hash:p}=a.location;return Pu("",{pathname:c,search:h,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(a,l){return typeof l=="string"?l:go(l)}return yg(n,r,null,i)}function dt(i,n){if(i===!1||i===null||typeof i>"u")throw new Error(n)}function Lf(i,n){if(!i){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function gg(){return Math.random().toString(36).substr(2,8)}function Vh(i,n){return{usr:i.state,key:i.key,idx:n}}function Pu(i,n,r,a){return r===void 0&&(r=null),qi({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof n=="string"?Qs(n):n,{state:r,key:n&&n.key||a||gg()})}function go(i){let{pathname:n="/",search:r="",hash:a=""}=i;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(n+=a.charAt(0)==="#"?a:"#"+a),n}function Qs(i){let n={};if(i){let r=i.indexOf("#");r>=0&&(n.hash=i.substr(r),i=i.substr(0,r));let a=i.indexOf("?");a>=0&&(n.search=i.substr(a),i=i.substr(0,a)),i&&(n.pathname=i)}return n}function yg(i,n,r,a){a===void 0&&(a={});let{window:l=document.defaultView,v5Compat:c=!1}=a,h=l.history,p=Sr.Pop,m=null,y=g();y==null&&(y=0,h.replaceState(qi({},h.state,{idx:y}),""));function g(){return(h.state||{idx:null}).idx}function x(){p=Sr.Pop;let _=g(),B=_==null?null:_-y;y=_,m&&m({action:p,location:S.location,delta:B})}function b(_,B){p=Sr.Push;let F=Pu(S.location,_,B);y=g()+1;let L=Vh(F,y),W=S.createHref(F);try{h.pushState(L,"",W)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;l.location.assign(W)}c&&m&&m({action:p,location:S.location,delta:1})}function C(_,B){p=Sr.Replace;let F=Pu(S.location,_,B);y=g();let L=Vh(F,y),W=S.createHref(F);h.replaceState(L,"",W),c&&m&&m({action:p,location:S.location,delta:0})}function T(_){let B=l.location.origin!=="null"?l.location.origin:l.location.href,F=typeof _=="string"?_:go(_);return F=F.replace(/ $/,"%20"),dt(B,"No window.location.(origin|href) available to create URL for href: "+F),new URL(F,B)}let S={get action(){return p},get location(){return i(l,h)},listen(_){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(Gh,x),m=_,()=>{l.removeEventListener(Gh,x),m=null}},createHref(_){return n(l,_)},createURL:T,encodeLocation(_){let B=T(_);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:b,replace:C,go(_){return h.go(_)}};return S}var Jh;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(Jh||(Jh={}));function vg(i,n,r){return r===void 0&&(r="/"),wg(i,n,r)}function wg(i,n,r,a){let l=typeof n=="string"?Qs(n):n,c=Yu(l.pathname||"/",r);if(c==null)return null;let h=Mf(i);xg(h);let p=null;for(let m=0;p==null&&m<h.length;++m){let y=Ag(c);p=Tg(h[m],y)}return p}function Mf(i,n,r,a){n===void 0&&(n=[]),r===void 0&&(r=[]),a===void 0&&(a="");let l=(c,h,p)=>{let m={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};m.relativePath.startsWith("/")&&(dt(m.relativePath.startsWith(a),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(a.length));let y=_r([a,m.relativePath]),g=r.concat(m);c.children&&c.children.length>0&&(dt(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),Mf(c.children,n,g,y)),!(c.path==null&&!c.index)&&n.push({path:y,score:Eg(y,c.index),routesMeta:g})};return i.forEach((c,h)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))l(c,h);else for(let m of Uf(c.path))l(c,h,m)}),n}function Uf(i){let n=i.split("/");if(n.length===0)return[];let[r,...a]=n,l=r.endsWith("?"),c=r.replace(/\?$/,"");if(a.length===0)return l?[c,""]:[c];let h=Uf(a.join("/")),p=[];return p.push(...h.map(m=>m===""?c:[c,m].join("/"))),l&&p.push(...h),p.map(m=>i.startsWith("/")&&m===""?"/":m)}function xg(i){i.sort((n,r)=>n.score!==r.score?r.score-n.score:Cg(n.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const bg=/^:[\w-]+$/,kg=3,Sg=2,_g=1,jg=10,Ng=-2,Qh=i=>i==="*";function Eg(i,n){let r=i.split("/"),a=r.length;return r.some(Qh)&&(a+=Ng),n&&(a+=Sg),r.filter(l=>!Qh(l)).reduce((l,c)=>l+(bg.test(c)?kg:c===""?_g:jg),a)}function Cg(i,n){return i.length===n.length&&i.slice(0,-1).every((a,l)=>a===n[l])?i[i.length-1]-n[n.length-1]:0}function Tg(i,n,r){let{routesMeta:a}=i,l={},c="/",h=[];for(let p=0;p<a.length;++p){let m=a[p],y=p===a.length-1,g=c==="/"?n:n.slice(c.length)||"/",x=Pg({path:m.relativePath,caseSensitive:m.caseSensitive,end:y},g),b=m.route;if(!x)return null;Object.assign(l,x.params),h.push({params:l,pathname:_r([c,x.pathname]),pathnameBase:Lg(_r([c,x.pathnameBase])),route:b}),x.pathnameBase!=="/"&&(c=_r([c,x.pathnameBase]))}return h}function Pg(i,n){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[r,a]=Og(i.path,i.caseSensitive,i.end),l=n.match(r);if(!l)return null;let c=l[0],h=c.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:a.reduce((y,g,x)=>{let{paramName:b,isOptional:C}=g;if(b==="*"){let S=p[x]||"";h=c.slice(0,c.length-S.length).replace(/(.)\/+$/,"$1")}const T=p[x];return C&&!T?y[b]=void 0:y[b]=(T||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:h,pattern:i}}function Og(i,n,r){n===void 0&&(n=!1),r===void 0&&(r=!0),Lf(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let a=[],l="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,m)=>(a.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(a.push({paramName:"*"}),l+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":i!==""&&i!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,n?void 0:"i"),a]}function Ag(i){try{return i.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Lf(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),i}}function Yu(i,n){if(n==="/")return i;if(!i.toLowerCase().startsWith(n.toLowerCase()))return null;let r=n.endsWith("/")?n.length-1:n.length,a=i.charAt(r);return a&&a!=="/"?null:i.slice(r)||"/"}function Ig(i,n){n===void 0&&(n="/");let{pathname:r,search:a="",hash:l=""}=typeof i=="string"?Qs(i):i;return{pathname:r?r.startsWith("/")?r:Rg(r,n):n,search:Mg(a),hash:Ug(l)}}function Rg(i,n){let r=n.replace(/\/+$/,"").split("/");return i.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function yu(i,n,r,a){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Dg(i){return i.filter((n,r)=>r===0||n.route.path&&n.route.path.length>0)}function Ff(i,n){let r=Dg(i);return n?r.map((a,l)=>l===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function Wf(i,n,r,a){a===void 0&&(a=!1);let l;typeof i=="string"?l=Qs(i):(l=qi({},i),dt(!l.pathname||!l.pathname.includes("?"),yu("?","pathname","search",l)),dt(!l.pathname||!l.pathname.includes("#"),yu("#","pathname","hash",l)),dt(!l.search||!l.search.includes("#"),yu("#","search","hash",l)));let c=i===""||l.pathname==="",h=c?"/":l.pathname,p;if(h==null)p=r;else{let x=n.length-1;if(!a&&h.startsWith("..")){let b=h.split("/");for(;b[0]==="..";)b.shift(),x-=1;l.pathname=b.join("/")}p=x>=0?n[x]:"/"}let m=Ig(l,p),y=h&&h!=="/"&&h.endsWith("/"),g=(c||h===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(y||g)&&(m.pathname+="/"),m}const _r=i=>i.join("/").replace(/\/\/+/g,"/"),Lg=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),Mg=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Ug=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Fg(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const Bf=["post","put","patch","delete"];new Set(Bf);const Wg=["get",...Bf];new Set(Wg);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hi(){return Hi=Object.assign?Object.assign.bind():function(i){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])}return i},Hi.apply(this,arguments)}const Xu=N.createContext(null),Bg=N.createContext(null),Yr=N.createContext(null),_o=N.createContext(null),Xr=N.createContext({outlet:null,matches:[],isDataRoute:!1}),$f=N.createContext(null);function $g(i,n){let{relative:r}=n===void 0?{}:n;Ji()||dt(!1);let{basename:a,navigator:l}=N.useContext(Yr),{hash:c,pathname:h,search:p}=qf(i,{relative:r}),m=h;return a!=="/"&&(m=h==="/"?a:_r([a,h])),l.createHref({pathname:m,search:p,hash:c})}function Ji(){return N.useContext(_o)!=null}function Ks(){return Ji()||dt(!1),N.useContext(_o).location}function zf(i){N.useContext(Yr).static||N.useLayoutEffect(i)}function qn(){let{isDataRoute:i}=N.useContext(Xr);return i?ty():zg()}function zg(){Ji()||dt(!1);let i=N.useContext(Xu),{basename:n,future:r,navigator:a}=N.useContext(Yr),{matches:l}=N.useContext(Xr),{pathname:c}=Ks(),h=JSON.stringify(Ff(l,r.v7_relativeSplatPath)),p=N.useRef(!1);return zf(()=>{p.current=!0}),N.useCallback(function(y,g){if(g===void 0&&(g={}),!p.current)return;if(typeof y=="number"){a.go(y);return}let x=Wf(y,JSON.parse(h),c,g.relative==="path");i==null&&n!=="/"&&(x.pathname=x.pathname==="/"?n:_r([n,x.pathname])),(g.replace?a.replace:a.push)(x,g.state,g)},[n,a,h,c,i])}function qf(i,n){let{relative:r}=n===void 0?{}:n,{future:a}=N.useContext(Yr),{matches:l}=N.useContext(Xr),{pathname:c}=Ks(),h=JSON.stringify(Ff(l,a.v7_relativeSplatPath));return N.useMemo(()=>Wf(i,JSON.parse(h),c,r==="path"),[i,h,c,r])}function qg(i,n){return Hg(i,n)}function Hg(i,n,r,a){Ji()||dt(!1);let{navigator:l}=N.useContext(Yr),{matches:c}=N.useContext(Xr),h=c[c.length-1],p=h?h.params:{};h&&h.pathname;let m=h?h.pathnameBase:"/";h&&h.route;let y=Ks(),g;if(n){var x;let _=typeof n=="string"?Qs(n):n;m==="/"||(x=_.pathname)!=null&&x.startsWith(m)||dt(!1),g=_}else g=y;let b=g.pathname||"/",C=b;if(m!=="/"){let _=m.replace(/^\//,"").split("/");C="/"+b.replace(/^\//,"").split("/").slice(_.length).join("/")}let T=vg(i,{pathname:C}),S=Kg(T&&T.map(_=>Object.assign({},_,{params:Object.assign({},p,_.params),pathname:_r([m,l.encodeLocation?l.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?m:_r([m,l.encodeLocation?l.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),c,r,a);return n&&S?N.createElement(_o.Provider,{value:{location:Hi({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Sr.Pop}},S):S}function Gg(){let i=ey(),n=Fg(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),r=i instanceof Error?i.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},n),r?N.createElement("pre",{style:l},r):null,null)}const Vg=N.createElement(Gg,null);class Jg extends N.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,r){return r.location!==n.location||r.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:r.error,location:r.location,revalidation:n.revalidation||r.revalidation}}componentDidCatch(n,r){console.error("React Router caught the following error during render",n,r)}render(){return this.state.error!==void 0?N.createElement(Xr.Provider,{value:this.props.routeContext},N.createElement($f.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Qg(i){let{routeContext:n,match:r,children:a}=i,l=N.useContext(Xu);return l&&l.static&&l.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=r.route.id),N.createElement(Xr.Provider,{value:n},a)}function Kg(i,n,r,a){var l;if(n===void 0&&(n=[]),r===void 0&&(r=null),a===void 0&&(a=null),i==null){var c;if(!r)return null;if(r.errors)i=r.matches;else if((c=a)!=null&&c.v7_partialHydration&&n.length===0&&!r.initialized&&r.matches.length>0)i=r.matches;else return null}let h=i,p=(l=r)==null?void 0:l.errors;if(p!=null){let g=h.findIndex(x=>x.route.id&&p?.[x.route.id]!==void 0);g>=0||dt(!1),h=h.slice(0,Math.min(h.length,g+1))}let m=!1,y=-1;if(r&&a&&a.v7_partialHydration)for(let g=0;g<h.length;g++){let x=h[g];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(y=g),x.route.id){let{loaderData:b,errors:C}=r,T=x.route.loader&&b[x.route.id]===void 0&&(!C||C[x.route.id]===void 0);if(x.route.lazy||T){m=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((g,x,b)=>{let C,T=!1,S=null,_=null;r&&(C=p&&x.route.id?p[x.route.id]:void 0,S=x.route.errorElement||Vg,m&&(y<0&&b===0?(ny("route-fallback"),T=!0,_=null):y===b&&(T=!0,_=x.route.hydrateFallbackElement||null)));let B=n.concat(h.slice(0,b+1)),F=()=>{let L;return C?L=S:T?L=_:x.route.Component?L=N.createElement(x.route.Component,null):x.route.element?L=x.route.element:L=g,N.createElement(Qg,{match:x,routeContext:{outlet:g,matches:B,isDataRoute:r!=null},children:L})};return r&&(x.route.ErrorBoundary||x.route.errorElement||b===0)?N.createElement(Jg,{location:r.location,revalidation:r.revalidation,component:S,error:C,children:F(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):F()},null)}var Hf=function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i}(Hf||{}),Gf=function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i}(Gf||{});function Yg(i){let n=N.useContext(Xu);return n||dt(!1),n}function Xg(i){let n=N.useContext(Bg);return n||dt(!1),n}function Zg(i){let n=N.useContext(Xr);return n||dt(!1),n}function Vf(i){let n=Zg(),r=n.matches[n.matches.length-1];return r.route.id||dt(!1),r.route.id}function ey(){var i;let n=N.useContext($f),r=Xg(),a=Vf();return n!==void 0?n:(i=r.errors)==null?void 0:i[a]}function ty(){let{router:i}=Yg(Hf.UseNavigateStable),n=Vf(Gf.UseNavigateStable),r=N.useRef(!1);return zf(()=>{r.current=!0}),N.useCallback(function(l,c){c===void 0&&(c={}),r.current&&(typeof l=="number"?i.navigate(l):i.navigate(l,Hi({fromRouteId:n},c)))},[i,n])}const Kh={};function ny(i,n,r){Kh[i]||(Kh[i]=!0)}function ry(i,n){i?.v7_startTransition,i?.v7_relativeSplatPath}function Mt(i){dt(!1)}function sy(i){let{basename:n="/",children:r=null,location:a,navigationType:l=Sr.Pop,navigator:c,static:h=!1,future:p}=i;Ji()&&dt(!1);let m=n.replace(/^\/*/,"/"),y=N.useMemo(()=>({basename:m,navigator:c,static:h,future:Hi({v7_relativeSplatPath:!1},p)}),[m,p,c,h]);typeof a=="string"&&(a=Qs(a));let{pathname:g="/",search:x="",hash:b="",state:C=null,key:T="default"}=a,S=N.useMemo(()=>{let _=Yu(g,m);return _==null?null:{location:{pathname:_,search:x,hash:b,state:C,key:T},navigationType:l}},[m,g,x,b,C,T,l]);return S==null?null:N.createElement(Yr.Provider,{value:y},N.createElement(_o.Provider,{children:r,value:S}))}function iy(i){let{children:n,location:r}=i;return qg(Ou(n),r)}new Promise(()=>{});function Ou(i,n){n===void 0&&(n=[]);let r=[];return N.Children.forEach(i,(a,l)=>{if(!N.isValidElement(a))return;let c=[...n,l];if(a.type===N.Fragment){r.push.apply(r,Ou(a.props.children,c));return}a.type!==Mt&&dt(!1),!a.props.index||!a.props.children||dt(!1);let h={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(h.children=Ou(a.props.children,c)),r.push(h)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Au(){return Au=Object.assign?Object.assign.bind():function(i){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])}return i},Au.apply(this,arguments)}function ay(i,n){if(i==null)return{};var r={},a=Object.keys(i),l,c;for(c=0;c<a.length;c++)l=a[c],!(n.indexOf(l)>=0)&&(r[l]=i[l]);return r}function oy(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function ly(i,n){return i.button===0&&(!n||n==="_self")&&!oy(i)}const uy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cy="6";try{window.__reactRouterVersion=cy}catch{}const dy="startTransition",Yh=lg[dy];function hy(i){let{basename:n,children:r,future:a,window:l}=i,c=N.useRef();c.current==null&&(c.current=mg({window:l,v5Compat:!0}));let h=c.current,[p,m]=N.useState({action:h.action,location:h.location}),{v7_startTransition:y}=a||{},g=N.useCallback(x=>{y&&Yh?Yh(()=>m(x)):m(x)},[m,y]);return N.useLayoutEffect(()=>h.listen(g),[h,g]),N.useEffect(()=>ry(a),[a]),N.createElement(sy,{basename:n,children:r,location:p.location,navigationType:p.action,navigator:h,future:a})}const fy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",py=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,En=N.forwardRef(function(n,r){let{onClick:a,relative:l,reloadDocument:c,replace:h,state:p,target:m,to:y,preventScrollReset:g,viewTransition:x}=n,b=ay(n,uy),{basename:C}=N.useContext(Yr),T,S=!1;if(typeof y=="string"&&py.test(y)&&(T=y,fy))try{let L=new URL(window.location.href),W=y.startsWith("//")?new URL(L.protocol+y):new URL(y),te=Yu(W.pathname,C);W.origin===L.origin&&te!=null?y=te+W.search+W.hash:S=!0}catch{}let _=$g(y,{relative:l}),B=my(y,{replace:h,state:p,target:m,preventScrollReset:g,relative:l,viewTransition:x});function F(L){a&&a(L),L.defaultPrevented||B(L)}return N.createElement("a",Au({},b,{href:T||_,onClick:S||c?a:F,ref:r,target:m}))});var Xh;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(Xh||(Xh={}));var Zh;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(Zh||(Zh={}));function my(i,n){let{target:r,replace:a,state:l,preventScrollReset:c,relative:h,viewTransition:p}=n===void 0?{}:n,m=qn(),y=Ks(),g=qf(i,{relative:h});return N.useCallback(x=>{if(ly(x,r)){x.preventDefault();let b=a!==void 0?a:go(y)===go(g);m(i,{replace:b,state:l,preventScrollReset:c,relative:h,viewTransition:p})}},[y,m,g,a,l,r,i,c,h,p])}var gy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const yy=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vy=(i,n)=>{const r=N.forwardRef(({color:a="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:h,children:p,...m},y)=>N.createElement("svg",{ref:y,...gy,width:l,height:l,stroke:a,strokeWidth:h?Number(c)*24/Number(l):c,className:`lucide lucide-${yy(i)}`,...m},[...n.map(([g,x])=>N.createElement(g,x)),...(Array.isArray(p)?p:[p])||[]]));return r.displayName=`${i}`,r};var Ye=vy;const wy=Ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),xy=Ye("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Cn=Ye("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Iu=Ye("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Ru=Ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),by=Ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),$s=Ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),_t=Ye("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]),ky=Ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),ef=Ye("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),Wn=Ye("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Sy=Ye("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Du=Ye("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),_y=Ye("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),jy=Ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Wi=Ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),tf=Ye("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Lu=Ye("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Ny=Ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Ey=Ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),nf=Ye("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),fo=Ye("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),zn=Ye("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Jf=Ye("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),bn=Ye("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),po=Ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Gs=Ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Gi=Ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zs=Ye("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Cy(){return o.jsx("footer",{className:"fb-footer",children:o.jsxs("div",{className:"fb-footer-inner",children:[o.jsxs("div",{className:"fb-brand",children:[o.jsx("div",{className:"fb-logo",children:o.jsx(_t,{size:28,color:"#fff"})}),o.jsxs("div",{children:[o.jsx("h4",{children:"FitBuddy"}),o.jsx("p",{className:"muted",children:"Your friendly AI fitness companion"})]})]}),o.jsxs("div",{className:"fb-links",children:[o.jsxs("div",{className:"fb-col",children:[o.jsx("h5",{children:"Product"}),o.jsx(En,{to:"/questionnaire",children:"Get Started"}),o.jsx(En,{to:"/chat",children:"AI Coach"}),o.jsx(En,{to:"/shop",children:"Shop"})]}),o.jsxs("div",{className:"fb-col",children:[o.jsx("h5",{children:"Legal"}),o.jsx(En,{to:"/terms",children:"Terms of Service"}),o.jsx(En,{to:"/privacy",children:"Privacy Policy"})]}),o.jsxs("div",{className:"fb-col",children:[o.jsx("h5",{children:"Support"}),o.jsx("a",{href:"mailto:support@fitbuddy.example",children:"support@fitbuddy.example"}),o.jsx("a",{href:"#",children:"Help Center"})]})]}),o.jsxs("div",{className:"fb-bottom",children:[o.jsxs("div",{children:[" ",new Date().getFullYear()," FitBuddy, LLC. All rights reserved."]}),o.jsx("div",{className:"socials muted",children:"Made with  for a healthier life"})]})]})})}const gr=[{text:"Set Goals",color:"primary",icon:o.jsx(bn,{size:20})},{text:"Track Progress",color:"blue",icon:o.jsx(zs,{size:20})},{text:"Plan Workouts",color:"orange",icon:o.jsx(Cn,{size:20})},{text:"Stay Motivated",color:"purple",icon:o.jsx(fo,{size:20})},{text:"AI Powered",color:"pink",icon:o.jsx(zn,{size:20})},{text:"Fun & Easy",color:"green",icon:o.jsx(Jf,{size:20})},{text:"Personalized",color:"blue2",icon:o.jsx(Gs,{size:20})}],Ty=()=>{if(typeof document>"u")return!0;const i=document.referrer;if(console.log("[IntroBubbles] Referrer:",String(i).slice(0,200)),i)try{const n=new URL(i);if(console.log("[IntroBubbles] Referrer hostname:",n.hostname,"Current hostname:",window.location.hostname),n.hostname===window.location.hostname&&window.sessionStorage.getItem("fitbuddy-skip-intro")==="1")return console.log("[IntroBubbles] Skipping intro due to sessionStorage flag."),!1}catch(n){console.log("[IntroBubbles] Referrer parse error:",n)}return console.log("[IntroBubbles] Showing intro."),!0},Py=({onFinish:i})=>{const[n,r]=N.useState(null),[a,l]=N.useState("wait"),[c,h]=N.useState(!1),[p,m]=N.useState(0);N.useEffect(()=>{const x=Ty();console.log("[IntroBubbles] useEffect: shouldShowIntro() =",x),r(x)},[]);const y=N.useRef();if(!y.current){y.current={angle:Array.from({length:gr.length},()=>Math.random()*30-15),dist:Array.from({length:gr.length},()=>Math.random()*30-15),edge:Array.from({length:gr.length},()=>Math.floor(Math.random()*4)),edgePos:Array.from({length:gr.length},()=>Math.random()*100)};try{const x=JSON.stringify(y.current).slice(0,400);console.log("[IntroBubbles] Random seeds generated:",x)}catch{console.log("[IntroBubbles] Random seeds generated")}}const g=N.useRef(i);return N.useEffect(()=>{g.current=i},[i]),N.useEffect(()=>{if(n===null)return;if(!n){console.log("[IntroBubbles] Skipping intro, calling onFinish immediately."),g.current();return}const x=[];console.log("[IntroBubbles] Starting intro animation."),l("flyin"),m(0);for(let C=0;C<gr.length;C++)x.push(setTimeout(()=>{m(T=>T+1),console.log(`[IntroBubbles] Bubble ${C} now visible.`)},C*400));const b=gr.length*400+800;return x.push(setTimeout(()=>{l("meet"),console.log("[IntroBubbles] Phase changed: meet")},b)),x.push(setTimeout(()=>{l("orbit"),console.log("[IntroBubbles] Phase changed: orbit")},b+1e3)),x.push(setTimeout(()=>{l("fadeout"),console.log("[IntroBubbles] Phase changed: fadeout")},b+4e3)),x.push(setTimeout(()=>{h(!0),console.log("[IntroBubbles] Hide set to true.")},b+4500)),x.push(setTimeout(()=>{console.log("[IntroBubbles] onFinish called."),g.current()},b)),()=>{x.forEach(clearTimeout),console.log("[IntroBubbles] Cleaned up timers.")}},[n]),n===null||!n?null:(console.log("[IntroBubbles] Rendering. Phase:",a,"Hide:",c,"VisibleBubbles:",p),o.jsx("div",{className:`intro-bubbles-overlay${c?" hide":""} ${a==="fadeout"?"fade-white":""}`,children:o.jsxs("div",{className:"bubbles-centerpiece",children:[o.jsx("div",{className:"center-logo",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"72",height:"72",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-dumbbell",children:[o.jsx("path",{d:"m6.5 6.5 11 11"}),o.jsx("path",{d:"m21 21-1-1"}),o.jsx("path",{d:"m3 3 1 1"}),o.jsx("path",{d:"m18 22 4-4"}),o.jsx("path",{d:"m2 6 4-4"}),o.jsx("path",{d:"m3 10 7-7"}),o.jsx("path",{d:"m14 21 7-7"})]})}),o.jsx("div",{className:a==="orbit"?"bubbles-rotate":"",children:gr.map((x,b)=>{if(b>=p)return null;const C=y.current.edge[b],T=y.current.edgePos[b];let S=0,_=0;C===0?(S=T,_=-10):C===1?(S=110,_=T):C===2?(S=T,_=110):(S=-10,_=T);const B=360/gr.length*b,F=210;let L=`bubble bubble-color-${x.color}`;a==="flyin"&&(L+=" bubble-fly-in"),a==="orbit"&&(L+=" bubble-orbit"),a==="meet"&&(L+=" bubble-meet");try{const W=JSON.stringify({i:b,phase:a,bubbleClass:L,offX:S,offY:_,angle:B,distance:F}).slice(0,300);console.log(`[IntroBubbles] Rendering bubble ${b}:`,W)}catch{console.log(`[IntroBubbles] Rendering bubble ${b}`)}return o.jsxs("div",{className:L,"data-offscreen-x":S,"data-offscreen-y":_,"data-angle":B,"data-distance":F,children:[o.jsx("span",{className:"bubble-icon",children:x.icon}),x.text]},b)})})]})}))},vu=["Set Goals","Track Progress","Plan Workouts","Stay Motivated","AI Powered","Fun & Easy","Personalized"],qs=[];for(;qs.length<3;){const i=Math.floor(Math.random()*7);qs.includes(i)||qs.push(i)}const Oy=()=>{const i=Ks(),n=qn(),a=new URLSearchParams(i.search).get("intro"),l=a===null||a==="1",[c,h]=N.useState(!l),p=()=>{h(!0),i.search.includes("intro")&&n("/",{replace:!0})};return o.jsxs("div",{className:"welcome-page",children:[!c&&o.jsx(Py,{onFinish:p}),c&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"hero-section",children:[o.jsxs("div",{className:"hero-content",children:[o.jsxs("div",{className:"logo-section bounce-in",children:[o.jsx("div",{className:"logo logo-centered",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-dumbbell",children:[o.jsx("path",{d:"m6.5 6.5 11 11"}),o.jsx("path",{d:"m21 21-1-1"}),o.jsx("path",{d:"m3 3 1 1"}),o.jsx("path",{d:"m18 22 4-4"}),o.jsx("path",{d:"m2 6 4-4"}),o.jsx("path",{d:"m3 10 7-7"}),o.jsx("path",{d:"m14 21 7-7"})]})}),o.jsx("h1",{className:"app-title",children:"Fitbuddy"}),o.jsx("p",{className:"app-subtitle",children:"Your AI-Powered Fitness Companion"})]}),o.jsxs("div",{className:"hero-text fade-in-up",children:[o.jsx("h2",{children:"Transform Your Fitness Journey"}),o.jsx("p",{children:"Get personalized workout plans powered by AI, track your progress, and achieve your fitness goals with fun, gamified experience."})]}),o.jsxs("div",{className:"cta-section fade-in-up",children:[o.jsx(En,{to:"/questionnaire",className:"btn btn-primary btn-large",children:"Start Your Journey"}),o.jsx("p",{className:"cta-subtitle",children:"Free  Personalized  AI-Powered"})]})]}),o.jsxs("div",{className:"hero-illustration",children:[o.jsxs("div",{className:"floating-card card-1",children:[o.jsx(bn,{size:24}),o.jsx("span",{children:vu[qs[0]]})]}),o.jsxs("div",{className:"floating-card card-2",children:[o.jsx(Cn,{size:24}),o.jsx("span",{children:vu[qs[1]]})]}),o.jsxs("div",{className:"floating-card card-3",children:[o.jsx(zs,{size:24}),o.jsx("span",{children:vu[qs[2]]})]})]})]}),o.jsx("div",{className:"features-section",children:o.jsxs("div",{className:"container",children:[o.jsx("h3",{className:"section-title",children:"Why Choose Fitbuddy?"}),o.jsxs("div",{className:"features-grid",children:[o.jsxs("div",{className:"feature-card card fade-in-up",children:[o.jsx("div",{className:"feature-icon",children:o.jsx(bn,{size:32})}),o.jsx("h4",{children:"AI-Powered Plans"}),o.jsx("p",{children:"Get personalized workout routines generated by advanced AI based on your goals, fitness level, and preferences."})]}),o.jsxs("div",{className:"feature-card card fade-in-up",children:[o.jsx("div",{className:"feature-icon",children:o.jsx(Cn,{size:32})}),o.jsx("h4",{children:"Smart Calendar"}),o.jsx("p",{children:"Visualize your workout schedule with an intuitive calendar. Easily modify or request new workouts for any day."})]}),o.jsxs("div",{className:"feature-card card fade-in-up",children:[o.jsx("div",{className:"feature-icon",children:o.jsx(zs,{size:32})}),o.jsx("h4",{children:"Adaptive Training"}),o.jsx("p",{children:"Your workouts evolve with you. The AI adjusts difficulty and variety based on your progress and feedback."})]})]})]})}),o.jsx("div",{className:"how-it-works-section",children:o.jsxs("div",{className:"container",children:[o.jsx("h3",{className:"section-title",children:"How It Works"}),o.jsxs("div",{className:"steps-container",children:[o.jsxs("div",{className:"step",children:[o.jsx("div",{className:"step-number",children:"1"}),o.jsxs("div",{className:"step-content",children:[o.jsx("h4",{children:"Tell Us About You"}),o.jsx("p",{children:"Answer a few questions about your fitness goals, experience level, and preferences."})]})]}),o.jsxs("div",{className:"step",children:[o.jsx("div",{className:"step-number",children:"2"}),o.jsxs("div",{className:"step-content",children:[o.jsx("h4",{children:"Get Your AI Plan"}),o.jsx("p",{children:"Our AI creates a personalized 30-day workout calendar tailored specifically for you."})]})]}),o.jsxs("div",{className:"step",children:[o.jsx("div",{className:"step-number",children:"3"}),o.jsxs("div",{className:"step-content",children:[o.jsx("h4",{children:"Train & Adapt"}),o.jsx("p",{children:"Follow your workouts, track progress, and request changes whenever you need them."})]})]})]})]})}),o.jsx("div",{className:"final-cta-section",children:o.jsx("div",{className:"container",children:o.jsxs("div",{className:"final-cta-content",children:[o.jsx("h3",{children:"Ready to Transform Your Fitness?"}),o.jsx("p",{children:"Join thousands of users who have already started their journey with Fatbuddy."}),o.jsx(En,{to:"/questionnaire",className:"btn btn-primary btn-large",children:"Get Started Now"})]})})})]}),o.jsx(Cy,{})]})},Ay="AIzaSyCdu8joW4s3FN2ybROS9f0Vj26fsmNGSlQ",Zu=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${Ay}`,Ui=async(i,n,r)=>{const a=new Date().toISOString().split("T")[0],l=n.startDate||a,c=`{
    "type": "object",
    "properties": {
      "id": { "type": "string" },
      "name": { "type": "string" },
      "description": { "type": "string" },
      "startDate": { "type": "string", "pattern": "\\d{4}-\\d{2}-\\d{2}" },
      "endDate": { "type": "string", "pattern": "\\d{4}-\\d{2}-\\d{2}" },
      "totalDays": { "type": "number" },
      "totalTime": { "type": "string" },
      "weeklyStructure": { "type": "array", "items": { "type": "string" } },
      "dailyWorkouts": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "date": { "type": "string", "pattern": "\\d{4}-\\d{2}-\\d{2}" },
            "type": { "type": "string" },
            "completed": { "type": "boolean" },
            "totalTime": { "type": "string" },
            "workouts": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "difficulty": { "type": "string" },
                  "duration": { "type": "string" },
                  "reps": { "anyOf": [{ "type": "number" }, { "type": "string" }] },
                  "muscleGroups": { "type": "array", "items": { "type": "string" } },
                  "equipment": { "type": "array", "items": { "type": "string" } },
                  "description": { "type": "string" },
                  "sets": { "type": "number" },
                  "rest": { "type": "string" }
                },
                "required": ["name","difficulty","duration","reps","muscleGroups"]
              }
            },
            "alternativeWorkouts": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "difficulty": { "type": "string" },
                  "duration": { "type": "string" },
                  "reps": { "anyOf": [{ "type": "number" }, { "type": "string" }] },
                  "muscleGroups": { "type": "array", "items": { "type": "string" } },
                  "equipment": { "type": "array", "items": { "type": "string" } },
                  "description": { "type": "string" }
                },
                "required": ["name","difficulty","duration","reps","muscleGroups"]
              }
            }
          },
          "required": ["date","type","workouts","alternativeWorkouts"]
        }
      }
    },
    "required": ["id","name","description","startDate","endDate","totalDays","totalTime","weeklyStructure","dailyWorkouts"]
  }`,h=JSON.stringify(r.map(_=>({id:_.id,title:_.title,subtitle:_.subtitle,type:_.type,options:_.options||[]})),null,2),p=JSON.stringify(n,null,2),y=`Please strictly adhere to the following JSON schema without adding any extra text, markdown, or code fences. Ensure all required fields are present and match the specified types. For the 'type' field in dailyWorkouts, use only one of the following values: 'strength', 'cardio', 'flexibility', 'rest', or 'mixed'.

Schema:
${c}

User Data:
${JSON.stringify(i,null,2)}

Questions Context:
${h}

Answers Context:
${p}

The current date is ${a}. The plan MUST start on ${l}.

Follow the provided weeklyStructure order as given by the schema.


  In dailyWorkouts, items must include keys in this order: date, type, completed, totalTime, workouts, alternativeWorkouts.

  Each workout entry must have ONLY these fields (and in the schema above these are required where noted): name, difficulty, duration, reps, muscleGroups, equipment, description. Additional optional fields allowed are: sets (number) and rest (string).

  Field formats (MUST be human-readable where indicated):
  - duration: a human-readable time string such as "5 minutes", "30 sec", "1 min per side" or "15-20 minutes".
  - reps: either a number (e.g. 10) or a short string like "AMRAP", "to failure", "8-12". If an exercise is time-based, reps can be an empty string or a descriptor.
  - muscleGroups: an array of short strings naming targeted body parts, e.g. ["chest","triceps","quads"]. Use common single-word names; avoid sentences.

  Ensure the JSON is syntactically valid: all arrays, objects, quotes, commas, brackets and braces must be closed. No trailing commas. Do not truncate any lists or objects.

Generate and return the JSON now.`,g=Math.random().toString(36).slice(2,9),x=new Date().toISOString(),b=`${y}

Variation-hint: please vary the workout details. RequestNonce:${g} RequestTime:${x}`,C=await fetch("/api/ai/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:b,userId:i?.id||null,meta:{nonce:g,ts:x}})});if(!C.ok)throw new Error("AI generation failed");const S=(await C.json()).text||"";return Iy(S,i)},Iy=(i,n)=>{console.log("Parsing AI response:",i);try{let r=i;const a=i.match(/```(?:json)?\s*([\s\S]*?)```/i);a&&a[1]?r=a[1].trim():r=i.replace(/```[a-zA-Z]*\n?|```/g,"").trim(),console.log("Extracted AI JSON:",r);const l=r.match(/{[\s\S]*}/);if(l&&(r=l[0],console.log("Trimmed to JSON block:",r)),r.startsWith("{")&&r.endsWith("}")){let c=JSON.parse(r);if(c.workout_plan&&(console.warn("parseAIResponse: unwrapping top-level workout_plan field"),c=c.workout_plan),!c.dailyWorkouts&&c.workouts&&(console.warn("parseAIResponse: mapping top-level 'workouts' to 'dailyWorkouts'"),c.dailyWorkouts=c.workouts),c.dailyWorkouts&&c.dailyWorkouts.length>0&&c.dailyWorkouts.every(p=>!p.date)&&c.startDate&&c.weeklyStructure){const p=new Date(c.startDate),m=c.weeklyStructure.map(b=>b.split(":")[0].trim()),y={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},g=m.map(b=>{const C=y[b]??new Date(c.startDate).getDay(),T=new Date(p);for(let S=0;S<7;S++){if(T.getDay()===C)return new Date(T);T.setDate(T.getDate()+1)}return new Date(p)}),x=m.length;c.dailyWorkouts.forEach((b,C)=>{const T=Math.floor(C/x),S=C%x,_=new Date(g[S]);_.setDate(_.getDate()+T*7),b.date=_.toISOString().split("T")[0],b.type=m[S].toLowerCase()}),console.warn("parseAIResponse: assigned fallback dates/types from weeklyStructure")}if(console.log("Parsed AI response JSON:",c),!c.dailyWorkouts)throw new Error("Parsed response missing dailyWorkouts");const h=c.dailyWorkouts.map(p=>({date:p.date,totalTime:p.totalTime||"",workouts:((p.workouts??p.exercises)||[]).map(m=>{if(typeof m=="string")return{name:m,description:m,difficulty:"beginner",muscleGroups:[],equipment:[],duration:"",reps:""};const y=m.name??m.exercise??"",g=m.description??m.instructions??"",x=m.duration??(m.durationSeconds?`${m.durationSeconds} sec`:""),b=m.sets,C=m.reps??"",T=m.rest??"";return{name:y,description:g,difficulty:m.difficulty||"beginner",muscleGroups:m.muscleGroups||[],equipment:m.equipment||[],duration:x,reps:C,...b!==void 0?{sets:b}:{},...T?{rest:T}:{}}}),alternativeWorkouts:((p.alternativeWorkouts??p.alternativeExercises)||[]).map(m=>{if(typeof m=="string")return{name:m,description:m,difficulty:"beginner",muscleGroups:[],equipment:[],duration:"",reps:""};const y=m.name??m.exercise??"",g=m.description??m.instructions??"",x=m.duration??(m.durationSeconds?`${m.durationSeconds} sec`:""),b=m.sets,C=m.reps??"",T=m.rest??"";return{name:y,description:g,difficulty:m.difficulty||"beginner",muscleGroups:m.muscleGroups||[],equipment:m.equipment||[],duration:x,reps:C,...b!==void 0?{sets:b}:{},...T?{rest:T}:{}}}),completed:!1,type:p.type||"mixed"}));return console.log("Mapped daily workouts:",h),{id:c.id||`plan-${Date.now()}`,name:c.name||`${n.username||"User"}'s Fitness Plan`,description:c.description||"A personalized workout plan.",startDate:c.startDate||new Date().toISOString().split("T")[0],endDate:c.endDate||new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],totalDays:c.totalDays||30,weeklyStructure:c.weeklyStructure||[],dailyWorkouts:h}}else throw new Error("Response is not in JSON format")}catch(r){throw console.error("Error parsing AI response:",r),console.error("Raw AI response:",i),r}},wu=async(i,n,r,a,l,c,h)=>{const p=new Date().toISOString().split("T")[0],m=n.startDate||p,y=`{
    "type": "object",
    "properties": {
      "date": { "type": "string", "pattern": "\\d{4}-\\d{2}-\\d{2}" },
      "type": { "type": "string" },
      "totalTime": { "type": "string" },
      "workouts": { "type": "array", "items": { "type": "object" } },
      "alternativeWorkouts": { "type": "array", "items": { "type": "object" } }
    },
    "required": ["date","type","workouts","alternativeWorkouts"]
  }`,g=JSON.stringify(i,null,2),x=JSON.stringify(r.map(F=>({id:F.id,title:F.title,type:F.type,options:F.options||[]})),null,2),b=JSON.stringify(n,null,2),C=JSON.stringify(c,null,2),T=JSON.stringify(h,null,2),S=`Here is the JSON schema for a DayWorkout:
${y}

Preferred start date: ${m}
User data:
${g}

User questionnaire schema and answers:
${x}
${b}

Existing plan workouts:
${C}
Current day old workout:
${T}

Current date: ${p}
Generate one DayWorkout JSON for ${a}, type '${l}', compatible with others. No wrappers, no markdown, pure JSON.`,_=`
IMPORTANT: return only the pure JSON object matching the DayWorkout schema, no markdown or code fences.`;let B=null;for(let F=1;F<=2;F++){const L=Math.random().toString(36).slice(2,9),W=new Date().toISOString(),te=`${S}

Variation-hint: please vary the workout details and ordering where possible. RequestNonce:${L} RequestTime:${W}`,Z=F===1?te:te+_;console.log(`generateWorkoutForDay: attempt ${F}, nonce=${L}, promptStart=`,Z.slice(0,300));const Ne=(await(await fetch(Zu,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:Z}]}]})})).json()).candidates?.[0]?.content?.parts?.[0]?.text||"";console.log("generateWorkoutForDay: received AI text=",Ne);try{let V=Ne.match(/```(?:json)?\s*([\s\S]*?)```/i)?.[1]?.trim()??Ne.replace(/```[a-zA-Z]*\\n?|```/g,"").trim();const de=V.match(/{[\s\S]*}/);return de&&(V=de[0]),console.log("generateWorkoutForDay: parsing cleaned=",V),JSON.parse(V)}catch(Oe){if(console.warn(`generateWorkoutForDay: parse failed on attempt ${F}:`,Oe),B=Oe,F===2)throw B}}throw new Error("generateWorkoutForDay: unknown error")};async function Ry(i){console.log("Requesting AI response with prompt:",i.prompt);const r=await(await fetch(Zu,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:i.prompt}]}]})})).json();console.log("Raw AI response:",r);const a=r.candidates?.[0];console.log("Candidate content:",a?.content),console.log("Candidate content.parts:",a?.content?.parts),console.log("Candidate content.parts[0].text:",a?.content?.parts?.[0]?.text);const l=a?.content?.parts?.[0]?.text||"";let c=l;const h=l.match(/```(?:json)?\n([\s\S]*?)```/);h&&h[1]&&(c=h[1].trim()),console.log("Cleaned AI JSON or text:",c);try{return JSON.parse(c)}catch{return console.warn("AI response is not valid JSON, returning raw text instead."),c}}async function Dy(i){const n=[i.prompt],r=i.localStorageContext;r?(r.questionnaire&&n.push(`

Local: fitbuddy_questionnaire_progress: ${JSON.stringify(r.questionnaire).slice(0,1200)}`),r.userData&&n.push(`

Local: fitbuddy_user_data: ${JSON.stringify(r.userData).slice(0,1200)}`),r.workoutPlan&&n.push(`

Local: fitbuddy_workout_plan: ${JSON.stringify(r.workoutPlan).slice(0,2e3)}`)):i.workoutPlan&&n.push(`

User workoutPlan (truncated): ${JSON.stringify(i.workoutPlan).slice(0,2e3)}`);const a=n.join(`
`);console.log("Requesting AI text response with prompt (trim):",a.slice(0,300));const p=(await(await fetch(Zu,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:a}]}]})})).json()).candidates?.[0]?.content?.parts?.[0]?.text||"",m=p.match(/```(?:json)?\n([\s\S]*?)```/);return{text:m&&m[1]?m[1].trim():p.trim(),raw:p}}const Ly="modulepreload",My=function(i){return"/"+i},rf={},Hn=function(n,r,a){let l=Promise.resolve();if(r&&r.length>0){let m=function(y){return Promise.all(y.map(g=>Promise.resolve(g).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");l=m(r.map(y=>{if(y=My(y),y in rf)return;rf[y]=!0;const g=y.endsWith(".css"),x=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${x}`))return;const b=document.createElement("link");if(b.rel=g?"stylesheet":Ly,g||(b.as="script"),b.crossOrigin="",b.href=y,p&&b.setAttribute("nonce",p),document.head.appendChild(b),g)return new Promise((C,T)=>{b.addEventListener("load",C),b.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${y}`)))})}))}function c(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return l.then(h=>{for(const p of h||[])p.status==="rejected"&&c(p.reason);return n().catch(c)})};async function ec(i){const n=localStorage.getItem("fitbuddy_questionnaire_progress"),r=localStorage.getItem("fitbuddy_workout_plan"),a=localStorage.getItem("fitbuddy_assessment_data");if(i)try{const l={userId:i};n!=null&&(l.fitbuddy_questionnaire_progress=n),r!=null&&(l.fitbuddy_workout_plan=r),a!=null&&(l.fitbuddy_assessment_data=a);try{const h=localStorage.getItem("fitbuddy_user_data");if(h)try{const p=JSON.parse(h);l.fitbuddy_user_data=p}catch{}}catch{}const c=await Hn(()=>import("./apiAuth-DcKunZOB.js"),[]).then(h=>h.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}));await fetch("/api/userdata/save",c)}catch{}}async function Hs(i){if(i)try{const n="/api/userdata/load";console.log("[cloudBackupService] restoreUserDataFromServer -> POSTing",n,"userId=",i);const r=await Hn(()=>import("./apiAuth-DcKunZOB.js"),[]).then(m=>m.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:i})})),a=await fetch(n,r),l=await a.text();if(console.log("[cloudBackupService] restoreUserDataFromServer -> response status:",a.status,"ok:",a.ok),l&&l.length>0&&console.log("[cloudBackupService] restoreUserDataFromServer -> response snippet:",l.slice(0,1e3)),!a.ok)return;let c=null;try{c=l?JSON.parse(l):null}catch(m){console.warn("[cloudBackupService] restoreUserDataFromServer -> failed to parse JSON response:",m);return}const h=c?.stored??c?.payload??c;if(!h)return;const p=m=>{try{const y=h[m];if(y==null)return;const g=typeof y=="string"?y:JSON.stringify(y);localStorage.setItem(m,g)}catch{}};p("fitbuddy_questionnaire_progress"),p("fitbuddy_workout_plan"),p("fitbuddy_assessment_data"),console.log("[cloudBackupService] restoreUserDataFromServer -> wrote keys from payload:",Object.keys(h))}catch{}}const Ut={QUESTIONNAIRE_PROGRESS:"fitbuddy_questionnaire_progress",USER_DATA:"fitbuddy_user_data",ASSESSMENT_DATA:"fitbuddy_assessment_data",WORKOUT_PLAN:"fitbuddy_workout_plan"};function tc(i){if(!i)return null;try{let n=JSON.parse(i);if(typeof n=="string")try{n=JSON.parse(n),console.log("[localStorage] safeParseStored -> double-encoded JSON parsed")}catch{}return n}catch(n){return console.warn("[localStorage] safeParseStored -> parse failed:",n),null}}let Qr=null;const Uy=800;function Zr(){try{const i=localStorage.getItem(Ut.USER_DATA),n=i&&JSON.parse(i).data?.id||null;if(!n)return;Qr&&clearTimeout(Qr),Qr=window.setTimeout(async()=>{Qr=null;try{await ec(n)}catch(r){console.warn("Auto backup failed:",r)}},Uy)}catch(i){console.warn("Failed to schedule backup:",i)}}const nc=i=>{try{localStorage.setItem(Ut.ASSESSMENT_DATA,JSON.stringify({data:i,timestamp:Date.now()})),Zr()}catch(n){console.warn("Failed to save assessment data:",n)}},Mu=()=>{try{const i=localStorage.getItem(Ut.ASSESSMENT_DATA);if(!i)return null;const n=tc(i);if(!n)return null;const{data:r,timestamp:a}=n;return console.log("[localStorage] loadAssessmentData -> found data, timestamp:",a),Date.now()-a>10080*60*1e3?(Qf(),null):r}catch(i){return console.warn("Failed to load assessment data:",i),null}},Qf=()=>{try{localStorage.removeItem(Ut.ASSESSMENT_DATA),Zr()}catch(i){console.warn("Failed to clear assessment data:",i)}},mo=i=>{try{localStorage.setItem(Ut.QUESTIONNAIRE_PROGRESS,JSON.stringify(i)),Zr()}catch(n){console.warn("Failed to save questionnaire progress:",n)}},cn=()=>{try{const i=localStorage.getItem(Ut.QUESTIONNAIRE_PROGRESS);if(!i)return null;const n=tc(i);return n?Date.now()-n.timestamp>1440*60*1e3?(Qi(),null):n:null}catch(i){return console.warn("Failed to load questionnaire progress:",i),null}},Qi=()=>{try{localStorage.removeItem(Ut.QUESTIONNAIRE_PROGRESS),Zr()}catch(i){console.warn("Failed to clear questionnaire progress:",i)}},rc=(i,n)=>{try{let r={};i&&typeof i=="object"&&("data"in i||"token"in i)?(r.data=i.data||null,"token"in i&&(r.token=i.token??null)):r.data=i||null;const a={...r,timestamp:Date.now()};localStorage.setItem(Ut.USER_DATA,JSON.stringify(a)),(!n||!n.skipBackup)&&Zr();try{sessionStorage.removeItem("fitbuddy_no_auto_restore")}catch{}try{localStorage.removeItem("fitbuddy_no_auto_restore")}catch{}}catch(r){console.warn("Failed to save user data:",r)}},jr=()=>{try{const i=localStorage.getItem(Ut.USER_DATA);if(!i)return null;const{data:n,timestamp:r}=JSON.parse(i);return Date.now()-r>10080*60*1e3?(jo(),null):n}catch(i){return console.warn("Failed to load user data:",i),null}},jo=()=>{try{localStorage.removeItem(Ut.USER_DATA),Qr&&(clearTimeout(Qr),Qr=null)}catch(i){console.warn("Failed to clear user data:",i)}},br=i=>{try{const a={data:(c=>c&&{id:c.id,name:c.name,description:c.description,startDate:typeof c.startDate=="string"?c.startDate:c.startDate?new Date(c.startDate).toISOString().split("T")[0]:void 0,endDate:typeof c.endDate=="string"?c.endDate:c.endDate?new Date(c.endDate).toISOString().split("T")[0]:void 0,totalDays:typeof c.totalDays=="number"?c.totalDays:Array.isArray(c.dailyWorkouts)?c.dailyWorkouts.filter(Boolean).length:void 0,totalTime:c.totalTime,weeklyStructure:Array.isArray(c.weeklyStructure)?c.weeklyStructure.slice():[],dailyWorkouts:Array.isArray(c.dailyWorkouts)?c.dailyWorkouts.filter(Boolean).map(p=>({date:typeof p?.date=="string"?p.date:p?.date?new Date(p.date).toISOString().split("T")[0]:"",type:p?.type,completed:!!p?.completed,totalTime:p?.totalTime||"",workouts:Array.isArray(p?.workouts)?p.workouts.filter(Boolean).map(m=>({name:m?.name??"",description:m?.description??"",difficulty:m?.difficulty??"beginner",duration:m?.duration??"",reps:m?.reps??"",muscleGroups:Array.isArray(m?.muscleGroups)?m.muscleGroups:m?.muscleGroups?[m.muscleGroups]:[],equipment:Array.isArray(m?.equipment)?m.equipment:m?.equipment?[m.equipment]:[],sets:typeof m?.sets=="number"?m.sets:void 0,rest:m?.rest||void 0})):[],alternativeWorkouts:Array.isArray(p?.alternativeWorkouts)?p.alternativeWorkouts.filter(Boolean).map(m=>({name:m?.name??"",description:m?.description??"",difficulty:m?.difficulty??"beginner",duration:m?.duration??"",reps:m?.reps??"",muscleGroups:Array.isArray(m?.muscleGroups)?m.muscleGroups:m?.muscleGroups?[m.muscleGroups]:[],equipment:Array.isArray(m?.equipment)?m.equipment:m?.equipment?[m.equipment]:[],sets:typeof m?.sets=="number"?m.sets:void 0,rest:m?.rest||void 0})):[]})):[]})(i),timestamp:Date.now()},l=JSON.stringify(a);localStorage.setItem(Ut.WORKOUT_PLAN,l);try{const c=localStorage.getItem(Ut.WORKOUT_PLAN);if(!c)throw new Error("Written value missing");JSON.parse(c)}catch(c){console.warn("Workout plan verification failed after save; removing corrupted key.",c);try{localStorage.removeItem(Ut.WORKOUT_PLAN)}catch{}return}Zr()}catch(n){console.warn("Failed to save workout plan:",n)}},Vs=()=>{try{const i=localStorage.getItem(Ut.WORKOUT_PLAN);if(!i)return null;console.log("[localStorage] loadWorkoutPlan -> raw length:",i.length);const n=tc(i);if(!n)return null;const{data:r,timestamp:a}=n;return Date.now()-a>720*60*60*1e3?(No(),null):r}catch(i){return console.warn("Failed to load workout plan:",i),null}},No=()=>{try{localStorage.removeItem(Ut.WORKOUT_PLAN),Zr()}catch(i){console.warn("Failed to clear workout plan:",i)}},Fy=Object.freeze(Object.defineProperty({__proto__:null,clearAssessmentData:Qf,clearQuestionnaireProgress:Qi,clearUserData:jo,clearWorkoutPlan:No,loadAssessmentData:Mu,loadQuestionnaireProgress:cn,loadUserData:jr,loadWorkoutPlan:Vs,saveAssessmentData:nc,saveQuestionnaireProgress:mo,saveUserData:rc,saveWorkoutPlan:br},Symbol.toStringTag,{value:"Module"})),Wy="https://corsproxy.io/?key=7cf03de1&url=https://script.google.com/macros/s/AKfycbwFDdT0QVaP2jY8t4N0048PfQW_rYxB4noFaG-nExO9MZ5h3DCuNLUPNg3-qntT01tg/exec?gid=0",yr=[{id:"age",title:"How old are you?",subtitle:"This helps us create age-appropriate workouts",type:"number",min:13,max:100,icon:o.jsx(Cn,{size:32})},{id:"fitnessLevel",title:"What's your current fitness level?",subtitle:"Be honest - we'll adjust everything to match your abilities",type:"single",options:["Beginner - Just starting out","Intermediate - I work out sometimes","Advanced - I exercise regularly"],icon:o.jsx(_t,{size:32})},{id:"fitnessBackground",title:"Tell us about your fitness journey so far",subtitle:"Share any previous experience, challenges, or what's worked for you before",type:"textarea",icon:o.jsx(Wn,{size:32})},{id:"motivation",title:"What motivates you to start this fitness journey?",subtitle:"Understanding your 'why' helps us keep you motivated",type:"textarea",icon:o.jsx(bn,{size:32})},{id:"goals",title:"What are your fitness goals?",subtitle:"Select all that apply - we'll create a plan that covers everything",type:"multiple",options:["Lose weight","Build muscle","Improve endurance","Increase flexibility","General health","Sport-specific training","Stress relief","Better sleep","Improve posture","Boost confidence","Other"],icon:o.jsx(bn,{size:32})},{id:"specificGoals",title:"Can you be more specific about your main goal?",subtitle:"For example: 'Lose 20 pounds for my wedding' or 'Run a 5K without stopping'",type:"textarea",icon:o.jsx(bn,{size:32})},{id:"timeAvailable",title:"How much time can you dedicate daily?",subtitle:"We'll make sure every minute counts",type:"slider",min:15,max:120,step:15,icon:o.jsx($s,{size:32})},{id:"startDate",title:"When would you like to start your workout plan?",subtitle:"Please enter your preferred start date (YYYY-MM-DD)",type:"text",icon:o.jsx(Cn,{size:32})},{id:"exerciseFormat",title:"How do you prefer to track your exercises?",subtitle:"This helps us format your workout instructions perfectly for you",type:"single",options:["Time-based (e.g., 30 seconds)","Rep-based (e.g., 10 reps)","Mixed - both time and reps","Other"],icon:o.jsx($s,{size:32})},{id:"planDuration",title:"How long do you want your workout plan to be?",subtitle:"We can create plans of different lengths to match your goals and commitment level",type:"single",options:["1 week (Mini)","2 weeks (Quick start)","1 month (Standard)","6 weeks (Build habits)","3 months (Transformation)","6 months (Lifestyle change)"],icon:o.jsx(Cn,{size:32})},{id:"daysPerWeek",title:"How many days per week do you want to work out?",subtitle:"We'll plan rest days to help you recover",type:"single",options:["3 days","4 days","5 days","6 days","7 days","Other"],icon:o.jsx(Cn,{size:32})},{id:"preferredTime",title:"When do you prefer to work out?",subtitle:"We can tailor workouts to your energy levels throughout the day",type:"single",options:["Early morning (5-8 AM)","Morning (8-11 AM)","Lunch time (11 AM-2 PM)","Afternoon (2-5 PM)","Evening (5-8 PM)","Night (8-11 PM)","Varies/Flexible","Other"],icon:o.jsx($s,{size:32})},{id:"energyLevels",title:"How would you rate your current energy levels?",subtitle:"This helps us design workouts that match your vitality",type:"rating",min:1,max:10,icon:o.jsx(Wn,{size:32})},{id:"preferences",title:"What types of workouts do you enjoy?",subtitle:"Let's make fitness fun for you",type:"multiple",options:["Strength training","Cardio workouts","Yoga & stretching","HIIT workouts","Bodyweight exercises","Dance workouts","Outdoor activities","Swimming","Pilates","Martial arts","Team sports","Walking/Hiking","Other"],icon:o.jsx(Wn,{size:32})},{id:"dislikes",title:"Are there any exercises you want to avoid?",subtitle:"We'll make sure to exclude anything you don't enjoy or can't do",type:"textarea",icon:o.jsx(Wn,{size:32})},{id:"injuries",title:"Do you have any injuries or physical limitations?",subtitle:"This helps us create safe workouts tailored to your needs",type:"textarea",icon:o.jsx(Wn,{size:32})},{id:"equipment",title:"What equipment do you have access to?",subtitle:"We'll work with whatever you've got",type:"multiple",options:["No equipment (bodyweight only)","Dumbbells","Resistance bands","Yoga mat","Pull-up bar","Gym membership","Treadmill/bike","Kettlebells","Barbell","Medicine ball","Foam roller","Suspension trainer (TRX)","Other"],icon:o.jsx(_t,{size:32})},{id:"budget",title:"Are you interested in additional fitness resources?",subtitle:"We can suggest equipment or services within your budget",type:"single",options:["No budget for additional equipment","Small budget ($0-50)","Medium budget ($50-200)","Higher budget ($200+)","Already have everything I need"],icon:o.jsx(bn,{size:32})},{id:"lifestyle",title:"How would you describe your lifestyle?",subtitle:"This helps us understand how to fit fitness into your routine",type:"single",options:["Very sedentary (desk job, little movement)","Mostly sedentary with some walking","Moderately active (some daily movement)","Active (regular movement throughout day)","Very active (physical job or lots of movement)"],icon:o.jsx(Gs,{size:32})},{id:"sleepQuality",title:"How well do you sleep?",subtitle:"Sleep affects recovery and workout performance",type:"rating",min:1,max:10,icon:o.jsx(Wn,{size:32})},{id:"stressLevel",title:"What's your current stress level?",subtitle:"We can include stress-relief exercises in your plan",type:"rating",min:1,max:10,icon:o.jsx(Wn,{size:32})},{id:"socialPreference",title:"Do you prefer working out alone or with others?",subtitle:"This helps us suggest the right type of workout environment",type:"single",options:["Definitely alone","Mostly alone","No preference","Mostly with others","Definitely with others"],icon:o.jsx(Gs,{size:32})},{id:"progressTracking",title:"How do you like to track your progress?",subtitle:"We can suggest the best methods for you",type:"multiple",options:["Weight/measurements","Progress photos","Workout logs","Fitness apps","Wearable devices","How I feel","Performance improvements","I don't like tracking","Other"],icon:o.jsx(bn,{size:32})},{id:"concerns",title:"Any questions, concerns, or special requests?",subtitle:"Share anything else that would help us create the perfect plan for you - dietary restrictions, work schedule, family commitments, past injuries, fears, or anything else on your mind",type:"textarea",icon:o.jsx(Wn,{size:32})}],By=({onRegenerate:i,onEditResponses:n})=>o.jsx("div",{className:"menu-screen",children:o.jsxs("div",{className:"menu-container menu-container--hero",children:[o.jsxs("div",{className:"menu-hero",children:[o.jsx("div",{className:"menu-hero-icon",children:o.jsx(_t,{size:48})}),o.jsx("h1",{className:"menu-header",children:"Assessment Complete"}),o.jsx("p",{className:"menu-subtitle",children:"Nice work  we've saved your answers and can generate a refreshed plan anytime."})]}),o.jsxs("div",{className:"menu-actions",children:[o.jsxs("button",{className:"btn btn-primary menu-btn menu-btn--large",onClick:()=>i(),children:[o.jsx(Wi,{size:18}),o.jsx("span",{children:"Regenerate Plan"})]}),o.jsxs("button",{className:"btn btn-outline menu-btn menu-btn--alt",onClick:()=>n(),children:[o.jsx(Gs,{size:18}),o.jsx("span",{children:"Edit Responses"})]})]}),o.jsx("div",{className:"menu-footer",children:o.jsx("small",{className:"menu-note",children:"Tip: Regenerating will create a fresh plan based on your current answers  your previous plan is saved in your profile."})})]})}),$y=()=>o.jsx("div",{className:"questionnaire-page",children:o.jsx("div",{className:"questionnaire-container",children:o.jsxs("div",{className:"followup-loading-content",children:[o.jsx("div",{className:"spinner"}),o.jsx("h2",{className:"loading-title",children:"Generating Follow-Up Questions"}),o.jsx("p",{className:"loading-subtitle",children:"Hang tight while we personalize your questionnaire..."}),o.jsx("p",{className:"ai-disclaimer",children:"Disclaimer: These follow-up questions are AI-generated and may not be perfect."})]})})}),zy=({onRetry:i})=>o.jsx("div",{className:"questionnaire-page",children:o.jsx("div",{className:"questionnaire-container error-screen",children:o.jsxs("div",{className:"error-content",children:[o.jsx("h2",{className:"error-title",children:"Oops! Something went wrong."}),o.jsx("p",{className:"error-message",children:"We couldn't generate your plan. Please try again."}),o.jsx("button",{className:"btn error-btn",onClick:i,children:"Retry"})]})})}),qy=({onComplete:i})=>{const n=async(I,U)=>{try{console.log("Preparing data to send to Google Sheet webhook...");const fe=Object.entries(I).map(([be,Ce],Te)=>{const Me=U.find(lt=>lt.id===be);return{questionOrder:Te+1,questionType:Me?.aiGenerated?"AI":"Base",question:Me?.title||be,answer:Array.isArray(Ce)?Ce.join("; "):String(Ce)}}),Se={timestamp:new Date().toISOString(),rows:fe};console.log("Sending POST request to Google Sheet webhook with payload:",Se);const ye=await fetch(Wy,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Se)});if(!ye.ok)throw new Error(`Failed with status ${ye.status}`);console.log("Data successfully sent to Google Sheet:",await ye.json())}catch(fe){console.error("Failed to send to Google Sheet:",fe)}},[r,a]=N.useState(0),[l,c]=N.useState({}),[h,p]=N.useState({}),[m,y]=N.useState(yr),[g,x]=N.useState(!1),[b,C]=N.useState(!1),T=5,[S,_]=N.useState(!1),[B,F]=N.useState(!1),[L,W]=N.useState(null),[te,Z]=N.useState(!1),[ie,me]=N.useState(null),[Ne,Oe]=N.useState(null),V=qn(),[de,ne]=N.useState(!1);Jt.useEffect(()=>{const I=()=>{document.visibilityState==="visible"&&ne(!0)};return document.addEventListener("visibilitychange",I),()=>document.removeEventListener("visibilitychange",I)},[]);const z=(I=!1)=>{if(de&&!I){ne(!1),console.log("Skipped automatic navigation to /loading due to recent tab return");return}V("/loading")},[se,xe]=N.useState(!1),K=m[r],Q=yr.length+T,ue=(r+1)/Q*100;N.useEffect(()=>{let I=!0;return(async()=>{try{try{if(localStorage.getItem("fitbuddy_no_auto_restore")||sessionStorage.getItem("fitbuddy_no_auto_restore"))return}catch{}const fe=cn(),Se=Vs();if(fe||Se)return;const ye=jr();if(!ye||!ye.id||(await Hs(ye.id),!I))return;const be=Mu();be&&c(Te=>({...Te||{},...be||{}}));const Ce=cn();Ce&&(y(Ce.questionsList||m),c(Ce.answers||{}),p(Ce.customInputs||{}),a(Ce.currentQuestion||0),C(!0),Ce.completed&&(_(!0),F(!0))),W(ye)}catch(fe){console.warn("Failed to restore server data in Questionnaire:",fe)}})(),()=>{I=!1}},[]);const j=Jt.useRef(null);Jt.useEffect(()=>{j.current&&j.current.style.setProperty("--progress-width",`${ue}%`)},[ue]),N.useEffect(()=>{const I=cn();if(I){if(I.questionsList){const U=I.questionsList.map(fe=>({...fe,icon:O(fe.iconType||"")}));y(U),U.length>yr.length&&x(!0)}if(I.completed){_(!0),F(!0),c(I.answers);return}a(I.currentQuestion),c(I.answers),p(I.customInputs||{}),C(!0)}},[]),N.useEffect(()=>{if(b||Object.keys(l).length>0){const I=m.map(({icon:U,...fe})=>fe);mo({currentQuestion:r,answers:l,customInputs:h,completed:S,timestamp:Date.now(),userData:L,questionsList:I})}},[r,l,h,b,S,m]);const w=Object.keys(l).length>=23&&!g,O=I=>{switch(I){case"Target":case"target":return o.jsx(bn,{size:32});case"Clock":case"clock":return o.jsx($s,{size:32});case"Dumbbell":case"dumbbell":case"equipment":return o.jsx(_t,{size:32});case"Heart":case"heart":case"heartRate":return o.jsx(Wn,{size:32});case"Calendar":case"calendar":return o.jsx(Cn,{size:32});case"User":case"user":return o.jsx(Gs,{size:32});case"Star":case"star":return o.jsx(Jf,{size:32});default:return o.jsx(bn,{size:32})}},q=async(I=!1)=>{if(!I&&Object.keys(l).length<23)return console.log("[AI-FOLLOWUP] Not enough answers for follow-up. answers.length:",Object.keys(l).length),!1;Z(!0),me(null);try{const U={...l};Object.keys(h).forEach(be=>{if(h[be]){const Ce=U[be];if(typeof Ce=="string"&&Ce==="Other")U[be]=h[be];else if(Array.isArray(Ce)&&Ce.includes("Other")){const Te=Ce.filter(Me=>Me!=="Other");Te.push(h[be]),U[be]=Te}}});const fe={questions:m.slice(0,23).map(be=>({id:be.id,title:be.title})),answers:U},Se=`Based on the following user questions and responses, generate exactly 5 additional follow-up questions in JSON array format. Only return valid JSON; no extra text. Each object should have id, title, subtitle, type (single, multiple, textarea (for written responses), rating, slider, number), options, iconType, aiGenerated:true. Context: ${JSON.stringify(fe)}`;console.log("[AI-FOLLOWUP] Prompt:",Se);const ye=await Ry({prompt:Se});if(console.log("[AI-FOLLOWUP] Received AI response:",ye),Array.isArray(ye)){const be=ye.map((Ce,Te)=>(console.log(`[AI-FOLLOWUP] Generated Q${Te+1}:`,Ce),{...Ce,icon:O(Ce.iconType||"")}));return y(Ce=>{const Te=[...Ce,...be];return console.log("[AI-FOLLOWUP] allQuestions after append:",Te),setTimeout(()=>{try{r===yr.length-1&&a(yr.length)}catch{}},0),Te}),x(!0),console.log("[AI-FOLLOWUP] Follow-up questions appended and flag set."),!0}else console.error("[AI-FOLLOWUP] AI response is not an array:",ye),me("Invalid AI response format")}catch(U){console.error("[AI-FOLLOWUP] Error fetching follow-up questions:",U),me("Failed to fetch follow-up questions. Please try again.")}finally{Z(!1),console.log("[AI-FOLLOWUP] Done loading follow-up questions.")}return!1};N.useEffect(()=>{w&&q()},[w]);const Y=I=>{if(K.id==="startDate"){const U=new Date().toISOString().split("T")[0];I&&I<U?Oe("Start date cannot be in the past"):Oe(null)}c(U=>({...U,[K.id]:I}))},re=async()=>{if(console.log("[NAV] handleNext called. currentQuestion:",r,"allQuestions.length:",m.length),r<m.length-1)r===22&&console.log("[NAV] About to answer 23rd question. Next click will trigger AI follow-up logic."),a(I=>{const U=I+1;return console.log("[NAV] Advancing to question index:",U),U});else{if(!g&&r===yr.length-1){console.log("[NAV] At last base question; generating follow-ups instead of final plan.");const I=await q(!0);a(I?yr.length:U=>Math.min(m.length-1,U+1));return}if(se){console.log("[PLAN] Generation already in progress, ignoring duplicate request");return}xe(!0),z(!0),me(null),z();try{n(l,m);const I={...l};Object.keys(h).forEach(ye=>{if(h[ye]){const be=I[ye];if(typeof be=="string"&&be==="Other")I[ye]=h[ye];else if(Array.isArray(be)&&be.includes("Other")){const Ce=be.filter(Te=>Te!=="Other");Ce.push(h[ye]),I[ye]=Ce}}});const U={username:I.username||"",age:I.age,fitnessLevel:I.fitnessLevel?.split(" -")[0].toLowerCase(),fitnessBackground:I.fitnessBackground,motivation:I.motivation,goals:I.goals||[],specificGoals:I.specificGoals,timeAvailable:I.timeAvailable,exerciseFormat:I.exerciseFormat,planDuration:I.planDuration,daysPerWeek:I.daysPerWeek,preferredTime:I.preferredTime,energyLevels:I.energyLevels,preferences:I.preferences||[],dislikes:I.dislikes,injuries:I.injuries,equipment:I.equipment||[],budget:I.budget,lifestyle:I.lifestyle,sleepQuality:I.sleepQuality,stressLevel:I.stressLevel,socialPreference:I.socialPreference,progressTracking:I.progressTracking,concerns:I.concerns};W(U);let fe;const Se=2;for(let ye=1;ye<=Se+1;ye++)try{console.log(`[PLAN] Generating workout plan, attempt ${ye}`);const be=(I.planDuration||"").toString().toLowerCase(),Te=(Me=>Me.includes("1 week")?1:Me.includes("2 week")?2:Me.includes("6 week")?6:Me.includes("1 month")?4:Me.includes("3 month")?12:Me.includes("6 month")?24:2)(be);if(Te<=1)fe=await Ui(U,I,m);else{const Me=I.startDate||new Date().toISOString().split("T")[0],lt=[];let vt=new Date(Me);for(let wt=0;wt<Te;wt++){const Gn={...I,startDate:vt.toISOString().split("T")[0],planDuration:"1 week (part)"};try{const en=await Ui(U,Gn,m);lt.push(en),vt.setDate(vt.getDate()+7)}catch(en){throw console.warn("Week generation failed for week",wt,en),en}}const ft=[];let Ft="",Wt="",dn="",Et="",Ct=[];lt.forEach(wt=>{dn||(dn=wt.startDate),Et=wt.endDate||Et,Ft=Ft||wt.name,Wt=Wt||wt.description,Array.isArray(wt.weeklyStructure)&&Ct.length===0&&(Ct=wt.weeklyStructure),Array.isArray(wt.dailyWorkouts)&&ft.push(...wt.dailyWorkouts)}),fe={id:`merged-plan-${Date.now()}`,name:Ft||`${U.username||"User"}'s Plan`,description:Wt||"Merged weekly plan",startDate:dn||Me,endDate:Et||ft[ft.length-1]?.date||Me,totalDays:ft.length,weeklyStructure:Ct,dailyWorkouts:ft}}console.log(`[PLAN] Workout plan generated on attempt ${ye}`);break}catch(be){console.error(`[PLAN] Attempt ${ye} failed:`,be),ye===Se+1&&me("Failed to generate workout plan. Please try again.")}if(fe){console.log("[PLAN] Plan complete, calling onComplete."),_(!0),F(!0);try{const ye=m.map(({icon:be,...Ce})=>Ce);mo({currentQuestion:r,answers:l,customInputs:h,completed:!0,timestamp:Date.now(),userData:U,questionsList:ye})}catch(ye){console.warn("Failed to save completed questionnaire progress:",ye)}try{const ye=jr(),be=ye?{...U,...ye}:U;i(be,fe)}catch{i(U,fe)}}}catch(I){console.error("[PLAN] Error generating plan:",I),me("Failed to generate workout plan. Please try again.")}finally{console.log("[PLAN] Done loading plan."),xe(!1)}}},oe=()=>{r>0?a(I=>I-1):V("/")},ee=()=>{const I=l[K.id];return K.type==="multiple"?I&&I.length>0:K.type==="textarea"?I&&I.trim().length>0:K.type==="rating"?I!==void 0&&I>0:I!==void 0&&I!==""},le=async()=>{if(ee()){re();return}if(r===yr.length-1&&!g){await q(!0),a(Se=>Math.min(m.length-1,Se+1));return}const U=r===Q-1,fe=g&&r===m.length-1;if(U||fe){re();return}a(Se=>Math.min(m.length-1,Se+1))},ke=()=>{const I=l[K.id];switch(K.type){case"text":if(K.id==="startDate"){const U=new Date().toISOString().split("T")[0];return o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"date",className:"input question-input",min:U,value:I||"",onChange:fe=>Y(fe.target.value),onKeyDown:fe=>fe.key==="Enter"&&!Ne&&ee()&&re(),"aria-label":K.title}),Ne&&o.jsx("div",{className:"error-message",role:"alert",children:Ne})]})}return o.jsx("input",{type:"text",className:"input question-input",placeholder:"Enter your name",value:I||"",onChange:U=>Y(U.target.value),onKeyDown:U=>U.key==="Enter"&&ee()&&re(),"aria-label":K.title});case"number":return o.jsx("input",{type:"number",className:"input question-input",placeholder:"Enter your age",min:K.min,max:K.max,value:I||"",onChange:U=>Y(parseInt(U.target.value)),onKeyDown:U=>U.key==="Enter"&&ee()&&re(),"aria-label":K.title});case"textarea":return o.jsx("textarea",{className:"input question-textarea",placeholder:"Share your thoughts...",rows:4,value:I||"",onChange:U=>Y(U.target.value),"aria-label":K.title});case"rating":return o.jsxs("div",{className:"rating-container",children:[o.jsx("div",{className:"rating-scale",children:Array.from({length:K.max||10},(U,fe)=>fe+1).map(U=>o.jsx("button",{className:`rating-button ${I===U?"selected":""}`,onClick:()=>Y(U),"aria-label":`Rating ${U}`,children:U},U))}),o.jsxs("div",{className:"rating-labels",children:[o.jsx("span",{children:"Poor"}),o.jsx("span",{children:"Excellent"})]}),I&&o.jsxs("div",{className:"rating-value",children:["You rated: ",I,"/10"]})]});case"slider":return o.jsxs("div",{className:"slider-container",children:[o.jsx("input",{type:"range",className:"slider",min:K.min,max:K.max,step:K.step,value:I||K.min,onChange:U=>Y(parseInt(U.target.value)),"aria-label":K.title}),o.jsxs("div",{className:"slider-value",children:[I||K.min," minutes"]})]});case"single":return o.jsxs("div",{className:"options-container",children:[o.jsx("div",{className:"options-grid",children:K.options?.map((U,fe)=>o.jsx("button",{className:`option-button ${I===U?"selected":""}`,onClick:()=>Y(U),"aria-label":U,children:U},fe))}),I==="Other"&&o.jsx("div",{className:"custom-input-container",children:o.jsx("input",{type:"text",className:"input custom-input",placeholder:"Please specify...",value:h[K.id]||"",onChange:U=>p(fe=>({...fe,[K.id]:U.target.value}))})})]});case"multiple":return o.jsxs("div",{className:"options-container",children:[o.jsx("div",{className:"options-grid",children:K.options?.map((U,fe)=>o.jsx("button",{className:`option-button ${I&&I.includes(U)?"selected":""}`,onClick:()=>{const Se=I||[],ye=Se.includes(U)?Se.filter(be=>be!==U):[...Se,U];Y(ye)},"aria-label":U,children:U},fe))}),I&&I.includes("Other")&&o.jsx("div",{className:"custom-input-container",children:o.jsx("input",{type:"text",className:"input custom-input",placeholder:"Please specify...",value:h[K.id]||"",onChange:U=>p(fe=>({...fe,[K.id]:U.target.value}))})})]});default:return o.jsx("input",{type:"text",className:"input question-input",placeholder:"Enter your response",value:I||"",onChange:U=>Y(U.target.value),onKeyDown:U=>U.key==="Enter"&&ee()&&re(),"aria-label":K.title})}},Ae=()=>{Qi(),a(0),c({}),p({}),_(!1),F(!1)},We=()=>{console.log("Edit Responses button clicked"),F(!1),_(!1),a(0),Xe(!1);const I=cn();I?.answers?(c(I.answers),console.log("Previous answers loaded into state:",I.answers)):console.warn("No previous answers found to populate."),console.log("Questionnaire reset to allow editing of responses")},[Ge,Xe]=N.useState(!1);N.useEffect(()=>{const I=cn();if(console.log("Loaded questionnaire progress:",I),I?.completed){if(Xe(!0),I.userData&&(W(I.userData),console.log("Restored userData:",I.userData)),I.answers&&(c(I.answers),console.log("Restored answers:",I.answers)),I.customInputs&&(p(I.customInputs),console.log("Restored customInputs:",I.customInputs)),I.questionsList){const U=I.questionsList.map(fe=>({...fe,icon:O(fe.iconType||"")}));y(U),console.log("Restored questionsList:",U)}}else console.warn("No completed progress found in local storage.")},[]);const Ie=async()=>{console.log("handleRegenerate invoked"),console.log("State before regeneration  userData:",L,"answers:",l,"allQuestions length:",m.length);let I=L,U=l,fe=m;if(!I){console.log("No userData in state, attempting to load from localStorage");const Se=cn();if(console.log("loadQuestionnaireProgress returned:",Se),Se?.userData){if(console.log("Found saved.userData:",Se.userData),I=Se.userData,U=Se.answers,c(U),console.log("State after restoring answers:",U),Se.customInputs&&p(Se.customInputs),Se.questionsList){console.log("Restoring questionsList of length:",Se.questionsList.length);const ye=Se.questionsList.map(be=>({...be,icon:O(be.iconType||"")}));y(ye),console.log("State after restoring allQuestions length:",ye.length),fe=ye}W(I),console.log("State after restoring userData:",I),console.log("Regenerate: restored state from localStorage",Se)}else{const ye=Mu();console.log("loadAssessmentData returned:",ye),ye&&(I=ye,W(I))}}if(!I&&U){console.log("Reconstructing userData from currentAnswers");const Se={username:U.username||"",age:U.age,fitnessLevel:typeof U.fitnessLevel=="string"?U.fitnessLevel.split(" -")[0].toLowerCase():"",fitnessBackground:U.fitnessBackground,motivation:U.motivation,goals:U.goals||[],specificGoals:U.specificGoals,timeAvailable:U.timeAvailable,exerciseFormat:U.exerciseFormat,planDuration:U.planDuration,daysPerWeek:U.daysPerWeek,preferredTime:U.preferredTime,energyLevels:U.energyLevels,preferences:U.preferences||[],dislikes:U.dislikes,injuries:U.injuries,equipment:U.equipment||[],budget:U.budget,lifestyle:U.lifestyle,sleepQuality:U.sleepQuality,stressLevel:U.stressLevel,socialPreference:U.socialPreference,progressTracking:U.progressTracking,concerns:U.concerns};I=Se,W(I),console.log("Reconstructed userData:",Se),nc(I)}if(console.log("After restoration  currentUser:",I),!I){console.warn("No userData available to regenerate plan. Exiting handleRegenerate");return}console.log("Regenerate Plan clicked with userData:",I),me(null);try{z();const Se=(U.planDuration||"").toString().toLowerCase(),be=(Te=>Te.includes("1 week")?1:Te.includes("2 week")?2:Te.includes("6 week")?6:Te.includes("1 month")?4:Te.includes("3 month")?12:Te.includes("6 month")?24:2)(Se);let Ce;if(be<=1)Ce=await Ui(I,U,fe);else{const Te=U.startDate||new Date().toISOString().split("T")[0],Me=[];let lt=new Date(Te);for(let ft=0;ft<be;ft++){const Ft={...U,startDate:lt.toISOString().split("T")[0],planDuration:"1 week (part)"},Wt=await Ui(I,Ft,fe);Me.push(Wt),lt.setDate(lt.getDate()+7)}const vt=[];Me.forEach(ft=>{Array.isArray(ft.dailyWorkouts)&&vt.push(...ft.dailyWorkouts)}),Ce={id:`merged-plan-${Date.now()}`,name:Me[0]?.name||"Merged Plan",description:Me[0]?.description||"",startDate:Me[0]?.startDate||Te,endDate:Me[Me.length-1]?.endDate||vt[vt.length-1]?.date||Te,totalDays:vt.length,weeklyStructure:Me[0]?.weeklyStructure||[],dailyWorkouts:vt}}console.log("New plan generated:",Ce),_(!0),F(!0);try{const Te=fe.map(({icon:Me,...lt})=>lt);mo({currentQuestion:0,answers:U,customInputs:{},completed:!0,timestamp:Date.now(),userData:I,questionsList:Te})}catch(Te){console.warn("Failed to save completed progress on regenerate:",Te)}try{const Te=jr(),Me=Te?{...I,...Te}:I;i(Me,Ce)}catch{i(I,Ce)}V("/calendar")}catch(Se){console.error("Error regenerating plan:",Se),me("Failed to generate a new plan. Please try again.")}finally{}};return N.useEffect(()=>{S&&!g&&q()},[S,g]),te?o.jsx($y,{}):ie?o.jsx(zy,{onRetry:Ie}):Ge?o.jsx(By,{onRegenerate:Ie,onEditResponses:We}):S&&B?o.jsxs("div",{className:"completion-screen",children:[o.jsx("h2",{children:"Questionnaire Completed"}),o.jsx("p",{children:"Your responses have been saved. What would you like to do?"}),o.jsx("button",{className:"btn",onClick:We,children:"Edit Responses"}),o.jsx("button",{className:"btn btn-secondary",onClick:Ae,children:"Start Over"})]}):o.jsx("div",{className:"questionnaire-page",children:o.jsxs("div",{className:"questionnaire-container",children:[o.jsxs("div",{className:"questionnaire-header",children:["          ",o.jsx("button",{className:"back-button",onClick:oe,"aria-label":"Go back to previous question",children:o.jsx(Ru,{size:24})}),"          ",o.jsxs("div",{className:"progress-container",ref:j,children:[o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:"progress-fill"})}),o.jsxs("span",{className:"progress-text",children:[r+1," of ",Q]})]}),"        "]}),b&&r===0&&o.jsx("div",{className:"restoration-notification",children:o.jsxs("div",{className:"notification-content",children:[o.jsx(Wi,{size:20}),o.jsx("span",{children:"Your previous progress has been restored!"}),o.jsx("button",{className:"restart-button",onClick:Ae,children:"Start Fresh"})]})}),o.jsxs("div",{className:"question-container card fade-in-up",children:[o.jsx("div",{className:"question-icon",children:K.icon}),K.aiGenerated&&o.jsx("div",{className:"ai-badge",children:" AI Personalized Question"}),o.jsx("h2",{className:"question-title",children:K.title}),o.jsx("p",{className:"question-subtitle",children:K.subtitle}),o.jsx("div",{className:"question-input-container",children:ke()})]}),"        ",o.jsxs("div",{className:"questionnaire-navigation",children:[o.jsxs("button",{className:`btn btn-secondary ${r===0?"disabled":""}`,onClick:()=>a(I=>Math.max(0,I-1)),disabled:r===0,children:[o.jsx(Ru,{size:20}),"Previous"]}),(()=>{const I=r===Q-1||g&&r===m.length-1;return o.jsxs("button",{className:`btn ${ee()?"btn-primary":"btn-secondary"} continue-skip-btn${ee()?"":" fake-disabled"}`,onClick:()=>{se||(I?re():le())},tabIndex:0,"aria-disabled":!ee()||se,disabled:se,onKeyDown:U=>{if(U.key==="Enter"||U.key===" "){if(U.preventDefault(),se)return;I?re():le()}},children:[o.jsx("span",{className:"continue-text",children:I?se?"Generating":"Generate My Plan":"Continue"}),!ee()&&o.jsx("span",{className:"skip-inline-btn",children:"Skip"})]})})()]})]})})};function yo(i){"@babel/helpers - typeof";return yo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},yo(i)}function Kr(i){if(i===null||i===!0||i===!1)return NaN;var n=Number(i);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}function ht(i,n){if(n.length<i)throw new TypeError(i+" argument"+(i>1?"s":"")+" required, but only "+n.length+" present")}function It(i){ht(1,arguments);var n=Object.prototype.toString.call(i);return i instanceof Date||yo(i)==="object"&&n==="[object Date]"?new Date(i.getTime()):typeof i=="number"||n==="[object Number]"?new Date(i):((typeof i=="string"||n==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Hy(i,n){ht(2,arguments);var r=It(i).getTime(),a=Kr(n);return new Date(r+a)}var Gy={};function Eo(){return Gy}function Vy(i){var n=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return n.setUTCFullYear(i.getFullYear()),i.getTime()-n.getTime()}function sf(i){ht(1,arguments);var n=It(i);return n.setHours(0,0,0,0),n}function Jy(i,n){ht(2,arguments);var r=sf(i),a=sf(n);return r.getTime()===a.getTime()}function Qy(i){return ht(1,arguments),i instanceof Date||yo(i)==="object"&&Object.prototype.toString.call(i)==="[object Date]"}function Ky(i){if(ht(1,arguments),!Qy(i)&&typeof i!="number")return!1;var n=It(i);return!isNaN(Number(n))}function Yy(i){ht(1,arguments);var n=It(i),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Xy(i,n){var r;ht(1,arguments);var a=i||{},l=It(a.start),c=It(a.end),h=c.getTime();if(!(l.getTime()<=h))throw new RangeError("Invalid interval");var p=[],m=l;m.setHours(0,0,0,0);var y=Number((r=void 0)!==null&&r!==void 0?r:1);if(y<1||isNaN(y))throw new RangeError("`options.step` must be a number greater than 1");for(;m.getTime()<=h;)p.push(It(m)),m.setDate(m.getDate()+y),m.setHours(0,0,0,0);return p}function Zy(i){ht(1,arguments);var n=It(i);return n.setDate(1),n.setHours(0,0,0,0),n}function ev(i,n){ht(2,arguments);var r=Kr(n);return Hy(i,-r)}var tv=864e5;function nv(i){ht(1,arguments);var n=It(i),r=n.getTime();n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0);var a=n.getTime(),l=r-a;return Math.floor(l/tv)+1}function vo(i){ht(1,arguments);var n=1,r=It(i),a=r.getUTCDay(),l=(a<n?7:0)+a-n;return r.setUTCDate(r.getUTCDate()-l),r.setUTCHours(0,0,0,0),r}function Kf(i){ht(1,arguments);var n=It(i),r=n.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(r+1,0,4),a.setUTCHours(0,0,0,0);var l=vo(a),c=new Date(0);c.setUTCFullYear(r,0,4),c.setUTCHours(0,0,0,0);var h=vo(c);return n.getTime()>=l.getTime()?r+1:n.getTime()>=h.getTime()?r:r-1}function rv(i){ht(1,arguments);var n=Kf(i),r=new Date(0);r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0);var a=vo(r);return a}var sv=6048e5;function iv(i){ht(1,arguments);var n=It(i),r=vo(n).getTime()-rv(n).getTime();return Math.round(r/sv)+1}function wo(i,n){var r,a,l,c,h,p,m,y;ht(1,arguments);var g=Eo(),x=Kr((r=(a=(l=(c=n?.weekStartsOn)!==null&&c!==void 0?c:n==null||(h=n.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&l!==void 0?l:g.weekStartsOn)!==null&&a!==void 0?a:(m=g.locale)===null||m===void 0||(y=m.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&r!==void 0?r:0);if(!(x>=0&&x<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var b=It(i),C=b.getUTCDay(),T=(C<x?7:0)+C-x;return b.setUTCDate(b.getUTCDate()-T),b.setUTCHours(0,0,0,0),b}function Yf(i,n){var r,a,l,c,h,p,m,y;ht(1,arguments);var g=It(i),x=g.getUTCFullYear(),b=Eo(),C=Kr((r=(a=(l=(c=n?.firstWeekContainsDate)!==null&&c!==void 0?c:n==null||(h=n.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&l!==void 0?l:b.firstWeekContainsDate)!==null&&a!==void 0?a:(m=b.locale)===null||m===void 0||(y=m.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var T=new Date(0);T.setUTCFullYear(x+1,0,C),T.setUTCHours(0,0,0,0);var S=wo(T,n),_=new Date(0);_.setUTCFullYear(x,0,C),_.setUTCHours(0,0,0,0);var B=wo(_,n);return g.getTime()>=S.getTime()?x+1:g.getTime()>=B.getTime()?x:x-1}function av(i,n){var r,a,l,c,h,p,m,y;ht(1,arguments);var g=Eo(),x=Kr((r=(a=(l=(c=n?.firstWeekContainsDate)!==null&&c!==void 0?c:n==null||(h=n.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&l!==void 0?l:g.firstWeekContainsDate)!==null&&a!==void 0?a:(m=g.locale)===null||m===void 0||(y=m.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&r!==void 0?r:1),b=Yf(i,n),C=new Date(0);C.setUTCFullYear(b,0,x),C.setUTCHours(0,0,0,0);var T=wo(C,n);return T}var ov=6048e5;function lv(i,n){ht(1,arguments);var r=It(i),a=wo(r,n).getTime()-av(r,n).getTime();return Math.round(a/ov)+1}function Ke(i,n){for(var r=i<0?"-":"",a=Math.abs(i).toString();a.length<n;)a="0"+a;return r+a}var vr={y:function(n,r){var a=n.getUTCFullYear(),l=a>0?a:1-a;return Ke(r==="yy"?l%100:l,r.length)},M:function(n,r){var a=n.getUTCMonth();return r==="M"?String(a+1):Ke(a+1,2)},d:function(n,r){return Ke(n.getUTCDate(),r.length)},a:function(n,r){var a=n.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h:function(n,r){return Ke(n.getUTCHours()%12||12,r.length)},H:function(n,r){return Ke(n.getUTCHours(),r.length)},m:function(n,r){return Ke(n.getUTCMinutes(),r.length)},s:function(n,r){return Ke(n.getUTCSeconds(),r.length)},S:function(n,r){var a=r.length,l=n.getUTCMilliseconds(),c=Math.floor(l*Math.pow(10,a-3));return Ke(c,r.length)}},Cs={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},uv={G:function(n,r,a){var l=n.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return a.era(l,{width:"abbreviated"});case"GGGGG":return a.era(l,{width:"narrow"});case"GGGG":default:return a.era(l,{width:"wide"})}},y:function(n,r,a){if(r==="yo"){var l=n.getUTCFullYear(),c=l>0?l:1-l;return a.ordinalNumber(c,{unit:"year"})}return vr.y(n,r)},Y:function(n,r,a,l){var c=Yf(n,l),h=c>0?c:1-c;if(r==="YY"){var p=h%100;return Ke(p,2)}return r==="Yo"?a.ordinalNumber(h,{unit:"year"}):Ke(h,r.length)},R:function(n,r){var a=Kf(n);return Ke(a,r.length)},u:function(n,r){var a=n.getUTCFullYear();return Ke(a,r.length)},Q:function(n,r,a){var l=Math.ceil((n.getUTCMonth()+1)/3);switch(r){case"Q":return String(l);case"QQ":return Ke(l,2);case"Qo":return a.ordinalNumber(l,{unit:"quarter"});case"QQQ":return a.quarter(l,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(l,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(l,{width:"wide",context:"formatting"})}},q:function(n,r,a){var l=Math.ceil((n.getUTCMonth()+1)/3);switch(r){case"q":return String(l);case"qq":return Ke(l,2);case"qo":return a.ordinalNumber(l,{unit:"quarter"});case"qqq":return a.quarter(l,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(l,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(l,{width:"wide",context:"standalone"})}},M:function(n,r,a){var l=n.getUTCMonth();switch(r){case"M":case"MM":return vr.M(n,r);case"Mo":return a.ordinalNumber(l+1,{unit:"month"});case"MMM":return a.month(l,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(l,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(l,{width:"wide",context:"formatting"})}},L:function(n,r,a){var l=n.getUTCMonth();switch(r){case"L":return String(l+1);case"LL":return Ke(l+1,2);case"Lo":return a.ordinalNumber(l+1,{unit:"month"});case"LLL":return a.month(l,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(l,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(l,{width:"wide",context:"standalone"})}},w:function(n,r,a,l){var c=lv(n,l);return r==="wo"?a.ordinalNumber(c,{unit:"week"}):Ke(c,r.length)},I:function(n,r,a){var l=iv(n);return r==="Io"?a.ordinalNumber(l,{unit:"week"}):Ke(l,r.length)},d:function(n,r,a){return r==="do"?a.ordinalNumber(n.getUTCDate(),{unit:"date"}):vr.d(n,r)},D:function(n,r,a){var l=nv(n);return r==="Do"?a.ordinalNumber(l,{unit:"dayOfYear"}):Ke(l,r.length)},E:function(n,r,a){var l=n.getUTCDay();switch(r){case"E":case"EE":case"EEE":return a.day(l,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(l,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(l,{width:"short",context:"formatting"});case"EEEE":default:return a.day(l,{width:"wide",context:"formatting"})}},e:function(n,r,a,l){var c=n.getUTCDay(),h=(c-l.weekStartsOn+8)%7||7;switch(r){case"e":return String(h);case"ee":return Ke(h,2);case"eo":return a.ordinalNumber(h,{unit:"day"});case"eee":return a.day(c,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(c,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(c,{width:"short",context:"formatting"});case"eeee":default:return a.day(c,{width:"wide",context:"formatting"})}},c:function(n,r,a,l){var c=n.getUTCDay(),h=(c-l.weekStartsOn+8)%7||7;switch(r){case"c":return String(h);case"cc":return Ke(h,r.length);case"co":return a.ordinalNumber(h,{unit:"day"});case"ccc":return a.day(c,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(c,{width:"narrow",context:"standalone"});case"cccccc":return a.day(c,{width:"short",context:"standalone"});case"cccc":default:return a.day(c,{width:"wide",context:"standalone"})}},i:function(n,r,a){var l=n.getUTCDay(),c=l===0?7:l;switch(r){case"i":return String(c);case"ii":return Ke(c,r.length);case"io":return a.ordinalNumber(c,{unit:"day"});case"iii":return a.day(l,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(l,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(l,{width:"short",context:"formatting"});case"iiii":default:return a.day(l,{width:"wide",context:"formatting"})}},a:function(n,r,a){var l=n.getUTCHours(),c=l/12>=1?"pm":"am";switch(r){case"a":case"aa":return a.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(c,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(c,{width:"wide",context:"formatting"})}},b:function(n,r,a){var l=n.getUTCHours(),c;switch(l===12?c=Cs.noon:l===0?c=Cs.midnight:c=l/12>=1?"pm":"am",r){case"b":case"bb":return a.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(c,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(c,{width:"wide",context:"formatting"})}},B:function(n,r,a){var l=n.getUTCHours(),c;switch(l>=17?c=Cs.evening:l>=12?c=Cs.afternoon:l>=4?c=Cs.morning:c=Cs.night,r){case"B":case"BB":case"BBB":return a.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(c,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(c,{width:"wide",context:"formatting"})}},h:function(n,r,a){if(r==="ho"){var l=n.getUTCHours()%12;return l===0&&(l=12),a.ordinalNumber(l,{unit:"hour"})}return vr.h(n,r)},H:function(n,r,a){return r==="Ho"?a.ordinalNumber(n.getUTCHours(),{unit:"hour"}):vr.H(n,r)},K:function(n,r,a){var l=n.getUTCHours()%12;return r==="Ko"?a.ordinalNumber(l,{unit:"hour"}):Ke(l,r.length)},k:function(n,r,a){var l=n.getUTCHours();return l===0&&(l=24),r==="ko"?a.ordinalNumber(l,{unit:"hour"}):Ke(l,r.length)},m:function(n,r,a){return r==="mo"?a.ordinalNumber(n.getUTCMinutes(),{unit:"minute"}):vr.m(n,r)},s:function(n,r,a){return r==="so"?a.ordinalNumber(n.getUTCSeconds(),{unit:"second"}):vr.s(n,r)},S:function(n,r){return vr.S(n,r)},X:function(n,r,a,l){var c=l._originalDate||n,h=c.getTimezoneOffset();if(h===0)return"Z";switch(r){case"X":return of(h);case"XXXX":case"XX":return Gr(h);case"XXXXX":case"XXX":default:return Gr(h,":")}},x:function(n,r,a,l){var c=l._originalDate||n,h=c.getTimezoneOffset();switch(r){case"x":return of(h);case"xxxx":case"xx":return Gr(h);case"xxxxx":case"xxx":default:return Gr(h,":")}},O:function(n,r,a,l){var c=l._originalDate||n,h=c.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+af(h,":");case"OOOO":default:return"GMT"+Gr(h,":")}},z:function(n,r,a,l){var c=l._originalDate||n,h=c.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+af(h,":");case"zzzz":default:return"GMT"+Gr(h,":")}},t:function(n,r,a,l){var c=l._originalDate||n,h=Math.floor(c.getTime()/1e3);return Ke(h,r.length)},T:function(n,r,a,l){var c=l._originalDate||n,h=c.getTime();return Ke(h,r.length)}};function af(i,n){var r=i>0?"-":"+",a=Math.abs(i),l=Math.floor(a/60),c=a%60;if(c===0)return r+String(l);var h=n;return r+String(l)+h+Ke(c,2)}function of(i,n){if(i%60===0){var r=i>0?"-":"+";return r+Ke(Math.abs(i)/60,2)}return Gr(i,n)}function Gr(i,n){var r=n||"",a=i>0?"-":"+",l=Math.abs(i),c=Ke(Math.floor(l/60),2),h=Ke(l%60,2);return a+c+r+h}var lf=function(n,r){switch(n){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},Xf=function(n,r){switch(n){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},cv=function(n,r){var a=n.match(/(P+)(p+)?/)||[],l=a[1],c=a[2];if(!c)return lf(n,r);var h;switch(l){case"P":h=r.dateTime({width:"short"});break;case"PP":h=r.dateTime({width:"medium"});break;case"PPP":h=r.dateTime({width:"long"});break;case"PPPP":default:h=r.dateTime({width:"full"});break}return h.replace("{{date}}",lf(l,r)).replace("{{time}}",Xf(c,r))},dv={p:Xf,P:cv},hv=["D","DD"],fv=["YY","YYYY"];function pv(i){return hv.indexOf(i)!==-1}function mv(i){return fv.indexOf(i)!==-1}function uf(i,n,r){if(i==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(n,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(i==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(n,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(i==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(n,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(i==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(n,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var gv={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},yv=function(n,r,a){var l,c=gv[n];return typeof c=="string"?l=c:r===1?l=c.one:l=c.other.replace("{{count}}",r.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+l:l+" ago":l};function xu(i){return function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.width?String(n.width):i.defaultWidth,a=i.formats[r]||i.formats[i.defaultWidth];return a}}var vv={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},wv={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xv={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},bv={date:xu({formats:vv,defaultWidth:"full"}),time:xu({formats:wv,defaultWidth:"full"}),dateTime:xu({formats:xv,defaultWidth:"full"})},kv={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Sv=function(n,r,a,l){return kv[n]};function Li(i){return function(n,r){var a=r!=null&&r.context?String(r.context):"standalone",l;if(a==="formatting"&&i.formattingValues){var c=i.defaultFormattingWidth||i.defaultWidth,h=r!=null&&r.width?String(r.width):c;l=i.formattingValues[h]||i.formattingValues[c]}else{var p=i.defaultWidth,m=r!=null&&r.width?String(r.width):i.defaultWidth;l=i.values[m]||i.values[p]}var y=i.argumentCallback?i.argumentCallback(n):n;return l[y]}}var _v={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},jv={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Nv={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ev={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Cv={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Tv={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Pv=function(n,r){var a=Number(n),l=a%100;if(l>20||l<10)switch(l%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},Ov={ordinalNumber:Pv,era:Li({values:_v,defaultWidth:"wide"}),quarter:Li({values:jv,defaultWidth:"wide",argumentCallback:function(n){return n-1}}),month:Li({values:Nv,defaultWidth:"wide"}),day:Li({values:Ev,defaultWidth:"wide"}),dayPeriod:Li({values:Cv,defaultWidth:"wide",formattingValues:Tv,defaultFormattingWidth:"wide"})};function Mi(i){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.width,l=a&&i.matchPatterns[a]||i.matchPatterns[i.defaultMatchWidth],c=n.match(l);if(!c)return null;var h=c[0],p=a&&i.parsePatterns[a]||i.parsePatterns[i.defaultParseWidth],m=Array.isArray(p)?Iv(p,function(x){return x.test(h)}):Av(p,function(x){return x.test(h)}),y;y=i.valueCallback?i.valueCallback(m):m,y=r.valueCallback?r.valueCallback(y):y;var g=n.slice(h.length);return{value:y,rest:g}}}function Av(i,n){for(var r in i)if(i.hasOwnProperty(r)&&n(i[r]))return r}function Iv(i,n){for(var r=0;r<i.length;r++)if(n(i[r]))return r}function Rv(i){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.match(i.matchPattern);if(!a)return null;var l=a[0],c=n.match(i.parsePattern);if(!c)return null;var h=i.valueCallback?i.valueCallback(c[0]):c[0];h=r.valueCallback?r.valueCallback(h):h;var p=n.slice(l.length);return{value:h,rest:p}}}var Dv=/^(\d+)(th|st|nd|rd)?/i,Lv=/\d+/i,Mv={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Uv={any:[/^b/i,/^(a|c)/i]},Fv={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Wv={any:[/1/i,/2/i,/3/i,/4/i]},Bv={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},$v={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},zv={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qv={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Hv={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Gv={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Vv={ordinalNumber:Rv({matchPattern:Dv,parsePattern:Lv,valueCallback:function(n){return parseInt(n,10)}}),era:Mi({matchPatterns:Mv,defaultMatchWidth:"wide",parsePatterns:Uv,defaultParseWidth:"any"}),quarter:Mi({matchPatterns:Fv,defaultMatchWidth:"wide",parsePatterns:Wv,defaultParseWidth:"any",valueCallback:function(n){return n+1}}),month:Mi({matchPatterns:Bv,defaultMatchWidth:"wide",parsePatterns:$v,defaultParseWidth:"any"}),day:Mi({matchPatterns:zv,defaultMatchWidth:"wide",parsePatterns:qv,defaultParseWidth:"any"}),dayPeriod:Mi({matchPatterns:Hv,defaultMatchWidth:"any",parsePatterns:Gv,defaultParseWidth:"any"})},Jv={code:"en-US",formatDistance:yv,formatLong:bv,formatRelative:Sv,localize:Ov,match:Vv,options:{weekStartsOn:0,firstWeekContainsDate:1}},Qv=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Kv=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Yv=/^'([^]*?)'?$/,Xv=/''/g,Zv=/[a-zA-Z]/;function un(i,n,r){var a,l,c,h,p,m,y,g,x,b,C,T,S,_;ht(2,arguments);var B=String(n),F=Eo(),L=(a=(l=void 0)!==null&&l!==void 0?l:F.locale)!==null&&a!==void 0?a:Jv,W=Kr((c=(h=(p=(m=void 0)!==null&&m!==void 0?m:void 0)!==null&&p!==void 0?p:F.firstWeekContainsDate)!==null&&h!==void 0?h:(y=F.locale)===null||y===void 0||(g=y.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&c!==void 0?c:1);if(!(W>=1&&W<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var te=Kr((x=(b=(C=(T=void 0)!==null&&T!==void 0?T:void 0)!==null&&C!==void 0?C:F.weekStartsOn)!==null&&b!==void 0?b:(S=F.locale)===null||S===void 0||(_=S.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&x!==void 0?x:0);if(!(te>=0&&te<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!L.localize)throw new RangeError("locale must contain localize property");if(!L.formatLong)throw new RangeError("locale must contain formatLong property");var Z=It(i);if(!Ky(Z))throw new RangeError("Invalid time value");var ie=Vy(Z),me=ev(Z,ie),Ne={firstWeekContainsDate:W,weekStartsOn:te,locale:L,_originalDate:Z},Oe=B.match(Kv).map(function(V){var de=V[0];if(de==="p"||de==="P"){var ne=dv[de];return ne(V,L.formatLong)}return V}).join("").match(Qv).map(function(V){if(V==="''")return"'";var de=V[0];if(de==="'")return ew(V);var ne=uv[de];if(ne)return mv(V)&&uf(V,n,String(i)),pv(V)&&uf(V,n,String(i)),ne(me,V,L.localize,Ne);if(de.match(Zv))throw new RangeError("Format string contains an unescaped latin alphabet character `"+de+"`");return V}).join("");return Oe}function ew(i){var n=i.match(Yv);return n?n[1].replace(Xv,"'"):i}const tw={images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Lunges",resources:[{label:"Lunge technique guide",url:"https://example.com/lunges/technique"},{label:"Walking lunge progression",url:"https://example.com/lunges/progression"},{label:"Lunge programming for strength",url:"https://example.com/lunges/programming"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Forward lunge finish"],difficulty:"Moderate",duration:"5-12 min",exampleNote:"Step forward, lower until back knee is near floor, then drive through front heel to stand.",meta:{exercise:"Lower Body / Quads / Glutes / Hamstrings / Calves",movement:"Squat/Lunge -- Sagittal",equipment:"Bodyweight / Optional Weights",trainingType:"Strength / Hypertrophy / Endurance / Balance-Stability",planeOfMotion:"Sagittal",description:"Step forward and lower body by bending knees until back knee is just above the floor; push back to start. Keep torso upright and core engaged."}},nw={images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed/aclHkVaku9U",featuredVideo:!0,resources:[{label:"Harvard Health: How to do a squat",url:"https://www.health.harvard.edu/staying-healthy/squat-exercise"},{label:"ACE Fitness: Squat technique and tips",url:"https://www.acefitness.org/education-and-resources/lifestyle/exercise-library/136/squat/"},{label:"Video: How to Do a Barbell Squat (YouTube)",url:"https://www.youtube.com/watch?v=aclHkVaku9U"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Proper squat depth and posture"],difficulty:"Moderate",duration:"8-15 min",exampleNote:"Keep chest up, push hips back, and drive through heels to stand.",meta:{exercise:"Lower Body / Quads / Glutes / Hamstrings / Calves / Core Stabilizers",movement:"Squat/Lunge -- Sagittal",equipment:"Bodyweight / Free Weights",trainingType:"Strength / Hypertrophy / Endurance / Power-Plyometrics / Balance-Stability",planeOfMotion:"Sagittal",description:"Stand shoulder-width apart, lower by bending hips and knees, then push through heels to return to standing. Avoid knees caving and keep heels down."}},rw={images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Bridges+exercise",resources:[{label:"Glute bridge progressions",url:"https://example.com/bridges/progressions"},{label:"Hip thrust vs bridge comparison",url:"https://example.com/bridges/compare"},{label:"Bridge programming for glute strength",url:"https://example.com/bridges/program"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Bridge top squeeze"],difficulty:"Easy",duration:"5-10 min",exampleNote:"Press through heels to lift hips until body forms straight line from shoulders to knees.",meta:{exercise:"Lower Body / Glutes / Hamstrings / Core Stabilizers / Lower Back",movement:"Push -- Hip Hinge/Extension",equipment:"Bodyweight / Optional Weights",trainingType:"Strength / Hypertrophy",planeOfMotion:"Sagittal",description:"Lie on your back with knees bent and feet flat, press through heels to lift hips toward ceiling and squeeze glutes at top."}},sw={images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Punches+drill",resources:[{label:"Basic punching technique",url:"https://example.com/punches/technique"},{label:"Shadowboxing routines",url:"https://example.com/punches/shadowboxing"},{label:"Rotational power drills",url:"https://example.com/punches/power"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Punching stance"],difficulty:"Moderate",duration:"3-8 min",exampleNote:"Stand in a fighting stance, extend the arm and rotate torso for power, retract quickly.",meta:{exercise:"Upper Body / Arms / Shoulders / Chest / Core  Rotation",movement:"Push -- Horizontal / Rotation",equipment:"Bodyweight / Optional Weights",trainingType:"Endurance / Power-Plyometrics",planeOfMotion:"Transverse",description:"Stand with feet shoulder-width and rotate through the torso while extending the arm to punch, then retract. Focus on controlled power and posture."}},iw={images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Superman+exercise",resources:[{label:"Superman back extension tips",url:"https://example.com/superman/tips"},{label:"Lower back strengthening program",url:"https://example.com/superman/program"},{label:"Glute and hamstring pairing",url:"https://example.com/superman/pairings"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Superman top position"],difficulty:"Easy",duration:"3-8 min",exampleNote:"Lift arms, chest, and legs slightly off the ground squeezing glutes and lower back.",meta:{exercise:"Core / Lower Back / Glutes / Hamstrings / Shoulders",movement:"Extension -- Sagittal Isometric Hold",equipment:"Bodyweight",trainingType:"Endurance / Balance-Stability",planeOfMotion:"Sagittal",description:"Lie face down and lift arms, chest, and legs a few inches off the ground, holding briefly at the top."}},cf={"Sit-ups":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed/1fbU_MkV7NE",featuredVideo:!0,resources:[{label:"NHS: How to do sit-ups safely",url:"https://www.nhs.uk/live-well/exercise/how-to-do-a-sit-up-or-crunch/"},{label:"LIVESTRONG: How to Do a Sit Up",url:"https://www.livestrong.com/article/137075-how-to-do-a-sit-up/"},{label:"Video: How to Do a Sit Up (YouTube)",url:"https://www.youtube.com/watch?v=1fbU_MkV7NE"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Controlled sit-up finish"],difficulty:"Moderate",duration:"3-10 min",exampleNote:"Lie on your back with knees bent and feet flat; curl up using the core and avoid neck strain.",meta:{exercise:"Core / Abs",movement:"Push -- Sagittal Flexion",equipment:"Bodyweight",trainingType:"Endurance / Hypertrophy",planeOfMotion:"Sagittal",description:"Lie on your back with knees bent and feet flat on the floor. Cross arms or place hands by your head. Tighten core and curl upper body toward knees, then lower with control."}},"Reverse Crunches":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Reverse+Crunches",resources:[{label:"Reverse crunch tutorial",url:"https://example.com/reverse-crunches/tutorial"},{label:"Lower-abs progressions",url:"https://example.com/reverse-crunches/progressions"},{label:"Reverse crunch common errors",url:"https://example.com/reverse-crunches/errors"}],galleryImages:["/images/we09532.png"],imageCaptions:["Reverse crunch top position"],difficulty:"Moderate",duration:"5-10 min",exampleNote:"Curl hips off the floor and draw knees toward chest using the abs.",meta:{exercise:"Core / Abs / Lower Back Stabilizers",movement:"Pull -- Sagittal Flexion",equipment:"Bodyweight",trainingType:"Endurance / Hypertrophy",planeOfMotion:"Sagittal",description:"Lie on your back with knees bent and feet lifted. Contract abs to curl hips off the floor and draw knees toward your chest. Lower down under control."}},"Bicycle Crunches":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Bicycle+Crunches",resources:[{label:"Bicycle crunch form guide",url:"https://example.com/bicycle-crunches/form"},{label:"Oblique strengthening routine",url:"https://example.com/bicycle-crunches/obliques"},{label:"Progressions for bicycle crunches",url:"https://example.com/bicycle-crunches/progressions"}],galleryImages:["/images/we09532.png"],imageCaptions:["Bicycle crunch twist"],difficulty:"Moderate",duration:"5-8 min",exampleNote:"Perform slow, controlled alternating twist motions to target obliques.",meta:{exercise:"Core / Abs / Obliques",movement:"Rotation -- Transverse Flexion",equipment:"Bodyweight",trainingType:"Endurance / Hypertrophy",planeOfMotion:"Transverse",description:"Lie on your back with hands behind head and legs lifted. Bring one knee toward chest while twisting the opposite elbow toward it, then switch sides."}},"Flutter Kicks":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Flutter+Kicks",resources:[{label:"Flutter kicks technique",url:"https://example.com/flutter-kicks/technique"},{label:"Core endurance workouts",url:"https://example.com/flutter-kicks/endurance"},{label:"Protect your lower back while flutter kicking",url:"https://example.com/flutter-kicks/lower-back"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Flutter kicks supine"],difficulty:"Moderate",duration:"1-3 min",exampleNote:"Keep core tight and lower back pressed to the floor while performing small kicking motions.",meta:{exercise:"Core / Abs / Hip Flexors",movement:"Push -- Sagittal Flexion/Stability",equipment:"Bodyweight",trainingType:"Endurance / Hypertrophy / Balance-Stability",planeOfMotion:"Sagittal",description:"Lie flat on your back with legs extended, hands under hips for support. Lift legs a few inches and alternate small kicks while keeping the core engaged."}},"Leg Raises":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed/2XcmRr0Vj3I",featuredVideo:!0,resources:[{label:"Penn State Health: How to do leg raises",url:"https://www.pennstatehealth.org/health-a-to-z/leg-raises"},{label:"Nuffield Health: Straight leg raise technique",url:"https://www.nuffieldhealth.com/article/how-to-do-a-straight-leg-raise"},{label:"Video: Lying Leg Raises (YouTube)",url:"https://www.youtube.com/watch?v=2XcmRr0Vj3I"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Leg raise - controlled descent"],difficulty:"Moderate",duration:"5-10 min",exampleNote:"Keep legs straight and lift toward the ceiling, lowering with control.",meta:{exercise:"Core / Abs / Hip Flexors",movement:"Push -- Sagittal Flexion",equipment:"Bodyweight",trainingType:"Endurance / Hypertrophy",planeOfMotion:"Sagittal",description:"Lie flat with legs extended and hands under hips. Slowly lift legs toward ceiling, then lower with control while maintaining tension in the abs."}},"Elbow Plank":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Elbow+Plank",resources:[{label:"Plank form and variations",url:"https://example.com/elbow-plank/form"},{label:"Plank progressions for endurance",url:"https://example.com/elbow-plank/progressions"},{label:"Shoulder and core stability tips",url:"https://example.com/elbow-plank/stability"}],galleryImages:["/images/we09532.png"],imageCaptions:["Elbow plank alignment"],difficulty:"Easy",duration:"30s-2min",exampleNote:"Form a straight line from head to heels on elbows; keep hips level and core braced.",meta:{exercise:"Core / Abs / Lower Back / Shoulders",movement:"Anti-Rotation / Stability -- Isometric Hold",equipment:"Bodyweight",trainingType:"Endurance / Balance-Stability",planeOfMotion:"Sagittal",description:"Start face down with elbows under shoulders and legs extended. Lift body into a straight line and hold while breathing evenly."}},Lunges:tw,"High Knees":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=High+Knees",resources:[{label:"High knees drill and form",url:"https://example.com/high-knees/drill"},{label:"Warm-up plyometrics",url:"https://example.com/high-knees/plyometrics"},{label:"Cardio interval ideas",url:"https://example.com/high-knees/cardio"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["High knees sprint form"],difficulty:"Moderate",duration:"30s-3min",exampleNote:"Drive knees up rapidly while pumping opposite arm and staying light on the feet.",meta:{exercise:"Lower Body / Quads / Hamstrings / Glutes / Calves / Core Stabilizers",movement:"Running/Carry -- Sagittal",equipment:"Bodyweight",trainingType:"Endurance / Power-Plyometrics / Balance-Stability",planeOfMotion:"Sagittal",description:"Quickly drive one knee toward the chest while pumping the opposite arm, alternating rapidly to raise heart rate."}},"Side Kicks":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Side+Kicks",resources:[{label:"Side kick mechanics",url:"https://example.com/side-kicks/mechanics"},{label:"Hip abductor strengthening",url:"https://example.com/side-kicks/hip-abductors"},{label:"Balance drills for kicks",url:"https://example.com/side-kicks/balance"}],galleryImages:["/images/we09532.png"],imageCaptions:["Side kick height"],difficulty:"Moderate",duration:"3-8 min",exampleNote:"Shift weight to one leg and lift the opposite leg to the side with control.",meta:{exercise:"Lower Body / Glutes / Hip Abductors / Quads / Core Stabilizers",movement:"Push -- Frontal",equipment:"Bodyweight",trainingType:"Strength / Hypertrophy / Balance-Stability",planeOfMotion:"Frontal",description:"Stand with feet shoulder-width apart, shift weight to one leg, lift the other leg out to the side while keeping torso upright."}},"Mountain Climbers":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Mountain+Climbers",resources:[{label:"Mountain climber intervals",url:"https://example.com/mountain-climbers/intervals"},{label:"Plank-to-mountain transitions",url:"https://example.com/mountain-climbers/transitions"},{label:"Core conditioning with mountain climbers",url:"https://example.com/mountain-climbers/core"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Mountain climbers quick drive"],difficulty:"Moderate",duration:"30s-2min",exampleNote:"From high plank, drive knees toward chest alternately while keeping torso stable.",meta:{exercise:"Core / Abs / Shoulders / Arms / Quads / Hip Flexors",movement:"Push -- Sagittal Dynamic Stability",equipment:"Bodyweight",trainingType:"Endurance / Power-Plyometrics / Balance-Stability",planeOfMotion:"Sagittal",description:"Start in a high plank and alternately drive knees toward chest at a steady pace while keeping hips low."}},Squats:nw,"Donkey Kicks":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Donkey+Kicks",resources:[{label:"Donkey kick variations",url:"https://example.com/donkey-kicks/variations"},{label:"Glute activation exercises",url:"https://example.com/donkey-kicks/activation"},{label:"Band-assisted donkey kicks",url:"https://example.com/donkey-kicks/band"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Donkey kick top"],difficulty:"Easy",duration:"3-8 min",exampleNote:"From all fours, lift one knee to the ceiling with knee bent at 90 degrees, squeezing glutes at top.",meta:{exercise:"Lower Body / Glutes / Hamstrings / Core Stabilizers",movement:"Push -- Sagittal Hip Extension",equipment:"Bodyweight / Optional Bands",trainingType:"Strength / Hypertrophy / Balance-Stability",planeOfMotion:"Sagittal",description:"Start on all fours and lift one leg upward with knee bent at 90 degrees, squeeze glutes at the top, then lower with control."}},Bridges:rw,"Jump Knee Tucks":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Jump+Knee+Tucks",resources:[{label:"Plyometric tuck jump progressions",url:"https://example.com/jump-knee-tucks/progressions"},{label:"Landing mechanics for knee tucks",url:"https://example.com/jump-knee-tucks/landing"},{label:"Plyometric conditioning",url:"https://example.com/jump-knee-tucks/conditioning"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Tuck jump peak"],difficulty:"Hard",duration:"1-5 min",exampleNote:"Explosively jump and drive knees to chest; land softly and reset.",meta:{exercise:"Lower Body / Quads / Hamstrings / Glutes / Calves / Core Stabilizers",movement:"Squat/Lunge + Jump -- Explosive Plyometric",equipment:"Bodyweight",trainingType:"Power-Plyometrics / Endurance",planeOfMotion:"Sagittal",description:"Bend into a quarter squat, explode upward bringing knees toward chest, and land softly absorbing impact."}},"Side Leg Raises":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Side+Leg+Raises",resources:[{label:"Side leg raise technique",url:"https://example.com/side-leg-raises/technique"},{label:"Glute med strengthening routine",url:"https://example.com/side-leg-raises/routine"},{label:"Ankle and hip mobility for side raises",url:"https://example.com/side-leg-raises/mobility"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Side leg raise top"],difficulty:"Easy",duration:"3-8 min",exampleNote:"Lie on your side and lift the top leg with control, keeping hips stacked.",meta:{exercise:"Lower Body / Glutes / Hip Abductors / Core Stabilizers",movement:"Push -- Frontal Hip Abduction",equipment:"Bodyweight / Optional Bands",trainingType:"Strength / Balance-Stability",planeOfMotion:"Frontal",description:"Lie on your side and lift the top leg upward while keeping your hips stacked and torso stable."}},"Close-Grip Push-ups":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Close-Grip+Push-ups",resources:[{label:"Close-grip push-up form",url:"https://example.com/close-grip-pushups/form"},{label:"Triceps-focused bodyweight work",url:"https://example.com/close-grip-pushups/triceps"},{label:"Progressions for stronger push-ups",url:"https://example.com/close-grip-pushups/progressions"}],galleryImages:["/images/we09532.png"],imageCaptions:["Close-grip push-up finish"],difficulty:"Moderate",duration:"5-12 min",exampleNote:"Hands close under shoulders; lower chest while keeping elbows tucked to emphasize triceps.",meta:{exercise:"Upper Body / Chest / Triceps / Shoulders / Core Stabilizers",movement:"Push -- Horizontal",equipment:"Bodyweight",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"From a push-up position, place hands closer than shoulder width and lower chest while keeping elbows near the ribs."}},Punches:sw,"Pseudo Planche":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Pseudo+Planche",resources:[{label:"Pseudo planche progressions",url:"https://example.com/pseudo-planche/progressions"},{label:"Wrist and shoulder prep for planche",url:"https://example.com/pseudo-planche/prep"},{label:"Advanced bodyweight skills programming",url:"https://example.com/pseudo-planche/program"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Pseudo planche lean"],difficulty:"Hard",duration:"Varies",exampleNote:"Lean shoulders forward in push-up position to increase horizontal load on shoulders and core.",meta:{exercise:"Upper Body / Chest / Triceps / Shoulders / Core Stabilizers",movement:"Push -- Horizontal with Forward Lean",equipment:"Bodyweight",trainingType:"Strength / Hypertrophy / Balance-Stability / Power (advanced variations)",planeOfMotion:"Sagittal",description:"From a push-up position, place hands lower toward hips and lean shoulders forward to increase load on the shoulders and core."}},"Sitting Pull-ups":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Sitting+Pull-ups",resources:[{label:"Assisted pull-up options",url:"https://example.com/sitting-pullups/assisted"},{label:"Seated pull mechanics",url:"https://example.com/sitting-pullups/mechanics"},{label:"Upper back strengthening",url:"https://example.com/sitting-pullups/upper-back"}],galleryImages:["/images/we09532.png"],imageCaptions:["Sitting pull-up setup"],difficulty:"Moderate",duration:"Varies",exampleNote:"Sit under a bar or rings and pull chest toward the bar using the back and arms. Focus on technique over momentum.",meta:{exercise:"Upper Body / Back / Biceps / Forearms / Shoulders / Core Stabilizers",movement:"Pull -- Vertical",equipment:"Bodyweight / Suspension Trainer / Bar / Rings",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Sit or use an assisted setup to pull the chest toward a bar, focusing on scapular retraction and elbow drive."}},"Doorframe Rows":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Doorframe+Rows",resources:[{label:"Doorframe row setup and safety",url:"https://example.com/doorframe-rows/setup"},{label:"Horizontal pulling programming",url:"https://example.com/doorframe-rows/programming"},{label:"Grip and wrist considerations",url:"https://example.com/doorframe-rows/grip"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Doorframe row body angle"],difficulty:"Easy",duration:"5-12 min",exampleNote:"Grip the doorframe and lean back, pulling the chest toward the frame while keeping the body straight.",meta:{exercise:"Upper Body / Back / Biceps / Forearms / Shoulders / Core Stabilizers",movement:"Pull -- Horizontal",equipment:"Bodyweight / Doorframe or Sturdy Support",trainingType:"Strength / Endurance / Balance-Stability",planeOfMotion:"Sagittal",description:"Stand facing an open door, grip the frame, and lean back. Pull your chest toward the frame using back muscles and squeeze shoulder blades."}},"Scapular Shrugs":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Scapular+Shrugs",resources:[{label:"Scapular control drills",url:"https://example.com/scapular-shrugs/drills"},{label:"Shoulder health routines",url:"https://example.com/scapular-shrugs/shoulder-health"},{label:"Band-based scapular work",url:"https://example.com/scapular-shrugs/bands"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Scapular shrug small range"],difficulty:"Easy",duration:"2-6 min",exampleNote:"From a hang, pull shoulder blades down and together without bending elbows to create a small upward movement.",meta:{exercise:"Upper Body / Back / Trapezius / Rhomboids / Lats / Shoulders / Core Stabilizers",movement:"Pull -- Vertical Scapular Depression/Elevation",equipment:"Bodyweight / Pull-Up Bar",trainingType:"Strength / Hypertrophy / Balance-Stability",planeOfMotion:"Sagittal",description:"Hang from a bar and pull shoulder blades down and together to produce a slight lift, focusing on scapular control."}},Superman:iw,"Back Lifts":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Back+Lifts",resources:[{label:"Back lift variations",url:"https://example.com/back-lifts/variations"},{label:"Safe tempo for back lifts",url:"https://example.com/back-lifts/tempo"},{label:"Lower back strengthening plans",url:"https://example.com/back-lifts/plans"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Back lift top"],difficulty:"Moderate",duration:"5-12 min",exampleNote:"Lift torso using lower back and glutes; avoid jerky motions.",meta:{exercise:"Core / Lower Back / Glutes / Hamstrings",movement:"Extension -- Hip Hinge",equipment:"Bodyweight / Roman Chair / Stability Ball",trainingType:"Strength / Hypertrophy",planeOfMotion:"Sagittal",description:"Perform controlled back extensions focusing on hip hinge mechanics and lower back engagement."}},"Alternative Arm Leg Plank":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Arm+Leg+Plank",resources:[{label:"Arm/leg plank progressions",url:"https://example.com/arm-leg-plank/progressions"},{label:"Anti-rotation core drills",url:"https://example.com/arm-leg-plank/anti-rotation"},{label:"Plank stability programming",url:"https://example.com/arm-leg-plank/program"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Arm-leg plank balance"],difficulty:"Moderate",duration:"30s-2min",exampleNote:"Lift opposite arm and leg while maintaining a straight plank line and steady breathing.",meta:{exercise:"Core / Abs / Lower Back / Shoulders / Glutes",movement:"Anti-Rotation / Stability -- Isometric Hold with Alternating Lift",equipment:"Bodyweight",trainingType:"Endurance / Balance-Stability",planeOfMotion:"Sagittal with Transverse Stability Demand",description:"From a plank position, lift one arm and the opposite leg while keeping hips level and core braced."}},"Push-ups":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Push-ups",resources:[{label:"Push-up form checklist",url:"https://example.com/push-ups/form"},{label:"Push-up progressions and regressions",url:"https://example.com/push-ups/progressions"},{label:"Programming push-ups for strength",url:"https://example.com/push-ups/programming"}],galleryImages:["/images/we09532.png"],imageCaptions:["Standard push-up finish"],difficulty:"Moderate",duration:"5-15 min",exampleNote:"Keep body straight and lower chest to floor, then push back up using chest and triceps.",meta:{exercise:"Upper Body / Chest / Triceps / Shoulders / Core Stabilizers",movement:"Push -- Horizontal",equipment:"Bodyweight",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"From a high plank, lower chest toward floor and press back up, keeping core engaged."}},"Chest Expansions":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Chest+Expansions",resources:[{label:"Chest expansion mobility sequence",url:"https://example.com/chest-expansions/mobility"},{label:"Band-assisted chest opens",url:"https://example.com/chest-expansions/band"},{label:"Upper body flexibility routine",url:"https://example.com/chest-expansions/flexibility"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Chest expansion range"],difficulty:"Easy",duration:"3-8 min",exampleNote:"Open the arms wide and squeeze shoulder blades together; focus on posture and range of motion.",meta:{exercise:"Upper Body / Chest / Shoulders / Upper Back / Arms",movement:"Push -- Horizontal Abduction/Adduction",equipment:"Bodyweight / Bands",trainingType:"Endurance / Mobility-Flexibility",planeOfMotion:"Frontal",description:"Extend arms forward and open wide to stretch and mobilize the chest and shoulders."}},"Chest Squeezes":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Chest+Squeezes",resources:[{label:"Chest squeeze variations",url:"https://example.com/chest-squeezes/variations"},{label:"Medicine ball chest squeeze",url:"https://example.com/chest-squeezes/medicine-ball"},{label:"Isometric chest work for posture",url:"https://example.com/chest-squeezes/isometrics"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Chest squeeze hold"],difficulty:"Easy",duration:"2-6 min",exampleNote:"Press hands or an object together in front of chest to contract chest muscles.",meta:{exercise:"Upper Body / Chest / Shoulders / Arms",movement:"Push -- Horizontal Adduction/Isometric Hold",equipment:"Bodyweight / Bands / Dumbbell / Medicine Ball",trainingType:"Endurance / Mobility-Flexibility",planeOfMotion:"Frontal",description:"Squeeze hands or an object toward the midline to contract chest muscles and improve posture."}},"Pike Push-ups":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Pike+Push-ups",resources:[{label:"Pike push-up progression",url:"https://example.com/pike-pushups/progression"},{label:"Shoulder press alternatives",url:"https://example.com/pike-pushups/alternatives"},{label:"Inverted push-up technique",url:"https://example.com/pike-pushups/inverted"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Pike push-up peak"],difficulty:"Hard",duration:"Varies",exampleNote:"Walk feet toward hands to create a pike position and lower head toward the floor using shoulders.",meta:{exercise:"Upper Body / Shoulders / Triceps / Chest / Core Stabilizers",movement:"Push -- Vertical Press Variation",equipment:"Bodyweight",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Assume a pike (inverted V) position and lower the top of the head toward the floor, pressing back up to start."}},"Shoulder Taps":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Shoulder+Taps",resources:[{label:"Shoulder tap stability drill",url:"https://example.com/shoulder-taps/drill"},{label:"Anti-rotation core work",url:"https://example.com/shoulder-taps/anti-rotation"},{label:"Progressions for single-arm stability",url:"https://example.com/shoulder-taps/progressions"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Shoulder tap balance"],difficulty:"Easy",duration:"1-5 min",exampleNote:"From plank, lift one hand to tap the opposite shoulder while keeping hips square and body stable.",meta:{exercise:"Upper Body / Shoulders / Triceps / Chest / Core Stabilizers",movement:"Anti-Rotation / Stability -- Isometric Hold with Alternating Lift",equipment:"Bodyweight",trainingType:"Endurance / Balance-Stability / Strength",planeOfMotion:"Sagittal",description:"Maintain a stable plank while alternately tapping opposite shoulders with controlled motion."}},"Clapping Push-ups":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Clapping+Push-ups",resources:[{label:"Plyometric push-up progressions",url:"https://example.com/clapping-pushups/progressions"},{label:"Safe landing mechanics for plyo",url:"https://example.com/clapping-pushups/landing"},{label:"Upper body power drills",url:"https://example.com/clapping-pushups/power"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Clap push-up explosion"],difficulty:"Hard",duration:"Varies",exampleNote:"Explode off the ground and clap hands before returning to push-up position; land softly.",meta:{exercise:"Upper Body / Chest / Triceps / Shoulders / Core Stabilizers",movement:"Push -- Horizontal Explosive",equipment:"Bodyweight",trainingType:"Power-Plyometrics / Strength / Hypertrophy",planeOfMotion:"Sagittal",description:"Perform an explosive push-up so hands leave the ground, clap, and land in a controlled manner."}},"Cable Woodchop":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Cable+Woodchop",resources:[{label:"Cable woodchop technique",url:"https://example.com/cable-woodchop/technique"},{label:"Rotational core programming",url:"https://example.com/cable-woodchop/programming"},{label:"Anti-rotation vs rotation training",url:"https://example.com/cable-woodchop/rotation"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Cable woodchop finish"],difficulty:"Moderate",duration:"5-12 min",exampleNote:"Pull a handle diagonally across the body using torso rotation; control the return.",meta:{exercise:"Core / Abs / Obliques / Shoulders / Back Stabilizers",movement:"Rotation -- Transverse",equipment:"Cables / Bands",trainingType:"Strength / Hypertrophy / Endurance / Balance-Stability",planeOfMotion:"Transverse",description:"Attach a handle high on a cable and pull diagonally across the body while rotating the torso, then return smoothly."}},"Hanging Leg Raises":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Hanging+Leg+Raises",resources:[{label:"Hanging leg raise progressions",url:"https://example.com/hanging-leg-raises/progressions"},{label:"Grip endurance tips",url:"https://example.com/hanging-leg-raises/grip"},{label:"Core-to-hip flexor coordination drills",url:"https://example.com/hanging-leg-raises/coordination"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Hanging leg raise top"],difficulty:"Hard",duration:"Varies",exampleNote:"Hang from a bar and raise legs toward parallel while keeping control and avoiding swing.",meta:{exercise:"Core / Abs / Hip Flexors",movement:"Push -- Sagittal Flexion",equipment:"Bodyweight / Pull-Up Bar",trainingType:"Strength / Hypertrophy",planeOfMotion:"Sagittal",description:"Hang from a bar and lift legs upward while maintaining a controlled motion and braced core."}},"Crunch Machine":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Crunch+Machine",resources:[{label:"Using the crunch machine safely",url:"https://example.com/crunch-machine/safety"},{label:"Machine-based core workouts",url:"https://example.com/crunch-machine/workouts"},{label:"Adjusting machine settings for form",url:"https://example.com/crunch-machine/settings"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Crunch machine setup"],difficulty:"Easy",duration:"5-12 min",exampleNote:"Use a crunch machine to perform controlled spinal flexion focusing on the abs.",meta:{exercise:"Core / Abs / Obliques  secondary",movement:"Push -- Sagittal Flexion",equipment:"Machine",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Sit in the crunch machine and curl the torso forward under control, keeping tension in the abs."}},"Cable Crunch":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Cable+Crunch",resources:[{label:"Cable crunch form and setup",url:"https://example.com/cable-crunch/form"},{label:"Rope attachment best practices",url:"https://example.com/cable-crunch/rope"},{label:"Core strength progressions",url:"https://example.com/cable-crunch/progressions"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Cable crunch finish"],difficulty:"Moderate",duration:"5-12 min",exampleNote:"Attach a rope to a high pulley and curl the torso down while keeping hips stable.",meta:{exercise:"Core / Abs / Obliques  secondary",movement:"Push -- Sagittal Flexion",equipment:"Cables / Rope Attachment",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Kneel in front of a high pulley and pull the rope down with core contraction to flex the spine."}},"Rotary Torso Machine":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Rotary+Torso+Machine",resources:[{label:"Rotary torso machine technique",url:"https://example.com/rotary-torso/technique"},{label:"Machine-based rotation programming",url:"https://example.com/rotary-torso/programming"},{label:"Comparing rotational tools",url:"https://example.com/rotary-torso/compare"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Rotary torso setup"],difficulty:"Easy",duration:"5-10 min",exampleNote:"Use the rotary torso machine to rotate the torso slowly and with control.",meta:{exercise:"Core / Abs / Obliques / Lower Back Stabilizers",movement:"Rotation -- Transverse",equipment:"Machine",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Transverse",description:"Use a rotary torso machine to perform controlled rotations, focusing on controlled movement and posture."}},"Leg Press Machine":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Leg+Press+Machine",resources:[{label:"Leg press setup and foot placement",url:"https://example.com/leg-press/setup"},{label:"Programming leg press for hypertrophy",url:"https://example.com/leg-press/programming"},{label:"Knee and hip safety on leg press",url:"https://example.com/leg-press/safety"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Leg press foot placement"],difficulty:"Moderate",duration:"Varies",exampleNote:"Place feet on platform and press while keeping lower back against the seat; control range of motion.",meta:{exercise:"Lower Body / Quads / Glutes / Hamstrings / Calves",movement:"Squat/Lunge -- Sagittal",equipment:"Machine  Leg Press",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Use the leg press machine to push the platform under control, focusing on foot placement and knee tracking."}},"Weighted Lunges":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Weighted+Lunges",resources:[{label:"Weighted lunge variations",url:"https://example.com/weighted-lunges/variations"},{label:"Programming lunges for mass",url:"https://example.com/weighted-lunges/programming"},{label:"Lunge safety with weights",url:"https://example.com/weighted-lunges/safety"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Weighted lunge stance"],difficulty:"Moderate",duration:"8-20 min",exampleNote:"Step forward with weight and lower into a controlled lunge, keeping torso upright and pushing through the front heel.",meta:{exercise:"Lower Body / Quads / Glutes / Hamstrings / Calves / Core Stabilizers",movement:"Squat/Lunge -- Sagittal",equipment:"Free Weights  Dumbbells / Barbells / Kettlebells",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Perform lunges while holding weight, focusing on balance, knee tracking, and controlled movement."}}},aw=({name:i,exercise:n,onClose:r})=>{const a=cf[i]||cf.Default||{},l=n?{...a,...n}:a,c={images:l.images||[],galleryImages:l.galleryImages||[],imageCaptions:l.imageCaptions||[],video:l.video||"",featuredVideo:l.featuredVideo||!1,resources:Array.isArray(l.resources)?l.resources:[],difficulty:l.difficulty||"",duration:l.duration||"",exampleNote:l.exampleNote||"",meta:l.meta||{}},h=n&&n.muscleGroups&&n.muscleGroups.length?n.muscleGroups.join(", "):c.meta?.muscleGroups&&c.meta.muscleGroups.length?c.meta.muscleGroups.join(", "):l.muscleGroups&&l.muscleGroups.join?l.muscleGroups.join(", "):"",p=n&&(n.sets||n.reps)?n.sets?`${n.sets} sets  ${n.reps||""}`:`${n.reps} reps`:c.sets&&c.reps?`${c.sets} sets  ${c.reps}`:c.meta?.reps?`${c.meta.reps} reps`:null,m=p?p.toString().toLowerCase().endsWith("reps")?p:`${p} reps`:null;return o.jsx("div",{className:"exercise-modal-overlay",onClick:r,children:o.jsxs("div",{className:"exercise-detail-modal",onClick:y=>y.stopPropagation(),role:"dialog","aria-label":`${i} details`,children:[o.jsxs("div",{className:"exercise-detail-header",children:[o.jsxs("div",{className:"header-left",children:[o.jsx("div",{className:"illustration","aria-hidden":!0,children:o.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"3",y:"11",width:"18",height:"8",rx:"2",fill:"#F3FBF6"}),o.jsx("path",{d:"M7 11V8a3 3 0 0 1 3-3h4",stroke:"#2EB06A",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("circle",{cx:"17",cy:"6",r:"1.6",fill:"#2EB06A"})]})}),o.jsxs("div",{className:"title-block",children:[o.jsxs("div",{className:"title-text",children:[o.jsx("h3",{children:i}),o.jsxs("div",{className:"tag-row",children:[(()=>{const g=((n&&n.difficulty?n.difficulty:c.difficulty||"")||"").toString().toLowerCase().trim();let x="Unknown",b="unknown";return g.includes("easy")||g.includes("beginner")?(x="Beginner",b="beginner"):g.includes("moder")||g.includes("inter")||g.includes("medium")||g.includes("intermediate")?(x="Intermediate",b="intermediate"):g.includes("hard")||g.includes("adv")||g.includes("advanced")?(x="Advanced",b="advanced"):g&&(x=g.charAt(0).toUpperCase()+g.slice(1),b=g.replace(/\s+/g,"-")),o.jsx("span",{className:`tag tag-difficulty tag-${b}`,children:x})})(),o.jsxs("span",{className:"meta-pill duration",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-clock",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("polyline",{points:"12 6 12 12 16 14"})]}),c.duration||""]}),m?o.jsxs("span",{className:"meta-pill reps",children:[o.jsx(_t,{size:14}),m]}):null,o.jsxs("span",{className:"meta-pill target",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-zap",children:o.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),h]})]})]}),o.jsx("div",{className:"header-subinfo","aria-hidden":!0})]})]}),o.jsx("button",{className:"close-btn",onClick:r,"aria-label":"Close",children:o.jsx(Gi,{size:18})})]}),o.jsxs("div",{className:"exercise-body",children:[o.jsx("div",{className:"hero-media",children:c.video?o.jsx("div",{className:"hero-video",children:o.jsx("iframe",{src:c.video,title:`${i} video`,frameBorder:"0",allowFullScreen:!0})}):o.jsx("div",{className:"hero-placeholder",children:o.jsx("svg",{width:"96",height:"64",viewBox:"0 0 96 64",fill:"none",children:o.jsx("rect",{width:"96",height:"64",rx:"8",fill:"#F3FBF6"})})})}),o.jsxs("div",{className:"meta-grid",children:[o.jsxs("div",{className:"meta-item",children:[o.jsx("div",{className:"meta-icon",children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{d:"M12 2v20",stroke:"#4CAF50",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),o.jsxs("div",{className:"meta-content",children:[o.jsx("div",{className:"meta-label",children:"Exercise"}),o.jsx("div",{className:"meta-value",children:c.meta?.exercise||""})]})]}),o.jsxs("div",{className:"meta-item",children:[o.jsx("div",{className:"meta-icon",children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{d:"M4 12h16",stroke:"#1E90CB",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),o.jsxs("div",{className:"meta-content",children:[o.jsx("div",{className:"meta-label",children:"Movement"}),o.jsx("div",{className:"meta-value",children:c.meta?.movement||""})]})]}),o.jsxs("div",{className:"meta-item",children:[o.jsx("div",{className:"meta-icon",children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:o.jsx("rect",{x:"3",y:"6",width:"18",height:"12",rx:"2",stroke:"#FF9600",strokeWidth:"1.2"})})}),o.jsxs("div",{className:"meta-content",children:[o.jsx("div",{className:"meta-label",children:"Equipment"}),o.jsx("div",{className:"meta-value",children:c.meta?.equipment||""})]})]}),o.jsxs("div",{className:"meta-item",children:[o.jsx("div",{className:"meta-icon",children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{d:"M12 20V4",stroke:"#6A5ACD",strokeWidth:"1.2",strokeLinecap:"round"})})}),o.jsxs("div",{className:"meta-content",children:[o.jsx("div",{className:"meta-label",children:"Type of Training"}),o.jsx("div",{className:"meta-value",children:c.meta?.trainingType||""})]})]}),o.jsxs("div",{className:"meta-item",children:[o.jsx("div",{className:"meta-icon",children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:o.jsx("circle",{cx:"12",cy:"12",r:"8",stroke:"#2E8B57",strokeWidth:"1.2"})})}),o.jsxs("div",{className:"meta-content",children:[o.jsx("div",{className:"meta-label",children:"Plane of Motion"}),o.jsx("div",{className:"meta-value",children:c.meta?.planeOfMotion||""})]})]})]}),o.jsxs("div",{className:"description",children:[o.jsx("div",{className:"desc-label",children:"Description"}),o.jsx("div",{className:"desc-text",children:c.meta?.description||c.exampleNote||"No description available."})]}),o.jsx("div",{className:"image-gallery",children:(c.galleryImages&&c.galleryImages.length?c.galleryImages:c.images||[]).slice(0,2).map((y,g)=>o.jsxs("figure",{className:"gallery-item",children:[o.jsx("img",{src:y,alt:`${i} image ${g+1}`}),o.jsx("figcaption",{children:c.imageCaptions&&c.imageCaptions[g]||c.resources?.[g]?.label||""})]},g))}),o.jsx("div",{className:"section-divider"}),o.jsxs("div",{className:"meta-resources",children:[o.jsx("h4",{children:"Resources"}),o.jsx("div",{className:"resource-cards",children:c.resources.map((y,g)=>o.jsxs("div",{className:"resource-card",children:[o.jsxs("div",{className:"resource-card-left",children:[o.jsx("div",{className:"resource-icon",children:o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:o.jsx("rect",{x:"3",y:"6",width:"18",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"1.4"})})}),o.jsxs("div",{className:"resource-body",children:[o.jsx("div",{className:"resource-title",children:y.label}),o.jsx("div",{className:"resource-caption",children:y.caption||""})]})]}),o.jsx("div",{className:"resource-actions",children:o.jsx("a",{className:`resource-btn btn btn-primary ${g%2===0?"green":"blue"}`,href:y.url,target:"_blank",rel:"noreferrer",children:"Open"})})]},g))})]})]})]})})};var sc={};(function i(n,r,a,l){var c=!!(n.Worker&&n.Blob&&n.Promise&&n.OffscreenCanvas&&n.OffscreenCanvasRenderingContext2D&&n.HTMLCanvasElement&&n.HTMLCanvasElement.prototype.transferControlToOffscreen&&n.URL&&n.URL.createObjectURL),h=typeof Path2D=="function"&&typeof DOMMatrix=="function",p=function(){if(!n.OffscreenCanvas)return!1;var j=new OffscreenCanvas(1,1),w=j.getContext("2d");w.fillRect(0,0,1,1);var O=j.transferToImageBitmap();try{w.createPattern(O,"no-repeat")}catch{return!1}return!0}();function m(){}function y(j){var w=r.exports.Promise,O=w!==void 0?w:n.Promise;return typeof O=="function"?new O(j):(j(m,m),null)}var g=function(j,w){return{transform:function(O){if(j)return O;if(w.has(O))return w.get(O);var q=new OffscreenCanvas(O.width,O.height),Y=q.getContext("2d");return Y.drawImage(O,0,0),w.set(O,q),q},clear:function(){w.clear()}}}(p,new Map),x=function(){var j=Math.floor(16.666666666666668),w,O,q={},Y=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(w=function(re){var oe=Math.random();return q[oe]=requestAnimationFrame(function ee(le){Y===le||Y+j-1<le?(Y=le,delete q[oe],re()):q[oe]=requestAnimationFrame(ee)}),oe},O=function(re){q[re]&&cancelAnimationFrame(q[re])}):(w=function(re){return setTimeout(re,j)},O=function(re){return clearTimeout(re)}),{frame:w,cancel:O}}(),b=function(){var j,w,O={};function q(Y){function re(oe,ee){Y.postMessage({options:oe||{},callback:ee})}Y.init=function(ee){var le=ee.transferControlToOffscreen();Y.postMessage({canvas:le},[le])},Y.fire=function(ee,le,ke){if(w)return re(ee,null),w;var Ae=Math.random().toString(36).slice(2);return w=y(function(We){function Ge(Xe){Xe.data.callback===Ae&&(delete O[Ae],Y.removeEventListener("message",Ge),w=null,g.clear(),ke(),We())}Y.addEventListener("message",Ge),re(ee,Ae),O[Ae]=Ge.bind(null,{data:{callback:Ae}})}),w},Y.reset=function(){Y.postMessage({reset:!0});for(var ee in O)O[ee](),delete O[ee]}}return function(){if(j)return j;if(!a&&c){var Y=["var CONFETTI, SIZE = {}, module = {};","("+i.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{j=new Worker(URL.createObjectURL(new Blob([Y])))}catch(re){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn(" Could not load worker",re),null}q(j)}return j}}(),C={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function T(j,w){return w?w(j):j}function S(j){return j!=null}function _(j,w,O){return T(j&&S(j[w])?j[w]:C[w],O)}function B(j){return j<0?0:Math.floor(j)}function F(j,w){return Math.floor(Math.random()*(w-j))+j}function L(j){return parseInt(j,16)}function W(j){return j.map(te)}function te(j){var w=String(j).replace(/[^0-9a-f]/gi,"");return w.length<6&&(w=w[0]+w[0]+w[1]+w[1]+w[2]+w[2]),{r:L(w.substring(0,2)),g:L(w.substring(2,4)),b:L(w.substring(4,6))}}function Z(j){var w=_(j,"origin",Object);return w.x=_(w,"x",Number),w.y=_(w,"y",Number),w}function ie(j){j.width=document.documentElement.clientWidth,j.height=document.documentElement.clientHeight}function me(j){var w=j.getBoundingClientRect();j.width=w.width,j.height=w.height}function Ne(j){var w=document.createElement("canvas");return w.style.position="fixed",w.style.top="0px",w.style.left="0px",w.style.pointerEvents="none",w.style.zIndex=j,w}function Oe(j,w,O,q,Y,re,oe,ee,le){j.save(),j.translate(w,O),j.rotate(re),j.scale(q,Y),j.arc(0,0,1,oe,ee,le),j.restore()}function V(j){var w=j.angle*(Math.PI/180),O=j.spread*(Math.PI/180);return{x:j.x,y:j.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:j.startVelocity*.5+Math.random()*j.startVelocity,angle2D:-w+(.5*O-Math.random()*O),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:j.color,shape:j.shape,tick:0,totalTicks:j.ticks,decay:j.decay,drift:j.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:j.gravity*3,ovalScalar:.6,scalar:j.scalar,flat:j.flat}}function de(j,w){w.x+=Math.cos(w.angle2D)*w.velocity+w.drift,w.y+=Math.sin(w.angle2D)*w.velocity+w.gravity,w.velocity*=w.decay,w.flat?(w.wobble=0,w.wobbleX=w.x+10*w.scalar,w.wobbleY=w.y+10*w.scalar,w.tiltSin=0,w.tiltCos=0,w.random=1):(w.wobble+=w.wobbleSpeed,w.wobbleX=w.x+10*w.scalar*Math.cos(w.wobble),w.wobbleY=w.y+10*w.scalar*Math.sin(w.wobble),w.tiltAngle+=.1,w.tiltSin=Math.sin(w.tiltAngle),w.tiltCos=Math.cos(w.tiltAngle),w.random=Math.random()+2);var O=w.tick++/w.totalTicks,q=w.x+w.random*w.tiltCos,Y=w.y+w.random*w.tiltSin,re=w.wobbleX+w.random*w.tiltCos,oe=w.wobbleY+w.random*w.tiltSin;if(j.fillStyle="rgba("+w.color.r+", "+w.color.g+", "+w.color.b+", "+(1-O)+")",j.beginPath(),h&&w.shape.type==="path"&&typeof w.shape.path=="string"&&Array.isArray(w.shape.matrix))j.fill(K(w.shape.path,w.shape.matrix,w.x,w.y,Math.abs(re-q)*.1,Math.abs(oe-Y)*.1,Math.PI/10*w.wobble));else if(w.shape.type==="bitmap"){var ee=Math.PI/10*w.wobble,le=Math.abs(re-q)*.1,ke=Math.abs(oe-Y)*.1,Ae=w.shape.bitmap.width*w.scalar,We=w.shape.bitmap.height*w.scalar,Ge=new DOMMatrix([Math.cos(ee)*le,Math.sin(ee)*le,-Math.sin(ee)*ke,Math.cos(ee)*ke,w.x,w.y]);Ge.multiplySelf(new DOMMatrix(w.shape.matrix));var Xe=j.createPattern(g.transform(w.shape.bitmap),"no-repeat");Xe.setTransform(Ge),j.globalAlpha=1-O,j.fillStyle=Xe,j.fillRect(w.x-Ae/2,w.y-We/2,Ae,We),j.globalAlpha=1}else if(w.shape==="circle")j.ellipse?j.ellipse(w.x,w.y,Math.abs(re-q)*w.ovalScalar,Math.abs(oe-Y)*w.ovalScalar,Math.PI/10*w.wobble,0,2*Math.PI):Oe(j,w.x,w.y,Math.abs(re-q)*w.ovalScalar,Math.abs(oe-Y)*w.ovalScalar,Math.PI/10*w.wobble,0,2*Math.PI);else if(w.shape==="star")for(var Ie=Math.PI/2*3,I=4*w.scalar,U=8*w.scalar,fe=w.x,Se=w.y,ye=5,be=Math.PI/ye;ye--;)fe=w.x+Math.cos(Ie)*U,Se=w.y+Math.sin(Ie)*U,j.lineTo(fe,Se),Ie+=be,fe=w.x+Math.cos(Ie)*I,Se=w.y+Math.sin(Ie)*I,j.lineTo(fe,Se),Ie+=be;else j.moveTo(Math.floor(w.x),Math.floor(w.y)),j.lineTo(Math.floor(w.wobbleX),Math.floor(Y)),j.lineTo(Math.floor(re),Math.floor(oe)),j.lineTo(Math.floor(q),Math.floor(w.wobbleY));return j.closePath(),j.fill(),w.tick<w.totalTicks}function ne(j,w,O,q,Y){var re=w.slice(),oe=j.getContext("2d"),ee,le,ke=y(function(Ae){function We(){ee=le=null,oe.clearRect(0,0,q.width,q.height),g.clear(),Y(),Ae()}function Ge(){a&&!(q.width===l.width&&q.height===l.height)&&(q.width=j.width=l.width,q.height=j.height=l.height),!q.width&&!q.height&&(O(j),q.width=j.width,q.height=j.height),oe.clearRect(0,0,q.width,q.height),re=re.filter(function(Xe){return de(oe,Xe)}),re.length?ee=x.frame(Ge):We()}ee=x.frame(Ge),le=We});return{addFettis:function(Ae){return re=re.concat(Ae),ke},canvas:j,promise:ke,reset:function(){ee&&x.cancel(ee),le&&le()}}}function z(j,w){var O=!j,q=!!_(w||{},"resize"),Y=!1,re=_(w,"disableForReducedMotion",Boolean),oe=c&&!!_(w||{},"useWorker"),ee=oe?b():null,le=O?ie:me,ke=j&&ee?!!j.__confetti_initialized:!1,Ae=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,We;function Ge(Ie,I,U){for(var fe=_(Ie,"particleCount",B),Se=_(Ie,"angle",Number),ye=_(Ie,"spread",Number),be=_(Ie,"startVelocity",Number),Ce=_(Ie,"decay",Number),Te=_(Ie,"gravity",Number),Me=_(Ie,"drift",Number),lt=_(Ie,"colors",W),vt=_(Ie,"ticks",Number),ft=_(Ie,"shapes"),Ft=_(Ie,"scalar"),Wt=!!_(Ie,"flat"),dn=Z(Ie),Et=fe,Ct=[],wt=j.width*dn.x,Gn=j.height*dn.y;Et--;)Ct.push(V({x:wt,y:Gn,angle:Se,spread:ye,startVelocity:be,color:lt[Et%lt.length],shape:ft[F(0,ft.length)],ticks:vt,decay:Ce,gravity:Te,drift:Me,scalar:Ft,flat:Wt}));return We?We.addFettis(Ct):(We=ne(j,Ct,le,I,U),We.promise)}function Xe(Ie){var I=re||_(Ie,"disableForReducedMotion",Boolean),U=_(Ie,"zIndex",Number);if(I&&Ae)return y(function(be){be()});O&&We?j=We.canvas:O&&!j&&(j=Ne(U),document.body.appendChild(j)),q&&!ke&&le(j);var fe={width:j.width,height:j.height};ee&&!ke&&ee.init(j),ke=!0,ee&&(j.__confetti_initialized=!0);function Se(){if(ee){var be={getBoundingClientRect:function(){if(!O)return j.getBoundingClientRect()}};le(be),ee.postMessage({resize:{width:be.width,height:be.height}});return}fe.width=fe.height=null}function ye(){We=null,q&&(Y=!1,n.removeEventListener("resize",Se)),O&&j&&(document.body.contains(j)&&document.body.removeChild(j),j=null,ke=!1)}return q&&!Y&&(Y=!0,n.addEventListener("resize",Se,!1)),ee?ee.fire(Ie,fe,ye):Ge(Ie,fe,ye)}return Xe.reset=function(){ee&&ee.reset(),We&&We.reset()},Xe}var se;function xe(){return se||(se=z(null,{useWorker:!0,resize:!0})),se}function K(j,w,O,q,Y,re,oe){var ee=new Path2D(j),le=new Path2D;le.addPath(ee,new DOMMatrix(w));var ke=new Path2D;return ke.addPath(le,new DOMMatrix([Math.cos(oe)*Y,Math.sin(oe)*Y,-Math.sin(oe)*re,Math.cos(oe)*re,O,q])),ke}function Q(j){if(!h)throw new Error("path confetti are not supported in this browser");var w,O;typeof j=="string"?w=j:(w=j.path,O=j.matrix);var q=new Path2D(w),Y=document.createElement("canvas"),re=Y.getContext("2d");if(!O){for(var oe=1e3,ee=oe,le=oe,ke=0,Ae=0,We,Ge,Xe=0;Xe<oe;Xe+=2)for(var Ie=0;Ie<oe;Ie+=2)re.isPointInPath(q,Xe,Ie,"nonzero")&&(ee=Math.min(ee,Xe),le=Math.min(le,Ie),ke=Math.max(ke,Xe),Ae=Math.max(Ae,Ie));We=ke-ee,Ge=Ae-le;var I=10,U=Math.min(I/We,I/Ge);O=[U,0,0,U,-Math.round(We/2+ee)*U,-Math.round(Ge/2+le)*U]}return{type:"path",path:w,matrix:O}}function ue(j){var w,O=1,q="#000000",Y='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof j=="string"?w=j:(w=j.text,O="scalar"in j?j.scalar:O,Y="fontFamily"in j?j.fontFamily:Y,q="color"in j?j.color:q);var re=10*O,oe=""+re+"px "+Y,ee=new OffscreenCanvas(re,re),le=ee.getContext("2d");le.font=oe;var ke=le.measureText(w),Ae=Math.ceil(ke.actualBoundingBoxRight+ke.actualBoundingBoxLeft),We=Math.ceil(ke.actualBoundingBoxAscent+ke.actualBoundingBoxDescent),Ge=2,Xe=ke.actualBoundingBoxLeft+Ge,Ie=ke.actualBoundingBoxAscent+Ge;Ae+=Ge+Ge,We+=Ge+Ge,ee=new OffscreenCanvas(Ae,We),le=ee.getContext("2d"),le.font=oe,le.fillStyle=q,le.fillText(w,Xe,Ie);var I=1/O;return{type:"bitmap",bitmap:ee.transferToImageBitmap(),matrix:[I,0,0,I,-Ae*I/2,-We*I/2]}}r.exports=function(){return xe().apply(this,arguments)},r.exports.reset=function(){xe().reset()},r.exports.create=z,r.exports.shapeFromPath=Q,r.exports.shapeFromText=ue})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),sc,!1);const ow=sc.exports;sc.exports.create;const lw=({workout:i,onClose:n,onComplete:r,onRegenerateWorkout:a,isRegenerating:l,onUpdateWorkout:c})=>{const[h,p]=N.useState(!1),[m,y]=N.useState(!1),[g,x]=N.useState(i),[b,C]=N.useState(i.completed);Jt.useEffect(()=>{C(i.completed)},[i.completed]);const T=V=>{const[de,ne,z]=V.split("-").map(Number);return new Date(de,ne-1,z).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},S=V=>{switch(V){case"strength":return"strength";case"cardio":return"cardio";case"flexibility":return"flexibility";case"rest":return"rest";case"mixed":return"mixed";default:return"mixed"}},_=V=>{if(!V)return{label:"",cls:""};const de=(V||"").toString().toLowerCase();return de==="easy"||de==="beginner"?{label:"Easy",cls:"difficulty-easy"}:de==="medium"||de==="intermediate"?{label:"Medium",cls:"difficulty-medium"}:de==="hard"||de==="advanced"?{label:"Hard",cls:"difficulty-hard"}:{label:de.charAt(0).toUpperCase()+de.slice(1),cls:`difficulty-${de.replace(/\s+/g,"-")}`}},B=h?i.alternativeWorkouts:i.workouts,[F,L]=Jt.useState(null),[W,te]=Jt.useState(null),Z=(V,de=!1)=>{const ne={...g};de?ne.alternativeWorkouts=ne.alternativeWorkouts.filter((z,se)=>se!==V):ne.workouts=ne.workouts.filter((z,se)=>se!==V),x(ne)},ie=(V,de=!1)=>{if(de){const ne=g.alternativeWorkouts[V];x({...g,workouts:[...g.workouts,ne],alternativeWorkouts:g.alternativeWorkouts.filter((z,se)=>se!==V)})}else{const ne=g.workouts[V];x({...g,workouts:g.workouts.filter((z,se)=>se!==V),alternativeWorkouts:[...g.alternativeWorkouts,ne]})}},me=()=>{const V=g.workouts.length>0,de=g.alternativeWorkouts.length>0;if(!V&&!de){c&&c({...g,workouts:[],alternativeWorkouts:[]}),n();return}c&&c(g),y(!1),n()},Ne=()=>{x(i),y(!1)},Oe=()=>{b||ow({particleCount:100,spread:70,origin:{y:.3},zIndex:9999});const V=!b;C(V),c&&c({...i,completed:V}),r()};return o.jsx("div",{className:"modal-overlay",onClick:n,children:o.jsxs("div",{className:"workout-modal",onClick:V=>V.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsxs("div",{className:"modal-title-section",children:[o.jsx("div",{className:`workout-type-badge ${S(i.type)}`,children:i.type==="rest"?"Rest Day":i.type==="strength"?"Strength":i.type==="cardio"?"Cardio":i.type==="flexibility"?"Flexibility":"Mixed"}),o.jsxs("div",{children:[o.jsx("h2",{children:T(i.date)}),i.completed&&o.jsxs("span",{className:"completed-badge",children:[o.jsx(Iu,{size:16}),"Completed"]})]})]}),"          ",o.jsx("button",{className:"close-button",onClick:n,title:"Close modal",children:o.jsx(Gi,{size:24})})]}),o.jsx("div",{className:"modal-content",children:i.type==="rest"?i.isRickroll?o.jsxs("div",{className:"rest-day-content rickroll-rest",children:[o.jsx("div",{className:"rest-icon",children:o.jsx(zs,{size:48})}),o.jsx("h3",{children:"Rest & Recharge"}),o.jsx("p",{children:"Todays a gentle recovery day  take it slow and treat yourself. A short, uplifting break can do wonders. Enjoy this pick-me-up while you rest."}),o.jsx("div",{className:"rickroll-embed",children:o.jsx("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/dQw4w9WgXcQ?rel=0",title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),o.jsxs("div",{className:"rest-activities",children:[o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Slow breathing or meditation (5-10 min)"})]}),o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Enjoy a calming drink while you relax"})]})]})]}):o.jsxs("div",{className:"rest-day-content",children:[o.jsx("div",{className:"rest-icon",children:o.jsx(zs,{size:48})}),o.jsx("h3",{children:"Recovery Day"}),o.jsx("p",{children:"Take this day to rest and let your muscles recover. You can do light stretching, meditation, or gentle walking."}),o.jsxs("div",{className:"rest-activities",children:[o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Meditation (10-15 min)"})]}),o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Light walking"})]}),o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Relaxing bath"})]}),o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Reading or relaxing"})]})]})]}):o.jsxs("div",{className:"workout-content",children:[o.jsxs("div",{className:"workout-toggle",children:[o.jsx("button",{className:`toggle-button ${h?"":"active"}`,onClick:()=>p(!1),children:"Main Workout"}),o.jsx("button",{className:`toggle-button ${h?"active":""}`,onClick:()=>p(!0),children:"Alternative"})]}),"              ",o.jsx("div",{className:"exercise-list",children:(m?h?g.alternativeWorkouts:g.workouts:B).map((V,de)=>o.jsxs("div",{className:"exercise-card",role:m?void 0:"button",tabIndex:m?void 0:0,onClick:()=>{m||(L(V.name),te(V))},onKeyDown:ne=>{!m&&(ne.key==="Enter"||ne.key===" ")&&(ne.preventDefault(),L(V.name),te(V))},children:[o.jsxs("div",{className:"exercise-header",children:[o.jsxs("div",{className:"exercise-title-section",children:[o.jsx("h4",{children:V.name}),(()=>{const{label:ne,cls:z}=_(V.difficulty);return o.jsx("div",{className:`difficulty-badge ${z}`,children:ne})})()]}),m&&o.jsxs("div",{className:"exercise-actions",children:[o.jsx("button",{className:"action-btn swap-btn",onClick:ne=>{ne.stopPropagation(),ie(de,h)},title:h?"Move to main workout":"Move to alternative",children:h?o.jsx(wy,{size:16}):o.jsx(xy,{size:16})}),o.jsx("button",{className:"action-btn delete-btn",onClick:ne=>{ne.stopPropagation(),Z(de,h)},title:"Delete exercise",children:o.jsx(po,{size:16})})]})]}),o.jsxs("div",{className:"exercise-details",children:[V.sets&&V.reps&&o.jsxs("div",{className:"detail-item",children:[o.jsx(_t,{size:16}),o.jsxs("span",{children:[V.sets," sets  ",V.reps," reps"]})]}),V.duration&&o.jsxs("div",{className:"detail-item",children:[o.jsx($s,{size:16}),o.jsx("span",{children:V.duration})]}),V.muscleGroups&&V.muscleGroups.length>0&&o.jsxs("div",{className:"detail-item",children:[o.jsx(zs,{size:16}),o.jsx("span",{children:V.muscleGroups.join(", ")})]})]}),o.jsx("p",{className:"exercise-description",children:V.description}),Array.isArray(V.equipment)&&V.equipment.some(ne=>ne!=="No equipment")&&o.jsx("div",{className:"equipment-tags",children:V.equipment.filter(ne=>ne!=="No equipment").map((ne,z)=>o.jsx("span",{className:"equipment-tag",children:ne},z))})]},de))})]})}),F&&o.jsx(aw,{name:F,exercise:W||void 0,onClose:()=>{L(null),te(null)}}),i.type!=="rest"&&o.jsx("div",{className:"modal-footer",children:o.jsx("div",{className:"action-buttons",children:m?o.jsxs(o.Fragment,{children:[o.jsxs("button",{className:"btn btn-secondary",onClick:Ne,children:[o.jsx(Gi,{size:16}),"Cancel"]}),o.jsxs("button",{className:"btn btn-primary",onClick:me,children:[o.jsx(Lu,{size:16}),"Save Changes"]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("button",{className:"btn btn-secondary",onClick:()=>y(!0),children:[o.jsx(Du,{size:16}),"Edit Workout"]}),o.jsx("button",{className:"btn btn-secondary",onClick:a,disabled:!!l,"aria-busy":!!l,children:l?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"button-spinner",children:o.jsx("div",{className:"loading-dumbbell small",children:o.jsx(_t,{size:16,color:"#fff"})})}),o.jsx("span",{className:"generating-text",children:"Generating..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(tf,{size:16}),"New Workout"]})}),o.jsx("button",{className:`btn ${b?"btn-accent":"btn-primary"}`,onClick:Oe,children:b?o.jsxs(o.Fragment,{children:[o.jsx(tf,{size:16}),"Mark Incomplete"]}):o.jsxs(o.Fragment,{children:[o.jsx(Iu,{size:16}),"Complete Workout"]})})]})})}),i.type!=="rest"&&o.jsxs("div",{className:"add-workout-section",children:[o.jsx("h3",{children:"Select Date and Workout Type"}),o.jsxs("div",{className:"date-picker-container",children:[o.jsx("label",{htmlFor:"workout-date",children:"Date:"}),o.jsx("input",{type:"date",id:"workout-date",className:"date-picker",value:g.date,onChange:V=>x({...g,date:V.target.value})})]}),o.jsxs("div",{className:"workout-type-container",children:[o.jsx("label",{htmlFor:"workout-type",children:"Workout Type:"}),o.jsxs("select",{id:"workout-type",className:"workout-type-selector",value:g.type,onChange:V=>x({...g,type:V.target.value}),children:[o.jsx("option",{value:"strength",children:"Strength"}),o.jsx("option",{value:"cardio",children:"Cardio"}),o.jsx("option",{value:"flexibility",children:"Flexibility"}),o.jsx("option",{value:"rest",children:"Rest"})]})]}),o.jsx("button",{className:"add-workout-button",onClick:me,children:"Add Workout Day"})]}),o.jsx("style",{children:`
            .add-workout-section {
              margin-top: 20px;
              padding: 15px;
              background-color: var(--light-blue);
              border-radius: 8px;
              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            }
            .date-picker-container, .workout-type-container {
              margin-bottom: 15px;
            }
            .date-picker, .workout-type-selector {
              width: 100%;
              padding: 10px;
              border: 1px solid var(--gray);
              border-radius: 4px;
              font-size: 16px;
            }
            .add-workout-button {
              width: 100%;
              padding: 10px;
              background-color: var(--green);
              color: white;
              font-size: 16px;
              border: none;
              border-radius: 4px;
              cursor: pointer;
              transition: background-color 0.3s;
            }
            .add-workout-button:hover {
              background-color: var(--dark-green);
            }
          `})]})})},uw=({workoutPlan:i,userData:n,onUpdatePlan:r})=>{const a=N.useRef(0),l=N.useRef(0),[c,h]=N.useState(new Date),[p,m]=N.useState(null),[y,g]=N.useState(!1),[x,b]=N.useState(null),[C,T]=N.useState(!1),[S,_]=N.useState(null),[B,F]=N.useState(!1),[L,W]=N.useState(!1),[te,Z]=N.useState(!1),[ie,me]=N.useState(!1),[Ne,Oe]=N.useState([]),[V,de]=N.useState(!1),[ne,z]=N.useState(["strength"]),[se,xe]=N.useState(""),[K,Q]=N.useState([]),[ue,j]=N.useState(""),[w,O]=N.useState(!1),[q,Y]=N.useState(""),[re,oe]=N.useState(null),[ee,le]=N.useState(null),[ke,Ae]=N.useState(!1),[We,Ge]=N.useState(!1),[Xe,Ie]=N.useState(null),[I,U]=N.useState(!1),[fe,Se]=N.useState("strength"),[ye,be]=N.useState({duration:"30 min",muscleGroups:[],equipment:[]}),[Ce,Te]=N.useState(!1),[Me,lt]=N.useState([]);if(N.useEffect(()=>{if(i&&i.dailyWorkouts.length>0&&!I){const[D,$,ae]=i.startDate.split("-").map(Number);h(new Date(D,$-1,ae))}},[i]),N.useEffect(()=>{let D=!0;return(async()=>{try{if(i&&i.dailyWorkouts&&i.dailyWorkouts.length>0)return;try{if(localStorage.getItem("fitbuddy_no_auto_restore")||sessionStorage.getItem("fitbuddy_no_auto_restore"))return}catch{}const ae=jr();if(!ae||!ae.id||(await Hs(ae.id),!D))return;const he=Vs();he&&r(he)}catch(ae){console.warn("Failed to restore server data in WorkoutCalendar:",ae)}})(),()=>{D=!1}},[r]),N.useEffect(()=>{},[i]),N.useEffect(()=>{},[]),N.useEffect(()=>{if(i){let D=i.dailyWorkouts.map($=>{if($.type==="mixed"&&(!$.workouts||$.workouts.length===0)&&ns($)==="0 min"){const ae={...$,type:"rest",workouts:[{name:"Rest Day",description:"Take a well-deserved break and let your body recover.",duration:"0 min",difficulty:"beginner",muscleGroups:[]}],alternativeWorkouts:[]};return Math.random()<1e-6&&(ae.isRickroll=!0),ae}return $});try{const $=Array.isArray(i.weeklyStructure)?i.weeklyStructure:[],ae=typeof i.totalDays=="number"&&i.totalDays>0?i.totalDays:i.dailyWorkouts?i.dailyWorkouts.length:0;if(i.startDate&&ae>0&&$.length===7){const he=i.startDate.split("-").map(Number);if(he.length===3){const Le=new Date(he[0],he[1]-1,he[2]),ze=new Set((D||[]).map(qe=>qe.date));for(let qe=0;qe<ae;qe++){const Be=new Date(Le.getTime());Be.setDate(Le.getDate()+qe);const Bt=un(Be,"yyyy-MM-dd"),Je=qe%7;if(($[Je]||"").toString().toLowerCase().includes("rest")&&!ze.has(Bt)){const Ve={date:Bt,workouts:[{name:"Rest Day",description:"Take a well-deserved break and let your body recover.",duration:"0 min",difficulty:"beginner",muscleGroups:[]}],alternativeWorkouts:[],completed:!1,type:"rest"};Math.random()<1/1e6&&(Ve.isRickroll=!0),D=[...D,Ve],ze.add(Bt)}}}}}catch($){console.warn("Failed to populate missing rest days from weeklyStructure:",$)}if(JSON.stringify(D)!==JSON.stringify(i.dailyWorkouts)){const $={...i,dailyWorkouts:D,totalDays:D.length};r($);try{console.log("[WorkoutCalendar] Saving normalized plan to localStorage:",{totalDays:$.totalDays,dailyWorkoutsCount:$.dailyWorkouts.length}),br($)}catch(ae){console.warn("Failed to save normalized plan locally:",ae)}}}},[i,r]),!i||!n)return o.jsx("div",{className:"calendar-no-plan-container",children:o.jsxs("div",{className:"calendar-no-plan-content fade-in-bounce",children:[o.jsx("div",{className:"calendar-no-plan-icon-bg",children:o.jsx(_t,{size:48,color:"#fff"})}),o.jsx("h1",{className:"calendar-no-plan-title",children:"No Plan"}),o.jsx("h2",{className:"calendar-no-plan-message",children:"No Workout Plan Found"}),o.jsx("p",{className:"calendar-no-plan-desc",children:"Please complete the questionnaire first to generate your personalized workout plan."}),o.jsx("a",{className:"calendar-no-plan-btn",href:"/questionnaire",children:"Go to Questionnaire"})]})});const vt=Zy(c),ft=Yy(c),Ft=Xy({start:vt,end:ft}),Wt=Array(vt.getDay()).fill(null),dn=Array((7-(vt.getDay()+Ft.length)%7)%7).fill(null),Et=D=>{let $;if(typeof D=="string")if(D.includes("T"))$=new Date(D);else{const[ae,he,Le]=D.split("-").map(Number);$=new Date(ae,he-1,Le)}else $=D;if(isNaN($.getTime()))throw new RangeError("Invalid time value");return un($,"yyyy-MM-dd")},Ct=D=>{const $=Et(D.toISOString());return i.dailyWorkouts.find(he=>he.date===$)||null},wt=D=>{const $=un(D,"yyyy-MM-dd");if(ie){Oe(he=>he.includes($)?he.filter(Le=>Le!==$):[...he,$]);return}if(w){if(x===$||ke)return;const he=new Date(D.getFullYear(),D.getMonth(),D.getDate()-1);rs(he),O(!1),Ie($);return}if(x===$||ke)return;if(Ce){lt(he=>he.includes($)?he.filter(Le=>Le!==$):[...he,$]);return}const ae=Ct(D);if(C&&ae){Xs(ae);return}if(C&&!ae){const he=new Date(D.getFullYear(),D.getMonth(),D.getDate()-1);rs(he);return}ae&&(m(ae),g(!0))},Gn=D=>{const $=i.dailyWorkouts.map(he=>he.date===D?{...he,completed:!he.completed}:he),ae={...i,dailyWorkouts:$};r(ae)},en=D=>{const $=new Date(c);D==="prev"?$.setMonth($.getMonth()-1):$.setMonth($.getMonth()+1),h($)},To=D=>{switch(D){case"strength":return"strength";case"cardio":return"cardio";case"flexibility":return"flexibility";case"rest":return"rest";case"mixed":return"mixed";default:return"mixed"}},Er=i.dailyWorkouts.filter(D=>D.completed).length,Cr=i.dailyWorkouts.filter(D=>D.type!=="rest").length,ts=Cr>0?Er/Cr*100:0,ns=D=>{if(D.type==="rest")return"0 min";let $=0;return D.workouts.forEach(ae=>{if(ae.duration){const he=ae.duration.match(/(\d+)/);he&&($+=parseInt(he[1]))}}),$>0?`${$} min`:"30 min"},Xs=D=>{_({...D}),F(!0),T(!0)},Vn=()=>{if(!S||!i)return;const D=i.dailyWorkouts.map(ae=>ae.date===S.date?S:ae),$={...i,dailyWorkouts:D};r($),F(!1),T(!1),_(null)},Jn=()=>{F(!1),T(!1),_(null)},rs=D=>{if(!i)return;let $;D?$=new Date(D.getFullYear(),D.getMonth(),D.getDate()+1):$=new Date;const ae=un($,"yyyy-MM-dd"),he=i.dailyWorkouts.find(Be=>Be.date===ae);if(he){const Be={...he,type:"rest",workouts:[{name:"Rest Day",description:"Take a well-deserved break and let your body recover.",duration:"0 min",difficulty:"beginner",muscleGroups:[]}],alternativeWorkouts:[]};Qn(Be);return}const Le={date:ae,workouts:[{name:"Rest Day",description:"Take a well-deserved break and let your body recover.",duration:"0 min",difficulty:"beginner",muscleGroups:[]}],alternativeWorkouts:[],completed:!1,type:"rest"},ze=[...i?.dailyWorkouts||[],Le];Math.random()<1/1e6&&(Le.isRickroll=!0);const qe={...i,dailyWorkouts:ze};r(qe)},Xi=()=>{ue?(rs(new Date(ue)),j(""),W(!1)):W(!0)},Zi=()=>{q?(na(new Date(q),fe,ye),Y(""),Z(!1)):Z(!0)},ea=()=>{const D=Date.now();if(D-l.current<350){console.debug("[WorkoutCalendar] handleSelectToAddToggle ignored - rapid duplicate");return}l.current=D,console.debug("[WorkoutCalendar] handleSelectToAddToggle called",{addMode:ie,showBatchAddPanel:V,selectedForAddLength:Ne.length}),ie?(console.debug("[WorkoutCalendar] exiting selection mode"),me(!1),Oe([]),de(!1),T(!0)):(me(!0),Te(!1),Oe([]),de(!1),T(!0))},ta=()=>{if(console.debug("[WorkoutCalendar] handleConfirmSelection",{selectedForAddLength:Ne.length}),Ne.length===0){alert("Please select at least one date before confirming.");return}me(!1),de(!0),T(!0)},Zs=async()=>{if(!i||!n)return;if(Ne.length===0){alert("Please select at least one date.");return}de(!1),T(!1),me(!1),Q([...Ne]);const D=cn(),$=D?.answers||{},ae=D?.questionsList||[];let he=[...i.dailyWorkouts];for(const ze of Ne){if(he.some(qe=>qe.date===ze)){console.warn("Skipping existing date during batch add:",ze);continue}try{const qe=ne&&ne.length>0?ne.join(","):"mixed",Be={...$,batchComments:se},Bt=he.filter(tt=>tt.date!==ze),Je=await wu(n,Be,ae,ze,qe,Bt,[]),Ve=((tt,Qt)=>{const Or=(tt?.date||Qt||"").toString();let On=Or;try{Or.includes("T")&&(On=un(new Date(Or),"yyyy-MM-dd"))}catch{On=Qt}On=Qt;const Ee=Array.isArray(tt?.workouts)?tt.workouts:Array.isArray(tt?.exercises)?tt.exercises:[],tn=Array.isArray(tt?.alternativeWorkouts)?tt.alternativeWorkouts:Array.isArray(tt?.alternativeExercises)?tt.alternativeExercises:[];return{date:On,type:tt?.type||"mixed",workouts:Ee.map(Re=>({name:Re?.name||Re?.exercise||"Exercise",description:Re?.description||Re?.instructions||"",difficulty:Re?.difficulty||"beginner",duration:Re?.duration||(Re?.durationSeconds?`${Re.durationSeconds} sec`:""),reps:Re?.reps??"",muscleGroups:Array.isArray(Re?.muscleGroups)?Re.muscleGroups:Re?.muscleGroups?[Re.muscleGroups]:[],equipment:Array.isArray(Re?.equipment)?Re.equipment:Re?.equipment?[Re.equipment]:[],sets:typeof Re?.sets=="number"?Re.sets:void 0,rest:Re?.rest||void 0})),alternativeWorkouts:tn.map(Re=>({name:Re?.name||Re?.exercise||"Alt Exercise",description:Re?.description||Re?.instructions||"",difficulty:Re?.difficulty||"beginner",duration:Re?.duration||(Re?.durationSeconds?`${Re.durationSeconds} sec`:""),reps:Re?.reps??"",muscleGroups:Array.isArray(Re?.muscleGroups)?Re.muscleGroups:Re?.muscleGroups?[Re.muscleGroups]:[],equipment:Array.isArray(Re?.equipment)?Re.equipment:Re?.equipment?[Re.equipment]:[],sets:typeof Re?.sets=="number"?Re.sets:void 0,rest:Re?.rest||void 0})),completed:!!tt?.completed,totalTime:tt?.totalTime||""}})(Je,ze);he=[...he,Ve]}catch(qe){console.error("Batch generate error for date",ze,qe)}}const Le={...i,dailyWorkouts:he,totalDays:he.length};r(Le);try{console.log("[WorkoutCalendar] Saving batch-generated plan to localStorage:",{totalDays:Le.totalDays,dailyWorkoutsCount:Le.dailyWorkouts.length}),br(Le)}catch(ze){console.warn("Failed to save batch-generated plan locally:",ze)}Q([]),Oe([])},na=async(D,$,ae)=>{if(!i||!n)return;let he,Le;if(D){if(he=new Date(D.getFullYear(),D.getMonth(),D.getDate()+1),Le=un(he,"yyyy-MM-dd"),i.dailyWorkouts.find(tt=>tt.date===Le))return}else{const Ve=i.dailyWorkouts.length>0?new Date(Math.max(...i.dailyWorkouts.map(tt=>new Date(tt.date).getTime()))):new Date(i.startDate);he=new Date(Ve.getTime()+1440*60*1e3),Le=un(he,"yyyy-MM-dd")}const ze=[...n.preferences||[],...ae?.muscleGroups||[],...ae?.equipment||[],`Workout type: ${$||"mixed"}`,`Duration: ${ae?.duration||"30 min"}`],qe={...n,preferences:ze},Be=await Ui(qe,{},[]),Bt={date:Le,type:$||"mixed",workouts:Be.dailyWorkouts[0]?.workouts||[],alternativeWorkouts:[],completed:!1},Je=[...i.dailyWorkouts,Bt],Pn={...i,dailyWorkouts:Je,totalDays:Je.length};r(Pn)},Qn=D=>{if(!i)return;const $=i.dailyWorkouts.map(he=>he.date===D.date?D:he),ae={...i,dailyWorkouts:$};r(ae)},ei=async D=>{if(!i||!n)return;g(!1),b(D.date),Ge(!0);const $=cn(),ae=$?.answers||{},he=$?.questionsList||[];try{const Le=i.dailyWorkouts.filter(Ve=>Ve.date!==D.date),ze=[...D.workouts,...D.alternativeWorkouts];console.log("[AI] Sending generateWorkoutForDay request:",{username:n?.username,date:D.date,type:D.type,othersCount:Le.length,currentDayListLength:ze.length});const qe=await wu(n,ae,he,D.date,D.type,Le,ze);console.log("[AI] Received response for generateWorkoutForDay:",qe);const Bt=(Ve=>{const tt=(Ve?.date||D.date||"").toString();let Qt=tt;try{tt.includes("T")&&(Qt=un(new Date(tt),"yyyy-MM-dd"))}catch{Qt=D.date}Qt=D.date;const Or=Array.isArray(Ve?.workouts)?Ve.workouts:Array.isArray(Ve?.exercises)?Ve.exercises:[],On=Array.isArray(Ve?.alternativeWorkouts)?Ve.alternativeWorkouts:Array.isArray(Ve?.alternativeExercises)?Ve.alternativeExercises:[];return{date:Qt,type:Ve?.type||D.type||"mixed",workouts:Or.map(Ee=>({name:Ee?.name||Ee?.exercise||"Exercise",description:Ee?.description||Ee?.instructions||"",difficulty:Ee?.difficulty||"beginner",duration:Ee?.duration||(Ee?.durationSeconds?`${Ee.durationSeconds} sec`:""),reps:Ee?.reps??"",muscleGroups:Array.isArray(Ee?.muscleGroups)?Ee.muscleGroups:Ee?.muscleGroups?[Ee.muscleGroups]:[],equipment:Array.isArray(Ee?.equipment)?Ee.equipment:Ee?.equipment?[Ee.equipment]:[],sets:typeof Ee?.sets=="number"?Ee.sets:void 0,rest:Ee?.rest||void 0})),alternativeWorkouts:On.map(Ee=>({name:Ee?.name||Ee?.exercise||"Alt Exercise",description:Ee?.description||Ee?.instructions||"",difficulty:Ee?.difficulty||"beginner",duration:Ee?.duration||(Ee?.durationSeconds?`${Ee.durationSeconds} sec`:""),reps:Ee?.reps??"",muscleGroups:Array.isArray(Ee?.muscleGroups)?Ee.muscleGroups:Ee?.muscleGroups?[Ee.muscleGroups]:[],equipment:Array.isArray(Ee?.equipment)?Ee.equipment:Ee?.equipment?[Ee.equipment]:[],sets:typeof Ee?.sets=="number"?Ee.sets:void 0,rest:Ee?.rest||void 0})),completed:!!Ve?.completed,totalTime:Ve?.totalTime||""}})(qe);console.log("[REGenerate] Normalized regenerated day:",Bt);const Je=i.dailyWorkouts.map(Ve=>Ve.date===D.date?Bt:Ve),Pn={...i,dailyWorkouts:Je};r(Pn);try{console.log("[WorkoutCalendar] Saving regenerated plan to localStorage:",{dailyWorkoutsCount:Pn.dailyWorkouts.length}),br(Pn),console.log("[REGenerate] saved regenerated plan to localStorage")}catch(Ve){console.warn("Failed to save regenerated plan locally:",Ve)}m(Bt),g(!0),Ie(Bt.date),window.setTimeout(()=>Ie(null),2e3),b(null),Ge(!1)}catch(Le){console.error("Error regenerating single-day workout with AI:",Le),b(null),Ge(!1)}},Tr=async()=>{if(!i||!n||!q)return;b(q);const D=cn(),$=D?.answers||{},ae=D?.questionsList||[];try{const he=i.dailyWorkouts.filter(Be=>Be.date!==q);console.log("[AI] Sending generateWorkoutForDay request:",{username:n?.username,date:q,type:fe,othersCount:he.length});const Le=await wu(n,$,ae,q,fe,he,[]);console.log("[AI] Received response for generateWorkoutForDay:",Le);const ze=[...i.dailyWorkouts,Le],qe={...i,dailyWorkouts:ze};r(qe);try{br(qe)}catch(Be){console.warn("Failed to save generated day locally:",Be)}console.log("[Calendar] Updated plan after generation:",{totalDays:qe.totalDays||qe.dailyWorkouts.length,dailyWorkoutsCount:qe.dailyWorkouts.length,addedDate:q,addedDay:Le}),b(null)}catch(he){console.error("Error generating workout:",he),b(null)}},Po=(D,$)=>{oe($),Ae(!0);try{D.dataTransfer.effectAllowed="move"}catch{}},Pr=(D,$)=>{D.preventDefault();try{D.dataTransfer.dropEffect="move"}catch{}le(Et($.toISOString()))},ss=()=>{le(null)},is=()=>{Ae(!1),oe(null),le(null)},ti=(D,$)=>{if(D.preventDefault(),!re||!i){Ae(!1);return}const ae=Et($.toISOString()),he=re.date;if(ae===he){oe(null),le(null),Ae(!1);return}const Le=i.dailyWorkouts.find(Be=>Be.date===ae);let ze=[...i.dailyWorkouts];Le?ze=ze.map(Be=>Be.date===he?{...Le,date:he}:Be.date===ae?{...re,date:ae}:Be):ze=ze.map(Be=>Be.date===he?{...Be,date:ae}:Be);const qe={...i,dailyWorkouts:ze};r(qe),U(!0),h(c),oe(null),le(null),Ae(!1)},Kn=(D,$)=>{be(ae=>({...ae,[D]:$}))},Oo=()=>{if(!i)return;const D=i.dailyWorkouts.map(ae=>ae.date);lt(D);const $={...i,dailyWorkouts:[]};try{localStorage.setItem("fitbuddy_no_auto_restore","1"),sessionStorage.setItem("fitbuddy_no_auto_restore","1"),setTimeout(()=>{try{localStorage.removeItem("fitbuddy_no_auto_restore")}catch{}try{sessionStorage.removeItem("fitbuddy_no_auto_restore")}catch{}},3e5)}catch(ae){console.warn("Failed to set no-auto-restore guard:",ae)}r($);try{br($)}catch(ae){console.warn("Failed to persist cleared plan:",ae)}try{const ae=localStorage.getItem("fitbuddy_user_data");if(ae){const Le=JSON.parse(ae)?.data?.id;Le&&ec(Le).catch(()=>{})}}catch{}T(!1),Te(!1),alert("Calendar has been cleared!")},Ao=()=>{if(!i)return;if(Me.length===0){alert("Please select at least one date to delete.");return}const D=i.dailyWorkouts.filter($=>!Me.includes($.date));r({...i,dailyWorkouts:D}),lt([]),Te(!1),T(!1)},Tn=()=>{lt([]),Te(!1)};return o.jsxs("div",{className:"calendar-page",children:[o.jsxs("div",{className:"calendar-container",children:[o.jsxs("div",{className:"calendar-header",children:[o.jsxs("div",{className:"user-info",children:[o.jsxs("h1",{children:["Welcome back, ",n?.username?.trim()||"User","!"]}),o.jsx("p",{children:i.description})]}),o.jsxs("div",{className:"progress-stats",children:[o.jsxs("div",{className:"stat-card",children:[o.jsx(bn,{size:24}),o.jsxs("div",{className:"stat-content",children:[o.jsx("span",{className:"stat-number",children:Er}),o.jsx("span",{className:"stat-label",children:"Completed"})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx($s,{size:24}),o.jsxs("div",{className:"stat-content",children:[o.jsx("span",{className:"stat-number",children:Cr-Er}),o.jsx("span",{className:"stat-label",children:"Remaining"})]})]}),o.jsx("div",{className:"progress-circle",children:o.jsxs("svg",{viewBox:"0 0 36 36",className:"circular-chart",children:[o.jsx("path",{className:"circle-bg",d:`M18 2.0845\r
                    a 15.9155 15.9155 0 0 1 0 31.831\r
                    a 15.9155 15.9155 0 0 1 0 -31.831`}),o.jsx("path",{className:"circle",strokeDasharray:`${ts}, 100`,d:`M18 2.0845\r
                    a 15.9155 15.9155 0 0 1 0 31.831\r
                    a 15.9155 15.9155 0 0 1 0 -31.831`}),o.jsxs("text",{x:"18",y:"20.35",className:"percentage",children:[Math.round(ts),"%"]})]})})]})]}),o.jsxs("div",{className:"calendar-nav",children:[o.jsx("button",{className:"nav-button",onClick:()=>en("prev"),onDragEnter:()=>{const D=Date.now();D-a.current>=1e3&&(en("prev"),a.current=D)},"aria-label":"Previous month",children:o.jsx(Ru,{size:20})}),o.jsx("h2",{className:"month-year",children:un(c,"MMMM yyyy")}),o.jsx("button",{className:"nav-button",onClick:()=>en("next"),onDragEnter:()=>{const D=Date.now();D-a.current>=1e3&&(en("next"),a.current=D)},"aria-label":"Next month",children:o.jsx(by,{size:20})})]}),o.jsxs("div",{className:"calendar-grid",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(D=>o.jsx("div",{className:"day-header",children:D},D)),Wt.map((D,$)=>o.jsx("div",{className:"calendar-day empty"},`empty-start-${$}`)),Ft.map(D=>{const $=Ct(D),ae=un(D,"yyyy-MM-dd"),he=Jy(D,new Date),Le=ee===ae,ze=x===ae,qe=Xe===ae;return o.jsxs("div",{className:`calendar-day ${he?"today":""} ${$?"has-workout":""} ${Le?"drag-over":""}`+(Ce?" delete-active":"")+(ie?" add-active":"")+(ze?" loading":"")+(qe?" just-updated":"")+(Ne.includes(ae)?" selected":"")+(w?" rest-pending":"")+(Me.includes(ae)?" delete-selected":""),onClick:()=>wt(D),onDragOver:Be=>Pr(Be,D),onDragLeave:ss,onDrop:Be=>ti(Be,D),children:[o.jsx("span",{className:"day-number",children:un(D,"d")}),$?o.jsxs("div",{className:`workout-indicator ${To($.type)} ${$.completed?"completed":""}`,draggable:!C,onDragStart:Be=>Po(Be,$),onDragEnd:is,children:[(ze||K.includes(ae))&&o.jsx("div",{className:"loader-overlay inside-indicator",children:o.jsx("div",{className:"loading-dumbbell small",children:o.jsx(_t,{size:28,color:"#fff"})})}),o.jsxs("div",{className:"workout-content",children:[o.jsx("span",{className:"workout-type",children:$.type==="rest"?"Rest":$.type==="strength"?"Strength":$.type==="cardio"?"Cardio":$.type==="flexibility"?"Flexibility":"Mixed"}),o.jsx("span",{className:"workout-duration",children:$.totalTime?` ${$.totalTime}`:` ${ns($)}`}),$.completed&&o.jsx(Iu,{size:14,className:"check-icon"}),!$.completed&&$.type!=="rest"&&o.jsx(_y,{size:14,className:"play-icon"})]})]}):K.includes(ae)?o.jsx("div",{className:"loader-overlay inside-indicator",children:o.jsx("div",{className:"loading-dumbbell small",children:o.jsx(_t,{size:28,color:"#fff"})})}):null]},D.toISOString())}),dn.map((D,$)=>o.jsx("div",{className:"calendar-day empty"},`empty-end-${$}`))]}),o.jsxs("div",{className:"calendar-legend",children:[o.jsx("h3",{children:"Workout Types"}),o.jsxs("div",{className:"legend-items",children:[o.jsxs("div",{className:"legend-item",children:[o.jsx("div",{className:"legend-color strength"}),o.jsx("span",{children:"Strength Training"})]}),o.jsxs("div",{className:"legend-item",children:[o.jsx("div",{className:"legend-color cardio"}),o.jsx("span",{children:"Cardio"})]}),o.jsxs("div",{className:"legend-item",children:[o.jsx("div",{className:"legend-color flexibility"}),o.jsx("span",{children:"Flexibility"})]}),o.jsxs("div",{className:"legend-item",children:[o.jsx("div",{className:"legend-color mixed"}),o.jsx("span",{children:"Mixed"})]}),o.jsxs("div",{className:"legend-item",children:[o.jsx("div",{className:"legend-color rest"}),o.jsx("span",{children:"Rest Day"})]})]})]})]}),"      ",y&&p&&o.jsx(lw,{workout:p,onClose:()=>g(!1),onComplete:()=>Gn(p.date),onRegenerateWorkout:()=>ei(p),isRegenerating:We,onUpdateWorkout:Qn}),o.jsx("button",{className:`edit-fab ${C?"active":""}`,onClick:()=>T(!C),"aria-label":"Edit workouts",children:C?o.jsx(Gi,{size:24}):o.jsx(Du,{size:24})}),o.jsxs("div",{className:`edit-menu ${C?"open":""}`,children:[o.jsxs("div",{className:"edit-menu-header",children:[o.jsx("h3",{children:"Workout Editor"}),o.jsx("p",{children:"Customize your workout plan"})]}),o.jsxs("div",{className:"edit-menu-content",children:["          ",o.jsxs("div",{className:"edit-section",children:[o.jsxs("h4",{children:[o.jsx(Ey,{size:16})," Quick Actions"]}),"            ",o.jsxs("div",{className:"edit-actions",children:[o.jsxs("button",{className:"edit-action-btn",onClick:ea,children:[o.jsx(jy,{size:16}),ie?"Selecting...":"Select to Add"]}),ie&&o.jsxs("button",{className:"edit-action-btn confirm-btn",onClick:ta,children:[o.jsx(Lu,{size:16})," Confirm"]}),V&&o.jsxs("div",{className:"batch-add-panel",children:[o.jsxs("h4",{children:["Batch Add Workouts (",Ne.length," selected)"]}),o.jsx("label",{children:"Choose workout types (multi-select):"}),o.jsx("div",{className:"batch-types",children:["strength","cardio","flexibility","mixed","rest"].map(D=>o.jsxs("label",{className:`batch-type ${ne.includes(D)?"selected":""}`,children:[o.jsx("input",{type:"checkbox",checked:ne.includes(D),onChange:$=>{z(ae=>$.target.checked?[...ae,D]:ae.filter(he=>he!==D))}}),D]},D))}),o.jsx("label",{children:"Comments (optional):"}),o.jsx("textarea",{"aria-label":"Batch comments",value:se,onChange:D=>xe(D.target.value)}),o.jsxs("div",{className:"batch-actions",children:[o.jsx("button",{className:"save-btn",onClick:Zs,disabled:Ne.length===0,children:"Generate"}),o.jsx("button",{className:"cancel-btn",onClick:()=>{de(!1),Oe([])},children:"Cancel"})]})]}),o.jsxs("button",{className:"edit-action-btn",onClick:()=>{O(!0),T(!1),W(!1)},title:"Click a calendar day to assign a Rest Day",children:[o.jsx(Cn,{size:16}),w?"Click a day to add Rest":"Add Rest Day"]}),o.jsxs("button",{className:"edit-action-btn",onClick:()=>{Te(D=>{const $=!D;return $&&me(!1),$})},children:[o.jsx(po,{size:16})," ",Ce?"Stop Delete":"Delete Days"]}),Ce&&o.jsxs("div",{className:"delete-action-row",children:[o.jsxs("button",{className:"confirm-btn",onClick:Ao,disabled:Me.length===0,children:[o.jsx(po,{size:16})," Delete ",Me.length>0?`(${Me.length})`:""]}),o.jsx("button",{className:"cancel-btn",onClick:Tn,children:"Cancel"})]}),o.jsxs("button",{className:"edit-action-btn clear-calendar-btn",onClick:Oo,children:[o.jsx(po,{size:16}),"Clear Calendar"]})]}),L&&o.jsxs("div",{className:"date-picker-section",children:[o.jsx("label",{htmlFor:"rest-date",children:"Select date for rest day:"}),o.jsx("input",{id:"rest-date",type:"date",value:ue,onChange:D=>j(D.target.value),className:"date-input"}),o.jsxs("div",{className:"date-picker-actions",children:[o.jsx("button",{className:"save-btn",onClick:Xi,disabled:!ue,children:"Add Rest Day"}),o.jsx("button",{className:"cancel-btn",onClick:()=>{W(!1),j("")},children:"Cancel"})]})]}),te&&o.jsxs("div",{className:"date-picker-section",children:[o.jsx("label",{htmlFor:"workout-date",children:"Select date for workout day:"}),o.jsx("input",{id:"workout-date",type:"date",value:q,onChange:D=>Y(D.target.value),className:"date-input"}),o.jsx("label",{htmlFor:"workout-type",children:"Select workout type:"}),o.jsxs("select",{id:"workout-type",value:fe,onChange:D=>Se(D.target.value),children:[o.jsx("option",{value:"strength",children:"Strength"}),o.jsx("option",{value:"cardio",children:"Cardio"}),o.jsx("option",{value:"flexibility",children:"Flexibility"}),o.jsx("option",{value:"mixed",children:"Mixed"})]}),o.jsx("label",{htmlFor:"workout-duration",children:"Duration:"}),o.jsx("input",{id:"workout-duration",type:"text",value:ye.duration,onChange:D=>Kn("duration",D.target.value)}),o.jsx("label",{htmlFor:"muscle-groups",children:"Muscle Groups:"}),o.jsx("input",{id:"muscle-groups",type:"text",placeholder:"e.g., Legs, Arms",onChange:D=>Kn("muscleGroups",D.target.value.split(",").map($=>$.trim()))}),o.jsx("label",{htmlFor:"equipment",children:"Equipment:"}),o.jsx("input",{id:"equipment",type:"text",placeholder:"e.g., Dumbbells, Mat",onChange:D=>Kn("equipment",D.target.value.split(",").map($=>$.trim()))}),o.jsxs("div",{className:"date-picker-actions",children:[o.jsx("button",{className:"save-btn",onClick:Zi,disabled:!q,children:"Add Workout Day"}),o.jsx("button",{className:"cancel-btn",onClick:()=>{Z(!1),Y("")},children:"Cancel"})]}),q&&i?.dailyWorkouts.find(D=>D.date===q)&&o.jsx("div",{className:"error-message",children:"This date already has a workout. Please select a different date."})]})]}),B&&S&&o.jsxs("div",{className:"edit-section",children:[o.jsxs("h4",{children:[o.jsx(Du,{size:16})," Editing ",(()=>{const[D,$,ae]=S.date.split("-").map(Number);return un(new Date(D,$-1,ae),"MMM d")})()]}),o.jsxs("div",{className:"workout-edit-form",children:[o.jsxs("label",{children:["Workout Type:",o.jsxs("select",{value:S.type,onChange:D=>_({...S,type:D.target.value}),children:[o.jsx("option",{value:"strength",children:"Strength"}),o.jsx("option",{value:"cardio",children:"Cardio"}),o.jsx("option",{value:"flexibility",children:"Flexibility"}),o.jsx("option",{value:"mixed",children:"Mixed"}),o.jsx("option",{value:"rest",children:"Rest"})]})]}),o.jsxs("div",{className:"edit-actions",children:[o.jsxs("button",{className:"save-btn",onClick:Vn,children:[o.jsx(Lu,{size:16}),"Save Changes"]}),o.jsxs("button",{className:"cancel-btn",onClick:Jn,children:[o.jsx(Gi,{size:16}),"Cancel"]})]})]})]}),o.jsxs("div",{className:"edit-section",children:[o.jsx("h4",{children:"Tips"}),o.jsxs("ul",{className:"edit-tips",children:[o.jsx("li",{children:"Click on any day to view and edit workouts"}),o.jsx("li",{children:"Use quick actions to add new workout or rest days"}),o.jsx("li",{children:"Changes are saved automatically to your plan"})]})]})]})]}),C&&o.jsx("div",{className:"edit-menu-overlay",onClick:()=>T(!1)}),o.jsx("div",{className:"edit-menu-popup-root","aria-hidden":!C,children:C&&ie&&o.jsxs("div",{className:"workout-popup",children:[o.jsx("h3",{children:"Workout Details"}),o.jsx("label",{htmlFor:"workout-type",children:"Workout Type:"}),o.jsxs("select",{id:"workout-type",value:fe,onChange:D=>Se(D.target.value),children:[o.jsx("option",{value:"strength",children:"Strength"}),o.jsx("option",{value:"cardio",children:"Cardio"}),o.jsx("option",{value:"flexibility",children:"Flexibility"}),o.jsx("option",{value:"mixed",children:"Mixed"})]}),o.jsx("label",{htmlFor:"workout-duration",children:"Duration:"}),o.jsx("input",{id:"workout-duration",type:"text",value:ye.duration,onChange:D=>Kn("duration",D.target.value)}),o.jsx("label",{htmlFor:"muscle-groups",children:"Muscle Groups:"}),o.jsx("input",{id:"muscle-groups",type:"text",placeholder:"e.g., Legs, Arms",onChange:D=>Kn("muscleGroups",D.target.value.split(",").map($=>$.trim()))}),o.jsx("label",{htmlFor:"equipment",children:"Equipment:"}),o.jsx("input",{id:"equipment",type:"text",placeholder:"e.g., Dumbbells, Mat",onChange:D=>Kn("equipment",D.target.value.split(",").map($=>$.trim()))}),o.jsxs("div",{className:"workout-popup-actions",children:[o.jsx("button",{className:"save-btn",onClick:Tr,children:"Generate Workout"}),o.jsx("button",{className:"cancel-btn",onClick:()=>me(!1),children:"Cancel"})]})]})})]})},cw=({profileVersion:i,userData:n})=>{const r=qn(),a=Ks(),[l,c]=Jt.useState(null),[h,p]=Jt.useState(null);Jt.useEffect(()=>{const x=()=>{if(n){c(n);return}const T=localStorage.getItem("fitbuddy_user_data");if(!T){c(null);return}try{const S=JSON.parse(T);c(S?.data||null)}catch{c(null)}};x(),window.addEventListener("storage",x);const b=T=>{try{const S=T?.detail?.preview;S?.type==="avatar"&&S?.image&&(p(S.image),setTimeout(()=>p(null),4e3))}catch{}};window.addEventListener("shop-try-on",b);const C=setInterval(x,1e3);return()=>{window.removeEventListener("storage",x),window.removeEventListener("shop-try-on",b),clearInterval(C)}},[a.pathname,i,n]);const m=Jt.useMemo(()=>{try{const x=l||(()=>{const C=localStorage.getItem("fitbuddy_user_data");return C&&JSON.parse(C)?.data||null})();if(!x)return!1;if(x.role&&String(x.role).toLowerCase()==="admin")return!0;const b=x?.token||x?.access_token||null;if(b&&typeof b=="string")try{const C=b.split(".");if(C.length>=2){const T=JSON.parse(atob(C[1].replace(/-/g,"+").replace(/_/g,"/"))),S=T?.roles||T?.role||T?.roles?.join?.(",");if(Array.isArray(S)&&S.includes("admin")||String(S).toLowerCase()==="admin")return!0}}catch{}return String(x.username||"").toLowerCase()==="admin"}catch{return!1}},[l]),y=()=>{switch(a.pathname){case"/":return"Welcome to FitBuddy";case"/questionnaire":return"Fitness Assessment";case"/calendar":return"Your Workout Plan";case"/profile":return"Your Profile";case"/signin":return"Sign In";case"/signup":return"Sign Up";case"/chat":return"Chat with Buddy";default:return"FitBuddy"}},g=x=>a.pathname===x;return o.jsx("header",{className:"app-header",children:o.jsxs("div",{className:"header-container",children:[o.jsxs("div",{className:"header-brand",onClick:()=>r("/?intro=0"),children:[o.jsx("div",{className:"logo",children:o.jsx(_t,{size:48})}),o.jsxs("div",{className:"brand-text",children:[o.jsx("h1",{className:"brand-title",children:"FitBuddy"}),o.jsx("p",{className:"brand-subtitle",children:"Your AI Fitness Companion"})]})]}),o.jsxs("div",{className:"page-title",children:[o.jsx("h2",{children:y()}),l&&(()=>{const x=l.username?.trim(),b=l.username?.trim(),C=x||b||"User";return o.jsxs("p",{className:"user-greeting",children:["Hello, ",C,"! "]})})()]}),o.jsxs("nav",{className:"header-nav",children:[o.jsxs("button",{className:`nav-button ${g("/")?"active":""}`,onClick:()=>r("/?intro=0"),"aria-label":"Home",children:[o.jsx(Sy,{size:20,className:"home-icon"}),o.jsx("span",{children:"Home"})]}),o.jsxs("button",{className:`nav-button ${g("/questionnaire")?"active":""}`,onClick:()=>{cn()?.completed?r("/questionnaire?edit=true"):r("/questionnaire")},"aria-label":"Questionnaire",children:[o.jsx(Gs,{size:20}),o.jsx("span",{children:"Assessment"})]}),o.jsxs("button",{className:`nav-button ${g("/calendar")?"active":""}`,onClick:()=>r("/calendar"),"aria-label":"Workout Calendar",disabled:!l,children:[o.jsx(Cn,{size:20}),o.jsx("span",{children:"Calendar"})]}),o.jsxs("button",{className:`nav-button ${g("/chat")?"active":""}`,onClick:()=>r("/chat"),"aria-label":"Chat with Buddy",children:[o.jsx("span",{className:"sparkles-mobile-only",children:o.jsx(zn,{size:20})}),o.jsx("span",{children:"Chat"})]}),m&&o.jsxs("button",{className:`nav-button ${g("/admin")?"active":""}`,onClick:()=>r("/admin"),"aria-label":"Admin",children:[o.jsx("span",{className:"flame-mobile-only",children:o.jsx(ef,{size:20})}),o.jsx("span",{children:"Admin"})]}),l&&o.jsx(o.Fragment,{children:o.jsxs("div",{className:"header-counters",children:[o.jsxs("div",{className:"header-counter streak",children:[o.jsx(ef,{size:20,color:"#ffb347",style:{marginRight:4}}),o.jsx("span",{className:"counter-value",children:l?.streak??0})]}),o.jsxs("div",{className:"header-counter energy",children:[o.jsx(zn,{size:20,color:"#1e90cb",style:{marginRight:4}}),o.jsx("span",{className:"counter-value",children:l?.energy??0})]})]})}),o.jsxs("div",{className:"profile-section",children:[o.jsx("img",{src:h||(l&&l.avatar&&l.avatar.trim()?l.avatar:"/images/fitbuddy_head.png"),alt:"Profile",className:"profile-image",onClick:()=>r(l?"/profile":"/signin")}),o.jsxs("div",{className:"dropdown",children:[o.jsx("button",{className:"dropdown-button",onClick:()=>r(l?"/profile":"/signin"),children:l?l.username&&l.username.trim()||"User":"Sign In"}),o.jsx("div",{className:"dropdown-content",children:l?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>r("/profile"),children:" Profile"}),o.jsx("button",{onClick:()=>r("/profile/settings"),children:"Settings"}),o.jsx("button",{onClick:()=>r("/profile/friends"),children:"Friends"}),o.jsx("button",{onClick:()=>r("/profile/achievements"),children:"Achievements"}),o.jsx("button",{onClick:()=>{jo(),Qi(),No();try{localStorage.setItem("fitbuddy_no_auto_restore","1")}catch{}try{sessionStorage.setItem("fitbuddy_no_auto_restore","1")}catch{}window.dispatchEvent(new Event("fitbuddy-logout")),r("/signin")},children:"Sign Out"})]}):o.jsx("button",{onClick:()=>r("/signin"),children:"Sign In"})})]})]})]})]})})},dw=()=>o.jsx("div",{className:"loading-screen",children:o.jsxs("div",{className:"loading-container fade-in-bounce",children:[o.jsx("div",{className:"loading-dumbbell",children:o.jsx(_t,{size:40,color:"#fff"})}),o.jsx("h2",{className:"loading-title",children:"Hang tight!"}),o.jsx("p",{className:"loading-desc",children:"Your personalized plan is on its way..."}),o.jsx("p",{className:"ai-disclaimer",children:"Disclaimer: This plan is AI-generated and may not be perfect for everyone. Check important info."})]})});async function hw(i,n){try{const r={id:n.id,name:n.name,price:n.price,type:n.type,image:n.image||null,description:n.description||""},a=await fetch("/api/user/buy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:i,item:r})});if(!a.ok)return null;const l=await a.json();return l.user?(localStorage.setItem("fitbuddy_user_data",JSON.stringify({data:l.user,timestamp:Date.now()})),l.user):null}catch{return null}}async function xo(i){try{const n=await fetch(`/api/user/${i}`);if(!n.ok)return null;const r=await n.json();return r.user?(localStorage.setItem("fitbuddy_user_data",JSON.stringify({data:r.user,timestamp:Date.now()})),r.user):null}catch{return null}}function bo(){const i=localStorage.getItem("fitbuddy_user_data");if(!i)return null;try{return JSON.parse(i).data||null}catch{return null}}function fw(){localStorage.removeItem("fitbuddy_user_data"),localStorage.removeItem("fitbuddyUsername")}const pw=()=>{const i=qn(),n=()=>{try{localStorage.setItem("fitbuddy_no_auto_restore","1")}catch{}try{sessionStorage.setItem("fitbuddy_no_auto_restore","1")}catch{}try{jo()}catch{}try{Qi()}catch{}try{No()}catch{}try{fw()}catch{}window.dispatchEvent(new Event("fitbuddy-logout")),i("/signin")};return o.jsx("button",{className:"btn signout-btn",onClick:n,children:"Sign Out"})},mw=({userData:i,onProfileUpdate:n})=>{const[r,a]=N.useState(i||bo()),[l,c]=N.useState(!1),[h,p]=N.useState(r?.username||""),[m,y]=N.useState(r?.avatar||"/images/fitbuddy_head.png"),[g,x]=N.useState(!1),[b,C]=N.useState(""),T=qn();if(N.useEffect(()=>{let W=!1;const te=async()=>{const ie=bo();if(!ie?.id)return;const me=await xo(ie.id);!W&&me&&a(me)};te();const Z=setInterval(te,1e3);return()=>{W=!0,clearInterval(Z)}},[]),!r)return o.jsx("div",{className:"profile-page",children:o.jsxs("div",{className:"profile-card fade-in-bounce",children:[o.jsx("div",{className:"profile-avatar-bg",children:o.jsx("img",{src:"/images/fitbuddy_head.png",alt:"User Avatar",className:"avatar","data-testid":"profile-avatar"})}),o.jsx("h1",{className:"profile-username-gradient",children:"Guest"}),o.jsxs("div",{className:"profile-actions-row",children:[o.jsx("button",{className:"btn edit-profile",onClick:()=>T("/signin"),children:"Sign In"}),o.jsx("button",{className:"btn view-achievements",onClick:()=>T("/signup"),children:"Sign Up"})]}),o.jsx("p",{className:"not-logged-in-desc",children:"Sign in to track your workouts, earn energy, and unlock achievements!"})]})});const S=["https://api.dicebear.com/7.x/bottts/svg?seed=FitBuddy1","https://api.dicebear.com/7.x/bottts/svg?seed=DragonHead","https://api.dicebear.com/7.x/bottts/svg?seed=Duolingo"],_=["/images/fitbuddy_head.png",...S,"https://api.dicebear.com/7.x/bottts/svg?seed=FitBuddy2","https://api.dicebear.com/7.x/bottts/svg?seed=FitBuddy3","https://api.dicebear.com/7.x/bottts/svg?seed=FitBuddy4","https://api.dicebear.com/7.x/bottts/svg?seed=Pizza","https://we09532.github.io/Image_Hosting/Fishwins/Fishwin_Head.png","https://api.dicebear.com/7.x/bottts/svg?seed=Language","https://api.dicebear.com/7.x/bottts/svg?seed=Fitness","https://media1.giphy.com/media/4bjIKBOWUnVPICCzJc/source.gif"],B=()=>{p(r?.username||""),y(r?.avatar||"/images/fitbuddy_head.png"),c(!0),C("")},F=()=>{c(!1),C("")},L=async()=>{x(!0),C("");try{const W=await fetch("/api/user?action=update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r.id,username:h,avatar:m})});if(W.ok){const te=await W.json();a(te.user),n(te.user),c(!1)}else{const te={...r,username:h,avatar:m};localStorage.setItem("fitbuddy_user_data",JSON.stringify({data:te,timestamp:Date.now()})),a(te),n(te),c(!1),C("Saved locally (server unavailable).")}}catch{const te={...r,username:h,avatar:m};try{localStorage.setItem("fitbuddy_user_data",JSON.stringify({data:te,timestamp:Date.now()}))}catch{}a(te),n(te),c(!1),C("Saved locally (network error).")}finally{x(!1)}};return o.jsx("div",{className:"profile-page",children:o.jsxs("div",{className:"profile-card fade-in-bounce",children:[o.jsx("div",{className:"profile-avatar-bg",children:o.jsx("img",{src:l?m:r.avatar||"/images/fitbuddy_head.png",alt:"User Avatar",className:"avatar","data-testid":"profile-avatar"})}),l?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"avatar-select-row",children:_.map(W=>{const Z=!S.includes(W)||Array.isArray(r.inventory)&&r.inventory.some(ie=>ie.image===W);return o.jsxs("button",{className:`avatar-select-btn${m===W?" selected":""}${Z?"":" locked"}`,onClick:()=>{Z?y(W):T("/shop")},type:"button","aria-label":Z?"Choose avatar":"Locked avatar",children:[!Z&&o.jsx("span",{className:"avatar-lock-emoji",children:""}),o.jsx("img",{src:W,alt:"avatar option",className:"avatar avatar-option"})]},W)})}),o.jsx("input",{className:"edit-username-input",value:h,onChange:W=>p(W.target.value),maxLength:20,placeholder:"Username"}),b&&o.jsx("div",{className:"edit-error",children:b}),o.jsxs("div",{className:"profile-actions-row",children:[o.jsx("button",{className:"btn edit-profile",onClick:L,disabled:g,children:g?"Saving...":"Save"}),o.jsx("button",{className:"btn view-achievements",onClick:F,disabled:g,children:"Cancel"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("h1",{className:"profile-username-gradient",children:r.username}),o.jsxs("div",{className:"profile-stats-row",children:[o.jsxs("div",{className:"profile-stat",children:[o.jsx("span",{className:"profile-stat-label",children:"Workouts"}),o.jsx("span",{className:"profile-stat-value",children:r?.workouts?.length??"-"})]}),o.jsxs("div",{className:"profile-stat",children:[o.jsx("span",{className:"profile-stat-label",children:"Streak"}),o.jsx("span",{className:"profile-stat-value streak",children:r?.streak??"-"})]}),o.jsxs("div",{className:"profile-stat",children:[o.jsx("span",{className:"profile-stat-label",children:"Energy"}),o.jsx("span",{className:"profile-stat-value points",children:r?.energy??0})]})]}),o.jsxs("div",{className:"profile-actions-row",children:[o.jsx("button",{className:"btn edit-profile",onClick:B,children:"Edit Profile"}),o.jsx("button",{className:"btn view-achievements",children:"View Achievements"}),o.jsx(pw,{})]})]})]})})},gw=()=>{const i=qn(),[n,r]=N.useState(""),[a,l]=N.useState(""),[c,h]=N.useState(""),[p,m]=N.useState(!1),y=async g=>{g.preventDefault(),m(!0),h("");try{const x=String(n).trim().toLowerCase(),b=await fetch("/api/auth?action=signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:x,password:a})}),C=await b.text();let T=null;if(C)try{T=JSON.parse(C)}catch{throw new Error("Server returned invalid JSON: "+C)}if(!b.ok){const S=T&&T.message?T.message:`Sign in failed. Raw response: ${C}`;throw new Error(S)}if(T&&T.user){const S={data:T.user,token:T.token||null};rc(S,{skipBackup:!0}),await(async(B=2e3)=>{const F=Date.now();for(;Date.now()-F<B;){try{const L=localStorage.getItem("fitbuddy_user_data");if(L){const W=JSON.parse(L),te=W?.token??W?.data?.token??null;if(te)return te}}catch{}await new Promise(L=>setTimeout(L,150))}return null})(3e3),T.user.username&&localStorage.setItem("fitbuddyUsername",T.user.username);try{await Hs(T.user.id)}catch(B){console.warn("Failed to restore user data from server:",B)}try{window.dispatchEvent(new Event("fitbuddy-login"))}catch{}try{const B="/api/userdata/load";console.log("[SignInPage] POSTing to userdata save endpoint to retrieve stored payload",B);const F=await Hn(()=>import("./apiAuth-DcKunZOB.js"),[]).then(ie=>ie.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:T.user.id})})),L=async(ie,me,Ne=3,Oe=500)=>{let V=null,de=null;for(let ne=1;ne<=Ne;ne++)try{const z=await fetch(ie,me),se=await z.text();if(V=z,de=se,z.ok)return{res:z,text:se};if(ne<Ne&&(z.status===401||z.status===403||z.status>=500&&z.status<600)){console.warn(`[SignInPage] userdata POST attempt ${ne} failed status ${z.status}. Retrying after ${Oe}ms`),await new Promise(xe=>setTimeout(xe,Oe));continue}return{res:z,text:se}}catch(z){if(V=null,de=null,ne<Ne){console.warn(`[SignInPage] userdata POST attempt ${ne} threw, retrying after ${Oe}ms`,z),await new Promise(se=>setTimeout(se,Oe));continue}throw z}return{res:V,text:de}},{res:W,text:te}=await L(B,F,3,500);if(!W)throw new Error("Failed to receive a response from userdata endpoint");console.log("[SignInPage] userdata POST response status:",W.status,"ok:",W.ok),te&&te.length&&console.log("[SignInPage] userdata POST response snippet:",te.slice(0,500));const Z=W.headers.get("x-userdata-source");if(Z&&console.log("[SignInPage] userdata source header:",Z),W.ok){let ie=null;try{ie=te?JSON.parse(te):null}catch(Ne){console.warn("[SignInPage] userdata POST returned invalid JSON; invoking restoreUserDataFromServer fallback",Ne);try{await Hs(T.user.id)}catch(Oe){console.warn("[SignInPage] fallback restore failed:",Oe)}}const me=ie?.stored??ie?.payload??ie;if(me)try{const Ne=me.fitbuddy_assessment_data,Oe=me.fitbuddy_workout_plan,V=Ne?.data??Ne??null,de=Oe?.data??Oe??null;V&&nc(V),de&&br(de)}catch(Ne){console.warn("Failed to save restored payload values:",Ne)}}else{console.warn("[SignInPage] userdata POST returned non-ok status");try{await Hs(T.user.id)}catch(ie){console.warn("[SignInPage] fallback restore failed:",ie)}}}catch(B){console.warn("Failed to fetch userdata payload via POST:",B)}i("/profile")}else throw new Error("Invalid server response. Raw response: "+C)}catch(x){h(x.message)}finally{m(!1)}};return o.jsx("div",{className:"signin-page",children:o.jsxs("form",{className:"signin-form",onSubmit:y,children:[o.jsx("h1",{children:"Sign In"}),o.jsxs("label",{children:["Email",o.jsx("input",{type:"email",value:n,onChange:g=>r(g.target.value),required:!0,autoComplete:"username"})]}),o.jsxs("label",{children:["Password",o.jsx("input",{type:"password",value:a,onChange:g=>l(g.target.value),required:!0,autoComplete:"current-password"})]}),c&&o.jsx("div",{className:"error",children:c}),o.jsx("button",{className:"btn",type:"submit",disabled:p,children:p?"Signing in...":"Sign In"}),o.jsxs("div",{className:"signup-link",children:["Don't have an account? ",o.jsx("span",{onClick:()=>i("/signup"),children:"Sign Up"})]})]})})},yw=()=>{const i=qn(),[n,r]=N.useState(""),[a,l]=N.useState(""),[c,h]=N.useState(""),[p,m]=N.useState(""),[y,g]=N.useState(""),[x,b]=N.useState(!1),C=async T=>{if(T.preventDefault(),g(""),c!==p){g("Passwords do not match");return}b(!0);try{const S=String(n).trim().toLowerCase(),_=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:S,username:a,password:c})}),B=await _.text();let F=null;if(B)try{F=JSON.parse(B)}catch{throw new Error("Server returned invalid JSON: "+B)}if(!_.ok){let L="Sign up failed.";throw F&&F.message?L=F.message:B?L=`Sign up failed. Raw response: ${B}`:L="Sign up failed. No response from server. Is the server running?",new Error(L)}i("/signin")}catch(S){g(S.message)}finally{b(!1)}};return o.jsx("div",{className:"signup-page",children:o.jsxs("form",{className:"signup-form",onSubmit:C,children:[o.jsx("h1",{children:"Sign Up"}),o.jsxs("label",{children:["Email",o.jsx("input",{type:"email",value:n,onChange:T=>r(T.target.value),required:!0})]}),o.jsxs("label",{children:["Username",o.jsx("input",{type:"text",value:a,onChange:T=>l(T.target.value),required:!0})]}),o.jsxs("label",{children:["Password",o.jsx("input",{type:"password",value:c,onChange:T=>h(T.target.value),required:!0,autoComplete:"new-password"})]}),o.jsxs("label",{children:["Confirm Password",o.jsx("input",{type:"password",value:p,onChange:T=>m(T.target.value),required:!0,autoComplete:"new-password"})]}),y&&o.jsx("div",{className:"error",children:y}),o.jsx("button",{className:"btn",type:"submit",disabled:x,children:x?"Signing up...":"Sign Up"}),o.jsxs("div",{className:"signin-link",children:["Already have an account? ",o.jsx("span",{onClick:()=>i("/signin"),children:"Sign In"})]})]})})},ic=()=>o.jsx("div",{className:"notfound-container",children:o.jsxs("div",{className:"notfound-content fade-in-bounce",children:[o.jsx("div",{className:"notfound-icon-bg",children:o.jsx(_t,{size:48,color:"#fff"})}),o.jsx("h1",{className:"notfound-title",children:"404"}),o.jsx("h2",{className:"notfound-message",children:"Page Not Found"}),o.jsx("p",{className:"notfound-desc",children:"Oops! The page you are looking for does not exist."}),o.jsx("a",{className:"notfound-home-btn",href:"/?intro=0",children:"Go Home"})]})}),vw=[{id:"avatar1",name:"Bot Buddy",image:"https://api.dicebear.com/7.x/bottts/svg?seed=FitBuddy1",price:100,type:"avatar",description:"A friendly robot avatar."},{id:"avatar2",name:"Dragon Head",image:"https://api.dicebear.com/7.x/bottts/svg?seed=DragonHead",price:200,type:"avatar",description:"Unleash your inner dragon!"},{id:"avatar3",name:"Duolingo Owl",image:"https://api.dicebear.com/7.x/bottts/svg?seed=Duolingo",price:250,type:"avatar",description:"Inspired by the language learning legend."},{id:"avatar4",name:"Neo Cat",image:"https://api.dicebear.com/7.x/croodles/svg?seed=NeoCat",price:120,type:"avatar",description:"A sleek cyber cat."},{id:"avatar5",name:"Mountain Goat",image:"https://api.dicebear.com/7.x/bottts/svg?seed=Goat",price:140,type:"avatar",description:"Sturdy and sure-footed."},{id:"avatar6",name:"Galaxy Fox",image:"https://api.dicebear.com/7.x/bottts/svg?seed=GalaxyFox",price:220,type:"avatar",description:"Out-of-this-world style."},{id:"avatar7",name:"Pixel Pup",image:"https://api.dicebear.com/7.x/bottts/svg?seed=PixelPup",price:80,type:"avatar",description:"Cute pixel-styled puppy."},{id:"avatar8",name:"Samurai",image:"https://api.dicebear.com/7.x/bottts/svg?seed=Samurai",price:300,type:"avatar",description:"Honor and style."},{id:"avatar9",name:"Astronaut",image:"https://api.dicebear.com/7.x/bottts/svg?seed=Astronaut",price:260,type:"avatar",description:"Reach for the stars."},{id:"avatar10",name:"Vintage Robot",image:"https://api.dicebear.com/7.x/bottts/svg?seed=VintageBot",price:110,type:"avatar",description:"Retro charm."},{id:"avatar11",name:"Neon Ninja",image:"https://api.dicebear.com/7.x/bottts/svg?seed=NeonNinja",price:210,type:"avatar",description:"Stealthy and bright."},{id:"avatar12",name:"Forest Sprite",image:"https://api.dicebear.com/7.x/bottts/svg?seed=ForestSprite",price:130,type:"avatar",description:"Whimsical woodland friend."}],ww=[{id:"spinpfp",name:"Spinning Profile Picture",icon:o.jsx(Wi,{size:32,color:"#1e90cb"}),price:300,type:"powerup",description:"Make your profile picture spin for 7 days!"},{id:"sparkle",name:"Sparkle Effect",icon:o.jsx(zn,{size:32,color:"#ffb347"}),price:150,type:"powerup",description:"Add a sparkle effect to your avatar."},{id:"smile",name:"Smile Badge",icon:o.jsx(fo,{size:32,color:"#1ecb7b"}),price:80,type:"powerup",description:"Show off your positivity!"},{id:"glow",name:"Glow Outline",icon:o.jsx(zn,{size:32,color:"#1ecb7b"}),price:140,type:"powerup",description:"Add a soft glow behind your avatar."},{id:"confetti",name:"Confetti Burst",icon:o.jsx(zn,{size:32,color:"#ffb347"}),price:220,type:"powerup",description:"Celebrate finishes with confetti."},{id:"badge-pro",name:"Pro Badge",icon:o.jsx(fo,{size:32,color:"#1ecb7b"}),price:190,type:"powerup",description:"Show you are a FitBuddy Pro."},{id:"trail",name:"Movement Trail",icon:o.jsx(Wi,{size:32,color:"#1e90cb"}),price:170,type:"powerup",description:"Leave a subtle trail when you move."},{id:"animated-frames",name:"Animated Frames",icon:o.jsx(zn,{size:32,color:"#ffb347"}),price:250,type:"powerup",description:"Frame your avatar with animated borders."},{id:"voice-chime",name:"Voice Chime",icon:o.jsx(fo,{size:32,color:"#1ecb7b"}),price:120,type:"powerup",description:"Play a chime when you start workouts."},{id:"seasonal-halo",name:"Seasonal Halo",icon:o.jsx(zn,{size:32,color:"#1ecb7b"}),price:160,type:"powerup",description:"A seasonal halo that changes with events."},{id:"vfx",name:"VFX Pack",icon:o.jsx(zn,{size:32,color:"#ffb347"}),price:320,type:"powerup",description:"A bundle of effects for your avatar."},{id:"status-glow",name:"Status Glow",icon:o.jsx(Wi,{size:32,color:"#1e90cb"}),price:90,type:"powerup",description:"Show a small glow if you are active."}],xw=({user:i,onPurchase:n})=>{const[r,a]=N.useState("avatars"),[l,c]=N.useState(null),[h,p]=N.useState(""),[m,y]=N.useState("popular"),[g,x]=N.useState(null),b=N.useRef(null);N.useEffect(()=>{if(!i?.id)return;const S=async()=>{await xo(i.id)&&window.dispatchEvent(new Event("storage"))};return b.current=setInterval(S,1e3),()=>{b.current&&clearInterval(b.current)}},[i?.id]);const C=async S=>{if(i.energy<S.price){alert("Not enough energy!");return}c(S.id);const _=await hw(i.id,S);c(null),_?(n(S),window.dispatchEvent(new Event("storage"))):alert("Purchase failed.")},T=S=>{const _=h.trim().toLowerCase();let B=S.filter(F=>!_||F.name.toLowerCase().includes(_)||(F.description||"").toLowerCase().includes(_));return m==="price-asc"&&(B=B.sort((F,L)=>F.price-L.price)),m==="price-desc"&&(B=B.sort((F,L)=>L.price-F.price)),B};return o.jsxs("div",{className:"shop-page fade-in-bounce",children:[o.jsxs("header",{className:"shop-header",children:[o.jsx(_t,{size:32,className:"shop-logo"}),o.jsx("h1",{className:"shop-title gradient-text",children:"FitBuddy Shop"}),o.jsxs("div",{className:"shop-energy",children:[o.jsx("span",{className:"energy-label",children:"Your Energy:"}),o.jsxs("span",{className:"energy-value",children:[" ",i.energy]})]})]}),o.jsxs("div",{className:"shop-topbar",children:[o.jsxs("div",{className:"shop-tabs",children:[o.jsx("button",{className:r==="avatars"?"active":"",onClick:()=>a("avatars"),children:"Avatars"}),o.jsx("button",{className:r==="powerups"?"active":"",onClick:()=>a("powerups"),children:"Powerups"})]}),o.jsxs("div",{className:"shop-controls",children:[o.jsxs("div",{className:"search-wrap",children:[o.jsx(Ny,{size:16}),o.jsx("input",{placeholder:"Search items",value:h,onChange:S=>p(S.target.value)})]}),o.jsxs("div",{className:"sort-wrap",children:[o.jsx(ky,{size:16}),o.jsxs("select",{"aria-label":"Sort items",value:m,onChange:S=>y(S.target.value),children:[o.jsx("option",{value:"popular",children:"Recommended"}),o.jsx("option",{value:"price-asc",children:"Price: Low to High"}),o.jsx("option",{value:"price-desc",children:"Price: High to Low"})]})]})]})]}),o.jsxs("div",{className:"shop-featured",children:[o.jsxs("div",{className:"featured-left",children:[o.jsx(_t,{size:28}),o.jsxs("div",{children:[o.jsx("div",{className:"featured-title",children:"Limited-time: Double Energy Sundays"}),o.jsx("div",{className:"featured-desc",children:"Buy selected powerups and receive double energy back for your first workout."})]})]}),o.jsx("button",{className:"featured-cta",children:"Learn More"})]}),o.jsxs("div",{className:"shop-items-grid",children:[r==="avatars"&&T(vw).map(S=>{const _=Array.isArray(i.inventory)&&i.inventory.some(B=>B.id===S.id);return o.jsxs("div",{className:"shop-card",onClick:()=>x(S),children:[o.jsx("img",{src:S.image,alt:S.name,className:"shop-avatar-img"}),o.jsxs("h2",{className:"shop-item-title",children:[S.name," ",_&&o.jsx("span",{className:"owned-badge",children:"Owned"})]}),o.jsx("p",{className:"shop-item-desc",children:S.description}),o.jsxs("div",{className:"shop-card-footer",children:[o.jsxs("span",{className:"shop-price",children:[" ",S.price]}),o.jsx("button",{className:"shop-buy-btn",disabled:_||i.energy<S.price||l===S.id,onClick:B=>{B.stopPropagation(),C(S)},children:_?"Owned":l===S.id?"Buying...":o.jsxs(o.Fragment,{children:[o.jsx(nf,{size:16})," Buy"]})})]})]},S.id)}),r==="powerups"&&T(ww).map(S=>o.jsxs("div",{className:"shop-card",onClick:()=>x(S),children:[o.jsx("div",{className:"shop-powerup-icon",children:S.icon}),o.jsx("h2",{className:"shop-item-title",children:S.name}),o.jsx("p",{className:"shop-item-desc",children:S.description}),o.jsxs("div",{className:"shop-card-footer",children:[o.jsxs("span",{className:"shop-price",children:[" ",S.price]}),o.jsx("button",{className:"shop-buy-btn",disabled:i.energy<S.price||l===S.id,onClick:_=>{_.stopPropagation(),C(S)},children:l===S.id?"Buying...":o.jsxs(o.Fragment,{children:[o.jsx(nf,{size:16})," Buy"]})})]})]},S.id))]}),g&&o.jsx("div",{className:"shop-preview",onClick:()=>x(null),children:o.jsxs("div",{className:"preview-card",onClick:S=>S.stopPropagation(),children:[o.jsx("button",{className:"preview-close",onClick:()=>x(null),children:""}),o.jsxs("div",{className:"preview-body",children:[o.jsxs("div",{className:"preview-demo",children:[g.type==="avatar"&&g.image&&o.jsx("img",{src:g.image,alt:g.name,className:"preview-img"}),g.type==="powerup"&&o.jsxs("div",{className:"powerup-demo",children:[g.id==="spinpfp"&&o.jsx("div",{className:"preview-demo-box spin-anim",children:""}),g.id==="sparkle"&&o.jsxs("div",{className:"preview-demo-box dots-anim",children:[o.jsx("span",{}),o.jsx("span",{}),o.jsx("span",{})]}),g.id==="confetti"&&o.jsx("div",{className:"preview-demo-box confetti-anim",children:""}),g.id==="glow"&&o.jsx("div",{className:"preview-demo-box glow-anim",children:""}),g.id==="trail"&&o.jsx("div",{className:"preview-demo-box trail-anim",children:""}),g.id==="animated-frames"&&o.jsx("div",{className:"preview-demo-box frames-anim",children:""}),g.id==="voice-chime"&&o.jsx("div",{className:"preview-demo-box chime-anim",children:""}),g.id==="vfx"&&o.jsx("div",{className:"preview-demo-box vfx-anim",children:""}),g.id==="status-glow"&&o.jsx("div",{className:"preview-demo-box statusglow-anim",children:""}),!["spinpfp","sparkle","confetti","glow","trail","animated-frames","voice-chime","vfx","status-glow"].includes(g.id)&&o.jsx("div",{className:"preview-demo-box",children:"Preview"})]})]}),o.jsx("h3",{children:g.name}),o.jsx("p",{children:g.description}),o.jsxs("div",{className:"preview-actions",children:[o.jsxs("span",{className:"shop-price",children:[" ",g.price]}),o.jsxs("div",{className:"preview-actions-row",children:[o.jsx("button",{className:"shop-buy-btn",onClick:()=>{C(g),x(null)},children:"Buy"}),o.jsx("button",{className:"shop-buy-btn",onClick:()=>{window.dispatchEvent(new CustomEvent("shop-try-on",{detail:{preview:g}}))},children:"Try On"})]})]})]})]})})]})},bw=({open:i,summary:n,details:r,onConfirm:a,onCancel:l})=>{const[c,h]=Jt.useState({});if(Jt.useEffect(()=>{i&&h({})},[i]),!i)return null;const p=r?.updates??[];return o.jsx("div",{className:"acm-backdrop",role:"dialog","aria-modal":"true",children:o.jsxs("div",{className:"acm-modal",children:[o.jsx("h3",{children:"Confirm Buddy's changes"}),o.jsx("p",{className:"acm-summary",children:n}),o.jsxs("div",{className:"acm-details-list",children:[p.length===0&&o.jsx("div",{className:"acm-no-updates",children:"No explicit updates found."}),p.map((m,y)=>o.jsxs("label",{className:"acm-update-row",children:[o.jsx("input",{type:"checkbox",checked:!!c[y],onChange:()=>h(g=>({...g,[y]:!g[y]}))}),o.jsxs("span",{className:"acm-update-desc",children:[m.op," ",m.path," ",m.value?JSON.stringify(m.value):""]})]},y))]}),o.jsxs("div",{className:"acm-actions",children:[o.jsx("button",{className:"acm-btn acm-cancel",onClick:l,children:"Cancel"}),o.jsx("button",{className:"acm-btn acm-confirm",onClick:()=>a(p.filter((m,y)=>c[y]||p.length===1)),children:"Apply selected changes"})]})]})})},kw=({userData:i})=>{const[n,r]=N.useState([{role:"assistant",text:"Hi! I am Buddy  your AI Fitness assistant. I can answer questions about your workouts, goals, and progress."}]),[a,l]=N.useState(""),[c,h]=N.useState(!1),p=N.useRef(null),[m,y]=N.useState(!1),[g,x]=N.useState(null);N.useEffect(()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)},[n,c]),N.useEffect(()=>{(()=>{try{const _=i?.id||"anon",B=localStorage.getItem(`fitbuddy_chat_${_}`);if(!B)return;const F=JSON.parse(B);Array.isArray(F)&&F.length&&r(F)}catch{}})()},[i?.id]),N.useEffect(()=>{const S=_=>{try{if(!_.key)return;const F=`fitbuddy_chat_${i?.id||"anon"}`;if(_.key===F){if(!_.newValue){r([{role:"assistant",text:"Hi! I am Buddy  your AI Fitness assistant. I can answer questions about your workouts, goals, and progress."}]);return}try{const L=JSON.parse(_.newValue);Array.isArray(L)&&r(L)}catch{}}}catch{}};return window.addEventListener("storage",S),()=>window.removeEventListener("storage",S)},[i?.id]),N.useEffect(()=>{let S=null;try{S=setTimeout(()=>{try{const _=i?.id||"anon";localStorage.setItem(`fitbuddy_chat_${_}`,JSON.stringify(n))}catch{}},400)}catch{}return()=>{S&&clearTimeout(S)}},[n,i?.id]),N.useEffect(()=>{const S=()=>{try{const _=i?.id||"anon";localStorage.removeItem(`fitbuddy_chat_${_}`),r([{role:"assistant",text:"Hi! I am Buddy  your AI fitness assistant. I can answer questions about your workouts, goals, and progress."}])}catch{}};return window.addEventListener("fitbuddy-logout",S),()=>window.removeEventListener("fitbuddy-logout",S)},[i?.id]),N.useEffect(()=>{let S;return(()=>{const B=i?.id;if((S===void 0||S==="anon")&&B&&B!=="anon")try{const F=localStorage.getItem("fitbuddy_chat_anon");if(F)try{localStorage.setItem(`fitbuddy_chat_${B}`,F)}catch{}localStorage.removeItem("fitbuddy_chat_anon")}catch{}S=B??"anon"})(),()=>{}},[i?.id]);const b=S=>{if(!S)return"No user data available.";try{const _={id:S.id,username:S.username,age:S.age,goals:S.goals||S.preferences||[],fitnessLevel:S.fitnessLevel||S.fitness_level||"unknown",energy:S.energy??null,streak:S.streak??null};return JSON.stringify(_)}catch{return"User data present but could not be summarized."}},C=async()=>{const S=a.trim();if(!S)return;const _={role:"user",text:S};r(ie=>[...ie,_]),l(""),h(!0);const B=n.concat(_).map(ie=>`${ie.role==="user"?"User":"Assistant"}: ${ie.text}`).join(`
`),F=i?.workoutPlan?`
User workoutPlan: ${JSON.stringify(i.workoutPlan).slice(0,800)}`:"",L=`You are FitBuddy's AI assistantnamed Buddy. Use the following user profile to personalize answers: ${b(i)}

Conversation:
${B}

Respond fully and directly to the user's last message. Keep answers actionable and concise.`,te=["","Examples (MUST follow the JSON format exactly, but feel free to chnage the data and values):","","1) Simple numeric set (set energy to 10)","Human reply:","I've increased your energy to help with today's workout.","","JSON block:","```json","{",'  "__action": true,','  "updates": [','    { "op": "set", "path": "energy", "value": 10 }',"  ],",'  "summary": "Set energy to 10"',"}","```","","2) Change username","Human reply:","I can update your display name now.","","JSON block:","```json","{",'  "__action": true,','  "updates": [','    { "op": "set", "path": "username", "value": "fit_william" }',"  ],",'  "summary": "Change username to fit_william"',"}","```","","3) Add an item to inventory (push)","Human reply:","I'll add the SuperBand to your inventory for resistance training.","","JSON block:","```json","{",'  "__action": true,','  "updates": [',"    {",'      "op": "push",','      "path": "inventory",','      "value": {','        "id": "superband-01",','        "name": "SuperBand",','        "type": "equipment",','        "acquiredAt": "2025-09-05"',"      }","    }","  ],",'  "summary": "Add SuperBand to inventory"',"}","```","","4) Replace the full workout plan (ONLY if user explicitly requests a full replacement)","Human reply:","You asked to replace your entire workout plan. I will prepare a complete plan object  please confirm before applying.","","JSON block (skeleton example):","```json","{",'  "__action": true,','  "updates": [',"    {",'      "op": "set",','      "path": "workoutPlan",','      "value": { "id": "<id>", "name": "<name>", "startDate": "<YYYY-MM-DD>", "endDate": "<YYYY-MM-DD>", "dailyWorkouts": [ /* day objects */ ] }',"    }","  ],",'  "summary": "Replace entire workoutPlan (user-requested full replacement)"',"}","```","","Instruction: DO NOT create or emit a full workoutPlan unless the user explicitly asks for a full replacement. Prefer patch-style single-day or small updates. If the user asks for a full plan, emit a compact skeleton like above and ask for confirmation before applying.","","5) Multiple updates in one action:","Human reply:","I'll apply the three updates you requested: raise energy, add equipment, and update your display name.","","JSON block:","```json","{",'  "__action": true,','  "updates": [','    { "op": "set", "path": "energy", "value": 8 },',"    {",'      "op": "push",','      "path": "inventory",','      "value": { "id": "resmat-02", "name": "Travel Mat", "type": "equipment", "acquiredAt": "2025-09-05" }',"    },",'    { "op": "set", "path": "username", "value": "will_fit" }',"  ],",'  "summary": "Set energy to 8, add Travel Mat to inventory, change username to will_fit"',"}","```","","6) When no changes are intended:","Human reply only (no JSON block):","No changes are needed  here's a suggestion: try adding a 10-minute mobility warmup before your workouts this week.","","(Must NOT include a JSON block in this case.)","","Short checklist to follow exactly:","- Always emit human reply first.",'- If proposing changes emit exactly one fenced JSON block with the object keys: "__action", "updates", "summary".','- Use "set" to replace values and "push" to append to arrays.','- For "workoutPlan" send the full new object as the value for a "set".',"- No additional text inside or around the fenced JSON block.","","NEW EXAMPLES (Modify single days)","","7) Modify a single day's workouts (preferred when only one day needs adjustment)","Human reply:","I'll update day 3's workouts to an active recovery set  keeping the rest of your plan intact.","","JSON block:","```json","{",'  "__action": true,','  "updates": [','    { "op": "set", "path": "workoutPlan/dailyWorkouts/2/workouts", "value": [ { "name": "Foam Rolling", "description": "Release muscle tension.", "difficulty": "beginner", "duration": "15 minutes", "reps": "1x15", "muscleGroups": ["full body"], "equipment": ["Foam roller"] } ] }',"  ],",'  "summary": "Set Day 3 to active recovery workouts"',"}","```","","8) Modify a single day's metadata (type or totalTime)","Human reply:","I'll change day 3's type to 'activeRecovery' and adjust totalTime to '30 minutes'.","","JSON block:","```json","{",'  "__action": true,','  "updates": [','    { "op": "set", "path": "workoutPlan/dailyWorkouts/2/type", "value": "activeRecovery" },','    { "op": "set", "path": "workoutPlan/dailyWorkouts/2/totalTime", "value": "30 minutes" }',"  ],",'  "summary": "Update Day 3 type and totalTime"',"}","```","","9) Recommended example day (use as template for modifications)","Human reply:","Here's a recommended example day  when updating a day, keep the same object shape:","","Example day JSON:","```json","{",'    "date": "2025-09-10",','    "type": "Full Body",','    "completed": false,','    "totalTime": "30 minutes",','    "workouts": [',"        {",'            "name": "Lunges",','            "description": "",','            "difficulty": "beginner",','            "duration": "10 minutes",','            "reps": "3x10 each leg",','            "muscleGroups": ["quads","glutes","hamstrings"],','            "equipment": []',"        },","        {",'            "name": "Plank",','            "description": "",','            "difficulty": "beginner",','            "duration": "10 minutes",','            "reps": "3x30 seconds",','            "muscleGroups": ["core"],','            "equipment": []',"        },","        {",'            "name": "Overhead Press (Dumbbell)",','            "description": "",','            "difficulty": "beginner",','            "duration": "10 minutes",','            "reps": "3x10",','            "muscleGroups": ["shoulders"],','            "equipment": ["dumbbell"]',"        }","    ],",'    "alternativeWorkouts": []',"}","```","","Instruction: When modifying days, prefer the patch-style single-day updates above rather than replacing the whole `workoutPlan` unless the user explicitly asks for a full replacement."].join(`
`),Z=L+F+'\n\nWhen you propose changes to the user\'s profile or workout plan, produce both: (1) a human-readable reply, and (2) a JSON action block fenced as ```json containing {"__action":true, "updates":[...], "summary":"..."}. Only include the JSON block when you intend the site to apply changes. Close the JSON block with ```.'+te;try{const ie=localStorage.getItem("fitbuddy_questionnaire_progress"),me=localStorage.getItem("fitbuddy_user_data"),Ne=localStorage.getItem("fitbuddy_workout_plan");let Oe=null,V=null,de=null;try{Oe=ie?JSON.parse(ie):null}catch{Oe=ie}try{V=me?JSON.parse(me):null}catch{V=me}try{de=Ne?JSON.parse(Ne):null}catch{de=Ne}const ne=await Dy({prompt:Z,localStorageContext:{questionnaire:Oe,userData:V,workoutPlan:de}});let z=ne.text||"",se=null;try{const xe=z.match(/\{[\s\S]*\}/),K=xe?xe[0]:ne.raw&&ne.raw.match(/\{[\s\S]*\}/)?ne.raw.match(/\{[\s\S]*\}/)[0]:null;K&&(se=JSON.parse(K),z=z.replace(K,"").trim())}catch{se=null}if(r(xe=>[...xe,{role:"assistant",text:z}]),se&&se.__action&&Array.isArray(se.updates)){const xe=se.summary||(se.updates&&se.updates.length?String(se.updates[0].path||"Suggested change"):"Suggested change");r(K=>[...K,{role:"action",text:xe}]),x(se),y(!0)}}catch(ie){console.error("Gemini chat error",ie),r(me=>[...me,{role:"assistant",text:"Buddy is currently unavailable. Please try again later."}])}finally{h(!1)}},T=S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),C())};return o.jsxs("div",{className:"gemini-page-root",children:[o.jsx("div",{className:"gemini-page",children:o.jsxs("div",{className:"gemini-container",children:[o.jsxs("header",{className:"gemini-header",children:[o.jsx("h1",{children:"Chat with Buddy"}),o.jsx("p",{className:"gemini-sub",children:"Ask Buddy about your workouts, plan, or goals  Buddy knows your profile."})]}),o.jsxs("div",{className:"gemini-chat",ref:p,role:"log","aria-live":"polite",children:[n.map((S,_)=>{const B=S.role==="assistant",F=S.role==="user",L=(B||F)&&typeof S.text=="string"&&S.text.indexOf(`
`)===-1,W=["msg",B?"msg-assistant":S.role==="user"?"msg-user":"msg-action"];return L&&W.push("single-line"),o.jsxs("div",{className:W.join(" "),children:[B&&o.jsx("div",{className:"logo","aria-hidden":"true",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#ffffff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-dumbbell",children:[o.jsx("path",{d:"m6.5 6.5 11 11"}),o.jsx("path",{d:"m21 21-1-1"}),o.jsx("path",{d:"m3 3 1 1"}),o.jsx("path",{d:"m18 22 4-4"}),o.jsx("path",{d:"m2 6 4-4"}),o.jsx("path",{d:"m3 10 7-7"}),o.jsx("path",{d:"m14 21 7-7"})]})}),S.role==="user"&&o.jsx("div",{className:"logo user-logo","aria-hidden":!0,children:i?.avatar||i?.avatarUrl?o.jsx("img",{src:i?.avatar||i?.avatarUrl,alt:i?.username||"User"}):o.jsx("span",{className:"initials",children:(i?.username||"U").toString().trim().substring(0,2).toUpperCase()})}),o.jsx("div",{className:"msg-text",children:S.text})]},_)}),c&&o.jsxs("div",{className:"msg msg-assistant loading",children:[o.jsx("div",{className:"logo","aria-hidden":"true",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#ffffff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-dumbbell",children:[o.jsx("path",{d:"m6.5 6.5 11 11"}),o.jsx("path",{d:"m21 21-1-1"}),o.jsx("path",{d:"m3 3 1 1"}),o.jsx("path",{d:"m18 22 4-4"}),o.jsx("path",{d:"m2 6 4-4"}),o.jsx("path",{d:"m3 10 7-7"}),o.jsx("path",{d:"m14 21 7-7"})]})}),o.jsx("div",{className:"msg-text",children:"Buddy is typing..."})]})]}),o.jsxs("div",{className:"gemini-input",children:[o.jsx("input",{value:a,onChange:S=>l(S.target.value),onKeyDown:T,placeholder:"Ask Buddy about your plan or goals...","aria-label":"Ask Gemini"}),o.jsx("button",{className:"send-btn",onClick:C,disabled:c||!a.trim(),"aria-label":"Send message",children:"Send"})]})]})}),o.jsx(bw,{open:m,summary:g?.summary||"Buddy suggests changes to your profile.",details:g,onCancel:()=>{y(!1),x(null)},onConfirm:async S=>{try{if(y(!1),!g)throw new Error("No pending action");const _=(S||[]).map(ne=>{try{if(ne.path==="workoutPlan"&&typeof ne.value=="string")try{ne.value=JSON.parse(ne.value)}catch{}}catch{}return ne}),B={...g,updates:_},F=localStorage.getItem("fitbuddy_user_data");if(!F)throw new Error("No user signed in");const L=JSON.parse(F),W=L?.data?.id??L?.id??i?.id,te=L?.data?.token??L?.token??i?.token??L?.jwt??L?.data?.jwt;if(console.debug("[GeminiChat] apply-action resolved userId:",W,"tokenPresent:",!!te),!W)throw new Error("No user id");if(!te){try{if((i?.id||"anon")==="anon")try{localStorage.setItem("fitbuddy_chat_anon",JSON.stringify(n))}catch{}}catch{}try{const ne=encodeURIComponent(window.location.pathname||"/chat");window.location.href=`/signin?returnTo=${ne}`}catch{window.location.href="/signin"}return}const Z=await fetch("/api/user/apply-action",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${te}`},body:JSON.stringify({id:W,action:B})}),ie=await Z.json();if(!Z.ok)throw ie;const{user:me}=ie,{saveUserData:Ne,saveWorkoutPlan:Oe}=await Hn(async()=>{const{saveUserData:ne,saveWorkoutPlan:z}=await Promise.resolve().then(()=>Fy);return{saveUserData:ne,saveWorkoutPlan:z}},void 0);try{me&&me.workoutPlan&&Oe(me.workoutPlan)}catch{}Ne(me,{skipBackup:!1}),window.dispatchEvent(new Event("fitbuddy-login"));const V=ie.applied||"Buddy applied the changes.",de=ie.planDiffSummary?`
Plan changes: ${ie.planDiffSummary}`:"";r(ne=>[...ne,{role:"assistant",text:V+de}])}catch(_){console.error("Failed to apply action on server:",_),r(B=>[...B,{role:"assistant",text:"Failed to apply changes on the server."}])}finally{x(null)}}})]})},Sw=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...r)=>Hn(async()=>{const{default:a}=await Promise.resolve().then(()=>Ys);return{default:a}},void 0).then(({default:a})=>a(...r)):n=fetch,(...r)=>n(...r)};class ac extends Error{constructor(n,r="FunctionsError",a){super(n),this.name=r,this.context=a}}class _w extends ac{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class df extends ac{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class hf extends ac{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Uu;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Uu||(Uu={}));var jw=function(i,n,r,a){function l(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function p(g){try{y(a.next(g))}catch(x){h(x)}}function m(g){try{y(a.throw(g))}catch(x){h(x)}}function y(g){g.done?c(g.value):l(g.value).then(p,m)}y((a=a.apply(i,n||[])).next())})};class Nw{constructor(n,{headers:r={},customFetch:a,region:l=Uu.Any}={}){this.url=n,this.headers=r,this.region=l,this.fetch=Sw(a)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,r={}){var a;return jw(this,void 0,void 0,function*(){try{const{headers:l,method:c,body:h}=r;let p={},{region:m}=r;m||(m=this.region);const y=new URL(`${this.url}/${n}`);m&&m!=="any"&&(p["x-region"]=m,y.searchParams.set("forceFunctionRegion",m));let g;h&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",g=h):typeof h=="string"?(p["Content-Type"]="text/plain",g=h):typeof FormData<"u"&&h instanceof FormData?g=h:(p["Content-Type"]="application/json",g=JSON.stringify(h)));const x=yield this.fetch(y.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:g}).catch(S=>{throw new _w(S)}),b=x.headers.get("x-relay-error");if(b&&b==="true")throw new df(x);if(!x.ok)throw new hf(x);let C=((a=x.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),T;return C==="application/json"?T=yield x.json():C==="application/octet-stream"?T=yield x.blob():C==="text/event-stream"?T=x:C==="multipart/form-data"?T=yield x.formData():T=yield x.text(),{data:T,error:null,response:x}}catch(l){return{data:null,error:l,response:l instanceof hf||l instanceof df?l.context:void 0}}})}}var St={},Ts={},Ps={},Os={},As={},Is={},Ew=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Js=Ew();const Cw=Js.fetch,Zf=Js.fetch.bind(Js),ep=Js.Headers,Tw=Js.Request,Pw=Js.Response,Ys=Object.freeze(Object.defineProperty({__proto__:null,Headers:ep,Request:Tw,Response:Pw,default:Zf,fetch:Cw},Symbol.toStringTag,{value:"Module"})),Ow=sg(Ys);var oo={},ff;function tp(){if(ff)return oo;ff=1,Object.defineProperty(oo,"__esModule",{value:!0});class i extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return oo.default=i,oo}var pf;function np(){if(pf)return Is;pf=1;var i=Is&&Is.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Is,"__esModule",{value:!0});const n=i(Ow),r=i(tp());class a{constructor(c){var h,p;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(h=c.shouldThrowOnError)!==null&&h!==void 0?h:!1,this.signal=c.signal,this.isMaybeSingle=(p=c.isMaybeSingle)!==null&&p!==void 0?p:!1,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,h){return this.headers=new Headers(this.headers),this.headers.set(c,h),this}then(c,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const p=this.fetch;let m=p(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async y=>{var g,x,b,C;let T=null,S=null,_=null,B=y.status,F=y.statusText;if(y.ok){if(this.method!=="HEAD"){const Z=await y.text();Z===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?S=Z:S=JSON.parse(Z))}const W=(x=this.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),te=(b=y.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");W&&te&&te.length>1&&(_=parseInt(te[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(T={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,_=null,B=406,F="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const W=await y.text();try{T=JSON.parse(W),Array.isArray(T)&&y.status===404&&(S=[],T=null,B=200,F="OK")}catch{y.status===404&&W===""?(B=204,F="No Content"):T={message:W}}if(T&&this.isMaybeSingle&&(!((C=T?.details)===null||C===void 0)&&C.includes("0 rows"))&&(T=null,B=200,F="OK"),T&&this.shouldThrowOnError)throw new r.default(T)}return{error:T,data:S,count:_,status:B,statusText:F}});return this.shouldThrowOnError||(m=m.catch(y=>{var g,x,b;return{error:{message:`${(g=y?.name)!==null&&g!==void 0?g:"FetchError"}: ${y?.message}`,details:`${(x=y?.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(b=y?.code)!==null&&b!==void 0?b:""}`},data:null,count:null,status:0,statusText:""}})),m.then(c,h)}returns(){return this}overrideTypes(){return this}}return Is.default=a,Is}var mf;function rp(){if(mf)return As;mf=1;var i=As&&As.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(As,"__esModule",{value:!0});const n=i(np());class r extends n.default{select(l){let c=!1;const h=(l??"*").split("").map(p=>/\s/.test(p)&&!c?"":(p==='"'&&(c=!c),p)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:c=!0,nullsFirst:h,foreignTable:p,referencedTable:m=p}={}){const y=m?`${m}.order`:"order",g=this.url.searchParams.get(y);return this.url.searchParams.set(y,`${g?`${g},`:""}${l}.${c?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:c,referencedTable:h=c}={}){const p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(p,`${l}`),this}range(l,c,{foreignTable:h,referencedTable:p=h}={}){const m=typeof p>"u"?"offset":`${p}.offset`,y=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(m,`${l}`),this.url.searchParams.set(y,`${c-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:c=!1,settings:h=!1,buffers:p=!1,wal:m=!1,format:y="text"}={}){var g;const x=[l?"analyze":null,c?"verbose":null,h?"settings":null,p?"buffers":null,m?"wal":null].filter(Boolean).join("|"),b=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${y}; for="${b}"; options=${x};`),y==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return As.default=r,As}var gf;function oc(){if(gf)return Os;gf=1;var i=Os&&Os.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Os,"__esModule",{value:!0});const n=i(rp());class r extends n.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}in(l,c){const h=Array.from(new Set(c)).map(p=>typeof p=="string"&&new RegExp("[,()]").test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(l,`in.(${h})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:h,type:p}={}){let m="";p==="plain"?m="pl":p==="phrase"?m="ph":p==="websearch"&&(m="w");const y=h===void 0?"":`(${h})`;return this.url.searchParams.append(l,`${m}fts${y}.${c}`),this}match(l){return Object.entries(l).forEach(([c,h])=>{this.url.searchParams.append(c,`eq.${h}`)}),this}not(l,c,h){return this.url.searchParams.append(l,`not.${c}.${h}`),this}or(l,{foreignTable:c,referencedTable:h=c}={}){const p=h?`${h}.or`:"or";return this.url.searchParams.append(p,`(${l})`),this}filter(l,c,h){return this.url.searchParams.append(l,`${c}.${h}`),this}}return Os.default=r,Os}var yf;function sp(){if(yf)return Ps;yf=1;var i=Ps&&Ps.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ps,"__esModule",{value:!0});const n=i(oc());class r{constructor(l,{headers:c={},schema:h,fetch:p}){this.url=l,this.headers=new Headers(c),this.schema=h,this.fetch=p}select(l,{head:c=!1,count:h}={}){const p=c?"HEAD":"GET";let m=!1;const y=(l??"*").split("").map(g=>/\s/.test(g)&&!m?"":(g==='"'&&(m=!m),g)).join("");return this.url.searchParams.set("select",y),h&&this.headers.append("Prefer",`count=${h}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:c,defaultToNull:h=!0}={}){var p;const m="POST";if(c&&this.headers.append("Prefer",`count=${c}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const y=l.reduce((g,x)=>g.concat(Object.keys(x)),[]);if(y.length>0){const g=[...new Set(y)].map(x=>`"${x}"`);this.url.searchParams.set("columns",g.join(","))}}return new n.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(l,{onConflict:c,ignoreDuplicates:h=!1,count:p,defaultToNull:m=!0}={}){var y;const g="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),p&&this.headers.append("Prefer",`count=${p}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const x=l.reduce((b,C)=>b.concat(Object.keys(C)),[]);if(x.length>0){const b=[...new Set(x)].map(C=>`"${C}"`);this.url.searchParams.set("columns",b.join(","))}}return new n.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}update(l,{count:c}={}){var h;const p="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:l}={}){var c;const h="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new n.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return Ps.default=r,Ps}var vf;function Aw(){if(vf)return Ts;vf=1;var i=Ts&&Ts.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ts,"__esModule",{value:!0});const n=i(sp()),r=i(oc());class a{constructor(c,{headers:h={},schema:p,fetch:m}={}){this.url=c,this.headers=new Headers(h),this.schemaName=p,this.fetch=m}from(c){const h=new URL(`${this.url}/${c}`);return new n.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new a(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,h={},{head:p=!1,get:m=!1,count:y}={}){var g;let x;const b=new URL(`${this.url}/rpc/${c}`);let C;p||m?(x=p?"HEAD":"GET",Object.entries(h).filter(([S,_])=>_!==void 0).map(([S,_])=>[S,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([S,_])=>{b.searchParams.append(S,_)})):(x="POST",C=h);const T=new Headers(this.headers);return y&&T.set("Prefer",`count=${y}`),new r.default({method:x,url:b,headers:T,schema:this.schemaName,body:C,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return Ts.default=a,Ts}var wf;function Iw(){if(wf)return St;wf=1;var i=St&&St.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(St,"__esModule",{value:!0}),St.PostgrestError=St.PostgrestBuilder=St.PostgrestTransformBuilder=St.PostgrestFilterBuilder=St.PostgrestQueryBuilder=St.PostgrestClient=void 0;const n=i(Aw());St.PostgrestClient=n.default;const r=i(sp());St.PostgrestQueryBuilder=r.default;const a=i(oc());St.PostgrestFilterBuilder=a.default;const l=i(rp());St.PostgrestTransformBuilder=l.default;const c=i(np());St.PostgrestBuilder=c.default;const h=i(tp());return St.PostgrestError=h.default,St.default={PostgrestClient:n.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:c.default,PostgrestError:h.default},St}var Rw=Iw();const Dw=Qu(Rw),{PostgrestClient:Lw,PostgrestQueryBuilder:Lx,PostgrestFilterBuilder:Mx,PostgrestTransformBuilder:Ux,PostgrestBuilder:Fx,PostgrestError:Wx}=Dw;class Mw{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const a=r.node,l=parseInt(a.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const a=this.getWebSocketConstructor();return new a(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Uw="2.15.5",Fw=`realtime-js/${Uw}`,Ww="1.0.0",Fu=1e4,Bw=1e3,$w=100;var Bi;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Bi||(Bi={}));var gt;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(gt||(gt={}));var xn;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(xn||(xn={}));var Wu;(function(i){i.websocket="websocket"})(Wu||(Wu={}));var Jr;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Jr||(Jr={}));class zw{constructor(){this.HEADER_LENGTH=1}decode(n,r){return n.constructor===ArrayBuffer?r(this._binaryDecode(n)):r(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const r=new DataView(n),a=new TextDecoder;return this._decodeBroadcast(n,r,a)}_decodeBroadcast(n,r,a){const l=r.getUint8(1),c=r.getUint8(2);let h=this.HEADER_LENGTH+2;const p=a.decode(n.slice(h,h+l));h=h+l;const m=a.decode(n.slice(h,h+c));h=h+c;const y=JSON.parse(a.decode(n.slice(h,n.byteLength)));return{ref:null,topic:p,event:m,payload:y}}}class ip{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var et;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(et||(et={}));const xf=(i,n,r={})=>{var a;const l=(a=r.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(n).reduce((c,h)=>(c[h]=qw(h,i,n,l),c),{})},qw=(i,n,r,a)=>{const l=n.find(p=>p.name===i),c=l?.type,h=r[i];return c&&!a.includes(c)?ap(c,h):Bu(h)},ap=(i,n)=>{if(i.charAt(0)==="_"){const r=i.slice(1,i.length);return Jw(n,r)}switch(i){case et.bool:return Hw(n);case et.float4:case et.float8:case et.int2:case et.int4:case et.int8:case et.numeric:case et.oid:return Gw(n);case et.json:case et.jsonb:return Vw(n);case et.timestamp:return Qw(n);case et.abstime:case et.date:case et.daterange:case et.int4range:case et.int8range:case et.money:case et.reltime:case et.text:case et.time:case et.timestamptz:case et.timetz:case et.tsrange:case et.tstzrange:return Bu(n);default:return Bu(n)}},Bu=i=>i,Hw=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},Gw=i=>{if(typeof i=="string"){const n=parseFloat(i);if(!Number.isNaN(n))return n}return i},Vw=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(n){return console.log(`JSON parse error: ${n}`),i}return i},Jw=(i,n)=>{if(typeof i!="string")return i;const r=i.length-1,a=i[r];if(i[0]==="{"&&a==="}"){let c;const h=i.slice(1,r);try{c=JSON.parse("["+h+"]")}catch{c=h?h.split(","):[]}return c.map(p=>ap(n,p))}return i},Qw=i=>typeof i=="string"?i.replace(" ","T"):i,op=i=>{let n=i;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"};class bu{constructor(n,r,a={},l=Fu){this.channel=n,this.event=r,this.payload=a,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var a;return this._hasReceived(n)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(a=>a.status===n).forEach(a=>a.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var bf;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(bf||(bf={}));class $i{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},l=>{const{onJoin:c,onLeave:h,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$i.syncState(this.state,l,c,h),this.pendingDiffs.forEach(m=>{this.state=$i.syncDiff(this.state,m,c,h)}),this.pendingDiffs=[],p()}),this.channel._on(a.diff,{},l=>{const{onJoin:c,onLeave:h,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=$i.syncDiff(this.state,l,c,h),p())}),this.onJoin((l,c,h)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:h})}),this.onLeave((l,c,h)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,a,l){const c=this.cloneDeep(n),h=this.transformState(r),p={},m={};return this.map(c,(y,g)=>{h[y]||(m[y]=g)}),this.map(h,(y,g)=>{const x=c[y];if(x){const b=g.map(_=>_.presence_ref),C=x.map(_=>_.presence_ref),T=g.filter(_=>C.indexOf(_.presence_ref)<0),S=x.filter(_=>b.indexOf(_.presence_ref)<0);T.length>0&&(p[y]=T),S.length>0&&(m[y]=S)}else p[y]=g}),this.syncDiff(c,{joins:p,leaves:m},a,l)}static syncDiff(n,r,a,l){const{joins:c,leaves:h}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),l||(l=()=>{}),this.map(c,(p,m)=>{var y;const g=(y=n[p])!==null&&y!==void 0?y:[];if(n[p]=this.cloneDeep(m),g.length>0){const x=n[p].map(C=>C.presence_ref),b=g.filter(C=>x.indexOf(C.presence_ref)<0);n[p].unshift(...b)}a(p,g,m)}),this.map(h,(p,m)=>{let y=n[p];if(!y)return;const g=m.map(x=>x.presence_ref);y=y.filter(x=>g.indexOf(x.presence_ref)<0),n[p]=y,l(p,y,m),y.length===0&&delete n[p]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(a=>r(a,n[a]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,a)=>{const l=n[a];return"metas"in l?r[a]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[a]=l,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var kf;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(kf||(kf={}));var zi;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(zi||(zi={}));var $n;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})($n||($n={}));class lc{constructor(n,r={config:{}},a){this.topic=n,this.params=r,this.socket=a,this.bindings={},this.state=gt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new bu(this,xn.join,this.params,this.timeout),this.rejoinTimer=new ip(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=gt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=gt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xn.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new $i(this),this.broadcastEndpointURL=op(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(n,r=this.timeout){var a,l,c;if(this.socket.isConnected()||this.socket.connect(),this.state==gt.closed){const{config:{broadcast:h,presence:p,private:m}}=this.params,y=(l=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(C=>C.filter))!==null&&l!==void 0?l:[],g=!!this.bindings[zi.PRESENCE]&&this.bindings[zi.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,x={},b={broadcast:h,presence:Object.assign(Object.assign({},p),{enabled:g}),postgres_changes:y,private:m};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(C=>n?.($n.CHANNEL_ERROR,C)),this._onClose(()=>n?.($n.CLOSED)),this.updateJoinPayload(Object.assign({config:b},x)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:C})=>{var T;if(this.socket.setAuth(),C===void 0){n?.($n.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,_=(T=S?.length)!==null&&T!==void 0?T:0,B=[];for(let F=0;F<_;F++){const L=S[F],{filter:{event:W,schema:te,table:Z,filter:ie}}=L,me=C&&C[F];if(me&&me.event===W&&me.schema===te&&me.table===Z&&me.filter===ie)B.push(Object.assign(Object.assign({},L),{id:me.id}));else{this.unsubscribe(),this.state=gt.errored,n?.($n.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=B,n&&n($n.SUBSCRIBED);return}}).receive("error",C=>{this.state=gt.errored,n?.($n.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(C).join(", ")||"error")))}).receive("timeout",()=>{n?.($n.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,a){return this.state===gt.joined&&n===zi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,r,a)}async send(n,r={}){var a,l;if(!this._canPush()&&n.type==="broadcast"){const{event:c,payload:h}=n,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:h,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((l=y.body)===null||l===void 0?void 0:l.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var h,p,m;const y=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((m=(p=(h=this.params)===null||h===void 0?void 0:h.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&c("ok"),y.receive("ok",()=>c("ok")),y.receive("error",()=>c("error")),y.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=gt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xn.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(l=>{a=new bu(this,xn.leave,{},n),a.receive("ok",()=>{r(),l("ok")}).receive("timeout",()=>{r(),l("timed out")}).receive("error",()=>{l("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=gt.closed,this.bindings={}}async _fetchWithTimeout(n,r,a){const l=new AbortController,c=setTimeout(()=>l.abort(),a),h=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:l.signal}));return clearTimeout(c),h}_push(n,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new bu(this,n,r,a);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>$w){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,a){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,a){var l,c;const h=n.toLocaleLowerCase(),{close:p,error:m,leave:y,join:g}=xn;if(a&&[p,m,y,g].indexOf(h)>=0&&a!==this._joinRef())return;let b=this._onMessage(h,r,a);if(r&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(C=>{var T,S,_;return((T=C.filter)===null||T===void 0?void 0:T.event)==="*"||((_=(S=C.filter)===null||S===void 0?void 0:S.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===h}).map(C=>C.callback(b,a)):(c=this.bindings[h])===null||c===void 0||c.filter(C=>{var T,S,_,B,F,L;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in C){const W=C.id,te=(T=C.filter)===null||T===void 0?void 0:T.event;return W&&((S=r.ids)===null||S===void 0?void 0:S.includes(W))&&(te==="*"||te?.toLocaleLowerCase()===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const W=(F=(B=C?.filter)===null||B===void 0?void 0:B.event)===null||F===void 0?void 0:F.toLocaleLowerCase();return W==="*"||W===((L=r?.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===h}).map(C=>{if(typeof b=="object"&&"ids"in b){const T=b.data,{schema:S,table:_,commit_timestamp:B,type:F,errors:L}=T;b=Object.assign(Object.assign({},{schema:S,table:_,commit_timestamp:B,eventType:F,new:{},old:{},errors:L}),this._getPayloadRecords(T))}C.callback(b,a)})}_isClosed(){return this.state===gt.closed}_isJoined(){return this.state===gt.joined}_isJoining(){return this.state===gt.joining}_isLeaving(){return this.state===gt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,a){const l=n.toLocaleLowerCase(),c={type:l,filter:r,callback:a};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(n,r){const a=n.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===a&&lc.isEqual(l.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const a in n)if(n[a]!==r[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(xn.close,{},n)}_onError(n){this._on(xn.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=gt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=xf(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=xf(n.columns,n.old_record)),r}}const ku=()=>{},lo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Kw=[1e3,2e3,5e3,1e4],Yw=1e4,Xw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Zw{constructor(n,r){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Fu,this.transport=null,this.heartbeatIntervalMs=lo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ku,this.ref=0,this.reconnectTimer=null,this.logger=ku,this.conn=null,this.sendBuffer=[],this.serializer=new zw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>{let c;return l?c=l:typeof fetch>"u"?c=(...h)=>Hn(async()=>{const{default:p}=await Promise.resolve().then(()=>Ys);return{default:p}},void 0).then(({default:p})=>p(...h)).catch(p=>{throw new Error(`Failed to load @supabase/node-fetch: ${p.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):c=fetch,(...h)=>c(...h)},!(!((a=r?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${Wu.websocket}`,this.httpEndpoint=op(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Mw.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ww}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},n?this.conn.close(n,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,a){this.logger(n,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Bi.connecting:return Jr.Connecting;case Bi.open:return Jr.Open;case Bi.closing:return Jr.Closing;default:return Jr.Closed}}isConnected(){return this.connectionState()===Jr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const a=`realtime:${n}`,l=this.getChannels().find(c=>c.topic===a);if(l)return l;{const c=new lc(`realtime:${n}`,r,this);return this.channels.push(c),c}}push(n){const{topic:r,event:a,payload:l,ref:c}=n,h=()=>{this.encode(n,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${r} ${a} (${c})`,l),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Bw,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},lo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(a=>a.topic===n&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(y){this.log("error","error in heartbeat callback",y)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:l,payload:c,ref:h}=r,p=h?`(${h})`:"",m=c.status||"";this.log("receive",`${m} ${a} ${l} ${p}`.trim(),c),this.channels.filter(y=>y._isMember(a)).forEach(y=>y._trigger(l,c,h)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(xn.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const a=n.match(/\?/)?"&":"?",l=new URLSearchParams(r);return`${n}${a}${l}`}_workerObjectUrl(n){let r;if(n)r=n;else{const a=new Blob([Xw],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r;n?r=n:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const l={access_token:r,version:Fw};r&&a.updateJoinPayload(l),a.joinedOnce&&a._isJoined()&&a._push(xn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(a=>{try{a(r)}catch(l){this.log("error",`error in ${n} callback`,l)}})}catch(a){this.log("error",`error triggering ${n} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new ip(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},lo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,a,l,c,h,p,m,y,g;if(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(a=n?.timeout)!==null&&a!==void 0?a:Fu,this.heartbeatIntervalMs=(l=n?.heartbeatIntervalMs)!==null&&l!==void 0?l:lo.HEARTBEAT_INTERVAL,this.worker=(c=n?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(h=n?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(p=n?.heartbeatCallback)!==null&&p!==void 0?p:ku,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=n?.reconnectAfterMs)!==null&&m!==void 0?m:x=>Kw[x-1]||Yw,this.encode=(y=n?.encode)!==null&&y!==void 0?y:(x,b)=>b(JSON.stringify(x)),this.decode=(g=n?.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class uc extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function yt(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class e0 extends uc{constructor(n,r,a){super(n),this.name="StorageApiError",this.status=r,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class $u extends uc{constructor(n,r){super(n),this.name="StorageUnknownError",this.originalError=r}}var t0=function(i,n,r,a){function l(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function p(g){try{y(a.next(g))}catch(x){h(x)}}function m(g){try{y(a.throw(g))}catch(x){h(x)}}function y(g){g.done?c(g.value):l(g.value).then(p,m)}y((a=a.apply(i,n||[])).next())})};const lp=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...r)=>Hn(async()=>{const{default:a}=await Promise.resolve().then(()=>Ys);return{default:a}},void 0).then(({default:a})=>a(...r)):n=fetch,(...r)=>n(...r)},n0=()=>t0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Hn(()=>Promise.resolve().then(()=>Ys),void 0)).Response:Response}),zu=i=>{if(Array.isArray(i))return i.map(r=>zu(r));if(typeof i=="function"||i!==Object(i))return i;const n={};return Object.entries(i).forEach(([r,a])=>{const l=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[l]=zu(a)}),n},r0=i=>{if(typeof i!="object"||i===null)return!1;const n=Object.getPrototypeOf(i);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)};var es=function(i,n,r,a){function l(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function p(g){try{y(a.next(g))}catch(x){h(x)}}function m(g){try{y(a.throw(g))}catch(x){h(x)}}function y(g){g.done?c(g.value):l(g.value).then(p,m)}y((a=a.apply(i,n||[])).next())})};const Su=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),s0=(i,n,r)=>es(void 0,void 0,void 0,function*(){const a=yield n0();i instanceof a&&!r?.noResolveJson?i.json().then(l=>{const c=i.status||500,h=l?.statusCode||c+"";n(new e0(Su(l),c,h))}).catch(l=>{n(new $u(Su(l),l))}):n(new $u(Su(i),i))}),i0=(i,n,r,a)=>{const l={method:i,headers:n?.headers||{}};return i==="GET"||!a?l:(r0(a)?(l.headers=Object.assign({"Content-Type":"application/json"},n?.headers),l.body=JSON.stringify(a)):l.body=a,n?.duplex&&(l.duplex=n.duplex),Object.assign(Object.assign({},l),r))};function Ki(i,n,r,a,l,c){return es(this,void 0,void 0,function*(){return new Promise((h,p)=>{i(r,i0(n,a,l,c)).then(m=>{if(!m.ok)throw m;return a?.noResolveJson?m:m.json()}).then(m=>h(m)).catch(m=>s0(m,p,a))})})}function ko(i,n,r,a){return es(this,void 0,void 0,function*(){return Ki(i,"GET",n,r,a)})}function Nn(i,n,r,a,l){return es(this,void 0,void 0,function*(){return Ki(i,"POST",n,a,l,r)})}function qu(i,n,r,a,l){return es(this,void 0,void 0,function*(){return Ki(i,"PUT",n,a,l,r)})}function a0(i,n,r,a){return es(this,void 0,void 0,function*(){return Ki(i,"HEAD",n,Object.assign(Object.assign({},r),{noResolveJson:!0}),a)})}function up(i,n,r,a,l){return es(this,void 0,void 0,function*(){return Ki(i,"DELETE",n,a,l,r)})}var Lt=function(i,n,r,a){function l(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function p(g){try{y(a.next(g))}catch(x){h(x)}}function m(g){try{y(a.throw(g))}catch(x){h(x)}}function y(g){g.done?c(g.value):l(g.value).then(p,m)}y((a=a.apply(i,n||[])).next())})};const o0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Sf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class l0{constructor(n,r={},a,l){this.shouldThrowOnError=!1,this.url=n,this.headers=r,this.bucketId=a,this.fetch=lp(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,r,a,l){return Lt(this,void 0,void 0,function*(){try{let c;const h=Object.assign(Object.assign({},Sf),l);let p=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),m&&c.append("metadata",this.encodeMetadata(m)),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",h.cacheControl),m&&c.append("metadata",this.encodeMetadata(m))):(c=a,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType,m&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),l?.headers&&(p=Object.assign(Object.assign({},p),l.headers));const y=this._removeEmptyFolders(r),g=this._getFinalPath(y),x=yield(n=="PUT"?qu:Nn)(this.fetch,`${this.url}/object/${g}`,c,Object.assign({headers:p},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:y,id:x.Id,fullPath:x.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(yt(c))return{data:null,error:c};throw c}})}upload(n,r,a){return Lt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,r,a)})}uploadToSignedUrl(n,r,a,l){return Lt(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(n),h=this._getFinalPath(c),p=new URL(this.url+`/object/upload/sign/${h}`);p.searchParams.set("token",r);try{let m;const y=Object.assign({upsert:Sf.upsert},l),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&a instanceof Blob?(m=new FormData,m.append("cacheControl",y.cacheControl),m.append("",a)):typeof FormData<"u"&&a instanceof FormData?(m=a,m.append("cacheControl",y.cacheControl)):(m=a,g["cache-control"]=`max-age=${y.cacheControl}`,g["content-type"]=y.contentType);const x=yield qu(this.fetch,p.toString(),m,{headers:g});return{data:{path:c,fullPath:x.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(yt(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(n,r){return Lt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(n);const l=Object.assign({},this.headers);r?.upsert&&(l["x-upsert"]="true");const c=yield Nn(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:l}),h=new URL(this.url+c.url),p=h.searchParams.get("token");if(!p)throw new uc("No token returned by API");return{data:{signedUrl:h.toString(),path:n,token:p},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}update(n,r,a){return Lt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,r,a)})}move(n,r,a){return Lt(this,void 0,void 0,function*(){try{return{data:yield Nn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:a?.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(yt(l))return{data:null,error:l};throw l}})}copy(n,r,a){return Lt(this,void 0,void 0,function*(){try{return{data:{path:(yield Nn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:a?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(yt(l))return{data:null,error:l};throw l}})}createSignedUrl(n,r,a){return Lt(this,void 0,void 0,function*(){try{let l=this._getFinalPath(n),c=yield Nn(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:r},a?.transform?{transform:a.transform}:{}),{headers:this.headers});const h=a?.download?`&download=${a.download===!0?"":a.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${h}`)},{data:c,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(yt(l))return{data:null,error:l};throw l}})}createSignedUrls(n,r,a){return Lt(this,void 0,void 0,function*(){try{const l=yield Nn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:n},{headers:this.headers}),c=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{data:l.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${c}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(yt(l))return{data:null,error:l};throw l}})}download(n,r){return Lt(this,void 0,void 0,function*(){const l=typeof r?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(r?.transform||{}),h=c?`?${c}`:"";try{const p=this._getFinalPath(n);return{data:yield(yield ko(this.fetch,`${this.url}/${l}/${p}${h}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(yt(p))return{data:null,error:p};throw p}})}info(n){return Lt(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{const a=yield ko(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:zu(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}exists(n){return Lt(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{return yield a0(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a)&&a instanceof $u){const l=a.originalError;if([400,404].includes(l?.status))return{data:!1,error:a}}throw a}})}getPublicUrl(n,r){const a=this._getFinalPath(n),l=[],c=r?.download?`download=${r.download===!0?"":r.download}`:"";c!==""&&l.push(c);const p=typeof r?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(r?.transform||{});m!==""&&l.push(m);let y=l.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${a}${y}`)}}}remove(n){return Lt(this,void 0,void 0,function*(){try{return{data:yield up(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}list(n,r,a){return Lt(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},o0),r),{prefix:n||""});return{data:yield Nn(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},a),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(yt(l))return{data:null,error:l};throw l}})}listV2(n,r){return Lt(this,void 0,void 0,function*(){try{const a=Object.assign({},n);return{data:yield Nn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const r=[];return n.width&&r.push(`width=${n.width}`),n.height&&r.push(`height=${n.height}`),n.resize&&r.push(`resize=${n.resize}`),n.format&&r.push(`format=${n.format}`),n.quality&&r.push(`quality=${n.quality}`),r.join("&")}}const u0="2.12.1",c0={"X-Client-Info":`storage-js/${u0}`};var Rs=function(i,n,r,a){function l(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function p(g){try{y(a.next(g))}catch(x){h(x)}}function m(g){try{y(a.throw(g))}catch(x){h(x)}}function y(g){g.done?c(g.value):l(g.value).then(p,m)}y((a=a.apply(i,n||[])).next())})};class d0{constructor(n,r={},a,l){this.shouldThrowOnError=!1;const c=new URL(n);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href,this.headers=Object.assign(Object.assign({},c0),r),this.fetch=lp(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Rs(this,void 0,void 0,function*(){try{return{data:yield ko(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yt(n))return{data:null,error:n};throw n}})}getBucket(n){return Rs(this,void 0,void 0,function*(){try{return{data:yield ko(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}createBucket(n,r={public:!1}){return Rs(this,void 0,void 0,function*(){try{return{data:yield Nn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}updateBucket(n,r){return Rs(this,void 0,void 0,function*(){try{return{data:yield qu(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}emptyBucket(n){return Rs(this,void 0,void 0,function*(){try{return{data:yield Nn(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}deleteBucket(n){return Rs(this,void 0,void 0,function*(){try{return{data:yield up(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}}class h0 extends d0{constructor(n,r={},a,l){super(n,r,a,l)}from(n){return new l0(this.url,this.headers,n,this.fetch)}}const f0="2.57.4";let Fi="";typeof Deno<"u"?Fi="deno":typeof document<"u"?Fi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Fi="react-native":Fi="node";const p0={"X-Client-Info":`supabase-js-${Fi}/${f0}`},m0={headers:p0},g0={schema:"public"},y0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},v0={};var w0=function(i,n,r,a){function l(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function p(g){try{y(a.next(g))}catch(x){h(x)}}function m(g){try{y(a.throw(g))}catch(x){h(x)}}function y(g){g.done?c(g.value):l(g.value).then(p,m)}y((a=a.apply(i,n||[])).next())})};const x0=i=>{let n;return i?n=i:typeof fetch>"u"?n=Zf:n=fetch,(...r)=>n(...r)},b0=()=>typeof Headers>"u"?ep:Headers,k0=(i,n,r)=>{const a=x0(r),l=b0();return(c,h)=>w0(void 0,void 0,void 0,function*(){var p;const m=(p=yield n())!==null&&p!==void 0?p:i;let y=new l(h?.headers);return y.has("apikey")||y.set("apikey",i),y.has("Authorization")||y.set("Authorization",`Bearer ${m}`),a(c,Object.assign(Object.assign({},h),{headers:y}))})};var S0=function(i,n,r,a){function l(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function p(g){try{y(a.next(g))}catch(x){h(x)}}function m(g){try{y(a.throw(g))}catch(x){h(x)}}function y(g){g.done?c(g.value):l(g.value).then(p,m)}y((a=a.apply(i,n||[])).next())})};function _0(i){return i.endsWith("/")?i:i+"/"}function j0(i,n){var r,a;const{db:l,auth:c,realtime:h,global:p}=i,{db:m,auth:y,realtime:g,global:x}=n,b={db:Object.assign(Object.assign({},m),l),auth:Object.assign(Object.assign({},y),c),realtime:Object.assign(Object.assign({},g),h),storage:{},global:Object.assign(Object.assign(Object.assign({},x),p),{headers:Object.assign(Object.assign({},(r=x?.headers)!==null&&r!==void 0?r:{}),(a=p?.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>S0(this,void 0,void 0,function*(){return""})};return i.accessToken?b.accessToken=i.accessToken:delete b.accessToken,b}function N0(i){const n=i?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(_0(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const cp="2.71.1",Ws=30*1e3,Hu=3,_u=Hu*Ws,E0="http://localhost:9999",C0="supabase.auth.token",T0={"X-Client-Info":`gotrue-js/${cp}`},Gu="X-Supabase-Api-Version",dp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},P0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,O0=600*1e3;class cc extends Error{constructor(n,r,a){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function De(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class A0 extends cc{constructor(n,r,a){super(n,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function I0(i){return De(i)&&i.name==="AuthApiError"}class hp extends cc{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class Nr extends cc{constructor(n,r,a,l){super(n,a,l),this.name=r,this.status=a}}class xr extends Nr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function R0(i){return De(i)&&i.name==="AuthSessionMissingError"}class uo extends Nr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class co extends Nr{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class ho extends Nr{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function D0(i){return De(i)&&i.name==="AuthImplicitGrantRedirectError"}class _f extends Nr{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Vu extends Nr{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function ju(i){return De(i)&&i.name==="AuthRetryableFetchError"}class jf extends Nr{constructor(n,r,a){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class Ju extends Nr{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const So="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Nf=` 	
\r=`.split(""),L0=(()=>{const i=new Array(128);for(let n=0;n<i.length;n+=1)i[n]=-1;for(let n=0;n<Nf.length;n+=1)i[Nf[n].charCodeAt(0)]=-2;for(let n=0;n<So.length;n+=1)i[So[n].charCodeAt(0)]=n;return i})();function Ef(i,n,r){if(i!==null)for(n.queue=n.queue<<8|i,n.queuedBits+=8;n.queuedBits>=6;){const a=n.queue>>n.queuedBits-6&63;r(So[a]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const a=n.queue>>n.queuedBits-6&63;r(So[a]),n.queuedBits-=6}}function fp(i,n,r){const a=L0[i];if(a>-1)for(n.queue=n.queue<<6|a,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Cf(i){const n=[],r=h=>{n.push(String.fromCodePoint(h))},a={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=h=>{F0(h,a,r)};for(let h=0;h<i.length;h+=1)fp(i.charCodeAt(h),l,c);return n.join("")}function M0(i,n){if(i<=127){n(i);return}else if(i<=2047){n(192|i>>6),n(128|i&63);return}else if(i<=65535){n(224|i>>12),n(128|i>>6&63),n(128|i&63);return}else if(i<=1114111){n(240|i>>18),n(128|i>>12&63),n(128|i>>6&63),n(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function U0(i,n){for(let r=0;r<i.length;r+=1){let a=i.charCodeAt(r);if(a>55295&&a<=56319){const l=(a-55296)*1024&65535;a=(i.charCodeAt(r+1)-56320&65535|l)+65536,r+=1}M0(a,n)}}function F0(i,n,r){if(n.utf8seq===0){if(i<=127){r(i);return}for(let a=1;a<6;a+=1)if((i>>7-a&1)===0){n.utf8seq=a;break}if(n.utf8seq===2)n.codepoint=i&31;else if(n.utf8seq===3)n.codepoint=i&15;else if(n.utf8seq===4)n.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|i&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function W0(i){const n=[],r={queue:0,queuedBits:0},a=l=>{n.push(l)};for(let l=0;l<i.length;l+=1)fp(i.charCodeAt(l),r,a);return new Uint8Array(n)}function B0(i){const n=[];return U0(i,r=>n.push(r)),new Uint8Array(n)}function $0(i){const n=[],r={queue:0,queuedBits:0},a=l=>{n.push(l)};return i.forEach(l=>Ef(l,r,a)),Ef(null,r,a),n.join("")}function z0(i){return Math.round(Date.now()/1e3)+i}function q0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const n=Math.random()*16|0;return(i=="x"?n:n&3|8).toString(16)})}const wn=()=>typeof window<"u"&&typeof document<"u",qr={tested:!1,writable:!1},pp=()=>{if(!wn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(qr.tested)return qr.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),qr.tested=!0,qr.writable=!0}catch{qr.tested=!0,qr.writable=!1}return qr.writable};function H0(i){const n={},r=new URL(i);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((l,c)=>{n[c]=l})}catch{}return r.searchParams.forEach((a,l)=>{n[l]=a}),n}const mp=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...r)=>Hn(async()=>{const{default:a}=await Promise.resolve().then(()=>Ys);return{default:a}},void 0).then(({default:a})=>a(...r)):n=fetch,(...r)=>n(...r)},G0=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Bs=async(i,n,r)=>{await i.setItem(n,JSON.stringify(r))},Hr=async(i,n)=>{const r=await i.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},wr=async(i,n)=>{await i.removeItem(n)};class Co{constructor(){this.promise=new Co.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}Co.promiseConstructor=Promise;function Nu(i){const n=i.split(".");if(n.length!==3)throw new Ju("Invalid JWT structure");for(let a=0;a<n.length;a++)if(!P0.test(n[a]))throw new Ju("JWT not in base64url format");return{header:JSON.parse(Cf(n[0])),payload:JSON.parse(Cf(n[1])),signature:W0(n[2]),raw:{header:n[0],payload:n[1]}}}async function V0(i){return await new Promise(n=>{setTimeout(()=>n(null),i)})}function J0(i,n){return new Promise((a,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const h=await i(c);if(!n(c,null,h)){a(h);return}}catch(h){if(!n(c,h)){l(h);return}}})()})}function Q0(i){return("0"+i.toString(16)).substr(-2)}function K0(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let l="";for(let c=0;c<56;c++)l+=r.charAt(Math.floor(Math.random()*a));return l}return crypto.getRandomValues(n),Array.from(n,Q0).join("")}async function Y0(i){const r=new TextEncoder().encode(i),a=await crypto.subtle.digest("SHA-256",r),l=new Uint8Array(a);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function X0(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const r=await Y0(i);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ds(i,n,r=!1){const a=K0();let l=a;r&&(l+="/PASSWORD_RECOVERY"),await Bs(i,`${n}-code-verifier`,l);const c=await X0(a);return[c,a===c?"plain":"s256"]}const Z0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ex(i){const n=i.headers.get(Gu);if(!n||!n.match(Z0))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function tx(i){if(!i)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(i<=n)throw new Error("JWT has expired")}function nx(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const rx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ls(i){if(!rx.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Eu(){const i={};return new Proxy(i,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Tf(i){return JSON.parse(JSON.stringify(i))}var sx=function(i,n){var r={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&n.indexOf(a)<0&&(r[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(i);l<a.length;l++)n.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(i,a[l])&&(r[a[l]]=i[a[l]]);return r};const Vr=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),ix=[502,503,504];async function Pf(i){var n;if(!G0(i))throw new Vu(Vr(i),0);if(ix.includes(i.status))throw new Vu(Vr(i),i.status);let r;try{r=await i.json()}catch(c){throw new hp(Vr(c),c)}let a;const l=ex(i);if(l&&l.getTime()>=dp["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new jf(Vr(r),i.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(a==="session_not_found")throw new xr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,h)=>c&&typeof h=="string",!0))throw new jf(Vr(r),i.status,r.weak_password.reasons);throw new A0(Vr(r),i.status||500,a)}const ax=(i,n,r,a)=>{const l={method:i,headers:n?.headers||{}};return i==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),l.body=JSON.stringify(a),Object.assign(Object.assign({},l),r))};async function Fe(i,n,r,a){var l;const c=Object.assign({},a?.headers);c[Gu]||(c[Gu]=dp["2024-01-01"].name),a?.jwt&&(c.Authorization=`Bearer ${a.jwt}`);const h=(l=a?.query)!==null&&l!==void 0?l:{};a?.redirectTo&&(h.redirect_to=a.redirectTo);const p=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=await ox(i,n,r+p,{headers:c,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(m):{data:Object.assign({},m),error:null}}async function ox(i,n,r,a,l,c){const h=ax(n,a,l,c);let p;try{p=await i(r,Object.assign({},h))}catch(m){throw console.error(m),new Vu(Vr(m),0)}if(p.ok||await Pf(p),a?.noResolveJson)return p;try{return await p.json()}catch(m){await Pf(m)}}function Bn(i){var n;let r=null;dx(i)&&(r=Object.assign({},i),i.expires_at||(r.expires_at=z0(i.expires_in)));const a=(n=i.user)!==null&&n!==void 0?n:i;return{data:{session:r,user:a},error:null}}function Of(i){const n=Bn(i);return!n.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(n.data.weak_password=i.weak_password),n}function kr(i){var n;return{data:{user:(n=i.user)!==null&&n!==void 0?n:i},error:null}}function lx(i){return{data:i,error:null}}function ux(i){const{action_link:n,email_otp:r,hashed_token:a,redirect_to:l,verification_type:c}=i,h=sx(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:r,hashed_token:a,redirect_to:l,verification_type:c},m=Object.assign({},h);return{data:{properties:p,user:m},error:null}}function cx(i){return i}function dx(i){return i.access_token&&i.refresh_token&&i.expires_in}const Cu=["global","local","others"];var hx=function(i,n){var r={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&n.indexOf(a)<0&&(r[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(i);l<a.length;l++)n.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(i,a[l])&&(r[a[l]]=i[a[l]]);return r};class fx{constructor({url:n="",headers:r={},fetch:a}){this.url=n,this.headers=r,this.fetch=mp(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,r=Cu[0]){if(Cu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Cu.join(", ")}`);try{return await Fe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(a){if(De(a))return{data:null,error:a};throw a}}async inviteUserByEmail(n,r={}){try{return await Fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:kr})}catch(a){if(De(a))return{data:{user:null},error:a};throw a}}async generateLink(n){try{const{options:r}=n,a=hx(n,["options"]),l=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(l.new_email=a?.newEmail,delete l.newEmail),await Fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:ux,redirectTo:r?.redirectTo})}catch(r){if(De(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await Fe(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:kr})}catch(r){if(De(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,a,l,c,h,p,m;try{const y={nextPage:null,lastPage:0,total:0},g=await Fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(c=(l=n?.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:cx});if(g.error)throw g.error;const x=await g.json(),b=(h=g.headers.get("x-total-count"))!==null&&h!==void 0?h:0,C=(m=(p=g.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return C.length>0&&(C.forEach(T=>{const S=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(T.split(";")[1].split("=")[1]);y[`${_}Page`]=S}),y.total=parseInt(b)),{data:Object.assign(Object.assign({},x),y),error:null}}catch(y){if(De(y))return{data:{users:[]},error:y};throw y}}async getUserById(n){Ls(n);try{return await Fe(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:kr})}catch(r){if(De(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){Ls(n);try{return await Fe(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:kr})}catch(a){if(De(a))return{data:{user:null},error:a};throw a}}async deleteUser(n,r=!1){Ls(n);try{return await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:kr})}catch(a){if(De(a))return{data:{user:null},error:a};throw a}}async _listFactors(n){Ls(n.userId);try{const{data:r,error:a}=await Fe(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:r,error:a}}catch(r){if(De(r))return{data:null,error:r};throw r}}async _deleteFactor(n){Ls(n.userId),Ls(n.id);try{return{data:await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}}}function Af(i={}){return{getItem:n=>i[n]||null,setItem:(n,r)=>{i[n]=r},removeItem:n=>{delete i[n]}}}function px(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ms={debug:!!(globalThis&&pp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gp extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class mx extends gp{}async function gx(i,n,r){Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,n);const a=new globalThis.AbortController;return n>0&&setTimeout(()=>{a.abort(),Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async l=>{if(l){Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,l.name);try{return await r()}finally{Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,l.name)}}else{if(n===0)throw Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new mx(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Ms.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}px();const yx={url:E0,storageKey:C0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:T0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function If(i,n,r){return await r()}const Us={};class Vi{constructor(n){var r,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Vi.nextInstanceID,Vi.nextInstanceID+=1,this.instanceID>0&&wn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},yx),n);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new fx({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=mp(l.fetch),this.lock=l.lock||If,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:wn()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=gx:this.lock=If,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:pp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Af(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Af(this.memoryStorage)),wn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}get jwks(){var n,r;return(r=(n=Us[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Us[this.storageKey]=Object.assign(Object.assign({},Us[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Us[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Us[this.storageKey]=Object.assign(Object.assign({},Us[this.storageKey]),{cachedAt:n})}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${cp}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const r=H0(window.location.href);let a="none";if(this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce"),wn()&&this.detectSessionInUrl&&a!=="none"){const{data:l,error:c}=await this._getSessionFromURL(r,a);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),D0(c)){const m=(n=c.details)===null||n===void 0?void 0:n.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:h,redirectType:p}=l;return this._debug("#_initialize()","detected session in URL",h,"redirect type",p),await this._saveSession(h),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return De(r)?{error:r}:{error:new hp("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,a,l;try{const c=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(l=n?.options)===null||l===void 0?void 0:l.captchaToken}},xform:Bn}),{data:h,error:p}=c;if(p||!h)return{data:{user:null,session:null},error:p};const m=h.session,y=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:y,session:m},error:null}}catch(c){if(De(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(n){var r,a,l;try{let c;if("email"in n){const{email:g,password:x,options:b}=n;let C=null,T=null;this.flowType==="pkce"&&([C,T]=await Ds(this.storage,this.storageKey)),c=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:g,password:x,data:(r=b?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:C,code_challenge_method:T},xform:Bn})}else if("phone"in n){const{phone:g,password:x,options:b}=n;c=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:x,data:(a=b?.data)!==null&&a!==void 0?a:{},channel:(l=b?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Bn})}else throw new co("You must provide either an email or phone number and a password");const{data:h,error:p}=c;if(p||!h)return{data:{user:null,session:null},error:p};const m=h.session,y=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:y,session:m},error:null}}catch(c){if(De(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(n){try{let r;if("email"in n){const{email:c,password:h,options:p}=n;r=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Of})}else if("phone"in n){const{phone:c,password:h,options:p}=n;r=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Of})}else throw new co("You must provide either an email or phone number and a password");const{data:a,error:l}=r;return l?{data:{user:null,session:null},error:l}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new uo}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:l})}catch(r){if(De(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(n){var r,a,l,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=n.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=n.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;if(r==="solana")return await this.signInWithSolana(n);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(n){var r,a,l,c,h,p,m,y,g,x,b,C;let T,S;if("message"in n)T=n.message,S=n.signature;else{const{chain:_,wallet:B,statement:F,options:L}=n;let W;if(wn())if(typeof B=="object")W=B;else{const Z=window;if("solana"in Z&&typeof Z.solana=="object"&&("signIn"in Z.solana&&typeof Z.solana.signIn=="function"||"signMessage"in Z.solana&&typeof Z.solana.signMessage=="function"))W=Z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof B!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");W=B}const te=new URL((r=L?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in W&&W.signIn){const Z=await W.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L?.signInWithSolana),{version:"1",domain:te.host,uri:te.href}),F?{statement:F}:null));let ie;if(Array.isArray(Z)&&Z[0]&&typeof Z[0]=="object")ie=Z[0];else if(Z&&typeof Z=="object"&&"signedMessage"in Z&&"signature"in Z)ie=Z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ie&&"signature"in ie&&(typeof ie.signedMessage=="string"||ie.signedMessage instanceof Uint8Array)&&ie.signature instanceof Uint8Array)T=typeof ie.signedMessage=="string"?ie.signedMessage:new TextDecoder().decode(ie.signedMessage),S=ie.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in W)||typeof W.signMessage!="function"||!("publicKey"in W)||typeof W!="object"||!W.publicKey||!("toBase58"in W.publicKey)||typeof W.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${te.host} wants you to sign in with your Solana account:`,W.publicKey.toBase58(),...F?["",F,""]:[""],"Version: 1",`URI: ${te.href}`,`Issued At: ${(l=(a=L?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((c=L?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((h=L?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((p=L?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((m=L?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((y=L?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((x=(g=L?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||x===void 0)&&x.length?["Resources",...L.signInWithSolana.resources.map(ie=>`- ${ie}`)]:[]].join(`
`);const Z=await W.signMessage(new TextEncoder().encode(T),"utf8");if(!Z||!(Z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=Z}}try{const{data:_,error:B}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:$0(S)},!((b=n.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(C=n.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:Bn});if(B)throw B;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new uo}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:B})}catch(_){if(De(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(n){const r=await Hr(this.storage,`${this.storageKey}-code-verifier`),[a,l]=(r??"").split("/");try{const{data:c,error:h}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:a},xform:Bn});if(await wr(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new uo}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:h})}catch(c){if(De(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(n){try{const{options:r,provider:a,token:l,access_token:c,nonce:h}=n,p=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:l,access_token:c,nonce:h,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Bn}),{data:m,error:y}=p;return y?{data:{user:null,session:null},error:y}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new uo}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:y})}catch(r){if(De(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(n){var r,a,l,c,h;try{if("email"in n){const{email:p,options:m}=n;let y=null,g=null;this.flowType==="pkce"&&([y,g]=await Ds(this.storage,this.storageKey));const{error:x}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(r=m?.data)!==null&&r!==void 0?r:{},create_user:(a=m?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:y,code_challenge_method:g},redirectTo:m?.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in n){const{phone:p,options:m}=n,{data:y,error:g}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(l=m?.data)!==null&&l!==void 0?l:{},create_user:(c=m?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(h=m?.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:y?.message_id},error:g}}throw new co("You must provide either an email or phone number.")}catch(p){if(De(p))return{data:{user:null,session:null},error:p};throw p}}async verifyOtp(n){var r,a;try{let l,c;"options"in n&&(l=(r=n.options)===null||r===void 0?void 0:r.redirectTo,c=(a=n.options)===null||a===void 0?void 0:a.captchaToken);const{data:h,error:p}=await Fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:Bn});if(p)throw p;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,y=h.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:y,session:m},error:null}}catch(l){if(De(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(n){var r,a,l;try{let c=null,h=null;return this.flowType==="pkce"&&([c,h]=await Ds(this.storage,this.storageKey)),await Fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(a=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((l=n?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:h}),headers:this.headers,xform:lx})}catch(c){if(De(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;if(a)throw a;if(!r)throw new xr;const{error:l}=await Fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:l}})}catch(n){if(De(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:a,type:l,options:c}=n,{error:h}=await Fe(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in n){const{phone:a,type:l,options:c}=n,{data:h,error:p}=await Fe(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:l,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return{data:{user:null,session:null,messageId:h?.message_id},error:p}}throw new co("You must provide either an email or phone number and a type")}catch(r){if(De(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await Hr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const a=n.expires_at?n.expires_at*1e3-Date.now()<_u:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",n.expires_at),!a){if(this.userStorage){const h=await Hr(this.userStorage,this.storageKey+"-user");h?.user?n.user=h.user:n.user=Eu()}if(this.storage.isServer&&n.user){let h=this.suppressGetSessionWarning;n=new Proxy(n,{get:(m,y,g)=>(!h&&y==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,y,g))})}return{data:{session:n},error:null}}const{session:l,error:c}=await this._callRefreshToken(n.refresh_token);return c?{data:{session:null},error:c}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:kr}):await this._useSession(async r=>{var a,l,c;const{data:h,error:p}=r;if(p)throw p;return!(!((a=h.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new xr}:await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:kr})})}catch(r){if(De(r))return R0(r)&&(await this._removeSession(),await wr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async a=>{const{data:l,error:c}=a;if(c)throw c;if(!l.session)throw new xr;const h=l.session;let p=null,m=null;this.flowType==="pkce"&&n.email!=null&&([p,m]=await Ds(this.storage,this.storageKey));const{data:y,error:g}=await Fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:m}),jwt:h.access_token,xform:kr});if(g)throw g;return h.user=y.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(a){if(De(a))return{data:{user:null},error:a};throw a}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new xr;const r=Date.now()/1e3;let a=r,l=!0,c=null;const{payload:h}=Nu(n.access_token);if(h.exp&&(a=h.exp,l=a<=r),l){const{session:p,error:m}=await this._callRefreshToken(n.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!p)return{data:{user:null,session:null},error:null};c=p}else{const{data:p,error:m}=await this._getUser(n.access_token);if(m)throw m;c={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(r){if(De(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var a;if(!n){const{data:h,error:p}=r;if(p)throw p;n=(a=h.session)!==null&&a!==void 0?a:void 0}if(!n?.refresh_token)throw new xr;const{session:l,error:c}=await this._callRefreshToken(n.refresh_token);return c?{data:{user:null,session:null},error:c}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(De(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(n,r){try{if(!wn())throw new ho("No browser detected.");if(n.error||n.error_description||n.error_code)throw new ho(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new _f("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ho("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new _f("No code detected.");const{data:F,error:L}=await this._exchangeCodeForSession(n.code);if(L)throw L;const W=new URL(window.location.href);return W.searchParams.delete("code"),window.history.replaceState(window.history.state,"",W.toString()),{data:{session:F.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:l,access_token:c,refresh_token:h,expires_in:p,expires_at:m,token_type:y}=n;if(!c||!p||!h||!y)throw new ho("No session defined in URL");const g=Math.round(Date.now()/1e3),x=parseInt(p);let b=g+x;m&&(b=parseInt(m));const C=b-g;C*1e3<=Ws&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${x}s`);const T=b-x;g-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,b,g):g-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,b,g);const{data:S,error:_}=await this._getUser(c);if(_)throw _;const B={provider_token:a,provider_refresh_token:l,access_token:c,expires_in:x,expires_at:b,refresh_token:h,token_type:y,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:B,redirectType:n.type},error:null}}catch(a){if(De(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await Hr(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:l,error:c}=r;if(c)return{error:c};const h=(a=l.session)===null||a===void 0?void 0:a.access_token;if(h){const{error:p}=await this.admin.signOut(h,n);if(p&&!(I0(p)&&(p.status===404||p.status===401||p.status===403)))return{error:p}}return n!=="others"&&(await this._removeSession(),await wr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const r=q0(),a={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(n){return await this._useSession(async r=>{var a,l;try{const{data:{session:c},error:h}=r;if(h)throw h;await((a=this.stateChangeEmitters.get(n))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,r={}){let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Ds(this.storage,this.storageKey,!0));try{return await Fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:a,code_challenge_method:l,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(De(c))return{data:null,error:c};throw c}}async getUserIdentities(){var n;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}}async linkIdentity(n){var r;try{const{data:a,error:l}=await this._useSession(async c=>{var h,p,m,y,g;const{data:x,error:b}=c;if(b)throw b;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(h=n.options)===null||h===void 0?void 0:h.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=n.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Fe(this.fetch,"GET",C,{headers:this.headers,jwt:(g=(y=x.session)===null||y===void 0?void 0:y.access_token)!==null&&g!==void 0?g:void 0})});if(l)throw l;return wn()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a?.url),{data:{provider:n.provider,url:a?.url},error:null}}catch(a){if(De(a))return{data:{provider:n.provider,url:null},error:a};throw a}}async unlinkIdentity(n){try{return await this._useSession(async r=>{var a,l;const{data:c,error:h}=r;if(h)throw h;return await Fe(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0})})}catch(r){if(De(r))return{data:null,error:r};throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await J0(async l=>(l>0&&await V0(200*Math.pow(2,l-1)),this._debug(r,"refreshing attempt",l),await Fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Bn})),(l,c)=>{const h=200*Math.pow(2,l);return c&&ju(c)&&Date.now()+h-a<Ws})}catch(a){if(this._debug(r,"error",a),De(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",a),wn()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:n,url:a},error:null}}async _recoverAndRefresh(){var n,r;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const l=await Hr(this.storage,this.storageKey);if(l&&this.userStorage){let h=await Hr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:l.user},await Bs(this.userStorage,this.storageKey+"-user",h)),l.user=(n=h?.user)!==null&&n!==void 0?n:Eu()}else if(l&&!l.user&&!l.user){const h=await Hr(this.storage,this.storageKey+"-user");h&&h?.user?(l.user=h.user,await wr(this.storage,this.storageKey+"-user"),await Bs(this.storage,this.storageKey,l)):l.user=Eu()}if(this._debug(a,"session from storage",l),!this._isValidSession(l)){this._debug(a,"session is not valid"),l!==null&&await this._removeSession();return}const c=((r=l.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<_u;if(this._debug(a,`session has${c?"":" not"} expired with margin of ${_u}s`),c){if(this.autoRefreshToken&&l.refresh_token){const{error:h}=await this._callRefreshToken(l.refresh_token);h&&(console.error(h),ju(h)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:p}=await this._getUser(l.access_token);!p&&h?.user?(l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(a,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(a,"error",l),console.error(l);return}finally{this._debug(a,"end")}}async _callRefreshToken(n){var r,a;if(!n)throw new xr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Co;const{data:c,error:h}=await this._refreshAccessToken(n);if(h)throw h;if(!c.session)throw new xr;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const p={session:c.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(c){if(this._debug(l,"error",c),De(c)){const h={session:null,error:c};return ju(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(h),h}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(n,r,a=!0){const l=`#_notifyAllSubscribers(${n})`;this._debug(l,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:n,session:r});const c=[],h=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,r)}catch(m){c.push(m)}});if(await Promise.all(h),c.length>0){for(let p=0;p<c.length;p+=1)console.error(c[p]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const r=Object.assign({},n),a=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&r.user&&await Bs(this.userStorage,this.storageKey+"-user",{user:r.user});const l=Object.assign({},r);delete l.user;const c=Tf(l);await Bs(this.storage,this.storageKey,c)}else{const l=Tf(r);await Bs(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await wr(this.storage,this.storageKey),await wr(this.storage,this.storageKey+"-code-verifier"),await wr(this.storage,this.storageKey+"-user"),this.userStorage&&await wr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&wn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Ws);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((a.expires_at*1e3-n)/Ws);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${Ws}ms, refresh threshold is ${Hu} ticks`),l<=Hu&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof gp)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!wn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,a){const l=[`provider=${encodeURIComponent(r)}`];if(a?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&l.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[c,h]=await Ds(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(h)}`});l.push(p.toString())}if(a?.queryParams){const c=new URLSearchParams(a.queryParams);l.push(c.toString())}return a?.skipBrowserRedirect&&l.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${n}?${l.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var a;const{data:l,error:c}=r;return c?{data:null,error:c}:await Fe(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(De(r))return{data:null,error:r};throw r}}async _enroll(n){try{return await this._useSession(async r=>{var a,l;const{data:c,error:h}=r;if(h)return{data:null,error:h};const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:m,error:y}=await Fe(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(a=c?.session)===null||a===void 0?void 0:a.access_token});return y?{data:null,error:y}:(n.factorType==="totp"&&(!((l=m?.totp)===null||l===void 0)&&l.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(r){if(De(r))return{data:null,error:r};throw r}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:l,error:c}=r;if(c)return{data:null,error:c};const{data:h,error:p}=await Fe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:p})})}catch(r){if(De(r))return{data:null,error:r};throw r}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:l,error:c}=r;return c?{data:null,error:c}:await Fe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(De(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(n){const{data:r,error:a}=await this._challenge({factorId:n.factorId});return a?{data:null,error:a}:await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const a=n?.factors||[],l=a.filter(h=>h.factor_type==="totp"&&h.status==="verified"),c=a.filter(h=>h.factor_type==="phone"&&h.status==="verified");return{data:{all:a,totp:l,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var r,a;const{data:{session:l},error:c}=n;if(c)return{data:null,error:c};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Nu(l.access_token);let p=null;h.aal&&(p=h.aal);let m=p;((a=(r=l.user.factors)===null||r===void 0?void 0:r.filter(x=>x.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(m="aal2");const g=h.amr||[];return{data:{currentLevel:p,nextLevel:m,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(n,r={keys:[]}){let a=r.keys.find(p=>p.kid===n);if(a)return a;const l=Date.now();if(a=this.jwks.keys.find(p=>p.kid===n),a&&this.jwks_cached_at+O0>l)return a;const{data:c,error:h}=await Fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=l,a=c.keys.find(p=>p.kid===n),!a)?null:a}async getClaims(n,r={}){try{let a=n;if(!a){const{data:C,error:T}=await this.getSession();if(T||!C.session)return{data:null,error:T};a=C.session.access_token}const{header:l,payload:c,signature:h,raw:{header:p,payload:m}}=Nu(a);r?.allowExpired||tx(c.exp);const y=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!y){const{error:C}=await this.getUser(a);if(C)throw C;return{data:{claims:c,header:l,signature:h},error:null}}const g=nx(l.alg),x=await crypto.subtle.importKey("jwk",y,g,!0,["verify"]);if(!await crypto.subtle.verify(g,x,h,B0(`${p}.${m}`)))throw new Ju("Invalid JWT signature");return{data:{claims:c,header:l,signature:h},error:null}}catch(a){if(De(a))return{data:null,error:a};throw a}}}Vi.nextInstanceID=0;const vx=Vi;class wx extends vx{constructor(n){super(n)}}var xx=function(i,n,r,a){function l(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function p(g){try{y(a.next(g))}catch(x){h(x)}}function m(g){try{y(a.throw(g))}catch(x){h(x)}}function y(g){g.done?c(g.value):l(g.value).then(p,m)}y((a=a.apply(i,n||[])).next())})};class bx{constructor(n,r,a){var l,c,h;this.supabaseUrl=n,this.supabaseKey=r;const p=N0(n);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const m=`sb-${p.hostname.split(".")[0]}-auth-token`,y={db:g0,realtime:v0,auth:Object.assign(Object.assign({},y0),{storageKey:m}),global:m0},g=j0(a??{},y);this.storageKey=(l=g.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=g.global.headers)!==null&&c!==void 0?c:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(x,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=g.auth)!==null&&h!==void 0?h:{},this.headers,g.global.fetch),this.fetch=k0(r,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new Lw(new URL("rest/v1",p).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new h0(this.storageUrl.href,this.headers,this.fetch,a?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new Nw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,r={},a={}){return this.rest.rpc(n,r,a)}channel(n,r={config:{}}){return this.realtime.channel(n,r)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,r;return xx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(r=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:r,detectSessionInUrl:a,storage:l,userStorage:c,storageKey:h,flowType:p,lock:m,debug:y},g,x){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new wx({url:this.authUrl.href,headers:Object.assign(Object.assign({},b),g),storageKey:h,autoRefreshToken:n,persistSession:r,detectSessionInUrl:a,storage:l,userStorage:c,flowType:p,lock:m,debug:y,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new Zw(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,a)=>{this._handleTokenChanged(r,"CLIENT",a?.access_token)})}_handleTokenChanged(n,r,a){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:n==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const kx=(i,n,r)=>new bx(i,n,r);function Sx(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const n=i.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}Sx()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const _x="https://hkvkomtaffybchjdjfws.supabase.co",jx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhrdmtvbXRhZmZ5YmNoamRqZndzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY4MTc3ODQsImV4cCI6MjA3MjM5Mzc4NH0.A0Eaqx1g8ADX0uiUL8eDw-2h6RF50csP-KKCTtVdhCE",Fs=kx(_x,jx),Nx=()=>{const[i,n]=N.useState(null);N.useEffect(()=>{try{const z=localStorage.getItem("fitbuddy_user_data"),se=z?JSON.parse(z):null,xe=se?.email||se?.data?.email;if(["localhost","127.0.0.1"].includes(window.location.hostname)&&xe==="admin@local"){n(!0);return}const Q=se?.role||se?.data?.role;if(Q&&String(Q).toLowerCase()==="admin"){n(!0);return}const ue=se?.data?.token??se?.token??null;if(ue)try{const j=ue.split(".");if(j.length>=2){const w=JSON.parse(atob(j[1].replace(/-/g,"+").replace(/_/g,"/"))),O=w?.roles||w?.role||[];if(Array.isArray(O)&&O.includes("admin")){n(!0);return}if(String(O).toLowerCase()==="admin"){n(!0);return}}}catch{}n(!1)}catch{n(!1)}},[]);const[r,a]=N.useState([]),[l,c]=N.useState([]),[h,p]=N.useState(!1),[m,y]=N.useState(null),[g,x]=N.useState(!1),[b,C]=N.useState(!1),[T,S]=N.useState([]),[_,B]=N.useState(null),[F,L]=N.useState([]),[W,te]=N.useState(""),Z=async(z,se)=>{const xe=se?{...se}:{},K=xe.headers?{...xe.headers}:{};try{if(Fs&&typeof Fs.auth?.getSession=="function"){const ue=(await Fs.auth.getSession())?.data?.session?.access_token??null;ue&&(K.Authorization=`Bearer ${ue}`)}}catch{}if(!K.Authorization)try{const Q=localStorage.getItem("fitbuddy_user_data"),ue=Q?JSON.parse(Q):null,j=ue?.data?.token??ue?.token??null;j&&(K.Authorization=`Bearer ${j}`)}catch{}return xe.headers=K,fetch(z,xe)};N.useEffect(()=>{g&&i===!0&&(async()=>{p(!0);const{data:z,error:se}=await Fs.from("workout_plans").select("*").eq("deleted",!0);se||S(z||[]),p(!1)})()},[g,i]),N.useEffect(()=>{b&&i===!0&&(async()=>{p(!0);const{data:z,error:se}=await Fs.from("banned_usernames").select("username");se||L((z||[]).map(xe=>xe.username)),p(!1)})()},[b,i]),N.useEffect(()=>{if(i!==!0)return;(async()=>{p(!0),y(null);try{const se=await Z("/api/admin/users",{method:"GET"});if(!se.ok){const ue=await se.text();throw new Error(`Failed to load users: ${se.status} ${ue}`)}const xe=await se.json();c(xe?.users||[]);const{data:K,error:Q}=await Fs.from("audit_logs").select("*").order("timestamp",{ascending:!1});if(Q)if(String(Q.message).toLowerCase().includes("relation")||String(Q.message).toLowerCase().includes("could not find"))y("Audit log table not found. Run the DB setup SQL (sql/setup_db.sql) to create required tables.");else throw Q;a(K||[])}catch(se){y(se.message||"Error")}finally{p(!1)}})()},[i]);const ie=async z=>{B(z),(await Z("/api/admin/users?action=restore_plan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:z})})).ok?S(xe=>xe.filter(K=>K.id!==z)):y("Failed to restore"),B(null)},me=async()=>{if(!W.trim())return;p(!0),(await Z("/api/admin/users?action=ban_username",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:W.trim()})})).ok?L(se=>[...se,W.trim()]):y("Failed to ban username"),te(""),p(!1)},Ne=async z=>{p(!0),(await Z("/api/admin/users?action=unban_username",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:z})})).ok?L(xe=>xe.filter(K=>K!==z)):y("Failed to unban username"),p(!1)},Oe=async z=>{p(!0),(await Z("/api/admin/users?action=ban",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:z})})).ok?c(xe=>xe.map(K=>K.id===z?{...K,banned:!0}:K)):y("Failed to ban user"),p(!1)},V=async z=>{p(!0),(await Z("/api/admin/users?action=unban",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:z})})).ok?c(xe=>xe.map(K=>K.id===z?{...K,banned:!1}:K)):y("Failed to unban user"),p(!1)},de=async z=>{p(!0),(await Z("/api/admin/users?action=delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:z})})).ok?c(xe=>xe.filter(K=>K.id!==z)):y("Failed to delete user"),p(!1)},ne=()=>{const z=new Blob([r.map(K=>JSON.stringify(K)).join(`
`)],{type:"application/json"}),se=URL.createObjectURL(z),xe=document.createElement("a");xe.href=se,xe.download="ai_action_audit.log",xe.click(),URL.revokeObjectURL(se)};return i===!1?o.jsx(ic,{}):o.jsxs("div",{className:"admin-audit-root",children:[o.jsx("div",{className:"admin-hero",children:o.jsxs("div",{children:[o.jsx("div",{className:"title",children:"Admin Console"}),o.jsx("div",{className:"subtitle",children:"Manage users, audit logs and site-wide policies."})]})}),o.jsxs("div",{className:"admin-grid",children:[o.jsxs("div",{className:"admin-card",children:[o.jsx("div",{className:"admin-section-title",children:"Admin Powers"}),o.jsxs("div",{className:"admin-powers",children:[o.jsx("button",{className:"admin-power-btn",onClick:ne,disabled:r.length===0,children:"Download Audit Log"}),o.jsx("button",{className:"admin-power-btn",onClick:()=>x(!0),children:"Restore Workout Plans"}),o.jsx("button",{className:"admin-power-btn",onClick:()=>C(!0),children:"Manage Banned Usernames"}),o.jsx("div",{className:"admin-power-row",children:o.jsx("button",{className:"admin-power-btn secondary",onClick:()=>window.location.href="/",children:"Open App"})}),o.jsx("div",{className:"admin-power-note",children:"Tip: actions are proxied through the server to protect secrets and follow RLS."})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"admin-card mb-20",children:[o.jsx("div",{className:"admin-section-title",children:"Users"}),l.length===0&&o.jsx("div",{className:"muted",children:"No users found."}),o.jsx("div",{className:"users-list",children:l.map(z=>o.jsxs("div",{className:`user-row${z.banned?" banned":""}`.trim(),children:[o.jsxs("div",{className:"user-meta",children:[o.jsx("div",{className:"user-name",children:z.username||z.email}),o.jsx("div",{className:"user-email",children:z.email}),o.jsx("div",{className:"meta-id",children:z.id})]}),o.jsxs("div",{className:"user-actions",children:[z.banned?o.jsx("button",{className:"small-btn ghost",onClick:()=>V(z.id),disabled:h,children:"Unban"}):o.jsx("button",{className:"small-btn ghost",onClick:()=>Oe(z.id),disabled:h,children:"Ban"}),o.jsx("button",{className:"small-btn negative",onClick:()=>de(z.id),disabled:h,children:"Delete"})]})]},z.id))})]}),o.jsxs("div",{className:"admin-card",children:[o.jsx("div",{className:"admin-section-title",children:"AI Action Audit Log"}),h&&o.jsx("div",{className:"muted",children:"Loading..."}),m&&o.jsx("div",{className:"error",children:m}),o.jsxs("div",{className:"audit-list",children:[r.map((z,se)=>o.jsxs("div",{className:"audit-row",children:[o.jsx("div",{className:"audit-ts",children:z.timestamp}),z.event==="rickroll"?o.jsxs("div",{className:"audit-rickroll",children:[o.jsx("div",{children:"Event: rickroll"}),o.jsxs("div",{children:["IP: ",z.ip||""]}),o.jsxs("div",{children:["Verified: ",String(z.verified)]}),o.jsxs("div",{children:["UserAgent: ",o.jsx("pre",{className:"audit-json-small",children:String(z.userAgent||"")})]})]}):o.jsx("pre",{className:"audit-json",children:JSON.stringify(z.action,null,2)})]},se)),r.length===0&&!h&&o.jsx("div",{className:"muted",children:"No audit entries found."})]})]})]})]}),g&&o.jsx("div",{className:"admin-modal-overlay",children:o.jsxs("div",{className:"admin-modal",children:[o.jsx("h3",{children:"Restore Workout Plans"}),h&&o.jsx("div",{children:"Loading..."}),o.jsxs("div",{children:[T.map(z=>o.jsxs("div",{className:"admin-modal-list-item",children:[o.jsxs("div",{children:[o.jsx("b",{children:z.name}),o.jsx("div",{className:"meta-id",children:z.id})]}),o.jsx("div",{children:o.jsx("button",{className:"small-btn",onClick:()=>ie(z.id),disabled:_===z.id,children:_===z.id?"Restoring...":"Restore"})})]},z.id)),T.length===0&&!h&&o.jsx("div",{children:"No deleted plans found."})]}),o.jsx("div",{className:"modal-footer",children:o.jsx("button",{className:"small-btn ghost",onClick:()=>x(!1),children:"Close"})})]})}),b&&o.jsx("div",{className:"admin-modal-overlay",children:o.jsxs("div",{className:"admin-modal",children:[o.jsx("h3",{children:"Manage Banned Usernames"}),h&&o.jsx("div",{children:"Loading..."}),o.jsxs("div",{children:[F.map(z=>o.jsxs("div",{className:"admin-modal-list-item",children:[o.jsx("div",{children:z}),o.jsx("div",{children:o.jsx("button",{className:"small-btn ghost",onClick:()=>Ne(z),disabled:h,children:"Unban"})})]},z)),F.length===0&&!h&&o.jsx("div",{children:"No banned usernames."})]}),o.jsxs("div",{className:"admin-modal-input-row",children:[o.jsx("input",{type:"text",value:W,onChange:z=>te(z.target.value),placeholder:"Ban new username...",className:"admin-modal-input"}),o.jsx("button",{className:"small-btn warn",onClick:me,disabled:h||!W.trim(),children:"Ban"})]}),o.jsx("div",{className:"modal-footer",children:o.jsx("button",{className:"small-btn ghost",onClick:()=>C(!1),children:"Close"})})]})})]})};function Ex(){N.useEffect(()=>{const i=bo();try{if(localStorage.getItem("fitbuddy_no_auto_restore")||sessionStorage.getItem("fitbuddy_no_auto_restore"))return}catch{}try{const r=cn(),a=Vs();if(r||a&&a.dailyWorkouts&&a.dailyWorkouts.length>0)return}catch{}i?.id&&Hs(i.id);const n=()=>{const r=bo();r?.id&&ec(r.id)};return window.addEventListener("beforeunload",n),()=>{n(),window.removeEventListener("beforeunload",n)}},[])}const Rf="https://www.youtube.com/watch?v=dQw4w9WgXcQ",Cx=()=>{const[i,n]=N.useState("pending");return N.useEffect(()=>{Math.random()<.5?n("rick"):n("notfound")},[]),N.useEffect(()=>{if(i==="rick"){const a=setTimeout(async()=>{try{let l={"Content-Type":"application/json"};try{const c=localStorage.getItem("fitbuddy_user_data"),h=c?JSON.parse(c):null,p=h?.data?.token??h?.token??null;p&&(l.Authorization=`Bearer ${p}`)}catch{}await fetch("/api/rickroll",{method:"POST",headers:l,body:JSON.stringify({userId:null})})}catch{}finally{window.location.href=Rf}},150);return()=>clearTimeout(a)}},[i]),i==="pending"?o.jsx("div",{className:"rickroll-loading",children:o.jsx("p",{children:"Deciding your fate..."})}):i==="notfound"?o.jsx(ic,{}):o.jsxs("div",{className:"rickroll-redirect",children:[o.jsx("p",{children:"Redirecting you to something special..."}),o.jsx("a",{href:Rf,target:"_blank",rel:"noopener noreferrer",children:"Open"})]})},yp="fitbuddy_tos_accepted_v1";function Yi(){try{const i=localStorage.getItem(yp);return i?JSON.parse(i):{}}catch{return{}}}function dc(i){try{localStorage.setItem(yp,JSON.stringify(i))}catch{}}function hc(i){try{const n=Yi(),r=i?String(i):"__anon__",a=n[r],l=n.__anon__;return!!(a&&(a.tos||a.acceptedAt)||l&&(l.tos||l.acceptedAt))}catch{return!1}}function fc(i){try{const n=Yi(),r=i?String(i):"__anon__",a=n[r],l=n.__anon__;return!!(a&&a.privacy||l&&l.privacy)}catch{return!1}}function Tu(i){return hc(i)&&fc(i)}function Tx(i){try{const n=Yi(),r=i?String(i):"__anon__",a=n[r]||{};a.tos={acceptedAt:new Date().toISOString()},n[r]=a,dc(n);try{window.dispatchEvent(new CustomEvent("fitbuddy-tos-accepted",{detail:{userId:r}}))}catch{}return!0}catch{return!1}}function Px(i){try{const n=Yi(),r=i?String(i):"__anon__",a=n[r]||{};a.privacy={acceptedAt:new Date().toISOString()},n[r]=a,dc(n);try{window.dispatchEvent(new CustomEvent("fitbuddy-privacy-accepted",{detail:{userId:r}}))}catch{}return!0}catch{return!1}}function Ox(i){try{if(!i)return!1;const n=Yi(),r=n.__anon__;if(!r)return!1;const a=String(i),l=n[a]||{};let c=!1;if(r.tos&&!l.tos&&(l.tos=r.tos,c=!0),r.privacy&&!l.privacy&&(l.privacy=r.privacy,c=!0),c){if(n[a]=l,delete n.__anon__,dc(n),l.tos)try{window.dispatchEvent(new CustomEvent("fitbuddy-tos-accepted",{detail:{userId:a}}))}catch{}if(l.privacy)try{window.dispatchEvent(new CustomEvent("fitbuddy-privacy-accepted",{detail:{userId:a}}))}catch{}}return c}catch{return!1}}function Ax({userData:i}){const[n,r]=N.useState(!1);if(N.useEffect(()=>{if(i?.id)try{Ox(i.id)}catch{}const c=Tu(i?.id);r(!c);const h=()=>{Tu(i?.id)?r(!1):r(!0)},p=()=>{Tu(i?.id)?r(!1):r(!0)};return window.addEventListener("fitbuddy-tos-accepted",h),window.addEventListener("fitbuddy-privacy-accepted",p),()=>{window.removeEventListener("fitbuddy-tos-accepted",h),window.removeEventListener("fitbuddy-privacy-accepted",p)}},[i?.id]),!n)return null;const a=hc(i?.id),l=fc(i?.id);return o.jsx("div",{className:"tos-banner compact",role:"region","aria-label":"Terms and Privacy banner",children:o.jsx("div",{className:"tos-inner inline",children:o.jsxs("div",{className:"tos-left",children:[o.jsx("div",{className:"tos-info","aria-hidden":"true",children:""}),o.jsxs("div",{className:"tos-text",children:["Please read and accept our ",o.jsx(En,{to:"/terms",className:a?"tos-link accepted":"tos-link",children:"Terms of Service"})," and ",o.jsx(En,{to:"/privacy",className:l?"tos-link accepted":"tos-link",children:"Privacy Policy"}),". This banner will remain until both are accepted."]})]})})})}function vp(i={}){const n=i.count||30,r=i.gravity||.6,a=["#1ecb7b","#1e90cb","#ffb347","#ffd54a","#7bd389"],l=document.createElement("div");l.style.position="fixed",l.style.left="0",l.style.top="0",l.style.width="100%",l.style.height="0",l.style.pointerEvents="none",l.style.overflow="visible",l.style.zIndex="9999",document.body.appendChild(l);for(let c=0;c<n;c++){let h=function(){g+=r*.05,x+=y,b+=g,p.style.left=x+"px",p.style.top=b+"px";const T=(parseFloat(p.style.transform.replace("rotate(","").replace("deg)",""))||0)+C;p.style.transform="rotate("+T+"deg)",p.style.opacity=String(Math.max(0,1-b/(window.innerHeight*.9))),b<window.innerHeight+100?requestAnimationFrame(h):p.remove()};const p=document.createElement("div"),m=6+Math.random()*10;p.style.position="absolute",p.style.left=50+(Math.random()-.5)*60+"%",p.style.top="-10px",p.style.width=m+"px",p.style.height=m*.6+"px",p.style.background=a[Math.floor(Math.random()*a.length)],p.style.opacity="0.95",p.style.transform="rotate("+Math.random()*360+"deg)",p.style.borderRadius=Math.random()*3+"px",p.style.willChange="transform, top, opacity",l.appendChild(p);const y=(Math.random()-.5)*6;let g=2+Math.random()*4,x=window.innerWidth*.5+(Math.random()-.5)*window.innerWidth*.6,b=-20-Math.random()*50;const C=(Math.random()-.5)*10;requestAnimationFrame(h)}setTimeout(()=>l.remove(),5e3)}function Ix(){const i=hc(void 0),[n,r]=N.useState(i),[a,l]=N.useState(i);N.useEffect(()=>{const h=()=>{l(!0),r(!0)};return window.addEventListener("fitbuddy-tos-accepted",h),()=>window.removeEventListener("fitbuddy-tos-accepted",h)},[]);const c=()=>{if(n){Tx(void 0),l(!0);try{vp({count:40})}catch{}}};return o.jsxs("div",{className:"terms-page",children:[o.jsx("header",{className:"terms-hero",children:o.jsxs("div",{className:"terms-hero-inner",children:[o.jsx("div",{className:"hero-logo",children:o.jsx(_t,{size:36,color:"#fff"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"hero-title",children:"FitBuddy Terms of Service"}),o.jsx("p",{className:"hero-sub",children:"Short, clear summary about how to use the app safely and what we store."})]})]})}),o.jsxs("main",{className:"terms-container",children:[o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"1. Use of the Service"}),o.jsx("p",{children:"FitBuddy provides workout suggestions and educational material to help you train safely. This is not medical advice. If you have a medical condition, please consult a healthcare professional before acting on any exercise recommendation."})]}),o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"2. AI & Content"}),o.jsx("p",{children:"Some content or workout suggestions may be generated or assisted by AI. AI outputs are best-effort guidance and should be used in combination with your own judgment and professional advice."})]}),o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"3. Data & Privacy"}),o.jsxs("p",{children:["We store workout plans and profile data locally for convenience. If you create an account, data may be backed up to our servers for sync across devices. See the ",o.jsx(En,{to:"/privacy",className:"tos-link",children:"Privacy Policy"})," for details."]})]}),o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"4. Liability"}),o.jsx("p",{children:"By using FitBuddy you acknowledge that you are voluntarily participating in physical activity and accept responsibility for any risks. We are not liable for injuries caused while following the app."})]})]}),o.jsx("section",{className:"terms-full",children:o.jsxs("div",{className:"terms-full-inner",children:[o.jsx("h2",{children:"Full Terms of Service"}),o.jsx("p",{children:'The following terms ("Agreement") constitute a legally binding agreement between you ("User") and FitBuddy, LLC ("FitBuddy", "we", "us" or "our"), governing your access to and use of the FitBuddy website, mobile applications, services, software, APIs and associated content (collectively, the "Service"). By accessing, browsing, or using the Service you acknowledge that you have read, understood, and agree to be bound by this Agreement. If you do not agree to these terms, do not access or use the Service.'}),o.jsx("h3",{children:"1. Definitions"}),o.jsx("p",{children:'"Content" means any information, text, graphics, images, audio, video, code, algorithms, workout plans, recommendations, comments, and other materials provided by FitBuddy or Users. "User Content" means Content submitted or transmitted by Users. "Personal Data" means information that identifies or can be used to identify an individual, subject to the Privacy Policy.'}),o.jsx("h3",{children:"2. Scope of Service"}),o.jsx("p",{children:'FitBuddy provides fitness and wellness related guidance, educational materials, personalized workout plans, and software tools. The Service may include content generated or assisted by artificial intelligence. The Service is provided on an "as is" and "as available" basis. FitBuddy reserves the right to modify, suspend, or discontinue any aspect of the Service at any time without prior notice.'}),o.jsx("h3",{children:"3. User Eligibility and Conduct"}),o.jsx("p",{children:"Users represent and warrant that they are at least the minimum age required to use the Service under applicable law and that they have full authority to accept this Agreement. Users shall not misuse the Service or interfere with its operation. Prohibited conduct includes, but is not limited to: circumventing technical restrictions; attempting to access other Users' accounts; uploading malicious code; impersonating others; or using the Service for unlawful or harmful activities."}),o.jsx("h3",{children:"4. Medical Disclaimer and Assumption of Risk"}),o.jsx("p",{children:"The Service provides general fitness information and recommendations which are not a substitute for professional medical advice, diagnosis, or treatment. Users should consult a qualified healthcare professional before beginning any exercise program or if they have health concerns. By using the Service, Users acknowledge and assume all risks associated with participating in physical activity and agree that FitBuddy is not responsible for any injury, loss, or damage arising from use of the Service."}),o.jsx("h3",{children:"5. AI-Generated Content and Accuracy"}),o.jsx("p",{children:"Some Content may be generated or assisted by machine learning models, thirdparty APIs, or algorithmic systems. While FitBuddy strives for accuracy and utility, AI outputs may be incomplete, imprecise, or contextually inappropriate. FitBuddy disclaims any warranty regarding the suitability, reliability, or accuracy of AI-generated Content. Reliance on such Content is at the User's own risk."}),o.jsx("h3",{children:"6. Intellectual Property"}),o.jsx("p",{children:"FitBuddy and its licensors retain all right, title, and interest in and to the Service and Content provided by FitBuddy, including intellectual property rights. Users are granted a limited, non-exclusive, non-sublicensable, revocable license to access and use the Service for personal, non-commercial purposes in accordance with this Agreement. Users shall not reproduce, distribute, modify, create derivative works, reverse engineer, or otherwise exploit FitBuddy's intellectual property except as expressly authorized herein."}),o.jsx("h3",{children:"7. User Content and License to FitBuddy"}),o.jsx("p",{children:"By submitting User Content, Users grant FitBuddy a worldwide, royalty-free, sublicensable, transferable, perpetual, irrevocable license to use, host, store, reproduce, modify, create derivative works, communicate, publish, and distribute such User Content for the purposes of operating, improving, and promoting the Service. Users warrant that they have the rights to grant such license and that User Content does not violate third-party rights."}),o.jsx("h3",{children:"8. Payments and Subscriptions"}),o.jsx("p",{children:"Paid features of the Service are governed by separate subscription terms and payment agreements. Users agree to provide accurate billing information and authorize recurring charges as applicable. Refunds, cancellations, and dispute procedures are governed by the posted subscription terms and any applicable laws."}),o.jsx("h3",{children:"9. Third-Party Services and Links"}),o.jsx("p",{children:"The Service may contain links to third-party websites, services, or content. FitBuddy does not endorse and is not responsible for third-party offerings, practices, or privacy policies. Users access third-party resources at their own risk and should review the third-party terms and privacy policies."}),o.jsx("h3",{children:"10. Privacy and Data"}),o.jsx("p",{children:"Use of Personal Data is governed by FitBuddys Privacy Policy. By using the Service, Users consent to FitBuddys collection, processing, storage, and transfer of Personal Data in accordance with the Privacy Policy. FitBuddy will take commercially reasonable measures to secure User Data but cannot guarantee absolute security."}),o.jsx("h3",{children:"11. Warranties and Disclaimers"}),o.jsx("p",{children:'EXCEPT AS EXPRESSLY PROVIDED HEREIN, THE SERVICE IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND. FITBUDDY DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE, AND NON-INFRINGEMENT. FITBUDDY DOES NOT WARRANT THAT THE SERVICE WILL BE UNINTERRUPTED, ERROR-FREE, OR SECURE.'}),o.jsx("h3",{children:"12. Limitation of Liability"}),o.jsx("p",{children:"TO THE MAXIMUM EXTENT PERMITTED BY LAW, IN NO EVENT SHALL FITBUDDY, ITS AFFILIATES, LICENSORS, OR SERVICE PROVIDERS BE LIABLE FOR INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, OR FOR LOSS OF PROFITS, REVENUE, DATA, OR USE, ARISING OUT OF OR IN CONNECTION WITH THE SERVICE, WHETHER IN CONTRACT, TORT (INCLUDING NEGLIGENCE), STRICT LIABILITY, OR OTHERWISE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. FITBUDDY'S AGGREGATE LIABILITY FOR DIRECT DAMAGES SHALL NOT EXCEED THE AMOUNTS PAID BY THE USER TO FITBUDDY IN THE TWELVE (12) MONTHS PRECEDING THE CLAIM, OR ONE HUNDRED DOLLARS (USD $100), WHICHEVER IS GREATER."}),o.jsx("h3",{children:"13. Indemnification"}),o.jsx("p",{children:"Users agree to indemnify, defend, and hold harmless FitBuddy and its officers, directors, employees, agents, and affiliates from and against any and all losses, liabilities, claims, demands, damages, costs, and expenses (including reasonable attorneys fees) arising out of or relating to: (a) User's breach of this Agreement; (b) Users violation of any law or third-party rights; or (c) User Content."}),o.jsx("h3",{children:"14. Termination"}),o.jsx("p",{children:"FitBuddy may suspend or terminate a User's access to the Service at any time, with or without cause, and without liability. Upon termination, license rights granted to the User will immediately cease. Sections concerning ownership, disclaimers, limitations of liability, indemnity, and dispute resolution will survive termination."}),o.jsx("h3",{children:"15. Governing Law; Dispute Resolution"}),o.jsx("p",{children:"This Agreement shall be governed by and construed in accordance with the laws of the state in which FitBuddy is incorporated, without regard to conflict of laws principles. Any dispute arising out of or related to this Agreement shall be resolved exclusively through final and binding arbitration, except where prohibited by law. The arbitrator's decision will be final and binding and may be entered as a judgment in any court of competent jurisdiction."}),o.jsx("h3",{children:"16. Changes to Terms"}),o.jsx("p",{children:"FitBuddy may update these Terms from time to time. We will provide notice of material changes, for example by email to registered accounts or prominent notice within the Service. Continued use of the Service after changes constitute acceptance of the revised Terms."}),o.jsx("h3",{children:"17. Miscellaneous"}),o.jsx("p",{children:"This Agreement, together with the Privacy Policy and any other legal notices published by FitBuddy, constitutes the entire agreement between the parties concerning the subject matter herein. If any provision is found unenforceable, the remaining provisions will remain in full force. Failure to enforce a right is not a waiver of that right."}),o.jsxs("p",{children:[o.jsx("em",{children:"Effective Date:"})," The effective date of these Terms is the date you first use the Service. For questions regarding these Terms, please contact our support team."]})]})}),o.jsxs("div",{className:"terms-cta-bottom",children:[o.jsx("div",{className:"terms-cta-inner",children:o.jsxs("label",{className:"terms-checkbox",children:[o.jsx("input",{type:"checkbox",checked:n,onChange:h=>r(h.target.checked)}),o.jsx("span",{children:"I have read and agree to the Terms of Service"})]})}),o.jsx("div",{className:"terms-cta-inner stack",children:o.jsx("button",{className:"btn btn-primary btn-lg"+(a?" accepted-btn":""),onClick:c,disabled:!n||a,"aria-disabled":!n||a,children:a?"Accepted":"Accept"})})]})]})}function Rx(){const i=fc(void 0),[n,r]=N.useState(i),[a,l]=N.useState(i);N.useEffect(()=>{const h=()=>{l(!0),r(!0)};return window.addEventListener("fitbuddy-privacy-accepted",h),()=>window.removeEventListener("fitbuddy-privacy-accepted",h)},[]);const c=()=>{if(n){Px(void 0),l(!0);try{vp({count:36})}catch{}}};return o.jsxs("div",{className:"terms-page",children:[o.jsx("header",{className:"terms-hero",children:o.jsxs("div",{className:"terms-hero-inner",children:[o.jsx("div",{className:"hero-logo",children:o.jsx(_t,{size:36,color:"#fff"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"hero-title",children:"FitBuddy Privacy Policy"}),o.jsx("p",{className:"hero-sub",children:"How we collect, use, and protect your data  short summary."})]})]})}),o.jsxs("main",{className:"terms-container",children:[o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"Data We Collect"}),o.jsx("p",{children:"We collect workout preferences, profile details, and optionally account information when you sign up. We do not collect sensitive medical data unless you explicitly provide it."})]}),o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"How We Use Data"}),o.jsx("p",{children:"Data is used to personalize workout plans, sync across devices, and improve the service. We may use aggregated, anonymized data for analytics."})]}),o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"Sharing & Third Parties"}),o.jsx("p",{children:"We do not sell personal data. We may share data with service providers who assist in backup, analytics, or authentication, under appropriate agreements."})]}),o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"Security"}),o.jsx("p",{children:"We use industry-standard measures to secure data but cannot guarantee absolute security. Follow secure practices and protect your account credentials."})]})]}),o.jsx("section",{className:"terms-full",children:o.jsxs("div",{className:"terms-full-inner",children:[o.jsx("h2",{children:"Full Privacy Policy"}),o.jsx("p",{children:"This Privacy Policy explains how FitBuddy, LLC collects, uses, discloses, and protects the personal information of users of the Service. By using the Service you consent to the collection and use of information as described in this policy."}),o.jsx("h3",{children:"1. Information We Collect"}),o.jsx("p",{children:"We collect information you provide directly (profile, email, preferences), information generated by your use of the Service (workout logs, settings), and technical information (device, browser, IP) to operate and improve the Service."}),o.jsx("h3",{children:"2. Use of Information"}),o.jsx("p",{children:"Information is used to personalize content, provide support, enable backups (when opted-in), deliver notifications, and prevent abuse."}),o.jsx("h3",{children:"3. Sharing and Disclosure"}),o.jsx("p",{children:"We may share information with vendors who perform services for us, comply with legal obligations, or protect our rights. Aggregated or anonymized data may be used for research or analytics."}),o.jsx("h3",{children:"4. Data Retention and Rights"}),o.jsx("p",{children:"We retain data as long as necessary to provide the Service or as required by law. Users may request deletion or access to their data by contacting support."}),o.jsx("h3",{children:"5. International Transfers"}),o.jsx("p",{children:"Data may be processed in different jurisdictions. We take measures to protect data when transferring across borders."}),o.jsx("h3",{children:"6. Changes to Privacy Policy"}),o.jsx("p",{children:"We may update this Privacy Policy and will provide notice for material changes. Continued use after updates constitutes acceptance."}),o.jsxs("p",{children:[o.jsx("em",{children:"Effective Date:"})," The effective date is the date you first use the Service. For privacy questions, contact our support team."]})]})}),o.jsxs("div",{className:"terms-cta-bottom",children:[o.jsx("div",{className:"terms-cta-inner",children:o.jsxs("label",{className:"terms-checkbox",children:[o.jsx("input",{type:"checkbox",checked:n,onChange:h=>r(h.target.checked)}),o.jsx("span",{children:"I have read and agree to the Privacy Policy"})]})}),o.jsx("div",{className:"terms-cta-inner stack",children:o.jsx("button",{className:"btn btn-primary btn-lg"+(a?" accepted-btn":""),onClick:c,disabled:!n||a,"aria-disabled":!n||a,children:a?"Accepted":"Accept"})})]})]})}function Dx(){const[i,n]=N.useState(null),[r,a]=N.useState(null),[l,c]=N.useState(0),h=qn(),[p,m]=N.useState(0);Ex(),N.useEffect(()=>{if(!i?.id)return;let g=!1;const b=setInterval(async()=>{if(g)return;const C=await xo(i.id);C&&n(C)},1e3);return()=>{g=!0,clearInterval(b)}},[i?.id]),N.useEffect(()=>{const g=()=>n(null);return window.addEventListener("fitbuddy-logout",g),()=>window.removeEventListener("fitbuddy-logout",g)},[]),N.useEffect(()=>{const g=()=>{const x=jr(),b=Vs();x&&n(x),b&&(a(b),c(C=>C+1))};return window.addEventListener("fitbuddy-login",g),()=>window.removeEventListener("fitbuddy-login",g)},[]),N.useEffect(()=>{const g=()=>{const x=jr();x&&(!i||x.id===i.id)&&n(x)};return window.addEventListener("storage",g),()=>window.removeEventListener("storage",g)},[i]),N.useEffect(()=>{const g=jr(),x=Vs();console.log("App startup - raw fitbuddy_user_data:",localStorage.getItem("fitbuddy_user_data")),console.log("App startup - loadUserData ->",g),console.log("App startup - loadWorkoutPlan ->",x),g&&(n(g),g.id&&xo(g.id).then(b=>{b&&n(b)})),x&&(a(x),c(b=>b+1))},[]),N.useEffect(()=>{i?rc(i):localStorage.removeItem("fitbuddy_user_data")},[i]),N.useEffect(()=>{r&&br(r)},[r]),N.useEffect(()=>{console.log("App: workoutPlan updated (version:",l,"):",r)},[r,l]);const y=g=>{n(x=>{if(!x)return x;const b=(x.energy||0)-g.price,C=Array.isArray(x.inventory)?x.inventory:[];return{...x,energy:b,inventory:[...C,g]}})};return o.jsxs("div",{className:"App",children:[o.jsx(cw,{userData:i,profileVersion:p}),o.jsx(Ax,{userData:i}),o.jsxs(iy,{children:[o.jsx(Mt,{path:"/",element:o.jsx(Oy,{})}),o.jsx(Mt,{path:"/profile",element:o.jsx(mw,{userData:i,onProfileUpdate:g=>{n(g),m(x=>x+1)},profileVersion:p})}),o.jsx(Mt,{path:"/loading",element:o.jsx(dw,{})}),o.jsx(Mt,{path:"/questionnaire",element:o.jsx(qy,{onComplete:(g,x)=>{n(g),a(x),c(b=>b+1),h("/calendar")}})}),o.jsx(Mt,{path:"/calendar",element:o.jsx(uw,{workoutPlan:r,userData:i,onUpdatePlan:g=>{a(g),c(x=>x+1)}},l)}),o.jsx(Mt,{path:"/shop",element:o.jsx(xw,{user:i||{energy:0,inventory:[]},onPurchase:y})}),o.jsx(Mt,{path:"/chat",element:o.jsx(kw,{userData:i})}),o.jsx(Mt,{path:"/admin",element:o.jsx(Nx,{})}),o.jsx(Mt,{path:"/terms",element:o.jsx(Ix,{})}),o.jsx(Mt,{path:"/privacy",element:o.jsx(Rx,{})}),o.jsx(Mt,{path:"/signin",element:o.jsx(gw,{})}),o.jsx(Mt,{path:"/signup",element:o.jsx(yw,{})}),o.jsx(Mt,{path:"/rickroll",element:o.jsx(Cx,{})}),o.jsx(Mt,{path:"*",element:o.jsx(ic,{})})]})]})}pg.createRoot(document.getElementById("root")).render(o.jsx(Jt.StrictMode,{children:o.jsx(hy,{children:o.jsx(Dx,{})})}));export{Fs as s};
