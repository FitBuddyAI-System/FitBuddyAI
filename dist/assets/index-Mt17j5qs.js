function cg(i,r){for(var n=0;n<r.length;n++){const a=r[n];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in i)){const u=Object.getOwnPropertyDescriptor(a,l);u&&Object.defineProperty(i,l,u.get?u:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();const ug="modulepreload",dg=function(i){return"/"+i},Bh={},ut=function(r,n,a){let l=Promise.resolve();if(n&&n.length>0){let p=function(y){return Promise.all(y.map(g=>Promise.resolve(g).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),m=d?.nonce||d?.getAttribute("nonce");l=p(n.map(y=>{if(y=dg(y),y in Bh)return;Bh[y]=!0;const g=y.endsWith(".css"),x=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${x}`))return;const b=document.createElement("link");if(b.rel=g?"stylesheet":ug,g||(b.as="script"),b.crossOrigin="",b.href=y,m&&b.setAttribute("nonce",m),document.head.appendChild(b),g)return new Promise((E,k)=>{b.addEventListener("load",E),b.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return l.then(d=>{for(const m of d||[])m.status==="rejected"&&u(m.reason);return r().catch(u)})};function eu(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function hg(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var r=i.default;if(typeof r=="function"){var n=function a(){var l=!1;try{l=this instanceof a}catch{}return l?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};n.prototype=r.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(i).forEach(function(a){var l=Object.getOwnPropertyDescriptor(i,a);Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:function(){return i[a]}})}),n}var yc={exports:{}},Mi={},vc={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wh;function fg(){if(Wh)return Ue;Wh=1;var i=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.iterator;function b(w){return w===null||typeof w!="object"?null:(w=x&&w[x]||w["@@iterator"],typeof w=="function"?w:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,C={};function _(w,O,G){this.props=w,this.context=O,this.refs=C,this.updater=G||E}_.prototype.isReactComponent={},_.prototype.setState=function(w,O){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,O,"setState")},_.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function $(){}$.prototype=_.prototype;function F(w,O,G){this.props=w,this.context=O,this.refs=C,this.updater=G||E}var R=F.prototype=new $;R.constructor=F,k(R,_.prototype),R.isPureReactComponent=!0;var B=Array.isArray,Z=Object.prototype.hasOwnProperty,J={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function te(w,O,G){var ee,ae={},he=null,se=null;if(O!=null)for(ee in O.ref!==void 0&&(se=O.ref),O.key!==void 0&&(he=""+O.key),O)Z.call(O,ee)&&!W.hasOwnProperty(ee)&&(ae[ee]=O[ee]);var fe=arguments.length-2;if(fe===1)ae.children=G;else if(1<fe){for(var _e=Array(fe),Ae=0;Ae<fe;Ae++)_e[Ae]=arguments[Ae+2];ae.children=_e}if(w&&w.defaultProps)for(ee in fe=w.defaultProps,fe)ae[ee]===void 0&&(ae[ee]=fe[ee]);return{$$typeof:i,type:w,key:he,ref:se,props:ae,_owner:J.current}}function ue(w,O){return{$$typeof:i,type:w.type,key:O,ref:w.ref,props:w.props,_owner:w._owner}}function we(w){return typeof w=="object"&&w!==null&&w.$$typeof===i}function V(w){var O={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(G){return O[G]})}var ce=/\/+/g;function ie(w,O){return typeof w=="object"&&w!==null&&w.key!=null?V(""+w.key):O.toString(36)}function z(w,O,G,ee,ae){var he=typeof w;(he==="undefined"||he==="boolean")&&(w=null);var se=!1;if(w===null)se=!0;else switch(he){case"string":case"number":se=!0;break;case"object":switch(w.$$typeof){case i:case r:se=!0}}if(se)return se=w,ae=ae(se),w=ee===""?"."+ie(se,0):ee,B(ae)?(G="",w!=null&&(G=w.replace(ce,"$&/")+"/"),z(ae,O,G,"",function(Ae){return Ae})):ae!=null&&(we(ae)&&(ae=ue(ae,G+(!ae.key||se&&se.key===ae.key?"":(""+ae.key).replace(ce,"$&/")+"/")+w)),O.push(ae)),1;if(se=0,ee=ee===""?".":ee+":",B(w))for(var fe=0;fe<w.length;fe++){he=w[fe];var _e=ee+ie(he,fe);se+=z(he,O,G,_e,ae)}else if(_e=b(w),typeof _e=="function")for(w=_e.call(w),fe=0;!(he=w.next()).done;)he=he.value,_e=ee+ie(he,fe++),se+=z(he,O,G,_e,ae);else if(he==="object")throw O=String(w),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return se}function oe(w,O,G){if(w==null)return w;var ee=[],ae=0;return z(w,ee,"","",function(he){return O.call(G,he,ae++)}),ee}function re(w){if(w._status===-1){var O=w._result;O=O(),O.then(function(G){(w._status===0||w._status===-1)&&(w._status=1,w._result=G)},function(G){(w._status===0||w._status===-1)&&(w._status=2,w._result=G)}),w._status===-1&&(w._status=0,w._result=O)}if(w._status===1)return w._result.default;throw w._result}var Y={current:null},H={transition:null},de={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:H,ReactCurrentOwner:J};function N(){throw Error("act(...) is not supported in production builds of React.")}return Ue.Children={map:oe,forEach:function(w,O,G){oe(w,function(){O.apply(this,arguments)},G)},count:function(w){var O=0;return oe(w,function(){O++}),O},toArray:function(w){return oe(w,function(O){return O})||[]},only:function(w){if(!we(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},Ue.Component=_,Ue.Fragment=n,Ue.Profiler=l,Ue.PureComponent=F,Ue.StrictMode=a,Ue.Suspense=p,Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,Ue.act=N,Ue.cloneElement=function(w,O,G){if(w==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+w+".");var ee=k({},w.props),ae=w.key,he=w.ref,se=w._owner;if(O!=null){if(O.ref!==void 0&&(he=O.ref,se=J.current),O.key!==void 0&&(ae=""+O.key),w.type&&w.type.defaultProps)var fe=w.type.defaultProps;for(_e in O)Z.call(O,_e)&&!W.hasOwnProperty(_e)&&(ee[_e]=O[_e]===void 0&&fe!==void 0?fe[_e]:O[_e])}var _e=arguments.length-2;if(_e===1)ee.children=G;else if(1<_e){fe=Array(_e);for(var Ae=0;Ae<_e;Ae++)fe[Ae]=arguments[Ae+2];ee.children=fe}return{$$typeof:i,type:w.type,key:ae,ref:he,props:ee,_owner:se}},Ue.createContext=function(w){return w={$$typeof:d,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},w.Provider={$$typeof:u,_context:w},w.Consumer=w},Ue.createElement=te,Ue.createFactory=function(w){var O=te.bind(null,w);return O.type=w,O},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(w){return{$$typeof:m,render:w}},Ue.isValidElement=we,Ue.lazy=function(w){return{$$typeof:g,_payload:{_status:-1,_result:w},_init:re}},Ue.memo=function(w,O){return{$$typeof:y,type:w,compare:O===void 0?null:O}},Ue.startTransition=function(w){var O=H.transition;H.transition={};try{w()}finally{H.transition=O}},Ue.unstable_act=N,Ue.useCallback=function(w,O){return Y.current.useCallback(w,O)},Ue.useContext=function(w){return Y.current.useContext(w)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(w){return Y.current.useDeferredValue(w)},Ue.useEffect=function(w,O){return Y.current.useEffect(w,O)},Ue.useId=function(){return Y.current.useId()},Ue.useImperativeHandle=function(w,O,G){return Y.current.useImperativeHandle(w,O,G)},Ue.useInsertionEffect=function(w,O){return Y.current.useInsertionEffect(w,O)},Ue.useLayoutEffect=function(w,O){return Y.current.useLayoutEffect(w,O)},Ue.useMemo=function(w,O){return Y.current.useMemo(w,O)},Ue.useReducer=function(w,O,G){return Y.current.useReducer(w,O,G)},Ue.useRef=function(w){return Y.current.useRef(w)},Ue.useState=function(w){return Y.current.useState(w)},Ue.useSyncExternalStore=function(w,O,G){return Y.current.useSyncExternalStore(w,O,G)},Ue.useTransition=function(){return Y.current.useTransition()},Ue.version="18.3.1",Ue}var $h;function tu(){return $h||($h=1,vc.exports=fg()),vc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zh;function pg(){if(zh)return Mi;zh=1;var i=tu(),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(m,p,y){var g,x={},b=null,E=null;y!==void 0&&(b=""+y),p.key!==void 0&&(b=""+p.key),p.ref!==void 0&&(E=p.ref);for(g in p)a.call(p,g)&&!u.hasOwnProperty(g)&&(x[g]=p[g]);if(m&&m.defaultProps)for(g in p=m.defaultProps,p)x[g]===void 0&&(x[g]=p[g]);return{$$typeof:r,type:m,key:b,ref:E,props:x,_owner:l.current}}return Mi.Fragment=n,Mi.jsx=d,Mi.jsxs=d,Mi}var qh;function mg(){return qh||(qh=1,yc.exports=pg()),yc.exports}var o=mg(),j=tu();const er=eu(j),gg=cg({__proto__:null,default:er},[j]);var co={},wc={exports:{}},Jt={},xc={exports:{}},bc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hh;function yg(){return Hh||(Hh=1,function(i){function r(H,de){var N=H.length;H.push(de);e:for(;0<N;){var w=N-1>>>1,O=H[w];if(0<l(O,de))H[w]=de,H[N]=O,N=w;else break e}}function n(H){return H.length===0?null:H[0]}function a(H){if(H.length===0)return null;var de=H[0],N=H.pop();if(N!==de){H[0]=N;e:for(var w=0,O=H.length,G=O>>>1;w<G;){var ee=2*(w+1)-1,ae=H[ee],he=ee+1,se=H[he];if(0>l(ae,N))he<O&&0>l(se,ae)?(H[w]=se,H[he]=N,w=he):(H[w]=ae,H[ee]=N,w=ee);else if(he<O&&0>l(se,N))H[w]=se,H[he]=N,w=he;else break e}}return de}function l(H,de){var N=H.sortIndex-de.sortIndex;return N!==0?N:H.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var p=[],y=[],g=1,x=null,b=3,E=!1,k=!1,C=!1,_=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(H){for(var de=n(y);de!==null;){if(de.callback===null)a(y);else if(de.startTime<=H)a(y),de.sortIndex=de.expirationTime,r(p,de);else break;de=n(y)}}function B(H){if(C=!1,R(H),!k)if(n(p)!==null)k=!0,re(Z);else{var de=n(y);de!==null&&Y(B,de.startTime-H)}}function Z(H,de){k=!1,C&&(C=!1,$(te),te=-1),E=!0;var N=b;try{for(R(de),x=n(p);x!==null&&(!(x.expirationTime>de)||H&&!V());){var w=x.callback;if(typeof w=="function"){x.callback=null,b=x.priorityLevel;var O=w(x.expirationTime<=de);de=i.unstable_now(),typeof O=="function"?x.callback=O:x===n(p)&&a(p),R(de)}else a(p);x=n(p)}if(x!==null)var G=!0;else{var ee=n(y);ee!==null&&Y(B,ee.startTime-de),G=!1}return G}finally{x=null,b=N,E=!1}}var J=!1,W=null,te=-1,ue=5,we=-1;function V(){return!(i.unstable_now()-we<ue)}function ce(){if(W!==null){var H=i.unstable_now();we=H;var de=!0;try{de=W(!0,H)}finally{de?ie():(J=!1,W=null)}}else J=!1}var ie;if(typeof F=="function")ie=function(){F(ce)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,oe=z.port2;z.port1.onmessage=ce,ie=function(){oe.postMessage(null)}}else ie=function(){_(ce,0)};function re(H){W=H,J||(J=!0,ie())}function Y(H,de){te=_(function(){H(i.unstable_now())},de)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_continueExecution=function(){k||E||(k=!0,re(Z))},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_getFirstCallbackNode=function(){return n(p)},i.unstable_next=function(H){switch(b){case 1:case 2:case 3:var de=3;break;default:de=b}var N=b;b=de;try{return H()}finally{b=N}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(H,de){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var N=b;b=H;try{return de()}finally{b=N}},i.unstable_scheduleCallback=function(H,de,N){var w=i.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?w+N:w):N=w,H){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=N+O,H={id:g++,callback:de,priorityLevel:H,startTime:N,expirationTime:O,sortIndex:-1},N>w?(H.sortIndex=N,r(y,H),n(p)===null&&H===n(y)&&(C?($(te),te=-1):C=!0,Y(B,N-w))):(H.sortIndex=O,r(p,H),k||E||(k=!0,re(Z))),H},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(H){var de=b;return function(){var N=b;b=de;try{return H.apply(this,arguments)}finally{b=N}}}}(bc)),bc}var Gh;function vg(){return Gh||(Gh=1,xc.exports=yg()),xc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vh;function wg(){if(Vh)return Jt;Vh=1;var i=tu(),r=vg();function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,l={};function u(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(l[e]=t,e=0;e<t.length;e++)a.add(t[e])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},x={};function b(e){return p.call(x,e)?!0:p.call(g,e)?!1:y.test(e)?x[e]=!0:(g[e]=!0,!1)}function E(e,t,s,c){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return c?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function k(e,t,s,c){if(t===null||typeof t>"u"||E(e,t,s,c))return!0;if(c)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function C(e,t,s,c,h,f,v){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=v}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_[e]=new C(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];_[t]=new C(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){_[e]=new C(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_[e]=new C(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_[e]=new C(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){_[e]=new C(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){_[e]=new C(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){_[e]=new C(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){_[e]=new C(e,5,!1,e.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function F(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($,F);_[t]=new C(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($,F);_[t]=new C(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($,F);_[t]=new C(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){_[e]=new C(e,1,!1,e.toLowerCase(),null,!1,!1)}),_.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){_[e]=new C(e,1,!1,e.toLowerCase(),null,!0,!0)});function R(e,t,s,c){var h=_.hasOwnProperty(t)?_[t]:null;(h!==null?h.type!==0:c||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(k(t,s,h,c)&&(s=null),c||h===null?b(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):h.mustUseProperty?e[h.propertyName]=s===null?h.type===3?!1:"":s:(t=h.attributeName,c=h.attributeNamespace,s===null?e.removeAttribute(t):(h=h.type,s=h===3||h===4&&s===!0?"":""+s,c?e.setAttributeNS(c,t,s):e.setAttribute(t,s))))}var B=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),J=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),ue=Symbol.for("react.profiler"),we=Symbol.for("react.provider"),V=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),Y=Symbol.for("react.offscreen"),H=Symbol.iterator;function de(e){return e===null||typeof e!="object"?null:(e=H&&e[H]||e["@@iterator"],typeof e=="function"?e:null)}var N=Object.assign,w;function O(e){if(w===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);w=t&&t[1]||""}return`
`+w+e}var G=!1;function ee(e,t){if(!e||G)return"";G=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(M){var c=M}Reflect.construct(e,[],t)}else{try{t.call()}catch(M){c=M}e.call(t.prototype)}else{try{throw Error()}catch(M){c=M}e()}}catch(M){if(M&&c&&typeof M.stack=="string"){for(var h=M.stack.split(`
`),f=c.stack.split(`
`),v=h.length-1,S=f.length-1;1<=v&&0<=S&&h[v]!==f[S];)S--;for(;1<=v&&0<=S;v--,S--)if(h[v]!==f[S]){if(v!==1||S!==1)do if(v--,S--,0>S||h[v]!==f[S]){var T=`
`+h[v].replace(" at new "," at ");return e.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",e.displayName)),T}while(1<=v&&0<=S);break}}}finally{G=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?O(e):""}function ae(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=ee(e.type,!1),e;case 11:return e=ee(e.type.render,!1),e;case 1:return e=ee(e.type,!0),e;default:return""}}function he(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case J:return"Portal";case ue:return"Profiler";case te:return"StrictMode";case ie:return"Suspense";case z:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case V:return(e.displayName||"Context")+".Consumer";case we:return(e._context.displayName||"Context")+".Provider";case ce:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case oe:return t=e.displayName||null,t!==null?t:he(e.type)||"Memo";case re:t=e._payload,e=e._init;try{return he(e(t))}catch{}}return null}function se(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(t);case 8:return t===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function fe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _e(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ae(e){var t=_e(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),c=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var h=s.get,f=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return h.call(this)},set:function(v){c=""+v,f.call(this,v)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Be(e){e._valueTracker||(e._valueTracker=Ae(e))}function Ge(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),c="";return e&&(c=_e(e)?e.checked?"true":"false":e.value),e=c,e!==s?(t.setValue(e),!0):!1}function Xe(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ie(e,t){var s=t.checked;return N({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function I(e,t){var s=t.defaultValue==null?"":t.defaultValue,c=t.checked!=null?t.checked:t.defaultChecked;s=fe(t.value!=null?t.value:s),e._wrapperState={initialChecked:c,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function U(e,t){t=t.checked,t!=null&&R(e,"checked",t,!1)}function ge(e,t){U(e,t);var s=fe(t.value),c=t.type;if(s!=null)c==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(c==="submit"||c==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xe(e,t.type,s):t.hasOwnProperty("defaultValue")&&xe(e,t.type,fe(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function je(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var c=t.type;if(!(c!=="submit"&&c!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function xe(e,t,s){(t!=="number"||Xe(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Se=Array.isArray;function Ce(e,t,s,c){if(e=e.options,t){t={};for(var h=0;h<s.length;h++)t["$"+s[h]]=!0;for(s=0;s<e.length;s++)h=t.hasOwnProperty("$"+e[s].value),e[s].selected!==h&&(e[s].selected=h),h&&c&&(e[s].defaultSelected=!0)}else{for(s=""+fe(s),t=null,h=0;h<e.length;h++){if(e[h].value===s){e[h].selected=!0,c&&(e[h].defaultSelected=!0);return}t!==null||e[h].disabled||(t=e[h])}t!==null&&(t.selected=!0)}}function Te(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(n(91));return N({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Re(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(n(92));if(Se(s)){if(1<s.length)throw Error(n(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:fe(s)}}function tt(e,t){var s=fe(t.value),c=fe(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),c!=null&&(e.defaultValue=""+c)}function it(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pt(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dt(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var bt,dr=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,c,h){MSApp.execUnsafeLocalFunction(function(){return e(t,s,c,h)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(bt=bt||document.createElement("div"),bt.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=bt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ot(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var At={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kt=["Webkit","ms","Moz","O"];Object.keys(At).forEach(function(e){kt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),At[t]=At[e]})});function Hr(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||At.hasOwnProperty(e)&&At[e]?(""+t).trim():t+"px"}function tr(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var c=s.indexOf("--")===0,h=Hr(s,t[s],c);s==="float"&&(s="cssFloat"),c?e.setProperty(s,h):e[s]=h}}var Ro=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cn(e,t){if(t){if(Ro[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(n(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(n(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(t.style!=null&&typeof t.style!="object")throw Error(n(62))}}function Tn(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ns=null;function ss(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ei=null,Gr=null,Vr=null;function is(e){if(e=ki(e)){if(typeof ei!="function")throw Error(n(280));var t=e.stateNode;t&&(t=_a(t),ei(e.stateNode,e.type,t))}}function ta(e){Gr?Vr?Vr.push(e):Vr=[e]:Gr=e}function ra(){if(Gr){var e=Gr,t=Vr;if(Vr=Gr=null,is(e),t)for(e=0;e<t.length;e++)is(t[e])}}function na(e,t){return e(t)}function sa(){}var ti=!1;function ia(e,t,s){if(ti)return e(t,s);ti=!0;try{return na(e,t,s)}finally{ti=!1,(Gr!==null||Vr!==null)&&(sa(),ra())}}function Jr(e,t){var s=e.stateNode;if(s===null)return null;var c=_a(s);if(c===null)return null;s=c[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(n(231,t,typeof s));return s}var ri=!1;if(m)try{var Pn={};Object.defineProperty(Pn,"passive",{get:function(){ri=!0}}),window.addEventListener("test",Pn,Pn),window.removeEventListener("test",Pn,Pn)}catch{ri=!1}function Do(e,t,s,c,h,f,v,S,T){var M=Array.prototype.slice.call(arguments,3);try{t.apply(s,M)}catch(K){this.onError(K)}}var On=!1,as=null,os=!1,ni=null,Qr={onError:function(e){On=!0,as=e}};function Lo(e,t,s,c,h,f,v,S,T){On=!1,as=null,Do.apply(Qr,arguments)}function Mo(e,t,s,c,h,f,v,S,T){if(Lo.apply(this,arguments),On){if(On){var M=as;On=!1,as=null}else throw Error(n(198));os||(os=!0,ni=M)}}function Tr(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function L(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function q(e){if(Tr(e)!==e)throw Error(n(188))}function le(e){var t=e.alternate;if(!t){if(t=Tr(e),t===null)throw Error(n(188));return t!==e?null:e}for(var s=e,c=t;;){var h=s.return;if(h===null)break;var f=h.alternate;if(f===null){if(c=h.return,c!==null){s=c;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===s)return q(h),e;if(f===c)return q(h),t;f=f.sibling}throw Error(n(188))}if(s.return!==c.return)s=h,c=f;else{for(var v=!1,S=h.child;S;){if(S===s){v=!0,s=h,c=f;break}if(S===c){v=!0,c=h,s=f;break}S=S.sibling}if(!v){for(S=f.child;S;){if(S===s){v=!0,s=f,c=h;break}if(S===c){v=!0,c=f,s=h;break}S=S.sibling}if(!v)throw Error(n(189))}}if(s.alternate!==c)throw Error(n(190))}if(s.tag!==3)throw Error(n(188));return s.stateNode.current===s?e:t}function me(e){return e=le(e),e!==null?Me(e):null}function Me(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Me(e);if(t!==null)return t;e=e.sibling}return null}var ze=r.unstable_scheduleCallback,qe=r.unstable_cancelCallback,We=r.unstable_shouldYield,$t=r.unstable_requestPaint,Je=r.unstable_now,Pr=r.unstable_getCurrentPriorityLevel,Ve=r.unstable_ImmediatePriority,rt=r.unstable_UserBlockingPriority,Qt=r.unstable_NormalPriority,An=r.unstable_LowPriority,Or=r.unstable_IdlePriority,Pe=null,rr=null;function De(e){if(rr&&typeof rr.onCommitFiberRoot=="function")try{rr.onCommitFiberRoot(Pe,e,void 0,(e.current.flags&128)===128)}catch{}}var hr=Math.clz32?Math.clz32:Ep,jp=Math.log,Np=Math.LN2;function Ep(e){return e>>>=0,e===0?32:31-(jp(e)/Np|0)|0}var aa=64,oa=4194304;function si(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function la(e,t){var s=e.pendingLanes;if(s===0)return 0;var c=0,h=e.suspendedLanes,f=e.pingedLanes,v=s&268435455;if(v!==0){var S=v&~h;S!==0?c=si(S):(f&=v,f!==0&&(c=si(f)))}else v=s&~h,v!==0?c=si(v):f!==0&&(c=si(f));if(c===0)return 0;if(t!==0&&t!==c&&(t&h)===0&&(h=c&-c,f=t&-t,h>=f||h===16&&(f&4194240)!==0))return t;if((c&4)!==0&&(c|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=c;0<t;)s=31-hr(t),h=1<<s,c|=e[s],t&=~h;return c}function Cp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tp(e,t){for(var s=e.suspendedLanes,c=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes;0<f;){var v=31-hr(f),S=1<<v,T=h[v];T===-1?((S&s)===0||(S&c)!==0)&&(h[v]=Cp(S,t)):T<=t&&(e.expiredLanes|=S),f&=~S}}function Uo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yu(){var e=aa;return aa<<=1,(aa&4194240)===0&&(aa=64),e}function Fo(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function ii(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-hr(t),e[t]=s}function Pp(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var c=e.eventTimes;for(e=e.expirationTimes;0<s;){var h=31-hr(s),f=1<<h;t[h]=0,c[h]=-1,e[h]=-1,s&=~f}}function Bo(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var c=31-hr(s),h=1<<c;h&t|e[c]&t&&(e[c]|=t),s&=~h}}var Qe=0;function vu(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var wu,Wo,xu,bu,ku,$o=!1,ca=[],Kr=null,Yr=null,Xr=null,ai=new Map,oi=new Map,Zr=[],Op="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Su(e,t){switch(e){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":ai.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":oi.delete(t.pointerId)}}function li(e,t,s,c,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:s,eventSystemFlags:c,nativeEvent:f,targetContainers:[h]},t!==null&&(t=ki(t),t!==null&&Wo(t)),e):(e.eventSystemFlags|=c,t=e.targetContainers,h!==null&&t.indexOf(h)===-1&&t.push(h),e)}function Ap(e,t,s,c,h){switch(t){case"focusin":return Kr=li(Kr,e,t,s,c,h),!0;case"dragenter":return Yr=li(Yr,e,t,s,c,h),!0;case"mouseover":return Xr=li(Xr,e,t,s,c,h),!0;case"pointerover":var f=h.pointerId;return ai.set(f,li(ai.get(f)||null,e,t,s,c,h)),!0;case"gotpointercapture":return f=h.pointerId,oi.set(f,li(oi.get(f)||null,e,t,s,c,h)),!0}return!1}function _u(e){var t=In(e.target);if(t!==null){var s=Tr(t);if(s!==null){if(t=s.tag,t===13){if(t=L(s),t!==null){e.blockedOn=t,ku(e.priority,function(){xu(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ua(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=qo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var c=new s.constructor(s.type,s);ns=c,s.target.dispatchEvent(c),ns=null}else return t=ki(s),t!==null&&Wo(t),e.blockedOn=s,!1;t.shift()}return!0}function ju(e,t,s){ua(e)&&s.delete(t)}function Ip(){$o=!1,Kr!==null&&ua(Kr)&&(Kr=null),Yr!==null&&ua(Yr)&&(Yr=null),Xr!==null&&ua(Xr)&&(Xr=null),ai.forEach(ju),oi.forEach(ju)}function ci(e,t){e.blockedOn===t&&(e.blockedOn=null,$o||($o=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ip)))}function ui(e){function t(h){return ci(h,e)}if(0<ca.length){ci(ca[0],e);for(var s=1;s<ca.length;s++){var c=ca[s];c.blockedOn===e&&(c.blockedOn=null)}}for(Kr!==null&&ci(Kr,e),Yr!==null&&ci(Yr,e),Xr!==null&&ci(Xr,e),ai.forEach(t),oi.forEach(t),s=0;s<Zr.length;s++)c=Zr[s],c.blockedOn===e&&(c.blockedOn=null);for(;0<Zr.length&&(s=Zr[0],s.blockedOn===null);)_u(s),s.blockedOn===null&&Zr.shift()}var ls=B.ReactCurrentBatchConfig,da=!0;function Rp(e,t,s,c){var h=Qe,f=ls.transition;ls.transition=null;try{Qe=1,zo(e,t,s,c)}finally{Qe=h,ls.transition=f}}function Dp(e,t,s,c){var h=Qe,f=ls.transition;ls.transition=null;try{Qe=4,zo(e,t,s,c)}finally{Qe=h,ls.transition=f}}function zo(e,t,s,c){if(da){var h=qo(e,t,s,c);if(h===null)ol(e,t,c,ha,s),Su(e,c);else if(Ap(h,e,t,s,c))c.stopPropagation();else if(Su(e,c),t&4&&-1<Op.indexOf(e)){for(;h!==null;){var f=ki(h);if(f!==null&&wu(f),f=qo(e,t,s,c),f===null&&ol(e,t,c,ha,s),f===h)break;h=f}h!==null&&c.stopPropagation()}else ol(e,t,c,null,s)}}var ha=null;function qo(e,t,s,c){if(ha=null,e=ss(c),e=In(e),e!==null)if(t=Tr(e),t===null)e=null;else if(s=t.tag,s===13){if(e=L(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ha=e,null}function Nu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pr()){case Ve:return 1;case rt:return 4;case Qt:case An:return 16;case Or:return 536870912;default:return 16}default:return 16}}var en=null,Ho=null,fa=null;function Eu(){if(fa)return fa;var e,t=Ho,s=t.length,c,h="value"in en?en.value:en.textContent,f=h.length;for(e=0;e<s&&t[e]===h[e];e++);var v=s-e;for(c=1;c<=v&&t[s-c]===h[f-c];c++);return fa=h.slice(e,1<c?1-c:void 0)}function pa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ma(){return!0}function Cu(){return!1}function Kt(e){function t(s,c,h,f,v){this._reactName=s,this._targetInst=h,this.type=c,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(s=e[S],this[S]=s?s(f):f[S]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ma:Cu,this.isPropagationStopped=Cu,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ma)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ma)},persist:function(){},isPersistent:ma}),t}var cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Go=Kt(cs),di=N({},cs,{view:0,detail:0}),Lp=Kt(di),Vo,Jo,hi,ga=N({},di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ko,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hi&&(hi&&e.type==="mousemove"?(Vo=e.screenX-hi.screenX,Jo=e.screenY-hi.screenY):Jo=Vo=0,hi=e),Vo)},movementY:function(e){return"movementY"in e?e.movementY:Jo}}),Tu=Kt(ga),Mp=N({},ga,{dataTransfer:0}),Up=Kt(Mp),Fp=N({},di,{relatedTarget:0}),Qo=Kt(Fp),Bp=N({},cs,{animationName:0,elapsedTime:0,pseudoElement:0}),Wp=Kt(Bp),$p=N({},cs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),zp=Kt($p),qp=N({},cs,{data:0}),Pu=Kt(qp),Hp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Vp[e])?!!t[e]:!1}function Ko(){return Jp}var Qp=N({},di,{key:function(e){if(e.key){var t=Hp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=pa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Gp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ko,charCode:function(e){return e.type==="keypress"?pa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?pa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Kp=Kt(Qp),Yp=N({},ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ou=Kt(Yp),Xp=N({},di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ko}),Zp=Kt(Xp),em=N({},cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),tm=Kt(em),rm=N({},ga,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),nm=Kt(rm),sm=[9,13,27,32],Yo=m&&"CompositionEvent"in window,fi=null;m&&"documentMode"in document&&(fi=document.documentMode);var im=m&&"TextEvent"in window&&!fi,Au=m&&(!Yo||fi&&8<fi&&11>=fi),Iu=" ",Ru=!1;function Du(e,t){switch(e){case"keyup":return sm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var us=!1;function am(e,t){switch(e){case"compositionend":return Lu(t);case"keypress":return t.which!==32?null:(Ru=!0,Iu);case"textInput":return e=t.data,e===Iu&&Ru?null:e;default:return null}}function om(e,t){if(us)return e==="compositionend"||!Yo&&Du(e,t)?(e=Eu(),fa=Ho=en=null,us=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Au&&t.locale!=="ko"?null:t.data;default:return null}}var lm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!lm[e.type]:t==="textarea"}function Uu(e,t,s,c){ta(c),t=ba(t,"onChange"),0<t.length&&(s=new Go("onChange","change",null,s,c),e.push({event:s,listeners:t}))}var pi=null,mi=null;function cm(e){rd(e,0)}function ya(e){var t=ms(e);if(Ge(t))return e}function um(e,t){if(e==="change")return t}var Fu=!1;if(m){var Xo;if(m){var Zo="oninput"in document;if(!Zo){var Bu=document.createElement("div");Bu.setAttribute("oninput","return;"),Zo=typeof Bu.oninput=="function"}Xo=Zo}else Xo=!1;Fu=Xo&&(!document.documentMode||9<document.documentMode)}function Wu(){pi&&(pi.detachEvent("onpropertychange",$u),mi=pi=null)}function $u(e){if(e.propertyName==="value"&&ya(mi)){var t=[];Uu(t,mi,e,ss(e)),ia(cm,t)}}function dm(e,t,s){e==="focusin"?(Wu(),pi=t,mi=s,pi.attachEvent("onpropertychange",$u)):e==="focusout"&&Wu()}function hm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ya(mi)}function fm(e,t){if(e==="click")return ya(t)}function pm(e,t){if(e==="input"||e==="change")return ya(t)}function mm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fr=typeof Object.is=="function"?Object.is:mm;function gi(e,t){if(fr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),c=Object.keys(t);if(s.length!==c.length)return!1;for(c=0;c<s.length;c++){var h=s[c];if(!p.call(t,h)||!fr(e[h],t[h]))return!1}return!0}function zu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qu(e,t){var s=zu(e);e=0;for(var c;s;){if(s.nodeType===3){if(c=e+s.textContent.length,e<=t&&c>=t)return{node:s,offset:t-e};e=c}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=zu(s)}}function Hu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Hu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Gu(){for(var e=window,t=Xe();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Xe(e.document)}return t}function el(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function gm(e){var t=Gu(),s=e.focusedElem,c=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Hu(s.ownerDocument.documentElement,s)){if(c!==null&&el(s)){if(t=c.start,e=c.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var h=s.textContent.length,f=Math.min(c.start,h);c=c.end===void 0?f:Math.min(c.end,h),!e.extend&&f>c&&(h=c,c=f,f=h),h=qu(s,f);var v=qu(s,c);h&&v&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==v.node||e.focusOffset!==v.offset)&&(t=t.createRange(),t.setStart(h.node,h.offset),e.removeAllRanges(),f>c?(e.addRange(t),e.extend(v.node,v.offset)):(t.setEnd(v.node,v.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ym=m&&"documentMode"in document&&11>=document.documentMode,ds=null,tl=null,yi=null,rl=!1;function Vu(e,t,s){var c=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;rl||ds==null||ds!==Xe(c)||(c=ds,"selectionStart"in c&&el(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),yi&&gi(yi,c)||(yi=c,c=ba(tl,"onSelect"),0<c.length&&(t=new Go("onSelect","select",null,t,s),e.push({event:t,listeners:c}),t.target=ds)))}function va(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var hs={animationend:va("Animation","AnimationEnd"),animationiteration:va("Animation","AnimationIteration"),animationstart:va("Animation","AnimationStart"),transitionend:va("Transition","TransitionEnd")},nl={},Ju={};m&&(Ju=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function wa(e){if(nl[e])return nl[e];if(!hs[e])return e;var t=hs[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Ju)return nl[e]=t[s];return e}var Qu=wa("animationend"),Ku=wa("animationiteration"),Yu=wa("animationstart"),Xu=wa("transitionend"),Zu=new Map,ed="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tn(e,t){Zu.set(e,t),u(t,[e])}for(var sl=0;sl<ed.length;sl++){var il=ed[sl],vm=il.toLowerCase(),wm=il[0].toUpperCase()+il.slice(1);tn(vm,"on"+wm)}tn(Qu,"onAnimationEnd"),tn(Ku,"onAnimationIteration"),tn(Yu,"onAnimationStart"),tn("dblclick","onDoubleClick"),tn("focusin","onFocus"),tn("focusout","onBlur"),tn(Xu,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xm=new Set("cancel close invalid load scroll toggle".split(" ").concat(vi));function td(e,t,s){var c=e.type||"unknown-event";e.currentTarget=s,Mo(c,t,void 0,e),e.currentTarget=null}function rd(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var c=e[s],h=c.event;c=c.listeners;e:{var f=void 0;if(t)for(var v=c.length-1;0<=v;v--){var S=c[v],T=S.instance,M=S.currentTarget;if(S=S.listener,T!==f&&h.isPropagationStopped())break e;td(h,S,M),f=T}else for(v=0;v<c.length;v++){if(S=c[v],T=S.instance,M=S.currentTarget,S=S.listener,T!==f&&h.isPropagationStopped())break e;td(h,S,M),f=T}}}if(os)throw e=ni,os=!1,ni=null,e}function nt(e,t){var s=t[fl];s===void 0&&(s=t[fl]=new Set);var c=e+"__bubble";s.has(c)||(nd(t,e,2,!1),s.add(c))}function al(e,t,s){var c=0;t&&(c|=4),nd(s,e,c,t)}var xa="_reactListening"+Math.random().toString(36).slice(2);function wi(e){if(!e[xa]){e[xa]=!0,a.forEach(function(s){s!=="selectionchange"&&(xm.has(s)||al(s,!1,e),al(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xa]||(t[xa]=!0,al("selectionchange",!1,t))}}function nd(e,t,s,c){switch(Nu(t)){case 1:var h=Rp;break;case 4:h=Dp;break;default:h=zo}s=h.bind(null,t,s,e),h=void 0,!ri||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(h=!0),c?h!==void 0?e.addEventListener(t,s,{capture:!0,passive:h}):e.addEventListener(t,s,!0):h!==void 0?e.addEventListener(t,s,{passive:h}):e.addEventListener(t,s,!1)}function ol(e,t,s,c,h){var f=c;if((t&1)===0&&(t&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var S=c.stateNode.containerInfo;if(S===h||S.nodeType===8&&S.parentNode===h)break;if(v===4)for(v=c.return;v!==null;){var T=v.tag;if((T===3||T===4)&&(T=v.stateNode.containerInfo,T===h||T.nodeType===8&&T.parentNode===h))return;v=v.return}for(;S!==null;){if(v=In(S),v===null)return;if(T=v.tag,T===5||T===6){c=f=v;continue e}S=S.parentNode}}c=c.return}ia(function(){var M=f,K=ss(s),X=[];e:{var Q=Zu.get(e);if(Q!==void 0){var pe=Go,ve=e;switch(e){case"keypress":if(pa(s)===0)break e;case"keydown":case"keyup":pe=Kp;break;case"focusin":ve="focus",pe=Qo;break;case"focusout":ve="blur",pe=Qo;break;case"beforeblur":case"afterblur":pe=Qo;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=Tu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=Up;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=Zp;break;case Qu:case Ku:case Yu:pe=Wp;break;case Xu:pe=tm;break;case"scroll":pe=Lp;break;case"wheel":pe=nm;break;case"copy":case"cut":case"paste":pe=zp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=Ou}var be=(t&4)!==0,ht=!be&&e==="scroll",A=be?Q!==null?Q+"Capture":null:Q;be=[];for(var P=M,D;P!==null;){D=P;var ne=D.stateNode;if(D.tag===5&&ne!==null&&(D=ne,A!==null&&(ne=Jr(P,A),ne!=null&&be.push(xi(P,ne,D)))),ht)break;P=P.return}0<be.length&&(Q=new pe(Q,ve,null,s,K),X.push({event:Q,listeners:be}))}}if((t&7)===0){e:{if(Q=e==="mouseover"||e==="pointerover",pe=e==="mouseout"||e==="pointerout",Q&&s!==ns&&(ve=s.relatedTarget||s.fromElement)&&(In(ve)||ve[Ar]))break e;if((pe||Q)&&(Q=K.window===K?K:(Q=K.ownerDocument)?Q.defaultView||Q.parentWindow:window,pe?(ve=s.relatedTarget||s.toElement,pe=M,ve=ve?In(ve):null,ve!==null&&(ht=Tr(ve),ve!==ht||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(pe=null,ve=M),pe!==ve)){if(be=Tu,ne="onMouseLeave",A="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(be=Ou,ne="onPointerLeave",A="onPointerEnter",P="pointer"),ht=pe==null?Q:ms(pe),D=ve==null?Q:ms(ve),Q=new be(ne,P+"leave",pe,s,K),Q.target=ht,Q.relatedTarget=D,ne=null,In(K)===M&&(be=new be(A,P+"enter",ve,s,K),be.target=D,be.relatedTarget=ht,ne=be),ht=ne,pe&&ve)t:{for(be=pe,A=ve,P=0,D=be;D;D=fs(D))P++;for(D=0,ne=A;ne;ne=fs(ne))D++;for(;0<P-D;)be=fs(be),P--;for(;0<D-P;)A=fs(A),D--;for(;P--;){if(be===A||A!==null&&be===A.alternate)break t;be=fs(be),A=fs(A)}be=null}else be=null;pe!==null&&sd(X,Q,pe,be,!1),ve!==null&&ht!==null&&sd(X,ht,ve,be,!0)}}e:{if(Q=M?ms(M):window,pe=Q.nodeName&&Q.nodeName.toLowerCase(),pe==="select"||pe==="input"&&Q.type==="file")var ke=um;else if(Mu(Q))if(Fu)ke=pm;else{ke=hm;var Ne=dm}else(pe=Q.nodeName)&&pe.toLowerCase()==="input"&&(Q.type==="checkbox"||Q.type==="radio")&&(ke=fm);if(ke&&(ke=ke(e,M))){Uu(X,ke,s,K);break e}Ne&&Ne(e,Q,M),e==="focusout"&&(Ne=Q._wrapperState)&&Ne.controlled&&Q.type==="number"&&xe(Q,"number",Q.value)}switch(Ne=M?ms(M):window,e){case"focusin":(Mu(Ne)||Ne.contentEditable==="true")&&(ds=Ne,tl=M,yi=null);break;case"focusout":yi=tl=ds=null;break;case"mousedown":rl=!0;break;case"contextmenu":case"mouseup":case"dragend":rl=!1,Vu(X,s,K);break;case"selectionchange":if(ym)break;case"keydown":case"keyup":Vu(X,s,K)}var Ee;if(Yo)e:{switch(e){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else us?Du(e,s)&&(Oe="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Oe="onCompositionStart");Oe&&(Au&&s.locale!=="ko"&&(us||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&us&&(Ee=Eu()):(en=K,Ho="value"in en?en.value:en.textContent,us=!0)),Ne=ba(M,Oe),0<Ne.length&&(Oe=new Pu(Oe,e,null,s,K),X.push({event:Oe,listeners:Ne}),Ee?Oe.data=Ee:(Ee=Lu(s),Ee!==null&&(Oe.data=Ee)))),(Ee=im?am(e,s):om(e,s))&&(M=ba(M,"onBeforeInput"),0<M.length&&(K=new Pu("onBeforeInput","beforeinput",null,s,K),X.push({event:K,listeners:M}),K.data=Ee))}rd(X,t)})}function xi(e,t,s){return{instance:e,listener:t,currentTarget:s}}function ba(e,t){for(var s=t+"Capture",c=[];e!==null;){var h=e,f=h.stateNode;h.tag===5&&f!==null&&(h=f,f=Jr(e,s),f!=null&&c.unshift(xi(e,f,h)),f=Jr(e,t),f!=null&&c.push(xi(e,f,h))),e=e.return}return c}function fs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function sd(e,t,s,c,h){for(var f=t._reactName,v=[];s!==null&&s!==c;){var S=s,T=S.alternate,M=S.stateNode;if(T!==null&&T===c)break;S.tag===5&&M!==null&&(S=M,h?(T=Jr(s,f),T!=null&&v.unshift(xi(s,T,S))):h||(T=Jr(s,f),T!=null&&v.push(xi(s,T,S)))),s=s.return}v.length!==0&&e.push({event:t,listeners:v})}var bm=/\r\n?/g,km=/\u0000|\uFFFD/g;function id(e){return(typeof e=="string"?e:""+e).replace(bm,`
`).replace(km,"")}function ka(e,t,s){if(t=id(t),id(e)!==t&&s)throw Error(n(425))}function Sa(){}var ll=null,cl=null;function ul(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var dl=typeof setTimeout=="function"?setTimeout:void 0,Sm=typeof clearTimeout=="function"?clearTimeout:void 0,ad=typeof Promise=="function"?Promise:void 0,_m=typeof queueMicrotask=="function"?queueMicrotask:typeof ad<"u"?function(e){return ad.resolve(null).then(e).catch(jm)}:dl;function jm(e){setTimeout(function(){throw e})}function hl(e,t){var s=t,c=0;do{var h=s.nextSibling;if(e.removeChild(s),h&&h.nodeType===8)if(s=h.data,s==="/$"){if(c===0){e.removeChild(h),ui(t);return}c--}else s!=="$"&&s!=="$?"&&s!=="$!"||c++;s=h}while(s);ui(t)}function rn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function od(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var ps=Math.random().toString(36).slice(2),Sr="__reactFiber$"+ps,bi="__reactProps$"+ps,Ar="__reactContainer$"+ps,fl="__reactEvents$"+ps,Nm="__reactListeners$"+ps,Em="__reactHandles$"+ps;function In(e){var t=e[Sr];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Ar]||s[Sr]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=od(e);e!==null;){if(s=e[Sr])return s;e=od(e)}return t}e=s,s=e.parentNode}return null}function ki(e){return e=e[Sr]||e[Ar],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ms(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(n(33))}function _a(e){return e[bi]||null}var pl=[],gs=-1;function nn(e){return{current:e}}function st(e){0>gs||(e.current=pl[gs],pl[gs]=null,gs--)}function Ze(e,t){gs++,pl[gs]=e.current,e.current=t}var sn={},It=nn(sn),zt=nn(!1),Rn=sn;function ys(e,t){var s=e.type.contextTypes;if(!s)return sn;var c=e.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===t)return c.__reactInternalMemoizedMaskedChildContext;var h={},f;for(f in s)h[f]=t[f];return c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=h),h}function qt(e){return e=e.childContextTypes,e!=null}function ja(){st(zt),st(It)}function ld(e,t,s){if(It.current!==sn)throw Error(n(168));Ze(It,t),Ze(zt,s)}function cd(e,t,s){var c=e.stateNode;if(t=t.childContextTypes,typeof c.getChildContext!="function")return s;c=c.getChildContext();for(var h in c)if(!(h in t))throw Error(n(108,se(e)||"Unknown",h));return N({},s,c)}function Na(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||sn,Rn=It.current,Ze(It,e),Ze(zt,zt.current),!0}function ud(e,t,s){var c=e.stateNode;if(!c)throw Error(n(169));s?(e=cd(e,t,Rn),c.__reactInternalMemoizedMergedChildContext=e,st(zt),st(It),Ze(It,e)):st(zt),Ze(zt,s)}var Ir=null,Ea=!1,ml=!1;function dd(e){Ir===null?Ir=[e]:Ir.push(e)}function Cm(e){Ea=!0,dd(e)}function an(){if(!ml&&Ir!==null){ml=!0;var e=0,t=Qe;try{var s=Ir;for(Qe=1;e<s.length;e++){var c=s[e];do c=c(!0);while(c!==null)}Ir=null,Ea=!1}catch(h){throw Ir!==null&&(Ir=Ir.slice(e+1)),ze(Ve,an),h}finally{Qe=t,ml=!1}}return null}var vs=[],ws=0,Ca=null,Ta=0,nr=[],sr=0,Dn=null,Rr=1,Dr="";function Ln(e,t){vs[ws++]=Ta,vs[ws++]=Ca,Ca=e,Ta=t}function hd(e,t,s){nr[sr++]=Rr,nr[sr++]=Dr,nr[sr++]=Dn,Dn=e;var c=Rr;e=Dr;var h=32-hr(c)-1;c&=~(1<<h),s+=1;var f=32-hr(t)+h;if(30<f){var v=h-h%5;f=(c&(1<<v)-1).toString(32),c>>=v,h-=v,Rr=1<<32-hr(t)+h|s<<h|c,Dr=f+e}else Rr=1<<f|s<<h|c,Dr=e}function gl(e){e.return!==null&&(Ln(e,1),hd(e,1,0))}function yl(e){for(;e===Ca;)Ca=vs[--ws],vs[ws]=null,Ta=vs[--ws],vs[ws]=null;for(;e===Dn;)Dn=nr[--sr],nr[sr]=null,Dr=nr[--sr],nr[sr]=null,Rr=nr[--sr],nr[sr]=null}var Yt=null,Xt=null,at=!1,pr=null;function fd(e,t){var s=lr(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function pd(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Yt=e,Xt=rn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Yt=e,Xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Dn!==null?{id:Rr,overflow:Dr}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=lr(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,Yt=e,Xt=null,!0):!1;default:return!1}}function vl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function wl(e){if(at){var t=Xt;if(t){var s=t;if(!pd(e,t)){if(vl(e))throw Error(n(418));t=rn(s.nextSibling);var c=Yt;t&&pd(e,t)?fd(c,s):(e.flags=e.flags&-4097|2,at=!1,Yt=e)}}else{if(vl(e))throw Error(n(418));e.flags=e.flags&-4097|2,at=!1,Yt=e}}}function md(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Yt=e}function Pa(e){if(e!==Yt)return!1;if(!at)return md(e),at=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ul(e.type,e.memoizedProps)),t&&(t=Xt)){if(vl(e))throw gd(),Error(n(418));for(;t;)fd(e,t),t=rn(t.nextSibling)}if(md(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Xt=rn(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Xt=null}}else Xt=Yt?rn(e.stateNode.nextSibling):null;return!0}function gd(){for(var e=Xt;e;)e=rn(e.nextSibling)}function xs(){Xt=Yt=null,at=!1}function xl(e){pr===null?pr=[e]:pr.push(e)}var Tm=B.ReactCurrentBatchConfig;function Si(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(n(309));var c=s.stateNode}if(!c)throw Error(n(147,e));var h=c,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(v){var S=h.refs;v===null?delete S[f]:S[f]=v},t._stringRef=f,t)}if(typeof e!="string")throw Error(n(284));if(!s._owner)throw Error(n(290,e))}return e}function Oa(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yd(e){var t=e._init;return t(e._payload)}function vd(e){function t(A,P){if(e){var D=A.deletions;D===null?(A.deletions=[P],A.flags|=16):D.push(P)}}function s(A,P){if(!e)return null;for(;P!==null;)t(A,P),P=P.sibling;return null}function c(A,P){for(A=new Map;P!==null;)P.key!==null?A.set(P.key,P):A.set(P.index,P),P=P.sibling;return A}function h(A,P){return A=pn(A,P),A.index=0,A.sibling=null,A}function f(A,P,D){return A.index=D,e?(D=A.alternate,D!==null?(D=D.index,D<P?(A.flags|=2,P):D):(A.flags|=2,P)):(A.flags|=1048576,P)}function v(A){return e&&A.alternate===null&&(A.flags|=2),A}function S(A,P,D,ne){return P===null||P.tag!==6?(P=dc(D,A.mode,ne),P.return=A,P):(P=h(P,D),P.return=A,P)}function T(A,P,D,ne){var ke=D.type;return ke===W?K(A,P,D.props.children,ne,D.key):P!==null&&(P.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===re&&yd(ke)===P.type)?(ne=h(P,D.props),ne.ref=Si(A,P,D),ne.return=A,ne):(ne=to(D.type,D.key,D.props,null,A.mode,ne),ne.ref=Si(A,P,D),ne.return=A,ne)}function M(A,P,D,ne){return P===null||P.tag!==4||P.stateNode.containerInfo!==D.containerInfo||P.stateNode.implementation!==D.implementation?(P=hc(D,A.mode,ne),P.return=A,P):(P=h(P,D.children||[]),P.return=A,P)}function K(A,P,D,ne,ke){return P===null||P.tag!==7?(P=qn(D,A.mode,ne,ke),P.return=A,P):(P=h(P,D),P.return=A,P)}function X(A,P,D){if(typeof P=="string"&&P!==""||typeof P=="number")return P=dc(""+P,A.mode,D),P.return=A,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Z:return D=to(P.type,P.key,P.props,null,A.mode,D),D.ref=Si(A,null,P),D.return=A,D;case J:return P=hc(P,A.mode,D),P.return=A,P;case re:var ne=P._init;return X(A,ne(P._payload),D)}if(Se(P)||de(P))return P=qn(P,A.mode,D,null),P.return=A,P;Oa(A,P)}return null}function Q(A,P,D,ne){var ke=P!==null?P.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return ke!==null?null:S(A,P,""+D,ne);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Z:return D.key===ke?T(A,P,D,ne):null;case J:return D.key===ke?M(A,P,D,ne):null;case re:return ke=D._init,Q(A,P,ke(D._payload),ne)}if(Se(D)||de(D))return ke!==null?null:K(A,P,D,ne,null);Oa(A,D)}return null}function pe(A,P,D,ne,ke){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return A=A.get(D)||null,S(P,A,""+ne,ke);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case Z:return A=A.get(ne.key===null?D:ne.key)||null,T(P,A,ne,ke);case J:return A=A.get(ne.key===null?D:ne.key)||null,M(P,A,ne,ke);case re:var Ne=ne._init;return pe(A,P,D,Ne(ne._payload),ke)}if(Se(ne)||de(ne))return A=A.get(D)||null,K(P,A,ne,ke,null);Oa(P,ne)}return null}function ve(A,P,D,ne){for(var ke=null,Ne=null,Ee=P,Oe=P=0,jt=null;Ee!==null&&Oe<D.length;Oe++){Ee.index>Oe?(jt=Ee,Ee=null):jt=Ee.sibling;var He=Q(A,Ee,D[Oe],ne);if(He===null){Ee===null&&(Ee=jt);break}e&&Ee&&He.alternate===null&&t(A,Ee),P=f(He,P,Oe),Ne===null?ke=He:Ne.sibling=He,Ne=He,Ee=jt}if(Oe===D.length)return s(A,Ee),at&&Ln(A,Oe),ke;if(Ee===null){for(;Oe<D.length;Oe++)Ee=X(A,D[Oe],ne),Ee!==null&&(P=f(Ee,P,Oe),Ne===null?ke=Ee:Ne.sibling=Ee,Ne=Ee);return at&&Ln(A,Oe),ke}for(Ee=c(A,Ee);Oe<D.length;Oe++)jt=pe(Ee,A,Oe,D[Oe],ne),jt!==null&&(e&&jt.alternate!==null&&Ee.delete(jt.key===null?Oe:jt.key),P=f(jt,P,Oe),Ne===null?ke=jt:Ne.sibling=jt,Ne=jt);return e&&Ee.forEach(function(mn){return t(A,mn)}),at&&Ln(A,Oe),ke}function be(A,P,D,ne){var ke=de(D);if(typeof ke!="function")throw Error(n(150));if(D=ke.call(D),D==null)throw Error(n(151));for(var Ne=ke=null,Ee=P,Oe=P=0,jt=null,He=D.next();Ee!==null&&!He.done;Oe++,He=D.next()){Ee.index>Oe?(jt=Ee,Ee=null):jt=Ee.sibling;var mn=Q(A,Ee,He.value,ne);if(mn===null){Ee===null&&(Ee=jt);break}e&&Ee&&mn.alternate===null&&t(A,Ee),P=f(mn,P,Oe),Ne===null?ke=mn:Ne.sibling=mn,Ne=mn,Ee=jt}if(He.done)return s(A,Ee),at&&Ln(A,Oe),ke;if(Ee===null){for(;!He.done;Oe++,He=D.next())He=X(A,He.value,ne),He!==null&&(P=f(He,P,Oe),Ne===null?ke=He:Ne.sibling=He,Ne=He);return at&&Ln(A,Oe),ke}for(Ee=c(A,Ee);!He.done;Oe++,He=D.next())He=pe(Ee,A,Oe,He.value,ne),He!==null&&(e&&He.alternate!==null&&Ee.delete(He.key===null?Oe:He.key),P=f(He,P,Oe),Ne===null?ke=He:Ne.sibling=He,Ne=He);return e&&Ee.forEach(function(lg){return t(A,lg)}),at&&Ln(A,Oe),ke}function ht(A,P,D,ne){if(typeof D=="object"&&D!==null&&D.type===W&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case Z:e:{for(var ke=D.key,Ne=P;Ne!==null;){if(Ne.key===ke){if(ke=D.type,ke===W){if(Ne.tag===7){s(A,Ne.sibling),P=h(Ne,D.props.children),P.return=A,A=P;break e}}else if(Ne.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===re&&yd(ke)===Ne.type){s(A,Ne.sibling),P=h(Ne,D.props),P.ref=Si(A,Ne,D),P.return=A,A=P;break e}s(A,Ne);break}else t(A,Ne);Ne=Ne.sibling}D.type===W?(P=qn(D.props.children,A.mode,ne,D.key),P.return=A,A=P):(ne=to(D.type,D.key,D.props,null,A.mode,ne),ne.ref=Si(A,P,D),ne.return=A,A=ne)}return v(A);case J:e:{for(Ne=D.key;P!==null;){if(P.key===Ne)if(P.tag===4&&P.stateNode.containerInfo===D.containerInfo&&P.stateNode.implementation===D.implementation){s(A,P.sibling),P=h(P,D.children||[]),P.return=A,A=P;break e}else{s(A,P);break}else t(A,P);P=P.sibling}P=hc(D,A.mode,ne),P.return=A,A=P}return v(A);case re:return Ne=D._init,ht(A,P,Ne(D._payload),ne)}if(Se(D))return ve(A,P,D,ne);if(de(D))return be(A,P,D,ne);Oa(A,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,P!==null&&P.tag===6?(s(A,P.sibling),P=h(P,D),P.return=A,A=P):(s(A,P),P=dc(D,A.mode,ne),P.return=A,A=P),v(A)):s(A,P)}return ht}var bs=vd(!0),wd=vd(!1),Aa=nn(null),Ia=null,ks=null,bl=null;function kl(){bl=ks=Ia=null}function Sl(e){var t=Aa.current;st(Aa),e._currentValue=t}function _l(e,t,s){for(;e!==null;){var c=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,c!==null&&(c.childLanes|=t)):c!==null&&(c.childLanes&t)!==t&&(c.childLanes|=t),e===s)break;e=e.return}}function Ss(e,t){Ia=e,bl=ks=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Ht=!0),e.firstContext=null)}function ir(e){var t=e._currentValue;if(bl!==e)if(e={context:e,memoizedValue:t,next:null},ks===null){if(Ia===null)throw Error(n(308));ks=e,Ia.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var Mn=null;function jl(e){Mn===null?Mn=[e]:Mn.push(e)}function xd(e,t,s,c){var h=t.interleaved;return h===null?(s.next=s,jl(t)):(s.next=h.next,h.next=s),t.interleaved=s,Lr(e,c)}function Lr(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var on=!1;function Nl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ln(e,t,s){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,($e&2)!==0){var h=c.pending;return h===null?t.next=t:(t.next=h.next,h.next=t),c.pending=t,Lr(e,s)}return h=c.interleaved,h===null?(t.next=t,jl(c)):(t.next=h.next,h.next=t),c.interleaved=t,Lr(e,s)}function Ra(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var c=t.lanes;c&=e.pendingLanes,s|=c,t.lanes=s,Bo(e,s)}}function kd(e,t){var s=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,s===c)){var h=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var v={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};f===null?h=f=v:f=f.next=v,s=s.next}while(s!==null);f===null?h=f=t:f=f.next=t}else h=f=t;s={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:c.shared,effects:c.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Da(e,t,s,c){var h=e.updateQueue;on=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var T=S,M=T.next;T.next=null,v===null?f=M:v.next=M,v=T;var K=e.alternate;K!==null&&(K=K.updateQueue,S=K.lastBaseUpdate,S!==v&&(S===null?K.firstBaseUpdate=M:S.next=M,K.lastBaseUpdate=T))}if(f!==null){var X=h.baseState;v=0,K=M=T=null,S=f;do{var Q=S.lane,pe=S.eventTime;if((c&Q)===Q){K!==null&&(K=K.next={eventTime:pe,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ve=e,be=S;switch(Q=t,pe=s,be.tag){case 1:if(ve=be.payload,typeof ve=="function"){X=ve.call(pe,X,Q);break e}X=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=be.payload,Q=typeof ve=="function"?ve.call(pe,X,Q):ve,Q==null)break e;X=N({},X,Q);break e;case 2:on=!0}}S.callback!==null&&S.lane!==0&&(e.flags|=64,Q=h.effects,Q===null?h.effects=[S]:Q.push(S))}else pe={eventTime:pe,lane:Q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},K===null?(M=K=pe,T=X):K=K.next=pe,v|=Q;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;Q=S,S=Q.next,Q.next=null,h.lastBaseUpdate=Q,h.shared.pending=null}}while(!0);if(K===null&&(T=X),h.baseState=T,h.firstBaseUpdate=M,h.lastBaseUpdate=K,t=h.shared.interleaved,t!==null){h=t;do v|=h.lane,h=h.next;while(h!==t)}else f===null&&(h.shared.lanes=0);Bn|=v,e.lanes=v,e.memoizedState=X}}function Sd(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var c=e[t],h=c.callback;if(h!==null){if(c.callback=null,c=s,typeof h!="function")throw Error(n(191,h));h.call(c)}}}var _i={},_r=nn(_i),ji=nn(_i),Ni=nn(_i);function Un(e){if(e===_i)throw Error(n(174));return e}function El(e,t){switch(Ze(Ni,t),Ze(ji,e),Ze(_r,_i),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Pt(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Pt(t,e)}st(_r),Ze(_r,t)}function _s(){st(_r),st(ji),st(Ni)}function _d(e){Un(Ni.current);var t=Un(_r.current),s=Pt(t,e.type);t!==s&&(Ze(ji,e),Ze(_r,s))}function Cl(e){ji.current===e&&(st(_r),st(ji))}var ot=nn(0);function La(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Tl=[];function Pl(){for(var e=0;e<Tl.length;e++)Tl[e]._workInProgressVersionPrimary=null;Tl.length=0}var Ma=B.ReactCurrentDispatcher,Ol=B.ReactCurrentBatchConfig,Fn=0,lt=null,gt=null,St=null,Ua=!1,Ei=!1,Ci=0,Pm=0;function Rt(){throw Error(n(321))}function Al(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!fr(e[s],t[s]))return!1;return!0}function Il(e,t,s,c,h,f){if(Fn=f,lt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ma.current=e===null||e.memoizedState===null?Rm:Dm,e=s(c,h),Ei){f=0;do{if(Ei=!1,Ci=0,25<=f)throw Error(n(301));f+=1,St=gt=null,t.updateQueue=null,Ma.current=Lm,e=s(c,h)}while(Ei)}if(Ma.current=Wa,t=gt!==null&&gt.next!==null,Fn=0,St=gt=lt=null,Ua=!1,t)throw Error(n(300));return e}function Rl(){var e=Ci!==0;return Ci=0,e}function jr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?lt.memoizedState=St=e:St=St.next=e,St}function ar(){if(gt===null){var e=lt.alternate;e=e!==null?e.memoizedState:null}else e=gt.next;var t=St===null?lt.memoizedState:St.next;if(t!==null)St=t,gt=e;else{if(e===null)throw Error(n(310));gt=e,e={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},St===null?lt.memoizedState=St=e:St=St.next=e}return St}function Ti(e,t){return typeof t=="function"?t(e):t}function Dl(e){var t=ar(),s=t.queue;if(s===null)throw Error(n(311));s.lastRenderedReducer=e;var c=gt,h=c.baseQueue,f=s.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}c.baseQueue=h=f,s.pending=null}if(h!==null){f=h.next,c=c.baseState;var S=v=null,T=null,M=f;do{var K=M.lane;if((Fn&K)===K)T!==null&&(T=T.next={lane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),c=M.hasEagerState?M.eagerState:e(c,M.action);else{var X={lane:K,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null};T===null?(S=T=X,v=c):T=T.next=X,lt.lanes|=K,Bn|=K}M=M.next}while(M!==null&&M!==f);T===null?v=c:T.next=S,fr(c,t.memoizedState)||(Ht=!0),t.memoizedState=c,t.baseState=v,t.baseQueue=T,s.lastRenderedState=c}if(e=s.interleaved,e!==null){h=e;do f=h.lane,lt.lanes|=f,Bn|=f,h=h.next;while(h!==e)}else h===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Ll(e){var t=ar(),s=t.queue;if(s===null)throw Error(n(311));s.lastRenderedReducer=e;var c=s.dispatch,h=s.pending,f=t.memoizedState;if(h!==null){s.pending=null;var v=h=h.next;do f=e(f,v.action),v=v.next;while(v!==h);fr(f,t.memoizedState)||(Ht=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),s.lastRenderedState=f}return[f,c]}function jd(){}function Nd(e,t){var s=lt,c=ar(),h=t(),f=!fr(c.memoizedState,h);if(f&&(c.memoizedState=h,Ht=!0),c=c.queue,Ml(Td.bind(null,s,c,e),[e]),c.getSnapshot!==t||f||St!==null&&St.memoizedState.tag&1){if(s.flags|=2048,Pi(9,Cd.bind(null,s,c,h,t),void 0,null),_t===null)throw Error(n(349));(Fn&30)!==0||Ed(s,t,h)}return h}function Ed(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=lt.updateQueue,t===null?(t={lastEffect:null,stores:null},lt.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Cd(e,t,s,c){t.value=s,t.getSnapshot=c,Pd(t)&&Od(e)}function Td(e,t,s){return s(function(){Pd(t)&&Od(e)})}function Pd(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!fr(e,s)}catch{return!0}}function Od(e){var t=Lr(e,1);t!==null&&vr(t,e,1,-1)}function Ad(e){var t=jr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:e},t.queue=e,e=e.dispatch=Im.bind(null,lt,e),[t.memoizedState,e]}function Pi(e,t,s,c){return e={tag:e,create:t,destroy:s,deps:c,next:null},t=lt.updateQueue,t===null?(t={lastEffect:null,stores:null},lt.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(c=s.next,s.next=e,e.next=c,t.lastEffect=e)),e}function Id(){return ar().memoizedState}function Fa(e,t,s,c){var h=jr();lt.flags|=e,h.memoizedState=Pi(1|t,s,void 0,c===void 0?null:c)}function Ba(e,t,s,c){var h=ar();c=c===void 0?null:c;var f=void 0;if(gt!==null){var v=gt.memoizedState;if(f=v.destroy,c!==null&&Al(c,v.deps)){h.memoizedState=Pi(t,s,f,c);return}}lt.flags|=e,h.memoizedState=Pi(1|t,s,f,c)}function Rd(e,t){return Fa(8390656,8,e,t)}function Ml(e,t){return Ba(2048,8,e,t)}function Dd(e,t){return Ba(4,2,e,t)}function Ld(e,t){return Ba(4,4,e,t)}function Md(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ud(e,t,s){return s=s!=null?s.concat([e]):null,Ba(4,4,Md.bind(null,t,e),s)}function Ul(){}function Fd(e,t){var s=ar();t=t===void 0?null:t;var c=s.memoizedState;return c!==null&&t!==null&&Al(t,c[1])?c[0]:(s.memoizedState=[e,t],e)}function Bd(e,t){var s=ar();t=t===void 0?null:t;var c=s.memoizedState;return c!==null&&t!==null&&Al(t,c[1])?c[0]:(e=e(),s.memoizedState=[e,t],e)}function Wd(e,t,s){return(Fn&21)===0?(e.baseState&&(e.baseState=!1,Ht=!0),e.memoizedState=s):(fr(s,t)||(s=yu(),lt.lanes|=s,Bn|=s,e.baseState=!0),t)}function Om(e,t){var s=Qe;Qe=s!==0&&4>s?s:4,e(!0);var c=Ol.transition;Ol.transition={};try{e(!1),t()}finally{Qe=s,Ol.transition=c}}function $d(){return ar().memoizedState}function Am(e,t,s){var c=hn(e);if(s={lane:c,action:s,hasEagerState:!1,eagerState:null,next:null},zd(e))qd(t,s);else if(s=xd(e,t,s,c),s!==null){var h=Bt();vr(s,e,c,h),Hd(s,t,c)}}function Im(e,t,s){var c=hn(e),h={lane:c,action:s,hasEagerState:!1,eagerState:null,next:null};if(zd(e))qd(t,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var v=t.lastRenderedState,S=f(v,s);if(h.hasEagerState=!0,h.eagerState=S,fr(S,v)){var T=t.interleaved;T===null?(h.next=h,jl(t)):(h.next=T.next,T.next=h),t.interleaved=h;return}}catch{}finally{}s=xd(e,t,h,c),s!==null&&(h=Bt(),vr(s,e,c,h),Hd(s,t,c))}}function zd(e){var t=e.alternate;return e===lt||t!==null&&t===lt}function qd(e,t){Ei=Ua=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Hd(e,t,s){if((s&4194240)!==0){var c=t.lanes;c&=e.pendingLanes,s|=c,t.lanes=s,Bo(e,s)}}var Wa={readContext:ir,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},Rm={readContext:ir,useCallback:function(e,t){return jr().memoizedState=[e,t===void 0?null:t],e},useContext:ir,useEffect:Rd,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Fa(4194308,4,Md.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Fa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fa(4,2,e,t)},useMemo:function(e,t){var s=jr();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var c=jr();return t=s!==void 0?s(t):t,c.memoizedState=c.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},c.queue=e,e=e.dispatch=Am.bind(null,lt,e),[c.memoizedState,e]},useRef:function(e){var t=jr();return e={current:e},t.memoizedState=e},useState:Ad,useDebugValue:Ul,useDeferredValue:function(e){return jr().memoizedState=e},useTransition:function(){var e=Ad(!1),t=e[0];return e=Om.bind(null,e[1]),jr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var c=lt,h=jr();if(at){if(s===void 0)throw Error(n(407));s=s()}else{if(s=t(),_t===null)throw Error(n(349));(Fn&30)!==0||Ed(c,t,s)}h.memoizedState=s;var f={value:s,getSnapshot:t};return h.queue=f,Rd(Td.bind(null,c,f,e),[e]),c.flags|=2048,Pi(9,Cd.bind(null,c,f,s,t),void 0,null),s},useId:function(){var e=jr(),t=_t.identifierPrefix;if(at){var s=Dr,c=Rr;s=(c&~(1<<32-hr(c)-1)).toString(32)+s,t=":"+t+"R"+s,s=Ci++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=Pm++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Dm={readContext:ir,useCallback:Fd,useContext:ir,useEffect:Ml,useImperativeHandle:Ud,useInsertionEffect:Dd,useLayoutEffect:Ld,useMemo:Bd,useReducer:Dl,useRef:Id,useState:function(){return Dl(Ti)},useDebugValue:Ul,useDeferredValue:function(e){var t=ar();return Wd(t,gt.memoizedState,e)},useTransition:function(){var e=Dl(Ti)[0],t=ar().memoizedState;return[e,t]},useMutableSource:jd,useSyncExternalStore:Nd,useId:$d,unstable_isNewReconciler:!1},Lm={readContext:ir,useCallback:Fd,useContext:ir,useEffect:Ml,useImperativeHandle:Ud,useInsertionEffect:Dd,useLayoutEffect:Ld,useMemo:Bd,useReducer:Ll,useRef:Id,useState:function(){return Ll(Ti)},useDebugValue:Ul,useDeferredValue:function(e){var t=ar();return gt===null?t.memoizedState=e:Wd(t,gt.memoizedState,e)},useTransition:function(){var e=Ll(Ti)[0],t=ar().memoizedState;return[e,t]},useMutableSource:jd,useSyncExternalStore:Nd,useId:$d,unstable_isNewReconciler:!1};function mr(e,t){if(e&&e.defaultProps){t=N({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Fl(e,t,s,c){t=e.memoizedState,s=s(c,t),s=s==null?t:N({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var $a={isMounted:function(e){return(e=e._reactInternals)?Tr(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var c=Bt(),h=hn(e),f=Mr(c,h);f.payload=t,s!=null&&(f.callback=s),t=ln(e,f,h),t!==null&&(vr(t,e,h,c),Ra(t,e,h))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var c=Bt(),h=hn(e),f=Mr(c,h);f.tag=1,f.payload=t,s!=null&&(f.callback=s),t=ln(e,f,h),t!==null&&(vr(t,e,h,c),Ra(t,e,h))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Bt(),c=hn(e),h=Mr(s,c);h.tag=2,t!=null&&(h.callback=t),t=ln(e,h,c),t!==null&&(vr(t,e,c,s),Ra(t,e,c))}};function Gd(e,t,s,c,h,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,f,v):t.prototype&&t.prototype.isPureReactComponent?!gi(s,c)||!gi(h,f):!0}function Vd(e,t,s){var c=!1,h=sn,f=t.contextType;return typeof f=="object"&&f!==null?f=ir(f):(h=qt(t)?Rn:It.current,c=t.contextTypes,f=(c=c!=null)?ys(e,h):sn),t=new t(s,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=$a,e.stateNode=t,t._reactInternals=e,c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=f),t}function Jd(e,t,s,c){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,c),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,c),t.state!==e&&$a.enqueueReplaceState(t,t.state,null)}function Bl(e,t,s,c){var h=e.stateNode;h.props=s,h.state=e.memoizedState,h.refs={},Nl(e);var f=t.contextType;typeof f=="object"&&f!==null?h.context=ir(f):(f=qt(t)?Rn:It.current,h.context=ys(e,f)),h.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(Fl(e,t,f,s),h.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(t=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),t!==h.state&&$a.enqueueReplaceState(h,h.state,null),Da(e,s,h,c),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function js(e,t){try{var s="",c=t;do s+=ae(c),c=c.return;while(c);var h=s}catch(f){h=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:h,digest:null}}function Wl(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function $l(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var Mm=typeof WeakMap=="function"?WeakMap:Map;function Qd(e,t,s){s=Mr(-1,s),s.tag=3,s.payload={element:null};var c=t.value;return s.callback=function(){Qa||(Qa=!0,nc=c),$l(e,t)},s}function Kd(e,t,s){s=Mr(-1,s),s.tag=3;var c=e.type.getDerivedStateFromError;if(typeof c=="function"){var h=t.value;s.payload=function(){return c(h)},s.callback=function(){$l(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(s.callback=function(){$l(e,t),typeof c!="function"&&(un===null?un=new Set([this]):un.add(this));var v=t.stack;this.componentDidCatch(t.value,{componentStack:v!==null?v:""})}),s}function Yd(e,t,s){var c=e.pingCache;if(c===null){c=e.pingCache=new Mm;var h=new Set;c.set(t,h)}else h=c.get(t),h===void 0&&(h=new Set,c.set(t,h));h.has(s)||(h.add(s),e=Ym.bind(null,e,t,s),t.then(e,e))}function Xd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zd(e,t,s,c,h){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Mr(-1,1),t.tag=2,ln(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=h,e)}var Um=B.ReactCurrentOwner,Ht=!1;function Ft(e,t,s,c){t.child=e===null?wd(t,null,s,c):bs(t,e.child,s,c)}function eh(e,t,s,c,h){s=s.render;var f=t.ref;return Ss(t,h),c=Il(e,t,s,c,f,h),s=Rl(),e!==null&&!Ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,Ur(e,t,h)):(at&&s&&gl(t),t.flags|=1,Ft(e,t,c,h),t.child)}function th(e,t,s,c,h){if(e===null){var f=s.type;return typeof f=="function"&&!uc(f)&&f.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=f,rh(e,t,f,c,h)):(e=to(s.type,null,c,t,t.mode,h),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&h)===0){var v=f.memoizedProps;if(s=s.compare,s=s!==null?s:gi,s(v,c)&&e.ref===t.ref)return Ur(e,t,h)}return t.flags|=1,e=pn(f,c),e.ref=t.ref,e.return=t,t.child=e}function rh(e,t,s,c,h){if(e!==null){var f=e.memoizedProps;if(gi(f,c)&&e.ref===t.ref)if(Ht=!1,t.pendingProps=c=f,(e.lanes&h)!==0)(e.flags&131072)!==0&&(Ht=!0);else return t.lanes=e.lanes,Ur(e,t,h)}return zl(e,t,s,c,h)}function nh(e,t,s){var c=t.pendingProps,h=c.children,f=e!==null?e.memoizedState:null;if(c.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(Es,Zt),Zt|=s;else{if((s&1073741824)===0)return e=f!==null?f.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ze(Es,Zt),Zt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=f!==null?f.baseLanes:s,Ze(Es,Zt),Zt|=c}else f!==null?(c=f.baseLanes|s,t.memoizedState=null):c=s,Ze(Es,Zt),Zt|=c;return Ft(e,t,h,s),t.child}function sh(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function zl(e,t,s,c,h){var f=qt(s)?Rn:It.current;return f=ys(t,f),Ss(t,h),s=Il(e,t,s,c,f,h),c=Rl(),e!==null&&!Ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,Ur(e,t,h)):(at&&c&&gl(t),t.flags|=1,Ft(e,t,s,h),t.child)}function ih(e,t,s,c,h){if(qt(s)){var f=!0;Na(t)}else f=!1;if(Ss(t,h),t.stateNode===null)qa(e,t),Vd(t,s,c),Bl(t,s,c,h),c=!0;else if(e===null){var v=t.stateNode,S=t.memoizedProps;v.props=S;var T=v.context,M=s.contextType;typeof M=="object"&&M!==null?M=ir(M):(M=qt(s)?Rn:It.current,M=ys(t,M));var K=s.getDerivedStateFromProps,X=typeof K=="function"||typeof v.getSnapshotBeforeUpdate=="function";X||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==c||T!==M)&&Jd(t,v,c,M),on=!1;var Q=t.memoizedState;v.state=Q,Da(t,c,v,h),T=t.memoizedState,S!==c||Q!==T||zt.current||on?(typeof K=="function"&&(Fl(t,s,K,c),T=t.memoizedState),(S=on||Gd(t,s,S,c,Q,T,M))?(X||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(t.flags|=4194308)):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=c,t.memoizedState=T),v.props=c,v.state=T,v.context=M,c=S):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),c=!1)}else{v=t.stateNode,bd(e,t),S=t.memoizedProps,M=t.type===t.elementType?S:mr(t.type,S),v.props=M,X=t.pendingProps,Q=v.context,T=s.contextType,typeof T=="object"&&T!==null?T=ir(T):(T=qt(s)?Rn:It.current,T=ys(t,T));var pe=s.getDerivedStateFromProps;(K=typeof pe=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==X||Q!==T)&&Jd(t,v,c,T),on=!1,Q=t.memoizedState,v.state=Q,Da(t,c,v,h);var ve=t.memoizedState;S!==X||Q!==ve||zt.current||on?(typeof pe=="function"&&(Fl(t,s,pe,c),ve=t.memoizedState),(M=on||Gd(t,s,M,c,Q,ve,T)||!1)?(K||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,ve,T),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,ve,T)),typeof v.componentDidUpdate=="function"&&(t.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===e.memoizedProps&&Q===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&Q===e.memoizedState||(t.flags|=1024),t.memoizedProps=c,t.memoizedState=ve),v.props=c,v.state=ve,v.context=T,c=M):(typeof v.componentDidUpdate!="function"||S===e.memoizedProps&&Q===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&Q===e.memoizedState||(t.flags|=1024),c=!1)}return ql(e,t,s,c,f,h)}function ql(e,t,s,c,h,f){sh(e,t);var v=(t.flags&128)!==0;if(!c&&!v)return h&&ud(t,s,!1),Ur(e,t,f);c=t.stateNode,Um.current=t;var S=v&&typeof s.getDerivedStateFromError!="function"?null:c.render();return t.flags|=1,e!==null&&v?(t.child=bs(t,e.child,null,f),t.child=bs(t,null,S,f)):Ft(e,t,S,f),t.memoizedState=c.state,h&&ud(t,s,!0),t.child}function ah(e){var t=e.stateNode;t.pendingContext?ld(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ld(e,t.context,!1),El(e,t.containerInfo)}function oh(e,t,s,c,h){return xs(),xl(h),t.flags|=256,Ft(e,t,s,c),t.child}var Hl={dehydrated:null,treeContext:null,retryLane:0};function Gl(e){return{baseLanes:e,cachePool:null,transitions:null}}function lh(e,t,s){var c=t.pendingProps,h=ot.current,f=!1,v=(t.flags&128)!==0,S;if((S=v)||(S=e!==null&&e.memoizedState===null?!1:(h&2)!==0),S?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),Ze(ot,h&1),e===null)return wl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(v=c.children,e=c.fallback,f?(c=t.mode,f=t.child,v={mode:"hidden",children:v},(c&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=v):f=ro(v,c,0,null),e=qn(e,c,s,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=Gl(s),t.memoizedState=Hl,e):Vl(t,v));if(h=e.memoizedState,h!==null&&(S=h.dehydrated,S!==null))return Fm(e,t,v,c,S,h,s);if(f){f=c.fallback,v=t.mode,h=e.child,S=h.sibling;var T={mode:"hidden",children:c.children};return(v&1)===0&&t.child!==h?(c=t.child,c.childLanes=0,c.pendingProps=T,t.deletions=null):(c=pn(h,T),c.subtreeFlags=h.subtreeFlags&14680064),S!==null?f=pn(S,f):(f=qn(f,v,s,null),f.flags|=2),f.return=t,c.return=t,c.sibling=f,t.child=c,c=f,f=t.child,v=e.child.memoizedState,v=v===null?Gl(s):{baseLanes:v.baseLanes|s,cachePool:null,transitions:v.transitions},f.memoizedState=v,f.childLanes=e.childLanes&~s,t.memoizedState=Hl,c}return f=e.child,e=f.sibling,c=pn(f,{mode:"visible",children:c.children}),(t.mode&1)===0&&(c.lanes=s),c.return=t,c.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=c,t.memoizedState=null,c}function Vl(e,t){return t=ro({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function za(e,t,s,c){return c!==null&&xl(c),bs(t,e.child,null,s),e=Vl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Fm(e,t,s,c,h,f,v){if(s)return t.flags&256?(t.flags&=-257,c=Wl(Error(n(422))),za(e,t,v,c)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=c.fallback,h=t.mode,c=ro({mode:"visible",children:c.children},h,0,null),f=qn(f,h,v,null),f.flags|=2,c.return=t,f.return=t,c.sibling=f,t.child=c,(t.mode&1)!==0&&bs(t,e.child,null,v),t.child.memoizedState=Gl(v),t.memoizedState=Hl,f);if((t.mode&1)===0)return za(e,t,v,null);if(h.data==="$!"){if(c=h.nextSibling&&h.nextSibling.dataset,c)var S=c.dgst;return c=S,f=Error(n(419)),c=Wl(f,c,void 0),za(e,t,v,c)}if(S=(v&e.childLanes)!==0,Ht||S){if(c=_t,c!==null){switch(v&-v){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(c.suspendedLanes|v))!==0?0:h,h!==0&&h!==f.retryLane&&(f.retryLane=h,Lr(e,h),vr(c,e,h,-1))}return cc(),c=Wl(Error(n(421))),za(e,t,v,c)}return h.data==="$?"?(t.flags|=128,t.child=e.child,t=Xm.bind(null,e),h._reactRetry=t,null):(e=f.treeContext,Xt=rn(h.nextSibling),Yt=t,at=!0,pr=null,e!==null&&(nr[sr++]=Rr,nr[sr++]=Dr,nr[sr++]=Dn,Rr=e.id,Dr=e.overflow,Dn=t),t=Vl(t,c.children),t.flags|=4096,t)}function ch(e,t,s){e.lanes|=t;var c=e.alternate;c!==null&&(c.lanes|=t),_l(e.return,t,s)}function Jl(e,t,s,c,h){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:c,tail:s,tailMode:h}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=s,f.tailMode=h)}function uh(e,t,s){var c=t.pendingProps,h=c.revealOrder,f=c.tail;if(Ft(e,t,c.children,s),c=ot.current,(c&2)!==0)c=c&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ch(e,s,t);else if(e.tag===19)ch(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=1}if(Ze(ot,c),(t.mode&1)===0)t.memoizedState=null;else switch(h){case"forwards":for(s=t.child,h=null;s!==null;)e=s.alternate,e!==null&&La(e)===null&&(h=s),s=s.sibling;s=h,s===null?(h=t.child,t.child=null):(h=s.sibling,s.sibling=null),Jl(t,!1,h,s,f);break;case"backwards":for(s=null,h=t.child,t.child=null;h!==null;){if(e=h.alternate,e!==null&&La(e)===null){t.child=h;break}e=h.sibling,h.sibling=s,s=h,h=e}Jl(t,!0,s,null,f);break;case"together":Jl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ur(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Bn|=t.lanes,(s&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(n(153));if(t.child!==null){for(e=t.child,s=pn(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=pn(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Bm(e,t,s){switch(t.tag){case 3:ah(t),xs();break;case 5:_d(t);break;case 1:qt(t.type)&&Na(t);break;case 4:El(t,t.stateNode.containerInfo);break;case 10:var c=t.type._context,h=t.memoizedProps.value;Ze(Aa,c._currentValue),c._currentValue=h;break;case 13:if(c=t.memoizedState,c!==null)return c.dehydrated!==null?(Ze(ot,ot.current&1),t.flags|=128,null):(s&t.child.childLanes)!==0?lh(e,t,s):(Ze(ot,ot.current&1),e=Ur(e,t,s),e!==null?e.sibling:null);Ze(ot,ot.current&1);break;case 19:if(c=(s&t.childLanes)!==0,(e.flags&128)!==0){if(c)return uh(e,t,s);t.flags|=128}if(h=t.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Ze(ot,ot.current),c)break;return null;case 22:case 23:return t.lanes=0,nh(e,t,s)}return Ur(e,t,s)}var dh,Ql,hh,fh;dh=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Ql=function(){},hh=function(e,t,s,c){var h=e.memoizedProps;if(h!==c){e=t.stateNode,Un(_r.current);var f=null;switch(s){case"input":h=Ie(e,h),c=Ie(e,c),f=[];break;case"select":h=N({},h,{value:void 0}),c=N({},c,{value:void 0}),f=[];break;case"textarea":h=Te(e,h),c=Te(e,c),f=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(e.onclick=Sa)}Cn(s,c);var v;s=null;for(M in h)if(!c.hasOwnProperty(M)&&h.hasOwnProperty(M)&&h[M]!=null)if(M==="style"){var S=h[M];for(v in S)S.hasOwnProperty(v)&&(s||(s={}),s[v]="")}else M!=="dangerouslySetInnerHTML"&&M!=="children"&&M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(l.hasOwnProperty(M)?f||(f=[]):(f=f||[]).push(M,null));for(M in c){var T=c[M];if(S=h?.[M],c.hasOwnProperty(M)&&T!==S&&(T!=null||S!=null))if(M==="style")if(S){for(v in S)!S.hasOwnProperty(v)||T&&T.hasOwnProperty(v)||(s||(s={}),s[v]="");for(v in T)T.hasOwnProperty(v)&&S[v]!==T[v]&&(s||(s={}),s[v]=T[v])}else s||(f||(f=[]),f.push(M,s)),s=T;else M==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,S=S?S.__html:void 0,T!=null&&S!==T&&(f=f||[]).push(M,T)):M==="children"?typeof T!="string"&&typeof T!="number"||(f=f||[]).push(M,""+T):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&(l.hasOwnProperty(M)?(T!=null&&M==="onScroll"&&nt("scroll",e),f||S===T||(f=[])):(f=f||[]).push(M,T))}s&&(f=f||[]).push("style",s);var M=f;(t.updateQueue=M)&&(t.flags|=4)}},fh=function(e,t,s,c){s!==c&&(t.flags|=4)};function Oi(e,t){if(!at)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function Dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,c=0;if(t)for(var h=e.child;h!==null;)s|=h.lanes|h.childLanes,c|=h.subtreeFlags&14680064,c|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)s|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=c,e.childLanes=s,t}function Wm(e,t,s){var c=t.pendingProps;switch(yl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(t),null;case 1:return qt(t.type)&&ja(),Dt(t),null;case 3:return c=t.stateNode,_s(),st(zt),st(It),Pl(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(e===null||e.child===null)&&(Pa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,pr!==null&&(ac(pr),pr=null))),Ql(e,t),Dt(t),null;case 5:Cl(t);var h=Un(Ni.current);if(s=t.type,e!==null&&t.stateNode!=null)hh(e,t,s,c,h),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!c){if(t.stateNode===null)throw Error(n(166));return Dt(t),null}if(e=Un(_r.current),Pa(t)){c=t.stateNode,s=t.type;var f=t.memoizedProps;switch(c[Sr]=t,c[bi]=f,e=(t.mode&1)!==0,s){case"dialog":nt("cancel",c),nt("close",c);break;case"iframe":case"object":case"embed":nt("load",c);break;case"video":case"audio":for(h=0;h<vi.length;h++)nt(vi[h],c);break;case"source":nt("error",c);break;case"img":case"image":case"link":nt("error",c),nt("load",c);break;case"details":nt("toggle",c);break;case"input":I(c,f),nt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!f.multiple},nt("invalid",c);break;case"textarea":Re(c,f),nt("invalid",c)}Cn(s,f),h=null;for(var v in f)if(f.hasOwnProperty(v)){var S=f[v];v==="children"?typeof S=="string"?c.textContent!==S&&(f.suppressHydrationWarning!==!0&&ka(c.textContent,S,e),h=["children",S]):typeof S=="number"&&c.textContent!==""+S&&(f.suppressHydrationWarning!==!0&&ka(c.textContent,S,e),h=["children",""+S]):l.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&nt("scroll",c)}switch(s){case"input":Be(c),je(c,f,!0);break;case"textarea":Be(c),it(c);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(c.onclick=Sa)}c=h,t.updateQueue=c,c!==null&&(t.flags|=4)}else{v=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dt(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=v.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof c.is=="string"?e=v.createElement(s,{is:c.is}):(e=v.createElement(s),s==="select"&&(v=e,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):e=v.createElementNS(e,s),e[Sr]=t,e[bi]=c,dh(e,t,!1,!1),t.stateNode=e;e:{switch(v=Tn(s,c),s){case"dialog":nt("cancel",e),nt("close",e),h=c;break;case"iframe":case"object":case"embed":nt("load",e),h=c;break;case"video":case"audio":for(h=0;h<vi.length;h++)nt(vi[h],e);h=c;break;case"source":nt("error",e),h=c;break;case"img":case"image":case"link":nt("error",e),nt("load",e),h=c;break;case"details":nt("toggle",e),h=c;break;case"input":I(e,c),h=Ie(e,c),nt("invalid",e);break;case"option":h=c;break;case"select":e._wrapperState={wasMultiple:!!c.multiple},h=N({},c,{value:void 0}),nt("invalid",e);break;case"textarea":Re(e,c),h=Te(e,c),nt("invalid",e);break;default:h=c}Cn(s,h),S=h;for(f in S)if(S.hasOwnProperty(f)){var T=S[f];f==="style"?tr(e,T):f==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,T!=null&&dr(e,T)):f==="children"?typeof T=="string"?(s!=="textarea"||T!=="")&&Ot(e,T):typeof T=="number"&&Ot(e,""+T):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(l.hasOwnProperty(f)?T!=null&&f==="onScroll"&&nt("scroll",e):T!=null&&R(e,f,T,v))}switch(s){case"input":Be(e),je(e,c,!1);break;case"textarea":Be(e),it(e);break;case"option":c.value!=null&&e.setAttribute("value",""+fe(c.value));break;case"select":e.multiple=!!c.multiple,f=c.value,f!=null?Ce(e,!!c.multiple,f,!1):c.defaultValue!=null&&Ce(e,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=Sa)}switch(s){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Dt(t),null;case 6:if(e&&t.stateNode!=null)fh(e,t,e.memoizedProps,c);else{if(typeof c!="string"&&t.stateNode===null)throw Error(n(166));if(s=Un(Ni.current),Un(_r.current),Pa(t)){if(c=t.stateNode,s=t.memoizedProps,c[Sr]=t,(f=c.nodeValue!==s)&&(e=Yt,e!==null))switch(e.tag){case 3:ka(c.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ka(c.nodeValue,s,(e.mode&1)!==0)}f&&(t.flags|=4)}else c=(s.nodeType===9?s:s.ownerDocument).createTextNode(c),c[Sr]=t,t.stateNode=c}return Dt(t),null;case 13:if(st(ot),c=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(at&&Xt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)gd(),xs(),t.flags|=98560,f=!1;else if(f=Pa(t),c!==null&&c.dehydrated!==null){if(e===null){if(!f)throw Error(n(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));f[Sr]=t}else xs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Dt(t),f=!1}else pr!==null&&(ac(pr),pr=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=s,t):(c=c!==null,c!==(e!==null&&e.memoizedState!==null)&&c&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(ot.current&1)!==0?yt===0&&(yt=3):cc())),t.updateQueue!==null&&(t.flags|=4),Dt(t),null);case 4:return _s(),Ql(e,t),e===null&&wi(t.stateNode.containerInfo),Dt(t),null;case 10:return Sl(t.type._context),Dt(t),null;case 17:return qt(t.type)&&ja(),Dt(t),null;case 19:if(st(ot),f=t.memoizedState,f===null)return Dt(t),null;if(c=(t.flags&128)!==0,v=f.rendering,v===null)if(c)Oi(f,!1);else{if(yt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(v=La(e),v!==null){for(t.flags|=128,Oi(f,!1),c=v.updateQueue,c!==null&&(t.updateQueue=c,t.flags|=4),t.subtreeFlags=0,c=s,s=t.child;s!==null;)f=s,e=c,f.flags&=14680066,v=f.alternate,v===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=v.childLanes,f.lanes=v.lanes,f.child=v.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=v.memoizedProps,f.memoizedState=v.memoizedState,f.updateQueue=v.updateQueue,f.type=v.type,e=v.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Ze(ot,ot.current&1|2),t.child}e=e.sibling}f.tail!==null&&Je()>Cs&&(t.flags|=128,c=!0,Oi(f,!1),t.lanes=4194304)}else{if(!c)if(e=La(v),e!==null){if(t.flags|=128,c=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Oi(f,!0),f.tail===null&&f.tailMode==="hidden"&&!v.alternate&&!at)return Dt(t),null}else 2*Je()-f.renderingStartTime>Cs&&s!==1073741824&&(t.flags|=128,c=!0,Oi(f,!1),t.lanes=4194304);f.isBackwards?(v.sibling=t.child,t.child=v):(s=f.last,s!==null?s.sibling=v:t.child=v,f.last=v)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Je(),t.sibling=null,s=ot.current,Ze(ot,c?s&1|2:s&1),t):(Dt(t),null);case 22:case 23:return lc(),c=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==c&&(t.flags|=8192),c&&(t.mode&1)!==0?(Zt&1073741824)!==0&&(Dt(t),t.subtreeFlags&6&&(t.flags|=8192)):Dt(t),null;case 24:return null;case 25:return null}throw Error(n(156,t.tag))}function $m(e,t){switch(yl(t),t.tag){case 1:return qt(t.type)&&ja(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _s(),st(zt),st(It),Pl(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Cl(t),null;case 13:if(st(ot),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(n(340));xs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return st(ot),null;case 4:return _s(),null;case 10:return Sl(t.type._context),null;case 22:case 23:return lc(),null;case 24:return null;default:return null}}var Ha=!1,Lt=!1,zm=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Ns(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(c){ct(e,t,c)}else s.current=null}function Kl(e,t,s){try{s()}catch(c){ct(e,t,c)}}var ph=!1;function qm(e,t){if(ll=da,e=Gu(),el(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var c=s.getSelection&&s.getSelection();if(c&&c.rangeCount!==0){s=c.anchorNode;var h=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break e}var v=0,S=-1,T=-1,M=0,K=0,X=e,Q=null;t:for(;;){for(var pe;X!==s||h!==0&&X.nodeType!==3||(S=v+h),X!==f||c!==0&&X.nodeType!==3||(T=v+c),X.nodeType===3&&(v+=X.nodeValue.length),(pe=X.firstChild)!==null;)Q=X,X=pe;for(;;){if(X===e)break t;if(Q===s&&++M===h&&(S=v),Q===f&&++K===c&&(T=v),(pe=X.nextSibling)!==null)break;X=Q,Q=X.parentNode}X=pe}s=S===-1||T===-1?null:{start:S,end:T}}else s=null}s=s||{start:0,end:0}}else s=null;for(cl={focusedElem:e,selectionRange:s},da=!1,ye=t;ye!==null;)if(t=ye,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ye=e;else for(;ye!==null;){t=ye;try{var ve=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var be=ve.memoizedProps,ht=ve.memoizedState,A=t.stateNode,P=A.getSnapshotBeforeUpdate(t.elementType===t.type?be:mr(t.type,be),ht);A.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var D=t.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ne){ct(t,t.return,ne)}if(e=t.sibling,e!==null){e.return=t.return,ye=e;break}ye=t.return}return ve=ph,ph=!1,ve}function Ai(e,t,s){var c=t.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&e)===e){var f=h.destroy;h.destroy=void 0,f!==void 0&&Kl(t,s,f)}h=h.next}while(h!==c)}}function Ga(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var c=s.create;s.destroy=c()}s=s.next}while(s!==t)}}function Yl(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function mh(e){var t=e.alternate;t!==null&&(e.alternate=null,mh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Sr],delete t[bi],delete t[fl],delete t[Nm],delete t[Em])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gh(e){return e.tag===5||e.tag===3||e.tag===4}function yh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xl(e,t,s){var c=e.tag;if(c===5||c===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Sa));else if(c!==4&&(e=e.child,e!==null))for(Xl(e,t,s),e=e.sibling;e!==null;)Xl(e,t,s),e=e.sibling}function Zl(e,t,s){var c=e.tag;if(c===5||c===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(c!==4&&(e=e.child,e!==null))for(Zl(e,t,s),e=e.sibling;e!==null;)Zl(e,t,s),e=e.sibling}var Ct=null,gr=!1;function cn(e,t,s){for(s=s.child;s!==null;)vh(e,t,s),s=s.sibling}function vh(e,t,s){if(rr&&typeof rr.onCommitFiberUnmount=="function")try{rr.onCommitFiberUnmount(Pe,s)}catch{}switch(s.tag){case 5:Lt||Ns(s,t);case 6:var c=Ct,h=gr;Ct=null,cn(e,t,s),Ct=c,gr=h,Ct!==null&&(gr?(e=Ct,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Ct.removeChild(s.stateNode));break;case 18:Ct!==null&&(gr?(e=Ct,s=s.stateNode,e.nodeType===8?hl(e.parentNode,s):e.nodeType===1&&hl(e,s),ui(e)):hl(Ct,s.stateNode));break;case 4:c=Ct,h=gr,Ct=s.stateNode.containerInfo,gr=!0,cn(e,t,s),Ct=c,gr=h;break;case 0:case 11:case 14:case 15:if(!Lt&&(c=s.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){h=c=c.next;do{var f=h,v=f.destroy;f=f.tag,v!==void 0&&((f&2)!==0||(f&4)!==0)&&Kl(s,t,v),h=h.next}while(h!==c)}cn(e,t,s);break;case 1:if(!Lt&&(Ns(s,t),c=s.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=s.memoizedProps,c.state=s.memoizedState,c.componentWillUnmount()}catch(S){ct(s,t,S)}cn(e,t,s);break;case 21:cn(e,t,s);break;case 22:s.mode&1?(Lt=(c=Lt)||s.memoizedState!==null,cn(e,t,s),Lt=c):cn(e,t,s);break;default:cn(e,t,s)}}function wh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new zm),t.forEach(function(c){var h=Zm.bind(null,e,c);s.has(c)||(s.add(c),c.then(h,h))})}}function yr(e,t){var s=t.deletions;if(s!==null)for(var c=0;c<s.length;c++){var h=s[c];try{var f=e,v=t,S=v;e:for(;S!==null;){switch(S.tag){case 5:Ct=S.stateNode,gr=!1;break e;case 3:Ct=S.stateNode.containerInfo,gr=!0;break e;case 4:Ct=S.stateNode.containerInfo,gr=!0;break e}S=S.return}if(Ct===null)throw Error(n(160));vh(f,v,h),Ct=null,gr=!1;var T=h.alternate;T!==null&&(T.return=null),h.return=null}catch(M){ct(h,t,M)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)xh(t,e),t=t.sibling}function xh(e,t){var s=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yr(t,e),Nr(e),c&4){try{Ai(3,e,e.return),Ga(3,e)}catch(be){ct(e,e.return,be)}try{Ai(5,e,e.return)}catch(be){ct(e,e.return,be)}}break;case 1:yr(t,e),Nr(e),c&512&&s!==null&&Ns(s,s.return);break;case 5:if(yr(t,e),Nr(e),c&512&&s!==null&&Ns(s,s.return),e.flags&32){var h=e.stateNode;try{Ot(h,"")}catch(be){ct(e,e.return,be)}}if(c&4&&(h=e.stateNode,h!=null)){var f=e.memoizedProps,v=s!==null?s.memoizedProps:f,S=e.type,T=e.updateQueue;if(e.updateQueue=null,T!==null)try{S==="input"&&f.type==="radio"&&f.name!=null&&U(h,f),Tn(S,v);var M=Tn(S,f);for(v=0;v<T.length;v+=2){var K=T[v],X=T[v+1];K==="style"?tr(h,X):K==="dangerouslySetInnerHTML"?dr(h,X):K==="children"?Ot(h,X):R(h,K,X,M)}switch(S){case"input":ge(h,f);break;case"textarea":tt(h,f);break;case"select":var Q=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!f.multiple;var pe=f.value;pe!=null?Ce(h,!!f.multiple,pe,!1):Q!==!!f.multiple&&(f.defaultValue!=null?Ce(h,!!f.multiple,f.defaultValue,!0):Ce(h,!!f.multiple,f.multiple?[]:"",!1))}h[bi]=f}catch(be){ct(e,e.return,be)}}break;case 6:if(yr(t,e),Nr(e),c&4){if(e.stateNode===null)throw Error(n(162));h=e.stateNode,f=e.memoizedProps;try{h.nodeValue=f}catch(be){ct(e,e.return,be)}}break;case 3:if(yr(t,e),Nr(e),c&4&&s!==null&&s.memoizedState.isDehydrated)try{ui(t.containerInfo)}catch(be){ct(e,e.return,be)}break;case 4:yr(t,e),Nr(e);break;case 13:yr(t,e),Nr(e),h=e.child,h.flags&8192&&(f=h.memoizedState!==null,h.stateNode.isHidden=f,!f||h.alternate!==null&&h.alternate.memoizedState!==null||(rc=Je())),c&4&&wh(e);break;case 22:if(K=s!==null&&s.memoizedState!==null,e.mode&1?(Lt=(M=Lt)||K,yr(t,e),Lt=M):yr(t,e),Nr(e),c&8192){if(M=e.memoizedState!==null,(e.stateNode.isHidden=M)&&!K&&(e.mode&1)!==0)for(ye=e,K=e.child;K!==null;){for(X=ye=K;ye!==null;){switch(Q=ye,pe=Q.child,Q.tag){case 0:case 11:case 14:case 15:Ai(4,Q,Q.return);break;case 1:Ns(Q,Q.return);var ve=Q.stateNode;if(typeof ve.componentWillUnmount=="function"){c=Q,s=Q.return;try{t=c,ve.props=t.memoizedProps,ve.state=t.memoizedState,ve.componentWillUnmount()}catch(be){ct(c,s,be)}}break;case 5:Ns(Q,Q.return);break;case 22:if(Q.memoizedState!==null){Sh(X);continue}}pe!==null?(pe.return=Q,ye=pe):Sh(X)}K=K.sibling}e:for(K=null,X=e;;){if(X.tag===5){if(K===null){K=X;try{h=X.stateNode,M?(f=h.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(S=X.stateNode,T=X.memoizedProps.style,v=T!=null&&T.hasOwnProperty("display")?T.display:null,S.style.display=Hr("display",v))}catch(be){ct(e,e.return,be)}}}else if(X.tag===6){if(K===null)try{X.stateNode.nodeValue=M?"":X.memoizedProps}catch(be){ct(e,e.return,be)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===e)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===e)break e;for(;X.sibling===null;){if(X.return===null||X.return===e)break e;K===X&&(K=null),X=X.return}K===X&&(K=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:yr(t,e),Nr(e),c&4&&wh(e);break;case 21:break;default:yr(t,e),Nr(e)}}function Nr(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(gh(s)){var c=s;break e}s=s.return}throw Error(n(160))}switch(c.tag){case 5:var h=c.stateNode;c.flags&32&&(Ot(h,""),c.flags&=-33);var f=yh(e);Zl(e,f,h);break;case 3:case 4:var v=c.stateNode.containerInfo,S=yh(e);Xl(e,S,v);break;default:throw Error(n(161))}}catch(T){ct(e,e.return,T)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Hm(e,t,s){ye=e,bh(e)}function bh(e,t,s){for(var c=(e.mode&1)!==0;ye!==null;){var h=ye,f=h.child;if(h.tag===22&&c){var v=h.memoizedState!==null||Ha;if(!v){var S=h.alternate,T=S!==null&&S.memoizedState!==null||Lt;S=Ha;var M=Lt;if(Ha=v,(Lt=T)&&!M)for(ye=h;ye!==null;)v=ye,T=v.child,v.tag===22&&v.memoizedState!==null?_h(h):T!==null?(T.return=v,ye=T):_h(h);for(;f!==null;)ye=f,bh(f),f=f.sibling;ye=h,Ha=S,Lt=M}kh(e)}else(h.subtreeFlags&8772)!==0&&f!==null?(f.return=h,ye=f):kh(e)}}function kh(e){for(;ye!==null;){var t=ye;if((t.flags&8772)!==0){var s=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Lt||Ga(5,t);break;case 1:var c=t.stateNode;if(t.flags&4&&!Lt)if(s===null)c.componentDidMount();else{var h=t.elementType===t.type?s.memoizedProps:mr(t.type,s.memoizedProps);c.componentDidUpdate(h,s.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Sd(t,f,c);break;case 3:var v=t.updateQueue;if(v!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Sd(t,v,s)}break;case 5:var S=t.stateNode;if(s===null&&t.flags&4){s=S;var T=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":T.autoFocus&&s.focus();break;case"img":T.src&&(s.src=T.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var M=t.alternate;if(M!==null){var K=M.memoizedState;if(K!==null){var X=K.dehydrated;X!==null&&ui(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Lt||t.flags&512&&Yl(t)}catch(Q){ct(t,t.return,Q)}}if(t===e){ye=null;break}if(s=t.sibling,s!==null){s.return=t.return,ye=s;break}ye=t.return}}function Sh(e){for(;ye!==null;){var t=ye;if(t===e){ye=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ye=s;break}ye=t.return}}function _h(e){for(;ye!==null;){var t=ye;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Ga(4,t)}catch(T){ct(t,s,T)}break;case 1:var c=t.stateNode;if(typeof c.componentDidMount=="function"){var h=t.return;try{c.componentDidMount()}catch(T){ct(t,h,T)}}var f=t.return;try{Yl(t)}catch(T){ct(t,f,T)}break;case 5:var v=t.return;try{Yl(t)}catch(T){ct(t,v,T)}}}catch(T){ct(t,t.return,T)}if(t===e){ye=null;break}var S=t.sibling;if(S!==null){S.return=t.return,ye=S;break}ye=t.return}}var Gm=Math.ceil,Va=B.ReactCurrentDispatcher,ec=B.ReactCurrentOwner,or=B.ReactCurrentBatchConfig,$e=0,_t=null,ft=null,Tt=0,Zt=0,Es=nn(0),yt=0,Ii=null,Bn=0,Ja=0,tc=0,Ri=null,Gt=null,rc=0,Cs=1/0,Fr=null,Qa=!1,nc=null,un=null,Ka=!1,dn=null,Ya=0,Di=0,sc=null,Xa=-1,Za=0;function Bt(){return($e&6)!==0?Je():Xa!==-1?Xa:Xa=Je()}function hn(e){return(e.mode&1)===0?1:($e&2)!==0&&Tt!==0?Tt&-Tt:Tm.transition!==null?(Za===0&&(Za=yu()),Za):(e=Qe,e!==0||(e=window.event,e=e===void 0?16:Nu(e.type)),e)}function vr(e,t,s,c){if(50<Di)throw Di=0,sc=null,Error(n(185));ii(e,s,c),(($e&2)===0||e!==_t)&&(e===_t&&(($e&2)===0&&(Ja|=s),yt===4&&fn(e,Tt)),Vt(e,c),s===1&&$e===0&&(t.mode&1)===0&&(Cs=Je()+500,Ea&&an()))}function Vt(e,t){var s=e.callbackNode;Tp(e,t);var c=la(e,e===_t?Tt:0);if(c===0)s!==null&&qe(s),e.callbackNode=null,e.callbackPriority=0;else if(t=c&-c,e.callbackPriority!==t){if(s!=null&&qe(s),t===1)e.tag===0?Cm(Nh.bind(null,e)):dd(Nh.bind(null,e)),_m(function(){($e&6)===0&&an()}),s=null;else{switch(vu(c)){case 1:s=Ve;break;case 4:s=rt;break;case 16:s=Qt;break;case 536870912:s=Or;break;default:s=Qt}s=Rh(s,jh.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function jh(e,t){if(Xa=-1,Za=0,($e&6)!==0)throw Error(n(327));var s=e.callbackNode;if(Ts()&&e.callbackNode!==s)return null;var c=la(e,e===_t?Tt:0);if(c===0)return null;if((c&30)!==0||(c&e.expiredLanes)!==0||t)t=eo(e,c);else{t=c;var h=$e;$e|=2;var f=Ch();(_t!==e||Tt!==t)&&(Fr=null,Cs=Je()+500,$n(e,t));do try{Qm();break}catch(S){Eh(e,S)}while(!0);kl(),Va.current=f,$e=h,ft!==null?t=0:(_t=null,Tt=0,t=yt)}if(t!==0){if(t===2&&(h=Uo(e),h!==0&&(c=h,t=ic(e,h))),t===1)throw s=Ii,$n(e,0),fn(e,c),Vt(e,Je()),s;if(t===6)fn(e,c);else{if(h=e.current.alternate,(c&30)===0&&!Vm(h)&&(t=eo(e,c),t===2&&(f=Uo(e),f!==0&&(c=f,t=ic(e,f))),t===1))throw s=Ii,$n(e,0),fn(e,c),Vt(e,Je()),s;switch(e.finishedWork=h,e.finishedLanes=c,t){case 0:case 1:throw Error(n(345));case 2:zn(e,Gt,Fr);break;case 3:if(fn(e,c),(c&130023424)===c&&(t=rc+500-Je(),10<t)){if(la(e,0)!==0)break;if(h=e.suspendedLanes,(h&c)!==c){Bt(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=dl(zn.bind(null,e,Gt,Fr),t);break}zn(e,Gt,Fr);break;case 4:if(fn(e,c),(c&4194240)===c)break;for(t=e.eventTimes,h=-1;0<c;){var v=31-hr(c);f=1<<v,v=t[v],v>h&&(h=v),c&=~f}if(c=h,c=Je()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Gm(c/1960))-c,10<c){e.timeoutHandle=dl(zn.bind(null,e,Gt,Fr),c);break}zn(e,Gt,Fr);break;case 5:zn(e,Gt,Fr);break;default:throw Error(n(329))}}}return Vt(e,Je()),e.callbackNode===s?jh.bind(null,e):null}function ic(e,t){var s=Ri;return e.current.memoizedState.isDehydrated&&($n(e,t).flags|=256),e=eo(e,t),e!==2&&(t=Gt,Gt=s,t!==null&&ac(t)),e}function ac(e){Gt===null?Gt=e:Gt.push.apply(Gt,e)}function Vm(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var c=0;c<s.length;c++){var h=s[c],f=h.getSnapshot;h=h.value;try{if(!fr(f(),h))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function fn(e,t){for(t&=~tc,t&=~Ja,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-hr(t),c=1<<s;e[s]=-1,t&=~c}}function Nh(e){if(($e&6)!==0)throw Error(n(327));Ts();var t=la(e,0);if((t&1)===0)return Vt(e,Je()),null;var s=eo(e,t);if(e.tag!==0&&s===2){var c=Uo(e);c!==0&&(t=c,s=ic(e,c))}if(s===1)throw s=Ii,$n(e,0),fn(e,t),Vt(e,Je()),s;if(s===6)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,zn(e,Gt,Fr),Vt(e,Je()),null}function oc(e,t){var s=$e;$e|=1;try{return e(t)}finally{$e=s,$e===0&&(Cs=Je()+500,Ea&&an())}}function Wn(e){dn!==null&&dn.tag===0&&($e&6)===0&&Ts();var t=$e;$e|=1;var s=or.transition,c=Qe;try{if(or.transition=null,Qe=1,e)return e()}finally{Qe=c,or.transition=s,$e=t,($e&6)===0&&an()}}function lc(){Zt=Es.current,st(Es)}function $n(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Sm(s)),ft!==null)for(s=ft.return;s!==null;){var c=s;switch(yl(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&ja();break;case 3:_s(),st(zt),st(It),Pl();break;case 5:Cl(c);break;case 4:_s();break;case 13:st(ot);break;case 19:st(ot);break;case 10:Sl(c.type._context);break;case 22:case 23:lc()}s=s.return}if(_t=e,ft=e=pn(e.current,null),Tt=Zt=t,yt=0,Ii=null,tc=Ja=Bn=0,Gt=Ri=null,Mn!==null){for(t=0;t<Mn.length;t++)if(s=Mn[t],c=s.interleaved,c!==null){s.interleaved=null;var h=c.next,f=s.pending;if(f!==null){var v=f.next;f.next=h,c.next=v}s.pending=c}Mn=null}return e}function Eh(e,t){do{var s=ft;try{if(kl(),Ma.current=Wa,Ua){for(var c=lt.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}Ua=!1}if(Fn=0,St=gt=lt=null,Ei=!1,Ci=0,ec.current=null,s===null||s.return===null){yt=1,Ii=t,ft=null;break}e:{var f=e,v=s.return,S=s,T=t;if(t=Tt,S.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){var M=T,K=S,X=K.tag;if((K.mode&1)===0&&(X===0||X===11||X===15)){var Q=K.alternate;Q?(K.updateQueue=Q.updateQueue,K.memoizedState=Q.memoizedState,K.lanes=Q.lanes):(K.updateQueue=null,K.memoizedState=null)}var pe=Xd(v);if(pe!==null){pe.flags&=-257,Zd(pe,v,S,f,t),pe.mode&1&&Yd(f,M,t),t=pe,T=M;var ve=t.updateQueue;if(ve===null){var be=new Set;be.add(T),t.updateQueue=be}else ve.add(T);break e}else{if((t&1)===0){Yd(f,M,t),cc();break e}T=Error(n(426))}}else if(at&&S.mode&1){var ht=Xd(v);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),Zd(ht,v,S,f,t),xl(js(T,S));break e}}f=T=js(T,S),yt!==4&&(yt=2),Ri===null?Ri=[f]:Ri.push(f),f=v;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var A=Qd(f,T,t);kd(f,A);break e;case 1:S=T;var P=f.type,D=f.stateNode;if((f.flags&128)===0&&(typeof P.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(un===null||!un.has(D)))){f.flags|=65536,t&=-t,f.lanes|=t;var ne=Kd(f,S,t);kd(f,ne);break e}}f=f.return}while(f!==null)}Ph(s)}catch(ke){t=ke,ft===s&&s!==null&&(ft=s=s.return);continue}break}while(!0)}function Ch(){var e=Va.current;return Va.current=Wa,e===null?Wa:e}function cc(){(yt===0||yt===3||yt===2)&&(yt=4),_t===null||(Bn&268435455)===0&&(Ja&268435455)===0||fn(_t,Tt)}function eo(e,t){var s=$e;$e|=2;var c=Ch();(_t!==e||Tt!==t)&&(Fr=null,$n(e,t));do try{Jm();break}catch(h){Eh(e,h)}while(!0);if(kl(),$e=s,Va.current=c,ft!==null)throw Error(n(261));return _t=null,Tt=0,yt}function Jm(){for(;ft!==null;)Th(ft)}function Qm(){for(;ft!==null&&!We();)Th(ft)}function Th(e){var t=Ih(e.alternate,e,Zt);e.memoizedProps=e.pendingProps,t===null?Ph(e):ft=t,ec.current=null}function Ph(e){var t=e;do{var s=t.alternate;if(e=t.return,(t.flags&32768)===0){if(s=Wm(s,t,Zt),s!==null){ft=s;return}}else{if(s=$m(s,t),s!==null){s.flags&=32767,ft=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{yt=6,ft=null;return}}if(t=t.sibling,t!==null){ft=t;return}ft=t=e}while(t!==null);yt===0&&(yt=5)}function zn(e,t,s){var c=Qe,h=or.transition;try{or.transition=null,Qe=1,Km(e,t,s,c)}finally{or.transition=h,Qe=c}return null}function Km(e,t,s,c){do Ts();while(dn!==null);if(($e&6)!==0)throw Error(n(327));s=e.finishedWork;var h=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var f=s.lanes|s.childLanes;if(Pp(e,f),e===_t&&(ft=_t=null,Tt=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Ka||(Ka=!0,Rh(Qt,function(){return Ts(),null})),f=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||f){f=or.transition,or.transition=null;var v=Qe;Qe=1;var S=$e;$e|=4,ec.current=null,qm(e,s),xh(s,e),gm(cl),da=!!ll,cl=ll=null,e.current=s,Hm(s),$t(),$e=S,Qe=v,or.transition=f}else e.current=s;if(Ka&&(Ka=!1,dn=e,Ya=h),f=e.pendingLanes,f===0&&(un=null),De(s.stateNode),Vt(e,Je()),t!==null)for(c=e.onRecoverableError,s=0;s<t.length;s++)h=t[s],c(h.value,{componentStack:h.stack,digest:h.digest});if(Qa)throw Qa=!1,e=nc,nc=null,e;return(Ya&1)!==0&&e.tag!==0&&Ts(),f=e.pendingLanes,(f&1)!==0?e===sc?Di++:(Di=0,sc=e):Di=0,an(),null}function Ts(){if(dn!==null){var e=vu(Ya),t=or.transition,s=Qe;try{if(or.transition=null,Qe=16>e?16:e,dn===null)var c=!1;else{if(e=dn,dn=null,Ya=0,($e&6)!==0)throw Error(n(331));var h=$e;for($e|=4,ye=e.current;ye!==null;){var f=ye,v=f.child;if((ye.flags&16)!==0){var S=f.deletions;if(S!==null){for(var T=0;T<S.length;T++){var M=S[T];for(ye=M;ye!==null;){var K=ye;switch(K.tag){case 0:case 11:case 15:Ai(8,K,f)}var X=K.child;if(X!==null)X.return=K,ye=X;else for(;ye!==null;){K=ye;var Q=K.sibling,pe=K.return;if(mh(K),K===M){ye=null;break}if(Q!==null){Q.return=pe,ye=Q;break}ye=pe}}}var ve=f.alternate;if(ve!==null){var be=ve.child;if(be!==null){ve.child=null;do{var ht=be.sibling;be.sibling=null,be=ht}while(be!==null)}}ye=f}}if((f.subtreeFlags&2064)!==0&&v!==null)v.return=f,ye=v;else e:for(;ye!==null;){if(f=ye,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Ai(9,f,f.return)}var A=f.sibling;if(A!==null){A.return=f.return,ye=A;break e}ye=f.return}}var P=e.current;for(ye=P;ye!==null;){v=ye;var D=v.child;if((v.subtreeFlags&2064)!==0&&D!==null)D.return=v,ye=D;else e:for(v=P;ye!==null;){if(S=ye,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:Ga(9,S)}}catch(ke){ct(S,S.return,ke)}if(S===v){ye=null;break e}var ne=S.sibling;if(ne!==null){ne.return=S.return,ye=ne;break e}ye=S.return}}if($e=h,an(),rr&&typeof rr.onPostCommitFiberRoot=="function")try{rr.onPostCommitFiberRoot(Pe,e)}catch{}c=!0}return c}finally{Qe=s,or.transition=t}}return!1}function Oh(e,t,s){t=js(s,t),t=Qd(e,t,1),e=ln(e,t,1),t=Bt(),e!==null&&(ii(e,1,t),Vt(e,t))}function ct(e,t,s){if(e.tag===3)Oh(e,e,s);else for(;t!==null;){if(t.tag===3){Oh(t,e,s);break}else if(t.tag===1){var c=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(un===null||!un.has(c))){e=js(s,e),e=Kd(t,e,1),t=ln(t,e,1),e=Bt(),t!==null&&(ii(t,1,e),Vt(t,e));break}}t=t.return}}function Ym(e,t,s){var c=e.pingCache;c!==null&&c.delete(t),t=Bt(),e.pingedLanes|=e.suspendedLanes&s,_t===e&&(Tt&s)===s&&(yt===4||yt===3&&(Tt&130023424)===Tt&&500>Je()-rc?$n(e,0):tc|=s),Vt(e,t)}function Ah(e,t){t===0&&((e.mode&1)===0?t=1:(t=oa,oa<<=1,(oa&130023424)===0&&(oa=4194304)));var s=Bt();e=Lr(e,t),e!==null&&(ii(e,t,s),Vt(e,s))}function Xm(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Ah(e,s)}function Zm(e,t){var s=0;switch(e.tag){case 13:var c=e.stateNode,h=e.memoizedState;h!==null&&(s=h.retryLane);break;case 19:c=e.stateNode;break;default:throw Error(n(314))}c!==null&&c.delete(t),Ah(e,s)}var Ih;Ih=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||zt.current)Ht=!0;else{if((e.lanes&s)===0&&(t.flags&128)===0)return Ht=!1,Bm(e,t,s);Ht=(e.flags&131072)!==0}else Ht=!1,at&&(t.flags&1048576)!==0&&hd(t,Ta,t.index);switch(t.lanes=0,t.tag){case 2:var c=t.type;qa(e,t),e=t.pendingProps;var h=ys(t,It.current);Ss(t,s),h=Il(null,t,c,e,h,s);var f=Rl();return t.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qt(c)?(f=!0,Na(t)):f=!1,t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Nl(t),h.updater=$a,t.stateNode=h,h._reactInternals=t,Bl(t,c,e,s),t=ql(null,t,c,!0,f,s)):(t.tag=0,at&&f&&gl(t),Ft(null,t,h,s),t=t.child),t;case 16:c=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,h=c._init,c=h(c._payload),t.type=c,h=t.tag=tg(c),e=mr(c,e),h){case 0:t=zl(null,t,c,e,s);break e;case 1:t=ih(null,t,c,e,s);break e;case 11:t=eh(null,t,c,e,s);break e;case 14:t=th(null,t,c,mr(c.type,e),s);break e}throw Error(n(306,c,""))}return t;case 0:return c=t.type,h=t.pendingProps,h=t.elementType===c?h:mr(c,h),zl(e,t,c,h,s);case 1:return c=t.type,h=t.pendingProps,h=t.elementType===c?h:mr(c,h),ih(e,t,c,h,s);case 3:e:{if(ah(t),e===null)throw Error(n(387));c=t.pendingProps,f=t.memoizedState,h=f.element,bd(e,t),Da(t,c,null,s);var v=t.memoizedState;if(c=v.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){h=js(Error(n(423)),t),t=oh(e,t,c,s,h);break e}else if(c!==h){h=js(Error(n(424)),t),t=oh(e,t,c,s,h);break e}else for(Xt=rn(t.stateNode.containerInfo.firstChild),Yt=t,at=!0,pr=null,s=wd(t,null,c,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(xs(),c===h){t=Ur(e,t,s);break e}Ft(e,t,c,s)}t=t.child}return t;case 5:return _d(t),e===null&&wl(t),c=t.type,h=t.pendingProps,f=e!==null?e.memoizedProps:null,v=h.children,ul(c,h)?v=null:f!==null&&ul(c,f)&&(t.flags|=32),sh(e,t),Ft(e,t,v,s),t.child;case 6:return e===null&&wl(t),null;case 13:return lh(e,t,s);case 4:return El(t,t.stateNode.containerInfo),c=t.pendingProps,e===null?t.child=bs(t,null,c,s):Ft(e,t,c,s),t.child;case 11:return c=t.type,h=t.pendingProps,h=t.elementType===c?h:mr(c,h),eh(e,t,c,h,s);case 7:return Ft(e,t,t.pendingProps,s),t.child;case 8:return Ft(e,t,t.pendingProps.children,s),t.child;case 12:return Ft(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(c=t.type._context,h=t.pendingProps,f=t.memoizedProps,v=h.value,Ze(Aa,c._currentValue),c._currentValue=v,f!==null)if(fr(f.value,v)){if(f.children===h.children&&!zt.current){t=Ur(e,t,s);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var S=f.dependencies;if(S!==null){v=f.child;for(var T=S.firstContext;T!==null;){if(T.context===c){if(f.tag===1){T=Mr(-1,s&-s),T.tag=2;var M=f.updateQueue;if(M!==null){M=M.shared;var K=M.pending;K===null?T.next=T:(T.next=K.next,K.next=T),M.pending=T}}f.lanes|=s,T=f.alternate,T!==null&&(T.lanes|=s),_l(f.return,s,t),S.lanes|=s;break}T=T.next}}else if(f.tag===10)v=f.type===t.type?null:f.child;else if(f.tag===18){if(v=f.return,v===null)throw Error(n(341));v.lanes|=s,S=v.alternate,S!==null&&(S.lanes|=s),_l(v,s,t),v=f.sibling}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===t){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}Ft(e,t,h.children,s),t=t.child}return t;case 9:return h=t.type,c=t.pendingProps.children,Ss(t,s),h=ir(h),c=c(h),t.flags|=1,Ft(e,t,c,s),t.child;case 14:return c=t.type,h=mr(c,t.pendingProps),h=mr(c.type,h),th(e,t,c,h,s);case 15:return rh(e,t,t.type,t.pendingProps,s);case 17:return c=t.type,h=t.pendingProps,h=t.elementType===c?h:mr(c,h),qa(e,t),t.tag=1,qt(c)?(e=!0,Na(t)):e=!1,Ss(t,s),Vd(t,c,h),Bl(t,c,h,s),ql(null,t,c,!0,e,s);case 19:return uh(e,t,s);case 22:return nh(e,t,s)}throw Error(n(156,t.tag))};function Rh(e,t){return ze(e,t)}function eg(e,t,s,c){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lr(e,t,s,c){return new eg(e,t,s,c)}function uc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tg(e){if(typeof e=="function")return uc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ce)return 11;if(e===oe)return 14}return 2}function pn(e,t){var s=e.alternate;return s===null?(s=lr(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function to(e,t,s,c,h,f){var v=2;if(c=e,typeof e=="function")uc(e)&&(v=1);else if(typeof e=="string")v=5;else e:switch(e){case W:return qn(s.children,h,f,t);case te:v=8,h|=8;break;case ue:return e=lr(12,s,t,h|2),e.elementType=ue,e.lanes=f,e;case ie:return e=lr(13,s,t,h),e.elementType=ie,e.lanes=f,e;case z:return e=lr(19,s,t,h),e.elementType=z,e.lanes=f,e;case Y:return ro(s,h,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case we:v=10;break e;case V:v=9;break e;case ce:v=11;break e;case oe:v=14;break e;case re:v=16,c=null;break e}throw Error(n(130,e==null?e:typeof e,""))}return t=lr(v,s,t,h),t.elementType=e,t.type=c,t.lanes=f,t}function qn(e,t,s,c){return e=lr(7,e,c,t),e.lanes=s,e}function ro(e,t,s,c){return e=lr(22,e,c,t),e.elementType=Y,e.lanes=s,e.stateNode={isHidden:!1},e}function dc(e,t,s){return e=lr(6,e,null,t),e.lanes=s,e}function hc(e,t,s){return t=lr(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function rg(e,t,s,c,h){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fo(0),this.expirationTimes=Fo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fo(0),this.identifierPrefix=c,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function fc(e,t,s,c,h,f,v,S,T){return e=new rg(e,t,s,S,T),t===1?(t=1,f===!0&&(t|=8)):t=0,f=lr(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:c,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nl(f),e}function ng(e,t,s){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:c==null?null:""+c,children:e,containerInfo:t,implementation:s}}function Dh(e){if(!e)return sn;e=e._reactInternals;e:{if(Tr(e)!==e||e.tag!==1)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(n(171))}if(e.tag===1){var s=e.type;if(qt(s))return cd(e,s,t)}return t}function Lh(e,t,s,c,h,f,v,S,T){return e=fc(s,c,!0,e,h,f,v,S,T),e.context=Dh(null),s=e.current,c=Bt(),h=hn(s),f=Mr(c,h),f.callback=t??null,ln(s,f,h),e.current.lanes=h,ii(e,h,c),Vt(e,c),e}function no(e,t,s,c){var h=t.current,f=Bt(),v=hn(h);return s=Dh(s),t.context===null?t.context=s:t.pendingContext=s,t=Mr(f,v),t.payload={element:e},c=c===void 0?null:c,c!==null&&(t.callback=c),e=ln(h,t,v),e!==null&&(vr(e,h,v,f),Ra(e,h,v)),v}function so(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Mh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function pc(e,t){Mh(e,t),(e=e.alternate)&&Mh(e,t)}function sg(){return null}var Uh=typeof reportError=="function"?reportError:function(e){console.error(e)};function mc(e){this._internalRoot=e}io.prototype.render=mc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(n(409));no(e,t,null,null)},io.prototype.unmount=mc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wn(function(){no(null,e,null,null)}),t[Ar]=null}};function io(e){this._internalRoot=e}io.prototype.unstable_scheduleHydration=function(e){if(e){var t=bu();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Zr.length&&t!==0&&t<Zr[s].priority;s++);Zr.splice(s,0,e),s===0&&_u(e)}};function gc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ao(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Fh(){}function ig(e,t,s,c,h){if(h){if(typeof c=="function"){var f=c;c=function(){var M=so(v);f.call(M)}}var v=Lh(t,c,e,0,null,!1,!1,"",Fh);return e._reactRootContainer=v,e[Ar]=v.current,wi(e.nodeType===8?e.parentNode:e),Wn(),v}for(;h=e.lastChild;)e.removeChild(h);if(typeof c=="function"){var S=c;c=function(){var M=so(T);S.call(M)}}var T=fc(e,0,!1,null,null,!1,!1,"",Fh);return e._reactRootContainer=T,e[Ar]=T.current,wi(e.nodeType===8?e.parentNode:e),Wn(function(){no(t,T,s,c)}),T}function oo(e,t,s,c,h){var f=s._reactRootContainer;if(f){var v=f;if(typeof h=="function"){var S=h;h=function(){var T=so(v);S.call(T)}}no(t,v,e,h)}else v=ig(s,t,e,h,c);return so(v)}wu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=si(t.pendingLanes);s!==0&&(Bo(t,s|1),Vt(t,Je()),($e&6)===0&&(Cs=Je()+500,an()))}break;case 13:Wn(function(){var c=Lr(e,1);if(c!==null){var h=Bt();vr(c,e,1,h)}}),pc(e,1)}},Wo=function(e){if(e.tag===13){var t=Lr(e,134217728);if(t!==null){var s=Bt();vr(t,e,134217728,s)}pc(e,134217728)}},xu=function(e){if(e.tag===13){var t=hn(e),s=Lr(e,t);if(s!==null){var c=Bt();vr(s,e,t,c)}pc(e,t)}},bu=function(){return Qe},ku=function(e,t){var s=Qe;try{return Qe=e,t()}finally{Qe=s}},ei=function(e,t,s){switch(t){case"input":if(ge(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var c=s[t];if(c!==e&&c.form===e.form){var h=_a(c);if(!h)throw Error(n(90));Ge(c),ge(c,h)}}}break;case"textarea":tt(e,s);break;case"select":t=s.value,t!=null&&Ce(e,!!s.multiple,t,!1)}},na=oc,sa=Wn;var ag={usingClientEntryPoint:!1,Events:[ki,ms,_a,ta,ra,oc]},Li={findFiberByHostInstance:In,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},og={bundleType:Li.bundleType,version:Li.version,rendererPackageName:Li.rendererPackageName,rendererConfig:Li.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=me(e),e===null?null:e.stateNode},findFiberByHostInstance:Li.findFiberByHostInstance||sg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lo.isDisabled&&lo.supportsFiber)try{Pe=lo.inject(og),rr=lo}catch{}}return Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ag,Jt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gc(t))throw Error(n(200));return ng(e,t,null,s)},Jt.createRoot=function(e,t){if(!gc(e))throw Error(n(299));var s=!1,c="",h=Uh;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(c=t.identifierPrefix),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=fc(e,1,!1,null,null,s,!1,c,h),e[Ar]=t.current,wi(e.nodeType===8?e.parentNode:e),new mc(t)},Jt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=me(t),e=e===null?null:e.stateNode,e},Jt.flushSync=function(e){return Wn(e)},Jt.hydrate=function(e,t,s){if(!ao(t))throw Error(n(200));return oo(null,e,t,!0,s)},Jt.hydrateRoot=function(e,t,s){if(!gc(e))throw Error(n(405));var c=s!=null&&s.hydratedSources||null,h=!1,f="",v=Uh;if(s!=null&&(s.unstable_strictMode===!0&&(h=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),t=Lh(t,null,e,1,s??null,h,!1,f,v),e[Ar]=t.current,wi(e),c)for(e=0;e<c.length;e++)s=c[e],h=s._getVersion,h=h(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,h]:t.mutableSourceEagerHydrationData.push(s,h);return new io(t)},Jt.render=function(e,t,s){if(!ao(t))throw Error(n(200));return oo(null,e,t,!1,s)},Jt.unmountComponentAtNode=function(e){if(!ao(e))throw Error(n(40));return e._reactRootContainer?(Wn(function(){oo(null,null,e,!1,function(){e._reactRootContainer=null,e[Ar]=null})}),!0):!1},Jt.unstable_batchedUpdates=oc,Jt.unstable_renderSubtreeIntoContainer=function(e,t,s,c){if(!ao(s))throw Error(n(200));if(e==null||e._reactInternals===void 0)throw Error(n(38));return oo(e,t,s,!1,c)},Jt.version="18.3.1-next-f1338f8080-20240426",Jt}var Jh;function Ff(){if(Jh)return wc.exports;Jh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(r){console.error(r)}}return i(),wc.exports=wg(),wc.exports}var Qh;function xg(){if(Qh)return co;Qh=1;var i=Ff();return co.createRoot=i.createRoot,co.hydrateRoot=i.hydrateRoot,co}var bg=xg();const kg=eu(bg);Ff();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gi(){return Gi=Object.assign?Object.assign.bind():function(i){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])}return i},Gi.apply(this,arguments)}var Sn;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Sn||(Sn={}));const Kh="popstate";function Sg(i){i===void 0&&(i={});function r(a,l){let{pathname:u,search:d,hash:m}=a.location;return Dc("",{pathname:u,search:d,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(a,l){return typeof l=="string"?l:wo(l)}return jg(r,n,null,i)}function pt(i,r){if(i===!1||i===null||typeof i>"u")throw new Error(r)}function Bf(i,r){if(!i){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function _g(){return Math.random().toString(36).substr(2,8)}function Yh(i,r){return{usr:i.state,key:i.key,idx:r}}function Dc(i,r,n,a){return n===void 0&&(n=null),Gi({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof r=="string"?Ys(r):r,{state:n,key:r&&r.key||a||_g()})}function wo(i){let{pathname:r="/",search:n="",hash:a=""}=i;return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function Ys(i){let r={};if(i){let n=i.indexOf("#");n>=0&&(r.hash=i.substr(n),i=i.substr(0,n));let a=i.indexOf("?");a>=0&&(r.search=i.substr(a),i=i.substr(0,a)),i&&(r.pathname=i)}return r}function jg(i,r,n,a){a===void 0&&(a={});let{window:l=document.defaultView,v5Compat:u=!1}=a,d=l.history,m=Sn.Pop,p=null,y=g();y==null&&(y=0,d.replaceState(Gi({},d.state,{idx:y}),""));function g(){return(d.state||{idx:null}).idx}function x(){m=Sn.Pop;let _=g(),$=_==null?null:_-y;y=_,p&&p({action:m,location:C.location,delta:$})}function b(_,$){m=Sn.Push;let F=Dc(C.location,_,$);y=g()+1;let R=Yh(F,y),B=C.createHref(F);try{d.pushState(R,"",B)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;l.location.assign(B)}u&&p&&p({action:m,location:C.location,delta:1})}function E(_,$){m=Sn.Replace;let F=Dc(C.location,_,$);y=g();let R=Yh(F,y),B=C.createHref(F);d.replaceState(R,"",B),u&&p&&p({action:m,location:C.location,delta:0})}function k(_){let $=l.location.origin!=="null"?l.location.origin:l.location.href,F=typeof _=="string"?_:wo(_);return F=F.replace(/ $/,"%20"),pt($,"No window.location.(origin|href) available to create URL for href: "+F),new URL(F,$)}let C={get action(){return m},get location(){return i(l,d)},listen(_){if(p)throw new Error("A history only accepts one active listener");return l.addEventListener(Kh,x),p=_,()=>{l.removeEventListener(Kh,x),p=null}},createHref(_){return r(l,_)},createURL:k,encodeLocation(_){let $=k(_);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:b,replace:E,go(_){return d.go(_)}};return C}var Xh;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(Xh||(Xh={}));function Ng(i,r,n){return n===void 0&&(n="/"),Eg(i,r,n)}function Eg(i,r,n,a){let l=typeof r=="string"?Ys(r):r,u=ru(l.pathname||"/",n);if(u==null)return null;let d=Wf(i);Cg(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let y=Bg(u);m=Mg(d[p],y)}return m}function Wf(i,r,n,a){r===void 0&&(r=[]),n===void 0&&(n=[]),a===void 0&&(a="");let l=(u,d,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};p.relativePath.startsWith("/")&&(pt(p.relativePath.startsWith(a),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(a.length));let y=_n([a,p.relativePath]),g=n.concat(p);u.children&&u.children.length>0&&(pt(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),Wf(u.children,r,g,y)),!(u.path==null&&!u.index)&&r.push({path:y,score:Dg(y,u.index),routesMeta:g})};return i.forEach((u,d)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))l(u,d);else for(let p of $f(u.path))l(u,d,p)}),r}function $f(i){let r=i.split("/");if(r.length===0)return[];let[n,...a]=r,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(a.length===0)return l?[u,""]:[u];let d=$f(a.join("/")),m=[];return m.push(...d.map(p=>p===""?u:[u,p].join("/"))),l&&m.push(...d),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function Cg(i){i.sort((r,n)=>r.score!==n.score?n.score-r.score:Lg(r.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}const Tg=/^:[\w-]+$/,Pg=3,Og=2,Ag=1,Ig=10,Rg=-2,Zh=i=>i==="*";function Dg(i,r){let n=i.split("/"),a=n.length;return n.some(Zh)&&(a+=Rg),r&&(a+=Og),n.filter(l=>!Zh(l)).reduce((l,u)=>l+(Tg.test(u)?Pg:u===""?Ag:Ig),a)}function Lg(i,r){return i.length===r.length&&i.slice(0,-1).every((a,l)=>a===r[l])?i[i.length-1]-r[r.length-1]:0}function Mg(i,r,n){let{routesMeta:a}=i,l={},u="/",d=[];for(let m=0;m<a.length;++m){let p=a[m],y=m===a.length-1,g=u==="/"?r:r.slice(u.length)||"/",x=Ug({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},g),b=p.route;if(!x)return null;Object.assign(l,x.params),d.push({params:l,pathname:_n([u,x.pathname]),pathnameBase:qg(_n([u,x.pathnameBase])),route:b}),x.pathnameBase!=="/"&&(u=_n([u,x.pathnameBase]))}return d}function Ug(i,r){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,a]=Fg(i.path,i.caseSensitive,i.end),l=r.match(n);if(!l)return null;let u=l[0],d=u.replace(/(.)\/+$/,"$1"),m=l.slice(1);return{params:a.reduce((y,g,x)=>{let{paramName:b,isOptional:E}=g;if(b==="*"){let C=m[x]||"";d=u.slice(0,u.length-C.length).replace(/(.)\/+$/,"$1")}const k=m[x];return E&&!k?y[b]=void 0:y[b]=(k||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:d,pattern:i}}function Fg(i,r,n){r===void 0&&(r=!1),n===void 0&&(n=!0),Bf(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let a=[],l="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(a.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(a.push({paramName:"*"}),l+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":i!==""&&i!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,r?void 0:"i"),a]}function Bg(i){try{return i.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Bf(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),i}}function ru(i,r){if(r==="/")return i;if(!i.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,a=i.charAt(n);return a&&a!=="/"?null:i.slice(n)||"/"}function Wg(i,r){r===void 0&&(r="/");let{pathname:n,search:a="",hash:l=""}=typeof i=="string"?Ys(i):i;return{pathname:n?n.startsWith("/")?n:$g(n,r):r,search:Hg(a),hash:Gg(l)}}function $g(i,r){let n=r.replace(/\/+$/,"").split("/");return i.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function kc(i,r,n,a){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zg(i){return i.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function zf(i,r){let n=zg(i);return r?n.map((a,l)=>l===n.length-1?a.pathname:a.pathnameBase):n.map(a=>a.pathnameBase)}function qf(i,r,n,a){a===void 0&&(a=!1);let l;typeof i=="string"?l=Ys(i):(l=Gi({},i),pt(!l.pathname||!l.pathname.includes("?"),kc("?","pathname","search",l)),pt(!l.pathname||!l.pathname.includes("#"),kc("#","pathname","hash",l)),pt(!l.search||!l.search.includes("#"),kc("#","search","hash",l)));let u=i===""||l.pathname==="",d=u?"/":l.pathname,m;if(d==null)m=n;else{let x=r.length-1;if(!a&&d.startsWith("..")){let b=d.split("/");for(;b[0]==="..";)b.shift(),x-=1;l.pathname=b.join("/")}m=x>=0?r[x]:"/"}let p=Wg(l,m),y=d&&d!=="/"&&d.endsWith("/"),g=(u||d===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(y||g)&&(p.pathname+="/"),p}const _n=i=>i.join("/").replace(/\/\/+/g,"/"),qg=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),Hg=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Gg=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Vg(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const Hf=["post","put","patch","delete"];new Set(Hf);const Jg=["get",...Hf];new Set(Jg);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vi(){return Vi=Object.assign?Object.assign.bind():function(i){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])}return i},Vi.apply(this,arguments)}const nu=j.createContext(null),Qg=j.createContext(null),es=j.createContext(null),Eo=j.createContext(null),ts=j.createContext({outlet:null,matches:[],isDataRoute:!1}),Gf=j.createContext(null);function Kg(i,r){let{relative:n}=r===void 0?{}:r;Ki()||pt(!1);let{basename:a,navigator:l}=j.useContext(es),{hash:u,pathname:d,search:m}=Jf(i,{relative:n}),p=d;return a!=="/"&&(p=d==="/"?a:_n([a,d])),l.createHref({pathname:p,search:m,hash:u})}function Ki(){return j.useContext(Eo)!=null}function Xs(){return Ki()||pt(!1),j.useContext(Eo).location}function Vf(i){j.useContext(es).static||j.useLayoutEffect(i)}function qr(){let{isDataRoute:i}=j.useContext(ts);return i?cy():Yg()}function Yg(){Ki()||pt(!1);let i=j.useContext(nu),{basename:r,future:n,navigator:a}=j.useContext(es),{matches:l}=j.useContext(ts),{pathname:u}=Xs(),d=JSON.stringify(zf(l,n.v7_relativeSplatPath)),m=j.useRef(!1);return Vf(()=>{m.current=!0}),j.useCallback(function(y,g){if(g===void 0&&(g={}),!m.current)return;if(typeof y=="number"){a.go(y);return}let x=qf(y,JSON.parse(d),u,g.relative==="path");i==null&&r!=="/"&&(x.pathname=x.pathname==="/"?r:_n([r,x.pathname])),(g.replace?a.replace:a.push)(x,g.state,g)},[r,a,d,u,i])}function Jf(i,r){let{relative:n}=r===void 0?{}:r,{future:a}=j.useContext(es),{matches:l}=j.useContext(ts),{pathname:u}=Xs(),d=JSON.stringify(zf(l,a.v7_relativeSplatPath));return j.useMemo(()=>qf(i,JSON.parse(d),u,n==="path"),[i,d,u,n])}function Xg(i,r){return Zg(i,r)}function Zg(i,r,n,a){Ki()||pt(!1);let{navigator:l}=j.useContext(es),{matches:u}=j.useContext(ts),d=u[u.length-1],m=d?d.params:{};d&&d.pathname;let p=d?d.pathnameBase:"/";d&&d.route;let y=Xs(),g;if(r){var x;let _=typeof r=="string"?Ys(r):r;p==="/"||(x=_.pathname)!=null&&x.startsWith(p)||pt(!1),g=_}else g=y;let b=g.pathname||"/",E=b;if(p!=="/"){let _=p.replace(/^\//,"").split("/");E="/"+b.replace(/^\//,"").split("/").slice(_.length).join("/")}let k=Ng(i,{pathname:E}),C=sy(k&&k.map(_=>Object.assign({},_,{params:Object.assign({},m,_.params),pathname:_n([p,l.encodeLocation?l.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?p:_n([p,l.encodeLocation?l.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),u,n,a);return r&&C?j.createElement(Eo.Provider,{value:{location:Vi({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Sn.Pop}},C):C}function ey(){let i=ly(),r=Vg(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},r),n?j.createElement("pre",{style:l},n):null,null)}const ty=j.createElement(ey,null);class ry extends j.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){console.error("React Router caught the following error during render",r,n)}render(){return this.state.error!==void 0?j.createElement(ts.Provider,{value:this.props.routeContext},j.createElement(Gf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ny(i){let{routeContext:r,match:n,children:a}=i,l=j.useContext(nu);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(ts.Provider,{value:r},a)}function sy(i,r,n,a){var l;if(r===void 0&&(r=[]),n===void 0&&(n=null),a===void 0&&(a=null),i==null){var u;if(!n)return null;if(n.errors)i=n.matches;else if((u=a)!=null&&u.v7_partialHydration&&r.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let d=i,m=(l=n)==null?void 0:l.errors;if(m!=null){let g=d.findIndex(x=>x.route.id&&m?.[x.route.id]!==void 0);g>=0||pt(!1),d=d.slice(0,Math.min(d.length,g+1))}let p=!1,y=-1;if(n&&a&&a.v7_partialHydration)for(let g=0;g<d.length;g++){let x=d[g];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(y=g),x.route.id){let{loaderData:b,errors:E}=n,k=x.route.loader&&b[x.route.id]===void 0&&(!E||E[x.route.id]===void 0);if(x.route.lazy||k){p=!0,y>=0?d=d.slice(0,y+1):d=[d[0]];break}}}return d.reduceRight((g,x,b)=>{let E,k=!1,C=null,_=null;n&&(E=m&&x.route.id?m[x.route.id]:void 0,C=x.route.errorElement||ty,p&&(y<0&&b===0?(uy("route-fallback"),k=!0,_=null):y===b&&(k=!0,_=x.route.hydrateFallbackElement||null)));let $=r.concat(d.slice(0,b+1)),F=()=>{let R;return E?R=C:k?R=_:x.route.Component?R=j.createElement(x.route.Component,null):x.route.element?R=x.route.element:R=g,j.createElement(ny,{match:x,routeContext:{outlet:g,matches:$,isDataRoute:n!=null},children:R})};return n&&(x.route.ErrorBoundary||x.route.errorElement||b===0)?j.createElement(ry,{location:n.location,revalidation:n.revalidation,component:C,error:E,children:F(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):F()},null)}var Qf=function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i}(Qf||{}),Kf=function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i}(Kf||{});function iy(i){let r=j.useContext(nu);return r||pt(!1),r}function ay(i){let r=j.useContext(Qg);return r||pt(!1),r}function oy(i){let r=j.useContext(ts);return r||pt(!1),r}function Yf(i){let r=oy(),n=r.matches[r.matches.length-1];return n.route.id||pt(!1),n.route.id}function ly(){var i;let r=j.useContext(Gf),n=ay(),a=Yf();return r!==void 0?r:(i=n.errors)==null?void 0:i[a]}function cy(){let{router:i}=iy(Qf.UseNavigateStable),r=Yf(Kf.UseNavigateStable),n=j.useRef(!1);return Vf(()=>{n.current=!0}),j.useCallback(function(l,u){u===void 0&&(u={}),n.current&&(typeof l=="number"?i.navigate(l):i.navigate(l,Vi({fromRouteId:r},u)))},[i,r])}const ef={};function uy(i,r,n){ef[i]||(ef[i]=!0)}function dy(i,r){i?.v7_startTransition,i?.v7_relativeSplatPath}function Mt(i){pt(!1)}function hy(i){let{basename:r="/",children:n=null,location:a,navigationType:l=Sn.Pop,navigator:u,static:d=!1,future:m}=i;Ki()&&pt(!1);let p=r.replace(/^\/*/,"/"),y=j.useMemo(()=>({basename:p,navigator:u,static:d,future:Vi({v7_relativeSplatPath:!1},m)}),[p,m,u,d]);typeof a=="string"&&(a=Ys(a));let{pathname:g="/",search:x="",hash:b="",state:E=null,key:k="default"}=a,C=j.useMemo(()=>{let _=ru(g,p);return _==null?null:{location:{pathname:_,search:x,hash:b,state:E,key:k},navigationType:l}},[p,g,x,b,E,k,l]);return C==null?null:j.createElement(es.Provider,{value:y},j.createElement(Eo.Provider,{children:n,value:C}))}function fy(i){let{children:r,location:n}=i;return Xg(Lc(r),n)}new Promise(()=>{});function Lc(i,r){r===void 0&&(r=[]);let n=[];return j.Children.forEach(i,(a,l)=>{if(!j.isValidElement(a))return;let u=[...r,l];if(a.type===j.Fragment){n.push.apply(n,Lc(a.props.children,u));return}a.type!==Mt&&pt(!1),!a.props.index||!a.props.children||pt(!1);let d={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=Lc(a.props.children,u)),n.push(d)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mc(){return Mc=Object.assign?Object.assign.bind():function(i){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])}return i},Mc.apply(this,arguments)}function py(i,r){if(i==null)return{};var n={},a=Object.keys(i),l,u;for(u=0;u<a.length;u++)l=a[u],!(r.indexOf(l)>=0)&&(n[l]=i[l]);return n}function my(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function gy(i,r){return i.button===0&&(!r||r==="_self")&&!my(i)}const yy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],vy="6";try{window.__reactRouterVersion=vy}catch{}const wy="startTransition",tf=gg[wy];function xy(i){let{basename:r,children:n,future:a,window:l}=i,u=j.useRef();u.current==null&&(u.current=Sg({window:l,v5Compat:!0}));let d=u.current,[m,p]=j.useState({action:d.action,location:d.location}),{v7_startTransition:y}=a||{},g=j.useCallback(x=>{y&&tf?tf(()=>p(x)):p(x)},[p,y]);return j.useLayoutEffect(()=>d.listen(g),[d,g]),j.useEffect(()=>dy(a),[a]),j.createElement(hy,{basename:r,children:n,location:m.location,navigationType:m.action,navigator:d,future:a})}const by=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ky=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,br=j.forwardRef(function(r,n){let{onClick:a,relative:l,reloadDocument:u,replace:d,state:m,target:p,to:y,preventScrollReset:g,viewTransition:x}=r,b=py(r,yy),{basename:E}=j.useContext(es),k,C=!1;if(typeof y=="string"&&ky.test(y)&&(k=y,by))try{let R=new URL(window.location.href),B=y.startsWith("//")?new URL(R.protocol+y):new URL(y),Z=ru(B.pathname,E);B.origin===R.origin&&Z!=null?y=Z+B.search+B.hash:C=!0}catch{}let _=Kg(y,{relative:l}),$=Sy(y,{replace:d,state:m,target:p,preventScrollReset:g,relative:l,viewTransition:x});function F(R){a&&a(R),R.defaultPrevented||$(R)}return j.createElement("a",Mc({},b,{href:k||_,onClick:C||u?a:F,ref:n,target:p}))});var rf;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(rf||(rf={}));var nf;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(nf||(nf={}));function Sy(i,r){let{target:n,replace:a,state:l,preventScrollReset:u,relative:d,viewTransition:m}=r===void 0?{}:r,p=qr(),y=Xs(),g=Jf(i,{relative:d});return j.useCallback(x=>{if(gy(x,n)){x.preventDefault();let b=a!==void 0?a:wo(y)===wo(g);p(i,{replace:b,state:l,preventScrollReset:u,relative:d,viewTransition:m})}},[y,p,g,a,l,n,i,u,d,m])}var _y={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const jy=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ny=(i,r)=>{const n=j.forwardRef(({color:a="currentColor",size:l=24,strokeWidth:u=2,absoluteStrokeWidth:d,children:m,...p},y)=>j.createElement("svg",{ref:y,..._y,width:l,height:l,stroke:a,strokeWidth:d?Number(u)*24/Number(l):u,className:`lucide lucide-${jy(i)}`,...p},[...r.map(([g,x])=>j.createElement(g,x)),...(Array.isArray(m)?m:[m])||[]]));return n.displayName=`${i}`,n};var Ye=Ny;const Ey=Ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Cy=Ye("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Cr=Ye("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Uc=Ye("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Fc=Ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Ty=Ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),qs=Ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),xt=Ye("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]),Py=Ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),sf=Ye("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),Br=Ye("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Oy=Ye("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Bc=Ye("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Ay=Ye("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Iy=Ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),$i=Ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),af=Ye("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Wc=Ye("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Ry=Ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Dy=Ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),of=Ye("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),go=Ye("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),zr=Ye("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Xf=Ye("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),kr=Ye("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),yo=Ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Js=Ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Ji=Ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Hs=Ye("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Ly(){return o.jsx("footer",{className:"fb-footer",children:o.jsxs("div",{className:"fb-footer-inner",children:[o.jsxs("div",{className:"fb-brand",children:[o.jsx("div",{className:"fb-logo",children:o.jsx(xt,{size:28,color:"#fff"})}),o.jsxs("div",{children:[o.jsx("h4",{children:"FitBuddy"}),o.jsx("p",{className:"muted",children:"Your friendly AI fitness companion"})]})]}),o.jsxs("div",{className:"fb-links",children:[o.jsxs("div",{className:"fb-col",children:[o.jsx("h5",{children:"Product"}),o.jsx(br,{to:"/questionnaire",children:"Get Started"}),o.jsx(br,{to:"/chat",children:"AI Coach"}),o.jsx(br,{to:"/shop",children:"Shop"})]}),o.jsxs("div",{className:"fb-col",children:[o.jsx("h5",{children:"Legal"}),o.jsx(br,{to:"/terms",children:"Terms of Service"}),o.jsx(br,{to:"/privacy",children:"Privacy Policy"})]}),o.jsxs("div",{className:"fb-col",children:[o.jsx("h5",{children:"Support"}),o.jsx("a",{href:"mailto:support@fitbuddy.example",children:"support@fitbuddy.example"}),o.jsx(br,{to:"/help",children:"Help Center"})]})]}),o.jsxs("div",{className:"fb-bottom",children:[o.jsxs("div",{children:[" ",new Date().getFullYear()," FitBuddy, LLC. All rights reserved."]}),o.jsx("div",{className:"socials muted",children:"Made with  for a healthier life"})]})]})})}const gn=[{text:"Set Goals",color:"primary",icon:o.jsx(kr,{size:20})},{text:"Track Progress",color:"blue",icon:o.jsx(Hs,{size:20})},{text:"Plan Workouts",color:"orange",icon:o.jsx(Cr,{size:20})},{text:"Stay Motivated",color:"purple",icon:o.jsx(go,{size:20})},{text:"AI Powered",color:"pink",icon:o.jsx(zr,{size:20})},{text:"Fun & Easy",color:"green",icon:o.jsx(Xf,{size:20})},{text:"Personalized",color:"blue2",icon:o.jsx(Js,{size:20})}],My=()=>{if(typeof document>"u")return!0;const i=document.referrer;if(console.log("[IntroBubbles] Referrer:",String(i).slice(0,200)),i)try{const r=new URL(i);if(console.log("[IntroBubbles] Referrer hostname:",r.hostname,"Current hostname:",window.location.hostname),r.hostname===window.location.hostname&&window.sessionStorage.getItem("fitbuddy-skip-intro")==="1")return console.log("[IntroBubbles] Skipping intro due to sessionStorage flag."),!1}catch(r){console.log("[IntroBubbles] Referrer parse error:",r)}return console.log("[IntroBubbles] Showing intro."),!0},Uy=({onFinish:i})=>{const[r,n]=j.useState(null),[a,l]=j.useState("wait"),[u,d]=j.useState(!1),[m,p]=j.useState(0);j.useEffect(()=>{const x=My();console.log("[IntroBubbles] useEffect: shouldShowIntro() =",x),n(x)},[]);const y=j.useRef();if(!y.current){y.current={angle:Array.from({length:gn.length},()=>Math.random()*30-15),dist:Array.from({length:gn.length},()=>Math.random()*30-15),edge:Array.from({length:gn.length},()=>Math.floor(Math.random()*4)),edgePos:Array.from({length:gn.length},()=>Math.random()*100)};try{const x=JSON.stringify(y.current).slice(0,400);console.log("[IntroBubbles] Random seeds generated:",x)}catch{console.log("[IntroBubbles] Random seeds generated")}}const g=j.useRef(i);return j.useEffect(()=>{g.current=i},[i]),j.useEffect(()=>{if(r===null)return;if(!r){console.log("[IntroBubbles] Skipping intro, calling onFinish immediately."),g.current();return}const x=[];console.log("[IntroBubbles] Starting intro animation."),l("flyin"),p(0);for(let E=0;E<gn.length;E++)x.push(setTimeout(()=>{p(k=>k+1),console.log(`[IntroBubbles] Bubble ${E} now visible.`)},E*400));const b=gn.length*400+800;return x.push(setTimeout(()=>{l("meet"),console.log("[IntroBubbles] Phase changed: meet")},b)),x.push(setTimeout(()=>{l("orbit"),console.log("[IntroBubbles] Phase changed: orbit")},b+1e3)),x.push(setTimeout(()=>{l("fadeout"),console.log("[IntroBubbles] Phase changed: fadeout")},b+4e3)),x.push(setTimeout(()=>{console.log("[IntroBubbles] onFinish called. Hiding overlay."),d(!0),g.current()},b)),()=>{x.forEach(clearTimeout),console.log("[IntroBubbles] Cleaned up timers.")}},[r]),r===null||!r?null:(console.log("[IntroBubbles] Rendering. Phase:",a,"Hide:",u,"VisibleBubbles:",m),o.jsx("div",{className:`intro-bubbles-overlay${u?" hide":""} ${a==="fadeout"?"fade-white":""}`,children:o.jsxs("div",{className:"bubbles-centerpiece",children:[o.jsx("div",{className:"center-logo",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"72",height:"72",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-dumbbell",children:[o.jsx("path",{d:"m6.5 6.5 11 11"}),o.jsx("path",{d:"m21 21-1-1"}),o.jsx("path",{d:"m3 3 1 1"}),o.jsx("path",{d:"m18 22 4-4"}),o.jsx("path",{d:"m2 6 4-4"}),o.jsx("path",{d:"m3 10 7-7"}),o.jsx("path",{d:"m14 21 7-7"})]})}),o.jsx("div",{className:a==="orbit"?"bubbles-rotate":"",children:gn.map((x,b)=>{if(b>=m)return null;const E=y.current.edge[b],k=y.current.edgePos[b];let C=0,_=0;E===0?(C=k,_=-10):E===1?(C=110,_=k):E===2?(C=k,_=110):(C=-10,_=k);const $=360/gn.length*b,F=210;let R=`bubble bubble-color-${x.color}`;a==="flyin"&&(R+=" bubble-fly-in"),a==="orbit"&&(R+=" bubble-orbit"),a==="meet"&&(R+=" bubble-meet");try{const B=JSON.stringify({i:b,phase:a,bubbleClass:R,offX:C,offY:_,angle:$,distance:F}).slice(0,300);console.log(`[IntroBubbles] Rendering bubble ${b}:`,B)}catch{console.log(`[IntroBubbles] Rendering bubble ${b}`)}return o.jsxs("div",{className:R,"data-offscreen-x":C,"data-offscreen-y":_,"data-angle":$,"data-distance":F,children:[o.jsx("span",{className:"bubble-icon",children:x.icon}),x.text]},b)})})]})}))},Sc=["Set Goals","Track Progress","Plan Workouts","Stay Motivated","AI Powered","Fun & Easy","Personalized"],Gs=[];for(;Gs.length<3;){const i=Math.floor(Math.random()*7);Gs.includes(i)||Gs.push(i)}const Fy=()=>{const i=Xs(),r=qr(),a=new URLSearchParams(i.search).get("intro"),l=a===null||a==="1",[u,d]=j.useState(!l),m=a!=="0",p=()=>{d(!0),i.search.includes("intro")&&r("/",{replace:!0})};return o.jsxs("div",{className:"welcome-page",children:[!u&&o.jsx(Uy,{onFinish:p}),u&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"hero-section",children:[o.jsxs("div",{className:"hero-content",children:[o.jsxs("div",{className:"logo-section"+(m?" bounce-in":""),children:[o.jsx("div",{className:"logo logo-centered",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-dumbbell",children:[o.jsx("path",{d:"m6.5 6.5 11 11"}),o.jsx("path",{d:"m21 21-1-1"}),o.jsx("path",{d:"m3 3 1 1"}),o.jsx("path",{d:"m18 22 4-4"}),o.jsx("path",{d:"m2 6 4-4"}),o.jsx("path",{d:"m3 10 7-7"}),o.jsx("path",{d:"m14 21 7-7"})]})}),o.jsx("h1",{className:"app-title",children:"Fitbuddy"}),o.jsx("p",{className:"app-subtitle",children:"Your AI-Powered Fitness Companion"})]}),o.jsxs("div",{className:"hero-text fade-in-up",children:[o.jsx("h2",{children:"Transform Your Fitness Journey"}),o.jsx("p",{children:"Get personalized workout plans powered by AI, track your progress, and achieve your fitness goals with fun, gamified experience."})]}),o.jsxs("div",{className:"cta-section fade-in-up",children:[o.jsx(br,{to:"/questionnaire",className:"btn btn-primary btn-large",children:"Start Your Journey"}),o.jsx("p",{className:"cta-subtitle",children:"Free  Personalized  AI-Powered"})]})]}),o.jsxs("div",{className:"hero-illustration",children:[o.jsxs("div",{className:"floating-card card-1",children:[o.jsx(kr,{size:24}),o.jsx("span",{children:Sc[Gs[0]]})]}),o.jsxs("div",{className:"floating-card card-2",children:[o.jsx(Cr,{size:24}),o.jsx("span",{children:Sc[Gs[1]]})]}),o.jsxs("div",{className:"floating-card card-3",children:[o.jsx(Hs,{size:24}),o.jsx("span",{children:Sc[Gs[2]]})]})]})]}),o.jsx("div",{className:"features-section",children:o.jsxs("div",{className:"container",children:[o.jsx("h3",{className:"section-title",children:"Why Choose Fitbuddy?"}),o.jsxs("div",{className:"features-grid",children:[o.jsxs("div",{className:"feature-card card fade-in-up",children:[o.jsx("div",{className:"feature-icon",children:o.jsx(kr,{size:32})}),o.jsx("h4",{children:"AI-Powered Plans"}),o.jsx("p",{children:"Get personalized workout routines generated by advanced AI based on your goals, fitness level, and preferences."})]}),o.jsxs("div",{className:"feature-card card fade-in-up",children:[o.jsx("div",{className:"feature-icon",children:o.jsx(Cr,{size:32})}),o.jsx("h4",{children:"Smart Calendar"}),o.jsx("p",{children:"Visualize your workout schedule with an intuitive calendar. Easily modify or request new workouts for any day."})]}),o.jsxs("div",{className:"feature-card card fade-in-up",children:[o.jsx("div",{className:"feature-icon",children:o.jsx(Hs,{size:32})}),o.jsx("h4",{children:"Adaptive Training"}),o.jsx("p",{children:"Your workouts evolve with you. The AI adjusts difficulty and variety based on your progress and feedback."})]})]})]})}),o.jsx("div",{className:"how-it-works-section",children:o.jsxs("div",{className:"container",children:[o.jsx("h3",{className:"section-title",children:"How It Works"}),o.jsxs("div",{className:"steps-container",children:[o.jsxs("div",{className:"step",children:[o.jsx("div",{className:"step-number",children:"1"}),o.jsxs("div",{className:"step-content",children:[o.jsx("h4",{children:"Tell Us About You"}),o.jsx("p",{children:"Answer a few questions about your fitness goals, experience level, and preferences."})]})]}),o.jsxs("div",{className:"step",children:[o.jsx("div",{className:"step-number",children:"2"}),o.jsxs("div",{className:"step-content",children:[o.jsx("h4",{children:"Get Your AI Plan"}),o.jsx("p",{children:"Our AI creates a personalized 30-day workout calendar tailored specifically for you."})]})]}),o.jsxs("div",{className:"step",children:[o.jsx("div",{className:"step-number",children:"3"}),o.jsxs("div",{className:"step-content",children:[o.jsx("h4",{children:"Train & Adapt"}),o.jsx("p",{children:"Follow your workouts, track progress, and request changes whenever you need them."})]})]})]})]})}),o.jsx("div",{className:"final-cta-section",children:o.jsx("div",{className:"container",children:o.jsxs("div",{className:"final-cta-content",children:[o.jsx("h3",{children:"Ready to Transform Your Fitness?"}),o.jsx("p",{children:"Join thousands of users who have already started their journey with Fatbuddy."}),o.jsx(br,{to:"/questionnaire",className:"btn btn-primary btn-large",children:"Get Started Now"})]})})})]}),o.jsx("div",{className:"welcome-footer-spacer",children:o.jsx(Ly,{})})]})},By="AIzaSyCdu8joW4s3FN2ybROS9f0Vj26fsmNGSlQ",su=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${By}`,Bi=async(i,r,n)=>{const a=new Date().toISOString().split("T")[0],l=r.startDate||a,u=`{
    "type": "object",
    "properties": {
      "id": { "type": "string" },
      "name": { "type": "string" },
      "description": { "type": "string" },
      "startDate": { "type": "string", "pattern": "\\d{4}-\\d{2}-\\d{2}" },
      "endDate": { "type": "string", "pattern": "\\d{4}-\\d{2}-\\d{2}" },
      "totalDays": { "type": "number" },
      "totalTime": { "type": "string" },
      "weeklyStructure": { "type": "array", "items": { "type": "string" } },
      "dailyWorkouts": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "date": { "type": "string", "pattern": "\\d{4}-\\d{2}-\\d{2}" },
            "type": { "type": "string" },
            "completed": { "type": "boolean" },
            "totalTime": { "type": "string" },
            "workouts": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "difficulty": { "type": "string" },
                  "duration": { "type": "string" },
                  "reps": { "anyOf": [{ "type": "number" }, { "type": "string" }] },
                  "muscleGroups": { "type": "array", "items": { "type": "string" } },
                  "equipment": { "type": "array", "items": { "type": "string" } },
                  "description": { "type": "string" },
                  "sets": { "type": "number" },
                  "rest": { "type": "string" }
                },
                "required": ["name","difficulty","duration","reps","muscleGroups"]
              }
            },
            "alternativeWorkouts": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "difficulty": { "type": "string" },
                  "duration": { "type": "string" },
                  "reps": { "anyOf": [{ "type": "number" }, { "type": "string" }] },
                  "muscleGroups": { "type": "array", "items": { "type": "string" } },
                  "equipment": { "type": "array", "items": { "type": "string" } },
                  "description": { "type": "string" }
                },
                "required": ["name","difficulty","duration","reps","muscleGroups"]
              }
            }
          },
          "required": ["date","type","workouts","alternativeWorkouts"]
        }
      }
    },
    "required": ["id","name","description","startDate","endDate","totalDays","totalTime","weeklyStructure","dailyWorkouts"]
  }`,d=JSON.stringify(n.map(_=>({id:_.id,title:_.title,subtitle:_.subtitle,type:_.type,options:_.options||[]})),null,2),m=JSON.stringify(r,null,2),y=`Please strictly adhere to the following JSON schema without adding any extra text, markdown, or code fences. Ensure all required fields are present and match the specified types. For the 'type' field in dailyWorkouts, use only one of the following values: 'strength', 'cardio', 'flexibility', 'rest', or 'mixed'.

Schema:
${u}

User Data:
${JSON.stringify(i,null,2)}

Questions Context:
${d}

Answers Context:
${m}

The current date is ${a}. The plan MUST start on ${l}.

Follow the provided weeklyStructure order as given by the schema.


  In dailyWorkouts, items must include keys in this order: date, type, completed, totalTime, workouts, alternativeWorkouts.

  Each workout entry must have ONLY these fields (and in the schema above these are required where noted): name, difficulty, duration, reps, muscleGroups, equipment, description. Additional optional fields allowed are: sets (number) and rest (string).

  Field formats (MUST be human-readable where indicated):
  - duration: a human-readable time string such as "5 minutes", "30 sec", "1 min per side" or "15-20 minutes".
  - reps: either a number (e.g. 10) or a short string like "AMRAP", "to failure", "8-12". If an exercise is time-based, reps can be an empty string or a descriptor.
  - muscleGroups: an array of short strings naming targeted body parts, e.g. ["chest","triceps","quads"]. Use common single-word names; avoid sentences.

  Ensure the JSON is syntactically valid: all arrays, objects, quotes, commas, brackets and braces must be closed. No trailing commas. Do not truncate any lists or objects.

Generate and return the JSON now.`,g=Math.random().toString(36).slice(2,9),x=new Date().toISOString(),b=`${y}

Variation-hint: please vary the workout details. RequestNonce:${g} RequestTime:${x}`,E=await fetch("/api/ai/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:b,userId:i?.id||null,meta:{nonce:g,ts:x}})});if(!E.ok)throw new Error("AI generation failed");const C=(await E.json()).text||"";return Wy(C,i)},Wy=(i,r)=>{console.log("Parsing AI response:",i);try{let n=i;const a=i.match(/```(?:json)?\s*([\s\S]*?)```/i);a&&a[1]?n=a[1].trim():n=i.replace(/```[a-zA-Z]*\n?|```/g,"").trim(),console.log("Extracted AI JSON:",n);const l=n.match(/{[\s\S]*}/);if(l&&(n=l[0],console.log("Trimmed to JSON block:",n)),n.startsWith("{")&&n.endsWith("}")){let u=JSON.parse(n);if(u.workout_plan&&(console.warn("parseAIResponse: unwrapping top-level workout_plan field"),u=u.workout_plan),!u.dailyWorkouts&&u.workouts&&(console.warn("parseAIResponse: mapping top-level 'workouts' to 'dailyWorkouts'"),u.dailyWorkouts=u.workouts),u.dailyWorkouts&&u.dailyWorkouts.length>0&&u.dailyWorkouts.every(m=>!m.date)&&u.startDate&&u.weeklyStructure){const m=new Date(u.startDate),p=u.weeklyStructure.map(b=>b.split(":")[0].trim()),y={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},g=p.map(b=>{const E=y[b]??new Date(u.startDate).getDay(),k=new Date(m);for(let C=0;C<7;C++){if(k.getDay()===E)return new Date(k);k.setDate(k.getDate()+1)}return new Date(m)}),x=p.length;u.dailyWorkouts.forEach((b,E)=>{const k=Math.floor(E/x),C=E%x,_=new Date(g[C]);_.setDate(_.getDate()+k*7),b.date=_.toISOString().split("T")[0],b.type=p[C].toLowerCase()}),console.warn("parseAIResponse: assigned fallback dates/types from weeklyStructure")}if(console.log("Parsed AI response JSON:",u),!u.dailyWorkouts)throw new Error("Parsed response missing dailyWorkouts");const d=u.dailyWorkouts.map(m=>({date:m.date,totalTime:m.totalTime||"",workouts:((m.workouts??m.exercises)||[]).map(p=>{if(typeof p=="string")return{name:p,description:p,difficulty:"beginner",muscleGroups:[],equipment:[],duration:"",reps:""};const y=p.name??p.exercise??"",g=p.description??p.instructions??"",x=p.duration??(p.durationSeconds?`${p.durationSeconds} sec`:""),b=p.sets,E=p.reps??"",k=p.rest??"";return{name:y,description:g,difficulty:p.difficulty||"beginner",muscleGroups:p.muscleGroups||[],equipment:p.equipment||[],duration:x,reps:E,...b!==void 0?{sets:b}:{},...k?{rest:k}:{}}}),alternativeWorkouts:((m.alternativeWorkouts??m.alternativeExercises)||[]).map(p=>{if(typeof p=="string")return{name:p,description:p,difficulty:"beginner",muscleGroups:[],equipment:[],duration:"",reps:""};const y=p.name??p.exercise??"",g=p.description??p.instructions??"",x=p.duration??(p.durationSeconds?`${p.durationSeconds} sec`:""),b=p.sets,E=p.reps??"",k=p.rest??"";return{name:y,description:g,difficulty:p.difficulty||"beginner",muscleGroups:p.muscleGroups||[],equipment:p.equipment||[],duration:x,reps:E,...b!==void 0?{sets:b}:{},...k?{rest:k}:{}}}),completed:!1,type:m.type||"mixed"}));return console.log("Mapped daily workouts:",d),{id:u.id||`plan-${Date.now()}`,name:u.name||`${r.username||"User"}'s Fitness Plan`,description:u.description||"A personalized workout plan.",startDate:u.startDate||new Date().toISOString().split("T")[0],endDate:u.endDate||new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],totalDays:u.totalDays||30,weeklyStructure:u.weeklyStructure||[],dailyWorkouts:d}}else throw new Error("Response is not in JSON format")}catch(n){throw console.error("Error parsing AI response:",n),console.error("Raw AI response:",i),n}},_c=async(i,r,n,a,l,u,d)=>{const m=new Date().toISOString().split("T")[0],p=r.startDate||m,y=`{
    "type": "object",
    "properties": {
      "date": { "type": "string", "pattern": "\\d{4}-\\d{2}-\\d{2}" },
      "type": { "type": "string" },
      "totalTime": { "type": "string" },
      "workouts": { "type": "array", "items": { "type": "object" } },
      "alternativeWorkouts": { "type": "array", "items": { "type": "object" } }
    },
    "required": ["date","type","workouts","alternativeWorkouts"]
  }`,g=JSON.stringify(i,null,2),x=JSON.stringify(n.map(F=>({id:F.id,title:F.title,type:F.type,options:F.options||[]})),null,2),b=JSON.stringify(r,null,2),E=JSON.stringify(u,null,2),k=JSON.stringify(d,null,2),C=`Here is the JSON schema for a DayWorkout:
${y}

Preferred start date: ${p}
User data:
${g}

User questionnaire schema and answers:
${x}
${b}

Existing plan workouts:
${E}
Current day old workout:
${k}

Current date: ${m}
Generate one DayWorkout JSON for ${a}, type '${l}', compatible with others. No wrappers, no markdown, pure JSON.`,_=`
IMPORTANT: return only the pure JSON object matching the DayWorkout schema, no markdown or code fences.`;let $=null;for(let F=1;F<=2;F++){const R=Math.random().toString(36).slice(2,9),B=new Date().toISOString(),Z=`${C}

Variation-hint: please vary the workout details and ordering where possible. RequestNonce:${R} RequestTime:${B}`,J=F===1?Z:Z+_;console.log(`generateWorkoutForDay: attempt ${F}, nonce=${R}, promptStart=`,J.slice(0,300));const ue=(await(await fetch(su,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:J}]}]})})).json()).candidates?.[0]?.content?.parts?.[0]?.text||"";console.log("generateWorkoutForDay: received AI text=",ue);try{let V=ue.match(/```(?:json)?\s*([\s\S]*?)```/i)?.[1]?.trim()??ue.replace(/```[a-zA-Z]*\\n?|```/g,"").trim();const ce=V.match(/{[\s\S]*}/);return ce&&(V=ce[0]),console.log("generateWorkoutForDay: parsing cleaned=",V),JSON.parse(V)}catch(we){if(console.warn(`generateWorkoutForDay: parse failed on attempt ${F}:`,we),$=we,F===2)throw $}}throw new Error("generateWorkoutForDay: unknown error")};async function $y(i){console.log("Requesting AI response with prompt:",i.prompt);const n=await(await fetch(su,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:i.prompt}]}]})})).json();console.log("Raw AI response:",n);const a=n.candidates?.[0];console.log("Candidate content:",a?.content),console.log("Candidate content.parts:",a?.content?.parts),console.log("Candidate content.parts[0].text:",a?.content?.parts?.[0]?.text);const l=a?.content?.parts?.[0]?.text||"";let u=l;const d=l.match(/```(?:json)?\n([\s\S]*?)```/);d&&d[1]&&(u=d[1].trim()),console.log("Cleaned AI JSON or text:",u);try{return JSON.parse(u)}catch{return console.warn("AI response is not valid JSON, returning raw text instead."),u}}async function zy(i){const r=[i.prompt],n=i.localStorageContext;n?(n.questionnaire&&r.push(`

Local: fitbuddy_questionnaire_progress: ${JSON.stringify(n.questionnaire).slice(0,1200)}`),n.userData&&r.push(`

Local: fitbuddy_user_data: ${JSON.stringify(n.userData).slice(0,1200)}`),n.workoutPlan&&r.push(`

Local: fitbuddy_workout_plan: ${JSON.stringify(n.workoutPlan).slice(0,2e3)}`)):i.workoutPlan&&r.push(`

User workoutPlan (truncated): ${JSON.stringify(i.workoutPlan).slice(0,2e3)}`);const a=r.join(`
`);console.log("Requesting AI text response with prompt (trim):",a.slice(0,300));const m=(await(await fetch(su,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:a}]}]})})).json()).candidates?.[0]?.content?.parts?.[0]?.text||"",p=m.match(/```(?:json)?\n([\s\S]*?)```/);return{text:p&&p[1]?p[1].trim():m.trim(),raw:m}}async function Yi(i){const r=localStorage.getItem("fitbuddy_questionnaire_progress"),n=localStorage.getItem("fitbuddy_workout_plan"),a=localStorage.getItem("fitbuddy_assessment_data"),l=localStorage.getItem(`fitbuddy_chat_${i}`),u=localStorage.getItem("fitbuddy_user_data");if(i)try{const d={userId:i};r!=null&&(d.fitbuddy_questionnaire_progress=r),n!=null&&(d.fitbuddy_workout_plan=n),a!=null&&(d.fitbuddy_assessment_data=a),l!=null&&(d.chat_history=l),u!=null&&(d.fitbuddy_user_data=u);try{const p=localStorage.getItem("fitbuddy_user_data");if(p)try{const y=JSON.parse(p);d.fitbuddy_user_data=y,y&&typeof y=="object"&&(y.accepted_terms!==void 0&&(d.accepted_terms=y.accepted_terms),y.accepted_privacy!==void 0&&(d.accepted_privacy=y.accepted_privacy),y.chat_history!==void 0&&d.chat_history===void 0&&(d.chat_history=y.chat_history))}catch{}}catch{}const m=await ut(()=>import("./apiAuth-CGYA-Ck2.js"),[]).then(p=>p.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}));await fetch("/api/userdata/save",m)}catch{}}function qy(i){try{if(!i||typeof navigator>"u"||typeof navigator.sendBeacon!="function")return!1;const r=localStorage.getItem("fitbuddy_questionnaire_progress"),n=localStorage.getItem("fitbuddy_workout_plan"),a=localStorage.getItem("fitbuddy_assessment_data"),l={userId:i};r!=null&&(l.fitbuddy_questionnaire_progress=r),n!=null&&(l.fitbuddy_workout_plan=n),a!=null&&(l.fitbuddy_assessment_data=a);try{const m=localStorage.getItem("fitbuddy_user_data");if(m)try{const p=JSON.parse(m);p&&typeof p=="object"&&(p.accepted_terms!==void 0&&(l.accepted_terms=p.accepted_terms),p.accepted_privacy!==void 0&&(l.accepted_privacy=p.accepted_privacy),p.chat_history!==void 0&&l.chat_history===void 0&&(l.chat_history=p.chat_history))}catch{}}catch{}const u="/api/userdata/save",d=new Blob([JSON.stringify(l)],{type:"application/json"});return navigator.sendBeacon(u,d)}catch{return!1}}async function Xn(i){if(i)try{const r="/api/userdata/load";console.log("[cloudBackupService] restoreUserDataFromServer -> POSTing",r,"userId=",i);const n=await ut(()=>import("./apiAuth-CGYA-Ck2.js"),[]).then(p=>p.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:i})})),a=await fetch(r,n),l=await a.text();if(console.log("[cloudBackupService] restoreUserDataFromServer -> response status:",a.status,"ok:",a.ok),l&&l.length>0&&console.log("[cloudBackupService] restoreUserDataFromServer -> response snippet:",l.slice(0,1e3)),!a.ok)return;let u=null;try{u=l?JSON.parse(l):null}catch(p){console.warn("[cloudBackupService] restoreUserDataFromServer -> failed to parse JSON response:",p);return}const d=u?.stored??u?.payload??u;if(!d)return;const m=p=>{try{const y=d[p];if(y==null)return;const g=typeof y=="string"?y:JSON.stringify(y);localStorage.setItem(p,g)}catch{}};m("fitbuddy_questionnaire_progress"),m("fitbuddy_workout_plan"),m("fitbuddy_assessment_data");try{const p=d.chat_history??d.fitbuddy_chat??d.fitbuddy_chat_history;if(p!=null)try{const y=typeof p=="string"?p:JSON.stringify(p);localStorage.setItem(`fitbuddy_chat_${i}`,y)}catch{}}catch{}console.log("[cloudBackupService] restoreUserDataFromServer -> wrote keys from payload:",Object.keys(d))}catch{}}async function iu(i){if(!i)return!1;try{const r=`fitbuddy_chat_${i}`,n=localStorage.getItem(r),a=localStorage.getItem("fitbuddy_tos_accepted_v1"),l={userId:i};if(n!=null)try{l.chat_history=JSON.parse(n)}catch{l.chat_history=n}if(a!=null)try{l.fitbuddy_tos_accepted_v1=JSON.parse(a)}catch{l.fitbuddy_tos_accepted_v1=a}if(l.chat_history===void 0&&l.fitbuddy_tos_accepted_v1===void 0)return!0;const u=await ut(()=>import("./apiAuth-CGYA-Ck2.js"),[]).then(m=>m.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}));if(!(await fetch("/api/userdata/save",u)).ok)return!1;try{localStorage.removeItem(r)}catch{}try{localStorage.removeItem("fitbuddy_tos_accepted_v1")}catch{}return!0}catch{return!1}}const Vs=Object.freeze(Object.defineProperty({__proto__:null,backupAndDeleteSensitive:iu,backupUserDataToServer:Yi,beaconBackupUserData:qy,restoreUserDataFromServer:Xn},Symbol.toStringTag,{value:"Module"})),Et={QUESTIONNAIRE_PROGRESS:"fitbuddy_questionnaire_progress",USER_DATA:"fitbuddy_user_data",ASSESSMENT_DATA:"fitbuddy_assessment_data",WORKOUT_PLAN:"fitbuddy_workout_plan"};function au(i){if(!i)return null;try{let r=JSON.parse(i);if(typeof r=="string")try{r=JSON.parse(r),console.log("[localStorage] safeParseStored -> double-encoded JSON parsed")}catch{}return r}catch(r){return console.warn("[localStorage] safeParseStored -> parse failed:",r),null}}let Kn=null;const Hy=800;function Nn(){try{const i=localStorage.getItem(Et.USER_DATA),r=i&&JSON.parse(i).data?.id||null;if(!r)return;Kn&&clearTimeout(Kn),Kn=window.setTimeout(async()=>{Kn=null;try{await Yi(r)}catch(n){console.warn("Auto backup failed:",n)}},Hy)}catch(i){console.warn("Failed to schedule backup:",i)}}const ou=i=>{try{localStorage.setItem(Et.ASSESSMENT_DATA,JSON.stringify({data:i,timestamp:Date.now()})),Nn()}catch(r){console.warn("Failed to save assessment data:",r)}},$c=()=>{try{const i=localStorage.getItem(Et.ASSESSMENT_DATA);if(!i)return null;const r=au(i);if(!r)return null;const{data:n,timestamp:a}=r;return console.log("[localStorage] loadAssessmentData -> found data, timestamp:",a),Date.now()-a>10080*60*1e3?(Zf(),null):n}catch(i){return console.warn("Failed to load assessment data:",i),null}},Zf=()=>{try{localStorage.removeItem(Et.ASSESSMENT_DATA),Nn()}catch(i){console.warn("Failed to clear assessment data:",i)}},vo=i=>{try{localStorage.setItem(Et.QUESTIONNAIRE_PROGRESS,JSON.stringify(i)),Nn()}catch(r){console.warn("Failed to save questionnaire progress:",r)}},ur=()=>{try{const i=localStorage.getItem(Et.QUESTIONNAIRE_PROGRESS);if(!i)return null;const r=au(i);return r?Date.now()-r.timestamp>1440*60*1e3?(Xi(),null):r:null}catch(i){return console.warn("Failed to load questionnaire progress:",i),null}},Xi=()=>{try{localStorage.removeItem(Et.QUESTIONNAIRE_PROGRESS),Nn()}catch(i){console.warn("Failed to clear questionnaire progress:",i)}},lu=(i,r)=>{try{let n={};i&&typeof i=="object"&&("data"in i||"token"in i)?(n.data=i.data||null,"token"in i&&(n.token=i.token??null)):n.data=i||null;const a={...n,timestamp:Date.now()};localStorage.setItem(Et.USER_DATA,JSON.stringify(a)),(!r||!r.skipBackup)&&Nn();try{sessionStorage.removeItem("fitbuddy_no_auto_restore")}catch{}try{localStorage.removeItem("fitbuddy_no_auto_restore")}catch{}}catch(n){console.warn("Failed to save user data:",n)}},jn=()=>{try{const i=localStorage.getItem(Et.USER_DATA);if(!i)return null;const{data:r,timestamp:n}=JSON.parse(i);return Date.now()-n>10080*60*1e3?(Co(),null):r}catch(i){return console.warn("Failed to load user data:",i),null}},Co=()=>{try{localStorage.removeItem(Et.USER_DATA),Kn&&(clearTimeout(Kn),Kn=null)}catch(i){console.warn("Failed to clear user data:",i)}},bn=i=>{try{const a={data:(u=>u&&{id:u.id,name:u.name,description:u.description,startDate:typeof u.startDate=="string"?u.startDate:u.startDate?new Date(u.startDate).toISOString().split("T")[0]:void 0,endDate:typeof u.endDate=="string"?u.endDate:u.endDate?new Date(u.endDate).toISOString().split("T")[0]:void 0,totalDays:typeof u.totalDays=="number"?u.totalDays:Array.isArray(u.dailyWorkouts)?u.dailyWorkouts.filter(Boolean).length:void 0,totalTime:u.totalTime,weeklyStructure:Array.isArray(u.weeklyStructure)?u.weeklyStructure.slice():[],dailyWorkouts:Array.isArray(u.dailyWorkouts)?u.dailyWorkouts.filter(Boolean).map(m=>({date:typeof m?.date=="string"?m.date:m?.date?new Date(m.date).toISOString().split("T")[0]:"",type:m?.type,completed:!!m?.completed,totalTime:m?.totalTime||"",workouts:Array.isArray(m?.workouts)?m.workouts.filter(Boolean).map(p=>({name:p?.name??"",description:p?.description??"",difficulty:p?.difficulty??"beginner",duration:p?.duration??"",reps:p?.reps??"",muscleGroups:Array.isArray(p?.muscleGroups)?p.muscleGroups:p?.muscleGroups?[p.muscleGroups]:[],equipment:Array.isArray(p?.equipment)?p.equipment:p?.equipment?[p.equipment]:[],sets:typeof p?.sets=="number"?p.sets:void 0,rest:p?.rest||void 0})):[],alternativeWorkouts:Array.isArray(m?.alternativeWorkouts)?m.alternativeWorkouts.filter(Boolean).map(p=>({name:p?.name??"",description:p?.description??"",difficulty:p?.difficulty??"beginner",duration:p?.duration??"",reps:p?.reps??"",muscleGroups:Array.isArray(p?.muscleGroups)?p.muscleGroups:p?.muscleGroups?[p.muscleGroups]:[],equipment:Array.isArray(p?.equipment)?p.equipment:p?.equipment?[p.equipment]:[],sets:typeof p?.sets=="number"?p.sets:void 0,rest:p?.rest||void 0})):[]})):[]})(i),timestamp:Date.now()},l=JSON.stringify(a);localStorage.setItem(Et.WORKOUT_PLAN,l);try{const u=localStorage.getItem(Et.WORKOUT_PLAN);if(!u)throw new Error("Written value missing");JSON.parse(u)}catch(u){console.warn("Workout plan verification failed after save; removing corrupted key.",u);try{localStorage.removeItem(Et.WORKOUT_PLAN)}catch{}return}Nn()}catch(r){console.warn("Failed to save workout plan:",r)}},Qs=()=>{try{const i=localStorage.getItem(Et.WORKOUT_PLAN);if(!i)return null;console.log("[localStorage] loadWorkoutPlan -> raw length:",i.length);const r=au(i);if(!r)return null;const{data:n,timestamp:a}=r;return Date.now()-a>720*60*60*1e3?(To(),null):n}catch(i){return console.warn("Failed to load workout plan:",i),null}},To=()=>{try{localStorage.removeItem(Et.WORKOUT_PLAN),Nn()}catch(i){console.warn("Failed to clear workout plan:",i)}},Gy=(i,r)=>{try{const a=`fitbuddy_chat_${r?.userId||(()=>{try{const m=localStorage.getItem(Et.USER_DATA);return m&&JSON.parse(m).data?.id||null}catch{return null}})()||"anon"}`,l=localStorage.getItem(a);let u=[];if(l)try{u=JSON.parse(l),Array.isArray(u)||(u=[])}catch{u=[]}const d={role:i.role,text:i.text,ts:i.ts||Date.now()};u.push(d);try{localStorage.setItem(a,JSON.stringify(u))}catch{}try{const m=localStorage.getItem(Et.USER_DATA);if(m){const p=JSON.parse(m);p.chat_history=p.chat_history||[],p.chat_history.push(d),localStorage.setItem(Et.USER_DATA,JSON.stringify(p))}}catch{}Nn()}catch(n){console.warn("appendChatMessage failed",n)}},jc=Object.freeze(Object.defineProperty({__proto__:null,appendChatMessage:Gy,clearAssessmentData:Zf,clearQuestionnaireProgress:Xi,clearUserData:Co,clearWorkoutPlan:To,loadAssessmentData:$c,loadQuestionnaireProgress:ur,loadUserData:jn,loadWorkoutPlan:Qs,saveAssessmentData:ou,saveQuestionnaireProgress:vo,saveUserData:lu,saveWorkoutPlan:bn},Symbol.toStringTag,{value:"Module"})),Vy="https://corsproxy.io/?key=7cf03de1&url=https://script.google.com/macros/s/AKfycbwFDdT0QVaP2jY8t4N0048PfQW_rYxB4noFaG-nExO9MZ5h3DCuNLUPNg3-qntT01tg/exec?gid=0",yn=[{id:"age",title:"How old are you?",subtitle:"This helps us create age-appropriate workouts",type:"number",min:13,max:100,icon:o.jsx(Cr,{size:32})},{id:"fitnessLevel",title:"What's your current fitness level?",subtitle:"Be honest - we'll adjust everything to match your abilities",type:"single",options:["Beginner - Just starting out","Intermediate - I work out sometimes","Advanced - I exercise regularly"],icon:o.jsx(xt,{size:32})},{id:"fitnessBackground",title:"Tell us about your fitness journey so far",subtitle:"Share any previous experience, challenges, or what's worked for you before",type:"textarea",icon:o.jsx(Br,{size:32})},{id:"motivation",title:"What motivates you to start this fitness journey?",subtitle:"Understanding your 'why' helps us keep you motivated",type:"textarea",icon:o.jsx(kr,{size:32})},{id:"goals",title:"What are your fitness goals?",subtitle:"Select all that apply - we'll create a plan that covers everything",type:"multiple",options:["Lose weight","Build muscle","Improve endurance","Increase flexibility","General health","Sport-specific training","Stress relief","Better sleep","Improve posture","Boost confidence","Other"],icon:o.jsx(kr,{size:32})},{id:"specificGoals",title:"Can you be more specific about your main goal?",subtitle:"For example: 'Lose 20 pounds for my wedding' or 'Run a 5K without stopping'",type:"textarea",icon:o.jsx(kr,{size:32})},{id:"timeAvailable",title:"How much time can you dedicate daily?",subtitle:"We'll make sure every minute counts",type:"slider",min:15,max:120,step:15,icon:o.jsx(qs,{size:32})},{id:"startDate",title:"When would you like to start your workout plan?",subtitle:"Please enter your preferred start date (YYYY-MM-DD)",type:"text",icon:o.jsx(Cr,{size:32})},{id:"exerciseFormat",title:"How do you prefer to track your exercises?",subtitle:"This helps us format your workout instructions perfectly for you",type:"single",options:["Time-based (e.g., 30 seconds)","Rep-based (e.g., 10 reps)","Mixed - both time and reps","Other"],icon:o.jsx(qs,{size:32})},{id:"planDuration",title:"How long do you want your workout plan to be?",subtitle:"We can create plans of different lengths to match your goals and commitment level",type:"single",options:["1 week (Mini)","2 weeks (Quick start)","1 month (Standard)","6 weeks (Build habits)","3 months (Transformation)","6 months (Lifestyle change)"],icon:o.jsx(Cr,{size:32})},{id:"daysPerWeek",title:"How many days per week do you want to work out?",subtitle:"We'll plan rest days to help you recover",type:"single",options:["3 days","4 days","5 days","6 days","7 days","Other"],icon:o.jsx(Cr,{size:32})},{id:"preferredTime",title:"When do you prefer to work out?",subtitle:"We can tailor workouts to your energy levels throughout the day",type:"single",options:["Early morning (5-8 AM)","Morning (8-11 AM)","Lunch time (11 AM-2 PM)","Afternoon (2-5 PM)","Evening (5-8 PM)","Night (8-11 PM)","Varies/Flexible","Other"],icon:o.jsx(qs,{size:32})},{id:"energyLevels",title:"How would you rate your current energy levels?",subtitle:"This helps us design workouts that match your vitality",type:"rating",min:1,max:10,icon:o.jsx(Br,{size:32})},{id:"preferences",title:"What types of workouts do you enjoy?",subtitle:"Let's make fitness fun for you",type:"multiple",options:["Strength training","Cardio workouts","Yoga & stretching","HIIT workouts","Bodyweight exercises","Dance workouts","Outdoor activities","Swimming","Pilates","Martial arts","Team sports","Walking/Hiking","Other"],icon:o.jsx(Br,{size:32})},{id:"dislikes",title:"Are there any exercises you want to avoid?",subtitle:"We'll make sure to exclude anything you don't enjoy or can't do",type:"textarea",icon:o.jsx(Br,{size:32})},{id:"injuries",title:"Do you have any injuries or physical limitations?",subtitle:"This helps us create safe workouts tailored to your needs",type:"textarea",icon:o.jsx(Br,{size:32})},{id:"equipment",title:"What equipment do you have access to?",subtitle:"We'll work with whatever you've got",type:"multiple",options:["No equipment (bodyweight only)","Dumbbells","Resistance bands","Yoga mat","Pull-up bar","Gym membership","Treadmill/bike","Kettlebells","Barbell","Medicine ball","Foam roller","Suspension trainer (TRX)","Other"],icon:o.jsx(xt,{size:32})},{id:"budget",title:"Are you interested in additional fitness resources?",subtitle:"We can suggest equipment or services within your budget",type:"single",options:["No budget for additional equipment","Small budget ($0-50)","Medium budget ($50-200)","Higher budget ($200+)","Already have everything I need"],icon:o.jsx(kr,{size:32})},{id:"lifestyle",title:"How would you describe your lifestyle?",subtitle:"This helps us understand how to fit fitness into your routine",type:"single",options:["Very sedentary (desk job, little movement)","Mostly sedentary with some walking","Moderately active (some daily movement)","Active (regular movement throughout day)","Very active (physical job or lots of movement)"],icon:o.jsx(Js,{size:32})},{id:"sleepQuality",title:"How well do you sleep?",subtitle:"Sleep affects recovery and workout performance",type:"rating",min:1,max:10,icon:o.jsx(Br,{size:32})},{id:"stressLevel",title:"What's your current stress level?",subtitle:"We can include stress-relief exercises in your plan",type:"rating",min:1,max:10,icon:o.jsx(Br,{size:32})},{id:"socialPreference",title:"Do you prefer working out alone or with others?",subtitle:"This helps us suggest the right type of workout environment",type:"single",options:["Definitely alone","Mostly alone","No preference","Mostly with others","Definitely with others"],icon:o.jsx(Js,{size:32})},{id:"progressTracking",title:"How do you like to track your progress?",subtitle:"We can suggest the best methods for you",type:"multiple",options:["Weight/measurements","Progress photos","Workout logs","Fitness apps","Wearable devices","How I feel","Performance improvements","I don't like tracking","Other"],icon:o.jsx(kr,{size:32})},{id:"concerns",title:"Any questions, concerns, or special requests?",subtitle:"Share anything else that would help us create the perfect plan for you - dietary restrictions, work schedule, family commitments, past injuries, fears, or anything else on your mind",type:"textarea",icon:o.jsx(Br,{size:32})}],Jy=({onRegenerate:i,onEditResponses:r})=>o.jsx("div",{className:"menu-screen",children:o.jsxs("div",{className:"menu-container menu-container--hero",children:[o.jsxs("div",{className:"menu-hero",children:[o.jsx("div",{className:"menu-hero-icon",children:o.jsx(xt,{size:48})}),o.jsx("h1",{className:"menu-header",children:"Assessment Complete"}),o.jsx("p",{className:"menu-subtitle",children:"Nice work  we've saved your answers and can generate a refreshed plan anytime."})]}),o.jsxs("div",{className:"menu-actions",children:[o.jsxs("button",{className:"btn btn-primary menu-btn menu-btn--large",onClick:()=>i(),children:[o.jsx($i,{size:18}),o.jsx("span",{children:"Regenerate Plan"})]}),o.jsxs("button",{className:"btn btn-outline menu-btn menu-btn--alt",onClick:()=>r(),children:[o.jsx(Js,{size:18}),o.jsx("span",{children:"Edit Responses"})]})]}),o.jsx("div",{className:"menu-footer",children:o.jsx("small",{className:"menu-note",children:"Tip: Regenerating will create a fresh plan based on your current answers  your previous plan is saved in your profile."})})]})}),Qy=()=>o.jsx("div",{className:"questionnaire-page",children:o.jsx("div",{className:"questionnaire-container",children:o.jsxs("div",{className:"followup-loading-content",children:[o.jsx("div",{className:"spinner"}),o.jsx("h2",{className:"loading-title",children:"Generating Follow-Up Questions"}),o.jsx("p",{className:"loading-subtitle",children:"Hang tight while we personalize your questionnaire..."}),o.jsx("p",{className:"ai-disclaimer",children:"Disclaimer: These follow-up questions are AI-generated and may not be perfect."})]})})}),Ky=({onRetry:i})=>o.jsx("div",{className:"questionnaire-page",children:o.jsx("div",{className:"questionnaire-container error-screen",children:o.jsxs("div",{className:"error-content",children:[o.jsx("h2",{className:"error-title",children:"Oops! Something went wrong."}),o.jsx("p",{className:"error-message",children:"We couldn't generate your plan. Please try again."}),o.jsx("button",{className:"btn error-btn",onClick:i,children:"Retry"})]})})}),Yy=({onComplete:i})=>{const r=async(I,U)=>{try{console.log("Preparing data to send to Google Sheet webhook...");const ge=Object.entries(I).map(([Se,Ce],Te)=>{const Re=U.find(tt=>tt.id===Se);return{questionOrder:Te+1,questionType:Re?.aiGenerated?"AI":"Base",question:Re?.title||Se,answer:Array.isArray(Ce)?Ce.join("; "):String(Ce)}}),je={timestamp:new Date().toISOString(),rows:ge};console.log("Sending POST request to Google Sheet webhook with payload:",je);const xe=await fetch(Vy,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)});if(!xe.ok)throw new Error(`Failed with status ${xe.status}`);console.log("Data successfully sent to Google Sheet:",await xe.json())}catch(ge){console.error("Failed to send to Google Sheet:",ge)}},[n,a]=j.useState(0),[l,u]=j.useState({}),[d,m]=j.useState({}),[p,y]=j.useState(yn),[g,x]=j.useState(!1),[b,E]=j.useState(!1),k=5,[C,_]=j.useState(!1),[$,F]=j.useState(!1),[R,B]=j.useState(null),[Z,J]=j.useState(!1),[W,te]=j.useState(null),[ue,we]=j.useState(null),V=qr(),[ce,ie]=j.useState(!1);er.useEffect(()=>{const I=()=>{document.visibilityState==="visible"&&ie(!0)};return document.addEventListener("visibilitychange",I),()=>document.removeEventListener("visibilitychange",I)},[]);const z=(I=!1)=>{if(ce&&!I){ie(!1),console.log("Skipped automatic navigation to /loading due to recent tab return");return}V("/loading")},[oe,re]=j.useState(!1),Y=p[n],H=yn.length+k,de=(n+1)/H*100;j.useEffect(()=>{let I=!0;return(async()=>{try{try{if(localStorage.getItem("fitbuddy_no_auto_restore")||sessionStorage.getItem("fitbuddy_no_auto_restore"))return}catch{}const ge=ur(),je=Qs();if(ge||je)return;const xe=jn();if(!xe||!xe.id||(await Xn(xe.id),!I))return;const Se=$c();Se&&u(Te=>({...Te||{},...Se||{}}));const Ce=ur();Ce&&(y(Ce.questionsList||p),u(Ce.answers||{}),m(Ce.customInputs||{}),a(Ce.currentQuestion||0),E(!0),Ce.completed&&(_(!0),F(!0))),B(xe)}catch(ge){console.warn("Failed to restore server data in Questionnaire:",ge)}})(),()=>{I=!1}},[]);const N=er.useRef(null);er.useEffect(()=>{N.current&&N.current.style.setProperty("--progress-width",`${de}%`)},[de]),j.useEffect(()=>{const I=ur();if(I){if(I.questionsList){const U=I.questionsList.map(ge=>({...ge,icon:O(ge.iconType||"")}));y(U),U.length>yn.length&&x(!0)}if(I.completed){_(!0),F(!0),u(I.answers);return}a(I.currentQuestion),u(I.answers),m(I.customInputs||{}),E(!0)}},[]),j.useEffect(()=>{if(b||Object.keys(l).length>0){const I=p.map(({icon:U,...ge})=>ge);vo({currentQuestion:n,answers:l,customInputs:d,completed:C,timestamp:Date.now(),userData:R,questionsList:I})}},[n,l,d,b,C,p]);const w=Object.keys(l).length>=23&&!g,O=I=>{switch(I){case"Target":case"target":return o.jsx(kr,{size:32});case"Clock":case"clock":return o.jsx(qs,{size:32});case"Dumbbell":case"dumbbell":case"equipment":return o.jsx(xt,{size:32});case"Heart":case"heart":case"heartRate":return o.jsx(Br,{size:32});case"Calendar":case"calendar":return o.jsx(Cr,{size:32});case"User":case"user":return o.jsx(Js,{size:32});case"Star":case"star":return o.jsx(Xf,{size:32});default:return o.jsx(kr,{size:32})}},G=async(I=!1)=>{if(!I&&Object.keys(l).length<23)return console.log("[AI-FOLLOWUP] Not enough answers for follow-up. answers.length:",Object.keys(l).length),!1;J(!0),te(null);try{const U={...l};Object.keys(d).forEach(Se=>{if(d[Se]){const Ce=U[Se];if(typeof Ce=="string"&&Ce==="Other")U[Se]=d[Se];else if(Array.isArray(Ce)&&Ce.includes("Other")){const Te=Ce.filter(Re=>Re!=="Other");Te.push(d[Se]),U[Se]=Te}}});const ge={questions:p.slice(0,23).map(Se=>({id:Se.id,title:Se.title})),answers:U},je=`Based on the following user questions and responses, generate exactly 5 additional follow-up questions in JSON array format. Only return valid JSON; no extra text. Each object should have id, title, subtitle, type (single, multiple, textarea (for written responses), rating, slider, number), options, iconType, aiGenerated:true. Context: ${JSON.stringify(ge)}`;console.log("[AI-FOLLOWUP] Prompt:",je);const xe=await $y({prompt:je});if(console.log("[AI-FOLLOWUP] Received AI response:",xe),Array.isArray(xe)){const Se=xe.map((Ce,Te)=>(console.log(`[AI-FOLLOWUP] Generated Q${Te+1}:`,Ce),{...Ce,icon:O(Ce.iconType||"")}));return y(Ce=>{const Te=[...Ce,...Se];return console.log("[AI-FOLLOWUP] allQuestions after append:",Te),setTimeout(()=>{try{n===yn.length-1&&a(yn.length)}catch{}},0),Te}),x(!0),console.log("[AI-FOLLOWUP] Follow-up questions appended and flag set."),!0}else console.error("[AI-FOLLOWUP] AI response is not an array:",xe),te("Invalid AI response format")}catch(U){console.error("[AI-FOLLOWUP] Error fetching follow-up questions:",U),te("Failed to fetch follow-up questions. Please try again.")}finally{J(!1),console.log("[AI-FOLLOWUP] Done loading follow-up questions.")}return!1};j.useEffect(()=>{w&&G()},[w]);const ee=I=>{if(Y.id==="startDate"){const U=new Date().toISOString().split("T")[0];I&&I<U?we("Start date cannot be in the past"):we(null)}u(U=>({...U,[Y.id]:I}))},ae=async()=>{if(console.log("[NAV] handleNext called. currentQuestion:",n,"allQuestions.length:",p.length),n<p.length-1)n===22&&console.log("[NAV] About to answer 23rd question. Next click will trigger AI follow-up logic."),a(I=>{const U=I+1;return console.log("[NAV] Advancing to question index:",U),U});else{if(!g&&n===yn.length-1){console.log("[NAV] At last base question; generating follow-ups instead of final plan.");const I=await G(!0);a(I?yn.length:U=>Math.min(p.length-1,U+1));return}if(oe){console.log("[PLAN] Generation already in progress, ignoring duplicate request");return}re(!0),z(!0),te(null),z();try{r(l,p);const I={...l};Object.keys(d).forEach(xe=>{if(d[xe]){const Se=I[xe];if(typeof Se=="string"&&Se==="Other")I[xe]=d[xe];else if(Array.isArray(Se)&&Se.includes("Other")){const Ce=Se.filter(Te=>Te!=="Other");Ce.push(d[xe]),I[xe]=Ce}}});const U={username:I.username||"",age:I.age,fitnessLevel:I.fitnessLevel?.split(" -")[0].toLowerCase(),fitnessBackground:I.fitnessBackground,motivation:I.motivation,goals:I.goals||[],specificGoals:I.specificGoals,timeAvailable:I.timeAvailable,exerciseFormat:I.exerciseFormat,planDuration:I.planDuration,daysPerWeek:I.daysPerWeek,preferredTime:I.preferredTime,energyLevels:I.energyLevels,preferences:I.preferences||[],dislikes:I.dislikes,injuries:I.injuries,equipment:I.equipment||[],budget:I.budget,lifestyle:I.lifestyle,sleepQuality:I.sleepQuality,stressLevel:I.stressLevel,socialPreference:I.socialPreference,progressTracking:I.progressTracking,concerns:I.concerns};B(U);let ge;const je=2;for(let xe=1;xe<=je+1;xe++)try{console.log(`[PLAN] Generating workout plan, attempt ${xe}`);const Se=(I.planDuration||"").toString().toLowerCase(),Te=(Re=>Re.includes("1 week")?1:Re.includes("2 week")?2:Re.includes("6 week")?6:Re.includes("1 month")?4:Re.includes("3 month")?12:Re.includes("6 month")?24:2)(Se);if(Te<=1)ge=await Bi(U,I,p);else{const Re=I.startDate||new Date().toISOString().split("T")[0],tt=[];let it=new Date(Re);for(let kt=0;kt<Te;kt++){const Hr={...I,startDate:it.toISOString().split("T")[0],planDuration:"1 week (part)"};try{const tr=await Bi(U,Hr,p);tt.push(tr),it.setDate(it.getDate()+7)}catch(tr){throw console.warn("Week generation failed for week",kt,tr),tr}}const dt=[];let Pt="",bt="",dr="",Ot="",At=[];tt.forEach(kt=>{dr||(dr=kt.startDate),Ot=kt.endDate||Ot,Pt=Pt||kt.name,bt=bt||kt.description,Array.isArray(kt.weeklyStructure)&&At.length===0&&(At=kt.weeklyStructure),Array.isArray(kt.dailyWorkouts)&&dt.push(...kt.dailyWorkouts)}),ge={id:`merged-plan-${Date.now()}`,name:Pt||`${U.username||"User"}'s Plan`,description:bt||"Merged weekly plan",startDate:dr||Re,endDate:Ot||dt[dt.length-1]?.date||Re,totalDays:dt.length,weeklyStructure:At,dailyWorkouts:dt}}console.log(`[PLAN] Workout plan generated on attempt ${xe}`);break}catch(Se){console.error(`[PLAN] Attempt ${xe} failed:`,Se),xe===je+1&&te("Failed to generate workout plan. Please try again.")}if(ge){console.log("[PLAN] Plan complete, calling onComplete."),_(!0),F(!0);try{const xe=p.map(({icon:Se,...Ce})=>Ce);vo({currentQuestion:n,answers:l,customInputs:d,completed:!0,timestamp:Date.now(),userData:U,questionsList:xe})}catch(xe){console.warn("Failed to save completed questionnaire progress:",xe)}try{const xe=jn();if(xe){const Se={...U,...xe};i(Se,ge)}else{const{id:Se,token:Ce,access_token:Te,jwt:Re,sub:tt,...it}=U||{};i(it,ge)}}catch{const{id:Se,token:Ce,access_token:Te,jwt:Re,sub:tt,...it}=U||{};i(it,ge)}}}catch(I){console.error("[PLAN] Error generating plan:",I),te("Failed to generate workout plan. Please try again.")}finally{console.log("[PLAN] Done loading plan."),re(!1)}}},he=()=>{n>0?a(I=>I-1):V("/")},se=()=>{const I=l[Y.id];return Y.type==="multiple"?I&&I.length>0:Y.type==="textarea"?I&&I.trim().length>0:Y.type==="rating"?I!==void 0&&I>0:I!==void 0&&I!==""},fe=async()=>{if(se()){ae();return}if(n===yn.length-1&&!g){await G(!0),a(je=>Math.min(p.length-1,je+1));return}const U=n===H-1,ge=g&&n===p.length-1;if(U||ge){ae();return}a(je=>Math.min(p.length-1,je+1))},_e=()=>{const I=l[Y.id];switch(Y.type){case"text":if(Y.id==="startDate"){const U=new Date().toISOString().split("T")[0];return o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"date",className:"input question-input",min:U,value:I||"",onChange:ge=>ee(ge.target.value),onKeyDown:ge=>ge.key==="Enter"&&!ue&&se()&&ae(),"aria-label":Y.title}),ue&&o.jsx("div",{className:"error-message",role:"alert",children:ue})]})}return o.jsx("input",{type:"text",className:"input question-input",placeholder:"Enter your name",value:I||"",onChange:U=>ee(U.target.value),onKeyDown:U=>U.key==="Enter"&&se()&&ae(),"aria-label":Y.title});case"number":return o.jsx("input",{type:"number",className:"input question-input",placeholder:"Enter your age",min:Y.min,max:Y.max,value:I||"",onChange:U=>ee(parseInt(U.target.value)),onKeyDown:U=>U.key==="Enter"&&se()&&ae(),"aria-label":Y.title});case"textarea":return o.jsx("textarea",{className:"input question-textarea",placeholder:"Share your thoughts...",rows:4,value:I||"",onChange:U=>ee(U.target.value),"aria-label":Y.title});case"rating":return o.jsxs("div",{className:"rating-container",children:[o.jsx("div",{className:"rating-scale",children:Array.from({length:Y.max||10},(U,ge)=>ge+1).map(U=>o.jsx("button",{className:`rating-button ${I===U?"selected":""}`,onClick:()=>ee(U),"aria-label":`Rating ${U}`,children:U},U))}),o.jsxs("div",{className:"rating-labels",children:[o.jsx("span",{children:"Poor"}),o.jsx("span",{children:"Excellent"})]}),I&&o.jsxs("div",{className:"rating-value",children:["You rated: ",I,"/10"]})]});case"slider":return o.jsxs("div",{className:"slider-container",children:[o.jsx("input",{type:"range",className:"slider",min:Y.min,max:Y.max,step:Y.step,value:I||Y.min,onChange:U=>ee(parseInt(U.target.value)),"aria-label":Y.title}),o.jsxs("div",{className:"slider-value",children:[I||Y.min," minutes"]})]});case"single":return o.jsxs("div",{className:"options-container",children:[o.jsx("div",{className:"options-grid",children:Y.options?.map((U,ge)=>o.jsx("button",{className:`option-button ${I===U?"selected":""}`,onClick:()=>ee(U),"aria-label":U,children:U},ge))}),I==="Other"&&o.jsx("div",{className:"custom-input-container",children:o.jsx("input",{type:"text",className:"input custom-input",placeholder:"Please specify...",value:d[Y.id]||"",onChange:U=>m(ge=>({...ge,[Y.id]:U.target.value}))})})]});case"multiple":return o.jsxs("div",{className:"options-container",children:[o.jsx("div",{className:"options-grid",children:Y.options?.map((U,ge)=>o.jsx("button",{className:`option-button ${I&&I.includes(U)?"selected":""}`,onClick:()=>{const je=I||[],xe=je.includes(U)?je.filter(Se=>Se!==U):[...je,U];ee(xe)},"aria-label":U,children:U},ge))}),I&&I.includes("Other")&&o.jsx("div",{className:"custom-input-container",children:o.jsx("input",{type:"text",className:"input custom-input",placeholder:"Please specify...",value:d[Y.id]||"",onChange:U=>m(ge=>({...ge,[Y.id]:U.target.value}))})})]});default:return o.jsx("input",{type:"text",className:"input question-input",placeholder:"Enter your response",value:I||"",onChange:U=>ee(U.target.value),onKeyDown:U=>U.key==="Enter"&&se()&&ae(),"aria-label":Y.title})}},Ae=()=>{Xi(),a(0),u({}),m({}),_(!1),F(!1)},Be=()=>{console.log("Edit Responses button clicked"),F(!1),_(!1),a(0),Xe(!1);const I=ur();I?.answers?(u(I.answers),console.log("Previous answers loaded into state:",I.answers)):console.warn("No previous answers found to populate."),console.log("Questionnaire reset to allow editing of responses")},[Ge,Xe]=j.useState(!1);j.useEffect(()=>{const I=ur();if(console.log("Loaded questionnaire progress:",I),I?.completed){if(Xe(!0),I.userData&&(B(I.userData),console.log("Restored userData:",I.userData)),I.answers&&(u(I.answers),console.log("Restored answers:",I.answers)),I.customInputs&&(m(I.customInputs),console.log("Restored customInputs:",I.customInputs)),I.questionsList){const U=I.questionsList.map(ge=>({...ge,icon:O(ge.iconType||"")}));y(U),console.log("Restored questionsList:",U)}}else console.warn("No completed progress found in local storage.")},[]);const Ie=async()=>{console.log("handleRegenerate invoked"),console.log("State before regeneration  userData:",R,"answers:",l,"allQuestions length:",p.length);let I=R,U=l,ge=p;if(!I){console.log("No userData in state, attempting to load from localStorage");const je=ur();if(console.log("loadQuestionnaireProgress returned:",je),je?.userData){if(console.log("Found saved.userData:",je.userData),I=je.userData,U=je.answers,u(U),console.log("State after restoring answers:",U),je.customInputs&&m(je.customInputs),je.questionsList){console.log("Restoring questionsList of length:",je.questionsList.length);const xe=je.questionsList.map(Se=>({...Se,icon:O(Se.iconType||"")}));y(xe),console.log("State after restoring allQuestions length:",xe.length),ge=xe}B(I),console.log("State after restoring userData:",I),console.log("Regenerate: restored state from localStorage",je)}else{const xe=$c();console.log("loadAssessmentData returned:",xe),xe&&(I=xe,B(I))}}if(!I&&U){console.log("Reconstructing userData from currentAnswers");const je={username:U.username||"",age:U.age,fitnessLevel:typeof U.fitnessLevel=="string"?U.fitnessLevel.split(" -")[0].toLowerCase():"",fitnessBackground:U.fitnessBackground,motivation:U.motivation,goals:U.goals||[],specificGoals:U.specificGoals,timeAvailable:U.timeAvailable,exerciseFormat:U.exerciseFormat,planDuration:U.planDuration,daysPerWeek:U.daysPerWeek,preferredTime:U.preferredTime,energyLevels:U.energyLevels,preferences:U.preferences||[],dislikes:U.dislikes,injuries:U.injuries,equipment:U.equipment||[],budget:U.budget,lifestyle:U.lifestyle,sleepQuality:U.sleepQuality,stressLevel:U.stressLevel,socialPreference:U.socialPreference,progressTracking:U.progressTracking,concerns:U.concerns};I=je,B(I),console.log("Reconstructed userData:",je),ou(I)}if(console.log("After restoration  currentUser:",I),!I){console.warn("No userData available to regenerate plan. Exiting handleRegenerate");return}console.log("Regenerate Plan clicked with userData:",I),te(null);try{z();const je=(U.planDuration||"").toString().toLowerCase(),Se=(Te=>Te.includes("1 week")?1:Te.includes("2 week")?2:Te.includes("6 week")?6:Te.includes("1 month")?4:Te.includes("3 month")?12:Te.includes("6 month")?24:2)(je);let Ce;if(Se<=1)Ce=await Bi(I,U,ge);else{const Te=U.startDate||new Date().toISOString().split("T")[0],Re=[];let tt=new Date(Te);for(let dt=0;dt<Se;dt++){const Pt={...U,startDate:tt.toISOString().split("T")[0],planDuration:"1 week (part)"},bt=await Bi(I,Pt,ge);Re.push(bt),tt.setDate(tt.getDate()+7)}const it=[];Re.forEach(dt=>{Array.isArray(dt.dailyWorkouts)&&it.push(...dt.dailyWorkouts)}),Ce={id:`merged-plan-${Date.now()}`,name:Re[0]?.name||"Merged Plan",description:Re[0]?.description||"",startDate:Re[0]?.startDate||Te,endDate:Re[Re.length-1]?.endDate||it[it.length-1]?.date||Te,totalDays:it.length,weeklyStructure:Re[0]?.weeklyStructure||[],dailyWorkouts:it}}console.log("New plan generated:",Ce),_(!0),F(!0);try{const Te=ge.map(({icon:Re,...tt})=>tt);vo({currentQuestion:0,answers:U,customInputs:{},completed:!0,timestamp:Date.now(),userData:I,questionsList:Te})}catch(Te){console.warn("Failed to save completed progress on regenerate:",Te)}try{const Te=jn();if(Te){const Re={...I,...Te};i(Re,Ce)}else{const{id:Re,token:tt,access_token:it,jwt:dt,sub:Pt,...bt}=I||{};i(bt,Ce)}}catch{const{id:Re,token:tt,access_token:it,jwt:dt,sub:Pt,...bt}=I||{};i(bt,Ce)}V("/calendar")}catch(je){console.error("Error regenerating plan:",je),te("Failed to generate a new plan. Please try again.")}finally{}};return j.useEffect(()=>{C&&!g&&G()},[C,g]),Z?o.jsx(Qy,{}):W?o.jsx(Ky,{onRetry:Ie}):Ge?o.jsx(Jy,{onRegenerate:Ie,onEditResponses:Be}):C&&$?o.jsxs("div",{className:"completion-screen",children:[o.jsx("h2",{children:"Questionnaire Completed"}),o.jsx("p",{children:"Your responses have been saved. What would you like to do?"}),o.jsx("button",{className:"btn",onClick:Be,children:"Edit Responses"}),o.jsx("button",{className:"btn btn-secondary",onClick:Ae,children:"Start Over"})]}):o.jsx("div",{className:"questionnaire-page",children:o.jsxs("div",{className:"questionnaire-container",children:[o.jsxs("div",{className:"questionnaire-header",children:["          ",o.jsx("button",{className:"back-button",onClick:he,"aria-label":"Go back to previous question",children:o.jsx(Fc,{size:24})}),"          ",o.jsxs("div",{className:"progress-container",ref:N,children:[o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:"progress-fill"})}),o.jsxs("span",{className:"progress-text",children:[n+1," of ",H]})]}),"        "]}),b&&n===0&&o.jsx("div",{className:"restoration-notification",children:o.jsxs("div",{className:"notification-content",children:[o.jsx($i,{size:20}),o.jsx("span",{children:"Your previous progress has been restored!"}),o.jsx("button",{className:"restart-button",onClick:Ae,children:"Start Fresh"})]})}),o.jsxs("div",{className:"question-container card fade-in-up",children:[o.jsx("div",{className:"question-icon",children:Y.icon}),Y.aiGenerated&&o.jsx("div",{className:"ai-badge",children:" AI Personalized Question"}),o.jsx("h2",{className:"question-title",children:Y.title}),o.jsx("p",{className:"question-subtitle",children:Y.subtitle}),o.jsx("div",{className:"question-input-container",children:_e()})]}),"        ",o.jsxs("div",{className:"questionnaire-navigation",children:[o.jsxs("button",{className:`btn btn-secondary ${n===0?"disabled":""}`,onClick:()=>a(I=>Math.max(0,I-1)),disabled:n===0,children:[o.jsx(Fc,{size:20}),"Previous"]}),(()=>{const I=n===H-1||g&&n===p.length-1;return o.jsxs("button",{className:`btn ${se()?"btn-primary":"btn-secondary"} continue-skip-btn${se()?"":" fake-disabled"}`,onClick:()=>{oe||(I?ae():fe())},tabIndex:0,"aria-disabled":!se()||oe,disabled:oe,onKeyDown:U=>{if(U.key==="Enter"||U.key===" "){if(U.preventDefault(),oe)return;I?ae():fe()}},children:[o.jsx("span",{className:"continue-text",children:I?oe?"Generating":"Generate My Plan":"Continue"}),!se()&&o.jsx("span",{className:"skip-inline-btn",children:"Skip"})]})})()]})]})})};function xo(i){"@babel/helpers - typeof";return xo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},xo(i)}function Zn(i){if(i===null||i===!0||i===!1)return NaN;var r=Number(i);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)}function mt(i,r){if(r.length<i)throw new TypeError(i+" argument"+(i>1?"s":"")+" required, but only "+r.length+" present")}function Ut(i){mt(1,arguments);var r=Object.prototype.toString.call(i);return i instanceof Date||xo(i)==="object"&&r==="[object Date]"?new Date(i.getTime()):typeof i=="number"||r==="[object Number]"?new Date(i):((typeof i=="string"||r==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Xy(i,r){mt(2,arguments);var n=Ut(i).getTime(),a=Zn(r);return new Date(n+a)}var Zy={};function Po(){return Zy}function ev(i){var r=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return r.setUTCFullYear(i.getFullYear()),i.getTime()-r.getTime()}function lf(i){mt(1,arguments);var r=Ut(i);return r.setHours(0,0,0,0),r}function tv(i,r){mt(2,arguments);var n=lf(i),a=lf(r);return n.getTime()===a.getTime()}function rv(i){return mt(1,arguments),i instanceof Date||xo(i)==="object"&&Object.prototype.toString.call(i)==="[object Date]"}function nv(i){if(mt(1,arguments),!rv(i)&&typeof i!="number")return!1;var r=Ut(i);return!isNaN(Number(r))}function sv(i){mt(1,arguments);var r=Ut(i),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function iv(i,r){var n;mt(1,arguments);var a=i||{},l=Ut(a.start),u=Ut(a.end),d=u.getTime();if(!(l.getTime()<=d))throw new RangeError("Invalid interval");var m=[],p=l;p.setHours(0,0,0,0);var y=Number((n=void 0)!==null&&n!==void 0?n:1);if(y<1||isNaN(y))throw new RangeError("`options.step` must be a number greater than 1");for(;p.getTime()<=d;)m.push(Ut(p)),p.setDate(p.getDate()+y),p.setHours(0,0,0,0);return m}function av(i){mt(1,arguments);var r=Ut(i);return r.setDate(1),r.setHours(0,0,0,0),r}function ov(i,r){mt(2,arguments);var n=Zn(r);return Xy(i,-n)}var lv=864e5;function cv(i){mt(1,arguments);var r=Ut(i),n=r.getTime();r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0);var a=r.getTime(),l=n-a;return Math.floor(l/lv)+1}function bo(i){mt(1,arguments);var r=1,n=Ut(i),a=n.getUTCDay(),l=(a<r?7:0)+a-r;return n.setUTCDate(n.getUTCDate()-l),n.setUTCHours(0,0,0,0),n}function ep(i){mt(1,arguments);var r=Ut(i),n=r.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(n+1,0,4),a.setUTCHours(0,0,0,0);var l=bo(a),u=new Date(0);u.setUTCFullYear(n,0,4),u.setUTCHours(0,0,0,0);var d=bo(u);return r.getTime()>=l.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function uv(i){mt(1,arguments);var r=ep(i),n=new Date(0);n.setUTCFullYear(r,0,4),n.setUTCHours(0,0,0,0);var a=bo(n);return a}var dv=6048e5;function hv(i){mt(1,arguments);var r=Ut(i),n=bo(r).getTime()-uv(r).getTime();return Math.round(n/dv)+1}function ko(i,r){var n,a,l,u,d,m,p,y;mt(1,arguments);var g=Po(),x=Zn((n=(a=(l=(u=r?.weekStartsOn)!==null&&u!==void 0?u:r==null||(d=r.locale)===null||d===void 0||(m=d.options)===null||m===void 0?void 0:m.weekStartsOn)!==null&&l!==void 0?l:g.weekStartsOn)!==null&&a!==void 0?a:(p=g.locale)===null||p===void 0||(y=p.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&n!==void 0?n:0);if(!(x>=0&&x<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var b=Ut(i),E=b.getUTCDay(),k=(E<x?7:0)+E-x;return b.setUTCDate(b.getUTCDate()-k),b.setUTCHours(0,0,0,0),b}function tp(i,r){var n,a,l,u,d,m,p,y;mt(1,arguments);var g=Ut(i),x=g.getUTCFullYear(),b=Po(),E=Zn((n=(a=(l=(u=r?.firstWeekContainsDate)!==null&&u!==void 0?u:r==null||(d=r.locale)===null||d===void 0||(m=d.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&l!==void 0?l:b.firstWeekContainsDate)!==null&&a!==void 0?a:(p=b.locale)===null||p===void 0||(y=p.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(E>=1&&E<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=new Date(0);k.setUTCFullYear(x+1,0,E),k.setUTCHours(0,0,0,0);var C=ko(k,r),_=new Date(0);_.setUTCFullYear(x,0,E),_.setUTCHours(0,0,0,0);var $=ko(_,r);return g.getTime()>=C.getTime()?x+1:g.getTime()>=$.getTime()?x:x-1}function fv(i,r){var n,a,l,u,d,m,p,y;mt(1,arguments);var g=Po(),x=Zn((n=(a=(l=(u=r?.firstWeekContainsDate)!==null&&u!==void 0?u:r==null||(d=r.locale)===null||d===void 0||(m=d.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&l!==void 0?l:g.firstWeekContainsDate)!==null&&a!==void 0?a:(p=g.locale)===null||p===void 0||(y=p.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&n!==void 0?n:1),b=tp(i,r),E=new Date(0);E.setUTCFullYear(b,0,x),E.setUTCHours(0,0,0,0);var k=ko(E,r);return k}var pv=6048e5;function mv(i,r){mt(1,arguments);var n=Ut(i),a=ko(n,r).getTime()-fv(n,r).getTime();return Math.round(a/pv)+1}function Ke(i,r){for(var n=i<0?"-":"",a=Math.abs(i).toString();a.length<r;)a="0"+a;return n+a}var vn={y:function(r,n){var a=r.getUTCFullYear(),l=a>0?a:1-a;return Ke(n==="yy"?l%100:l,n.length)},M:function(r,n){var a=r.getUTCMonth();return n==="M"?String(a+1):Ke(a+1,2)},d:function(r,n){return Ke(r.getUTCDate(),n.length)},a:function(r,n){var a=r.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h:function(r,n){return Ke(r.getUTCHours()%12||12,n.length)},H:function(r,n){return Ke(r.getUTCHours(),n.length)},m:function(r,n){return Ke(r.getUTCMinutes(),n.length)},s:function(r,n){return Ke(r.getUTCSeconds(),n.length)},S:function(r,n){var a=n.length,l=r.getUTCMilliseconds(),u=Math.floor(l*Math.pow(10,a-3));return Ke(u,n.length)}},Ps={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},gv={G:function(r,n,a){var l=r.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return a.era(l,{width:"abbreviated"});case"GGGGG":return a.era(l,{width:"narrow"});case"GGGG":default:return a.era(l,{width:"wide"})}},y:function(r,n,a){if(n==="yo"){var l=r.getUTCFullYear(),u=l>0?l:1-l;return a.ordinalNumber(u,{unit:"year"})}return vn.y(r,n)},Y:function(r,n,a,l){var u=tp(r,l),d=u>0?u:1-u;if(n==="YY"){var m=d%100;return Ke(m,2)}return n==="Yo"?a.ordinalNumber(d,{unit:"year"}):Ke(d,n.length)},R:function(r,n){var a=ep(r);return Ke(a,n.length)},u:function(r,n){var a=r.getUTCFullYear();return Ke(a,n.length)},Q:function(r,n,a){var l=Math.ceil((r.getUTCMonth()+1)/3);switch(n){case"Q":return String(l);case"QQ":return Ke(l,2);case"Qo":return a.ordinalNumber(l,{unit:"quarter"});case"QQQ":return a.quarter(l,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(l,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(l,{width:"wide",context:"formatting"})}},q:function(r,n,a){var l=Math.ceil((r.getUTCMonth()+1)/3);switch(n){case"q":return String(l);case"qq":return Ke(l,2);case"qo":return a.ordinalNumber(l,{unit:"quarter"});case"qqq":return a.quarter(l,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(l,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(l,{width:"wide",context:"standalone"})}},M:function(r,n,a){var l=r.getUTCMonth();switch(n){case"M":case"MM":return vn.M(r,n);case"Mo":return a.ordinalNumber(l+1,{unit:"month"});case"MMM":return a.month(l,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(l,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(l,{width:"wide",context:"formatting"})}},L:function(r,n,a){var l=r.getUTCMonth();switch(n){case"L":return String(l+1);case"LL":return Ke(l+1,2);case"Lo":return a.ordinalNumber(l+1,{unit:"month"});case"LLL":return a.month(l,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(l,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(l,{width:"wide",context:"standalone"})}},w:function(r,n,a,l){var u=mv(r,l);return n==="wo"?a.ordinalNumber(u,{unit:"week"}):Ke(u,n.length)},I:function(r,n,a){var l=hv(r);return n==="Io"?a.ordinalNumber(l,{unit:"week"}):Ke(l,n.length)},d:function(r,n,a){return n==="do"?a.ordinalNumber(r.getUTCDate(),{unit:"date"}):vn.d(r,n)},D:function(r,n,a){var l=cv(r);return n==="Do"?a.ordinalNumber(l,{unit:"dayOfYear"}):Ke(l,n.length)},E:function(r,n,a){var l=r.getUTCDay();switch(n){case"E":case"EE":case"EEE":return a.day(l,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(l,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(l,{width:"short",context:"formatting"});case"EEEE":default:return a.day(l,{width:"wide",context:"formatting"})}},e:function(r,n,a,l){var u=r.getUTCDay(),d=(u-l.weekStartsOn+8)%7||7;switch(n){case"e":return String(d);case"ee":return Ke(d,2);case"eo":return a.ordinalNumber(d,{unit:"day"});case"eee":return a.day(u,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(u,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(u,{width:"short",context:"formatting"});case"eeee":default:return a.day(u,{width:"wide",context:"formatting"})}},c:function(r,n,a,l){var u=r.getUTCDay(),d=(u-l.weekStartsOn+8)%7||7;switch(n){case"c":return String(d);case"cc":return Ke(d,n.length);case"co":return a.ordinalNumber(d,{unit:"day"});case"ccc":return a.day(u,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(u,{width:"narrow",context:"standalone"});case"cccccc":return a.day(u,{width:"short",context:"standalone"});case"cccc":default:return a.day(u,{width:"wide",context:"standalone"})}},i:function(r,n,a){var l=r.getUTCDay(),u=l===0?7:l;switch(n){case"i":return String(u);case"ii":return Ke(u,n.length);case"io":return a.ordinalNumber(u,{unit:"day"});case"iii":return a.day(l,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(l,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(l,{width:"short",context:"formatting"});case"iiii":default:return a.day(l,{width:"wide",context:"formatting"})}},a:function(r,n,a){var l=r.getUTCHours(),u=l/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(u,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(u,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(u,{width:"wide",context:"formatting"})}},b:function(r,n,a){var l=r.getUTCHours(),u;switch(l===12?u=Ps.noon:l===0?u=Ps.midnight:u=l/12>=1?"pm":"am",n){case"b":case"bb":return a.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(u,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(u,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(u,{width:"wide",context:"formatting"})}},B:function(r,n,a){var l=r.getUTCHours(),u;switch(l>=17?u=Ps.evening:l>=12?u=Ps.afternoon:l>=4?u=Ps.morning:u=Ps.night,n){case"B":case"BB":case"BBB":return a.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(u,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(u,{width:"wide",context:"formatting"})}},h:function(r,n,a){if(n==="ho"){var l=r.getUTCHours()%12;return l===0&&(l=12),a.ordinalNumber(l,{unit:"hour"})}return vn.h(r,n)},H:function(r,n,a){return n==="Ho"?a.ordinalNumber(r.getUTCHours(),{unit:"hour"}):vn.H(r,n)},K:function(r,n,a){var l=r.getUTCHours()%12;return n==="Ko"?a.ordinalNumber(l,{unit:"hour"}):Ke(l,n.length)},k:function(r,n,a){var l=r.getUTCHours();return l===0&&(l=24),n==="ko"?a.ordinalNumber(l,{unit:"hour"}):Ke(l,n.length)},m:function(r,n,a){return n==="mo"?a.ordinalNumber(r.getUTCMinutes(),{unit:"minute"}):vn.m(r,n)},s:function(r,n,a){return n==="so"?a.ordinalNumber(r.getUTCSeconds(),{unit:"second"}):vn.s(r,n)},S:function(r,n){return vn.S(r,n)},X:function(r,n,a,l){var u=l._originalDate||r,d=u.getTimezoneOffset();if(d===0)return"Z";switch(n){case"X":return uf(d);case"XXXX":case"XX":return Vn(d);case"XXXXX":case"XXX":default:return Vn(d,":")}},x:function(r,n,a,l){var u=l._originalDate||r,d=u.getTimezoneOffset();switch(n){case"x":return uf(d);case"xxxx":case"xx":return Vn(d);case"xxxxx":case"xxx":default:return Vn(d,":")}},O:function(r,n,a,l){var u=l._originalDate||r,d=u.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+cf(d,":");case"OOOO":default:return"GMT"+Vn(d,":")}},z:function(r,n,a,l){var u=l._originalDate||r,d=u.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+cf(d,":");case"zzzz":default:return"GMT"+Vn(d,":")}},t:function(r,n,a,l){var u=l._originalDate||r,d=Math.floor(u.getTime()/1e3);return Ke(d,n.length)},T:function(r,n,a,l){var u=l._originalDate||r,d=u.getTime();return Ke(d,n.length)}};function cf(i,r){var n=i>0?"-":"+",a=Math.abs(i),l=Math.floor(a/60),u=a%60;if(u===0)return n+String(l);var d=r;return n+String(l)+d+Ke(u,2)}function uf(i,r){if(i%60===0){var n=i>0?"-":"+";return n+Ke(Math.abs(i)/60,2)}return Vn(i,r)}function Vn(i,r){var n=r||"",a=i>0?"-":"+",l=Math.abs(i),u=Ke(Math.floor(l/60),2),d=Ke(l%60,2);return a+u+n+d}var df=function(r,n){switch(r){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},rp=function(r,n){switch(r){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},yv=function(r,n){var a=r.match(/(P+)(p+)?/)||[],l=a[1],u=a[2];if(!u)return df(r,n);var d;switch(l){case"P":d=n.dateTime({width:"short"});break;case"PP":d=n.dateTime({width:"medium"});break;case"PPP":d=n.dateTime({width:"long"});break;case"PPPP":default:d=n.dateTime({width:"full"});break}return d.replace("{{date}}",df(l,n)).replace("{{time}}",rp(u,n))},vv={p:rp,P:yv},wv=["D","DD"],xv=["YY","YYYY"];function bv(i){return wv.indexOf(i)!==-1}function kv(i){return xv.indexOf(i)!==-1}function hf(i,r,n){if(i==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(r,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(i==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(r,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(i==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(r,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(i==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(r,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Sv={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_v=function(r,n,a){var l,u=Sv[r];return typeof u=="string"?l=u:n===1?l=u.one:l=u.other.replace("{{count}}",n.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+l:l+" ago":l};function Nc(i){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.width?String(r.width):i.defaultWidth,a=i.formats[n]||i.formats[i.defaultWidth];return a}}var jv={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Nv={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ev={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Cv={date:Nc({formats:jv,defaultWidth:"full"}),time:Nc({formats:Nv,defaultWidth:"full"}),dateTime:Nc({formats:Ev,defaultWidth:"full"})},Tv={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Pv=function(r,n,a,l){return Tv[r]};function Ui(i){return function(r,n){var a=n!=null&&n.context?String(n.context):"standalone",l;if(a==="formatting"&&i.formattingValues){var u=i.defaultFormattingWidth||i.defaultWidth,d=n!=null&&n.width?String(n.width):u;l=i.formattingValues[d]||i.formattingValues[u]}else{var m=i.defaultWidth,p=n!=null&&n.width?String(n.width):i.defaultWidth;l=i.values[p]||i.values[m]}var y=i.argumentCallback?i.argumentCallback(r):r;return l[y]}}var Ov={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Av={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Iv={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Rv={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Dv={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Lv={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Mv=function(r,n){var a=Number(r),l=a%100;if(l>20||l<10)switch(l%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},Uv={ordinalNumber:Mv,era:Ui({values:Ov,defaultWidth:"wide"}),quarter:Ui({values:Av,defaultWidth:"wide",argumentCallback:function(r){return r-1}}),month:Ui({values:Iv,defaultWidth:"wide"}),day:Ui({values:Rv,defaultWidth:"wide"}),dayPeriod:Ui({values:Dv,defaultWidth:"wide",formattingValues:Lv,defaultFormattingWidth:"wide"})};function Fi(i){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.width,l=a&&i.matchPatterns[a]||i.matchPatterns[i.defaultMatchWidth],u=r.match(l);if(!u)return null;var d=u[0],m=a&&i.parsePatterns[a]||i.parsePatterns[i.defaultParseWidth],p=Array.isArray(m)?Bv(m,function(x){return x.test(d)}):Fv(m,function(x){return x.test(d)}),y;y=i.valueCallback?i.valueCallback(p):p,y=n.valueCallback?n.valueCallback(y):y;var g=r.slice(d.length);return{value:y,rest:g}}}function Fv(i,r){for(var n in i)if(i.hasOwnProperty(n)&&r(i[n]))return n}function Bv(i,r){for(var n=0;n<i.length;n++)if(r(i[n]))return n}function Wv(i){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.match(i.matchPattern);if(!a)return null;var l=a[0],u=r.match(i.parsePattern);if(!u)return null;var d=i.valueCallback?i.valueCallback(u[0]):u[0];d=n.valueCallback?n.valueCallback(d):d;var m=r.slice(l.length);return{value:d,rest:m}}}var $v=/^(\d+)(th|st|nd|rd)?/i,zv=/\d+/i,qv={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Hv={any:[/^b/i,/^(a|c)/i]},Gv={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Vv={any:[/1/i,/2/i,/3/i,/4/i]},Jv={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Qv={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Kv={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Yv={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Xv={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Zv={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ew={ordinalNumber:Wv({matchPattern:$v,parsePattern:zv,valueCallback:function(r){return parseInt(r,10)}}),era:Fi({matchPatterns:qv,defaultMatchWidth:"wide",parsePatterns:Hv,defaultParseWidth:"any"}),quarter:Fi({matchPatterns:Gv,defaultMatchWidth:"wide",parsePatterns:Vv,defaultParseWidth:"any",valueCallback:function(r){return r+1}}),month:Fi({matchPatterns:Jv,defaultMatchWidth:"wide",parsePatterns:Qv,defaultParseWidth:"any"}),day:Fi({matchPatterns:Kv,defaultMatchWidth:"wide",parsePatterns:Yv,defaultParseWidth:"any"}),dayPeriod:Fi({matchPatterns:Xv,defaultMatchWidth:"any",parsePatterns:Zv,defaultParseWidth:"any"})},tw={code:"en-US",formatDistance:_v,formatLong:Cv,formatRelative:Pv,localize:Uv,match:ew,options:{weekStartsOn:0,firstWeekContainsDate:1}},rw=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,nw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,sw=/^'([^]*?)'?$/,iw=/''/g,aw=/[a-zA-Z]/;function cr(i,r,n){var a,l,u,d,m,p,y,g,x,b,E,k,C,_;mt(2,arguments);var $=String(r),F=Po(),R=(a=(l=void 0)!==null&&l!==void 0?l:F.locale)!==null&&a!==void 0?a:tw,B=Zn((u=(d=(m=(p=void 0)!==null&&p!==void 0?p:void 0)!==null&&m!==void 0?m:F.firstWeekContainsDate)!==null&&d!==void 0?d:(y=F.locale)===null||y===void 0||(g=y.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&u!==void 0?u:1);if(!(B>=1&&B<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var Z=Zn((x=(b=(E=(k=void 0)!==null&&k!==void 0?k:void 0)!==null&&E!==void 0?E:F.weekStartsOn)!==null&&b!==void 0?b:(C=F.locale)===null||C===void 0||(_=C.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&x!==void 0?x:0);if(!(Z>=0&&Z<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!R.localize)throw new RangeError("locale must contain localize property");if(!R.formatLong)throw new RangeError("locale must contain formatLong property");var J=Ut(i);if(!nv(J))throw new RangeError("Invalid time value");var W=ev(J),te=ov(J,W),ue={firstWeekContainsDate:B,weekStartsOn:Z,locale:R,_originalDate:J},we=$.match(nw).map(function(V){var ce=V[0];if(ce==="p"||ce==="P"){var ie=vv[ce];return ie(V,R.formatLong)}return V}).join("").match(rw).map(function(V){if(V==="''")return"'";var ce=V[0];if(ce==="'")return ow(V);var ie=gv[ce];if(ie)return kv(V)&&hf(V,r,String(i)),bv(V)&&hf(V,r,String(i)),ie(te,V,R.localize,ue);if(ce.match(aw))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ce+"`");return V}).join("");return we}function ow(i){var r=i.match(sw);return r?r[1].replace(iw,"'"):i}const lw={images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Lunges",resources:[{label:"Lunge technique guide",url:"https://example.com/lunges/technique"},{label:"Walking lunge progression",url:"https://example.com/lunges/progression"},{label:"Lunge programming for strength",url:"https://example.com/lunges/programming"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Forward lunge finish"],difficulty:"Moderate",duration:"5-12 min",exampleNote:"Step forward, lower until back knee is near floor, then drive through front heel to stand.",meta:{exercise:"Lower Body / Quads / Glutes / Hamstrings / Calves",movement:"Squat/Lunge -- Sagittal",equipment:"Bodyweight / Optional Weights",trainingType:"Strength / Hypertrophy / Endurance / Balance-Stability",planeOfMotion:"Sagittal",description:"Step forward and lower body by bending knees until back knee is just above the floor; push back to start. Keep torso upright and core engaged."}},cw={images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed/aclHkVaku9U",featuredVideo:!0,resources:[{label:"Harvard Health: How to do a squat",url:"https://www.health.harvard.edu/staying-healthy/squat-exercise"},{label:"ACE Fitness: Squat technique and tips",url:"https://www.acefitness.org/education-and-resources/lifestyle/exercise-library/136/squat/"},{label:"Video: How to Do a Barbell Squat (YouTube)",url:"https://www.youtube.com/watch?v=aclHkVaku9U"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Proper squat depth and posture"],difficulty:"Moderate",duration:"8-15 min",exampleNote:"Keep chest up, push hips back, and drive through heels to stand.",meta:{exercise:"Lower Body / Quads / Glutes / Hamstrings / Calves / Core Stabilizers",movement:"Squat/Lunge -- Sagittal",equipment:"Bodyweight / Free Weights",trainingType:"Strength / Hypertrophy / Endurance / Power-Plyometrics / Balance-Stability",planeOfMotion:"Sagittal",description:"Stand shoulder-width apart, lower by bending hips and knees, then push through heels to return to standing. Avoid knees caving and keep heels down."}},uw={images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Bridges+exercise",resources:[{label:"Glute bridge progressions",url:"https://example.com/bridges/progressions"},{label:"Hip thrust vs bridge comparison",url:"https://example.com/bridges/compare"},{label:"Bridge programming for glute strength",url:"https://example.com/bridges/program"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Bridge top squeeze"],difficulty:"Easy",duration:"5-10 min",exampleNote:"Press through heels to lift hips until body forms straight line from shoulders to knees.",meta:{exercise:"Lower Body / Glutes / Hamstrings / Core Stabilizers / Lower Back",movement:"Push -- Hip Hinge/Extension",equipment:"Bodyweight / Optional Weights",trainingType:"Strength / Hypertrophy",planeOfMotion:"Sagittal",description:"Lie on your back with knees bent and feet flat, press through heels to lift hips toward ceiling and squeeze glutes at top."}},dw={images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Punches+drill",resources:[{label:"Basic punching technique",url:"https://example.com/punches/technique"},{label:"Shadowboxing routines",url:"https://example.com/punches/shadowboxing"},{label:"Rotational power drills",url:"https://example.com/punches/power"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Punching stance"],difficulty:"Moderate",duration:"3-8 min",exampleNote:"Stand in a fighting stance, extend the arm and rotate torso for power, retract quickly.",meta:{exercise:"Upper Body / Arms / Shoulders / Chest / Core  Rotation",movement:"Push -- Horizontal / Rotation",equipment:"Bodyweight / Optional Weights",trainingType:"Endurance / Power-Plyometrics",planeOfMotion:"Transverse",description:"Stand with feet shoulder-width and rotate through the torso while extending the arm to punch, then retract. Focus on controlled power and posture."}},hw={images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Superman+exercise",resources:[{label:"Superman back extension tips",url:"https://example.com/superman/tips"},{label:"Lower back strengthening program",url:"https://example.com/superman/program"},{label:"Glute and hamstring pairing",url:"https://example.com/superman/pairings"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Superman top position"],difficulty:"Easy",duration:"3-8 min",exampleNote:"Lift arms, chest, and legs slightly off the ground squeezing glutes and lower back.",meta:{exercise:"Core / Lower Back / Glutes / Hamstrings / Shoulders",movement:"Extension -- Sagittal Isometric Hold",equipment:"Bodyweight",trainingType:"Endurance / Balance-Stability",planeOfMotion:"Sagittal",description:"Lie face down and lift arms, chest, and legs a few inches off the ground, holding briefly at the top."}},ff={"Sit-ups":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed/1fbU_MkV7NE",featuredVideo:!0,resources:[{label:"NHS: How to do sit-ups safely",url:"https://www.nhs.uk/live-well/exercise/how-to-do-a-sit-up-or-crunch/"},{label:"LIVESTRONG: How to Do a Sit Up",url:"https://www.livestrong.com/article/137075-how-to-do-a-sit-up/"},{label:"Video: How to Do a Sit Up (YouTube)",url:"https://www.youtube.com/watch?v=1fbU_MkV7NE"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Controlled sit-up finish"],difficulty:"Moderate",duration:"3-10 min",exampleNote:"Lie on your back with knees bent and feet flat; curl up using the core and avoid neck strain.",meta:{exercise:"Core / Abs",movement:"Push -- Sagittal Flexion",equipment:"Bodyweight",trainingType:"Endurance / Hypertrophy",planeOfMotion:"Sagittal",description:"Lie on your back with knees bent and feet flat on the floor. Cross arms or place hands by your head. Tighten core and curl upper body toward knees, then lower with control."}},"Reverse Crunches":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Reverse+Crunches",resources:[{label:"Reverse crunch tutorial",url:"https://example.com/reverse-crunches/tutorial"},{label:"Lower-abs progressions",url:"https://example.com/reverse-crunches/progressions"},{label:"Reverse crunch common errors",url:"https://example.com/reverse-crunches/errors"}],galleryImages:["/images/we09532.png"],imageCaptions:["Reverse crunch top position"],difficulty:"Moderate",duration:"5-10 min",exampleNote:"Curl hips off the floor and draw knees toward chest using the abs.",meta:{exercise:"Core / Abs / Lower Back Stabilizers",movement:"Pull -- Sagittal Flexion",equipment:"Bodyweight",trainingType:"Endurance / Hypertrophy",planeOfMotion:"Sagittal",description:"Lie on your back with knees bent and feet lifted. Contract abs to curl hips off the floor and draw knees toward your chest. Lower down under control."}},"Bicycle Crunches":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Bicycle+Crunches",resources:[{label:"Bicycle crunch form guide",url:"https://example.com/bicycle-crunches/form"},{label:"Oblique strengthening routine",url:"https://example.com/bicycle-crunches/obliques"},{label:"Progressions for bicycle crunches",url:"https://example.com/bicycle-crunches/progressions"}],galleryImages:["/images/we09532.png"],imageCaptions:["Bicycle crunch twist"],difficulty:"Moderate",duration:"5-8 min",exampleNote:"Perform slow, controlled alternating twist motions to target obliques.",meta:{exercise:"Core / Abs / Obliques",movement:"Rotation -- Transverse Flexion",equipment:"Bodyweight",trainingType:"Endurance / Hypertrophy",planeOfMotion:"Transverse",description:"Lie on your back with hands behind head and legs lifted. Bring one knee toward chest while twisting the opposite elbow toward it, then switch sides."}},"Flutter Kicks":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Flutter+Kicks",resources:[{label:"Flutter kicks technique",url:"https://example.com/flutter-kicks/technique"},{label:"Core endurance workouts",url:"https://example.com/flutter-kicks/endurance"},{label:"Protect your lower back while flutter kicking",url:"https://example.com/flutter-kicks/lower-back"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Flutter kicks supine"],difficulty:"Moderate",duration:"1-3 min",exampleNote:"Keep core tight and lower back pressed to the floor while performing small kicking motions.",meta:{exercise:"Core / Abs / Hip Flexors",movement:"Push -- Sagittal Flexion/Stability",equipment:"Bodyweight",trainingType:"Endurance / Hypertrophy / Balance-Stability",planeOfMotion:"Sagittal",description:"Lie flat on your back with legs extended, hands under hips for support. Lift legs a few inches and alternate small kicks while keeping the core engaged."}},"Leg Raises":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed/2XcmRr0Vj3I",featuredVideo:!0,resources:[{label:"Penn State Health: How to do leg raises",url:"https://www.pennstatehealth.org/health-a-to-z/leg-raises"},{label:"Nuffield Health: Straight leg raise technique",url:"https://www.nuffieldhealth.com/article/how-to-do-a-straight-leg-raise"},{label:"Video: Lying Leg Raises (YouTube)",url:"https://www.youtube.com/watch?v=2XcmRr0Vj3I"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Leg raise - controlled descent"],difficulty:"Moderate",duration:"5-10 min",exampleNote:"Keep legs straight and lift toward the ceiling, lowering with control.",meta:{exercise:"Core / Abs / Hip Flexors",movement:"Push -- Sagittal Flexion",equipment:"Bodyweight",trainingType:"Endurance / Hypertrophy",planeOfMotion:"Sagittal",description:"Lie flat with legs extended and hands under hips. Slowly lift legs toward ceiling, then lower with control while maintaining tension in the abs."}},"Elbow Plank":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Elbow+Plank",resources:[{label:"Plank form and variations",url:"https://example.com/elbow-plank/form"},{label:"Plank progressions for endurance",url:"https://example.com/elbow-plank/progressions"},{label:"Shoulder and core stability tips",url:"https://example.com/elbow-plank/stability"}],galleryImages:["/images/we09532.png"],imageCaptions:["Elbow plank alignment"],difficulty:"Easy",duration:"30s-2min",exampleNote:"Form a straight line from head to heels on elbows; keep hips level and core braced.",meta:{exercise:"Core / Abs / Lower Back / Shoulders",movement:"Anti-Rotation / Stability -- Isometric Hold",equipment:"Bodyweight",trainingType:"Endurance / Balance-Stability",planeOfMotion:"Sagittal",description:"Start face down with elbows under shoulders and legs extended. Lift body into a straight line and hold while breathing evenly."}},Lunges:lw,"High Knees":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=High+Knees",resources:[{label:"High knees drill and form",url:"https://example.com/high-knees/drill"},{label:"Warm-up plyometrics",url:"https://example.com/high-knees/plyometrics"},{label:"Cardio interval ideas",url:"https://example.com/high-knees/cardio"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["High knees sprint form"],difficulty:"Moderate",duration:"30s-3min",exampleNote:"Drive knees up rapidly while pumping opposite arm and staying light on the feet.",meta:{exercise:"Lower Body / Quads / Hamstrings / Glutes / Calves / Core Stabilizers",movement:"Running/Carry -- Sagittal",equipment:"Bodyweight",trainingType:"Endurance / Power-Plyometrics / Balance-Stability",planeOfMotion:"Sagittal",description:"Quickly drive one knee toward the chest while pumping the opposite arm, alternating rapidly to raise heart rate."}},"Side Kicks":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Side+Kicks",resources:[{label:"Side kick mechanics",url:"https://example.com/side-kicks/mechanics"},{label:"Hip abductor strengthening",url:"https://example.com/side-kicks/hip-abductors"},{label:"Balance drills for kicks",url:"https://example.com/side-kicks/balance"}],galleryImages:["/images/we09532.png"],imageCaptions:["Side kick height"],difficulty:"Moderate",duration:"3-8 min",exampleNote:"Shift weight to one leg and lift the opposite leg to the side with control.",meta:{exercise:"Lower Body / Glutes / Hip Abductors / Quads / Core Stabilizers",movement:"Push -- Frontal",equipment:"Bodyweight",trainingType:"Strength / Hypertrophy / Balance-Stability",planeOfMotion:"Frontal",description:"Stand with feet shoulder-width apart, shift weight to one leg, lift the other leg out to the side while keeping torso upright."}},"Mountain Climbers":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Mountain+Climbers",resources:[{label:"Mountain climber intervals",url:"https://example.com/mountain-climbers/intervals"},{label:"Plank-to-mountain transitions",url:"https://example.com/mountain-climbers/transitions"},{label:"Core conditioning with mountain climbers",url:"https://example.com/mountain-climbers/core"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Mountain climbers quick drive"],difficulty:"Moderate",duration:"30s-2min",exampleNote:"From high plank, drive knees toward chest alternately while keeping torso stable.",meta:{exercise:"Core / Abs / Shoulders / Arms / Quads / Hip Flexors",movement:"Push -- Sagittal Dynamic Stability",equipment:"Bodyweight",trainingType:"Endurance / Power-Plyometrics / Balance-Stability",planeOfMotion:"Sagittal",description:"Start in a high plank and alternately drive knees toward chest at a steady pace while keeping hips low."}},Squats:cw,"Donkey Kicks":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Donkey+Kicks",resources:[{label:"Donkey kick variations",url:"https://example.com/donkey-kicks/variations"},{label:"Glute activation exercises",url:"https://example.com/donkey-kicks/activation"},{label:"Band-assisted donkey kicks",url:"https://example.com/donkey-kicks/band"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Donkey kick top"],difficulty:"Easy",duration:"3-8 min",exampleNote:"From all fours, lift one knee to the ceiling with knee bent at 90 degrees, squeezing glutes at top.",meta:{exercise:"Lower Body / Glutes / Hamstrings / Core Stabilizers",movement:"Push -- Sagittal Hip Extension",equipment:"Bodyweight / Optional Bands",trainingType:"Strength / Hypertrophy / Balance-Stability",planeOfMotion:"Sagittal",description:"Start on all fours and lift one leg upward with knee bent at 90 degrees, squeeze glutes at the top, then lower with control."}},Bridges:uw,"Jump Knee Tucks":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Jump+Knee+Tucks",resources:[{label:"Plyometric tuck jump progressions",url:"https://example.com/jump-knee-tucks/progressions"},{label:"Landing mechanics for knee tucks",url:"https://example.com/jump-knee-tucks/landing"},{label:"Plyometric conditioning",url:"https://example.com/jump-knee-tucks/conditioning"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Tuck jump peak"],difficulty:"Hard",duration:"1-5 min",exampleNote:"Explosively jump and drive knees to chest; land softly and reset.",meta:{exercise:"Lower Body / Quads / Hamstrings / Glutes / Calves / Core Stabilizers",movement:"Squat/Lunge + Jump -- Explosive Plyometric",equipment:"Bodyweight",trainingType:"Power-Plyometrics / Endurance",planeOfMotion:"Sagittal",description:"Bend into a quarter squat, explode upward bringing knees toward chest, and land softly absorbing impact."}},"Side Leg Raises":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Side+Leg+Raises",resources:[{label:"Side leg raise technique",url:"https://example.com/side-leg-raises/technique"},{label:"Glute med strengthening routine",url:"https://example.com/side-leg-raises/routine"},{label:"Ankle and hip mobility for side raises",url:"https://example.com/side-leg-raises/mobility"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Side leg raise top"],difficulty:"Easy",duration:"3-8 min",exampleNote:"Lie on your side and lift the top leg with control, keeping hips stacked.",meta:{exercise:"Lower Body / Glutes / Hip Abductors / Core Stabilizers",movement:"Push -- Frontal Hip Abduction",equipment:"Bodyweight / Optional Bands",trainingType:"Strength / Balance-Stability",planeOfMotion:"Frontal",description:"Lie on your side and lift the top leg upward while keeping your hips stacked and torso stable."}},"Close-Grip Push-ups":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Close-Grip+Push-ups",resources:[{label:"Close-grip push-up form",url:"https://example.com/close-grip-pushups/form"},{label:"Triceps-focused bodyweight work",url:"https://example.com/close-grip-pushups/triceps"},{label:"Progressions for stronger push-ups",url:"https://example.com/close-grip-pushups/progressions"}],galleryImages:["/images/we09532.png"],imageCaptions:["Close-grip push-up finish"],difficulty:"Moderate",duration:"5-12 min",exampleNote:"Hands close under shoulders; lower chest while keeping elbows tucked to emphasize triceps.",meta:{exercise:"Upper Body / Chest / Triceps / Shoulders / Core Stabilizers",movement:"Push -- Horizontal",equipment:"Bodyweight",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"From a push-up position, place hands closer than shoulder width and lower chest while keeping elbows near the ribs."}},Punches:dw,"Pseudo Planche":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Pseudo+Planche",resources:[{label:"Pseudo planche progressions",url:"https://example.com/pseudo-planche/progressions"},{label:"Wrist and shoulder prep for planche",url:"https://example.com/pseudo-planche/prep"},{label:"Advanced bodyweight skills programming",url:"https://example.com/pseudo-planche/program"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Pseudo planche lean"],difficulty:"Hard",duration:"Varies",exampleNote:"Lean shoulders forward in push-up position to increase horizontal load on shoulders and core.",meta:{exercise:"Upper Body / Chest / Triceps / Shoulders / Core Stabilizers",movement:"Push -- Horizontal with Forward Lean",equipment:"Bodyweight",trainingType:"Strength / Hypertrophy / Balance-Stability / Power (advanced variations)",planeOfMotion:"Sagittal",description:"From a push-up position, place hands lower toward hips and lean shoulders forward to increase load on the shoulders and core."}},"Sitting Pull-ups":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Sitting+Pull-ups",resources:[{label:"Assisted pull-up options",url:"https://example.com/sitting-pullups/assisted"},{label:"Seated pull mechanics",url:"https://example.com/sitting-pullups/mechanics"},{label:"Upper back strengthening",url:"https://example.com/sitting-pullups/upper-back"}],galleryImages:["/images/we09532.png"],imageCaptions:["Sitting pull-up setup"],difficulty:"Moderate",duration:"Varies",exampleNote:"Sit under a bar or rings and pull chest toward the bar using the back and arms. Focus on technique over momentum.",meta:{exercise:"Upper Body / Back / Biceps / Forearms / Shoulders / Core Stabilizers",movement:"Pull -- Vertical",equipment:"Bodyweight / Suspension Trainer / Bar / Rings",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Sit or use an assisted setup to pull the chest toward a bar, focusing on scapular retraction and elbow drive."}},"Doorframe Rows":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Doorframe+Rows",resources:[{label:"Doorframe row setup and safety",url:"https://example.com/doorframe-rows/setup"},{label:"Horizontal pulling programming",url:"https://example.com/doorframe-rows/programming"},{label:"Grip and wrist considerations",url:"https://example.com/doorframe-rows/grip"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Doorframe row body angle"],difficulty:"Easy",duration:"5-12 min",exampleNote:"Grip the doorframe and lean back, pulling the chest toward the frame while keeping the body straight.",meta:{exercise:"Upper Body / Back / Biceps / Forearms / Shoulders / Core Stabilizers",movement:"Pull -- Horizontal",equipment:"Bodyweight / Doorframe or Sturdy Support",trainingType:"Strength / Endurance / Balance-Stability",planeOfMotion:"Sagittal",description:"Stand facing an open door, grip the frame, and lean back. Pull your chest toward the frame using back muscles and squeeze shoulder blades."}},"Scapular Shrugs":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Scapular+Shrugs",resources:[{label:"Scapular control drills",url:"https://example.com/scapular-shrugs/drills"},{label:"Shoulder health routines",url:"https://example.com/scapular-shrugs/shoulder-health"},{label:"Band-based scapular work",url:"https://example.com/scapular-shrugs/bands"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Scapular shrug small range"],difficulty:"Easy",duration:"2-6 min",exampleNote:"From a hang, pull shoulder blades down and together without bending elbows to create a small upward movement.",meta:{exercise:"Upper Body / Back / Trapezius / Rhomboids / Lats / Shoulders / Core Stabilizers",movement:"Pull -- Vertical Scapular Depression/Elevation",equipment:"Bodyweight / Pull-Up Bar",trainingType:"Strength / Hypertrophy / Balance-Stability",planeOfMotion:"Sagittal",description:"Hang from a bar and pull shoulder blades down and together to produce a slight lift, focusing on scapular control."}},Superman:hw,"Back Lifts":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Back+Lifts",resources:[{label:"Back lift variations",url:"https://example.com/back-lifts/variations"},{label:"Safe tempo for back lifts",url:"https://example.com/back-lifts/tempo"},{label:"Lower back strengthening plans",url:"https://example.com/back-lifts/plans"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Back lift top"],difficulty:"Moderate",duration:"5-12 min",exampleNote:"Lift torso using lower back and glutes; avoid jerky motions.",meta:{exercise:"Core / Lower Back / Glutes / Hamstrings",movement:"Extension -- Hip Hinge",equipment:"Bodyweight / Roman Chair / Stability Ball",trainingType:"Strength / Hypertrophy",planeOfMotion:"Sagittal",description:"Perform controlled back extensions focusing on hip hinge mechanics and lower back engagement."}},"Alternative Arm Leg Plank":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Arm+Leg+Plank",resources:[{label:"Arm/leg plank progressions",url:"https://example.com/arm-leg-plank/progressions"},{label:"Anti-rotation core drills",url:"https://example.com/arm-leg-plank/anti-rotation"},{label:"Plank stability programming",url:"https://example.com/arm-leg-plank/program"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Arm-leg plank balance"],difficulty:"Moderate",duration:"30s-2min",exampleNote:"Lift opposite arm and leg while maintaining a straight plank line and steady breathing.",meta:{exercise:"Core / Abs / Lower Back / Shoulders / Glutes",movement:"Anti-Rotation / Stability -- Isometric Hold with Alternating Lift",equipment:"Bodyweight",trainingType:"Endurance / Balance-Stability",planeOfMotion:"Sagittal with Transverse Stability Demand",description:"From a plank position, lift one arm and the opposite leg while keeping hips level and core braced."}},"Push-ups":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Push-ups",resources:[{label:"Push-up form checklist",url:"https://example.com/push-ups/form"},{label:"Push-up progressions and regressions",url:"https://example.com/push-ups/progressions"},{label:"Programming push-ups for strength",url:"https://example.com/push-ups/programming"}],galleryImages:["/images/we09532.png"],imageCaptions:["Standard push-up finish"],difficulty:"Moderate",duration:"5-15 min",exampleNote:"Keep body straight and lower chest to floor, then push back up using chest and triceps.",meta:{exercise:"Upper Body / Chest / Triceps / Shoulders / Core Stabilizers",movement:"Push -- Horizontal",equipment:"Bodyweight",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"From a high plank, lower chest toward floor and press back up, keeping core engaged."}},"Chest Expansions":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Chest+Expansions",resources:[{label:"Chest expansion mobility sequence",url:"https://example.com/chest-expansions/mobility"},{label:"Band-assisted chest opens",url:"https://example.com/chest-expansions/band"},{label:"Upper body flexibility routine",url:"https://example.com/chest-expansions/flexibility"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Chest expansion range"],difficulty:"Easy",duration:"3-8 min",exampleNote:"Open the arms wide and squeeze shoulder blades together; focus on posture and range of motion.",meta:{exercise:"Upper Body / Chest / Shoulders / Upper Back / Arms",movement:"Push -- Horizontal Abduction/Adduction",equipment:"Bodyweight / Bands",trainingType:"Endurance / Mobility-Flexibility",planeOfMotion:"Frontal",description:"Extend arms forward and open wide to stretch and mobilize the chest and shoulders."}},"Chest Squeezes":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Chest+Squeezes",resources:[{label:"Chest squeeze variations",url:"https://example.com/chest-squeezes/variations"},{label:"Medicine ball chest squeeze",url:"https://example.com/chest-squeezes/medicine-ball"},{label:"Isometric chest work for posture",url:"https://example.com/chest-squeezes/isometrics"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Chest squeeze hold"],difficulty:"Easy",duration:"2-6 min",exampleNote:"Press hands or an object together in front of chest to contract chest muscles.",meta:{exercise:"Upper Body / Chest / Shoulders / Arms",movement:"Push -- Horizontal Adduction/Isometric Hold",equipment:"Bodyweight / Bands / Dumbbell / Medicine Ball",trainingType:"Endurance / Mobility-Flexibility",planeOfMotion:"Frontal",description:"Squeeze hands or an object toward the midline to contract chest muscles and improve posture."}},"Pike Push-ups":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Pike+Push-ups",resources:[{label:"Pike push-up progression",url:"https://example.com/pike-pushups/progression"},{label:"Shoulder press alternatives",url:"https://example.com/pike-pushups/alternatives"},{label:"Inverted push-up technique",url:"https://example.com/pike-pushups/inverted"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Pike push-up peak"],difficulty:"Hard",duration:"Varies",exampleNote:"Walk feet toward hands to create a pike position and lower head toward the floor using shoulders.",meta:{exercise:"Upper Body / Shoulders / Triceps / Chest / Core Stabilizers",movement:"Push -- Vertical Press Variation",equipment:"Bodyweight",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Assume a pike (inverted V) position and lower the top of the head toward the floor, pressing back up to start."}},"Shoulder Taps":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Shoulder+Taps",resources:[{label:"Shoulder tap stability drill",url:"https://example.com/shoulder-taps/drill"},{label:"Anti-rotation core work",url:"https://example.com/shoulder-taps/anti-rotation"},{label:"Progressions for single-arm stability",url:"https://example.com/shoulder-taps/progressions"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Shoulder tap balance"],difficulty:"Easy",duration:"1-5 min",exampleNote:"From plank, lift one hand to tap the opposite shoulder while keeping hips square and body stable.",meta:{exercise:"Upper Body / Shoulders / Triceps / Chest / Core Stabilizers",movement:"Anti-Rotation / Stability -- Isometric Hold with Alternating Lift",equipment:"Bodyweight",trainingType:"Endurance / Balance-Stability / Strength",planeOfMotion:"Sagittal",description:"Maintain a stable plank while alternately tapping opposite shoulders with controlled motion."}},"Clapping Push-ups":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Clapping+Push-ups",resources:[{label:"Plyometric push-up progressions",url:"https://example.com/clapping-pushups/progressions"},{label:"Safe landing mechanics for plyo",url:"https://example.com/clapping-pushups/landing"},{label:"Upper body power drills",url:"https://example.com/clapping-pushups/power"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Clap push-up explosion"],difficulty:"Hard",duration:"Varies",exampleNote:"Explode off the ground and clap hands before returning to push-up position; land softly.",meta:{exercise:"Upper Body / Chest / Triceps / Shoulders / Core Stabilizers",movement:"Push -- Horizontal Explosive",equipment:"Bodyweight",trainingType:"Power-Plyometrics / Strength / Hypertrophy",planeOfMotion:"Sagittal",description:"Perform an explosive push-up so hands leave the ground, clap, and land in a controlled manner."}},"Cable Woodchop":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Cable+Woodchop",resources:[{label:"Cable woodchop technique",url:"https://example.com/cable-woodchop/technique"},{label:"Rotational core programming",url:"https://example.com/cable-woodchop/programming"},{label:"Anti-rotation vs rotation training",url:"https://example.com/cable-woodchop/rotation"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Cable woodchop finish"],difficulty:"Moderate",duration:"5-12 min",exampleNote:"Pull a handle diagonally across the body using torso rotation; control the return.",meta:{exercise:"Core / Abs / Obliques / Shoulders / Back Stabilizers",movement:"Rotation -- Transverse",equipment:"Cables / Bands",trainingType:"Strength / Hypertrophy / Endurance / Balance-Stability",planeOfMotion:"Transverse",description:"Attach a handle high on a cable and pull diagonally across the body while rotating the torso, then return smoothly."}},"Hanging Leg Raises":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Hanging+Leg+Raises",resources:[{label:"Hanging leg raise progressions",url:"https://example.com/hanging-leg-raises/progressions"},{label:"Grip endurance tips",url:"https://example.com/hanging-leg-raises/grip"},{label:"Core-to-hip flexor coordination drills",url:"https://example.com/hanging-leg-raises/coordination"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Hanging leg raise top"],difficulty:"Hard",duration:"Varies",exampleNote:"Hang from a bar and raise legs toward parallel while keeping control and avoiding swing.",meta:{exercise:"Core / Abs / Hip Flexors",movement:"Push -- Sagittal Flexion",equipment:"Bodyweight / Pull-Up Bar",trainingType:"Strength / Hypertrophy",planeOfMotion:"Sagittal",description:"Hang from a bar and lift legs upward while maintaining a controlled motion and braced core."}},"Crunch Machine":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Crunch+Machine",resources:[{label:"Using the crunch machine safely",url:"https://example.com/crunch-machine/safety"},{label:"Machine-based core workouts",url:"https://example.com/crunch-machine/workouts"},{label:"Adjusting machine settings for form",url:"https://example.com/crunch-machine/settings"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Crunch machine setup"],difficulty:"Easy",duration:"5-12 min",exampleNote:"Use a crunch machine to perform controlled spinal flexion focusing on the abs.",meta:{exercise:"Core / Abs / Obliques  secondary",movement:"Push -- Sagittal Flexion",equipment:"Machine",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Sit in the crunch machine and curl the torso forward under control, keeping tension in the abs."}},"Cable Crunch":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Cable+Crunch",resources:[{label:"Cable crunch form and setup",url:"https://example.com/cable-crunch/form"},{label:"Rope attachment best practices",url:"https://example.com/cable-crunch/rope"},{label:"Core strength progressions",url:"https://example.com/cable-crunch/progressions"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Cable crunch finish"],difficulty:"Moderate",duration:"5-12 min",exampleNote:"Attach a rope to a high pulley and curl the torso down while keeping hips stable.",meta:{exercise:"Core / Abs / Obliques  secondary",movement:"Push -- Sagittal Flexion",equipment:"Cables / Rope Attachment",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Kneel in front of a high pulley and pull the rope down with core contraction to flex the spine."}},"Rotary Torso Machine":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Rotary+Torso+Machine",resources:[{label:"Rotary torso machine technique",url:"https://example.com/rotary-torso/technique"},{label:"Machine-based rotation programming",url:"https://example.com/rotary-torso/programming"},{label:"Comparing rotational tools",url:"https://example.com/rotary-torso/compare"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Rotary torso setup"],difficulty:"Easy",duration:"5-10 min",exampleNote:"Use the rotary torso machine to rotate the torso slowly and with control.",meta:{exercise:"Core / Abs / Obliques / Lower Back Stabilizers",movement:"Rotation -- Transverse",equipment:"Machine",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Transverse",description:"Use a rotary torso machine to perform controlled rotations, focusing on controlled movement and posture."}},"Leg Press Machine":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Leg+Press+Machine",resources:[{label:"Leg press setup and foot placement",url:"https://example.com/leg-press/setup"},{label:"Programming leg press for hypertrophy",url:"https://example.com/leg-press/programming"},{label:"Knee and hip safety on leg press",url:"https://example.com/leg-press/safety"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Leg press foot placement"],difficulty:"Moderate",duration:"Varies",exampleNote:"Place feet on platform and press while keeping lower back against the seat; control range of motion.",meta:{exercise:"Lower Body / Quads / Glutes / Hamstrings / Calves",movement:"Squat/Lunge -- Sagittal",equipment:"Machine  Leg Press",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Use the leg press machine to push the platform under control, focusing on foot placement and knee tracking."}},"Weighted Lunges":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Weighted+Lunges",resources:[{label:"Weighted lunge variations",url:"https://example.com/weighted-lunges/variations"},{label:"Programming lunges for mass",url:"https://example.com/weighted-lunges/programming"},{label:"Lunge safety with weights",url:"https://example.com/weighted-lunges/safety"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Weighted lunge stance"],difficulty:"Moderate",duration:"8-20 min",exampleNote:"Step forward with weight and lower into a controlled lunge, keeping torso upright and pushing through the front heel.",meta:{exercise:"Lower Body / Quads / Glutes / Hamstrings / Calves / Core Stabilizers",movement:"Squat/Lunge -- Sagittal",equipment:"Free Weights  Dumbbells / Barbells / Kettlebells",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Perform lunges while holding weight, focusing on balance, knee tracking, and controlled movement."}}},fw=({name:i,exercise:r,onClose:n})=>{const a=ff[i]||ff.Default||{},l=r?{...a,...r}:a,u={images:l.images||[],galleryImages:l.galleryImages||[],imageCaptions:l.imageCaptions||[],video:l.video||"",featuredVideo:l.featuredVideo||!1,resources:Array.isArray(l.resources)?l.resources:[],difficulty:l.difficulty||"",duration:l.duration||"",exampleNote:l.exampleNote||"",meta:l.meta||{}},d=r&&r.muscleGroups&&r.muscleGroups.length?r.muscleGroups.join(", "):u.meta?.muscleGroups&&u.meta.muscleGroups.length?u.meta.muscleGroups.join(", "):l.muscleGroups&&l.muscleGroups.join?l.muscleGroups.join(", "):"",m=r&&(r.sets||r.reps)?r.sets?`${r.sets} sets  ${r.reps||""}`:`${r.reps} reps`:u.sets&&u.reps?`${u.sets} sets  ${u.reps}`:u.meta?.reps?`${u.meta.reps} reps`:null,p=m?m.toString().toLowerCase().endsWith("reps")?m:`${m} reps`:null;return o.jsx("div",{className:"exercise-modal-overlay",onClick:n,children:o.jsxs("div",{className:"exercise-detail-modal",onClick:y=>y.stopPropagation(),role:"dialog","aria-label":`${i} details`,children:[o.jsxs("div",{className:"exercise-detail-header",children:[o.jsxs("div",{className:"header-left",children:[o.jsx("div",{className:"illustration","aria-hidden":!0,children:o.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"3",y:"11",width:"18",height:"8",rx:"2",fill:"#F3FBF6"}),o.jsx("path",{d:"M7 11V8a3 3 0 0 1 3-3h4",stroke:"#2EB06A",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("circle",{cx:"17",cy:"6",r:"1.6",fill:"#2EB06A"})]})}),o.jsxs("div",{className:"title-block",children:[o.jsxs("div",{className:"title-text",children:[o.jsx("h3",{children:i}),o.jsxs("div",{className:"tag-row",children:[(()=>{const g=((r&&r.difficulty?r.difficulty:u.difficulty||"")||"").toString().toLowerCase().trim();let x="Unknown",b="unknown";return g.includes("easy")||g.includes("beginner")?(x="Beginner",b="beginner"):g.includes("moder")||g.includes("inter")||g.includes("medium")||g.includes("intermediate")?(x="Intermediate",b="intermediate"):g.includes("hard")||g.includes("adv")||g.includes("advanced")?(x="Advanced",b="advanced"):g&&(x=g.charAt(0).toUpperCase()+g.slice(1),b=g.replace(/\s+/g,"-")),o.jsx("span",{className:`tag tag-difficulty tag-${b}`,children:x})})(),o.jsxs("span",{className:"meta-pill duration",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-clock",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("polyline",{points:"12 6 12 12 16 14"})]}),u.duration||""]}),p?o.jsxs("span",{className:"meta-pill reps",children:[o.jsx(xt,{size:14}),p]}):null,o.jsxs("span",{className:"meta-pill target",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-zap",children:o.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),d]})]})]}),o.jsx("div",{className:"header-subinfo","aria-hidden":!0})]})]}),o.jsx("button",{className:"close-btn",onClick:n,"aria-label":"Close",children:o.jsx(Ji,{size:18})})]}),o.jsxs("div",{className:"exercise-body",children:[o.jsx("div",{className:"hero-media",children:u.video?o.jsx("div",{className:"hero-video",children:o.jsx("iframe",{src:u.video,title:`${i} video`,frameBorder:"0",allowFullScreen:!0})}):o.jsx("div",{className:"hero-placeholder",children:o.jsx("svg",{width:"96",height:"64",viewBox:"0 0 96 64",fill:"none",children:o.jsx("rect",{width:"96",height:"64",rx:"8",fill:"#F3FBF6"})})})}),o.jsxs("div",{className:"meta-grid",children:[o.jsxs("div",{className:"meta-item",children:[o.jsx("div",{className:"meta-icon",children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{d:"M12 2v20",stroke:"#4CAF50",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),o.jsxs("div",{className:"meta-content",children:[o.jsx("div",{className:"meta-label",children:"Exercise"}),o.jsx("div",{className:"meta-value",children:u.meta?.exercise||""})]})]}),o.jsxs("div",{className:"meta-item",children:[o.jsx("div",{className:"meta-icon",children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{d:"M4 12h16",stroke:"#1E90CB",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),o.jsxs("div",{className:"meta-content",children:[o.jsx("div",{className:"meta-label",children:"Movement"}),o.jsx("div",{className:"meta-value",children:u.meta?.movement||""})]})]}),o.jsxs("div",{className:"meta-item",children:[o.jsx("div",{className:"meta-icon",children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:o.jsx("rect",{x:"3",y:"6",width:"18",height:"12",rx:"2",stroke:"#FF9600",strokeWidth:"1.2"})})}),o.jsxs("div",{className:"meta-content",children:[o.jsx("div",{className:"meta-label",children:"Equipment"}),o.jsx("div",{className:"meta-value",children:u.meta?.equipment||""})]})]}),o.jsxs("div",{className:"meta-item",children:[o.jsx("div",{className:"meta-icon",children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{d:"M12 20V4",stroke:"#6A5ACD",strokeWidth:"1.2",strokeLinecap:"round"})})}),o.jsxs("div",{className:"meta-content",children:[o.jsx("div",{className:"meta-label",children:"Type of Training"}),o.jsx("div",{className:"meta-value",children:u.meta?.trainingType||""})]})]}),o.jsxs("div",{className:"meta-item",children:[o.jsx("div",{className:"meta-icon",children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:o.jsx("circle",{cx:"12",cy:"12",r:"8",stroke:"#2E8B57",strokeWidth:"1.2"})})}),o.jsxs("div",{className:"meta-content",children:[o.jsx("div",{className:"meta-label",children:"Plane of Motion"}),o.jsx("div",{className:"meta-value",children:u.meta?.planeOfMotion||""})]})]})]}),o.jsxs("div",{className:"description",children:[o.jsx("div",{className:"desc-label",children:"Description"}),o.jsx("div",{className:"desc-text",children:u.meta?.description||u.exampleNote||"No description available."})]}),o.jsx("div",{className:"image-gallery",children:(u.galleryImages&&u.galleryImages.length?u.galleryImages:u.images||[]).slice(0,2).map((y,g)=>o.jsxs("figure",{className:"gallery-item",children:[o.jsx("img",{src:y,alt:`${i} image ${g+1}`}),o.jsx("figcaption",{children:u.imageCaptions&&u.imageCaptions[g]||u.resources?.[g]?.label||""})]},g))}),o.jsx("div",{className:"section-divider"}),o.jsxs("div",{className:"meta-resources",children:[o.jsx("h4",{children:"Resources"}),o.jsx("div",{className:"resource-cards",children:u.resources.map((y,g)=>o.jsxs("div",{className:"resource-card",children:[o.jsxs("div",{className:"resource-card-left",children:[o.jsx("div",{className:"resource-icon",children:o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:o.jsx("rect",{x:"3",y:"6",width:"18",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"1.4"})})}),o.jsxs("div",{className:"resource-body",children:[o.jsx("div",{className:"resource-title",children:y.label}),o.jsx("div",{className:"resource-caption",children:y.caption||""})]})]}),o.jsx("div",{className:"resource-actions",children:o.jsx("a",{className:`resource-btn btn btn-primary ${g%2===0?"green":"blue"}`,href:y.url,target:"_blank",rel:"noreferrer",children:"Open"})})]},g))})]})]})]})})};var cu={};(function i(r,n,a,l){var u=!!(r.Worker&&r.Blob&&r.Promise&&r.OffscreenCanvas&&r.OffscreenCanvasRenderingContext2D&&r.HTMLCanvasElement&&r.HTMLCanvasElement.prototype.transferControlToOffscreen&&r.URL&&r.URL.createObjectURL),d=typeof Path2D=="function"&&typeof DOMMatrix=="function",m=function(){if(!r.OffscreenCanvas)return!1;var N=new OffscreenCanvas(1,1),w=N.getContext("2d");w.fillRect(0,0,1,1);var O=N.transferToImageBitmap();try{w.createPattern(O,"no-repeat")}catch{return!1}return!0}();function p(){}function y(N){var w=n.exports.Promise,O=w!==void 0?w:r.Promise;return typeof O=="function"?new O(N):(N(p,p),null)}var g=function(N,w){return{transform:function(O){if(N)return O;if(w.has(O))return w.get(O);var G=new OffscreenCanvas(O.width,O.height),ee=G.getContext("2d");return ee.drawImage(O,0,0),w.set(O,G),G},clear:function(){w.clear()}}}(m,new Map),x=function(){var N=Math.floor(16.666666666666668),w,O,G={},ee=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(w=function(ae){var he=Math.random();return G[he]=requestAnimationFrame(function se(fe){ee===fe||ee+N-1<fe?(ee=fe,delete G[he],ae()):G[he]=requestAnimationFrame(se)}),he},O=function(ae){G[ae]&&cancelAnimationFrame(G[ae])}):(w=function(ae){return setTimeout(ae,N)},O=function(ae){return clearTimeout(ae)}),{frame:w,cancel:O}}(),b=function(){var N,w,O={};function G(ee){function ae(he,se){ee.postMessage({options:he||{},callback:se})}ee.init=function(se){var fe=se.transferControlToOffscreen();ee.postMessage({canvas:fe},[fe])},ee.fire=function(se,fe,_e){if(w)return ae(se,null),w;var Ae=Math.random().toString(36).slice(2);return w=y(function(Be){function Ge(Xe){Xe.data.callback===Ae&&(delete O[Ae],ee.removeEventListener("message",Ge),w=null,g.clear(),_e(),Be())}ee.addEventListener("message",Ge),ae(se,Ae),O[Ae]=Ge.bind(null,{data:{callback:Ae}})}),w},ee.reset=function(){ee.postMessage({reset:!0});for(var se in O)O[se](),delete O[se]}}return function(){if(N)return N;if(!a&&u){var ee=["var CONFETTI, SIZE = {}, module = {};","("+i.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{N=new Worker(URL.createObjectURL(new Blob([ee])))}catch(ae){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn(" Could not load worker",ae),null}G(N)}return N}}(),E={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function k(N,w){return w?w(N):N}function C(N){return N!=null}function _(N,w,O){return k(N&&C(N[w])?N[w]:E[w],O)}function $(N){return N<0?0:Math.floor(N)}function F(N,w){return Math.floor(Math.random()*(w-N))+N}function R(N){return parseInt(N,16)}function B(N){return N.map(Z)}function Z(N){var w=String(N).replace(/[^0-9a-f]/gi,"");return w.length<6&&(w=w[0]+w[0]+w[1]+w[1]+w[2]+w[2]),{r:R(w.substring(0,2)),g:R(w.substring(2,4)),b:R(w.substring(4,6))}}function J(N){var w=_(N,"origin",Object);return w.x=_(w,"x",Number),w.y=_(w,"y",Number),w}function W(N){N.width=document.documentElement.clientWidth,N.height=document.documentElement.clientHeight}function te(N){var w=N.getBoundingClientRect();N.width=w.width,N.height=w.height}function ue(N){var w=document.createElement("canvas");return w.style.position="fixed",w.style.top="0px",w.style.left="0px",w.style.pointerEvents="none",w.style.zIndex=N,w}function we(N,w,O,G,ee,ae,he,se,fe){N.save(),N.translate(w,O),N.rotate(ae),N.scale(G,ee),N.arc(0,0,1,he,se,fe),N.restore()}function V(N){var w=N.angle*(Math.PI/180),O=N.spread*(Math.PI/180);return{x:N.x,y:N.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:N.startVelocity*.5+Math.random()*N.startVelocity,angle2D:-w+(.5*O-Math.random()*O),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:N.color,shape:N.shape,tick:0,totalTicks:N.ticks,decay:N.decay,drift:N.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:N.gravity*3,ovalScalar:.6,scalar:N.scalar,flat:N.flat}}function ce(N,w){w.x+=Math.cos(w.angle2D)*w.velocity+w.drift,w.y+=Math.sin(w.angle2D)*w.velocity+w.gravity,w.velocity*=w.decay,w.flat?(w.wobble=0,w.wobbleX=w.x+10*w.scalar,w.wobbleY=w.y+10*w.scalar,w.tiltSin=0,w.tiltCos=0,w.random=1):(w.wobble+=w.wobbleSpeed,w.wobbleX=w.x+10*w.scalar*Math.cos(w.wobble),w.wobbleY=w.y+10*w.scalar*Math.sin(w.wobble),w.tiltAngle+=.1,w.tiltSin=Math.sin(w.tiltAngle),w.tiltCos=Math.cos(w.tiltAngle),w.random=Math.random()+2);var O=w.tick++/w.totalTicks,G=w.x+w.random*w.tiltCos,ee=w.y+w.random*w.tiltSin,ae=w.wobbleX+w.random*w.tiltCos,he=w.wobbleY+w.random*w.tiltSin;if(N.fillStyle="rgba("+w.color.r+", "+w.color.g+", "+w.color.b+", "+(1-O)+")",N.beginPath(),d&&w.shape.type==="path"&&typeof w.shape.path=="string"&&Array.isArray(w.shape.matrix))N.fill(Y(w.shape.path,w.shape.matrix,w.x,w.y,Math.abs(ae-G)*.1,Math.abs(he-ee)*.1,Math.PI/10*w.wobble));else if(w.shape.type==="bitmap"){var se=Math.PI/10*w.wobble,fe=Math.abs(ae-G)*.1,_e=Math.abs(he-ee)*.1,Ae=w.shape.bitmap.width*w.scalar,Be=w.shape.bitmap.height*w.scalar,Ge=new DOMMatrix([Math.cos(se)*fe,Math.sin(se)*fe,-Math.sin(se)*_e,Math.cos(se)*_e,w.x,w.y]);Ge.multiplySelf(new DOMMatrix(w.shape.matrix));var Xe=N.createPattern(g.transform(w.shape.bitmap),"no-repeat");Xe.setTransform(Ge),N.globalAlpha=1-O,N.fillStyle=Xe,N.fillRect(w.x-Ae/2,w.y-Be/2,Ae,Be),N.globalAlpha=1}else if(w.shape==="circle")N.ellipse?N.ellipse(w.x,w.y,Math.abs(ae-G)*w.ovalScalar,Math.abs(he-ee)*w.ovalScalar,Math.PI/10*w.wobble,0,2*Math.PI):we(N,w.x,w.y,Math.abs(ae-G)*w.ovalScalar,Math.abs(he-ee)*w.ovalScalar,Math.PI/10*w.wobble,0,2*Math.PI);else if(w.shape==="star")for(var Ie=Math.PI/2*3,I=4*w.scalar,U=8*w.scalar,ge=w.x,je=w.y,xe=5,Se=Math.PI/xe;xe--;)ge=w.x+Math.cos(Ie)*U,je=w.y+Math.sin(Ie)*U,N.lineTo(ge,je),Ie+=Se,ge=w.x+Math.cos(Ie)*I,je=w.y+Math.sin(Ie)*I,N.lineTo(ge,je),Ie+=Se;else N.moveTo(Math.floor(w.x),Math.floor(w.y)),N.lineTo(Math.floor(w.wobbleX),Math.floor(ee)),N.lineTo(Math.floor(ae),Math.floor(he)),N.lineTo(Math.floor(G),Math.floor(w.wobbleY));return N.closePath(),N.fill(),w.tick<w.totalTicks}function ie(N,w,O,G,ee){var ae=w.slice(),he=N.getContext("2d"),se,fe,_e=y(function(Ae){function Be(){se=fe=null,he.clearRect(0,0,G.width,G.height),g.clear(),ee(),Ae()}function Ge(){a&&!(G.width===l.width&&G.height===l.height)&&(G.width=N.width=l.width,G.height=N.height=l.height),!G.width&&!G.height&&(O(N),G.width=N.width,G.height=N.height),he.clearRect(0,0,G.width,G.height),ae=ae.filter(function(Xe){return ce(he,Xe)}),ae.length?se=x.frame(Ge):Be()}se=x.frame(Ge),fe=Be});return{addFettis:function(Ae){return ae=ae.concat(Ae),_e},canvas:N,promise:_e,reset:function(){se&&x.cancel(se),fe&&fe()}}}function z(N,w){var O=!N,G=!!_(w||{},"resize"),ee=!1,ae=_(w,"disableForReducedMotion",Boolean),he=u&&!!_(w||{},"useWorker"),se=he?b():null,fe=O?W:te,_e=N&&se?!!N.__confetti_initialized:!1,Ae=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Be;function Ge(Ie,I,U){for(var ge=_(Ie,"particleCount",$),je=_(Ie,"angle",Number),xe=_(Ie,"spread",Number),Se=_(Ie,"startVelocity",Number),Ce=_(Ie,"decay",Number),Te=_(Ie,"gravity",Number),Re=_(Ie,"drift",Number),tt=_(Ie,"colors",B),it=_(Ie,"ticks",Number),dt=_(Ie,"shapes"),Pt=_(Ie,"scalar"),bt=!!_(Ie,"flat"),dr=J(Ie),Ot=ge,At=[],kt=N.width*dr.x,Hr=N.height*dr.y;Ot--;)At.push(V({x:kt,y:Hr,angle:je,spread:xe,startVelocity:Se,color:tt[Ot%tt.length],shape:dt[F(0,dt.length)],ticks:it,decay:Ce,gravity:Te,drift:Re,scalar:Pt,flat:bt}));return Be?Be.addFettis(At):(Be=ie(N,At,fe,I,U),Be.promise)}function Xe(Ie){var I=ae||_(Ie,"disableForReducedMotion",Boolean),U=_(Ie,"zIndex",Number);if(I&&Ae)return y(function(Se){Se()});O&&Be?N=Be.canvas:O&&!N&&(N=ue(U),document.body.appendChild(N)),G&&!_e&&fe(N);var ge={width:N.width,height:N.height};se&&!_e&&se.init(N),_e=!0,se&&(N.__confetti_initialized=!0);function je(){if(se){var Se={getBoundingClientRect:function(){if(!O)return N.getBoundingClientRect()}};fe(Se),se.postMessage({resize:{width:Se.width,height:Se.height}});return}ge.width=ge.height=null}function xe(){Be=null,G&&(ee=!1,r.removeEventListener("resize",je)),O&&N&&(document.body.contains(N)&&document.body.removeChild(N),N=null,_e=!1)}return G&&!ee&&(ee=!0,r.addEventListener("resize",je,!1)),se?se.fire(Ie,ge,xe):Ge(Ie,ge,xe)}return Xe.reset=function(){se&&se.reset(),Be&&Be.reset()},Xe}var oe;function re(){return oe||(oe=z(null,{useWorker:!0,resize:!0})),oe}function Y(N,w,O,G,ee,ae,he){var se=new Path2D(N),fe=new Path2D;fe.addPath(se,new DOMMatrix(w));var _e=new Path2D;return _e.addPath(fe,new DOMMatrix([Math.cos(he)*ee,Math.sin(he)*ee,-Math.sin(he)*ae,Math.cos(he)*ae,O,G])),_e}function H(N){if(!d)throw new Error("path confetti are not supported in this browser");var w,O;typeof N=="string"?w=N:(w=N.path,O=N.matrix);var G=new Path2D(w),ee=document.createElement("canvas"),ae=ee.getContext("2d");if(!O){for(var he=1e3,se=he,fe=he,_e=0,Ae=0,Be,Ge,Xe=0;Xe<he;Xe+=2)for(var Ie=0;Ie<he;Ie+=2)ae.isPointInPath(G,Xe,Ie,"nonzero")&&(se=Math.min(se,Xe),fe=Math.min(fe,Ie),_e=Math.max(_e,Xe),Ae=Math.max(Ae,Ie));Be=_e-se,Ge=Ae-fe;var I=10,U=Math.min(I/Be,I/Ge);O=[U,0,0,U,-Math.round(Be/2+se)*U,-Math.round(Ge/2+fe)*U]}return{type:"path",path:w,matrix:O}}function de(N){var w,O=1,G="#000000",ee='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof N=="string"?w=N:(w=N.text,O="scalar"in N?N.scalar:O,ee="fontFamily"in N?N.fontFamily:ee,G="color"in N?N.color:G);var ae=10*O,he=""+ae+"px "+ee,se=new OffscreenCanvas(ae,ae),fe=se.getContext("2d");fe.font=he;var _e=fe.measureText(w),Ae=Math.ceil(_e.actualBoundingBoxRight+_e.actualBoundingBoxLeft),Be=Math.ceil(_e.actualBoundingBoxAscent+_e.actualBoundingBoxDescent),Ge=2,Xe=_e.actualBoundingBoxLeft+Ge,Ie=_e.actualBoundingBoxAscent+Ge;Ae+=Ge+Ge,Be+=Ge+Ge,se=new OffscreenCanvas(Ae,Be),fe=se.getContext("2d"),fe.font=he,fe.fillStyle=G,fe.fillText(w,Xe,Ie);var I=1/O;return{type:"bitmap",bitmap:se.transferToImageBitmap(),matrix:[I,0,0,I,-Ae*I/2,-Be*I/2]}}n.exports=function(){return re().apply(this,arguments)},n.exports.reset=function(){re().reset()},n.exports.create=z,n.exports.shapeFromPath=H,n.exports.shapeFromText=de})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),cu,!1);const pw=cu.exports;cu.exports.create;const mw=({workout:i,onClose:r,onComplete:n,onRegenerateWorkout:a,isRegenerating:l,onUpdateWorkout:u})=>{const[d,m]=j.useState(!1),[p,y]=j.useState(!1),[g,x]=j.useState(i),[b,E]=j.useState(i.completed);er.useEffect(()=>{E(i.completed)},[i.completed]);const k=V=>{const[ce,ie,z]=V.split("-").map(Number);return new Date(ce,ie-1,z).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},C=V=>{switch(V){case"strength":return"strength";case"cardio":return"cardio";case"flexibility":return"flexibility";case"rest":return"rest";case"mixed":return"mixed";default:return"mixed"}},_=V=>{if(!V)return{label:"",cls:""};const ce=(V||"").toString().toLowerCase();return ce==="easy"||ce==="beginner"?{label:"Easy",cls:"difficulty-easy"}:ce==="medium"||ce==="intermediate"?{label:"Medium",cls:"difficulty-medium"}:ce==="hard"||ce==="advanced"?{label:"Hard",cls:"difficulty-hard"}:{label:ce.charAt(0).toUpperCase()+ce.slice(1),cls:`difficulty-${ce.replace(/\s+/g,"-")}`}},$=d?i.alternativeWorkouts:i.workouts,[F,R]=er.useState(null),[B,Z]=er.useState(null),J=(V,ce=!1)=>{const ie={...g};ce?ie.alternativeWorkouts=ie.alternativeWorkouts.filter((z,oe)=>oe!==V):ie.workouts=ie.workouts.filter((z,oe)=>oe!==V),x(ie)},W=(V,ce=!1)=>{if(ce){const ie=g.alternativeWorkouts[V];x({...g,workouts:[...g.workouts,ie],alternativeWorkouts:g.alternativeWorkouts.filter((z,oe)=>oe!==V)})}else{const ie=g.workouts[V];x({...g,workouts:g.workouts.filter((z,oe)=>oe!==V),alternativeWorkouts:[...g.alternativeWorkouts,ie]})}},te=()=>{const V=g.workouts.length>0,ce=g.alternativeWorkouts.length>0;if(!V&&!ce){u&&u({...g,workouts:[],alternativeWorkouts:[]}),r();return}u&&u(g),y(!1),r()},ue=()=>{x(i),y(!1)},we=()=>{b||pw({particleCount:100,spread:70,origin:{y:.3},zIndex:9999});const V=!b;E(V),u&&u({...i,completed:V}),n()};return o.jsx("div",{className:"modal-overlay",onClick:r,children:o.jsxs("div",{className:"workout-modal",onClick:V=>V.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsxs("div",{className:"modal-title-section",children:[o.jsx("div",{className:`workout-type-badge ${C(i.type)}`,children:i.type==="rest"?"Rest Day":i.type==="strength"?"Strength":i.type==="cardio"?"Cardio":i.type==="flexibility"?"Flexibility":"Mixed"}),o.jsxs("div",{children:[o.jsx("h2",{children:k(i.date)}),i.completed&&o.jsxs("span",{className:"completed-badge",children:[o.jsx(Uc,{size:16}),"Completed"]})]})]}),"          ",o.jsx("button",{className:"close-button",onClick:r,title:"Close modal",children:o.jsx(Ji,{size:24})})]}),o.jsx("div",{className:"modal-content",children:i.type==="rest"?i.isRickroll?o.jsxs("div",{className:"rest-day-content rickroll-rest",children:[o.jsx("div",{className:"rest-icon",children:o.jsx(Hs,{size:48})}),o.jsx("h3",{children:"Rest & Recharge"}),o.jsx("p",{children:"Todays a gentle recovery day  take it slow and treat yourself. A short, uplifting break can do wonders. Enjoy this pick-me-up while you rest."}),o.jsx("div",{className:"rickroll-embed",children:o.jsx("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/dQw4w9WgXcQ?rel=0",title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),o.jsxs("div",{className:"rest-activities",children:[o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Slow breathing or meditation (5-10 min)"})]}),o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Enjoy a calming drink while you relax"})]})]})]}):o.jsxs("div",{className:"rest-day-content",children:[o.jsx("div",{className:"rest-icon",children:o.jsx(Hs,{size:48})}),o.jsx("h3",{children:"Recovery Day"}),o.jsx("p",{children:"Take this day to rest and let your muscles recover. You can do light stretching, meditation, or gentle walking."}),o.jsxs("div",{className:"rest-activities",children:[o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Meditation (10-15 min)"})]}),o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Light walking"})]}),o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Relaxing bath"})]}),o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Reading or relaxing"})]})]})]}):o.jsxs("div",{className:"workout-content",children:[o.jsxs("div",{className:"workout-toggle",children:[o.jsx("button",{className:`toggle-button ${d?"":"active"}`,onClick:()=>m(!1),children:"Main Workout"}),o.jsx("button",{className:`toggle-button ${d?"active":""}`,onClick:()=>m(!0),children:"Alternative"})]}),"              ",o.jsx("div",{className:"exercise-list",children:(p?d?g.alternativeWorkouts:g.workouts:$).map((V,ce)=>o.jsxs("div",{className:"exercise-card",role:p?void 0:"button",tabIndex:p?void 0:0,onClick:()=>{p||(R(V.name),Z(V))},onKeyDown:ie=>{!p&&(ie.key==="Enter"||ie.key===" ")&&(ie.preventDefault(),R(V.name),Z(V))},children:[o.jsxs("div",{className:"exercise-header",children:[o.jsxs("div",{className:"exercise-title-section",children:[o.jsx("h4",{children:V.name}),(()=>{const{label:ie,cls:z}=_(V.difficulty);return o.jsx("div",{className:`difficulty-badge ${z}`,children:ie})})()]}),p&&o.jsxs("div",{className:"exercise-actions",children:[o.jsx("button",{className:"action-btn swap-btn",onClick:ie=>{ie.stopPropagation(),W(ce,d)},title:d?"Move to main workout":"Move to alternative",children:d?o.jsx(Ey,{size:16}):o.jsx(Cy,{size:16})}),o.jsx("button",{className:"action-btn delete-btn",onClick:ie=>{ie.stopPropagation(),J(ce,d)},title:"Delete exercise",children:o.jsx(yo,{size:16})})]})]}),o.jsxs("div",{className:"exercise-details",children:[V.sets&&V.reps&&o.jsxs("div",{className:"detail-item",children:[o.jsx(xt,{size:16}),o.jsxs("span",{children:[V.sets," sets  ",V.reps," reps"]})]}),V.duration&&o.jsxs("div",{className:"detail-item",children:[o.jsx(qs,{size:16}),o.jsx("span",{children:V.duration})]}),V.muscleGroups&&V.muscleGroups.length>0&&o.jsxs("div",{className:"detail-item",children:[o.jsx(Hs,{size:16}),o.jsx("span",{children:V.muscleGroups.join(", ")})]})]}),o.jsx("p",{className:"exercise-description",children:V.description}),Array.isArray(V.equipment)&&V.equipment.some(ie=>ie!=="No equipment")&&o.jsx("div",{className:"equipment-tags",children:V.equipment.filter(ie=>ie!=="No equipment").map((ie,z)=>o.jsx("span",{className:"equipment-tag",children:ie},z))})]},ce))})]})}),F&&o.jsx(fw,{name:F,exercise:B||void 0,onClose:()=>{R(null),Z(null)}}),i.type!=="rest"&&o.jsx("div",{className:"modal-footer",children:o.jsx("div",{className:"action-buttons",children:p?o.jsxs(o.Fragment,{children:[o.jsxs("button",{className:"btn btn-secondary",onClick:ue,children:[o.jsx(Ji,{size:16}),"Cancel"]}),o.jsxs("button",{className:"btn btn-primary",onClick:te,children:[o.jsx(Wc,{size:16}),"Save Changes"]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("button",{className:"btn btn-secondary",onClick:()=>y(!0),children:[o.jsx(Bc,{size:16}),"Edit Workout"]}),o.jsx("button",{className:"btn btn-secondary",onClick:a,disabled:!!l,"aria-busy":!!l,children:l?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"button-spinner",children:o.jsx("div",{className:"loading-dumbbell small",children:o.jsx(xt,{size:16,color:"#fff"})})}),o.jsx("span",{className:"generating-text",children:"Generating..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(af,{size:16}),"New Workout"]})}),o.jsx("button",{className:`btn ${b?"btn-accent":"btn-primary"}`,onClick:we,children:b?o.jsxs(o.Fragment,{children:[o.jsx(af,{size:16}),"Mark Incomplete"]}):o.jsxs(o.Fragment,{children:[o.jsx(Uc,{size:16}),"Complete Workout"]})})]})})}),i.type!=="rest"&&o.jsxs("div",{className:"add-workout-section",children:[o.jsx("h3",{children:"Select Date and Workout Type"}),o.jsxs("div",{className:"date-picker-container",children:[o.jsx("label",{htmlFor:"workout-date",children:"Date:"}),o.jsx("input",{type:"date",id:"workout-date",className:"date-picker",value:g.date,onChange:V=>x({...g,date:V.target.value})})]}),o.jsxs("div",{className:"workout-type-container",children:[o.jsx("label",{htmlFor:"workout-type",children:"Workout Type:"}),o.jsxs("select",{id:"workout-type",className:"workout-type-selector",value:g.type,onChange:V=>x({...g,type:V.target.value}),children:[o.jsx("option",{value:"strength",children:"Strength"}),o.jsx("option",{value:"cardio",children:"Cardio"}),o.jsx("option",{value:"flexibility",children:"Flexibility"}),o.jsx("option",{value:"rest",children:"Rest"})]})]}),o.jsx("button",{className:"add-workout-button",onClick:te,children:"Add Workout Day"})]}),o.jsx("style",{children:`
            .add-workout-section {
              margin-top: 20px;
              padding: 15px;
              background-color: var(--light-blue);
              border-radius: 8px;
              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            }
            .date-picker-container, .workout-type-container {
              margin-bottom: 15px;
            }
            .date-picker, .workout-type-selector {
              width: 100%;
              padding: 10px;
              border: 1px solid var(--gray);
              border-radius: 4px;
              font-size: 16px;
            }
            .add-workout-button {
              width: 100%;
              padding: 10px;
              background-color: var(--green);
              color: white;
              font-size: 16px;
              border: none;
              border-radius: 4px;
              cursor: pointer;
              transition: background-color 0.3s;
            }
            .add-workout-button:hover {
              background-color: var(--dark-green);
            }
          `})]})})},gw=({workoutPlan:i,userData:r,onUpdatePlan:n})=>{const a=j.useRef(0),l=j.useRef(0),[u,d]=j.useState(new Date),[m,p]=j.useState(null),[y,g]=j.useState(!1),[x,b]=j.useState(null),[E,k]=j.useState(!1),[C,_]=j.useState(null),[$,F]=j.useState(!1),[R,B]=j.useState(!1),[Z,J]=j.useState(!1),[W,te]=j.useState(!1),[ue,we]=j.useState([]),[V,ce]=j.useState(!1),[ie,z]=j.useState(["strength"]),[oe,re]=j.useState(""),[Y,H]=j.useState([]),[de,N]=j.useState(""),[w,O]=j.useState(!1),[G,ee]=j.useState(""),[ae,he]=j.useState(null),[se,fe]=j.useState(null),[_e,Ae]=j.useState(!1),[Be,Ge]=j.useState(!1),[Xe,Ie]=j.useState(null),[I,U]=j.useState(!1),[ge,je]=j.useState("strength"),[xe,Se]=j.useState({duration:"30 min",muscleGroups:[],equipment:[]}),[Ce,Te]=j.useState(!1),[Re,tt]=j.useState([]);if(j.useEffect(()=>{if(i&&i.dailyWorkouts.length>0&&!I){const[L,q,le]=i.startDate.split("-").map(Number);d(new Date(L,q-1,le))}},[i]),j.useEffect(()=>{let L=!0;return(async()=>{try{if(i&&i.dailyWorkouts&&i.dailyWorkouts.length>0)return;try{if(localStorage.getItem("fitbuddy_no_auto_restore")||sessionStorage.getItem("fitbuddy_no_auto_restore"))return}catch{}const le=jn();if(!le||!le.id||(await Xn(le.id),!L))return;const me=Qs();me&&n(me)}catch(le){console.warn("Failed to restore server data in WorkoutCalendar:",le)}})(),()=>{L=!1}},[n]),j.useEffect(()=>{},[i]),j.useEffect(()=>{},[]),j.useEffect(()=>{if(i){let L=i.dailyWorkouts.map(q=>{if(q.type==="mixed"&&(!q.workouts||q.workouts.length===0)&&ss(q)==="0 min"){const le={...q,type:"rest",workouts:[{name:"Rest Day",description:"Take a well-deserved break and let your body recover.",duration:"0 min",difficulty:"beginner",muscleGroups:[]}],alternativeWorkouts:[]};return Math.random()<1e-6&&(le.isRickroll=!0),le}return q});try{const q=Array.isArray(i.weeklyStructure)?i.weeklyStructure:[],le=typeof i.totalDays=="number"&&i.totalDays>0?i.totalDays:i.dailyWorkouts?i.dailyWorkouts.length:0;if(i.startDate&&le>0&&q.length===7){const me=i.startDate.split("-").map(Number);if(me.length===3){const Me=new Date(me[0],me[1]-1,me[2]),ze=new Set((L||[]).map(qe=>qe.date));for(let qe=0;qe<le;qe++){const We=new Date(Me.getTime());We.setDate(Me.getDate()+qe);const $t=cr(We,"yyyy-MM-dd"),Je=qe%7;if((q[Je]||"").toString().toLowerCase().includes("rest")&&!ze.has($t)){const Ve={date:$t,workouts:[{name:"Rest Day",description:"Take a well-deserved break and let your body recover.",duration:"0 min",difficulty:"beginner",muscleGroups:[]}],alternativeWorkouts:[],completed:!1,type:"rest"};Math.random()<1/1e6&&(Ve.isRickroll=!0),L=[...L,Ve],ze.add($t)}}}}}catch(q){console.warn("Failed to populate missing rest days from weeklyStructure:",q)}if(JSON.stringify(L)!==JSON.stringify(i.dailyWorkouts)){const q={...i,dailyWorkouts:L,totalDays:L.length};n(q);try{console.log("[WorkoutCalendar] Saving normalized plan to localStorage:",{totalDays:q.totalDays,dailyWorkoutsCount:q.dailyWorkouts.length}),bn(q)}catch(le){console.warn("Failed to save normalized plan locally:",le)}}}},[i,n]),!i||!r)return o.jsx("div",{className:"calendar-no-plan-container",children:o.jsxs("div",{className:"calendar-no-plan-content fade-in-bounce",children:[o.jsx("div",{className:"calendar-no-plan-icon-bg",children:o.jsx(xt,{size:48,color:"#fff"})}),o.jsx("h1",{className:"calendar-no-plan-title",children:"No Plan"}),o.jsx("h2",{className:"calendar-no-plan-message",children:"No Workout Plan Found"}),o.jsx("p",{className:"calendar-no-plan-desc",children:"Please complete the questionnaire first to generate your personalized workout plan."}),o.jsx("a",{className:"calendar-no-plan-btn",href:"/questionnaire",children:"Go to Questionnaire"})]})});const it=av(u),dt=sv(u),Pt=iv({start:it,end:dt}),bt=Array(it.getDay()).fill(null),dr=Array((7-(it.getDay()+Pt.length)%7)%7).fill(null),Ot=L=>{let q;if(typeof L=="string")if(L.includes("T"))q=new Date(L);else{const[le,me,Me]=L.split("-").map(Number);q=new Date(le,me-1,Me)}else q=L;if(isNaN(q.getTime()))throw new RangeError("Invalid time value");return cr(q,"yyyy-MM-dd")},At=L=>{const q=Ot(L.toISOString());return i.dailyWorkouts.find(me=>me.date===q)||null},kt=L=>{const q=cr(L,"yyyy-MM-dd");if(W){we(me=>me.includes(q)?me.filter(Me=>Me!==q):[...me,q]);return}if(w){if(x===q||_e)return;const me=new Date(L.getFullYear(),L.getMonth(),L.getDate()-1);is(me),O(!1),Ie(q);return}if(x===q||_e)return;if(Ce){tt(me=>me.includes(q)?me.filter(Me=>Me!==q):[...me,q]);return}const le=At(L);if(E&&le){ei(le);return}if(E&&!le){const me=new Date(L.getFullYear(),L.getMonth(),L.getDate()-1);is(me);return}le&&(p(le),g(!0))},Hr=L=>{const q=i.dailyWorkouts.map(me=>me.date===L?{...me,completed:!me.completed}:me),le={...i,dailyWorkouts:q};n(le)},tr=L=>{const q=new Date(u);L==="prev"?q.setMonth(q.getMonth()-1):q.setMonth(q.getMonth()+1),U(!0),d(q),window.setTimeout(()=>U(!1),2e3)},Ro=L=>{switch(L){case"strength":return"strength";case"cardio":return"cardio";case"flexibility":return"flexibility";case"rest":return"rest";case"mixed":return"mixed";default:return"mixed"}},Cn=i.dailyWorkouts.filter(L=>L.completed).length,Tn=i.dailyWorkouts.filter(L=>L.type!=="rest").length,ns=Tn>0?Cn/Tn*100:0,ss=L=>{if(L.type==="rest")return"0 min";let q=0;return L.workouts.forEach(le=>{if(le.duration){const me=le.duration.match(/(\d+)/);me&&(q+=parseInt(me[1]))}}),q>0?`${q} min`:"30 min"},ei=L=>{_({...L}),F(!0),k(!0)},Gr=()=>{if(!C||!i)return;const L=i.dailyWorkouts.map(le=>le.date===C.date?C:le),q={...i,dailyWorkouts:L};n(q),F(!1),k(!1),_(null)},Vr=()=>{F(!1),k(!1),_(null)},is=L=>{if(!i)return;let q;L?q=new Date(L.getFullYear(),L.getMonth(),L.getDate()+1):q=new Date;const le=cr(q,"yyyy-MM-dd"),me=i.dailyWorkouts.find(We=>We.date===le);if(me){const We={...me,type:"rest",workouts:[{name:"Rest Day",description:"Take a well-deserved break and let your body recover.",duration:"0 min",difficulty:"beginner",muscleGroups:[]}],alternativeWorkouts:[]};Jr(We);return}const Me={date:le,workouts:[{name:"Rest Day",description:"Take a well-deserved break and let your body recover.",duration:"0 min",difficulty:"beginner",muscleGroups:[]}],alternativeWorkouts:[],completed:!1,type:"rest"},ze=[...i?.dailyWorkouts||[],Me];Math.random()<1/1e6&&(Me.isRickroll=!0);const qe={...i,dailyWorkouts:ze};n(qe)},ta=()=>{de?(is(new Date(de)),N(""),B(!1)):B(!0)},ra=()=>{G?(ia(new Date(G),ge,xe),ee(""),J(!1)):J(!0)},na=()=>{const L=Date.now();if(L-l.current<350){console.debug("[WorkoutCalendar] handleSelectToAddToggle ignored - rapid duplicate");return}l.current=L,console.debug("[WorkoutCalendar] handleSelectToAddToggle called",{addMode:W,showBatchAddPanel:V,selectedForAddLength:ue.length}),W?(console.debug("[WorkoutCalendar] exiting selection mode"),te(!1),we([]),ce(!1),k(!0)):(te(!0),Te(!1),we([]),ce(!1),k(!0))},sa=()=>{if(console.debug("[WorkoutCalendar] handleConfirmSelection",{selectedForAddLength:ue.length}),ue.length===0){alert("Please select at least one date before confirming.");return}te(!1),ce(!0),k(!0)},ti=async()=>{if(!i||!r)return;if(ue.length===0){alert("Please select at least one date.");return}ce(!1),k(!1),te(!1),H([...ue]);const L=ur(),q=L?.answers||{},le=L?.questionsList||[];let me=[...i.dailyWorkouts];for(const ze of ue){if(me.some(qe=>qe.date===ze)){console.warn("Skipping existing date during batch add:",ze);continue}try{const qe=ie&&ie.length>0?ie.join(","):"mixed",We={...q,batchComments:oe},$t=me.filter(rt=>rt.date!==ze),Je=await _c(r,We,le,ze,qe,$t,[]),Ve=((rt,Qt)=>{const An=(rt?.date||Qt||"").toString();let Or=An;try{An.includes("T")&&(Or=cr(new Date(An),"yyyy-MM-dd"))}catch{Or=Qt}Or=Qt;const Pe=Array.isArray(rt?.workouts)?rt.workouts:Array.isArray(rt?.exercises)?rt.exercises:[],rr=Array.isArray(rt?.alternativeWorkouts)?rt.alternativeWorkouts:Array.isArray(rt?.alternativeExercises)?rt.alternativeExercises:[];return{date:Or,type:rt?.type||"mixed",workouts:Pe.map(De=>({name:De?.name||De?.exercise||"Exercise",description:De?.description||De?.instructions||"",difficulty:De?.difficulty||"beginner",duration:De?.duration||(De?.durationSeconds?`${De.durationSeconds} sec`:""),reps:De?.reps??"",muscleGroups:Array.isArray(De?.muscleGroups)?De.muscleGroups:De?.muscleGroups?[De.muscleGroups]:[],equipment:Array.isArray(De?.equipment)?De.equipment:De?.equipment?[De.equipment]:[],sets:typeof De?.sets=="number"?De.sets:void 0,rest:De?.rest||void 0})),alternativeWorkouts:rr.map(De=>({name:De?.name||De?.exercise||"Alt Exercise",description:De?.description||De?.instructions||"",difficulty:De?.difficulty||"beginner",duration:De?.duration||(De?.durationSeconds?`${De.durationSeconds} sec`:""),reps:De?.reps??"",muscleGroups:Array.isArray(De?.muscleGroups)?De.muscleGroups:De?.muscleGroups?[De.muscleGroups]:[],equipment:Array.isArray(De?.equipment)?De.equipment:De?.equipment?[De.equipment]:[],sets:typeof De?.sets=="number"?De.sets:void 0,rest:De?.rest||void 0})),completed:!!rt?.completed,totalTime:rt?.totalTime||""}})(Je,ze);me=[...me,Ve]}catch(qe){console.error("Batch generate error for date",ze,qe)}}const Me={...i,dailyWorkouts:me,totalDays:me.length};n(Me);try{console.log("[WorkoutCalendar] Saving batch-generated plan to localStorage:",{totalDays:Me.totalDays,dailyWorkoutsCount:Me.dailyWorkouts.length}),bn(Me)}catch(ze){console.warn("Failed to save batch-generated plan locally:",ze)}H([]),we([])},ia=async(L,q,le)=>{if(!i||!r)return;let me,Me;if(L){if(me=new Date(L.getFullYear(),L.getMonth(),L.getDate()+1),Me=cr(me,"yyyy-MM-dd"),i.dailyWorkouts.find(rt=>rt.date===Me))return}else{const Ve=i.dailyWorkouts.length>0?new Date(Math.max(...i.dailyWorkouts.map(rt=>new Date(rt.date).getTime()))):new Date(i.startDate);me=new Date(Ve.getTime()+1440*60*1e3),Me=cr(me,"yyyy-MM-dd")}const ze=[...r.preferences||[],...le?.muscleGroups||[],...le?.equipment||[],`Workout type: ${q||"mixed"}`,`Duration: ${le?.duration||"30 min"}`],qe={...r,preferences:ze},We=await Bi(qe,{},[]),$t={date:Me,type:q||"mixed",workouts:We.dailyWorkouts[0]?.workouts||[],alternativeWorkouts:[],completed:!1},Je=[...i.dailyWorkouts,$t],Pr={...i,dailyWorkouts:Je,totalDays:Je.length};n(Pr)},Jr=L=>{if(!i)return;const q=i.dailyWorkouts.map(me=>me.date===L.date?L:me),le={...i,dailyWorkouts:q};n(le)},ri=async L=>{if(!i||!r)return;g(!1),b(L.date),Ge(!0);const q=ur(),le=q?.answers||{},me=q?.questionsList||[];try{const Me=i.dailyWorkouts.filter(Ve=>Ve.date!==L.date),ze=[...L.workouts,...L.alternativeWorkouts];console.log("[AI] Sending generateWorkoutForDay request:",{username:r?.username,date:L.date,type:L.type,othersCount:Me.length,currentDayListLength:ze.length});const qe=await _c(r,le,me,L.date,L.type,Me,ze);console.log("[AI] Received response for generateWorkoutForDay:",qe);const $t=(Ve=>{const rt=(Ve?.date||L.date||"").toString();let Qt=rt;try{rt.includes("T")&&(Qt=cr(new Date(rt),"yyyy-MM-dd"))}catch{Qt=L.date}Qt=L.date;const An=Array.isArray(Ve?.workouts)?Ve.workouts:Array.isArray(Ve?.exercises)?Ve.exercises:[],Or=Array.isArray(Ve?.alternativeWorkouts)?Ve.alternativeWorkouts:Array.isArray(Ve?.alternativeExercises)?Ve.alternativeExercises:[];return{date:Qt,type:Ve?.type||L.type||"mixed",workouts:An.map(Pe=>({name:Pe?.name||Pe?.exercise||"Exercise",description:Pe?.description||Pe?.instructions||"",difficulty:Pe?.difficulty||"beginner",duration:Pe?.duration||(Pe?.durationSeconds?`${Pe.durationSeconds} sec`:""),reps:Pe?.reps??"",muscleGroups:Array.isArray(Pe?.muscleGroups)?Pe.muscleGroups:Pe?.muscleGroups?[Pe.muscleGroups]:[],equipment:Array.isArray(Pe?.equipment)?Pe.equipment:Pe?.equipment?[Pe.equipment]:[],sets:typeof Pe?.sets=="number"?Pe.sets:void 0,rest:Pe?.rest||void 0})),alternativeWorkouts:Or.map(Pe=>({name:Pe?.name||Pe?.exercise||"Alt Exercise",description:Pe?.description||Pe?.instructions||"",difficulty:Pe?.difficulty||"beginner",duration:Pe?.duration||(Pe?.durationSeconds?`${Pe.durationSeconds} sec`:""),reps:Pe?.reps??"",muscleGroups:Array.isArray(Pe?.muscleGroups)?Pe.muscleGroups:Pe?.muscleGroups?[Pe.muscleGroups]:[],equipment:Array.isArray(Pe?.equipment)?Pe.equipment:Pe?.equipment?[Pe.equipment]:[],sets:typeof Pe?.sets=="number"?Pe.sets:void 0,rest:Pe?.rest||void 0})),completed:!!Ve?.completed,totalTime:Ve?.totalTime||""}})(qe);console.log("[REGenerate] Normalized regenerated day:",$t);const Je=i.dailyWorkouts.map(Ve=>Ve.date===L.date?$t:Ve),Pr={...i,dailyWorkouts:Je};n(Pr);try{console.log("[WorkoutCalendar] Saving regenerated plan to localStorage:",{dailyWorkoutsCount:Pr.dailyWorkouts.length}),bn(Pr),console.log("[REGenerate] saved regenerated plan to localStorage")}catch(Ve){console.warn("Failed to save regenerated plan locally:",Ve)}p($t),g(!0),Ie($t.date),window.setTimeout(()=>Ie(null),2e3),b(null),Ge(!1)}catch(Me){console.error("Error regenerating single-day workout with AI:",Me),b(null),Ge(!1)}},Pn=async()=>{if(!i||!r||!G)return;b(G);const L=ur(),q=L?.answers||{},le=L?.questionsList||[];try{const me=i.dailyWorkouts.filter(We=>We.date!==G);console.log("[AI] Sending generateWorkoutForDay request:",{username:r?.username,date:G,type:ge,othersCount:me.length});const Me=await _c(r,q,le,G,ge,me,[]);console.log("[AI] Received response for generateWorkoutForDay:",Me);const ze=[...i.dailyWorkouts,Me],qe={...i,dailyWorkouts:ze};n(qe);try{bn(qe)}catch(We){console.warn("Failed to save generated day locally:",We)}console.log("[Calendar] Updated plan after generation:",{totalDays:qe.totalDays||qe.dailyWorkouts.length,dailyWorkoutsCount:qe.dailyWorkouts.length,addedDate:G,addedDay:Me}),b(null)}catch(me){console.error("Error generating workout:",me),b(null)}},Do=(L,q)=>{he(q),Ae(!0);try{L.dataTransfer.effectAllowed="move"}catch{}},On=(L,q)=>{L.preventDefault();try{L.dataTransfer.dropEffect="move"}catch{}fe(Ot(q.toISOString()))},as=()=>{fe(null)},os=()=>{Ae(!1),he(null),fe(null)},ni=(L,q)=>{if(L.preventDefault(),!ae||!i){Ae(!1);return}const le=Ot(q.toISOString()),me=ae.date;if(le===me){he(null),fe(null),Ae(!1);return}const Me=i.dailyWorkouts.find(We=>We.date===le);let ze=[...i.dailyWorkouts];Me?ze=ze.map(We=>We.date===me?{...Me,date:me}:We.date===le?{...ae,date:le}:We):ze=ze.map(We=>We.date===me?{...We,date:le}:We),U(!0),d(u);const qe={...i,dailyWorkouts:ze};n(qe),window.setTimeout(()=>U(!1),2e3),he(null),fe(null),Ae(!1)},Qr=(L,q)=>{Se(le=>({...le,[L]:q}))},Lo=()=>{if(!i)return;const L=i.dailyWorkouts.map(le=>le.date);tt(L);const q={...i,dailyWorkouts:[]};try{localStorage.setItem("fitbuddy_no_auto_restore","1"),sessionStorage.setItem("fitbuddy_no_auto_restore","1"),setTimeout(()=>{try{localStorage.removeItem("fitbuddy_no_auto_restore")}catch{}try{sessionStorage.removeItem("fitbuddy_no_auto_restore")}catch{}},3e5)}catch(le){console.warn("Failed to set no-auto-restore guard:",le)}n(q);try{bn(q)}catch(le){console.warn("Failed to persist cleared plan:",le)}try{const le=localStorage.getItem("fitbuddy_user_data");if(le){const Me=JSON.parse(le)?.data?.id;Me&&Yi(Me).catch(()=>{})}}catch{}k(!1),Te(!1),alert("Calendar has been cleared!")},Mo=()=>{if(!i)return;if(Re.length===0){alert("Please select at least one date to delete.");return}const L=i.dailyWorkouts.filter(q=>!Re.includes(q.date));n({...i,dailyWorkouts:L}),tt([]),Te(!1),k(!1)},Tr=()=>{tt([]),Te(!1)};return o.jsxs("div",{className:"calendar-page",children:[o.jsxs("div",{className:"calendar-container",children:[o.jsxs("div",{className:"calendar-header",children:[o.jsxs("div",{className:"user-info",children:[o.jsxs("h1",{children:["Welcome back, ",r?.username?.trim()||"User","!"]}),o.jsx("p",{children:i.description})]}),o.jsxs("div",{className:"progress-stats",children:[o.jsxs("div",{className:"stat-card",children:[o.jsx(kr,{size:24}),o.jsxs("div",{className:"stat-content",children:[o.jsx("span",{className:"stat-number",children:Cn}),o.jsx("span",{className:"stat-label",children:"Completed"})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx(qs,{size:24}),o.jsxs("div",{className:"stat-content",children:[o.jsx("span",{className:"stat-number",children:Tn-Cn}),o.jsx("span",{className:"stat-label",children:"Remaining"})]})]}),o.jsx("div",{className:"progress-circle",children:o.jsxs("svg",{viewBox:"0 0 36 36",className:"circular-chart",children:[o.jsx("path",{className:"circle-bg",d:`M18 2.0845\r
                    a 15.9155 15.9155 0 0 1 0 31.831\r
                    a 15.9155 15.9155 0 0 1 0 -31.831`}),o.jsx("path",{className:"circle",strokeDasharray:`${ns}, 100`,d:`M18 2.0845\r
                    a 15.9155 15.9155 0 0 1 0 31.831\r
                    a 15.9155 15.9155 0 0 1 0 -31.831`}),o.jsxs("text",{x:"18",y:"20.35",className:"percentage",children:[Math.round(ns),"%"]})]})})]})]}),o.jsxs("div",{className:"calendar-nav",children:[o.jsx("button",{className:"nav-button",onClick:()=>tr("prev"),onDragEnter:()=>{const L=Date.now();L-a.current>=1e3&&(tr("prev"),a.current=L)},"aria-label":"Previous month",children:o.jsx(Fc,{size:20})}),o.jsx("h2",{className:"month-year",children:cr(u,"MMMM yyyy")}),o.jsx("button",{className:"nav-button",onClick:()=>tr("next"),onDragEnter:()=>{const L=Date.now();L-a.current>=1e3&&(tr("next"),a.current=L)},"aria-label":"Next month",children:o.jsx(Ty,{size:20})})]}),o.jsxs("div",{className:"calendar-grid",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(L=>o.jsx("div",{className:"day-header",children:L},L)),bt.map((L,q)=>o.jsx("div",{className:"calendar-day empty"},`empty-start-${q}`)),Pt.map(L=>{const q=At(L),le=cr(L,"yyyy-MM-dd"),me=tv(L,new Date),Me=se===le,ze=x===le,qe=Xe===le;return o.jsxs("div",{className:`calendar-day ${me?"today":""} ${q?"has-workout":""} ${Me?"drag-over":""}`+(Ce?" delete-active":"")+(W?" add-active":"")+(ze?" loading":"")+(qe?" just-updated":"")+(ue.includes(le)?" selected":"")+(w?" rest-pending":"")+(Re.includes(le)?" delete-selected":""),onClick:()=>kt(L),onDragOver:We=>On(We,L),onDragLeave:as,onDrop:We=>ni(We,L),children:[o.jsx("span",{className:"day-number",children:cr(L,"d")}),q?o.jsxs("div",{className:`workout-indicator ${Ro(q.type)} ${q.completed?"completed":""}`,draggable:!E,onDragStart:We=>Do(We,q),onDragEnd:os,children:[(ze||Y.includes(le))&&o.jsx("div",{className:"loader-overlay inside-indicator",children:o.jsx("div",{className:"loading-dumbbell small",children:o.jsx(xt,{size:28,color:"#fff"})})}),o.jsxs("div",{className:"workout-content",children:[o.jsx("span",{className:"workout-type",children:q.type==="rest"?"Rest":q.type==="strength"?"Strength":q.type==="cardio"?"Cardio":q.type==="flexibility"?"Flexibility":"Mixed"}),o.jsx("span",{className:"workout-duration",children:q.totalTime?` ${q.totalTime}`:` ${ss(q)}`}),q.completed&&o.jsx(Uc,{size:14,className:"check-icon"}),!q.completed&&q.type!=="rest"&&o.jsx(Ay,{size:14,className:"play-icon"})]})]}):Y.includes(le)?o.jsx("div",{className:"loader-overlay inside-indicator",children:o.jsx("div",{className:"loading-dumbbell small",children:o.jsx(xt,{size:28,color:"#fff"})})}):null]},L.toISOString())}),dr.map((L,q)=>o.jsx("div",{className:"calendar-day empty"},`empty-end-${q}`))]}),o.jsxs("div",{className:"calendar-legend",children:[o.jsx("h3",{children:"Workout Types"}),o.jsxs("div",{className:"legend-items",children:[o.jsxs("div",{className:"legend-item",children:[o.jsx("div",{className:"legend-color strength"}),o.jsx("span",{children:"Strength Training"})]}),o.jsxs("div",{className:"legend-item",children:[o.jsx("div",{className:"legend-color cardio"}),o.jsx("span",{children:"Cardio"})]}),o.jsxs("div",{className:"legend-item",children:[o.jsx("div",{className:"legend-color flexibility"}),o.jsx("span",{children:"Flexibility"})]}),o.jsxs("div",{className:"legend-item",children:[o.jsx("div",{className:"legend-color mixed"}),o.jsx("span",{children:"Mixed"})]}),o.jsxs("div",{className:"legend-item",children:[o.jsx("div",{className:"legend-color rest"}),o.jsx("span",{children:"Rest Day"})]})]})]})]}),"      ",y&&m&&o.jsx(mw,{workout:m,onClose:()=>g(!1),onComplete:()=>Hr(m.date),onRegenerateWorkout:()=>ri(m),isRegenerating:Be,onUpdateWorkout:Jr}),o.jsx("button",{className:`edit-fab ${E?"active":""}`,onClick:()=>k(!E),"aria-label":"Edit workouts",children:E?o.jsx(Ji,{size:24}):o.jsx(Bc,{size:24})}),o.jsxs("div",{className:`edit-menu ${E?"open":""}`,children:[o.jsxs("div",{className:"edit-menu-header",children:[o.jsx("h3",{children:"Workout Editor"}),o.jsx("p",{children:"Customize your workout plan"})]}),o.jsxs("div",{className:"edit-menu-content",children:["          ",o.jsxs("div",{className:"edit-section",children:[o.jsxs("h4",{children:[o.jsx(Dy,{size:16})," Quick Actions"]}),"            ",o.jsxs("div",{className:"edit-actions",children:[o.jsxs("button",{className:"edit-action-btn",onClick:na,children:[o.jsx(Iy,{size:16}),W?"Selecting...":"Select to Add"]}),W&&o.jsxs("button",{className:"edit-action-btn confirm-btn",onClick:sa,children:[o.jsx(Wc,{size:16})," Confirm"]}),V&&o.jsxs("div",{className:"batch-add-panel",children:[o.jsxs("h4",{children:["Batch Add Workouts (",ue.length," selected)"]}),o.jsx("label",{children:"Choose workout types (multi-select):"}),o.jsx("div",{className:"batch-types",children:["strength","cardio","flexibility","mixed","rest"].map(L=>o.jsxs("label",{className:`batch-type ${ie.includes(L)?"selected":""}`,children:[o.jsx("input",{type:"checkbox",checked:ie.includes(L),onChange:q=>{z(le=>q.target.checked?[...le,L]:le.filter(me=>me!==L))}}),L]},L))}),o.jsx("label",{children:"Comments (optional):"}),o.jsx("textarea",{"aria-label":"Batch comments",value:oe,onChange:L=>re(L.target.value)}),o.jsxs("div",{className:"batch-actions",children:[o.jsx("button",{className:"save-btn",onClick:ti,disabled:ue.length===0,children:"Generate"}),o.jsx("button",{className:"cancel-btn",onClick:()=>{ce(!1),we([])},children:"Cancel"})]})]}),o.jsxs("button",{className:"edit-action-btn",onClick:()=>{O(!0),k(!1),B(!1)},title:"Click a calendar day to assign a Rest Day",children:[o.jsx(Cr,{size:16}),w?"Click a day to add Rest":"Add Rest Day"]}),o.jsxs("button",{className:"edit-action-btn",onClick:()=>{Te(L=>{const q=!L;return q&&te(!1),q})},children:[o.jsx(yo,{size:16})," ",Ce?"Stop Delete":"Delete Days"]}),Ce&&o.jsxs("div",{className:"delete-action-row",children:[o.jsxs("button",{className:"confirm-btn",onClick:Mo,disabled:Re.length===0,children:[o.jsx(yo,{size:16})," Delete ",Re.length>0?`(${Re.length})`:""]}),o.jsx("button",{className:"cancel-btn",onClick:Tr,children:"Cancel"})]}),o.jsxs("button",{className:"edit-action-btn clear-calendar-btn",onClick:Lo,children:[o.jsx(yo,{size:16}),"Clear Calendar"]})]}),R&&o.jsxs("div",{className:"date-picker-section",children:[o.jsx("label",{htmlFor:"rest-date",children:"Select date for rest day:"}),o.jsx("input",{id:"rest-date",type:"date",value:de,onChange:L=>N(L.target.value),className:"date-input"}),o.jsxs("div",{className:"date-picker-actions",children:[o.jsx("button",{className:"save-btn",onClick:ta,disabled:!de,children:"Add Rest Day"}),o.jsx("button",{className:"cancel-btn",onClick:()=>{B(!1),N("")},children:"Cancel"})]})]}),Z&&o.jsxs("div",{className:"date-picker-section",children:[o.jsx("label",{htmlFor:"workout-date",children:"Select date for workout day:"}),o.jsx("input",{id:"workout-date",type:"date",value:G,onChange:L=>ee(L.target.value),className:"date-input"}),o.jsx("label",{htmlFor:"workout-type",children:"Select workout type:"}),o.jsxs("select",{id:"workout-type",value:ge,onChange:L=>je(L.target.value),children:[o.jsx("option",{value:"strength",children:"Strength"}),o.jsx("option",{value:"cardio",children:"Cardio"}),o.jsx("option",{value:"flexibility",children:"Flexibility"}),o.jsx("option",{value:"mixed",children:"Mixed"})]}),o.jsx("label",{htmlFor:"workout-duration",children:"Duration:"}),o.jsx("input",{id:"workout-duration",type:"text",value:xe.duration,onChange:L=>Qr("duration",L.target.value)}),o.jsx("label",{htmlFor:"muscle-groups",children:"Muscle Groups:"}),o.jsx("input",{id:"muscle-groups",type:"text",placeholder:"e.g., Legs, Arms",onChange:L=>Qr("muscleGroups",L.target.value.split(",").map(q=>q.trim()))}),o.jsx("label",{htmlFor:"equipment",children:"Equipment:"}),o.jsx("input",{id:"equipment",type:"text",placeholder:"e.g., Dumbbells, Mat",onChange:L=>Qr("equipment",L.target.value.split(",").map(q=>q.trim()))}),o.jsxs("div",{className:"date-picker-actions",children:[o.jsx("button",{className:"save-btn",onClick:ra,disabled:!G,children:"Add Workout Day"}),o.jsx("button",{className:"cancel-btn",onClick:()=>{J(!1),ee("")},children:"Cancel"})]}),G&&i?.dailyWorkouts.find(L=>L.date===G)&&o.jsx("div",{className:"error-message",children:"This date already has a workout. Please select a different date."})]})]}),$&&C&&o.jsxs("div",{className:"edit-section",children:[o.jsxs("h4",{children:[o.jsx(Bc,{size:16})," Editing ",(()=>{const[L,q,le]=C.date.split("-").map(Number);return cr(new Date(L,q-1,le),"MMM d")})()]}),o.jsxs("div",{className:"workout-edit-form",children:[o.jsxs("label",{children:["Workout Type:",o.jsxs("select",{value:C.type,onChange:L=>_({...C,type:L.target.value}),children:[o.jsx("option",{value:"strength",children:"Strength"}),o.jsx("option",{value:"cardio",children:"Cardio"}),o.jsx("option",{value:"flexibility",children:"Flexibility"}),o.jsx("option",{value:"mixed",children:"Mixed"}),o.jsx("option",{value:"rest",children:"Rest"})]})]}),o.jsxs("div",{className:"edit-actions",children:[o.jsxs("button",{className:"save-btn",onClick:Gr,children:[o.jsx(Wc,{size:16}),"Save Changes"]}),o.jsxs("button",{className:"cancel-btn",onClick:Vr,children:[o.jsx(Ji,{size:16}),"Cancel"]})]})]})]}),o.jsxs("div",{className:"edit-section",children:[o.jsx("h4",{children:"Tips"}),o.jsxs("ul",{className:"edit-tips",children:[o.jsx("li",{children:"Click on any day to view and edit workouts"}),o.jsx("li",{children:"Use quick actions to add new workout or rest days"}),o.jsx("li",{children:"Changes are saved automatically to your plan"})]})]})]})]}),E&&o.jsx("div",{className:"edit-menu-overlay",onClick:()=>k(!1)}),o.jsx("div",{className:"edit-menu-popup-root","aria-hidden":!E,children:E&&W&&o.jsxs("div",{className:"workout-popup",children:[o.jsx("h3",{children:"Workout Details"}),o.jsx("label",{htmlFor:"workout-type",children:"Workout Type:"}),o.jsxs("select",{id:"workout-type",value:ge,onChange:L=>je(L.target.value),children:[o.jsx("option",{value:"strength",children:"Strength"}),o.jsx("option",{value:"cardio",children:"Cardio"}),o.jsx("option",{value:"flexibility",children:"Flexibility"}),o.jsx("option",{value:"mixed",children:"Mixed"})]}),o.jsx("label",{htmlFor:"workout-duration",children:"Duration:"}),o.jsx("input",{id:"workout-duration",type:"text",value:xe.duration,onChange:L=>Qr("duration",L.target.value)}),o.jsx("label",{htmlFor:"muscle-groups",children:"Muscle Groups:"}),o.jsx("input",{id:"muscle-groups",type:"text",placeholder:"e.g., Legs, Arms",onChange:L=>Qr("muscleGroups",L.target.value.split(",").map(q=>q.trim()))}),o.jsx("label",{htmlFor:"equipment",children:"Equipment:"}),o.jsx("input",{id:"equipment",type:"text",placeholder:"e.g., Dumbbells, Mat",onChange:L=>Qr("equipment",L.target.value.split(",").map(q=>q.trim()))}),o.jsxs("div",{className:"workout-popup-actions",children:[o.jsx("button",{className:"save-btn",onClick:Pn,children:"Generate Workout"}),o.jsx("button",{className:"cancel-btn",onClick:()=>te(!1),children:"Cancel"})]})]})})]})},np="fitbuddy_tos_accepted_v1";function Zi(){try{const i=localStorage.getItem(np);return i?JSON.parse(i):{}}catch{return{}}}function uu(i){try{localStorage.setItem(np,JSON.stringify(i))}catch{}}function Oo(i){try{const r=Zi(),n=i?String(i):"__anon__",a=r[n],l=r.__anon__;return!!(a&&(a.tos||a.acceptedAt)||l&&(l.tos||l.acceptedAt))}catch{return!1}}function Ao(i){try{const r=Zi(),n=i?String(i):"__anon__",a=r[n],l=r.__anon__;return!!(a&&a.privacy||l&&l.privacy)}catch{return!1}}function Yn(i){return Oo(i)&&Ao(i)}function sp(i){try{const r=Zi(),n=i?String(i):"__anon__",a=r[n]||{};a.tos={acceptedAt:new Date().toISOString()},r[n]=a,uu(r);try{window.dispatchEvent(new CustomEvent("fitbuddy-tos-accepted",{detail:{userId:n}}))}catch{}return!0}catch{return!1}}function ip(i){try{const r=Zi(),n=i?String(i):"__anon__",a=r[n]||{};a.privacy={acceptedAt:new Date().toISOString()},r[n]=a,uu(r);try{window.dispatchEvent(new CustomEvent("fitbuddy-privacy-accepted",{detail:{userId:n}}))}catch{}return!0}catch{return!1}}function yw(i){try{if(!i)return!1;const r=Zi(),n=r.__anon__;if(!n)return!1;const a=String(i),l=r[a]||{};let u=!1;if(n.tos&&!l.tos&&(l.tos=n.tos,u=!0),n.privacy&&!l.privacy&&(l.privacy=n.privacy,u=!0),u){if(r[a]=l,delete r.__anon__,uu(r),l.tos)try{window.dispatchEvent(new CustomEvent("fitbuddy-tos-accepted",{detail:{userId:a}}))}catch{}if(l.privacy)try{window.dispatchEvent(new CustomEvent("fitbuddy-privacy-accepted",{detail:{userId:a}}))}catch{}}return u}catch{return!1}}function pf({userData:i,children:r}){const[n,a]=j.useState(!1),[l,u]=j.useState(!1),[d,m]=j.useState(!1);if(j.useEffect(()=>{(()=>{u(Oo(i?.id)),m(Ao(i?.id)),a(!Yn(i?.id))})();const g=()=>{u(!0),a(!Yn(i?.id))},x=()=>{m(!0),a(!Yn(i?.id))};return window.addEventListener("fitbuddy-tos-accepted",g),window.addEventListener("fitbuddy-privacy-accepted",x),()=>{window.removeEventListener("fitbuddy-tos-accepted",g),window.removeEventListener("fitbuddy-privacy-accepted",x)}},[i?.id]),!n)return o.jsx(o.Fragment,{children:r});const p=()=>{try{sp(i?.id)}catch{}try{ip(i?.id)}catch{}if(i?.id)try{ut(()=>import("./apiAuth-CGYA-Ck2.js"),[]).then(y=>y.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:i.id,accepted_terms:!0,accepted_privacy:!0})})).then(y=>{fetch("/api/userdata/save",y).catch(()=>{})}).catch(()=>{})}catch{}a(!1)};return o.jsxs("div",{className:"agreement-guard-wrapper","aria-hidden":"false",children:[o.jsx("div",{className:"agreement-guard-underlay","aria-hidden":"true",children:r}),o.jsx("div",{className:"agreement-guard-backdrop",role:"dialog","aria-modal":"true","aria-label":"Terms and Privacy agreement",children:o.jsxs("div",{className:"agreement-guard-modal",role:"document",children:[o.jsx("h2",{className:"agreement-guard-title",children:"Before you continue"}),o.jsxs("p",{className:"agreement-guard-body",children:["To continue, please agree to our ",o.jsx("a",{className:l?"agreement-accepted":"",href:"/terms",target:"_blank",rel:"noopener noreferrer",children:"Terms of Service"})," and ",o.jsx("a",{className:d?"agreement-accepted":"",href:"/privacy",target:"_blank",rel:"noopener noreferrer",children:"Privacy Policy"}),". Both will open in a new tab if you want to review them."]}),o.jsx("div",{className:"agreement-guard-actions",children:o.jsx("button",{className:"btn btn-agree",onClick:p,children:"I have read and agree"})})]})})]})}const vw=({profileVersion:i,userData:r})=>{const n=qr(),a=Xs(),[l,u]=er.useState(null),[d,m]=er.useState(null);er.useEffect(()=>{const b=()=>{if(r){u(r);return}const C=localStorage.getItem("fitbuddy_user_data");if(!C){u(null);return}try{const _=JSON.parse(C);u(_?.data||null)}catch{u(null)}};b(),window.addEventListener("storage",b);const E=C=>{try{const _=C?.detail?.preview;_?.type==="avatar"&&_?.image&&(m(_.image),setTimeout(()=>m(null),4e3))}catch{}};window.addEventListener("shop-try-on",E);const k=setInterval(b,1e3);return()=>{window.removeEventListener("storage",b),window.removeEventListener("shop-try-on",E),clearInterval(k)}},[a.pathname,i,r]);const p=er.useMemo(()=>{try{const b=l||(()=>{const k=localStorage.getItem("fitbuddy_user_data");return k&&JSON.parse(k)?.data||null})();if(!b)return!1;if(b.role&&String(b.role).toLowerCase()==="admin")return!0;const E=b?.token||b?.access_token||null;if(E&&typeof E=="string")try{const k=E.split(".");if(k.length>=2){const C=JSON.parse(atob(k[1].replace(/-/g,"+").replace(/_/g,"/"))),_=C?.roles||C?.role||C?.roles?.join?.(",");if(Array.isArray(_)&&_.includes("admin")||String(_).toLowerCase()==="admin")return!0}}catch{}return String(b.username||"").toLowerCase()==="admin"}catch{return!1}},[l]),y=er.useMemo(()=>{try{return l?!!(l.id||l.sub||l.token||l.access_token||l.jwt):!1}catch{return!1}},[l]),g=()=>{switch(a.pathname){case"/":return"Welcome to FitBuddy";case"/questionnaire":return"Fitness Assessment";case"/calendar":return"Your Workout Plan";case"/profile":return"Your Profile";case"/signin":return"Sign In";case"/signup":return"Sign Up";case"/chat":return"Chat with Buddy";default:return"FitBuddy"}},x=b=>a.pathname===b;return o.jsx("header",{className:"app-header",children:o.jsxs("div",{className:"header-container",children:[o.jsxs("div",{className:"header-brand",onClick:()=>n("/?intro=0"),children:[o.jsx("div",{className:"logo",children:o.jsx(xt,{size:48})}),o.jsxs("div",{className:"brand-text",children:[o.jsx("h1",{className:"brand-title",children:"FitBuddy"}),o.jsx("p",{className:"brand-subtitle",children:"Your AI Fitness Companion"})]})]}),o.jsxs("div",{className:"page-title",children:[o.jsx("h2",{children:g()}),l&&(()=>{const b=l.username?.trim(),E=l.username?.trim(),k=b||E||"User";return o.jsxs("p",{className:"user-greeting",children:["Hello, ",k,"! "]})})()]}),o.jsxs("nav",{className:"header-nav",children:[o.jsxs("button",{className:`nav-button ${x("/")?"active":""}`,onClick:()=>n("/?intro=0"),"aria-label":"Home",children:[o.jsx(Oy,{size:20,className:"home-icon"}),o.jsx("span",{children:"Home"})]}),o.jsxs("button",{className:`nav-button ${x("/questionnaire")?"active":""}`,onClick:()=>{ur()?.completed?n("/questionnaire?edit=true"):n("/questionnaire")},"aria-label":"Questionnaire",children:[o.jsx(Js,{size:20}),o.jsx("span",{children:"Assessment"})]}),o.jsxs("button",{className:`nav-button ${x("/calendar")?"active":""}`,onClick:()=>n("/calendar"),"aria-label":"Workout Calendar",disabled:!y,children:[o.jsx(Cr,{size:20}),o.jsx("span",{children:"Calendar"})]}),o.jsxs("button",{className:`nav-button ${x("/chat")?"active":""}`,onClick:()=>{try{window.dispatchEvent(new CustomEvent("fitbuddy-open-chat"))}catch{}n("/chat")},"aria-label":"Chat with Buddy",children:[o.jsx("span",{className:"sparkles-mobile-only",children:o.jsx(zr,{size:20})}),o.jsx("span",{children:"Chat"})]}),p&&o.jsxs("button",{className:`nav-button ${x("/admin")?"active":""}`,onClick:()=>n("/admin"),"aria-label":"Admin",children:[o.jsx("span",{className:"flame-mobile-only",children:o.jsx(sf,{size:20})}),o.jsx("span",{children:"Admin"})]}),y&&o.jsx(o.Fragment,{children:o.jsxs("div",{className:"header-counters",children:[o.jsxs("div",{className:"header-counter streak",children:[o.jsx(sf,{size:20,color:"#ffb347",style:{marginRight:4}}),o.jsx("span",{className:"counter-value",children:l?.streak??0})]}),o.jsxs("div",{className:"header-counter energy",children:[o.jsx(zr,{size:20,color:"#1e90cb",style:{marginRight:4}}),o.jsx("span",{className:"counter-value",children:l?.energy??0})]})]})}),o.jsxs("div",{className:"profile-section",children:[o.jsx("img",{src:d||(l&&l.avatar&&l.avatar.trim()?l.avatar:"/images/fitbuddy_head.png"),alt:"Profile",className:"profile-image",onClick:()=>n(y?"/profile":"/signin")}),o.jsxs("div",{className:"dropdown",children:[o.jsx("button",{className:"dropdown-button",onClick:()=>n(y?"/profile":"/signin"),children:y?l.username&&l.username.trim()||"User":"Sign In"}),o.jsx("div",{className:"dropdown-content",children:y?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>n("/profile"),children:" Profile"}),o.jsx("button",{onClick:()=>n("/profile/settings"),children:"Settings"}),o.jsx("button",{onClick:()=>n("/profile/friends"),children:"Friends"}),o.jsx("button",{onClick:()=>n("/profile/achievements"),children:"Achievements"}),o.jsx("button",{onClick:()=>{(async()=>{try{localStorage.setItem("fitbuddy_no_auto_restore","1")}catch{}try{sessionStorage.setItem("fitbuddy_no_auto_restore","1")}catch{}try{const b=localStorage.getItem("fitbuddy_user_data"),E=b?JSON.parse(b):null,k=E?.id||E?.sub||null;if(k){const C=(async()=>{try{await iu(String(k))}catch{}})(),_=new Promise($=>setTimeout($,2e3));await Promise.race([C,_])}}catch{}try{Co()}catch{}try{Xi()}catch{}try{To()}catch{}window.dispatchEvent(new Event("fitbuddy-logout")),n("/signin")})()},children:"Sign Out"})]}):o.jsx("button",{onClick:()=>n("/signin"),children:"Sign In"})})]})]})]})]})})},ww=()=>o.jsx("div",{className:"loading-screen",children:o.jsxs("div",{className:"loading-container fade-in-bounce",children:[o.jsx("div",{className:"loading-dumbbell",children:o.jsx(xt,{size:40,color:"#fff"})}),o.jsx("h2",{className:"loading-title",children:"Hang tight!"}),o.jsx("p",{className:"loading-desc",children:"Your personalized plan is on its way..."}),o.jsx("p",{className:"ai-disclaimer",children:"Disclaimer: This plan is AI-generated and may not be perfect for everyone. Check important info."})]})});async function xw(i,r){try{const n={id:r.id,name:r.name,price:r.price,type:r.type,image:r.image||null,description:r.description||""},a=await fetch("/api/user/buy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:i,item:n})});if(!a.ok)return null;const l=await a.json();return l.user?(localStorage.setItem("fitbuddy_user_data",JSON.stringify({data:l.user,timestamp:Date.now()})),l.user):null}catch{return null}}async function So(i){try{const r=await fetch(`/api/user/${i}`);if(!r.ok)return null;const n=await r.json();return n.user?(localStorage.setItem("fitbuddy_user_data",JSON.stringify({data:n.user,timestamp:Date.now()})),n.user):null}catch{return null}}function _o(){const i=localStorage.getItem("fitbuddy_user_data");if(!i)return null;try{return JSON.parse(i).data||null}catch{return null}}function bw(){localStorage.removeItem("fitbuddy_user_data"),localStorage.removeItem("fitbuddyUsername")}const kw=()=>{const i=qr(),r=()=>{try{localStorage.setItem("fitbuddy_no_auto_restore","1")}catch{}try{sessionStorage.setItem("fitbuddy_no_auto_restore","1")}catch{}(async()=>{try{const n=localStorage.getItem("fitbuddy_user_data"),a=n?JSON.parse(n):null,l=a?.id||a?.sub||null;if(l){const u=(async()=>{try{await iu(String(l))}catch{}return Yi(String(l))})(),d=new Promise(m=>setTimeout(m,2e3));await Promise.race([u,d])}}catch{}try{Co()}catch{}try{Xi()}catch{}try{To()}catch{}try{bw()}catch{}window.dispatchEvent(new Event("fitbuddy-logout")),i("/signin")})()};return o.jsx("button",{className:"btn signout-btn",onClick:r,children:"Sign Out"})},Sw=({userData:i,onProfileUpdate:r})=>{const[n,a]=j.useState(i||_o()),[l,u]=j.useState(!1),[d,m]=j.useState(n?.username||""),[p,y]=j.useState(n?.avatar||"/images/fitbuddy_head.png"),[g,x]=j.useState(!1),[b,E]=j.useState(""),k=qr();if(j.useEffect(()=>{let B=!1;const Z=async()=>{const W=_o();if(!W?.id)return;const te=await So(W.id);!B&&te&&a(te)};Z();const J=setInterval(Z,1e3);return()=>{B=!0,clearInterval(J)}},[]),!n)return o.jsx("div",{className:"profile-page",children:o.jsxs("div",{className:"profile-card fade-in-bounce",children:[o.jsx("div",{className:"profile-avatar-bg",children:o.jsx("img",{src:"/images/fitbuddy_head.png",alt:"User Avatar",className:"avatar","data-testid":"profile-avatar"})}),o.jsx("h1",{className:"profile-username-gradient",children:"Guest"}),o.jsxs("div",{className:"profile-actions-row",children:[o.jsx("button",{className:"btn edit-profile",onClick:()=>k("/signin"),children:"Sign In"}),o.jsx("button",{className:"btn view-achievements",onClick:()=>k("/signup"),children:"Sign Up"})]}),o.jsx("p",{className:"not-logged-in-desc",children:"Sign in to track your workouts, earn energy, and unlock achievements!"})]})});const C=["https://api.dicebear.com/7.x/bottts/svg?seed=FitBuddy1","https://api.dicebear.com/7.x/bottts/svg?seed=DragonHead","https://api.dicebear.com/7.x/bottts/svg?seed=Duolingo"],_=["/images/fitbuddy_head.png",...C,"https://api.dicebear.com/7.x/bottts/svg?seed=FitBuddy2","https://api.dicebear.com/7.x/bottts/svg?seed=FitBuddy3","https://api.dicebear.com/7.x/bottts/svg?seed=FitBuddy4","https://api.dicebear.com/7.x/bottts/svg?seed=Pizza","https://we09532.github.io/Image_Hosting/Fishwins/Fishwin_Head.png","https://api.dicebear.com/7.x/bottts/svg?seed=Language","https://api.dicebear.com/7.x/bottts/svg?seed=Fitness","https://media1.giphy.com/media/4bjIKBOWUnVPICCzJc/source.gif"],$=()=>{m(n?.username||""),y(n?.avatar||"/images/fitbuddy_head.png"),u(!0),E("")},F=()=>{u(!1),E("")},R=async()=>{x(!0),E("");try{const B=await fetch("/api/user?action=update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n.id,username:d,avatar:p})});if(B.ok){const Z=await B.json();a(Z.user),r(Z.user),u(!1)}else{const Z={...n,username:d,avatar:p};localStorage.setItem("fitbuddy_user_data",JSON.stringify({data:Z,timestamp:Date.now()})),a(Z),r(Z),u(!1),E("Saved locally (server unavailable).")}}catch{const Z={...n,username:d,avatar:p};try{localStorage.setItem("fitbuddy_user_data",JSON.stringify({data:Z,timestamp:Date.now()}))}catch{}a(Z),r(Z),u(!1),E("Saved locally (network error).")}finally{x(!1)}};return o.jsx("div",{className:"profile-page",children:o.jsxs("div",{className:"profile-card fade-in-bounce",children:[o.jsx("div",{className:"profile-avatar-bg",children:o.jsx("img",{src:l?p:n.avatar||"/images/fitbuddy_head.png",alt:"User Avatar",className:"avatar","data-testid":"profile-avatar"})}),l?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"avatar-select-row",children:_.map(B=>{const J=!C.includes(B)||Array.isArray(n.inventory)&&n.inventory.some(W=>W.image===B);return o.jsxs("button",{className:`avatar-select-btn${p===B?" selected":""}${J?"":" locked"}`,onClick:()=>{J?y(B):k("/shop")},type:"button","aria-label":J?"Choose avatar":"Locked avatar",children:[!J&&o.jsx("span",{className:"avatar-lock-emoji",children:""}),o.jsx("img",{src:B,alt:"avatar option",className:"avatar avatar-option"})]},B)})}),o.jsx("input",{className:"edit-username-input",value:d,onChange:B=>m(B.target.value),maxLength:20,placeholder:"Username"}),b&&o.jsx("div",{className:"edit-error",children:b}),o.jsxs("div",{className:"profile-actions-row",children:[o.jsx("button",{className:"btn edit-profile",onClick:R,disabled:g,children:g?"Saving...":"Save"}),o.jsx("button",{className:"btn view-achievements",onClick:F,disabled:g,children:"Cancel"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("h1",{className:"profile-username-gradient",children:n.username}),o.jsxs("div",{className:"profile-stats-row",children:[o.jsxs("div",{className:"profile-stat",children:[o.jsx("span",{className:"profile-stat-label",children:"Workouts"}),o.jsx("span",{className:"profile-stat-value",children:n?.workouts?.length??"-"})]}),o.jsxs("div",{className:"profile-stat",children:[o.jsx("span",{className:"profile-stat-label",children:"Streak"}),o.jsx("span",{className:"profile-stat-value streak",children:n?.streak??"-"})]}),o.jsxs("div",{className:"profile-stat",children:[o.jsx("span",{className:"profile-stat-label",children:"Energy"}),o.jsx("span",{className:"profile-stat-value points",children:n?.energy??0})]})]}),o.jsxs("div",{className:"profile-actions-row",children:[o.jsx("button",{className:"btn edit-profile",onClick:$,children:"Edit Profile"}),o.jsx("button",{className:"btn view-achievements",children:"View Achievements"}),o.jsx(kw,{})]})]})]})})},_w=()=>{const i=qr(),[r,n]=j.useState(""),[a,l]=j.useState(""),[u,d]=j.useState(""),[m,p]=j.useState(!1),y=async g=>{g.preventDefault(),p(!0),d("");try{const x=String(r).trim().toLowerCase(),b=await fetch("/api/auth?action=signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:x,password:a})}),E=await b.text();let k=null;if(E)try{k=JSON.parse(E)}catch{throw new Error("Server returned invalid JSON: "+E)}if(!b.ok){const C=k&&k.message?k.message:`Sign in failed. Raw response: ${E}`;throw new Error(C)}if(k&&k.user){const C={data:k.user,token:k.token||null};lu(C,{skipBackup:!0}),await(async($=2e3)=>{const F=Date.now();for(;Date.now()-F<$;){try{const R=localStorage.getItem("fitbuddy_user_data");if(R){const B=JSON.parse(R),Z=B?.token??B?.data?.token??null;if(Z)return Z}}catch{}await new Promise(R=>setTimeout(R,150))}return null})(3e3),k.user.username&&localStorage.setItem("fitbuddyUsername",k.user.username);try{await Xn(k.user.id)}catch($){console.warn("Failed to restore user data from server:",$)}try{window.dispatchEvent(new Event("fitbuddy-login"))}catch{}try{const $="/api/userdata/load";console.log("[SignInPage] POSTing to userdata save endpoint to retrieve stored payload",$);const F=await ut(()=>import("./apiAuth-CGYA-Ck2.js"),[]).then(W=>W.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:k.user.id})})),R=async(W,te,ue=3,we=500)=>{let V=null,ce=null;for(let ie=1;ie<=ue;ie++)try{const z=await fetch(W,te),oe=await z.text();if(V=z,ce=oe,z.ok)return{res:z,text:oe};if(ie<ue&&(z.status===401||z.status===403||z.status>=500&&z.status<600)){console.warn(`[SignInPage] userdata POST attempt ${ie} failed status ${z.status}. Retrying after ${we}ms`),await new Promise(re=>setTimeout(re,we));continue}return{res:z,text:oe}}catch(z){if(V=null,ce=null,ie<ue){console.warn(`[SignInPage] userdata POST attempt ${ie} threw, retrying after ${we}ms`,z),await new Promise(oe=>setTimeout(oe,we));continue}throw z}return{res:V,text:ce}},{res:B,text:Z}=await R($,F,3,500);if(!B)throw new Error("Failed to receive a response from userdata endpoint");console.log("[SignInPage] userdata POST response status:",B.status,"ok:",B.ok),Z&&Z.length&&console.log("[SignInPage] userdata POST response snippet:",Z.slice(0,500));const J=B.headers.get("x-userdata-source");if(J&&console.log("[SignInPage] userdata source header:",J),B.ok){let W=null;try{W=Z?JSON.parse(Z):null}catch(ue){console.warn("[SignInPage] userdata POST returned invalid JSON; invoking restoreUserDataFromServer fallback",ue);try{await Xn(k.user.id)}catch(we){console.warn("[SignInPage] fallback restore failed:",we)}}const te=W?.stored??W?.payload??W;if(te)try{const ue=te.fitbuddy_assessment_data,we=te.fitbuddy_workout_plan,V=ue?.data??ue??null,ce=we?.data??we??null;V&&ou(V),ce&&bn(ce)}catch(ue){console.warn("Failed to save restored payload values:",ue)}}else{console.warn("[SignInPage] userdata POST returned non-ok status");try{await Xn(k.user.id)}catch(W){console.warn("[SignInPage] fallback restore failed:",W)}}}catch($){console.warn("Failed to fetch userdata payload via POST:",$)}i("/profile")}else throw new Error("Invalid server response. Raw response: "+E)}catch(x){d(x.message)}finally{p(!1)}};return o.jsx("div",{className:"signin-page",children:o.jsxs("form",{className:"signin-form",onSubmit:y,children:[o.jsx("h1",{children:"Sign In"}),o.jsxs("label",{children:["Email",o.jsx("input",{type:"email",value:r,onChange:g=>n(g.target.value),required:!0,autoComplete:"username"})]}),o.jsxs("label",{children:["Password",o.jsx("input",{type:"password",value:a,onChange:g=>l(g.target.value),required:!0,autoComplete:"current-password"})]}),u&&o.jsx("div",{className:"error",children:u}),o.jsx("button",{className:"btn",type:"submit",disabled:m,children:m?"Signing in...":"Sign In"}),o.jsxs("div",{className:"signup-link",children:["Don't have an account? ",o.jsx("span",{onClick:()=>i("/signup"),children:"Sign Up"})]})]})})},jw=()=>{const i=qr(),[r,n]=j.useState(""),[a,l]=j.useState(""),[u,d]=j.useState(""),[m,p]=j.useState(""),[y,g]=j.useState(""),[x,b]=j.useState(!1),E=async k=>{if(k.preventDefault(),g(""),u!==m){g("Passwords do not match");return}b(!0);try{const C=String(r).trim().toLowerCase(),_=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:C,username:a,password:u})}),$=await _.text();let F=null;if($)try{F=JSON.parse($)}catch{throw new Error("Server returned invalid JSON: "+$)}if(!_.ok){let R="Sign up failed.";throw F&&F.message?R=F.message:$?R=`Sign up failed. Raw response: ${$}`:R="Sign up failed. No response from server. Is the server running?",new Error(R)}i("/signin")}catch(C){g(C.message)}finally{b(!1)}};return o.jsx("div",{className:"signup-page",children:o.jsxs("form",{className:"signup-form",onSubmit:E,children:[o.jsx("h1",{children:"Sign Up"}),o.jsxs("label",{children:["Email",o.jsx("input",{type:"email",value:r,onChange:k=>n(k.target.value),required:!0})]}),o.jsxs("label",{children:["Username",o.jsx("input",{type:"text",value:a,onChange:k=>l(k.target.value),required:!0})]}),o.jsxs("label",{children:["Password",o.jsx("input",{type:"password",value:u,onChange:k=>d(k.target.value),required:!0,autoComplete:"new-password"})]}),o.jsxs("label",{children:["Confirm Password",o.jsx("input",{type:"password",value:m,onChange:k=>p(k.target.value),required:!0,autoComplete:"new-password"})]}),y&&o.jsx("div",{className:"error",children:y}),o.jsx("button",{className:"btn",type:"submit",disabled:x,children:x?"Signing up...":"Sign Up"}),o.jsxs("div",{className:"signin-link",children:["Already have an account? ",o.jsx("span",{onClick:()=>i("/signin"),children:"Sign In"})]})]})})},du=()=>o.jsx("div",{className:"notfound-container",children:o.jsxs("div",{className:"notfound-content fade-in-bounce",children:[o.jsx("div",{className:"notfound-icon-bg",children:o.jsx(xt,{size:48,color:"#fff"})}),o.jsx("h1",{className:"notfound-title",children:"404"}),o.jsx("h2",{className:"notfound-message",children:"Page Not Found"}),o.jsx("p",{className:"notfound-desc",children:"Oops! The page you are looking for does not exist."}),o.jsx("a",{className:"notfound-home-btn",href:"/?intro=0",children:"Go Home"})]})}),Nw=[{id:"avatar1",name:"Bot Buddy",image:"https://api.dicebear.com/7.x/bottts/svg?seed=FitBuddy1",price:100,type:"avatar",description:"A friendly robot avatar."},{id:"avatar2",name:"Dragon Head",image:"https://api.dicebear.com/7.x/bottts/svg?seed=DragonHead",price:200,type:"avatar",description:"Unleash your inner dragon!"},{id:"avatar3",name:"Duolingo Owl",image:"https://api.dicebear.com/7.x/bottts/svg?seed=Duolingo",price:250,type:"avatar",description:"Inspired by the language learning legend."},{id:"avatar4",name:"Neo Cat",image:"https://api.dicebear.com/7.x/croodles/svg?seed=NeoCat",price:120,type:"avatar",description:"A sleek cyber cat."},{id:"avatar5",name:"Mountain Goat",image:"https://api.dicebear.com/7.x/bottts/svg?seed=Goat",price:140,type:"avatar",description:"Sturdy and sure-footed."},{id:"avatar6",name:"Galaxy Fox",image:"https://api.dicebear.com/7.x/bottts/svg?seed=GalaxyFox",price:220,type:"avatar",description:"Out-of-this-world style."},{id:"avatar7",name:"Pixel Pup",image:"https://api.dicebear.com/7.x/bottts/svg?seed=PixelPup",price:80,type:"avatar",description:"Cute pixel-styled puppy."},{id:"avatar8",name:"Samurai",image:"https://api.dicebear.com/7.x/bottts/svg?seed=Samurai",price:300,type:"avatar",description:"Honor and style."},{id:"avatar9",name:"Astronaut",image:"https://api.dicebear.com/7.x/bottts/svg?seed=Astronaut",price:260,type:"avatar",description:"Reach for the stars."},{id:"avatar10",name:"Vintage Robot",image:"https://api.dicebear.com/7.x/bottts/svg?seed=VintageBot",price:110,type:"avatar",description:"Retro charm."},{id:"avatar11",name:"Neon Ninja",image:"https://api.dicebear.com/7.x/bottts/svg?seed=NeonNinja",price:210,type:"avatar",description:"Stealthy and bright."},{id:"avatar12",name:"Forest Sprite",image:"https://api.dicebear.com/7.x/bottts/svg?seed=ForestSprite",price:130,type:"avatar",description:"Whimsical woodland friend."}],Ew=[{id:"spinpfp",name:"Spinning Profile Picture",icon:o.jsx($i,{size:32,color:"#1e90cb"}),price:300,type:"powerup",description:"Make your profile picture spin for 7 days!"},{id:"sparkle",name:"Sparkle Effect",icon:o.jsx(zr,{size:32,color:"#ffb347"}),price:150,type:"powerup",description:"Add a sparkle effect to your avatar."},{id:"smile",name:"Smile Badge",icon:o.jsx(go,{size:32,color:"#1ecb7b"}),price:80,type:"powerup",description:"Show off your positivity!"},{id:"glow",name:"Glow Outline",icon:o.jsx(zr,{size:32,color:"#1ecb7b"}),price:140,type:"powerup",description:"Add a soft glow behind your avatar."},{id:"confetti",name:"Confetti Burst",icon:o.jsx(zr,{size:32,color:"#ffb347"}),price:220,type:"powerup",description:"Celebrate finishes with confetti."},{id:"badge-pro",name:"Pro Badge",icon:o.jsx(go,{size:32,color:"#1ecb7b"}),price:190,type:"powerup",description:"Show you are a FitBuddy Pro."},{id:"trail",name:"Movement Trail",icon:o.jsx($i,{size:32,color:"#1e90cb"}),price:170,type:"powerup",description:"Leave a subtle trail when you move."},{id:"animated-frames",name:"Animated Frames",icon:o.jsx(zr,{size:32,color:"#ffb347"}),price:250,type:"powerup",description:"Frame your avatar with animated borders."},{id:"voice-chime",name:"Voice Chime",icon:o.jsx(go,{size:32,color:"#1ecb7b"}),price:120,type:"powerup",description:"Play a chime when you start workouts."},{id:"seasonal-halo",name:"Seasonal Halo",icon:o.jsx(zr,{size:32,color:"#1ecb7b"}),price:160,type:"powerup",description:"A seasonal halo that changes with events."},{id:"vfx",name:"VFX Pack",icon:o.jsx(zr,{size:32,color:"#ffb347"}),price:320,type:"powerup",description:"A bundle of effects for your avatar."},{id:"status-glow",name:"Status Glow",icon:o.jsx($i,{size:32,color:"#1e90cb"}),price:90,type:"powerup",description:"Show a small glow if you are active."}],Cw=({user:i,onPurchase:r})=>{const[n,a]=j.useState("avatars"),[l,u]=j.useState(null),[d,m]=j.useState(""),[p,y]=j.useState("popular"),[g,x]=j.useState(null),b=j.useRef(null),E=j.useRef(null),k=j.useRef(null),C=j.useRef(void 0),[_,$]=j.useState(!1);j.useEffect(()=>{if(!i?.id)return;const W=async()=>{await So(i.id)&&window.dispatchEvent(new Event("storage"))};return b.current=setInterval(W,7e3),()=>{b.current&&clearInterval(b.current)}},[i?.id]),j.useEffect(()=>{const W=E.current,te=k.current;if(!W||!te)return;const ue=W.querySelector(`button[data-tab="${n}"]`);if(!ue)return;const we=ue.getBoundingClientRect(),V=W.getBoundingClientRect(),ce=we.left-V.left+W.scrollLeft;te.style.width=`${we.width}px`,te.style.transform=`translateX(${ce}px)`},[n]),j.useEffect(()=>{const W=E.current;if(!W)return;const te=ue=>{if(!(ue.key==="ArrowLeft"||ue.key==="ArrowRight"))return;ue.preventDefault();const we=["avatars","powerups"],V=we.indexOf(n);let ce=V;ue.key==="ArrowLeft"&&(ce=Math.max(0,V-1)),ue.key==="ArrowRight"&&(ce=Math.min(we.length-1,V+1)),we[ce]&&we[ce]!==n&&a(we[ce])};return W.addEventListener("keydown",te),()=>W.removeEventListener("keydown",te)},[n]),j.useEffect(()=>{const W=C.current??i?.energy??0,te=i?.energy??0;if(te>W){$(!0);const ue=setTimeout(()=>$(!1),900);return()=>clearTimeout(ue)}C.current=te},[i?.energy]);const F=Math.min(100,Math.round((i?.energy||0)/(i?.maxEnergy||500)*100)),B=`fill--${Math.round(F/5)*5}`,Z=async W=>{if(i.energy<W.price){alert("Not enough energy!");return}u(W.id);const te=await xw(i.id,W);u(null),te?(r(W),window.dispatchEvent(new Event("storage"))):alert("Purchase failed.")},J=W=>{const te=d.trim().toLowerCase();let ue=W.filter(we=>!te||we.name.toLowerCase().includes(te)||(we.description||"").toLowerCase().includes(te));return p==="price-asc"&&(ue=ue.sort((we,V)=>we.price-V.price)),p==="price-desc"&&(ue=ue.sort((we,V)=>V.price-we.price)),ue};return o.jsxs("div",{className:"shop-page fade-in-bounce",children:[o.jsxs("header",{className:"shop-header",children:[o.jsx(xt,{size:32,className:"shop-logo"}),o.jsx("h1",{className:"shop-title gradient-text",children:"FitBuddy Shop"}),o.jsx("div",{className:"shop-energy",children:o.jsxs("div",{className:`energy-pill ${_?"pulse":""}`,"aria-live":"polite",children:[o.jsxs("span",{className:"energy-value",children:[" ",i.energy]}),o.jsx("div",{className:"energy-meter","aria-hidden":!0,children:o.jsx("div",{className:`fill ${B}`})})]})})]}),o.jsxs("div",{className:"shop-topbar",children:[o.jsxs("div",{className:"shop-tabs",ref:E,role:"tablist","aria-label":"Shop categories",children:[o.jsx("div",{className:"tab-indicator",ref:k,"aria-hidden":"true"}),o.jsx("button",{"data-tab":"avatars",role:"tab","aria-pressed":n==="avatars",className:n==="avatars"?"active":"",onClick:()=>a("avatars"),children:"Avatars"}),o.jsx("button",{"data-tab":"powerups",role:"tab","aria-pressed":n==="powerups",className:n==="powerups"?"active":"",onClick:()=>a("powerups"),children:"Powerups"})]}),o.jsxs("div",{className:"shop-controls",children:[o.jsxs("div",{className:"search-wrap",role:"search",children:[o.jsx(Ry,{size:18,className:"icon-muted"}),o.jsx("input",{"aria-label":"Search shop items",placeholder:"Search items",value:d,onChange:W=>m(W.target.value)})]}),o.jsxs("div",{className:"sort-wrap",children:[o.jsx(Py,{size:16,className:"icon-muted"}),o.jsxs("select",{"aria-label":"Sort items",value:p,onChange:W=>y(W.target.value),children:[o.jsx("option",{value:"popular",children:"Recommended"}),o.jsx("option",{value:"price-asc",children:"Price: Low to High"}),o.jsx("option",{value:"price-desc",children:"Price: High to Low"})]})]})]})]}),o.jsxs("div",{className:"shop-featured",children:[o.jsxs("div",{className:"featured-left",children:[o.jsx(xt,{size:28}),o.jsxs("div",{children:[o.jsx("div",{className:"featured-title",children:"Limited-time: Double Energy Sundays"}),o.jsx("div",{className:"featured-desc",children:"Buy selected powerups and receive double energy back for your first workout."})]})]}),o.jsx("button",{className:"featured-cta",children:"Learn More"})]}),o.jsxs("div",{className:"shop-items-grid",children:[n==="avatars"&&J(Nw).map(W=>{const te=Array.isArray(i.inventory)&&i.inventory.some(ue=>ue.id===W.id);return o.jsxs("div",{className:"shop-card",onClick:()=>x(W),children:[o.jsx("div",{className:"shop-card-top",children:o.jsx("img",{src:W.image,alt:W.name,className:"shop-avatar-img"})}),o.jsxs("div",{className:"shop-card-body",children:[o.jsxs("h2",{className:"shop-item-title",children:[W.name," ",te&&o.jsx("span",{className:"owned-badge",children:"Owned"})]}),o.jsx("p",{className:"shop-item-desc",children:W.description}),o.jsxs("div",{className:"shop-card-footer",children:[o.jsxs("span",{className:"price-badge",children:[" ",W.price]}),o.jsx("button",{className:"shop-buy-btn",disabled:te||i.energy<W.price||l===W.id,onClick:ue=>{ue.stopPropagation(),Z(W)},children:te?"Owned":l===W.id?"Buying...":o.jsxs(o.Fragment,{children:[o.jsx(of,{size:16})," Buy"]})})]})]})]},W.id)}),n==="powerups"&&J(Ew).map(W=>o.jsxs("div",{className:"shop-card",onClick:()=>x(W),children:[o.jsx("div",{className:"shop-card-top",children:o.jsx("div",{className:"shop-powerup-icon",children:W.icon})}),o.jsxs("div",{className:"shop-card-body",children:[o.jsx("h2",{className:"shop-item-title",children:W.name}),o.jsx("p",{className:"shop-item-desc",children:W.description}),o.jsxs("div",{className:"shop-card-footer",children:[o.jsxs("span",{className:"price-badge",children:[" ",W.price]}),o.jsx("button",{className:"shop-buy-btn",disabled:i.energy<W.price||l===W.id,onClick:te=>{te.stopPropagation(),Z(W)},children:l===W.id?"Buying...":o.jsxs(o.Fragment,{children:[o.jsx(of,{size:16})," Buy"]})})]})]})]},W.id))]}),g&&o.jsx("div",{className:"shop-preview",onClick:()=>x(null),children:o.jsxs("div",{className:"preview-card",onClick:W=>W.stopPropagation(),children:[o.jsx("button",{className:"preview-close",onClick:()=>x(null),children:""}),o.jsxs("div",{className:"preview-body",children:[o.jsxs("div",{className:"preview-demo",children:[g.type==="avatar"&&g.image&&o.jsx("img",{src:g.image,alt:g.name,className:"preview-img"}),g.type==="powerup"&&o.jsxs("div",{className:"powerup-demo",children:[g.id==="spinpfp"&&o.jsx("div",{className:"preview-demo-box spin-anim",children:""}),g.id==="sparkle"&&o.jsxs("div",{className:"preview-demo-box dots-anim",children:[o.jsx("span",{}),o.jsx("span",{}),o.jsx("span",{})]}),g.id==="confetti"&&o.jsx("div",{className:"preview-demo-box confetti-anim",children:""}),g.id==="glow"&&o.jsx("div",{className:"preview-demo-box glow-anim",children:""}),g.id==="trail"&&o.jsx("div",{className:"preview-demo-box trail-anim",children:""}),g.id==="animated-frames"&&o.jsx("div",{className:"preview-demo-box frames-anim",children:""}),g.id==="voice-chime"&&o.jsx("div",{className:"preview-demo-box chime-anim",children:""}),g.id==="vfx"&&o.jsx("div",{className:"preview-demo-box vfx-anim",children:""}),g.id==="status-glow"&&o.jsx("div",{className:"preview-demo-box statusglow-anim",children:""}),!["spinpfp","sparkle","confetti","glow","trail","animated-frames","voice-chime","vfx","status-glow"].includes(g.id)&&o.jsx("div",{className:"preview-demo-box",children:"Preview"})]})]}),o.jsx("h3",{children:g.name}),o.jsx("p",{children:g.description}),o.jsxs("div",{className:"preview-actions",children:[o.jsxs("span",{className:"price-badge",children:[" ",g.price]}),o.jsxs("div",{className:"preview-actions-row",children:[o.jsx("button",{className:"shop-buy-btn",onClick:()=>{Z(g),x(null)},children:"Buy"}),o.jsx("button",{className:"shop-buy-btn",onClick:()=>{window.dispatchEvent(new CustomEvent("shop-try-on",{detail:{preview:g}}))},children:"Try On"})]})]})]})]})})]})},Tw=({userData:i})=>{const[r,n]=j.useState([{role:"assistant",text:"Hi! I am Buddy  your AI Fitness assistant. I can answer questions about your workouts, goals, and progress."}]),[a,l]=j.useState(""),[u,d]=j.useState(!1),m=j.useRef(null),p=j.useRef(!1);j.useEffect(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[r,u]),j.useEffect(()=>{(()=>{try{const _=i?.id||"anon",$=localStorage.getItem(`fitbuddy_chat_${_}`);if(!$)return;const F=JSON.parse($);Array.isArray(F)&&F.length&&n(F)}catch{}})(),(async()=>{try{p.current=!0;const _=i?.id;if(!_)return;await(await ut(()=>Promise.resolve().then(()=>Vs),void 0)).restoreUserDataFromServer(String(_));const F=localStorage.getItem(`fitbuddy_chat_${_}`);if(p.current=!1,!F)return;const R=JSON.parse(F);Array.isArray(R)&&R.length&&n(R)}catch{p.current=!1}})()},[i?.id]),j.useEffect(()=>{const k=async()=>{try{p.current=!0;const _=i?.id;if(!_)return;await(await ut(()=>Promise.resolve().then(()=>Vs),void 0)).restoreUserDataFromServer(String(_));const F=localStorage.getItem(`fitbuddy_chat_${_}`);if(p.current=!1,!F)return;const R=JSON.parse(F);Array.isArray(R)&&R.length&&n(R)}catch{}};window.addEventListener("fitbuddy-login",k);const C=async()=>{try{p.current=!0;const _=i?.id;if(!_)return;await(await ut(()=>Promise.resolve().then(()=>Vs),void 0)).restoreUserDataFromServer(String(_));const F=localStorage.getItem(`fitbuddy_chat_${_}`);if(p.current=!1,!F)return;const R=JSON.parse(F);Array.isArray(R)&&R.length&&n(R)}catch{}};return window.addEventListener("fitbuddy-open-chat",C),()=>window.removeEventListener("fitbuddy-login",k)},[i?.id]),j.useEffect(()=>{const k=C=>{try{if(!C.key)return;const $=`fitbuddy_chat_${i?.id||"anon"}`;if(C.key===$){if(!C.newValue){n([{role:"assistant",text:"Hi! I am Buddy  your AI Fitness assistant. I can answer questions about your workouts, goals, and progress."}]);return}try{const F=JSON.parse(C.newValue);Array.isArray(F)&&n(F)}catch{}}}catch{}};return window.addEventListener("storage",k),()=>window.removeEventListener("storage",k)},[i?.id]),j.useEffect(()=>{let k=null;try{k=setTimeout(()=>{try{if(p.current)return;const C=i?.id||"anon";if(r.length===1&&r[0].role==="assistant"&&r[0].text==="Hi! I am Buddy  your AI Fitness assistant. I can answer questions about your workouts, goals, and progress.")return;localStorage.setItem(`fitbuddy_chat_${C}`,JSON.stringify(r))}catch{}},400)}catch{}return()=>{k&&clearTimeout(k)}},[r,i?.id]),j.useEffect(()=>{const k=()=>{try{const C=i?.id||"anon";localStorage.removeItem(`fitbuddy_chat_${C}`),n([{role:"assistant",text:"Hi! I am Buddy  your AI fitness assistant. I can answer questions about your workouts, goals, and progress."}])}catch{}};return window.addEventListener("fitbuddy-logout",k),()=>window.removeEventListener("fitbuddy-logout",k)},[i?.id]),j.useEffect(()=>{let k;return(()=>{const _=i?.id;if((k===void 0||k==="anon")&&_&&_!=="anon")try{const $=localStorage.getItem("fitbuddy_chat_anon");if($)try{localStorage.setItem(`fitbuddy_chat_${_}`,$)}catch{}localStorage.removeItem("fitbuddy_chat_anon")}catch{}k=_??"anon"})(),()=>{}},[i?.id]);const y=k=>{if(!k)return"No user data available.";try{const C={id:k.id,username:k.username,age:k.age,goals:k.goals||k.preferences||[],fitnessLevel:k.fitnessLevel||k.fitness_level||"unknown",energy:k.energy??null,streak:k.streak??null};return JSON.stringify(C)}catch{return"User data present but could not be summarized."}},g=k=>{if(!k)return k;let C=String(k);try{for(C=C.replace(/```json[\s\S]*?```/gi,""),C=C.replace(/```[\s\S]*?```/g,"");C.includes('"__action"');){const $=C.indexOf('"__action"');if($===-1)break;const F=C.lastIndexOf("{",$);if(F===-1)break;let R=0,B=-1;for(let Z=F;Z<C.length;Z++){const J=C[Z];if(J==="{")R++;else if(J==="}"&&(R--,R===0)){B=Z;break}}if(B!==-1)C=(C.slice(0,F)+C.slice(B+1)).trim();else break}return C=C.replace(/\{[^\}]*__action[^\}]*\}/g,""),C=C.replace(/\n{3,}/g,`

`),C.trim()}catch{return k}},x=async(k,C)=>{try{const _=(k.updates||[]).map(re=>{try{if(re.path==="workoutPlan"&&typeof re.value=="string")try{re.value=JSON.parse(re.value)}catch{}}catch{}return re}),$={...k,updates:_},F=localStorage.getItem("fitbuddy_user_data"),R=F?JSON.parse(F):null,B=R?.data?.id??R?.id??i?.id;let Z=R?.data?.token??R?.token??i?.token??R?.jwt??R?.data?.jwt??R?.access_token??R?.data?.access_token;if(!Z)try{const re=localStorage.getItem("fitbuddy_user_data");if(re){const Y=JSON.parse(re);Z=Y?.token??Y?.jwt??Y?.access_token}}catch{}if(!B||B==="anon"){try{localStorage.setItem("fitbuddy_chat_anon",JSON.stringify(r))}catch{}const re=encodeURIComponent(window.location.pathname||"/chat");window.location.href=`/signin?returnTo=${re}`;return}const J={"Content-Type":"application/json"};Z&&(J.Authorization=`Bearer ${Z}`);const W=await fetch("/api/user/apply-action",{method:"POST",headers:J,body:JSON.stringify({id:B,action:$})}),te=await W.json();if(!W.ok)throw te;const{user:ue}=te,{saveUserData:we,saveWorkoutPlan:V,appendChatMessage:ce}=await ut(async()=>{const{saveUserData:re,saveWorkoutPlan:Y,appendChatMessage:H}=await Promise.resolve().then(()=>jc);return{saveUserData:re,saveWorkoutPlan:Y,appendChatMessage:H}},void 0);try{ue&&ue.workoutPlan&&V(ue.workoutPlan)}catch{}we(ue,{skipBackup:!1}),window.dispatchEvent(new Event("fitbuddy-login"));const ie=C||te.humanReply||te.applied||"Buddy applied the changes.";n(re=>[...re,{role:"assistant",text:ie}]);try{const re=i?.id||ue?.id;ce({role:"assistant",text:ie,ts:Date.now()},{userId:re})}catch{}const z=te.applied||k.summary||"Applied changes";let oe=z;try{const re=String(z).match(/^\s*Set\s+(\w+)\s+to\s+(.+)$/i);if(re){const Y=re[1],H=re[2];oe=`${Y.charAt(0).toUpperCase()+Y.slice(1)} set to ${H}`}else oe=typeof z=="string"?z:JSON.stringify(z)}catch{}n(re=>[...re,{role:"action",text:oe}]);try{const re=i?.id||ue?.id;ce({role:"assistant",text:oe,ts:Date.now()},{userId:re})}catch{}}catch(_){console.error("Failed to apply action on server:",_),n($=>[...$,{role:"assistant",text:"Failed to apply changes on the server."}])}},b=async()=>{const k=a.trim();if(!k)return;const C={role:"user",text:k};n(J=>[...J,C]),l(""),d(!0);try{const{appendChatMessage:J}=await ut(async()=>{const{appendChatMessage:te}=await Promise.resolve().then(()=>jc);return{appendChatMessage:te}},void 0),W=i?.id;J({role:"user",text:k,ts:Date.now()},{userId:W})}catch{}const _=r.concat(C).map(J=>`${J.role==="user"?"User":"Assistant"}: ${J.text}`).join(`
`),$=i?.workoutPlan?`
User workoutPlan: ${JSON.stringify(i.workoutPlan).slice(0,800)}`:"",F=`You are FitBuddy's AI assistant named Buddy. Use the following user profile to personalize answers: ${y(i)}

Conversation:
${_}

Respond fully and directly to the user's last message. Keep answers actionable and concise.`,B=["","Examples (MUST follow the JSON format exactly, but feel free to chnage the data and values):","","1) Simple numeric set (set energy to 10)","Human reply:","I've increased your energy to help with today's workout.","","JSON block:","```json","{",'  "__action": true,','  "updates": [','    { "op": "set", "path": "energy", "value": 10 }',"  ],",'  "summary": "Set energy to 10"',"}","```","","2) Change username","Human reply:","I can update your display name now.","","JSON block:","```json","{",'  "__action": true,','  "updates": [','    { "op": "set", "path": "username", "value": "fit_william" }',"  ],",'  "summary": "Change username to fit_william"',"}","```","","3) Add an item to inventory (push)","Human reply:","I'll add the SuperBand to your inventory for resistance training.","","JSON block:","```json","{",'  "__action": true,','  "updates": [',"    {",'      "op": "push",','      "path": "inventory",','      "value": {','        "id": "superband-01",','        "name": "SuperBand",','        "type": "equipment",','        "acquiredAt": "2025-09-05"',"      }","    }","  ],",'  "summary": "Add SuperBand to inventory"',"}","```","","4) Replace the full workout plan (ONLY if user explicitly requests a full replacement)","Human reply:","You asked to replace your entire workout plan. I will prepare a complete plan object  please confirm before applying.","","JSON block (skeleton example):","```json","{",'  "__action": true,','  "updates": [',"    {",'      "op": "set",','      "path": "workoutPlan",','      "value": { "id": "<id>", "name": "<name>", "startDate": "<YYYY-MM-DD>", "endDate": "<YYYY-MM-DD>", "dailyWorkouts": [ /* day objects */ ] }',"    }","  ],",'  "summary": "Replace entire workoutPlan (user-requested full replacement)"',"}","```","","Instruction: DO NOT create or emit a full workoutPlan unless the user explicitly asks for a full replacement. Prefer patch-style single-day or small updates. If the user asks for a full plan, emit a compact skeleton like above and ask for confirmation before applying.","","5) Multiple updates in one action:","Human reply:","I'll apply the three updates you requested: raise energy, add equipment, and update your display name.","","JSON block:","```json","{",'  "__action": true,','  "updates": [','    { "op": "set", "path": "energy", "value": 8 },',"    {",'      "op": "push",','      "path": "inventory",','      "value": { "id": "resmat-02", "name": "Travel Mat", "type": "equipment", "acquiredAt": "2025-09-05" }',"    },",'    { "op": "set", "path": "username", "value": "will_fit" }',"  ],",'  "summary": "Set energy to 8, add Travel Mat to inventory, change username to will_fit"',"}","```","","6) When no changes are intended:","Human reply only (no JSON block):","No changes are needed  here's a suggestion: try adding a 10-minute mobility warmup before your workouts this week.","","(Must NOT include a JSON block in this case.)","","Short checklist to follow exactly:","- Always emit human reply first.",'- If proposing changes emit exactly one fenced JSON block with the object keys: "__action", "updates", "summary".','- Use "set" to replace values and "push" to append to arrays.','- For "workoutPlan" send the full new object as the value for a "set".',"- No additional text inside or around the fenced JSON block.","","NEW EXAMPLES (Modify single days)","","7) Modify a single day's workouts (preferred when only one day needs adjustment)","Human reply:","I'll update day 3's workouts to an active recovery set  keeping the rest of your plan intact.","","JSON block:","```json","{",'  "__action": true,','  "updates": [','    { "op": "set", "path": "workoutPlan/dailyWorkouts/2/workouts", "value": [ { "name": "Foam Rolling", "description": "Release muscle tension.", "difficulty": "beginner", "duration": "15 minutes", "reps": "1x15", "muscleGroups": ["full body"], "equipment": ["Foam roller"] } ] }',"  ],",'  "summary": "Set Day 3 to active recovery workouts"',"}","```","","8) Modify a single day's metadata (type or totalTime)","Human reply:","I'll change day 3's type to 'activeRecovery' and adjust totalTime to '30 minutes'.","","JSON block:","```json","{",'  "__action": true,','  "updates": [','    { "op": "set", "path": "workoutPlan/dailyWorkouts/2/type", "value": "activeRecovery" },','    { "op": "set", "path": "workoutPlan/dailyWorkouts/2/totalTime", "value": "30 minutes" }',"  ],",'  "summary": "Update Day 3 type and totalTime"',"}","```","","9) Recommended example day (use as template for modifications)","Human reply:","Here's a recommended example day  when updating a day, keep the same object shape:","","Example day JSON:","```json","{",'    "date": "2025-09-10",','    "type": "Full Body",','    "completed": false,','    "totalTime": "30 minutes",','    "workouts": [',"        {",'            "name": "Lunges",','            "description": "",','            "difficulty": "beginner",','            "duration": "10 minutes",','            "reps": "3x10 each leg",','            "muscleGroups": ["quads","glutes","hamstrings"],','            "equipment": []',"        },","        {",'            "name": "Plank",','            "description": "",','            "difficulty": "beginner",','            "duration": "10 minutes",','            "reps": "3x30 seconds",','            "muscleGroups": ["core"],','            "equipment": []',"        },","        {",'            "name": "Overhead Press (Dumbbell)",','            "description": "",','            "difficulty": "beginner",','            "duration": "10 minutes",','            "reps": "3x10",','            "muscleGroups": ["shoulders"],','            "equipment": ["dumbbell"]',"        }","    ],",'    "alternativeWorkouts": []',"}","```","","Instruction: When modifying days, prefer the patch-style single-day updates above rather than replacing the whole `workoutPlan` unless the user explicitly asks for a full replacement."].join(`
`),Z=F+$+'\n\nWhen you propose changes to the user\'s profile or workout plan, produce both: (1) a human-readable reply, and (2) a JSON action block fenced as ```json containing {"__action":true, "updates":[...], "summary":"..."}. Only include the JSON block when you intend the site to apply changes. Close the JSON block with ```.'+B;try{const J=localStorage.getItem("fitbuddy_questionnaire_progress"),W=localStorage.getItem("fitbuddy_user_data"),te=localStorage.getItem("fitbuddy_workout_plan");let ue=null,we=null,V=null;try{ue=J?JSON.parse(J):null}catch{ue=J}try{we=W?JSON.parse(W):null}catch{we=W}try{V=te?JSON.parse(te):null}catch{V=te}const ce=await zy({prompt:Z,localStorageContext:{questionnaire:ue,userData:we,workoutPlan:V}});let ie=ce.text||"",z=null;try{let re=null;const Y=ie.match(/```json([\s\S]*?)```/i);if(Y&&Y[1])re=Y[1].trim();else{const H=ie.match(/```([\s\S]*?)```/i);H&&H[1]&&(re=H[1].trim())}if(!re){const H=Array.from(ie.match(/\{[\s\S]*?\}/g)||[]);if(H.length)re=H[H.length-1];else if(ce.raw){const de=Array.from(String(ce.raw).match(/\{[\s\S]*?\}/g)||[]);de.length&&(re=de[de.length-1])}}if(re){const H=re.replace(/^```json\s*/i,"").replace(/\s*```$/,"");z=JSON.parse(H),ie=ie.replace(re,"").replace(/```json[\s\S]*?```/i,"").trim()}else try{const de=ie.indexOf('"__action"');if(de!==-1){const N=ie.lastIndexOf("{",de);if(N!==-1){let w=0,O=-1;for(let G=N;G<ie.length;G++){const ee=ie[G];if(ee==="{")w++;else if(ee==="}"&&(w--,w===0)){O=G;break}}if(O!==-1){const G=ie.slice(N,O+1);try{z=JSON.parse(G),ie=(ie.slice(0,N)+ie.slice(O+1)).trim()}catch{}}}}}catch{}}catch{z=null}const oe=g(ie);if(z&&z.__action&&Array.isArray(z.updates))await x(z,oe);else{n(re=>[...re,{role:"assistant",text:oe}]);try{const{appendChatMessage:re}=await ut(async()=>{const{appendChatMessage:H}=await Promise.resolve().then(()=>jc);return{appendChatMessage:H}},void 0),Y=i?.id;re({role:"assistant",text:oe,ts:Date.now()},{userId:Y})}catch{}}}catch(J){console.error("Gemini chat error",J),n(W=>[...W,{role:"assistant",text:"Buddy is currently unavailable. Please try again later."}])}finally{d(!1)}},E=k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),b())};return o.jsx("div",{className:"gemini-page-root",children:o.jsx("div",{className:"gemini-page",children:o.jsxs("div",{className:"gemini-container",children:[o.jsxs("header",{className:"gemini-header",children:[o.jsx("h1",{children:"Chat with Buddy"}),o.jsx("p",{className:"gemini-sub",children:"Ask Buddy about your workouts, plan, or goals  Buddy knows your profile."})]}),o.jsxs("div",{className:"gemini-chat",ref:m,role:"log","aria-live":"polite",children:[r.map((k,C)=>{const _=k.role==="assistant",$=k.role==="user",F=(_||$)&&typeof k.text=="string"&&k.text.indexOf(`
`)===-1,R=["msg",_?"msg-assistant":k.role==="user"?"msg-user":"msg-action"];return F&&R.push("single-line"),o.jsxs("div",{className:R.join(" "),children:[_&&o.jsx("div",{className:"logo","aria-hidden":"true",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#ffffff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-dumbbell",children:[o.jsx("path",{d:"m6.5 6.5 11 11"}),o.jsx("path",{d:"m21 21-1-1"}),o.jsx("path",{d:"m3 3 1 1"}),o.jsx("path",{d:"m18 22 4-4"}),o.jsx("path",{d:"m2 6 4-4"}),o.jsx("path",{d:"m3 10 7-7"}),o.jsx("path",{d:"m14 21 7-7"})]})}),k.role==="user"&&o.jsx("div",{className:"logo user-logo","aria-hidden":!0,children:i?.avatar||i?.avatarUrl?o.jsx("img",{src:i?.avatar||i?.avatarUrl,alt:i?.username||"User"}):o.jsx("span",{className:"initials",children:(i?.username||"U").toString().trim().substring(0,2).toUpperCase()})}),o.jsx("div",{className:"msg-text",children:k.text})]},C)}),u&&o.jsxs("div",{className:"msg msg-assistant loading",children:[o.jsx("div",{className:"logo","aria-hidden":"true",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#ffffff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-dumbbell",children:[o.jsx("path",{d:"m6.5 6.5 11 11"}),o.jsx("path",{d:"m21 21-1-1"}),o.jsx("path",{d:"m3 3 1 1"}),o.jsx("path",{d:"m18 22 4-4"}),o.jsx("path",{d:"m2 6 4-4"}),o.jsx("path",{d:"m3 10 7-7"}),o.jsx("path",{d:"m14 21 7-7"})]})}),o.jsx("div",{className:"msg-text",children:"Buddy is typing..."})]})]}),o.jsxs("div",{className:"gemini-input",children:[o.jsx("input",{value:a,onChange:k=>l(k.target.value),onKeyDown:E,placeholder:"Ask Buddy about your plan or goals...","aria-label":"Ask Gemini"}),o.jsx("button",{className:"send-btn",onClick:b,disabled:u||!a.trim(),"aria-label":"Send message",children:"Send"})]})]})})})},Pw=i=>{let r;return i?r=i:typeof fetch>"u"?r=(...n)=>ut(async()=>{const{default:a}=await Promise.resolve().then(()=>Zs);return{default:a}},void 0).then(({default:a})=>a(...n)):r=fetch,(...n)=>r(...n)};class hu extends Error{constructor(r,n="FunctionsError",a){super(r),this.name=n,this.context=a}}class Ow extends hu{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class mf extends hu{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class gf extends hu{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var zc;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(zc||(zc={}));var Aw=function(i,r,n,a){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function m(g){try{y(a.next(g))}catch(x){d(x)}}function p(g){try{y(a.throw(g))}catch(x){d(x)}}function y(g){g.done?u(g.value):l(g.value).then(m,p)}y((a=a.apply(i,r||[])).next())})};class Iw{constructor(r,{headers:n={},customFetch:a,region:l=zc.Any}={}){this.url=r,this.headers=n,this.region=l,this.fetch=Pw(a)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r,n={}){var a;return Aw(this,void 0,void 0,function*(){try{const{headers:l,method:u,body:d}=n;let m={},{region:p}=n;p||(p=this.region);const y=new URL(`${this.url}/${r}`);p&&p!=="any"&&(m["x-region"]=p,y.searchParams.set("forceFunctionRegion",p));let g;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",g=d):typeof d=="string"?(m["Content-Type"]="text/plain",g=d):typeof FormData<"u"&&d instanceof FormData?g=d:(m["Content-Type"]="application/json",g=JSON.stringify(d)));const x=yield this.fetch(y.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:g}).catch(C=>{throw new Ow(C)}),b=x.headers.get("x-relay-error");if(b&&b==="true")throw new mf(x);if(!x.ok)throw new gf(x);let E=((a=x.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),k;return E==="application/json"?k=yield x.json():E==="application/octet-stream"?k=yield x.blob():E==="text/event-stream"?k=x:E==="multipart/form-data"?k=yield x.formData():k=yield x.text(),{data:k,error:null,response:x}}catch(l){return{data:null,error:l,response:l instanceof gf||l instanceof mf?l.context:void 0}}})}}var Nt={},Os={},As={},Is={},Rs={},Ds={},Rw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ks=Rw();const Dw=Ks.fetch,ap=Ks.fetch.bind(Ks),op=Ks.Headers,Lw=Ks.Request,Mw=Ks.Response,Zs=Object.freeze(Object.defineProperty({__proto__:null,Headers:op,Request:Lw,Response:Mw,default:ap,fetch:Dw},Symbol.toStringTag,{value:"Module"})),Uw=hg(Zs);var uo={},yf;function lp(){if(yf)return uo;yf=1,Object.defineProperty(uo,"__esModule",{value:!0});class i extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return uo.default=i,uo}var vf;function cp(){if(vf)return Ds;vf=1;var i=Ds&&Ds.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ds,"__esModule",{value:!0});const r=i(Uw),n=i(lp());class a{constructor(u){var d,m;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(d=u.shouldThrowOnError)!==null&&d!==void 0?d:!1,this.signal=u.signal,this.isMaybeSingle=(m=u.isMaybeSingle)!==null&&m!==void 0?m:!1,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=r.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,d){return this.headers=new Headers(this.headers),this.headers.set(u,d),this}then(u,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const m=this.fetch;let p=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async y=>{var g,x,b,E;let k=null,C=null,_=null,$=y.status,F=y.statusText;if(y.ok){if(this.method!=="HEAD"){const J=await y.text();J===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?C=J:C=JSON.parse(J))}const B=(x=this.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),Z=(b=y.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");B&&Z&&Z.length>1&&(_=parseInt(Z[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(k={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,_=null,$=406,F="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const B=await y.text();try{k=JSON.parse(B),Array.isArray(k)&&y.status===404&&(C=[],k=null,$=200,F="OK")}catch{y.status===404&&B===""?($=204,F="No Content"):k={message:B}}if(k&&this.isMaybeSingle&&(!((E=k?.details)===null||E===void 0)&&E.includes("0 rows"))&&(k=null,$=200,F="OK"),k&&this.shouldThrowOnError)throw new n.default(k)}return{error:k,data:C,count:_,status:$,statusText:F}});return this.shouldThrowOnError||(p=p.catch(y=>{var g,x,b;return{error:{message:`${(g=y?.name)!==null&&g!==void 0?g:"FetchError"}: ${y?.message}`,details:`${(x=y?.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(b=y?.code)!==null&&b!==void 0?b:""}`},data:null,count:null,status:0,statusText:""}})),p.then(u,d)}returns(){return this}overrideTypes(){return this}}return Ds.default=a,Ds}var wf;function up(){if(wf)return Rs;wf=1;var i=Rs&&Rs.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Rs,"__esModule",{value:!0});const r=i(cp());class n extends r.default{select(l){let u=!1;const d=(l??"*").split("").map(m=>/\s/.test(m)&&!u?"":(m==='"'&&(u=!u),m)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:u=!0,nullsFirst:d,foreignTable:m,referencedTable:p=m}={}){const y=p?`${p}.order`:"order",g=this.url.searchParams.get(y);return this.url.searchParams.set(y,`${g?`${g},`:""}${l}.${u?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:u,referencedTable:d=u}={}){const m=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(m,`${l}`),this}range(l,u,{foreignTable:d,referencedTable:m=d}={}){const p=typeof m>"u"?"offset":`${m}.offset`,y=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(p,`${l}`),this.url.searchParams.set(y,`${u-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:u=!1,settings:d=!1,buffers:m=!1,wal:p=!1,format:y="text"}={}){var g;const x=[l?"analyze":null,u?"verbose":null,d?"settings":null,m?"buffers":null,p?"wal":null].filter(Boolean).join("|"),b=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${y}; for="${b}"; options=${x};`),y==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return Rs.default=n,Rs}var xf;function fu(){if(xf)return Is;xf=1;var i=Is&&Is.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Is,"__esModule",{value:!0});const r=i(up());class n extends r.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}in(l,u){const d=Array.from(new Set(u)).map(m=>typeof m=="string"&&new RegExp("[,()]").test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(l,`in.(${d})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:d,type:m}={}){let p="";m==="plain"?p="pl":m==="phrase"?p="ph":m==="websearch"&&(p="w");const y=d===void 0?"":`(${d})`;return this.url.searchParams.append(l,`${p}fts${y}.${u}`),this}match(l){return Object.entries(l).forEach(([u,d])=>{this.url.searchParams.append(u,`eq.${d}`)}),this}not(l,u,d){return this.url.searchParams.append(l,`not.${u}.${d}`),this}or(l,{foreignTable:u,referencedTable:d=u}={}){const m=d?`${d}.or`:"or";return this.url.searchParams.append(m,`(${l})`),this}filter(l,u,d){return this.url.searchParams.append(l,`${u}.${d}`),this}}return Is.default=n,Is}var bf;function dp(){if(bf)return As;bf=1;var i=As&&As.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(As,"__esModule",{value:!0});const r=i(fu());class n{constructor(l,{headers:u={},schema:d,fetch:m}){this.url=l,this.headers=new Headers(u),this.schema=d,this.fetch=m}select(l,{head:u=!1,count:d}={}){const m=u?"HEAD":"GET";let p=!1;const y=(l??"*").split("").map(g=>/\s/.test(g)&&!p?"":(g==='"'&&(p=!p),g)).join("");return this.url.searchParams.set("select",y),d&&this.headers.append("Prefer",`count=${d}`),new r.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:u,defaultToNull:d=!0}={}){var m;const p="POST";if(u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const y=l.reduce((g,x)=>g.concat(Object.keys(x)),[]);if(y.length>0){const g=[...new Set(y)].map(x=>`"${x}"`);this.url.searchParams.set("columns",g.join(","))}}return new r.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(l,{onConflict:u,ignoreDuplicates:d=!1,count:m,defaultToNull:p=!0}={}){var y;const g="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),m&&this.headers.append("Prefer",`count=${m}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const x=l.reduce((b,E)=>b.concat(Object.keys(E)),[]);if(x.length>0){const b=[...new Set(x)].map(E=>`"${E}"`);this.url.searchParams.set("columns",b.join(","))}}return new r.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}update(l,{count:u}={}){var d;const m="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new r.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:l}={}){var u;const d="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new r.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return As.default=n,As}var kf;function Fw(){if(kf)return Os;kf=1;var i=Os&&Os.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Os,"__esModule",{value:!0});const r=i(dp()),n=i(fu());class a{constructor(u,{headers:d={},schema:m,fetch:p}={}){this.url=u,this.headers=new Headers(d),this.schemaName=m,this.fetch=p}from(u){const d=new URL(`${this.url}/${u}`);return new r.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new a(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,d={},{head:m=!1,get:p=!1,count:y}={}){var g;let x;const b=new URL(`${this.url}/rpc/${u}`);let E;m||p?(x=m?"HEAD":"GET",Object.entries(d).filter(([C,_])=>_!==void 0).map(([C,_])=>[C,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([C,_])=>{b.searchParams.append(C,_)})):(x="POST",E=d);const k=new Headers(this.headers);return y&&k.set("Prefer",`count=${y}`),new n.default({method:x,url:b,headers:k,schema:this.schemaName,body:E,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return Os.default=a,Os}var Sf;function Bw(){if(Sf)return Nt;Sf=1;var i=Nt&&Nt.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.PostgrestError=Nt.PostgrestBuilder=Nt.PostgrestTransformBuilder=Nt.PostgrestFilterBuilder=Nt.PostgrestQueryBuilder=Nt.PostgrestClient=void 0;const r=i(Fw());Nt.PostgrestClient=r.default;const n=i(dp());Nt.PostgrestQueryBuilder=n.default;const a=i(fu());Nt.PostgrestFilterBuilder=a.default;const l=i(up());Nt.PostgrestTransformBuilder=l.default;const u=i(cp());Nt.PostgrestBuilder=u.default;const d=i(lp());return Nt.PostgrestError=d.default,Nt.default={PostgrestClient:r.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:u.default,PostgrestError:d.default},Nt}var Ww=Bw();const $w=eu(Ww),{PostgrestClient:zw,PostgrestQueryBuilder:qx,PostgrestFilterBuilder:Hx,PostgrestTransformBuilder:Gx,PostgrestBuilder:Vx,PostgrestError:Jx}=$w;class qw{static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const a=n.node,l=parseInt(a.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let n=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(n+=`

Suggested solution: ${r.workaround}`),new Error(n)}static createWebSocket(r,n){const a=this.getWebSocketConstructor();return new a(r,n)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const Hw="2.15.5",Gw=`realtime-js/${Hw}`,Vw="1.0.0",qc=1e4,Jw=1e3,Qw=100;var zi;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(zi||(zi={}));var vt;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(vt||(vt={}));var xr;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(xr||(xr={}));var Hc;(function(i){i.websocket="websocket"})(Hc||(Hc={}));var Qn;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Qn||(Qn={}));class Kw{constructor(){this.HEADER_LENGTH=1}decode(r,n){return r.constructor===ArrayBuffer?n(this._binaryDecode(r)):n(typeof r=="string"?JSON.parse(r):{})}_binaryDecode(r){const n=new DataView(r),a=new TextDecoder;return this._decodeBroadcast(r,n,a)}_decodeBroadcast(r,n,a){const l=n.getUint8(1),u=n.getUint8(2);let d=this.HEADER_LENGTH+2;const m=a.decode(r.slice(d,d+l));d=d+l;const p=a.decode(r.slice(d,d+u));d=d+u;const y=JSON.parse(a.decode(r.slice(d,r.byteLength)));return{ref:null,topic:m,event:p,payload:y}}}class hp{constructor(r,n){this.callback=r,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var et;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(et||(et={}));const _f=(i,r,n={})=>{var a;const l=(a=n.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(r).reduce((u,d)=>(u[d]=Yw(d,i,r,l),u),{})},Yw=(i,r,n,a)=>{const l=r.find(m=>m.name===i),u=l?.type,d=n[i];return u&&!a.includes(u)?fp(u,d):Gc(d)},fp=(i,r)=>{if(i.charAt(0)==="_"){const n=i.slice(1,i.length);return t0(r,n)}switch(i){case et.bool:return Xw(r);case et.float4:case et.float8:case et.int2:case et.int4:case et.int8:case et.numeric:case et.oid:return Zw(r);case et.json:case et.jsonb:return e0(r);case et.timestamp:return r0(r);case et.abstime:case et.date:case et.daterange:case et.int4range:case et.int8range:case et.money:case et.reltime:case et.text:case et.time:case et.timestamptz:case et.timetz:case et.tsrange:case et.tstzrange:return Gc(r);default:return Gc(r)}},Gc=i=>i,Xw=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},Zw=i=>{if(typeof i=="string"){const r=parseFloat(i);if(!Number.isNaN(r))return r}return i},e0=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(r){return console.log(`JSON parse error: ${r}`),i}return i},t0=(i,r)=>{if(typeof i!="string")return i;const n=i.length-1,a=i[n];if(i[0]==="{"&&a==="}"){let u;const d=i.slice(1,n);try{u=JSON.parse("["+d+"]")}catch{u=d?d.split(","):[]}return u.map(m=>fp(r,m))}return i},r0=i=>typeof i=="string"?i.replace(" ","T"):i,pp=i=>{let r=i;return r=r.replace(/^ws/i,"http"),r=r.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),r.replace(/\/+$/,"")+"/api/broadcast"};class Ec{constructor(r,n,a={},l=qc){this.channel=r,this.event=n,this.payload=a,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,n){var a;return this._hasReceived(r)&&n((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:r,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:n}){this.recHooks.filter(a=>a.status===r).forEach(a=>a.callback(n))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var jf;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(jf||(jf={}));class qi{constructor(r,n){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},l=>{const{onJoin:u,onLeave:d,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qi.syncState(this.state,l,u,d),this.pendingDiffs.forEach(p=>{this.state=qi.syncDiff(this.state,p,u,d)}),this.pendingDiffs=[],m()}),this.channel._on(a.diff,{},l=>{const{onJoin:u,onLeave:d,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=qi.syncDiff(this.state,l,u,d),m())}),this.onJoin((l,u,d)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:u,newPresences:d})}),this.onLeave((l,u,d)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:u,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,n,a,l){const u=this.cloneDeep(r),d=this.transformState(n),m={},p={};return this.map(u,(y,g)=>{d[y]||(p[y]=g)}),this.map(d,(y,g)=>{const x=u[y];if(x){const b=g.map(_=>_.presence_ref),E=x.map(_=>_.presence_ref),k=g.filter(_=>E.indexOf(_.presence_ref)<0),C=x.filter(_=>b.indexOf(_.presence_ref)<0);k.length>0&&(m[y]=k),C.length>0&&(p[y]=C)}else m[y]=g}),this.syncDiff(u,{joins:m,leaves:p},a,l)}static syncDiff(r,n,a,l){const{joins:u,leaves:d}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return a||(a=()=>{}),l||(l=()=>{}),this.map(u,(m,p)=>{var y;const g=(y=r[m])!==null&&y!==void 0?y:[];if(r[m]=this.cloneDeep(p),g.length>0){const x=r[m].map(E=>E.presence_ref),b=g.filter(E=>x.indexOf(E.presence_ref)<0);r[m].unshift(...b)}a(m,g,p)}),this.map(d,(m,p)=>{let y=r[m];if(!y)return;const g=p.map(x=>x.presence_ref);y=y.filter(x=>g.indexOf(x.presence_ref)<0),r[m]=y,l(m,y,p),y.length===0&&delete r[m]}),r}static map(r,n){return Object.getOwnPropertyNames(r).map(a=>n(a,r[a]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((n,a)=>{const l=r[a];return"metas"in l?n[a]=l.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):n[a]=l,n},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Nf;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Nf||(Nf={}));var Hi;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Hi||(Hi={}));var $r;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})($r||($r={}));class pu{constructor(r,n={config:{}},a){this.topic=r,this.params=n,this.socket=a,this.bindings={},this.state=vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ec(this,xr.join,this.params,this.timeout),this.rejoinTimer=new hp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xr.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new qi(this),this.broadcastEndpointURL=pp(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(r,n=this.timeout){var a,l,u;if(this.socket.isConnected()||this.socket.connect(),this.state==vt.closed){const{config:{broadcast:d,presence:m,private:p}}=this.params,y=(l=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(E=>E.filter))!==null&&l!==void 0?l:[],g=!!this.bindings[Hi.PRESENCE]&&this.bindings[Hi.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,x={},b={broadcast:d,presence:Object.assign(Object.assign({},m),{enabled:g}),postgres_changes:y,private:p};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(E=>r?.($r.CHANNEL_ERROR,E)),this._onClose(()=>r?.($r.CLOSED)),this.updateJoinPayload(Object.assign({config:b},x)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:E})=>{var k;if(this.socket.setAuth(),E===void 0){r?.($r.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,_=(k=C?.length)!==null&&k!==void 0?k:0,$=[];for(let F=0;F<_;F++){const R=C[F],{filter:{event:B,schema:Z,table:J,filter:W}}=R,te=E&&E[F];if(te&&te.event===B&&te.schema===Z&&te.table===J&&te.filter===W)$.push(Object.assign(Object.assign({},R),{id:te.id}));else{this.unsubscribe(),this.state=vt.errored,r?.($r.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=$,r&&r($r.SUBSCRIBED);return}}).receive("error",E=>{this.state=vt.errored,r?.($r.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{r?.($r.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,n={}){return await this.send({type:"presence",event:"track",payload:r},n.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,n,a){return this.state===vt.joined&&r===Hi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(r,n,a)}async send(r,n={}){var a,l;if(!this._canPush()&&r.type==="broadcast"){const{event:u,payload:d}=r,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:d,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);return await((l=y.body)===null||l===void 0?void 0:l.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var d,m,p;const y=this._push(r.type,r,n.timeout||this.timeout);r.type==="broadcast"&&!(!((p=(m=(d=this.params)===null||d===void 0?void 0:d.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&u("ok"),y.receive("ok",()=>u("ok")),y.receive("error",()=>u("error")),y.receive("timeout",()=>u("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=vt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xr.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(l=>{a=new Ec(this,xr.leave,{},r),a.receive("ok",()=>{n(),l("ok")}).receive("timeout",()=>{n(),l("timed out")}).receive("error",()=>{l("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=vt.closed,this.bindings={}}async _fetchWithTimeout(r,n,a){const l=new AbortController,u=setTimeout(()=>l.abort(),a),d=await this.socket.fetch(r,Object.assign(Object.assign({},n),{signal:l.signal}));return clearTimeout(u),d}_push(r,n,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new Ec(this,r,n,a);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>Qw){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(r,n,a){return n}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,n,a){var l,u;const d=r.toLocaleLowerCase(),{close:m,error:p,leave:y,join:g}=xr;if(a&&[m,p,y,g].indexOf(d)>=0&&a!==this._joinRef())return;let b=this._onMessage(d,n,a);if(n&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(E=>{var k,C,_;return((k=E.filter)===null||k===void 0?void 0:k.event)==="*"||((_=(C=E.filter)===null||C===void 0?void 0:C.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===d}).map(E=>E.callback(b,a)):(u=this.bindings[d])===null||u===void 0||u.filter(E=>{var k,C,_,$,F,R;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in E){const B=E.id,Z=(k=E.filter)===null||k===void 0?void 0:k.event;return B&&((C=n.ids)===null||C===void 0?void 0:C.includes(B))&&(Z==="*"||Z?.toLocaleLowerCase()===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const B=(F=($=E?.filter)===null||$===void 0?void 0:$.event)===null||F===void 0?void 0:F.toLocaleLowerCase();return B==="*"||B===((R=n?.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===d}).map(E=>{if(typeof b=="object"&&"ids"in b){const k=b.data,{schema:C,table:_,commit_timestamp:$,type:F,errors:R}=k;b=Object.assign(Object.assign({},{schema:C,table:_,commit_timestamp:$,eventType:F,new:{},old:{},errors:R}),this._getPayloadRecords(k))}E.callback(b,a)})}_isClosed(){return this.state===vt.closed}_isJoined(){return this.state===vt.joined}_isJoining(){return this.state===vt.joining}_isLeaving(){return this.state===vt.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,n,a){const l=r.toLocaleLowerCase(),u={type:l,filter:n,callback:a};return this.bindings[l]?this.bindings[l].push(u):this.bindings[l]=[u],this}_off(r,n){const a=r.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(l=>{var u;return!(((u=l.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===a&&pu.isEqual(l.filter,n))})),this}static isEqual(r,n){if(Object.keys(r).length!==Object.keys(n).length)return!1;for(const a in r)if(r[a]!==n[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(xr.close,{},r)}_onError(r){this._on(xr.error,{},n=>r(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vt.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const n={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(n.new=_f(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(n.old=_f(r.columns,r.old_record)),n}}const Cc=()=>{},ho={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},n0=[1e3,2e3,5e3,1e4],s0=1e4,i0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class a0{constructor(r,n){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=qc,this.transport=null,this.heartbeatIntervalMs=ho.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Cc,this.ref=0,this.reconnectTimer=null,this.logger=Cc,this.conn=null,this.sendBuffer=[],this.serializer=new Kw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>{let u;return l?u=l:typeof fetch>"u"?u=(...d)=>ut(async()=>{const{default:m}=await Promise.resolve().then(()=>Zs);return{default:m}},void 0).then(({default:m})=>m(...d)).catch(m=>{throw new Error(`Failed to load @supabase/node-fetch: ${m.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):u=fetch,(...d)=>u(...d)},!(!((a=n?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${r}/${Hc.websocket}`,this.httpEndpoint=pp(r),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=qw.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const n=r.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Vw}))}disconnect(r,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},r?this.conn.close(r,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const n=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const r=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,n,a){this.logger(r,n,a)}connectionState(){switch(this.conn&&this.conn.readyState){case zi.connecting:return Qn.Connecting;case zi.open:return Qn.Open;case zi.closing:return Qn.Closing;default:return Qn.Closed}}isConnected(){return this.connectionState()===Qn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,n={config:{}}){const a=`realtime:${r}`,l=this.getChannels().find(u=>u.topic===a);if(l)return l;{const u=new pu(`realtime:${r}`,n,this);return this.channels.push(u),u}}push(r){const{topic:n,event:a,payload:l,ref:u}=r,d=()=>{this.encode(r,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${n} ${a} (${u})`,l),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(Jw,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ho.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let n=this.channels.find(a=>a.topic===r&&(a._isJoined()||a._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${r}"`),n.unsubscribe())}_remove(r){this.channels=this.channels.filter(n=>n.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(y){this.log("error","error in heartbeat callback",y)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:l,payload:u,ref:d}=n,m=d?`(${d})`:"",p=u.status||"";this.log("receive",`${p} ${a} ${l} ${m}`.trim(),u),this.channels.filter(y=>y._isMember(a)).forEach(y=>y._trigger(l,u,d)),this._triggerStateCallbacks("message",n)})}_clearTimer(r){var n;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(r){var n;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(xr.error))}_appendParams(r,n){if(Object.keys(n).length===0)return r;const a=r.match(/\?/)?"&":"?",l=new URLSearchParams(n);return`${r}${a}${l}`}_workerObjectUrl(r){let n;if(r)n=r;else{const a=new Blob([i0],{type:"application/javascript"});n=URL.createObjectURL(a)}return n}_setConnectionState(r,n=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(r=null){let n;r?n=r:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(a=>{const l={access_token:n,version:Gw};n&&a.updateJoinPayload(l),a.joinedOnce&&a._isJoined()&&a._push(xr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${r}`,n)})}_triggerStateCallbacks(r,n){try{this.stateChangeCallbacks[r].forEach(a=>{try{a(n)}catch(l){this.log("error",`error in ${r} callback`,l)}})}catch(a){this.log("error",`error triggering ${r} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new hp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ho.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var n,a,l,u,d,m,p,y,g;if(this.transport=(n=r?.transport)!==null&&n!==void 0?n:null,this.timeout=(a=r?.timeout)!==null&&a!==void 0?a:qc,this.heartbeatIntervalMs=(l=r?.heartbeatIntervalMs)!==null&&l!==void 0?l:ho.HEARTBEAT_INTERVAL,this.worker=(u=r?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(d=r?.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(m=r?.heartbeatCallback)!==null&&m!==void 0?m:Cc,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=r?.reconnectAfterMs)!==null&&p!==void 0?p:x=>n0[x-1]||s0,this.encode=(y=r?.encode)!==null&&y!==void 0?y:(x,b)=>b(JSON.stringify(x)),this.decode=(g=r?.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}class mu extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}}function wt(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class o0 extends mu{constructor(r,n,a){super(r),this.name="StorageApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Vc extends mu{constructor(r,n){super(r),this.name="StorageUnknownError",this.originalError=n}}var l0=function(i,r,n,a){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function m(g){try{y(a.next(g))}catch(x){d(x)}}function p(g){try{y(a.throw(g))}catch(x){d(x)}}function y(g){g.done?u(g.value):l(g.value).then(m,p)}y((a=a.apply(i,r||[])).next())})};const mp=i=>{let r;return i?r=i:typeof fetch>"u"?r=(...n)=>ut(async()=>{const{default:a}=await Promise.resolve().then(()=>Zs);return{default:a}},void 0).then(({default:a})=>a(...n)):r=fetch,(...n)=>r(...n)},c0=()=>l0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ut(()=>Promise.resolve().then(()=>Zs),void 0)).Response:Response}),Jc=i=>{if(Array.isArray(i))return i.map(n=>Jc(n));if(typeof i=="function"||i!==Object(i))return i;const r={};return Object.entries(i).forEach(([n,a])=>{const l=n.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));r[l]=Jc(a)}),r},u0=i=>{if(typeof i!="object"||i===null)return!1;const r=Object.getPrototypeOf(i);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)};var rs=function(i,r,n,a){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function m(g){try{y(a.next(g))}catch(x){d(x)}}function p(g){try{y(a.throw(g))}catch(x){d(x)}}function y(g){g.done?u(g.value):l(g.value).then(m,p)}y((a=a.apply(i,r||[])).next())})};const Tc=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),d0=(i,r,n)=>rs(void 0,void 0,void 0,function*(){const a=yield c0();i instanceof a&&!n?.noResolveJson?i.json().then(l=>{const u=i.status||500,d=l?.statusCode||u+"";r(new o0(Tc(l),u,d))}).catch(l=>{r(new Vc(Tc(l),l))}):r(new Vc(Tc(i),i))}),h0=(i,r,n,a)=>{const l={method:i,headers:r?.headers||{}};return i==="GET"||!a?l:(u0(a)?(l.headers=Object.assign({"Content-Type":"application/json"},r?.headers),l.body=JSON.stringify(a)):l.body=a,r?.duplex&&(l.duplex=r.duplex),Object.assign(Object.assign({},l),n))};function ea(i,r,n,a,l,u){return rs(this,void 0,void 0,function*(){return new Promise((d,m)=>{i(n,h0(r,a,l,u)).then(p=>{if(!p.ok)throw p;return a?.noResolveJson?p:p.json()}).then(p=>d(p)).catch(p=>d0(p,m,a))})})}function jo(i,r,n,a){return rs(this,void 0,void 0,function*(){return ea(i,"GET",r,n,a)})}function Er(i,r,n,a,l){return rs(this,void 0,void 0,function*(){return ea(i,"POST",r,a,l,n)})}function Qc(i,r,n,a,l){return rs(this,void 0,void 0,function*(){return ea(i,"PUT",r,a,l,n)})}function f0(i,r,n,a){return rs(this,void 0,void 0,function*(){return ea(i,"HEAD",r,Object.assign(Object.assign({},n),{noResolveJson:!0}),a)})}function gp(i,r,n,a,l){return rs(this,void 0,void 0,function*(){return ea(i,"DELETE",r,a,l,n)})}var Wt=function(i,r,n,a){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function m(g){try{y(a.next(g))}catch(x){d(x)}}function p(g){try{y(a.throw(g))}catch(x){d(x)}}function y(g){g.done?u(g.value):l(g.value).then(m,p)}y((a=a.apply(i,r||[])).next())})};const p0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ef={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class m0{constructor(r,n={},a,l){this.shouldThrowOnError=!1,this.url=r,this.headers=n,this.bucketId=a,this.fetch=mp(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(r,n,a,l){return Wt(this,void 0,void 0,function*(){try{let u;const d=Object.assign(Object.assign({},Ef),l);let m=Object.assign(Object.assign({},this.headers),r==="POST"&&{"x-upsert":String(d.upsert)});const p=d.metadata;typeof Blob<"u"&&a instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),p&&u.append("metadata",this.encodeMetadata(p)),u.append("",a)):typeof FormData<"u"&&a instanceof FormData?(u=a,u.append("cacheControl",d.cacheControl),p&&u.append("metadata",this.encodeMetadata(p))):(u=a,m["cache-control"]=`max-age=${d.cacheControl}`,m["content-type"]=d.contentType,p&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),l?.headers&&(m=Object.assign(Object.assign({},m),l.headers));const y=this._removeEmptyFolders(n),g=this._getFinalPath(y),x=yield(r=="PUT"?Qc:Er)(this.fetch,`${this.url}/object/${g}`,u,Object.assign({headers:m},d?.duplex?{duplex:d.duplex}:{}));return{data:{path:y,id:x.Id,fullPath:x.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(wt(u))return{data:null,error:u};throw u}})}upload(r,n,a){return Wt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",r,n,a)})}uploadToSignedUrl(r,n,a,l){return Wt(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),m=new URL(this.url+`/object/upload/sign/${d}`);m.searchParams.set("token",n);try{let p;const y=Object.assign({upsert:Ef.upsert},l),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&a instanceof Blob?(p=new FormData,p.append("cacheControl",y.cacheControl),p.append("",a)):typeof FormData<"u"&&a instanceof FormData?(p=a,p.append("cacheControl",y.cacheControl)):(p=a,g["cache-control"]=`max-age=${y.cacheControl}`,g["content-type"]=y.contentType);const x=yield Qc(this.fetch,m.toString(),p,{headers:g});return{data:{path:u,fullPath:x.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(wt(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(r,n){return Wt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(r);const l=Object.assign({},this.headers);n?.upsert&&(l["x-upsert"]="true");const u=yield Er(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:l}),d=new URL(this.url+u.url),m=d.searchParams.get("token");if(!m)throw new mu("No token returned by API");return{data:{signedUrl:d.toString(),path:r,token:m},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(wt(a))return{data:null,error:a};throw a}})}update(r,n,a){return Wt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",r,n,a)})}move(r,n,a){return Wt(this,void 0,void 0,function*(){try{return{data:yield Er(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n,destinationBucket:a?.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(wt(l))return{data:null,error:l};throw l}})}copy(r,n,a){return Wt(this,void 0,void 0,function*(){try{return{data:{path:(yield Er(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n,destinationBucket:a?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(wt(l))return{data:null,error:l};throw l}})}createSignedUrl(r,n,a){return Wt(this,void 0,void 0,function*(){try{let l=this._getFinalPath(r),u=yield Er(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:n},a?.transform?{transform:a.transform}:{}),{headers:this.headers});const d=a?.download?`&download=${a.download===!0?"":a.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${d}`)},{data:u,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(wt(l))return{data:null,error:l};throw l}})}createSignedUrls(r,n,a){return Wt(this,void 0,void 0,function*(){try{const l=yield Er(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:r},{headers:this.headers}),u=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{data:l.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${u}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(wt(l))return{data:null,error:l};throw l}})}download(r,n){return Wt(this,void 0,void 0,function*(){const l=typeof n?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(n?.transform||{}),d=u?`?${u}`:"";try{const m=this._getFinalPath(r);return{data:yield(yield jo(this.fetch,`${this.url}/${l}/${m}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(wt(m))return{data:null,error:m};throw m}})}info(r){return Wt(this,void 0,void 0,function*(){const n=this._getFinalPath(r);try{const a=yield jo(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Jc(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(wt(a))return{data:null,error:a};throw a}})}exists(r){return Wt(this,void 0,void 0,function*(){const n=this._getFinalPath(r);try{return yield f0(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(wt(a)&&a instanceof Vc){const l=a.originalError;if([400,404].includes(l?.status))return{data:!1,error:a}}throw a}})}getPublicUrl(r,n){const a=this._getFinalPath(r),l=[],u=n?.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&l.push(u);const m=typeof n?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(n?.transform||{});p!==""&&l.push(p);let y=l.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${a}${y}`)}}}remove(r){return Wt(this,void 0,void 0,function*(){try{return{data:yield gp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}list(r,n,a){return Wt(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},p0),n),{prefix:r||""});return{data:yield Er(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},a),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(wt(l))return{data:null,error:l};throw l}})}listV2(r,n){return Wt(this,void 0,void 0,function*(){try{const a=Object.assign({},r);return{data:yield Er(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(wt(a))return{data:null,error:a};throw a}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const n=[];return r.width&&n.push(`width=${r.width}`),r.height&&n.push(`height=${r.height}`),r.resize&&n.push(`resize=${r.resize}`),r.format&&n.push(`format=${r.format}`),r.quality&&n.push(`quality=${r.quality}`),n.join("&")}}const g0="2.12.1",y0={"X-Client-Info":`storage-js/${g0}`};var Ls=function(i,r,n,a){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function m(g){try{y(a.next(g))}catch(x){d(x)}}function p(g){try{y(a.throw(g))}catch(x){d(x)}}function y(g){g.done?u(g.value):l(g.value).then(m,p)}y((a=a.apply(i,r||[])).next())})};class v0{constructor(r,n={},a,l){this.shouldThrowOnError=!1;const u=new URL(r);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href,this.headers=Object.assign(Object.assign({},y0),n),this.fetch=mp(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ls(this,void 0,void 0,function*(){try{return{data:yield jo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}getBucket(r){return Ls(this,void 0,void 0,function*(){try{return{data:yield jo(this.fetch,`${this.url}/bucket/${r}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}createBucket(r,n={public:!1}){return Ls(this,void 0,void 0,function*(){try{return{data:yield Er(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(wt(a))return{data:null,error:a};throw a}})}updateBucket(r,n){return Ls(this,void 0,void 0,function*(){try{return{data:yield Qc(this.fetch,`${this.url}/bucket/${r}`,{id:r,name:r,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(wt(a))return{data:null,error:a};throw a}})}emptyBucket(r){return Ls(this,void 0,void 0,function*(){try{return{data:yield Er(this.fetch,`${this.url}/bucket/${r}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}deleteBucket(r){return Ls(this,void 0,void 0,function*(){try{return{data:yield gp(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}}class w0 extends v0{constructor(r,n={},a,l){super(r,n,a,l)}from(r){return new m0(this.url,this.headers,r,this.fetch)}}const x0="2.57.4";let Wi="";typeof Deno<"u"?Wi="deno":typeof document<"u"?Wi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Wi="react-native":Wi="node";const b0={"X-Client-Info":`supabase-js-${Wi}/${x0}`},k0={headers:b0},S0={schema:"public"},_0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},j0={};var N0=function(i,r,n,a){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function m(g){try{y(a.next(g))}catch(x){d(x)}}function p(g){try{y(a.throw(g))}catch(x){d(x)}}function y(g){g.done?u(g.value):l(g.value).then(m,p)}y((a=a.apply(i,r||[])).next())})};const E0=i=>{let r;return i?r=i:typeof fetch>"u"?r=ap:r=fetch,(...n)=>r(...n)},C0=()=>typeof Headers>"u"?op:Headers,T0=(i,r,n)=>{const a=E0(n),l=C0();return(u,d)=>N0(void 0,void 0,void 0,function*(){var m;const p=(m=yield r())!==null&&m!==void 0?m:i;let y=new l(d?.headers);return y.has("apikey")||y.set("apikey",i),y.has("Authorization")||y.set("Authorization",`Bearer ${p}`),a(u,Object.assign(Object.assign({},d),{headers:y}))})};var P0=function(i,r,n,a){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function m(g){try{y(a.next(g))}catch(x){d(x)}}function p(g){try{y(a.throw(g))}catch(x){d(x)}}function y(g){g.done?u(g.value):l(g.value).then(m,p)}y((a=a.apply(i,r||[])).next())})};function O0(i){return i.endsWith("/")?i:i+"/"}function A0(i,r){var n,a;const{db:l,auth:u,realtime:d,global:m}=i,{db:p,auth:y,realtime:g,global:x}=r,b={db:Object.assign(Object.assign({},p),l),auth:Object.assign(Object.assign({},y),u),realtime:Object.assign(Object.assign({},g),d),storage:{},global:Object.assign(Object.assign(Object.assign({},x),m),{headers:Object.assign(Object.assign({},(n=x?.headers)!==null&&n!==void 0?n:{}),(a=m?.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>P0(this,void 0,void 0,function*(){return""})};return i.accessToken?b.accessToken=i.accessToken:delete b.accessToken,b}function I0(i){const r=i?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(O0(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const yp="2.71.1",$s=30*1e3,Kc=3,Pc=Kc*$s,R0="http://localhost:9999",D0="supabase.auth.token",L0={"X-Client-Info":`gotrue-js/${yp}`},Yc="X-Supabase-Api-Version",vp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},M0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,U0=600*1e3;class gu extends Error{constructor(r,n,a){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=a}}function Le(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class F0 extends gu{constructor(r,n,a){super(r,n,a),this.name="AuthApiError",this.status=n,this.code=a}}function B0(i){return Le(i)&&i.name==="AuthApiError"}class wp extends gu{constructor(r,n){super(r),this.name="AuthUnknownError",this.originalError=n}}class En extends gu{constructor(r,n,a,l){super(r,a,l),this.name=n,this.status=a}}class xn extends En{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function W0(i){return Le(i)&&i.name==="AuthSessionMissingError"}class fo extends En{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class po extends En{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class mo extends En{constructor(r,n=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $0(i){return Le(i)&&i.name==="AuthImplicitGrantRedirectError"}class Cf extends En{constructor(r,n=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Xc extends En{constructor(r,n){super(r,"AuthRetryableFetchError",n,void 0)}}function Oc(i){return Le(i)&&i.name==="AuthRetryableFetchError"}class Tf extends En{constructor(r,n,a){super(r,"AuthWeakPasswordError",n,"weak_password"),this.reasons=a}}class Zc extends En{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const No="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Pf=` 	
\r=`.split(""),z0=(()=>{const i=new Array(128);for(let r=0;r<i.length;r+=1)i[r]=-1;for(let r=0;r<Pf.length;r+=1)i[Pf[r].charCodeAt(0)]=-2;for(let r=0;r<No.length;r+=1)i[No[r].charCodeAt(0)]=r;return i})();function Of(i,r,n){if(i!==null)for(r.queue=r.queue<<8|i,r.queuedBits+=8;r.queuedBits>=6;){const a=r.queue>>r.queuedBits-6&63;n(No[a]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const a=r.queue>>r.queuedBits-6&63;n(No[a]),r.queuedBits-=6}}function xp(i,r,n){const a=z0[i];if(a>-1)for(r.queue=r.queue<<6|a,r.queuedBits+=6;r.queuedBits>=8;)n(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Af(i){const r=[],n=d=>{r.push(String.fromCodePoint(d))},a={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},u=d=>{G0(d,a,n)};for(let d=0;d<i.length;d+=1)xp(i.charCodeAt(d),l,u);return r.join("")}function q0(i,r){if(i<=127){r(i);return}else if(i<=2047){r(192|i>>6),r(128|i&63);return}else if(i<=65535){r(224|i>>12),r(128|i>>6&63),r(128|i&63);return}else if(i<=1114111){r(240|i>>18),r(128|i>>12&63),r(128|i>>6&63),r(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function H0(i,r){for(let n=0;n<i.length;n+=1){let a=i.charCodeAt(n);if(a>55295&&a<=56319){const l=(a-55296)*1024&65535;a=(i.charCodeAt(n+1)-56320&65535|l)+65536,n+=1}q0(a,r)}}function G0(i,r,n){if(r.utf8seq===0){if(i<=127){n(i);return}for(let a=1;a<6;a+=1)if((i>>7-a&1)===0){r.utf8seq=a;break}if(r.utf8seq===2)r.codepoint=i&31;else if(r.utf8seq===3)r.codepoint=i&15;else if(r.utf8seq===4)r.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|i&63,r.utf8seq-=1,r.utf8seq===0&&n(r.codepoint)}}function V0(i){const r=[],n={queue:0,queuedBits:0},a=l=>{r.push(l)};for(let l=0;l<i.length;l+=1)xp(i.charCodeAt(l),n,a);return new Uint8Array(r)}function J0(i){const r=[];return H0(i,n=>r.push(n)),new Uint8Array(r)}function Q0(i){const r=[],n={queue:0,queuedBits:0},a=l=>{r.push(l)};return i.forEach(l=>Of(l,n,a)),Of(null,n,a),r.join("")}function K0(i){return Math.round(Date.now()/1e3)+i}function Y0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const r=Math.random()*16|0;return(i=="x"?r:r&3|8).toString(16)})}const wr=()=>typeof window<"u"&&typeof document<"u",Hn={tested:!1,writable:!1},bp=()=>{if(!wr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Hn.tested)return Hn.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Hn.tested=!0,Hn.writable=!0}catch{Hn.tested=!0,Hn.writable=!1}return Hn.writable};function X0(i){const r={},n=new URL(i);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((l,u)=>{r[u]=l})}catch{}return n.searchParams.forEach((a,l)=>{r[l]=a}),r}const kp=i=>{let r;return i?r=i:typeof fetch>"u"?r=(...n)=>ut(async()=>{const{default:a}=await Promise.resolve().then(()=>Zs);return{default:a}},void 0).then(({default:a})=>a(...n)):r=fetch,(...n)=>r(...n)},Z0=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",zs=async(i,r,n)=>{await i.setItem(r,JSON.stringify(n))},Gn=async(i,r)=>{const n=await i.getItem(r);if(!n)return null;try{return JSON.parse(n)}catch{return n}},wn=async(i,r)=>{await i.removeItem(r)};class Io{constructor(){this.promise=new Io.promiseConstructor((r,n)=>{this.resolve=r,this.reject=n})}}Io.promiseConstructor=Promise;function Ac(i){const r=i.split(".");if(r.length!==3)throw new Zc("Invalid JWT structure");for(let a=0;a<r.length;a++)if(!M0.test(r[a]))throw new Zc("JWT not in base64url format");return{header:JSON.parse(Af(r[0])),payload:JSON.parse(Af(r[1])),signature:V0(r[2]),raw:{header:r[0],payload:r[1]}}}async function ex(i){return await new Promise(r=>{setTimeout(()=>r(null),i)})}function tx(i,r){return new Promise((a,l)=>{(async()=>{for(let u=0;u<1/0;u++)try{const d=await i(u);if(!r(u,null,d)){a(d);return}}catch(d){if(!r(u,d)){l(d);return}}})()})}function rx(i){return("0"+i.toString(16)).substr(-2)}function nx(){const r=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=n.length;let l="";for(let u=0;u<56;u++)l+=n.charAt(Math.floor(Math.random()*a));return l}return crypto.getRandomValues(r),Array.from(r,rx).join("")}async function sx(i){const n=new TextEncoder().encode(i),a=await crypto.subtle.digest("SHA-256",n),l=new Uint8Array(a);return Array.from(l).map(u=>String.fromCharCode(u)).join("")}async function ix(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const n=await sx(i);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ms(i,r,n=!1){const a=nx();let l=a;n&&(l+="/PASSWORD_RECOVERY"),await zs(i,`${r}-code-verifier`,l);const u=await ix(a);return[u,a===u?"plain":"s256"]}const ax=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ox(i){const r=i.headers.get(Yc);if(!r||!r.match(ax))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function lx(i){if(!i)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(i<=r)throw new Error("JWT has expired")}function cx(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ux=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Us(i){if(!ux.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ic(){const i={};return new Proxy(i,{get:(r,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function If(i){return JSON.parse(JSON.stringify(i))}var dx=function(i,r){var n={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&r.indexOf(a)<0&&(n[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(i);l<a.length;l++)r.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(i,a[l])&&(n[a[l]]=i[a[l]]);return n};const Jn=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),hx=[502,503,504];async function Rf(i){var r;if(!Z0(i))throw new Xc(Jn(i),0);if(hx.includes(i.status))throw new Xc(Jn(i),i.status);let n;try{n=await i.json()}catch(u){throw new wp(Jn(u),u)}let a;const l=ox(i);if(l&&l.getTime()>=vp["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?a=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(a=n.error_code),a){if(a==="weak_password")throw new Tf(Jn(n),i.status,((r=n.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(a==="session_not_found")throw new xn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((u,d)=>u&&typeof d=="string",!0))throw new Tf(Jn(n),i.status,n.weak_password.reasons);throw new F0(Jn(n),i.status||500,a)}const fx=(i,r,n,a)=>{const l={method:i,headers:r?.headers||{}};return i==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),l.body=JSON.stringify(a),Object.assign(Object.assign({},l),n))};async function Fe(i,r,n,a){var l;const u=Object.assign({},a?.headers);u[Yc]||(u[Yc]=vp["2024-01-01"].name),a?.jwt&&(u.Authorization=`Bearer ${a.jwt}`);const d=(l=a?.query)!==null&&l!==void 0?l:{};a?.redirectTo&&(d.redirect_to=a.redirectTo);const m=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",p=await px(i,r,n+m,{headers:u,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(p):{data:Object.assign({},p),error:null}}async function px(i,r,n,a,l,u){const d=fx(r,a,l,u);let m;try{m=await i(n,Object.assign({},d))}catch(p){throw console.error(p),new Xc(Jn(p),0)}if(m.ok||await Rf(m),a?.noResolveJson)return m;try{return await m.json()}catch(p){await Rf(p)}}function Wr(i){var r;let n=null;vx(i)&&(n=Object.assign({},i),i.expires_at||(n.expires_at=K0(i.expires_in)));const a=(r=i.user)!==null&&r!==void 0?r:i;return{data:{session:n,user:a},error:null}}function Df(i){const r=Wr(i);return!r.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((n,a)=>n&&typeof a=="string",!0)&&(r.data.weak_password=i.weak_password),r}function kn(i){var r;return{data:{user:(r=i.user)!==null&&r!==void 0?r:i},error:null}}function mx(i){return{data:i,error:null}}function gx(i){const{action_link:r,email_otp:n,hashed_token:a,redirect_to:l,verification_type:u}=i,d=dx(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:r,email_otp:n,hashed_token:a,redirect_to:l,verification_type:u},p=Object.assign({},d);return{data:{properties:m,user:p},error:null}}function yx(i){return i}function vx(i){return i.access_token&&i.refresh_token&&i.expires_in}const Rc=["global","local","others"];var wx=function(i,r){var n={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&r.indexOf(a)<0&&(n[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(i);l<a.length;l++)r.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(i,a[l])&&(n[a[l]]=i[a[l]]);return n};class xx{constructor({url:r="",headers:n={},fetch:a}){this.url=r,this.headers=n,this.fetch=kp(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(r,n=Rc[0]){if(Rc.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Rc.join(", ")}`);try{return await Fe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(a){if(Le(a))return{data:null,error:a};throw a}}async inviteUserByEmail(r,n={}){try{return await Fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:kn})}catch(a){if(Le(a))return{data:{user:null},error:a};throw a}}async generateLink(r){try{const{options:n}=r,a=wx(r,["options"]),l=Object.assign(Object.assign({},a),n);return"newEmail"in a&&(l.new_email=a?.newEmail,delete l.newEmail),await Fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:gx,redirectTo:n?.redirectTo})}catch(n){if(Le(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(r){try{return await Fe(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:kn})}catch(n){if(Le(n))return{data:{user:null},error:n};throw n}}async listUsers(r){var n,a,l,u,d,m,p;try{const y={nextPage:null,lastPage:0,total:0},g=await Fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(n=r?.page)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:"",per_page:(u=(l=r?.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:yx});if(g.error)throw g.error;const x=await g.json(),b=(d=g.headers.get("x-total-count"))!==null&&d!==void 0?d:0,E=(p=(m=g.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return E.length>0&&(E.forEach(k=>{const C=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(k.split(";")[1].split("=")[1]);y[`${_}Page`]=C}),y.total=parseInt(b)),{data:Object.assign(Object.assign({},x),y),error:null}}catch(y){if(Le(y))return{data:{users:[]},error:y};throw y}}async getUserById(r){Us(r);try{return await Fe(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:kn})}catch(n){if(Le(n))return{data:{user:null},error:n};throw n}}async updateUserById(r,n){Us(r);try{return await Fe(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:n,headers:this.headers,xform:kn})}catch(a){if(Le(a))return{data:{user:null},error:a};throw a}}async deleteUser(r,n=!1){Us(r);try{return await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:n},xform:kn})}catch(a){if(Le(a))return{data:{user:null},error:a};throw a}}async _listFactors(r){Us(r.userId);try{const{data:n,error:a}=await Fe(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:n,error:a}}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _deleteFactor(r){Us(r.userId),Us(r.id);try{return{data:await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}}}function Lf(i={}){return{getItem:r=>i[r]||null,setItem:(r,n)=>{i[r]=n},removeItem:r=>{delete i[r]}}}function bx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Fs={debug:!!(globalThis&&bp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Sp extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class kx extends Sp{}async function Sx(i,r,n){Fs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,r);const a=new globalThis.AbortController;return r>0&&setTimeout(()=>{a.abort(),Fs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async l=>{if(l){Fs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,l.name);try{return await n()}finally{Fs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,l.name)}}else{if(r===0)throw Fs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new kx(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Fs.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}bx();const _x={url:R0,storageKey:D0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:L0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Mf(i,r,n){return await n()}const Bs={};class Qi{constructor(r){var n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Qi.nextInstanceID,Qi.nextInstanceID+=1,this.instanceID>0&&wr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},_x),r);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new xx({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=kp(l.fetch),this.lock=l.lock||Mf,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:wr()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=Sx:this.lock=Mf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:bp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Lf(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Lf(this.memoryStorage)),wr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}get jwks(){var r,n;return(n=(r=Bs[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(r){Bs[this.storageKey]=Object.assign(Object.assign({},Bs[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,n;return(n=(r=Bs[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){Bs[this.storageKey]=Object.assign(Object.assign({},Bs[this.storageKey]),{cachedAt:r})}_debug(...r){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${yp}) ${new Date().toISOString()}`,...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{const n=X0(window.location.href);let a="none";if(this._isImplicitGrantCallback(n)?a="implicit":await this._isPKCECallback(n)&&(a="pkce"),wr()&&this.detectSessionInUrl&&a!=="none"){const{data:l,error:u}=await this._getSessionFromURL(n,a);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),$0(u)){const p=(r=u.details)===null||r===void 0?void 0:r.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:d,redirectType:m}=l;return this._debug("#_initialize()","detected session in URL",d,"redirect type",m),await this._saveSession(d),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Le(n)?{error:n}:{error:new wp("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var n,a,l;try{const u=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(n=r?.options)===null||n===void 0?void 0:n.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(l=r?.options)===null||l===void 0?void 0:l.captchaToken}},xform:Wr}),{data:d,error:m}=u;if(m||!d)return{data:{user:null,session:null},error:m};const p=d.session,y=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:y,session:p},error:null}}catch(u){if(Le(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(r){var n,a,l;try{let u;if("email"in r){const{email:g,password:x,options:b}=r;let E=null,k=null;this.flowType==="pkce"&&([E,k]=await Ms(this.storage,this.storageKey)),u=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:g,password:x,data:(n=b?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:E,code_challenge_method:k},xform:Wr})}else if("phone"in r){const{phone:g,password:x,options:b}=r;u=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:x,data:(a=b?.data)!==null&&a!==void 0?a:{},channel:(l=b?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Wr})}else throw new po("You must provide either an email or phone number and a password");const{data:d,error:m}=u;if(m||!d)return{data:{user:null,session:null},error:m};const p=d.session,y=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:y,session:p},error:null}}catch(u){if(Le(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(r){try{let n;if("email"in r){const{email:u,password:d,options:m}=r;n=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:d,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Df})}else if("phone"in r){const{phone:u,password:d,options:m}=r;n=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:d,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Df})}else throw new po("You must provide either an email or phone number and a password");const{data:a,error:l}=n;return l?{data:{user:null,session:null},error:l}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new fo}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:l})}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(r){var n,a,l,u;return await this._handleProviderSignIn(r.provider,{redirectTo:(n=r.options)===null||n===void 0?void 0:n.redirectTo,scopes:(a=r.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=r.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(u=r.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:n}=r;if(n==="solana")return await this.signInWithSolana(r);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(r){var n,a,l,u,d,m,p,y,g,x,b,E;let k,C;if("message"in r)k=r.message,C=r.signature;else{const{chain:_,wallet:$,statement:F,options:R}=r;let B;if(wr())if(typeof $=="object")B=$;else{const J=window;if("solana"in J&&typeof J.solana=="object"&&("signIn"in J.solana&&typeof J.solana.signIn=="function"||"signMessage"in J.solana&&typeof J.solana.signMessage=="function"))B=J.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!R?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=$}const Z=new URL((n=R?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in B&&B.signIn){const J=await B.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R?.signInWithSolana),{version:"1",domain:Z.host,uri:Z.href}),F?{statement:F}:null));let W;if(Array.isArray(J)&&J[0]&&typeof J[0]=="object")W=J[0];else if(J&&typeof J=="object"&&"signedMessage"in J&&"signature"in J)W=J;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)k=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),C=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in B)||typeof B.signMessage!="function"||!("publicKey"in B)||typeof B!="object"||!B.publicKey||!("toBase58"in B.publicKey)||typeof B.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${Z.host} wants you to sign in with your Solana account:`,B.publicKey.toBase58(),...F?["",F,""]:[""],"Version: 1",`URI: ${Z.href}`,`Issued At: ${(l=(a=R?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((u=R?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((d=R?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((m=R?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((p=R?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((y=R?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((x=(g=R?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||x===void 0)&&x.length?["Resources",...R.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const J=await B.signMessage(new TextEncoder().encode(k),"utf8");if(!J||!(J instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=J}}try{const{data:_,error:$}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:Q0(C)},!((b=r.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(E=r.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:Wr});if($)throw $;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new fo}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:$})}catch(_){if(Le(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(r){const n=await Gn(this.storage,`${this.storageKey}-code-verifier`),[a,l]=(n??"").split("/");try{const{data:u,error:d}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:a},xform:Wr});if(await wn(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new fo}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:l??null}),error:d})}catch(u){if(Le(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(r){try{const{options:n,provider:a,token:l,access_token:u,nonce:d}=r,m=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:l,access_token:u,nonce:d,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Wr}),{data:p,error:y}=m;return y?{data:{user:null,session:null},error:y}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new fo}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:y})}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(r){var n,a,l,u,d;try{if("email"in r){const{email:m,options:p}=r;let y=null,g=null;this.flowType==="pkce"&&([y,g]=await Ms(this.storage,this.storageKey));const{error:x}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(n=p?.data)!==null&&n!==void 0?n:{},create_user:(a=p?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:y,code_challenge_method:g},redirectTo:p?.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in r){const{phone:m,options:p}=r,{data:y,error:g}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(l=p?.data)!==null&&l!==void 0?l:{},create_user:(u=p?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(d=p?.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:y?.message_id},error:g}}throw new po("You must provide either an email or phone number.")}catch(m){if(Le(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(r){var n,a;try{let l,u;"options"in r&&(l=(n=r.options)===null||n===void 0?void 0:n.redirectTo,u=(a=r.options)===null||a===void 0?void 0:a.captchaToken);const{data:d,error:m}=await Fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:u}}),redirectTo:l,xform:Wr});if(m)throw m;if(!d)throw new Error("An error occurred on token verification.");const p=d.session,y=d.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:y,session:p},error:null}}catch(l){if(Le(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(r){var n,a,l;try{let u=null,d=null;return this.flowType==="pkce"&&([u,d]=await Ms(this.storage,this.storageKey)),await Fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(a=(n=r.options)===null||n===void 0?void 0:n.redirectTo)!==null&&a!==void 0?a:void 0}),!((l=r?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:d}),headers:this.headers,xform:mx})}catch(u){if(Le(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;if(a)throw a;if(!n)throw new xn;const{error:l}=await Fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:l}})}catch(r){if(Le(r))return{data:{user:null,session:null},error:r};throw r}}async resend(r){try{const n=`${this.url}/resend`;if("email"in r){const{email:a,type:l,options:u}=r,{error:d}=await Fe(this.fetch,"POST",n,{headers:this.headers,body:{email:a,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in r){const{phone:a,type:l,options:u}=r,{data:d,error:m}=await Fe(this.fetch,"POST",n,{headers:this.headers,body:{phone:a,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:d?.message_id},error:m}}throw new po("You must provide either an email or phone number and a type")}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(r,n){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await a,await n()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=n();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await r(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const n=await Gn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?r=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const a=r.expires_at?r.expires_at*1e3-Date.now()<Pc:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",r.expires_at),!a){if(this.userStorage){const d=await Gn(this.userStorage,this.storageKey+"-user");d?.user?r.user=d.user:r.user=Ic()}if(this.storage.isServer&&r.user){let d=this.suppressGetSessionWarning;r=new Proxy(r,{get:(p,y,g)=>(!d&&y==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,y,g))})}return{data:{session:r},error:null}}const{session:l,error:u}=await this._callRefreshToken(r.refresh_token);return u?{data:{session:null},error:u}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(r){return r?await this._getUser(r):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(r){try{return r?await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:kn}):await this._useSession(async n=>{var a,l,u;const{data:d,error:m}=n;if(m)throw m;return!(!((a=d.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new xn}:await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0,xform:kn})})}catch(n){if(Le(n))return W0(n)&&(await this._removeSession(),await wn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(r,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,n))}async _updateUser(r,n={}){try{return await this._useSession(async a=>{const{data:l,error:u}=a;if(u)throw u;if(!l.session)throw new xn;const d=l.session;let m=null,p=null;this.flowType==="pkce"&&r.email!=null&&([m,p]=await Ms(this.storage,this.storageKey));const{data:y,error:g}=await Fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:m,code_challenge_method:p}),jwt:d.access_token,xform:kn});if(g)throw g;return d.user=y.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(a){if(Le(a))return{data:{user:null},error:a};throw a}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new xn;const n=Date.now()/1e3;let a=n,l=!0,u=null;const{payload:d}=Ac(r.access_token);if(d.exp&&(a=d.exp,l=a<=n),l){const{session:m,error:p}=await this._callRefreshToken(r.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!m)return{data:{user:null,session:null},error:null};u=m}else{const{data:m,error:p}=await this._getUser(r.access_token);if(p)throw p;u={access_token:r.access_token,refresh_token:r.refresh_token,user:m.user,token_type:"bearer",expires_in:a-n,expires_at:a},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(n){if(Le(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async n=>{var a;if(!r){const{data:d,error:m}=n;if(m)throw m;r=(a=d.session)!==null&&a!==void 0?a:void 0}if(!r?.refresh_token)throw new xn;const{session:l,error:u}=await this._callRefreshToken(r.refresh_token);return u?{data:{user:null,session:null},error:u}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(r,n){try{if(!wr())throw new mo("No browser detected.");if(r.error||r.error_description||r.error_code)throw new mo(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Cf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new mo("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new Cf("No code detected.");const{data:F,error:R}=await this._exchangeCodeForSession(r.code);if(R)throw R;const B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:F.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:l,access_token:u,refresh_token:d,expires_in:m,expires_at:p,token_type:y}=r;if(!u||!m||!d||!y)throw new mo("No session defined in URL");const g=Math.round(Date.now()/1e3),x=parseInt(m);let b=g+x;p&&(b=parseInt(p));const E=b-g;E*1e3<=$s&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${x}s`);const k=b-x;g-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,b,g):g-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,b,g);const{data:C,error:_}=await this._getUser(u);if(_)throw _;const $={provider_token:a,provider_refresh_token:l,access_token:u,expires_in:x,expires_at:b,refresh_token:d,token_type:y,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:$,redirectType:r.type},error:null}}catch(a){if(Le(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(r){return!!(r.access_token||r.error_description)}async _isPKCECallback(r){const n=await Gn(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&n)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async n=>{var a;const{data:l,error:u}=n;if(u)return{error:u};const d=(a=l.session)===null||a===void 0?void 0:a.access_token;if(d){const{error:m}=await this.admin.signOut(d,r);if(m&&!(B0(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return r!=="others"&&(await this._removeSession(),await wn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(r){const n=Y0(),a={id:n,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:a}}}async _emitInitialSession(r){return await this._useSession(async n=>{var a,l;try{const{data:{session:u},error:d}=n;if(d)throw d;await((a=this.stateChangeEmitters.get(r))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",r,"session",u)}catch(u){await((l=this.stateChangeEmitters.get(r))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",u),console.error(u)}})}async resetPasswordForEmail(r,n={}){let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Ms(this.storage,this.storageKey,!0));try{return await Fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:a,code_challenge_method:l,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(u){if(Le(u))return{data:null,error:u};throw u}}async getUserIdentities(){var r;try{const{data:n,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(r=n.user.identities)!==null&&r!==void 0?r:[]},error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}}async linkIdentity(r){var n;try{const{data:a,error:l}=await this._useSession(async u=>{var d,m,p,y,g;const{data:x,error:b}=u;if(b)throw b;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(d=r.options)===null||d===void 0?void 0:d.redirectTo,scopes:(m=r.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=r.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await Fe(this.fetch,"GET",E,{headers:this.headers,jwt:(g=(y=x.session)===null||y===void 0?void 0:y.access_token)!==null&&g!==void 0?g:void 0})});if(l)throw l;return wr()&&!(!((n=r.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(a?.url),{data:{provider:r.provider,url:a?.url},error:null}}catch(a){if(Le(a))return{data:{provider:r.provider,url:null},error:a};throw a}}async unlinkIdentity(r){try{return await this._useSession(async n=>{var a,l;const{data:u,error:d}=n;if(d)throw d;return await Fe(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(l=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0})})}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _refreshAccessToken(r){const n=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(n,"begin");try{const a=Date.now();return await tx(async l=>(l>0&&await ex(200*Math.pow(2,l-1)),this._debug(n,"refreshing attempt",l),await Fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Wr})),(l,u)=>{const d=200*Math.pow(2,l);return u&&Oc(u)&&Date.now()+d-a<$s})}catch(a){if(this._debug(n,"error",a),Le(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(n,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,n){const a=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",n,"url",a),wr()&&!n.skipBrowserRedirect&&window.location.assign(a),{data:{provider:r,url:a},error:null}}async _recoverAndRefresh(){var r,n;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const l=await Gn(this.storage,this.storageKey);if(l&&this.userStorage){let d=await Gn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:l.user},await zs(this.userStorage,this.storageKey+"-user",d)),l.user=(r=d?.user)!==null&&r!==void 0?r:Ic()}else if(l&&!l.user&&!l.user){const d=await Gn(this.storage,this.storageKey+"-user");d&&d?.user?(l.user=d.user,await wn(this.storage,this.storageKey+"-user"),await zs(this.storage,this.storageKey,l)):l.user=Ic()}if(this._debug(a,"session from storage",l),!this._isValidSession(l)){this._debug(a,"session is not valid"),l!==null&&await this._removeSession();return}const u=((n=l.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Pc;if(this._debug(a,`session has${u?"":" not"} expired with margin of ${Pc}s`),u){if(this.autoRefreshToken&&l.refresh_token){const{error:d}=await this._callRefreshToken(l.refresh_token);d&&(console.error(d),Oc(d)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:m}=await this._getUser(l.access_token);!m&&d?.user?(l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(a,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(a,"error",l),console.error(l);return}finally{this._debug(a,"end")}}async _callRefreshToken(r){var n,a;if(!r)throw new xn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Io;const{data:u,error:d}=await this._refreshAccessToken(r);if(d)throw d;if(!u.session)throw new xn;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const m={session:u.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(u){if(this._debug(l,"error",u),Le(u)){const d={session:null,error:u};return Oc(u)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(d),d}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(u),u}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(r,n,a=!0){const l=`#_notifyAllSubscribers(${r})`;this._debug(l,"begin",n,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:r,session:n});const u=[],d=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(r,n)}catch(p){u.push(p)}});if(await Promise.all(d),u.length>0){for(let m=0;m<u.length;m+=1)console.error(u[m]);throw u[0]}}finally{this._debug(l,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0;const n=Object.assign({},r),a=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&n.user&&await zs(this.userStorage,this.storageKey+"-user",{user:n.user});const l=Object.assign({},n);delete l.user;const u=If(l);await zs(this.storage,this.storageKey,u)}else{const l=If(n);await zs(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await wn(this.storage,this.storageKey),await wn(this.storage,this.storageKey+"-code-verifier"),await wn(this.storage,this.storageKey+"-user"),this.userStorage&&await wn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&wr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),$s);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async n=>{const{data:{session:a}}=n;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((a.expires_at*1e3-r)/$s);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${$s}ms, refresh threshold is ${Kc} ticks`),l<=Kc&&await this._callRefreshToken(a.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof Sp)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!wr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const n=`#_onVisibilityChanged(${r})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,n,a){const l=[`provider=${encodeURIComponent(n)}`];if(a?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&l.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[u,d]=await Ms(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(d)}`});l.push(m.toString())}if(a?.queryParams){const u=new URLSearchParams(a.queryParams);l.push(u.toString())}return a?.skipBrowserRedirect&&l.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${r}?${l.join("&")}`}async _unenroll(r){try{return await this._useSession(async n=>{var a;const{data:l,error:u}=n;return u?{data:null,error:u}:await Fe(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token})})}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _enroll(r){try{return await this._useSession(async n=>{var a,l;const{data:u,error:d}=n;if(d)return{data:null,error:d};const m=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:{issuer:r.issuer}),{data:p,error:y}=await Fe(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(a=u?.session)===null||a===void 0?void 0:a.access_token});return y?{data:null,error:y}:(r.factorType==="totp"&&(!((l=p?.totp)===null||l===void 0)&&l.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var a;const{data:l,error:u}=n;if(u)return{data:null,error:u};const{data:d,error:m}=await Fe(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:{code:r.code,challenge_id:r.challengeId},headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token});return m?{data:null,error:m}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:m})})}catch(n){if(Le(n))return{data:null,error:n};throw n}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var a;const{data:l,error:u}=n;return u?{data:null,error:u}:await Fe(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:{channel:r.channel},headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token})})}catch(n){if(Le(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(r){const{data:n,error:a}=await this._challenge({factorId:r.factorId});return a?{data:null,error:a}:await this._verify({factorId:r.factorId,challengeId:n.id,code:r.code})}async _listFactors(){const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a=r?.factors||[],l=a.filter(d=>d.factor_type==="totp"&&d.status==="verified"),u=a.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:a,totp:l,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async r=>{var n,a;const{data:{session:l},error:u}=r;if(u)return{data:null,error:u};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Ac(l.access_token);let m=null;d.aal&&(m=d.aal);let p=m;((a=(n=l.user.factors)===null||n===void 0?void 0:n.filter(x=>x.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(p="aal2");const g=d.amr||[];return{data:{currentLevel:m,nextLevel:p,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(r,n={keys:[]}){let a=n.keys.find(m=>m.kid===r);if(a)return a;const l=Date.now();if(a=this.jwks.keys.find(m=>m.kid===r),a&&this.jwks_cached_at+U0>l)return a;const{data:u,error:d}=await Fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=l,a=u.keys.find(m=>m.kid===r),!a)?null:a}async getClaims(r,n={}){try{let a=r;if(!a){const{data:E,error:k}=await this.getSession();if(k||!E.session)return{data:null,error:k};a=E.session.access_token}const{header:l,payload:u,signature:d,raw:{header:m,payload:p}}=Ac(a);n?.allowExpired||lx(u.exp);const y=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!y){const{error:E}=await this.getUser(a);if(E)throw E;return{data:{claims:u,header:l,signature:d},error:null}}const g=cx(l.alg),x=await crypto.subtle.importKey("jwk",y,g,!0,["verify"]);if(!await crypto.subtle.verify(g,x,d,J0(`${m}.${p}`)))throw new Zc("Invalid JWT signature");return{data:{claims:u,header:l,signature:d},error:null}}catch(a){if(Le(a))return{data:null,error:a};throw a}}}Qi.nextInstanceID=0;const jx=Qi;class Nx extends jx{constructor(r){super(r)}}var Ex=function(i,r,n,a){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function m(g){try{y(a.next(g))}catch(x){d(x)}}function p(g){try{y(a.throw(g))}catch(x){d(x)}}function y(g){g.done?u(g.value):l(g.value).then(m,p)}y((a=a.apply(i,r||[])).next())})};class Cx{constructor(r,n,a){var l,u,d;this.supabaseUrl=r,this.supabaseKey=n;const m=I0(r);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const p=`sb-${m.hostname.split(".")[0]}-auth-token`,y={db:S0,realtime:j0,auth:Object.assign(Object.assign({},_0),{storageKey:p}),global:k0},g=A0(a??{},y);this.storageKey=(l=g.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(u=g.global.headers)!==null&&u!==void 0?u:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(x,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=g.auth)!==null&&d!==void 0?d:{},this.headers,g.global.fetch),this.fetch=T0(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new zw(new URL("rest/v1",m).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new w0(this.storageUrl.href,this.headers,this.fetch,a?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new Iw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,n={},a={}){return this.rest.rpc(r,n,a)}channel(r,n={config:{}}){return this.realtime.channel(r,n)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var r,n;return Ex(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(n=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:n,detectSessionInUrl:a,storage:l,userStorage:u,storageKey:d,flowType:m,lock:p,debug:y},g,x){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Nx({url:this.authUrl.href,headers:Object.assign(Object.assign({},b),g),storageKey:d,autoRefreshToken:r,persistSession:n,detectSessionInUrl:a,storage:l,userStorage:u,flowType:m,lock:p,debug:y,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(E=>E.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new a0(this.realtimeUrl.href,Object.assign(Object.assign({},r),{params:Object.assign({apikey:this.supabaseKey},r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,a)=>{this._handleTokenChanged(n,"CLIENT",a?.access_token)})}_handleTokenChanged(r,n,a){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:r==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Tx=(i,r,n)=>new Cx(i,r,n);function Px(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const r=i.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Px()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ox="https://hkvkomtaffybchjdjfws.supabase.co",Ax="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhrdmtvbXRhZmZ5YmNoamRqZndzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY4MTc3ODQsImV4cCI6MjA3MjM5Mzc4NH0.A0Eaqx1g8ADX0uiUL8eDw-2h6RF50csP-KKCTtVdhCE",Ws=Tx(Ox,Ax),Ix=()=>{const[i,r]=j.useState(null);j.useEffect(()=>{try{const z=localStorage.getItem("fitbuddy_user_data"),oe=z?JSON.parse(z):null,re=oe?.email||oe?.data?.email;if(["localhost","127.0.0.1"].includes(window.location.hostname)&&re==="admin@local"){r(!0);return}const H=oe?.role||oe?.data?.role;if(H&&String(H).toLowerCase()==="admin"){r(!0);return}const de=oe?.data?.token??oe?.token??null;if(de)try{const N=de.split(".");if(N.length>=2){const w=JSON.parse(atob(N[1].replace(/-/g,"+").replace(/_/g,"/"))),O=w?.roles||w?.role||[];if(Array.isArray(O)&&O.includes("admin")){r(!0);return}if(String(O).toLowerCase()==="admin"){r(!0);return}}}catch{}r(!1)}catch{r(!1)}},[]);const[n,a]=j.useState([]),[l,u]=j.useState([]),[d,m]=j.useState(!1),[p,y]=j.useState(null),[g,x]=j.useState(!1),[b,E]=j.useState(!1),[k,C]=j.useState([]),[_,$]=j.useState(null),[F,R]=j.useState([]),[B,Z]=j.useState(""),J=async(z,oe)=>{const re=oe?{...oe}:{},Y=re.headers?{...re.headers}:{};try{if(Ws&&typeof Ws.auth?.getSession=="function"){const de=(await Ws.auth.getSession())?.data?.session?.access_token??null;de&&(Y.Authorization=`Bearer ${de}`)}}catch{}if(!Y.Authorization)try{const H=localStorage.getItem("fitbuddy_user_data"),de=H?JSON.parse(H):null,N=de?.data?.token??de?.token??null;N&&(Y.Authorization=`Bearer ${N}`)}catch{}return re.headers=Y,fetch(z,re)};j.useEffect(()=>{g&&i===!0&&(async()=>{m(!0);const{data:z,error:oe}=await Ws.from("workout_plans").select("*").eq("deleted",!0);oe||C(z||[]),m(!1)})()},[g,i]),j.useEffect(()=>{b&&i===!0&&(async()=>{m(!0);const{data:z,error:oe}=await Ws.from("banned_usernames").select("username");oe||R((z||[]).map(re=>re.username)),m(!1)})()},[b,i]),j.useEffect(()=>{if(i!==!0)return;(async()=>{m(!0),y(null);try{const oe=await J("/api/admin/users",{method:"GET"});if(!oe.ok){const de=await oe.text();throw new Error(`Failed to load users: ${oe.status} ${de}`)}const re=await oe.json();u(re?.users||[]);const{data:Y,error:H}=await Ws.from("audit_logs").select("*").order("timestamp",{ascending:!1});if(H)if(String(H.message).toLowerCase().includes("relation")||String(H.message).toLowerCase().includes("could not find"))y("Audit log table not found. Run the DB setup SQL (sql/setup_db.sql) to create required tables.");else throw H;a(Y||[])}catch(oe){y(oe.message||"Error")}finally{m(!1)}})()},[i]);const W=async z=>{$(z),(await J("/api/admin/users?action=restore_plan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:z})})).ok?C(re=>re.filter(Y=>Y.id!==z)):y("Failed to restore"),$(null)},te=async()=>{if(!B.trim())return;m(!0),(await J("/api/admin/users?action=ban_username",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:B.trim()})})).ok?R(oe=>[...oe,B.trim()]):y("Failed to ban username"),Z(""),m(!1)},ue=async z=>{m(!0),(await J("/api/admin/users?action=unban_username",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:z})})).ok?R(re=>re.filter(Y=>Y!==z)):y("Failed to unban username"),m(!1)},we=async z=>{m(!0),(await J("/api/admin/users?action=ban",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:z})})).ok?u(re=>re.map(Y=>Y.id===z?{...Y,banned:!0}:Y)):y("Failed to ban user"),m(!1)},V=async z=>{m(!0),(await J("/api/admin/users?action=unban",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:z})})).ok?u(re=>re.map(Y=>Y.id===z?{...Y,banned:!1}:Y)):y("Failed to unban user"),m(!1)},ce=async z=>{m(!0),(await J("/api/admin/users?action=delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:z})})).ok?u(re=>re.filter(Y=>Y.id!==z)):y("Failed to delete user"),m(!1)},ie=()=>{const z=new Blob([n.map(Y=>JSON.stringify(Y)).join(`
`)],{type:"application/json"}),oe=URL.createObjectURL(z),re=document.createElement("a");re.href=oe,re.download="ai_action_audit.log",re.click(),URL.revokeObjectURL(oe)};return i===!1?o.jsx(du,{}):o.jsxs("div",{className:"admin-audit-root",children:[o.jsx("div",{className:"admin-hero",children:o.jsxs("div",{children:[o.jsx("div",{className:"title",children:"Admin Console"}),o.jsx("div",{className:"subtitle",children:"Manage users, audit logs and site-wide policies."})]})}),o.jsxs("div",{className:"admin-grid",children:[o.jsxs("div",{className:"admin-card",children:[o.jsx("div",{className:"admin-section-title",children:"Admin Powers"}),o.jsxs("div",{className:"admin-powers",children:[o.jsx("button",{className:"admin-power-btn",onClick:ie,disabled:n.length===0,children:"Download Audit Log"}),o.jsx("button",{className:"admin-power-btn",onClick:()=>x(!0),children:"Restore Workout Plans"}),o.jsx("button",{className:"admin-power-btn",onClick:()=>E(!0),children:"Manage Banned Usernames"}),o.jsx("div",{className:"admin-power-row",children:o.jsx("button",{className:"admin-power-btn secondary",onClick:()=>window.location.href="/",children:"Open App"})}),o.jsx("div",{className:"admin-power-note",children:"Tip: actions are proxied through the server to protect secrets and follow RLS."})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"admin-card mb-20",children:[o.jsx("div",{className:"admin-section-title",children:"Users"}),l.length===0&&o.jsx("div",{className:"muted",children:"No users found."}),o.jsx("div",{className:"users-list",children:l.map(z=>o.jsxs("div",{className:`user-row${z.banned?" banned":""}`.trim(),children:[o.jsxs("div",{className:"user-meta",children:[o.jsx("div",{className:"user-name",children:z.username||z.email}),o.jsx("div",{className:"user-email",children:z.email}),o.jsx("div",{className:"meta-id",children:z.id})]}),o.jsxs("div",{className:"user-actions",children:[z.banned?o.jsx("button",{className:"small-btn ghost",onClick:()=>V(z.id),disabled:d,children:"Unban"}):o.jsx("button",{className:"small-btn ghost",onClick:()=>we(z.id),disabled:d,children:"Ban"}),o.jsx("button",{className:"small-btn negative",onClick:()=>ce(z.id),disabled:d,children:"Delete"})]})]},z.id))})]}),o.jsxs("div",{className:"admin-card",children:[o.jsx("div",{className:"admin-section-title",children:"AI Action Audit Log"}),d&&o.jsx("div",{className:"muted",children:"Loading..."}),p&&o.jsx("div",{className:"error",children:p}),o.jsxs("div",{className:"audit-list",children:[n.map((z,oe)=>o.jsxs("div",{className:"audit-row",children:[o.jsx("div",{className:"audit-ts",children:z.timestamp}),z.event==="rickroll"?o.jsxs("div",{className:"audit-rickroll",children:[o.jsx("div",{children:"Event: rickroll"}),o.jsxs("div",{children:["IP: ",z.ip||""]}),o.jsxs("div",{children:["Verified: ",String(z.verified)]}),o.jsxs("div",{children:["UserAgent: ",o.jsx("pre",{className:"audit-json-small",children:String(z.userAgent||"")})]})]}):o.jsx("pre",{className:"audit-json",children:JSON.stringify(z.action,null,2)})]},oe)),n.length===0&&!d&&o.jsx("div",{className:"muted",children:"No audit entries found."})]})]})]})]}),g&&o.jsx("div",{className:"admin-modal-overlay",children:o.jsxs("div",{className:"admin-modal",children:[o.jsx("h3",{children:"Restore Workout Plans"}),d&&o.jsx("div",{children:"Loading..."}),o.jsxs("div",{children:[k.map(z=>o.jsxs("div",{className:"admin-modal-list-item",children:[o.jsxs("div",{children:[o.jsx("b",{children:z.name}),o.jsx("div",{className:"meta-id",children:z.id})]}),o.jsx("div",{children:o.jsx("button",{className:"small-btn",onClick:()=>W(z.id),disabled:_===z.id,children:_===z.id?"Restoring...":"Restore"})})]},z.id)),k.length===0&&!d&&o.jsx("div",{children:"No deleted plans found."})]}),o.jsx("div",{className:"modal-footer",children:o.jsx("button",{className:"small-btn ghost",onClick:()=>x(!1),children:"Close"})})]})}),b&&o.jsx("div",{className:"admin-modal-overlay",children:o.jsxs("div",{className:"admin-modal",children:[o.jsx("h3",{children:"Manage Banned Usernames"}),d&&o.jsx("div",{children:"Loading..."}),o.jsxs("div",{children:[F.map(z=>o.jsxs("div",{className:"admin-modal-list-item",children:[o.jsx("div",{children:z}),o.jsx("div",{children:o.jsx("button",{className:"small-btn ghost",onClick:()=>ue(z),disabled:d,children:"Unban"})})]},z)),F.length===0&&!d&&o.jsx("div",{children:"No banned usernames."})]}),o.jsxs("div",{className:"admin-modal-input-row",children:[o.jsx("input",{type:"text",value:B,onChange:z=>Z(z.target.value),placeholder:"Ban new username...",className:"admin-modal-input"}),o.jsx("button",{className:"small-btn warn",onClick:te,disabled:d||!B.trim(),children:"Ban"})]}),o.jsx("div",{className:"modal-footer",children:o.jsx("button",{className:"small-btn ghost",onClick:()=>E(!1),children:"Close"})})]})})]})};function Rx(){j.useEffect(()=>{const i=_o();try{if(localStorage.getItem("fitbuddy_no_auto_restore")||sessionStorage.getItem("fitbuddy_no_auto_restore"))return}catch{}try{const n=ur(),a=Qs();if(n||a&&a.dailyWorkouts&&a.dailyWorkouts.length>0)return}catch{}i?.id&&Xn(i.id);const r=()=>{const n=_o();n?.id&&Yi(n.id)};return window.addEventListener("beforeunload",r),()=>{r(),window.removeEventListener("beforeunload",r)}},[])}const Uf="https://www.youtube.com/watch?v=dQw4w9WgXcQ",Dx=()=>{const[i,r]=j.useState("pending");return j.useEffect(()=>{Math.random()<.5?r("rick"):r("notfound")},[]),j.useEffect(()=>{if(i==="rick"){const a=setTimeout(async()=>{try{let l={"Content-Type":"application/json"};try{const u=localStorage.getItem("fitbuddy_user_data"),d=u?JSON.parse(u):null,m=d?.data?.token??d?.token??null;m&&(l.Authorization=`Bearer ${m}`)}catch{}await fetch("/api/rickroll",{method:"POST",headers:l,body:JSON.stringify({userId:null})})}catch{}finally{window.location.href=Uf}},150);return()=>clearTimeout(a)}},[i]),i==="pending"?o.jsx("div",{className:"rickroll-loading",children:o.jsx("p",{children:"Deciding your fate..."})}):i==="notfound"?o.jsx(du,{}):o.jsxs("div",{className:"rickroll-redirect",children:[o.jsx("p",{children:"Redirecting you to something special..."}),o.jsx("a",{href:Uf,target:"_blank",rel:"noopener noreferrer",children:"Open"})]})};function Lx({userData:i}){const[r,n]=j.useState(!1);if(j.useEffect(()=>{if(i?.id)try{yw(i.id)}catch{}(async()=>{try{if(Yn(i?.id)){n(!1);return}const y=i?.id;if(!y){n(!0);return}const g=await ut(()=>import("./apiAuth-CGYA-Ck2.js"),[]).then(_=>_.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:y})})),x=await fetch("/api/userdata/load",g);if(!x.ok){n(!0);return}const b=await x.text();let E=null;try{E=b?JSON.parse(b):null}catch{E=null}const k=E?.stored??E?.payload??E??{},C=k&&k.accepted_terms&&k.accepted_privacy;n(!C)}catch{const y=Yn(i?.id);n(!y)}})();const d=()=>{Yn(i?.id)?n(!1):n(!0)},m=()=>{Yn(i?.id)?n(!1):n(!0)};return window.addEventListener("fitbuddy-tos-accepted",d),window.addEventListener("fitbuddy-privacy-accepted",m),()=>{window.removeEventListener("fitbuddy-tos-accepted",d),window.removeEventListener("fitbuddy-privacy-accepted",m)}},[i?.id]),!r)return null;const a=Oo(i?.id),l=Ao(i?.id);return o.jsx("div",{className:"tos-banner compact",role:"region","aria-label":"Terms and Privacy banner",children:o.jsx("div",{className:"tos-inner inline",children:o.jsxs("div",{className:"tos-left",children:[o.jsx("div",{className:"tos-info","aria-hidden":"true",children:""}),o.jsxs("div",{className:"tos-text",children:["Please read and accept our ",o.jsx(br,{to:"/terms",className:a?"tos-link accepted":"tos-link",children:"Terms of Service"})," and ",o.jsx(br,{to:"/privacy",className:l?"tos-link accepted":"tos-link",children:"Privacy Policy"}),". This banner will remain until both are accepted."]})]})})})}function _p(i={}){const r=i.count||30,n=i.gravity||.6,a=["#1ecb7b","#1e90cb","#ffb347","#ffd54a","#7bd389"],l=document.createElement("div");l.style.position="fixed",l.style.left="0",l.style.top="0",l.style.width="100%",l.style.height="0",l.style.pointerEvents="none",l.style.overflow="visible",l.style.zIndex="9999",document.body.appendChild(l);for(let u=0;u<r;u++){let d=function(){g+=n*.05,x+=y,b+=g,m.style.left=x+"px",m.style.top=b+"px";const k=(parseFloat(m.style.transform.replace("rotate(","").replace("deg)",""))||0)+E;m.style.transform="rotate("+k+"deg)",m.style.opacity=String(Math.max(0,1-b/(window.innerHeight*.9))),b<window.innerHeight+100?requestAnimationFrame(d):m.remove()};const m=document.createElement("div"),p=6+Math.random()*10;m.style.position="absolute",m.style.left=50+(Math.random()-.5)*60+"%",m.style.top="-10px",m.style.width=p+"px",m.style.height=p*.6+"px",m.style.background=a[Math.floor(Math.random()*a.length)],m.style.opacity="0.95",m.style.transform="rotate("+Math.random()*360+"deg)",m.style.borderRadius=Math.random()*3+"px",m.style.willChange="transform, top, opacity",l.appendChild(m);const y=(Math.random()-.5)*6;let g=2+Math.random()*4,x=window.innerWidth*.5+(Math.random()-.5)*window.innerWidth*.6,b=-20-Math.random()*50;const E=(Math.random()-.5)*10;requestAnimationFrame(d)}setTimeout(()=>l.remove(),5e3)}function Mx(){const i=Oo(void 0),[r,n]=j.useState(i),[a,l]=j.useState(i);j.useEffect(()=>{const d=()=>{l(!0),n(!0)};return window.addEventListener("fitbuddy-tos-accepted",d),()=>window.removeEventListener("fitbuddy-tos-accepted",d)},[]);const u=()=>{if(r){sp(void 0),l(!0);try{_p({count:40})}catch{}try{const d=localStorage.getItem("fitbuddy_user_data"),m=d&&JSON.parse(d).data?.id||null;m&&ut(()=>import("./apiAuth-CGYA-Ck2.js"),[]).then(p=>p.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:m,accepted_terms:!0})})).then(p=>fetch("/api/userdata/save",p)).catch(()=>{})}catch{}}};return o.jsxs("div",{className:"terms-page",children:[o.jsx("header",{className:"terms-hero",children:o.jsxs("div",{className:"terms-hero-inner",children:[o.jsx("div",{className:"hero-logo",children:o.jsx(xt,{size:36,color:"#fff"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"hero-title",children:"FitBuddy Terms of Service"}),o.jsx("p",{className:"hero-sub",children:"Short, clear summary about how to use the app safely and what we store."})]})]})}),o.jsxs("main",{className:"terms-container",children:[o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"1. Use of the Service"}),o.jsx("p",{children:"FitBuddy provides workout suggestions and educational material to help you train safely. This is not medical advice. If you have a medical condition, please consult a healthcare professional before acting on any exercise recommendation."})]}),o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"2. AI & Content"}),o.jsx("p",{children:"Some content or workout suggestions may be generated or assisted by AI. AI outputs are best-effort guidance and should be used in combination with your own judgment and professional advice."})]}),o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"3. Data & Privacy"}),o.jsxs("p",{children:["We store workout plans and profile data locally for convenience. If you create an account, data may be backed up to our servers for sync across devices. See the ",o.jsx(br,{to:"/privacy",className:"tos-link",children:"Privacy Policy"})," for details."]})]}),o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"4. Liability"}),o.jsx("p",{children:"By using FitBuddy you acknowledge that you are voluntarily participating in physical activity and accept responsibility for any risks. We are not liable for injuries caused while following the app."})]})]}),o.jsx("section",{className:"terms-full",children:o.jsxs("div",{className:"terms-full-inner",children:[o.jsx("h2",{children:"Full Terms of Service"}),o.jsx("p",{children:'The following terms ("Agreement") constitute a legally binding agreement between you ("User") and FitBuddy, LLC ("FitBuddy", "we", "us" or "our"), governing your access to and use of the FitBuddy website, mobile applications, services, software, APIs and associated content (collectively, the "Service"). By accessing, browsing, or using the Service you acknowledge that you have read, understood, and agree to be bound by this Agreement. If you do not agree to these terms, do not access or use the Service.'}),o.jsx("h3",{children:"1. Definitions"}),o.jsx("p",{children:'"Content" means any information, text, graphics, images, audio, video, code, algorithms, workout plans, recommendations, comments, and other materials provided by FitBuddy or Users. "User Content" means Content submitted or transmitted by Users. "Personal Data" means information that identifies or can be used to identify an individual, subject to the Privacy Policy.'}),o.jsx("h3",{children:"2. Scope of Service"}),o.jsx("p",{children:'FitBuddy provides fitness and wellness related guidance, educational materials, personalized workout plans, and software tools. The Service may include content generated or assisted by artificial intelligence. The Service is provided on an "as is" and "as available" basis. FitBuddy reserves the right to modify, suspend, or discontinue any aspect of the Service at any time without prior notice.'}),o.jsx("h3",{children:"3. User Eligibility and Conduct"}),o.jsx("p",{children:"Users represent and warrant that they are at least the minimum age required to use the Service under applicable law and that they have full authority to accept this Agreement. Users shall not misuse the Service or interfere with its operation. Prohibited conduct includes, but is not limited to: circumventing technical restrictions; attempting to access other Users' accounts; uploading malicious code; impersonating others; or using the Service for unlawful or harmful activities."}),o.jsx("h3",{children:"4. Medical Disclaimer and Assumption of Risk"}),o.jsx("p",{children:"The Service provides general fitness information and recommendations which are not a substitute for professional medical advice, diagnosis, or treatment. Users should consult a qualified healthcare professional before beginning any exercise program or if they have health concerns. By using the Service, Users acknowledge and assume all risks associated with participating in physical activity and agree that FitBuddy is not responsible for any injury, loss, or damage arising from use of the Service."}),o.jsx("h3",{children:"5. AI-Generated Content and Accuracy"}),o.jsx("p",{children:"Some Content may be generated or assisted by machine learning models, thirdparty APIs, or algorithmic systems. While FitBuddy strives for accuracy and utility, AI outputs may be incomplete, imprecise, or contextually inappropriate. FitBuddy disclaims any warranty regarding the suitability, reliability, or accuracy of AI-generated Content. Reliance on such Content is at the User's own risk."}),o.jsx("h3",{children:"6. Intellectual Property"}),o.jsx("p",{children:"FitBuddy and its licensors retain all right, title, and interest in and to the Service and Content provided by FitBuddy, including intellectual property rights. Users are granted a limited, non-exclusive, non-sublicensable, revocable license to access and use the Service for personal, non-commercial purposes in accordance with this Agreement. Users shall not reproduce, distribute, modify, create derivative works, reverse engineer, or otherwise exploit FitBuddy's intellectual property except as expressly authorized herein."}),o.jsx("h3",{children:"7. User Content and License to FitBuddy"}),o.jsx("p",{children:"By submitting User Content, Users grant FitBuddy a worldwide, royalty-free, sublicensable, transferable, perpetual, irrevocable license to use, host, store, reproduce, modify, create derivative works, communicate, publish, and distribute such User Content for the purposes of operating, improving, and promoting the Service. Users warrant that they have the rights to grant such license and that User Content does not violate third-party rights."}),o.jsx("h3",{children:"8. Payments and Subscriptions"}),o.jsx("p",{children:"Paid features of the Service are governed by separate subscription terms and payment agreements. Users agree to provide accurate billing information and authorize recurring charges as applicable. Refunds, cancellations, and dispute procedures are governed by the posted subscription terms and any applicable laws."}),o.jsx("h3",{children:"9. Third-Party Services and Links"}),o.jsx("p",{children:"The Service may contain links to third-party websites, services, or content. FitBuddy does not endorse and is not responsible for third-party offerings, practices, or privacy policies. Users access third-party resources at their own risk and should review the third-party terms and privacy policies."}),o.jsx("h3",{children:"10. Privacy and Data"}),o.jsx("p",{children:"Use of Personal Data is governed by FitBuddys Privacy Policy. By using the Service, Users consent to FitBuddys collection, processing, storage, and transfer of Personal Data in accordance with the Privacy Policy. FitBuddy will take commercially reasonable measures to secure User Data but cannot guarantee absolute security."}),o.jsx("h3",{children:"11. Warranties and Disclaimers"}),o.jsx("p",{children:'EXCEPT AS EXPRESSLY PROVIDED HEREIN, THE SERVICE IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND. FITBUDDY DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE, AND NON-INFRINGEMENT. FITBUDDY DOES NOT WARRANT THAT THE SERVICE WILL BE UNINTERRUPTED, ERROR-FREE, OR SECURE.'}),o.jsx("h3",{children:"12. Limitation of Liability"}),o.jsx("p",{children:"TO THE MAXIMUM EXTENT PERMITTED BY LAW, IN NO EVENT SHALL FITBUDDY, ITS AFFILIATES, LICENSORS, OR SERVICE PROVIDERS BE LIABLE FOR INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, OR FOR LOSS OF PROFITS, REVENUE, DATA, OR USE, ARISING OUT OF OR IN CONNECTION WITH THE SERVICE, WHETHER IN CONTRACT, TORT (INCLUDING NEGLIGENCE), STRICT LIABILITY, OR OTHERWISE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. FITBUDDY'S AGGREGATE LIABILITY FOR DIRECT DAMAGES SHALL NOT EXCEED THE AMOUNTS PAID BY THE USER TO FITBUDDY IN THE TWELVE (12) MONTHS PRECEDING THE CLAIM, OR ONE HUNDRED DOLLARS (USD $100), WHICHEVER IS GREATER."}),o.jsx("h3",{children:"13. Indemnification"}),o.jsx("p",{children:"Users agree to indemnify, defend, and hold harmless FitBuddy and its officers, directors, employees, agents, and affiliates from and against any and all losses, liabilities, claims, demands, damages, costs, and expenses (including reasonable attorneys fees) arising out of or relating to: (a) User's breach of this Agreement; (b) Users violation of any law or third-party rights; or (c) User Content."}),o.jsx("h3",{children:"14. Termination"}),o.jsx("p",{children:"FitBuddy may suspend or terminate a User's access to the Service at any time, with or without cause, and without liability. Upon termination, license rights granted to the User will immediately cease. Sections concerning ownership, disclaimers, limitations of liability, indemnity, and dispute resolution will survive termination."}),o.jsx("h3",{children:"15. Governing Law; Dispute Resolution"}),o.jsx("p",{children:"This Agreement shall be governed by and construed in accordance with the laws of the state in which FitBuddy is incorporated, without regard to conflict of laws principles. Any dispute arising out of or related to this Agreement shall be resolved exclusively through final and binding arbitration, except where prohibited by law. The arbitrator's decision will be final and binding and may be entered as a judgment in any court of competent jurisdiction."}),o.jsx("h3",{children:"16. Changes to Terms"}),o.jsx("p",{children:"FitBuddy may update these Terms from time to time. We will provide notice of material changes, for example by email to registered accounts or prominent notice within the Service. Continued use of the Service after changes constitute acceptance of the revised Terms."}),o.jsx("h3",{children:"17. Miscellaneous"}),o.jsx("p",{children:"This Agreement, together with the Privacy Policy and any other legal notices published by FitBuddy, constitutes the entire agreement between the parties concerning the subject matter herein. If any provision is found unenforceable, the remaining provisions will remain in full force. Failure to enforce a right is not a waiver of that right."}),o.jsxs("p",{children:[o.jsx("em",{children:"Effective Date:"})," The effective date of these Terms is the date you first use the Service. For questions regarding these Terms, please contact our support team."]})]})}),o.jsxs("div",{className:"terms-cta-bottom",children:[o.jsx("div",{className:"terms-cta-inner",children:o.jsxs("label",{className:"terms-checkbox",children:[o.jsx("input",{type:"checkbox",checked:r,onChange:d=>n(d.target.checked)}),o.jsx("span",{children:"I have read and agree to the Terms of Service"})]})}),o.jsx("div",{className:"terms-cta-inner stack",children:o.jsx("button",{className:"btn btn-primary btn-lg"+(a?" accepted-btn":""),onClick:u,disabled:!r||a,"aria-disabled":!r||a,children:a?"Accepted":"Accept"})})]})]})}function Ux(){const i=Ao(void 0),[r,n]=j.useState(i),[a,l]=j.useState(i);j.useEffect(()=>{const d=()=>{l(!0),n(!0)};return window.addEventListener("fitbuddy-privacy-accepted",d),()=>window.removeEventListener("fitbuddy-privacy-accepted",d)},[]);const u=()=>{if(r){ip(void 0),l(!0);try{_p({count:36})}catch{}try{const d=localStorage.getItem("fitbuddy_user_data"),m=d&&JSON.parse(d).data?.id||null;m&&ut(()=>import("./apiAuth-CGYA-Ck2.js"),[]).then(p=>p.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:m,accepted_privacy:!0})})).then(p=>fetch("/api/userdata/save",p)).catch(()=>{})}catch{}}};return o.jsxs("div",{className:"terms-page",children:[o.jsx("header",{className:"terms-hero",children:o.jsxs("div",{className:"terms-hero-inner",children:[o.jsx("div",{className:"hero-logo",children:o.jsx(xt,{size:36,color:"#fff"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"hero-title",children:"FitBuddy Privacy Policy"}),o.jsx("p",{className:"hero-sub",children:"How we collect, use, and protect your data  short summary."})]})]})}),o.jsxs("main",{className:"terms-container",children:[o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"Data We Collect"}),o.jsx("p",{children:"We collect workout preferences, profile details, and optionally account information when you sign up. We do not collect sensitive medical data unless you explicitly provide it."})]}),o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"How We Use Data"}),o.jsx("p",{children:"Data is used to personalize workout plans, sync across devices, and improve the service. We may use aggregated, anonymized data for analytics."})]}),o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"Sharing & Third Parties"}),o.jsx("p",{children:"We do not sell personal data. We may share data with service providers who assist in backup, analytics, or authentication, under appropriate agreements."})]}),o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"Security"}),o.jsx("p",{children:"We use industry-standard measures to secure data but cannot guarantee absolute security. Follow secure practices and protect your account credentials."})]})]}),o.jsx("section",{className:"terms-full",children:o.jsxs("div",{className:"terms-full-inner",children:[o.jsx("h2",{children:"Full Privacy Policy"}),o.jsx("p",{children:"This Privacy Policy explains how FitBuddy, LLC collects, uses, discloses, and protects the personal information of users of the Service. By using the Service you consent to the collection and use of information as described in this policy."}),o.jsx("h3",{children:"1. Information We Collect"}),o.jsx("p",{children:"We collect information you provide directly (profile, email, preferences), information generated by your use of the Service (workout logs, settings), and technical information (device, browser, IP) to operate and improve the Service."}),o.jsx("h3",{children:"2. Use of Information"}),o.jsx("p",{children:"Information is used to personalize content, provide support, enable backups (when opted-in), deliver notifications, and prevent abuse."}),o.jsx("h3",{children:"3. Sharing and Disclosure"}),o.jsx("p",{children:"We may share information with vendors who perform services for us, comply with legal obligations, or protect our rights. Aggregated or anonymized data may be used for research or analytics."}),o.jsx("h3",{children:"4. Data Retention and Rights"}),o.jsx("p",{children:"We retain data as long as necessary to provide the Service or as required by law. Users may request deletion or access to their data by contacting support."}),o.jsx("h3",{children:"5. International Transfers"}),o.jsx("p",{children:"Data may be processed in different jurisdictions. We take measures to protect data when transferring across borders."}),o.jsx("h3",{children:"6. Changes to Privacy Policy"}),o.jsx("p",{children:"We may update this Privacy Policy and will provide notice for material changes. Continued use after updates constitutes acceptance."}),o.jsxs("p",{children:[o.jsx("em",{children:"Effective Date:"})," The effective date is the date you first use the Service. For privacy questions, contact our support team."]})]})}),o.jsxs("div",{className:"terms-cta-bottom",children:[o.jsx("div",{className:"terms-cta-inner",children:o.jsxs("label",{className:"terms-checkbox",children:[o.jsx("input",{type:"checkbox",checked:r,onChange:d=>n(d.target.checked)}),o.jsx("span",{children:"I have read and agree to the Privacy Policy"})]})}),o.jsx("div",{className:"terms-cta-inner stack",children:o.jsx("button",{className:"btn btn-primary btn-lg"+(a?" accepted-btn":""),onClick:u,disabled:!r||a,"aria-disabled":!r||a,children:a?"Accepted":"Accept"})})]})]})}function Fx(){const[i,r]=j.useState(!1),n=()=>{r(!0)};return o.jsxs("div",{className:"terms-page help-page",children:[o.jsx("header",{className:"terms-hero",children:o.jsxs("div",{className:"terms-hero-inner",children:[o.jsx("div",{className:"hero-logo",children:o.jsx(xt,{size:36,color:"#fff"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"hero-title",children:"Help Center"}),o.jsx("p",{className:"hero-sub",children:"Find answers to common questions about using FitBuddy."})]})]})}),o.jsxs("main",{className:"help-categories",children:[o.jsxs("div",{className:"help-cards",children:[o.jsxs("article",{className:"help-card",children:[o.jsx("div",{className:"help-card-icon","aria-hidden":!0,children:o.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("path",{d:"M12 8v4l3 3"})]})}),o.jsxs("div",{children:[o.jsx("h3",{children:"Getting Started"}),o.jsx("p",{children:"Complete the questionnaire to receive your personalized 30-day workout plan and get tips for first steps."})]})]}),o.jsxs("article",{className:"help-card",children:[o.jsx("div",{className:"help-card-icon","aria-hidden":!0,children:o.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),o.jsxs("div",{children:[o.jsx("h3",{children:"Account & Sign-in"}),o.jsx("p",{children:"Sign in to restore backups, save progress, and sync across devices. Reset options are available from the sign-in page."})]})]}),o.jsxs("article",{className:"help-card",children:[o.jsx("div",{className:"help-card-icon","aria-hidden":!0,children:o.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2"}),o.jsx("path",{d:"M16 3v4"}),o.jsx("path",{d:"M8 3v4"})]})}),o.jsxs("div",{children:[o.jsx("h3",{children:"Workouts & Plans"}),o.jsx("p",{children:"View and edit your plan on the calendar. Swap or regenerate workouts, and mark progress as you train."})]})]}),o.jsxs("article",{className:"help-card",children:[o.jsx("div",{className:"help-card-icon","aria-hidden":!0,children:o.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 12h18"}),o.jsx("path",{d:"M3 6h18"}),o.jsx("path",{d:"M3 18h18"})]})}),o.jsxs("div",{children:[o.jsx("h3",{children:"Privacy & Data"}),o.jsx("p",{children:"Learn how we store and protect your data and how to control backups and sharing preferences."})]})]})]}),o.jsxs("div",{className:"faq-spot",children:[o.jsx("h2",{children:"Frequently Asked Questions"}),o.jsx(Wx,{})]}),o.jsxs("div",{className:"help-support",children:[o.jsx("h3",{children:"Need more help?"}),o.jsx("p",{children:"If you can't find the answer, contact our support team."}),o.jsx("button",{className:"btn btn-primary help-contact",onClick:n,children:"Contact Support"})]})]}),o.jsx(Bx,{open:i,onClose:()=>r(!1),onSubmitted:()=>{r(!1),console.log("support form submitted")}})]})}function Bx({open:i,onClose:r,onSubmitted:n}){const[a,l]=j.useState(""),[u,d]=j.useState(""),[m,p]=j.useState(""),[y,g]=j.useState("");if(!i)return null;const x=b=>{b.preventDefault();try{n?.()}catch{}};return o.jsx("div",{className:"hc-modal-backdrop",role:"dialog","aria-modal":"true",children:o.jsxs("div",{className:"hc-modal",children:[o.jsxs("header",{className:"hc-modal-header",children:[o.jsx("h3",{children:"Contact Support"}),o.jsx("button",{className:"hc-close",onClick:r,"aria-label":"Close",children:""})]}),o.jsxs("form",{className:"hc-form",onSubmit:x,children:[o.jsxs("label",{children:["Name",o.jsx("input",{value:a,onChange:b=>l(b.target.value),required:!0})]}),o.jsxs("label",{children:["Email",o.jsx("input",{type:"email",value:u,onChange:b=>d(b.target.value),required:!0})]}),o.jsxs("label",{children:["Subject",o.jsx("input",{value:m,onChange:b=>p(b.target.value)})]}),o.jsxs("label",{children:["Message",o.jsx("textarea",{value:y,onChange:b=>g(b.target.value),rows:6,required:!0})]}),o.jsxs("div",{className:"hc-actions",children:[o.jsx("button",{type:"button",className:"btn",onClick:r,children:"Cancel"}),o.jsx("button",{type:"submit",className:"btn btn-primary",children:"Send"})]})]})]})})}function Wx(){const[i,r]=j.useState(0),n=[{q:"How do I get my personalized workout plan?",a:"Complete the questionnaire accessible from the Get Started button. The AI will generate a 30-day plan based on your answers.",icon:o.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("path",{d:"M12 8v4l3 3"})]})},{q:"Can I change workouts or difficulty?",a:"Yes. On the calendar, tap a workout to see options for regenerating, swapping, or adjusting difficulty.",icon:o.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2"}),o.jsx("path",{d:"M16 3v4"}),o.jsx("path",{d:"M8 3v4"})]})},{q:"How do I restore my account or backups?",a:"If you signed up with an account, use Sign In to restore. If you used local storage, use the restore options in the settings or contact support for assistance.",icon:o.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]})},{q:"How is my data stored and protected?",a:"We store workout plans and profile data locally and optionally in cloud backups if enabled. See the Privacy Policy for more details.",icon:o.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 12h18"}),o.jsx("path",{d:"M3 6h18"}),o.jsx("path",{d:"M3 18h18"})]})}],a=l=>r(i===l?null:l);return o.jsx("div",{className:"accordion",role:"region","aria-label":"Help center FAQ",children:n.map((l,u)=>o.jsx("div",{className:`accordion-item ${i===u?"open":""}`,children:o.jsxs("div",{className:"accordion-card",children:[o.jsx("div",{className:"help-card-icon faq-icon","aria-hidden":!0,children:l.icon}),o.jsxs("div",{className:"accordion-main",children:[o.jsxs("button",{className:"accordion-button","aria-expanded":i===u,"aria-controls":`acc-panel-${u}`,id:`acc-btn-${u}`,onClick:()=>a(u),children:[o.jsx("span",{children:l.q}),o.jsx("svg",{className:"chev",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),o.jsx("div",{id:`acc-panel-${u}`,role:"region","aria-labelledby":`acc-btn-${u}`,className:"accordion-panel",children:o.jsx("p",{children:l.a})})]})]})},u))})}function $x(){const[i,r]=j.useState(null),[n,a]=j.useState(null),[l,u]=j.useState(0),d=qr(),[m,p]=j.useState(0);Rx(),j.useEffect(()=>{if(!i?.id)return;let g=!1;const b=setInterval(async()=>{if(g)return;const E=await So(i.id);E&&r(E)},1e3);return()=>{g=!0,clearInterval(b)}},[i?.id]),j.useEffect(()=>{const g=()=>r(null);return window.addEventListener("fitbuddy-logout",g),()=>window.removeEventListener("fitbuddy-logout",g)},[]),j.useEffect(()=>{const g=()=>{const x=jn(),b=Qs();x&&r(x),b&&(a(b),u(E=>E+1))};return window.addEventListener("fitbuddy-login",g),()=>window.removeEventListener("fitbuddy-login",g)},[]),j.useEffect(()=>{const g=()=>{const x=jn();x&&(!i||x.id===i.id)&&r(x)};return window.addEventListener("storage",g),()=>window.removeEventListener("storage",g)},[i]),j.useEffect(()=>{const g=jn(),x=Qs();console.log("App startup - raw fitbuddy_user_data:",localStorage.getItem("fitbuddy_user_data")),console.log("App startup - loadUserData ->",g),console.log("App startup - loadWorkoutPlan ->",x),g&&(r(g),g.id&&So(g.id).then(b=>{b&&r(b)})),x&&(a(x),u(b=>b+1))},[]),j.useEffect(()=>{i?lu(i,{skipBackup:!0}):localStorage.removeItem("fitbuddy_user_data")},[i]),j.useEffect(()=>{n&&bn(n)},[n]),j.useEffect(()=>{console.log("App: workoutPlan updated (version:",l,"):",n)},[n,l]);const y=g=>{r(x=>{if(!x)return x;const b=(x.energy||0)-g.price,E=Array.isArray(x.inventory)?x.inventory:[];return{...x,energy:b,inventory:[...E,g]}})};return o.jsxs("div",{className:"App",children:[o.jsx(vw,{userData:i,profileVersion:m}),o.jsx(Lx,{userData:i}),o.jsxs(fy,{children:[o.jsx(Mt,{path:"/",element:o.jsx(Fy,{})}),o.jsx(Mt,{path:"/profile",element:o.jsx(Sw,{userData:i,onProfileUpdate:g=>{r(g),p(x=>x+1)},profileVersion:m})}),o.jsx(Mt,{path:"/loading",element:o.jsx(ww,{})}),o.jsx(Mt,{path:"/questionnaire",element:o.jsx(Yy,{onComplete:(g,x)=>{r(g),a(x),u(b=>b+1),d("/calendar")}})}),o.jsx(Mt,{path:"/calendar",element:o.jsx(pf,{userData:i,children:o.jsx(gw,{workoutPlan:n,userData:i,onUpdatePlan:g=>{a(g),u(x=>x+1)}},l)})}),o.jsx(Mt,{path:"/shop",element:o.jsx(Cw,{user:i||{energy:0,inventory:[]},onPurchase:y})}),o.jsx(Mt,{path:"/chat",element:o.jsx(pf,{userData:i,children:o.jsx(Tw,{userData:i})})}),o.jsx(Mt,{path:"/admin",element:o.jsx(Ix,{})}),o.jsx(Mt,{path:"/help",element:o.jsx(Fx,{})}),o.jsx(Mt,{path:"/terms",element:o.jsx(Mx,{})}),o.jsx(Mt,{path:"/privacy",element:o.jsx(Ux,{})}),o.jsx(Mt,{path:"/signin",element:o.jsx(_w,{})}),o.jsx(Mt,{path:"/signup",element:o.jsx(jw,{})}),o.jsx(Mt,{path:"/rickroll",element:o.jsx(Dx,{})}),o.jsx(Mt,{path:"*",element:o.jsx(du,{})})]})]})}const zx=()=>{try{let i=!1;const r=async()=>{try{const n=localStorage.getItem("fitbuddy_user_data");if(!n)return;const a=JSON.parse(n),l=a?.id||a?.sub||null;if(!l)return;try{if((await ut(()=>Promise.resolve().then(()=>Vs),void 0)).beaconBackupUserData(String(l)))return}catch{}try{(await ut(()=>Promise.resolve().then(()=>Vs),void 0)).backupUserDataToServer(String(l))}catch{}}catch{}};i||(window.addEventListener("beforeunload",r,{passive:!0}),window.addEventListener("fitbuddy-logout",async()=>{try{const n=localStorage.getItem("fitbuddy_user_data");if(!n)return;const a=JSON.parse(n),l=a?.id||a?.sub||null;if(!l)return;const u=await ut(()=>Promise.resolve().then(()=>Vs),void 0);try{await u.backupAndDeleteSensitive(String(l))}catch{}try{await u.backupUserDataToServer(String(l))}catch{}}catch{}}),i=!0)}catch{}};zx();kg.createRoot(document.getElementById("root")).render(o.jsx(er.StrictMode,{children:o.jsx(xy,{children:o.jsx($x,{})})}));export{Ws as s};
