var vg=(s,n)=>()=>(n||s((n={exports:{}}).exports,n),n.exports);var vb=vg((jb,ia)=>{function wg(s,n){for(var r=0;r<n.length;r++){const o=n[r];if(typeof o!="string"&&!Array.isArray(o)){for(const l in o)if(l!=="default"&&!(l in s)){const c=Object.getOwnPropertyDescriptor(o,l);c&&Object.defineProperty(s,l,c.get?c:{enumerable:!0,get:()=>o[l]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();const xg="modulepreload",bg=function(s){return"/"+s},Gh={},$e=function(n,r,o){let l=Promise.resolve();if(r&&r.length>0){let g=function(y){return Promise.all(y.map(x=>Promise.resolve(x).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};var d=g;document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),p=m?.nonce||m?.getAttribute("nonce");l=g(r.map(y=>{if(y=bg(y),y in Gh)return;Gh[y]=!0;const x=y.endsWith(".css"),S=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${S}`))return;const C=document.createElement("link");if(C.rel=x?"stylesheet":xg,x||(C.as="script"),C.crossOrigin="",C.href=y,p&&C.setAttribute("nonce",p),document.head.appendChild(C),x)return new Promise((b,_)=>{C.addEventListener("load",b),C.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${y}`)))})}))}function c(m){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=m,window.dispatchEvent(p),!p.defaultPrevented)throw m}return l.then(m=>{for(const p of m||[])p.status==="rejected"&&c(p.reason);return n().catch(c)})};function ou(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function kg(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var n=s.default;if(typeof n=="function"){var r=function o(){var l=!1;try{l=this instanceof o}catch{}return l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(s).forEach(function(o){var l=Object.getOwnPropertyDescriptor(s,o);Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:function(){return s[o]}})}),r}var Sc={exports:{}},$i={},_c={exports:{}},Ue={};var Vh;function Sg(){if(Vh)return Ue;Vh=1;var s=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.iterator;function S(w){return w===null||typeof w!="object"?null:(w=x&&w[x]||w["@@iterator"],typeof w=="function"?w:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,_={};function k(w,O,J){this.props=w,this.context=O,this.refs=_,this.updater=J||C}k.prototype.isReactComponent={},k.prototype.setState=function(w,O){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,O,"setState")},k.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function $(){}$.prototype=k.prototype;function F(w,O,J){this.props=w,this.context=O,this.refs=_,this.updater=J||C}var U=F.prototype=new $;U.constructor=F,b(U,k.prototype),U.isPureReactComponent=!0;var B=Array.isArray,X=Object.prototype.hasOwnProperty,L={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function te(w,O,J){var ee,ie={},de=null,se=null;if(O!=null)for(ee in O.ref!==void 0&&(se=O.ref),O.key!==void 0&&(de=""+O.key),O)X.call(O,ee)&&!z.hasOwnProperty(ee)&&(ie[ee]=O[ee]);var he=arguments.length-2;if(he===1)ie.children=J;else if(1<he){for(var _e=Array(he),Ae=0;Ae<he;Ae++)_e[Ae]=arguments[Ae+2];ie.children=_e}if(w&&w.defaultProps)for(ee in he=w.defaultProps,he)ie[ee]===void 0&&(ie[ee]=he[ee]);return{$$typeof:s,type:w,key:de,ref:se,props:ie,_owner:L.current}}function ue(w,O){return{$$typeof:s,type:w.type,key:O,ref:w.ref,props:w.props,_owner:w._owner}}function fe(w){return typeof w=="object"&&w!==null&&w.$$typeof===s}function K(w){var O={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(J){return O[J]})}var oe=/\/+/g;function re(w,O){return typeof w=="object"&&w!==null&&w.key!=null?K(""+w.key):O.toString(36)}function V(w,O,J,ee,ie){var de=typeof w;(de==="undefined"||de==="boolean")&&(w=null);var se=!1;if(w===null)se=!0;else switch(de){case"string":case"number":se=!0;break;case"object":switch(w.$$typeof){case s:case n:se=!0}}if(se)return se=w,ie=ie(se),w=ee===""?"."+re(se,0):ee,B(ie)?(J="",w!=null&&(J=w.replace(oe,"$&/")+"/"),V(ie,O,J,"",function(Ae){return Ae})):ie!=null&&(fe(ie)&&(ie=ue(ie,J+(!ie.key||se&&se.key===ie.key?"":(""+ie.key).replace(oe,"$&/")+"/")+w)),O.push(ie)),1;if(se=0,ee=ee===""?".":ee+":",B(w))for(var he=0;he<w.length;he++){de=w[he];var _e=ee+re(de,he);se+=V(de,O,J,_e,ie)}else if(_e=S(w),typeof _e=="function")for(w=_e.call(w),he=0;!(de=w.next()).done;)de=de.value,_e=ee+re(de,he++),se+=V(de,O,J,_e,ie);else if(de==="object")throw O=String(w),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return se}function ce(w,O,J){if(w==null)return w;var ee=[],ie=0;return V(w,ee,"","",function(de){return O.call(J,de,ie++)}),ee}function pe(w){if(w._status===-1){var O=w._result;O=O(),O.then(function(J){(w._status===0||w._status===-1)&&(w._status=1,w._result=J)},function(J){(w._status===0||w._status===-1)&&(w._status=2,w._result=J)}),w._status===-1&&(w._status=0,w._result=O)}if(w._status===1)return w._result.default;throw w._result}var q={current:null},H={transition:null},ae={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:H,ReactCurrentOwner:L};function N(){throw Error("act(...) is not supported in production builds of React.")}return Ue.Children={map:ce,forEach:function(w,O,J){ce(w,function(){O.apply(this,arguments)},J)},count:function(w){var O=0;return ce(w,function(){O++}),O},toArray:function(w){return ce(w,function(O){return O})||[]},only:function(w){if(!fe(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},Ue.Component=k,Ue.Fragment=r,Ue.Profiler=l,Ue.PureComponent=F,Ue.StrictMode=o,Ue.Suspense=p,Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,Ue.act=N,Ue.cloneElement=function(w,O,J){if(w==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+w+".");var ee=b({},w.props),ie=w.key,de=w.ref,se=w._owner;if(O!=null){if(O.ref!==void 0&&(de=O.ref,se=L.current),O.key!==void 0&&(ie=""+O.key),w.type&&w.type.defaultProps)var he=w.type.defaultProps;for(_e in O)X.call(O,_e)&&!z.hasOwnProperty(_e)&&(ee[_e]=O[_e]===void 0&&he!==void 0?he[_e]:O[_e])}var _e=arguments.length-2;if(_e===1)ee.children=J;else if(1<_e){he=Array(_e);for(var Ae=0;Ae<_e;Ae++)he[Ae]=arguments[Ae+2];ee.children=he}return{$$typeof:s,type:w.type,key:ie,ref:de,props:ee,_owner:se}},Ue.createContext=function(w){return w={$$typeof:d,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},w.Provider={$$typeof:c,_context:w},w.Consumer=w},Ue.createElement=te,Ue.createFactory=function(w){var O=te.bind(null,w);return O.type=w,O},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(w){return{$$typeof:m,render:w}},Ue.isValidElement=fe,Ue.lazy=function(w){return{$$typeof:y,_payload:{_status:-1,_result:w},_init:pe}},Ue.memo=function(w,O){return{$$typeof:g,type:w,compare:O===void 0?null:O}},Ue.startTransition=function(w){var O=H.transition;H.transition={};try{w()}finally{H.transition=O}},Ue.unstable_act=N,Ue.useCallback=function(w,O){return q.current.useCallback(w,O)},Ue.useContext=function(w){return q.current.useContext(w)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(w){return q.current.useDeferredValue(w)},Ue.useEffect=function(w,O){return q.current.useEffect(w,O)},Ue.useId=function(){return q.current.useId()},Ue.useImperativeHandle=function(w,O,J){return q.current.useImperativeHandle(w,O,J)},Ue.useInsertionEffect=function(w,O){return q.current.useInsertionEffect(w,O)},Ue.useLayoutEffect=function(w,O){return q.current.useLayoutEffect(w,O)},Ue.useMemo=function(w,O){return q.current.useMemo(w,O)},Ue.useReducer=function(w,O,J){return q.current.useReducer(w,O,J)},Ue.useRef=function(w){return q.current.useRef(w)},Ue.useState=function(w){return q.current.useState(w)},Ue.useSyncExternalStore=function(w,O,J){return q.current.useSyncExternalStore(w,O,J)},Ue.useTransition=function(){return q.current.useTransition()},Ue.version="18.3.1",Ue}var Jh;function lu(){return Jh||(Jh=1,_c.exports=Sg()),_c.exports}var Kh;function _g(){if(Kh)return $i;Kh=1;var s=lu(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(m,p,g){var y,x={},S=null,C=null;g!==void 0&&(S=""+g),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(C=p.ref);for(y in p)o.call(p,y)&&!c.hasOwnProperty(y)&&(x[y]=p[y]);if(m&&m.defaultProps)for(y in p=m.defaultProps,p)x[y]===void 0&&(x[y]=p[y]);return{$$typeof:n,type:m,key:S,ref:C,props:x,_owner:l.current}}return $i.Fragment=r,$i.jsx=d,$i.jsxs=d,$i}var Qh;function jg(){return Qh||(Qh=1,Sc.exports=_g()),Sc.exports}var a=jg(),E=lu();const nn=ou(E),Eg=wg({__proto__:null,default:nn},[E]);var yo={},jc={exports:{}},Qt={},Ec={exports:{}},Nc={};var Yh;function Ng(){return Yh||(Yh=1,function(s){function n(H,ae){var N=H.length;H.push(ae);e:for(;0<N;){var w=N-1>>>1,O=H[w];if(0<l(O,ae))H[w]=ae,H[N]=O,N=w;else break e}}function r(H){return H.length===0?null:H[0]}function o(H){if(H.length===0)return null;var ae=H[0],N=H.pop();if(N!==ae){H[0]=N;e:for(var w=0,O=H.length,J=O>>>1;w<J;){var ee=2*(w+1)-1,ie=H[ee],de=ee+1,se=H[de];if(0>l(ie,N))de<O&&0>l(se,ie)?(H[w]=se,H[de]=N,w=de):(H[w]=ie,H[ee]=N,w=ee);else if(de<O&&0>l(se,N))H[w]=se,H[de]=N,w=de;else break e}}return ae}function l(H,ae){var N=H.sortIndex-ae.sortIndex;return N!==0?N:H.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();s.unstable_now=function(){return d.now()-m}}var p=[],g=[],y=1,x=null,S=3,C=!1,b=!1,_=!1,k=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(H){for(var ae=r(g);ae!==null;){if(ae.callback===null)o(g);else if(ae.startTime<=H)o(g),ae.sortIndex=ae.expirationTime,n(p,ae);else break;ae=r(g)}}function B(H){if(_=!1,U(H),!b)if(r(p)!==null)b=!0,pe(X);else{var ae=r(g);ae!==null&&q(B,ae.startTime-H)}}function X(H,ae){b=!1,_&&(_=!1,$(te),te=-1),C=!0;var N=S;try{for(U(ae),x=r(p);x!==null&&(!(x.expirationTime>ae)||H&&!K());){var w=x.callback;if(typeof w=="function"){x.callback=null,S=x.priorityLevel;var O=w(x.expirationTime<=ae);ae=s.unstable_now(),typeof O=="function"?x.callback=O:x===r(p)&&o(p),U(ae)}else o(p);x=r(p)}if(x!==null)var J=!0;else{var ee=r(g);ee!==null&&q(B,ee.startTime-ae),J=!1}return J}finally{x=null,S=N,C=!1}}var L=!1,z=null,te=-1,ue=5,fe=-1;function K(){return!(s.unstable_now()-fe<ue)}function oe(){if(z!==null){var H=s.unstable_now();fe=H;var ae=!0;try{ae=z(!0,H)}finally{ae?re():(L=!1,z=null)}}else L=!1}var re;if(typeof F=="function")re=function(){F(oe)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ce=V.port2;V.port1.onmessage=oe,re=function(){ce.postMessage(null)}}else re=function(){k(oe,0)};function pe(H){z=H,L||(L=!0,re())}function q(H,ae){te=k(function(){H(s.unstable_now())},ae)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(H){H.callback=null},s.unstable_continueExecution=function(){b||C||(b=!0,pe(X))},s.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<H?Math.floor(1e3/H):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_getFirstCallbackNode=function(){return r(p)},s.unstable_next=function(H){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var N=S;S=ae;try{return H()}finally{S=N}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(H,ae){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var N=S;S=H;try{return ae()}finally{S=N}},s.unstable_scheduleCallback=function(H,ae,N){var w=s.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?w+N:w):N=w,H){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=N+O,H={id:y++,callback:ae,priorityLevel:H,startTime:N,expirationTime:O,sortIndex:-1},N>w?(H.sortIndex=N,n(g,H),r(p)===null&&H===r(g)&&(_?($(te),te=-1):_=!0,q(B,N-w))):(H.sortIndex=O,n(p,H),b||C||(b=!0,pe(X))),H},s.unstable_shouldYield=K,s.unstable_wrapCallback=function(H){var ae=S;return function(){var N=S;S=ae;try{return H.apply(this,arguments)}finally{S=N}}}}(Nc)),Nc}var Xh;function Cg(){return Xh||(Xh=1,Ec.exports=Ng()),Ec.exports}var Zh;function Tg(){if(Zh)return Qt;Zh=1;var s=lu(),n=Cg();function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function c(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(l[e]=t,e=0;e<t.length;e++)o.add(t[e])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},x={};function S(e){return p.call(x,e)?!0:p.call(y,e)?!1:g.test(e)?x[e]=!0:(y[e]=!0,!1)}function C(e,t,i,u){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return u?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function b(e,t,i,u){if(t===null||typeof t>"u"||C(e,t,i,u))return!0;if(u)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _(e,t,i,u,h,f,v){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=v}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){k[e]=new _(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];k[t]=new _(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){k[e]=new _(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){k[e]=new _(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){k[e]=new _(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){k[e]=new _(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){k[e]=new _(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){k[e]=new _(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){k[e]=new _(e,5,!1,e.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function F(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($,F);k[t]=new _(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($,F);k[t]=new _(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($,F);k[t]=new _(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){k[e]=new _(e,1,!1,e.toLowerCase(),null,!1,!1)}),k.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){k[e]=new _(e,1,!1,e.toLowerCase(),null,!0,!0)});function U(e,t,i,u){var h=k.hasOwnProperty(t)?k[t]:null;(h!==null?h.type!==0:u||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(b(t,i,h,u)&&(i=null),u||h===null?S(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):h.mustUseProperty?e[h.propertyName]=i===null?h.type===3?!1:"":i:(t=h.attributeName,u=h.attributeNamespace,i===null?e.removeAttribute(t):(h=h.type,i=h===3||h===4&&i===!0?"":""+i,u?e.setAttributeNS(u,t,i):e.setAttribute(t,i))))}var B=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),L=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),ue=Symbol.for("react.profiler"),fe=Symbol.for("react.provider"),K=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),H=Symbol.iterator;function ae(e){return e===null||typeof e!="object"?null:(e=H&&e[H]||e["@@iterator"],typeof e=="function"?e:null)}var N=Object.assign,w;function O(e){if(w===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);w=t&&t[1]||""}return`
`+w+e}var J=!1;function ee(e,t){if(!e||J)return"";J=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(M){var u=M}Reflect.construct(e,[],t)}else{try{t.call()}catch(M){u=M}e.call(t.prototype)}else{try{throw Error()}catch(M){u=M}e()}}catch(M){if(M&&u&&typeof M.stack=="string"){for(var h=M.stack.split(`
`),f=u.stack.split(`
`),v=h.length-1,j=f.length-1;1<=v&&0<=j&&h[v]!==f[j];)j--;for(;1<=v&&0<=j;v--,j--)if(h[v]!==f[j]){if(v!==1||j!==1)do if(v--,j--,0>j||h[v]!==f[j]){var T=`
`+h[v].replace(" at new "," at ");return e.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",e.displayName)),T}while(1<=v&&0<=j);break}}}finally{J=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?O(e):""}function ie(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=ee(e.type,!1),e;case 11:return e=ee(e.type.render,!1),e;case 1:return e=ee(e.type,!0),e;default:return""}}function de(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case z:return"Fragment";case L:return"Portal";case ue:return"Profiler";case te:return"StrictMode";case re:return"Suspense";case V:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case K:return(e.displayName||"Context")+".Consumer";case fe:return(e._context.displayName||"Context")+".Provider";case oe:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ce:return t=e.displayName||null,t!==null?t:de(e.type)||"Memo";case pe:t=e._payload,e=e._init;try{return de(e(t))}catch{}}return null}function se(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(t);case 8:return t===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function he(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _e(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ae(e){var t=_e(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),u=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var h=i.get,f=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return h.call(this)},set:function(v){u=""+v,f.call(this,v)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Be(e){e._valueTracker||(e._valueTracker=Ae(e))}function Je(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),u="";return e&&(u=_e(e)?e.checked?"true":"false":e.value),e=u,e!==i?(t.setValue(e),!0):!1}function Ze(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ie(e,t){var i=t.checked;return N({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function I(e,t){var i=t.defaultValue==null?"":t.defaultValue,u=t.checked!=null?t.checked:t.defaultChecked;i=he(t.value!=null?t.value:i),e._wrapperState={initialChecked:u,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function W(e,t){t=t.checked,t!=null&&U(e,"checked",t,!1)}function ye(e,t){W(e,t);var i=he(t.value),u=t.type;if(i!=null)u==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(u==="submit"||u==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xe(e,t.type,i):t.hasOwnProperty("defaultValue")&&xe(e,t.type,he(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function je(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var u=t.type;if(!(u!=="submit"&&u!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function xe(e,t,i){(t!=="number"||Ze(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Se=Array.isArray;function Ce(e,t,i,u){if(e=e.options,t){t={};for(var h=0;h<i.length;h++)t["$"+i[h]]=!0;for(i=0;i<e.length;i++)h=t.hasOwnProperty("$"+e[i].value),e[i].selected!==h&&(e[i].selected=h),h&&u&&(e[i].defaultSelected=!0)}else{for(i=""+he(i),t=null,h=0;h<e.length;h++){if(e[h].value===i){e[h].selected=!0,u&&(e[h].defaultSelected=!0);return}t!==null||e[h].disabled||(t=e[h])}t!==null&&(t.selected=!0)}}function Te(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(r(91));return N({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Re(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(r(92));if(Se(i)){if(1<i.length)throw Error(r(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:he(i)}}function nt(e,t){var i=he(t.value),u=he(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),u!=null&&(e.defaultValue=""+u)}function ot(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ht(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function At(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ht(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var St,gn=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,u,h){MSApp.execUnsafeLocalFunction(function(){return e(t,i,u,h)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(St=St||document.createElement("div"),St.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=St.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function It(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Rt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_t=["Webkit","ms","Moz","O"];Object.keys(Rt).forEach(function(e){_t.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Rt[t]=Rt[e]})});function Yn(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Rt.hasOwnProperty(e)&&Rt[e]?(""+t).trim():t+"px"}function rn(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var u=i.indexOf("--")===0,h=Yn(i,t[i],u);i==="float"&&(i="cssFloat"),u?e.setProperty(i,h):e[i]=h}}var Bo=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ar(e,t){if(t){if(Bo[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(r(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(t.style!=null&&typeof t.style!="object")throw Error(r(62))}}function Ir(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cs=null;function us(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ii=null,Xn=null,Zn=null;function ds(e){if(e=Ni(e)){if(typeof ii!="function")throw Error(r(280));var t=e.stateNode;t&&(t=Oa(t),ii(e.stateNode,e.type,t))}}function la(e){Xn?Zn?Zn.push(e):Zn=[e]:Xn=e}function ca(){if(Xn){var e=Xn,t=Zn;if(Zn=Xn=null,ds(e),t)for(e=0;e<t.length;e++)ds(t[e])}}function ua(e,t){return e(t)}function da(){}var ai=!1;function ha(e,t,i){if(ai)return e(t,i);ai=!0;try{return ua(e,t,i)}finally{ai=!1,(Xn!==null||Zn!==null)&&(da(),ca())}}function er(e,t){var i=e.stateNode;if(i===null)return null;var u=Oa(i);if(u===null)return null;i=u[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(r(231,t,typeof i));return i}var oi=!1;if(m)try{var Rr={};Object.defineProperty(Rr,"passive",{get:function(){oi=!0}}),window.addEventListener("test",Rr,Rr),window.removeEventListener("test",Rr,Rr)}catch{oi=!1}function Wo(e,t,i,u,h,f,v,j,T){var M=Array.prototype.slice.call(arguments,3);try{t.apply(i,M)}catch(Y){this.onError(Y)}}var Dr=!1,hs=null,fs=!1,li=null,tr={onError:function(e){Dr=!0,hs=e}};function $o(e,t,i,u,h,f,v,j,T){Dr=!1,hs=null,Wo.apply(tr,arguments)}function zo(e,t,i,u,h,f,v,j,T){if($o.apply(this,arguments),Dr){if(Dr){var M=hs;Dr=!1,hs=null}else throw Error(r(198));fs||(fs=!0,li=M)}}function Dn(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function D(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function G(e){if(Dn(e)!==e)throw Error(r(188))}function le(e){var t=e.alternate;if(!t){if(t=Dn(e),t===null)throw Error(r(188));return t!==e?null:e}for(var i=e,u=t;;){var h=i.return;if(h===null)break;var f=h.alternate;if(f===null){if(u=h.return,u!==null){i=u;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===i)return G(h),e;if(f===u)return G(h),t;f=f.sibling}throw Error(r(188))}if(i.return!==u.return)i=h,u=f;else{for(var v=!1,j=h.child;j;){if(j===i){v=!0,i=h,u=f;break}if(j===u){v=!0,u=h,i=f;break}j=j.sibling}if(!v){for(j=f.child;j;){if(j===i){v=!0,i=f,u=h;break}if(j===u){v=!0,u=f,i=h;break}j=j.sibling}if(!v)throw Error(r(189))}}if(i.alternate!==u)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?e:t}function ge(e){return e=le(e),e!==null?Me(e):null}function Me(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Me(e);if(t!==null)return t;e=e.sibling}return null}var We=n.unstable_scheduleCallback,He=n.unstable_cancelCallback,ze=n.unstable_shouldYield,qt=n.unstable_requestPaint,Qe=n.unstable_now,Ln=n.unstable_getCurrentPriorityLevel,Ke=n.unstable_ImmediatePriority,rt=n.unstable_UserBlockingPriority,Yt=n.unstable_NormalPriority,Lr=n.unstable_LowPriority,Mn=n.unstable_IdlePriority,Pe=null,sn=null;function De(e){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Pe,e,void 0,(e.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:Lp,Rp=Math.log,Dp=Math.LN2;function Lp(e){return e>>>=0,e===0?32:31-(Rp(e)/Dp|0)|0}var fa=64,pa=4194304;function ci(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ma(e,t){var i=e.pendingLanes;if(i===0)return 0;var u=0,h=e.suspendedLanes,f=e.pingedLanes,v=i&268435455;if(v!==0){var j=v&~h;j!==0?u=ci(j):(f&=v,f!==0&&(u=ci(f)))}else v=i&~h,v!==0?u=ci(v):f!==0&&(u=ci(f));if(u===0)return 0;if(t!==0&&t!==u&&(t&h)===0&&(h=u&-u,f=t&-t,h>=f||h===16&&(f&4194240)!==0))return t;if((u&4)!==0&&(u|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=u;0<t;)i=31-yn(t),h=1<<i,u|=e[i],t&=~h;return u}function Mp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Up(e,t){for(var i=e.suspendedLanes,u=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes;0<f;){var v=31-yn(f),j=1<<v,T=h[v];T===-1?((j&i)===0||(j&u)!==0)&&(h[v]=Mp(j,t)):T<=t&&(e.expiredLanes|=j),f&=~j}}function qo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Su(){var e=fa;return fa<<=1,(fa&4194240)===0&&(fa=64),e}function Ho(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function ui(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-yn(t),e[t]=i}function Fp(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var u=e.eventTimes;for(e=e.expirationTimes;0<i;){var h=31-yn(i),f=1<<h;t[h]=0,u[h]=-1,e[h]=-1,i&=~f}}function Go(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var u=31-yn(i),h=1<<u;h&t|e[u]&t&&(e[u]|=t),i&=~h}}var Ye=0;function _u(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var ju,Vo,Eu,Nu,Cu,Jo=!1,ga=[],nr=null,rr=null,sr=null,di=new Map,hi=new Map,ir=[],Bp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tu(e,t){switch(e){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":di.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hi.delete(t.pointerId)}}function fi(e,t,i,u,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:i,eventSystemFlags:u,nativeEvent:f,targetContainers:[h]},t!==null&&(t=Ni(t),t!==null&&Vo(t)),e):(e.eventSystemFlags|=u,t=e.targetContainers,h!==null&&t.indexOf(h)===-1&&t.push(h),e)}function Wp(e,t,i,u,h){switch(t){case"focusin":return nr=fi(nr,e,t,i,u,h),!0;case"dragenter":return rr=fi(rr,e,t,i,u,h),!0;case"mouseover":return sr=fi(sr,e,t,i,u,h),!0;case"pointerover":var f=h.pointerId;return di.set(f,fi(di.get(f)||null,e,t,i,u,h)),!0;case"gotpointercapture":return f=h.pointerId,hi.set(f,fi(hi.get(f)||null,e,t,i,u,h)),!0}return!1}function Pu(e){var t=Mr(e.target);if(t!==null){var i=Dn(t);if(i!==null){if(t=i.tag,t===13){if(t=D(i),t!==null){e.blockedOn=t,Cu(e.priority,function(){Eu(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ya(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Qo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var u=new i.constructor(i.type,i);cs=u,i.target.dispatchEvent(u),cs=null}else return t=Ni(i),t!==null&&Vo(t),e.blockedOn=i,!1;t.shift()}return!0}function Ou(e,t,i){ya(e)&&i.delete(t)}function $p(){Jo=!1,nr!==null&&ya(nr)&&(nr=null),rr!==null&&ya(rr)&&(rr=null),sr!==null&&ya(sr)&&(sr=null),di.forEach(Ou),hi.forEach(Ou)}function pi(e,t){e.blockedOn===t&&(e.blockedOn=null,Jo||(Jo=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,$p)))}function mi(e){function t(h){return pi(h,e)}if(0<ga.length){pi(ga[0],e);for(var i=1;i<ga.length;i++){var u=ga[i];u.blockedOn===e&&(u.blockedOn=null)}}for(nr!==null&&pi(nr,e),rr!==null&&pi(rr,e),sr!==null&&pi(sr,e),di.forEach(t),hi.forEach(t),i=0;i<ir.length;i++)u=ir[i],u.blockedOn===e&&(u.blockedOn=null);for(;0<ir.length&&(i=ir[0],i.blockedOn===null);)Pu(i),i.blockedOn===null&&ir.shift()}var ps=B.ReactCurrentBatchConfig,va=!0;function zp(e,t,i,u){var h=Ye,f=ps.transition;ps.transition=null;try{Ye=1,Ko(e,t,i,u)}finally{Ye=h,ps.transition=f}}function qp(e,t,i,u){var h=Ye,f=ps.transition;ps.transition=null;try{Ye=4,Ko(e,t,i,u)}finally{Ye=h,ps.transition=f}}function Ko(e,t,i,u){if(va){var h=Qo(e,t,i,u);if(h===null)fl(e,t,u,wa,i),Tu(e,u);else if(Wp(h,e,t,i,u))u.stopPropagation();else if(Tu(e,u),t&4&&-1<Bp.indexOf(e)){for(;h!==null;){var f=Ni(h);if(f!==null&&ju(f),f=Qo(e,t,i,u),f===null&&fl(e,t,u,wa,i),f===h)break;h=f}h!==null&&u.stopPropagation()}else fl(e,t,u,null,i)}}var wa=null;function Qo(e,t,i,u){if(wa=null,e=us(u),e=Mr(e),e!==null)if(t=Dn(e),t===null)e=null;else if(i=t.tag,i===13){if(e=D(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wa=e,null}function Au(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ln()){case Ke:return 1;case rt:return 4;case Yt:case Lr:return 16;case Mn:return 536870912;default:return 16}default:return 16}}var ar=null,Yo=null,xa=null;function Iu(){if(xa)return xa;var e,t=Yo,i=t.length,u,h="value"in ar?ar.value:ar.textContent,f=h.length;for(e=0;e<i&&t[e]===h[e];e++);var v=i-e;for(u=1;u<=v&&t[i-u]===h[f-u];u++);return xa=h.slice(e,1<u?1-u:void 0)}function ba(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ka(){return!0}function Ru(){return!1}function Xt(e){function t(i,u,h,f,v){this._reactName=i,this._targetInst=h,this.type=u,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(i=e[j],this[j]=i?i(f):f[j]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ka:Ru,this.isPropagationStopped=Ru,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ka)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ka)},persist:function(){},isPersistent:ka}),t}var ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xo=Xt(ms),gi=N({},ms,{view:0,detail:0}),Hp=Xt(gi),Zo,el,yi,Sa=N({},gi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yi&&(yi&&e.type==="mousemove"?(Zo=e.screenX-yi.screenX,el=e.screenY-yi.screenY):el=Zo=0,yi=e),Zo)},movementY:function(e){return"movementY"in e?e.movementY:el}}),Du=Xt(Sa),Gp=N({},Sa,{dataTransfer:0}),Vp=Xt(Gp),Jp=N({},gi,{relatedTarget:0}),tl=Xt(Jp),Kp=N({},ms,{animationName:0,elapsedTime:0,pseudoElement:0}),Qp=Xt(Kp),Yp=N({},ms,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xp=Xt(Yp),Zp=N({},ms,{data:0}),Lu=Xt(Zp),em={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=nm[e])?!!t[e]:!1}function nl(){return rm}var sm=N({},gi,{key:function(e){if(e.key){var t=em[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ba(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nl,charCode:function(e){return e.type==="keypress"?ba(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ba(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),im=Xt(sm),am=N({},Sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mu=Xt(am),om=N({},gi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nl}),lm=Xt(om),cm=N({},ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),um=Xt(cm),dm=N({},Sa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hm=Xt(dm),fm=[9,13,27,32],rl=m&&"CompositionEvent"in window,vi=null;m&&"documentMode"in document&&(vi=document.documentMode);var pm=m&&"TextEvent"in window&&!vi,Uu=m&&(!rl||vi&&8<vi&&11>=vi),Fu=" ",Bu=!1;function Wu(e,t){switch(e){case"keyup":return fm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $u(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gs=!1;function mm(e,t){switch(e){case"compositionend":return $u(t);case"keypress":return t.which!==32?null:(Bu=!0,Fu);case"textInput":return e=t.data,e===Fu&&Bu?null:e;default:return null}}function gm(e,t){if(gs)return e==="compositionend"||!rl&&Wu(e,t)?(e=Iu(),xa=Yo=ar=null,gs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Uu&&t.locale!=="ko"?null:t.data;default:return null}}var ym={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ym[e.type]:t==="textarea"}function qu(e,t,i,u){la(u),t=Ca(t,"onChange"),0<t.length&&(i=new Xo("onChange","change",null,i,u),e.push({event:i,listeners:t}))}var wi=null,xi=null;function vm(e){ld(e,0)}function _a(e){var t=bs(e);if(Je(t))return e}function wm(e,t){if(e==="change")return t}var Hu=!1;if(m){var sl;if(m){var il="oninput"in document;if(!il){var Gu=document.createElement("div");Gu.setAttribute("oninput","return;"),il=typeof Gu.oninput=="function"}sl=il}else sl=!1;Hu=sl&&(!document.documentMode||9<document.documentMode)}function Vu(){wi&&(wi.detachEvent("onpropertychange",Ju),xi=wi=null)}function Ju(e){if(e.propertyName==="value"&&_a(xi)){var t=[];qu(t,xi,e,us(e)),ha(vm,t)}}function xm(e,t,i){e==="focusin"?(Vu(),wi=t,xi=i,wi.attachEvent("onpropertychange",Ju)):e==="focusout"&&Vu()}function bm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _a(xi)}function km(e,t){if(e==="click")return _a(t)}function Sm(e,t){if(e==="input"||e==="change")return _a(t)}function _m(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vn=typeof Object.is=="function"?Object.is:_m;function bi(e,t){if(vn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),u=Object.keys(t);if(i.length!==u.length)return!1;for(u=0;u<i.length;u++){var h=i[u];if(!p.call(t,h)||!vn(e[h],t[h]))return!1}return!0}function Ku(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qu(e,t){var i=Ku(e);e=0;for(var u;i;){if(i.nodeType===3){if(u=e+i.textContent.length,e<=t&&u>=t)return{node:i,offset:t-e};e=u}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Ku(i)}}function Yu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Yu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Xu(){for(var e=window,t=Ze();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Ze(e.document)}return t}function al(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function jm(e){var t=Xu(),i=e.focusedElem,u=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&Yu(i.ownerDocument.documentElement,i)){if(u!==null&&al(i)){if(t=u.start,e=u.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var h=i.textContent.length,f=Math.min(u.start,h);u=u.end===void 0?f:Math.min(u.end,h),!e.extend&&f>u&&(h=u,u=f,f=h),h=Qu(i,f);var v=Qu(i,u);h&&v&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==v.node||e.focusOffset!==v.offset)&&(t=t.createRange(),t.setStart(h.node,h.offset),e.removeAllRanges(),f>u?(e.addRange(t),e.extend(v.node,v.offset)):(t.setEnd(v.node,v.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Em=m&&"documentMode"in document&&11>=document.documentMode,ys=null,ol=null,ki=null,ll=!1;function Zu(e,t,i){var u=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;ll||ys==null||ys!==Ze(u)||(u=ys,"selectionStart"in u&&al(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ki&&bi(ki,u)||(ki=u,u=Ca(ol,"onSelect"),0<u.length&&(t=new Xo("onSelect","select",null,t,i),e.push({event:t,listeners:u}),t.target=ys)))}function ja(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var vs={animationend:ja("Animation","AnimationEnd"),animationiteration:ja("Animation","AnimationIteration"),animationstart:ja("Animation","AnimationStart"),transitionend:ja("Transition","TransitionEnd")},cl={},ed={};m&&(ed=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function Ea(e){if(cl[e])return cl[e];if(!vs[e])return e;var t=vs[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in ed)return cl[e]=t[i];return e}var td=Ea("animationend"),nd=Ea("animationiteration"),rd=Ea("animationstart"),sd=Ea("transitionend"),id=new Map,ad="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function or(e,t){id.set(e,t),c(t,[e])}for(var ul=0;ul<ad.length;ul++){var dl=ad[ul],Nm=dl.toLowerCase(),Cm=dl[0].toUpperCase()+dl.slice(1);or(Nm,"on"+Cm)}or(td,"onAnimationEnd"),or(nd,"onAnimationIteration"),or(rd,"onAnimationStart"),or("dblclick","onDoubleClick"),or("focusin","onFocus"),or("focusout","onBlur"),or(sd,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Si="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Si));function od(e,t,i){var u=e.type||"unknown-event";e.currentTarget=i,zo(u,t,void 0,e),e.currentTarget=null}function ld(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var u=e[i],h=u.event;u=u.listeners;e:{var f=void 0;if(t)for(var v=u.length-1;0<=v;v--){var j=u[v],T=j.instance,M=j.currentTarget;if(j=j.listener,T!==f&&h.isPropagationStopped())break e;od(h,j,M),f=T}else for(v=0;v<u.length;v++){if(j=u[v],T=j.instance,M=j.currentTarget,j=j.listener,T!==f&&h.isPropagationStopped())break e;od(h,j,M),f=T}}}if(fs)throw e=li,fs=!1,li=null,e}function st(e,t){var i=t[wl];i===void 0&&(i=t[wl]=new Set);var u=e+"__bubble";i.has(u)||(cd(t,e,2,!1),i.add(u))}function hl(e,t,i){var u=0;t&&(u|=4),cd(i,e,u,t)}var Na="_reactListening"+Math.random().toString(36).slice(2);function _i(e){if(!e[Na]){e[Na]=!0,o.forEach(function(i){i!=="selectionchange"&&(Tm.has(i)||hl(i,!1,e),hl(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Na]||(t[Na]=!0,hl("selectionchange",!1,t))}}function cd(e,t,i,u){switch(Au(t)){case 1:var h=zp;break;case 4:h=qp;break;default:h=Ko}i=h.bind(null,t,i,e),h=void 0,!oi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(h=!0),u?h!==void 0?e.addEventListener(t,i,{capture:!0,passive:h}):e.addEventListener(t,i,!0):h!==void 0?e.addEventListener(t,i,{passive:h}):e.addEventListener(t,i,!1)}function fl(e,t,i,u,h){var f=u;if((t&1)===0&&(t&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var j=u.stateNode.containerInfo;if(j===h||j.nodeType===8&&j.parentNode===h)break;if(v===4)for(v=u.return;v!==null;){var T=v.tag;if((T===3||T===4)&&(T=v.stateNode.containerInfo,T===h||T.nodeType===8&&T.parentNode===h))return;v=v.return}for(;j!==null;){if(v=Mr(j),v===null)return;if(T=v.tag,T===5||T===6){u=f=v;continue e}j=j.parentNode}}u=u.return}ha(function(){var M=f,Y=us(i),Z=[];e:{var Q=id.get(e);if(Q!==void 0){var me=Xo,we=e;switch(e){case"keypress":if(ba(i)===0)break e;case"keydown":case"keyup":me=im;break;case"focusin":we="focus",me=tl;break;case"focusout":we="blur",me=tl;break;case"beforeblur":case"afterblur":me=tl;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=Du;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=Vp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=lm;break;case td:case nd:case rd:me=Qp;break;case sd:me=um;break;case"scroll":me=Hp;break;case"wheel":me=hm;break;case"copy":case"cut":case"paste":me=Xp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=Mu}var be=(t&4)!==0,ft=!be&&e==="scroll",A=be?Q!==null?Q+"Capture":null:Q;be=[];for(var P=M,R;P!==null;){R=P;var ne=R.stateNode;if(R.tag===5&&ne!==null&&(R=ne,A!==null&&(ne=er(P,A),ne!=null&&be.push(ji(P,ne,R)))),ft)break;P=P.return}0<be.length&&(Q=new me(Q,we,null,i,Y),Z.push({event:Q,listeners:be}))}}if((t&7)===0){e:{if(Q=e==="mouseover"||e==="pointerover",me=e==="mouseout"||e==="pointerout",Q&&i!==cs&&(we=i.relatedTarget||i.fromElement)&&(Mr(we)||we[Un]))break e;if((me||Q)&&(Q=Y.window===Y?Y:(Q=Y.ownerDocument)?Q.defaultView||Q.parentWindow:window,me?(we=i.relatedTarget||i.toElement,me=M,we=we?Mr(we):null,we!==null&&(ft=Dn(we),we!==ft||we.tag!==5&&we.tag!==6)&&(we=null)):(me=null,we=M),me!==we)){if(be=Du,ne="onMouseLeave",A="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(be=Mu,ne="onPointerLeave",A="onPointerEnter",P="pointer"),ft=me==null?Q:bs(me),R=we==null?Q:bs(we),Q=new be(ne,P+"leave",me,i,Y),Q.target=ft,Q.relatedTarget=R,ne=null,Mr(Y)===M&&(be=new be(A,P+"enter",we,i,Y),be.target=R,be.relatedTarget=ft,ne=be),ft=ne,me&&we)t:{for(be=me,A=we,P=0,R=be;R;R=ws(R))P++;for(R=0,ne=A;ne;ne=ws(ne))R++;for(;0<P-R;)be=ws(be),P--;for(;0<R-P;)A=ws(A),R--;for(;P--;){if(be===A||A!==null&&be===A.alternate)break t;be=ws(be),A=ws(A)}be=null}else be=null;me!==null&&ud(Z,Q,me,be,!1),we!==null&&ft!==null&&ud(Z,ft,we,be,!0)}}e:{if(Q=M?bs(M):window,me=Q.nodeName&&Q.nodeName.toLowerCase(),me==="select"||me==="input"&&Q.type==="file")var ke=wm;else if(zu(Q))if(Hu)ke=Sm;else{ke=bm;var Ee=xm}else(me=Q.nodeName)&&me.toLowerCase()==="input"&&(Q.type==="checkbox"||Q.type==="radio")&&(ke=km);if(ke&&(ke=ke(e,M))){qu(Z,ke,i,Y);break e}Ee&&Ee(e,Q,M),e==="focusout"&&(Ee=Q._wrapperState)&&Ee.controlled&&Q.type==="number"&&xe(Q,"number",Q.value)}switch(Ee=M?bs(M):window,e){case"focusin":(zu(Ee)||Ee.contentEditable==="true")&&(ys=Ee,ol=M,ki=null);break;case"focusout":ki=ol=ys=null;break;case"mousedown":ll=!0;break;case"contextmenu":case"mouseup":case"dragend":ll=!1,Zu(Z,i,Y);break;case"selectionchange":if(Em)break;case"keydown":case"keyup":Zu(Z,i,Y)}var Ne;if(rl)e:{switch(e){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else gs?Wu(e,i)&&(Oe="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Oe="onCompositionStart");Oe&&(Uu&&i.locale!=="ko"&&(gs||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&gs&&(Ne=Iu()):(ar=Y,Yo="value"in ar?ar.value:ar.textContent,gs=!0)),Ee=Ca(M,Oe),0<Ee.length&&(Oe=new Lu(Oe,e,null,i,Y),Z.push({event:Oe,listeners:Ee}),Ne?Oe.data=Ne:(Ne=$u(i),Ne!==null&&(Oe.data=Ne)))),(Ne=pm?mm(e,i):gm(e,i))&&(M=Ca(M,"onBeforeInput"),0<M.length&&(Y=new Lu("onBeforeInput","beforeinput",null,i,Y),Z.push({event:Y,listeners:M}),Y.data=Ne))}ld(Z,t)})}function ji(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Ca(e,t){for(var i=t+"Capture",u=[];e!==null;){var h=e,f=h.stateNode;h.tag===5&&f!==null&&(h=f,f=er(e,i),f!=null&&u.unshift(ji(e,f,h)),f=er(e,t),f!=null&&u.push(ji(e,f,h))),e=e.return}return u}function ws(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ud(e,t,i,u,h){for(var f=t._reactName,v=[];i!==null&&i!==u;){var j=i,T=j.alternate,M=j.stateNode;if(T!==null&&T===u)break;j.tag===5&&M!==null&&(j=M,h?(T=er(i,f),T!=null&&v.unshift(ji(i,T,j))):h||(T=er(i,f),T!=null&&v.push(ji(i,T,j)))),i=i.return}v.length!==0&&e.push({event:t,listeners:v})}var Pm=/\r\n?/g,Om=/\u0000|\uFFFD/g;function dd(e){return(typeof e=="string"?e:""+e).replace(Pm,`
`).replace(Om,"")}function Ta(e,t,i){if(t=dd(t),dd(e)!==t&&i)throw Error(r(425))}function Pa(){}var pl=null,ml=null;function gl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var yl=typeof setTimeout=="function"?setTimeout:void 0,Am=typeof clearTimeout=="function"?clearTimeout:void 0,hd=typeof Promise=="function"?Promise:void 0,Im=typeof queueMicrotask=="function"?queueMicrotask:typeof hd<"u"?function(e){return hd.resolve(null).then(e).catch(Rm)}:yl;function Rm(e){setTimeout(function(){throw e})}function vl(e,t){var i=t,u=0;do{var h=i.nextSibling;if(e.removeChild(i),h&&h.nodeType===8)if(i=h.data,i==="/$"){if(u===0){e.removeChild(h),mi(t);return}u--}else i!=="$"&&i!=="$?"&&i!=="$!"||u++;i=h}while(i);mi(t)}function lr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function fd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var xs=Math.random().toString(36).slice(2),Cn="__reactFiber$"+xs,Ei="__reactProps$"+xs,Un="__reactContainer$"+xs,wl="__reactEvents$"+xs,Dm="__reactListeners$"+xs,Lm="__reactHandles$"+xs;function Mr(e){var t=e[Cn];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Un]||i[Cn]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=fd(e);e!==null;){if(i=e[Cn])return i;e=fd(e)}return t}e=i,i=e.parentNode}return null}function Ni(e){return e=e[Cn]||e[Un],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function bs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function Oa(e){return e[Ei]||null}var xl=[],ks=-1;function cr(e){return{current:e}}function it(e){0>ks||(e.current=xl[ks],xl[ks]=null,ks--)}function et(e,t){ks++,xl[ks]=e.current,e.current=t}var ur={},Dt=cr(ur),Ht=cr(!1),Ur=ur;function Ss(e,t){var i=e.type.contextTypes;if(!i)return ur;var u=e.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===t)return u.__reactInternalMemoizedMaskedChildContext;var h={},f;for(f in i)h[f]=t[f];return u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=h),h}function Gt(e){return e=e.childContextTypes,e!=null}function Aa(){it(Ht),it(Dt)}function pd(e,t,i){if(Dt.current!==ur)throw Error(r(168));et(Dt,t),et(Ht,i)}function md(e,t,i){var u=e.stateNode;if(t=t.childContextTypes,typeof u.getChildContext!="function")return i;u=u.getChildContext();for(var h in u)if(!(h in t))throw Error(r(108,se(e)||"Unknown",h));return N({},i,u)}function Ia(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ur,Ur=Dt.current,et(Dt,e),et(Ht,Ht.current),!0}function gd(e,t,i){var u=e.stateNode;if(!u)throw Error(r(169));i?(e=md(e,t,Ur),u.__reactInternalMemoizedMergedChildContext=e,it(Ht),it(Dt),et(Dt,e)):it(Ht),et(Ht,i)}var Fn=null,Ra=!1,bl=!1;function yd(e){Fn===null?Fn=[e]:Fn.push(e)}function Mm(e){Ra=!0,yd(e)}function dr(){if(!bl&&Fn!==null){bl=!0;var e=0,t=Ye;try{var i=Fn;for(Ye=1;e<i.length;e++){var u=i[e];do u=u(!0);while(u!==null)}Fn=null,Ra=!1}catch(h){throw Fn!==null&&(Fn=Fn.slice(e+1)),We(Ke,dr),h}finally{Ye=t,bl=!1}}return null}var _s=[],js=0,Da=null,La=0,an=[],on=0,Fr=null,Bn=1,Wn="";function Br(e,t){_s[js++]=La,_s[js++]=Da,Da=e,La=t}function vd(e,t,i){an[on++]=Bn,an[on++]=Wn,an[on++]=Fr,Fr=e;var u=Bn;e=Wn;var h=32-yn(u)-1;u&=~(1<<h),i+=1;var f=32-yn(t)+h;if(30<f){var v=h-h%5;f=(u&(1<<v)-1).toString(32),u>>=v,h-=v,Bn=1<<32-yn(t)+h|i<<h|u,Wn=f+e}else Bn=1<<f|i<<h|u,Wn=e}function kl(e){e.return!==null&&(Br(e,1),vd(e,1,0))}function Sl(e){for(;e===Da;)Da=_s[--js],_s[js]=null,La=_s[--js],_s[js]=null;for(;e===Fr;)Fr=an[--on],an[on]=null,Wn=an[--on],an[on]=null,Bn=an[--on],an[on]=null}var Zt=null,en=null,lt=!1,wn=null;function wd(e,t){var i=dn(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function xd(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Zt=e,en=lr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Zt=e,en=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Fr!==null?{id:Bn,overflow:Wn}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=dn(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Zt=e,en=null,!0):!1;default:return!1}}function _l(e){return(e.mode&1)!==0&&(e.flags&128)===0}function jl(e){if(lt){var t=en;if(t){var i=t;if(!xd(e,t)){if(_l(e))throw Error(r(418));t=lr(i.nextSibling);var u=Zt;t&&xd(e,t)?wd(u,i):(e.flags=e.flags&-4097|2,lt=!1,Zt=e)}}else{if(_l(e))throw Error(r(418));e.flags=e.flags&-4097|2,lt=!1,Zt=e}}}function bd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Zt=e}function Ma(e){if(e!==Zt)return!1;if(!lt)return bd(e),lt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!gl(e.type,e.memoizedProps)),t&&(t=en)){if(_l(e))throw kd(),Error(r(418));for(;t;)wd(e,t),t=lr(t.nextSibling)}if(bd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){en=lr(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}en=null}}else en=Zt?lr(e.stateNode.nextSibling):null;return!0}function kd(){for(var e=en;e;)e=lr(e.nextSibling)}function Es(){en=Zt=null,lt=!1}function El(e){wn===null?wn=[e]:wn.push(e)}var Um=B.ReactCurrentBatchConfig;function Ci(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(r(309));var u=i.stateNode}if(!u)throw Error(r(147,e));var h=u,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(v){var j=h.refs;v===null?delete j[f]:j[f]=v},t._stringRef=f,t)}if(typeof e!="string")throw Error(r(284));if(!i._owner)throw Error(r(290,e))}return e}function Ua(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Sd(e){var t=e._init;return t(e._payload)}function _d(e){function t(A,P){if(e){var R=A.deletions;R===null?(A.deletions=[P],A.flags|=16):R.push(P)}}function i(A,P){if(!e)return null;for(;P!==null;)t(A,P),P=P.sibling;return null}function u(A,P){for(A=new Map;P!==null;)P.key!==null?A.set(P.key,P):A.set(P.index,P),P=P.sibling;return A}function h(A,P){return A=wr(A,P),A.index=0,A.sibling=null,A}function f(A,P,R){return A.index=R,e?(R=A.alternate,R!==null?(R=R.index,R<P?(A.flags|=2,P):R):(A.flags|=2,P)):(A.flags|=1048576,P)}function v(A){return e&&A.alternate===null&&(A.flags|=2),A}function j(A,P,R,ne){return P===null||P.tag!==6?(P=yc(R,A.mode,ne),P.return=A,P):(P=h(P,R),P.return=A,P)}function T(A,P,R,ne){var ke=R.type;return ke===z?Y(A,P,R.props.children,ne,R.key):P!==null&&(P.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===pe&&Sd(ke)===P.type)?(ne=h(P,R.props),ne.ref=Ci(A,P,R),ne.return=A,ne):(ne=lo(R.type,R.key,R.props,null,A.mode,ne),ne.ref=Ci(A,P,R),ne.return=A,ne)}function M(A,P,R,ne){return P===null||P.tag!==4||P.stateNode.containerInfo!==R.containerInfo||P.stateNode.implementation!==R.implementation?(P=vc(R,A.mode,ne),P.return=A,P):(P=h(P,R.children||[]),P.return=A,P)}function Y(A,P,R,ne,ke){return P===null||P.tag!==7?(P=Jr(R,A.mode,ne,ke),P.return=A,P):(P=h(P,R),P.return=A,P)}function Z(A,P,R){if(typeof P=="string"&&P!==""||typeof P=="number")return P=yc(""+P,A.mode,R),P.return=A,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case X:return R=lo(P.type,P.key,P.props,null,A.mode,R),R.ref=Ci(A,null,P),R.return=A,R;case L:return P=vc(P,A.mode,R),P.return=A,P;case pe:var ne=P._init;return Z(A,ne(P._payload),R)}if(Se(P)||ae(P))return P=Jr(P,A.mode,R,null),P.return=A,P;Ua(A,P)}return null}function Q(A,P,R,ne){var ke=P!==null?P.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return ke!==null?null:j(A,P,""+R,ne);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case X:return R.key===ke?T(A,P,R,ne):null;case L:return R.key===ke?M(A,P,R,ne):null;case pe:return ke=R._init,Q(A,P,ke(R._payload),ne)}if(Se(R)||ae(R))return ke!==null?null:Y(A,P,R,ne,null);Ua(A,R)}return null}function me(A,P,R,ne,ke){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return A=A.get(R)||null,j(P,A,""+ne,ke);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case X:return A=A.get(ne.key===null?R:ne.key)||null,T(P,A,ne,ke);case L:return A=A.get(ne.key===null?R:ne.key)||null,M(P,A,ne,ke);case pe:var Ee=ne._init;return me(A,P,R,Ee(ne._payload),ke)}if(Se(ne)||ae(ne))return A=A.get(R)||null,Y(P,A,ne,ke,null);Ua(P,ne)}return null}function we(A,P,R,ne){for(var ke=null,Ee=null,Ne=P,Oe=P=0,Nt=null;Ne!==null&&Oe<R.length;Oe++){Ne.index>Oe?(Nt=Ne,Ne=null):Nt=Ne.sibling;var Ge=Q(A,Ne,R[Oe],ne);if(Ge===null){Ne===null&&(Ne=Nt);break}e&&Ne&&Ge.alternate===null&&t(A,Ne),P=f(Ge,P,Oe),Ee===null?ke=Ge:Ee.sibling=Ge,Ee=Ge,Ne=Nt}if(Oe===R.length)return i(A,Ne),lt&&Br(A,Oe),ke;if(Ne===null){for(;Oe<R.length;Oe++)Ne=Z(A,R[Oe],ne),Ne!==null&&(P=f(Ne,P,Oe),Ee===null?ke=Ne:Ee.sibling=Ne,Ee=Ne);return lt&&Br(A,Oe),ke}for(Ne=u(A,Ne);Oe<R.length;Oe++)Nt=me(Ne,A,Oe,R[Oe],ne),Nt!==null&&(e&&Nt.alternate!==null&&Ne.delete(Nt.key===null?Oe:Nt.key),P=f(Nt,P,Oe),Ee===null?ke=Nt:Ee.sibling=Nt,Ee=Nt);return e&&Ne.forEach(function(xr){return t(A,xr)}),lt&&Br(A,Oe),ke}function be(A,P,R,ne){var ke=ae(R);if(typeof ke!="function")throw Error(r(150));if(R=ke.call(R),R==null)throw Error(r(151));for(var Ee=ke=null,Ne=P,Oe=P=0,Nt=null,Ge=R.next();Ne!==null&&!Ge.done;Oe++,Ge=R.next()){Ne.index>Oe?(Nt=Ne,Ne=null):Nt=Ne.sibling;var xr=Q(A,Ne,Ge.value,ne);if(xr===null){Ne===null&&(Ne=Nt);break}e&&Ne&&xr.alternate===null&&t(A,Ne),P=f(xr,P,Oe),Ee===null?ke=xr:Ee.sibling=xr,Ee=xr,Ne=Nt}if(Ge.done)return i(A,Ne),lt&&Br(A,Oe),ke;if(Ne===null){for(;!Ge.done;Oe++,Ge=R.next())Ge=Z(A,Ge.value,ne),Ge!==null&&(P=f(Ge,P,Oe),Ee===null?ke=Ge:Ee.sibling=Ge,Ee=Ge);return lt&&Br(A,Oe),ke}for(Ne=u(A,Ne);!Ge.done;Oe++,Ge=R.next())Ge=me(Ne,A,Oe,Ge.value,ne),Ge!==null&&(e&&Ge.alternate!==null&&Ne.delete(Ge.key===null?Oe:Ge.key),P=f(Ge,P,Oe),Ee===null?ke=Ge:Ee.sibling=Ge,Ee=Ge);return e&&Ne.forEach(function(yg){return t(A,yg)}),lt&&Br(A,Oe),ke}function ft(A,P,R,ne){if(typeof R=="object"&&R!==null&&R.type===z&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case X:e:{for(var ke=R.key,Ee=P;Ee!==null;){if(Ee.key===ke){if(ke=R.type,ke===z){if(Ee.tag===7){i(A,Ee.sibling),P=h(Ee,R.props.children),P.return=A,A=P;break e}}else if(Ee.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===pe&&Sd(ke)===Ee.type){i(A,Ee.sibling),P=h(Ee,R.props),P.ref=Ci(A,Ee,R),P.return=A,A=P;break e}i(A,Ee);break}else t(A,Ee);Ee=Ee.sibling}R.type===z?(P=Jr(R.props.children,A.mode,ne,R.key),P.return=A,A=P):(ne=lo(R.type,R.key,R.props,null,A.mode,ne),ne.ref=Ci(A,P,R),ne.return=A,A=ne)}return v(A);case L:e:{for(Ee=R.key;P!==null;){if(P.key===Ee)if(P.tag===4&&P.stateNode.containerInfo===R.containerInfo&&P.stateNode.implementation===R.implementation){i(A,P.sibling),P=h(P,R.children||[]),P.return=A,A=P;break e}else{i(A,P);break}else t(A,P);P=P.sibling}P=vc(R,A.mode,ne),P.return=A,A=P}return v(A);case pe:return Ee=R._init,ft(A,P,Ee(R._payload),ne)}if(Se(R))return we(A,P,R,ne);if(ae(R))return be(A,P,R,ne);Ua(A,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,P!==null&&P.tag===6?(i(A,P.sibling),P=h(P,R),P.return=A,A=P):(i(A,P),P=yc(R,A.mode,ne),P.return=A,A=P),v(A)):i(A,P)}return ft}var Ns=_d(!0),jd=_d(!1),Fa=cr(null),Ba=null,Cs=null,Nl=null;function Cl(){Nl=Cs=Ba=null}function Tl(e){var t=Fa.current;it(Fa),e._currentValue=t}function Pl(e,t,i){for(;e!==null;){var u=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,u!==null&&(u.childLanes|=t)):u!==null&&(u.childLanes&t)!==t&&(u.childLanes|=t),e===i)break;e=e.return}}function Ts(e,t){Ba=e,Nl=Cs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Vt=!0),e.firstContext=null)}function ln(e){var t=e._currentValue;if(Nl!==e)if(e={context:e,memoizedValue:t,next:null},Cs===null){if(Ba===null)throw Error(r(308));Cs=e,Ba.dependencies={lanes:0,firstContext:e}}else Cs=Cs.next=e;return t}var Wr=null;function Ol(e){Wr===null?Wr=[e]:Wr.push(e)}function Ed(e,t,i,u){var h=t.interleaved;return h===null?(i.next=i,Ol(t)):(i.next=h.next,h.next=i),t.interleaved=i,$n(e,u)}function $n(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var hr=!1;function Al(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fr(e,t,i){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,(qe&2)!==0){var h=u.pending;return h===null?t.next=t:(t.next=h.next,h.next=t),u.pending=t,$n(e,i)}return h=u.interleaved,h===null?(t.next=t,Ol(u)):(t.next=h.next,h.next=t),u.interleaved=t,$n(e,i)}function Wa(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var u=t.lanes;u&=e.pendingLanes,i|=u,t.lanes=i,Go(e,i)}}function Cd(e,t){var i=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,i===u)){var h=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var v={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};f===null?h=f=v:f=f.next=v,i=i.next}while(i!==null);f===null?h=f=t:f=f.next=t}else h=f=t;i={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:u.shared,effects:u.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function $a(e,t,i,u){var h=e.updateQueue;hr=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,j=h.shared.pending;if(j!==null){h.shared.pending=null;var T=j,M=T.next;T.next=null,v===null?f=M:v.next=M,v=T;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,j=Y.lastBaseUpdate,j!==v&&(j===null?Y.firstBaseUpdate=M:j.next=M,Y.lastBaseUpdate=T))}if(f!==null){var Z=h.baseState;v=0,Y=M=T=null,j=f;do{var Q=j.lane,me=j.eventTime;if((u&Q)===Q){Y!==null&&(Y=Y.next={eventTime:me,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var we=e,be=j;switch(Q=t,me=i,be.tag){case 1:if(we=be.payload,typeof we=="function"){Z=we.call(me,Z,Q);break e}Z=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=be.payload,Q=typeof we=="function"?we.call(me,Z,Q):we,Q==null)break e;Z=N({},Z,Q);break e;case 2:hr=!0}}j.callback!==null&&j.lane!==0&&(e.flags|=64,Q=h.effects,Q===null?h.effects=[j]:Q.push(j))}else me={eventTime:me,lane:Q,tag:j.tag,payload:j.payload,callback:j.callback,next:null},Y===null?(M=Y=me,T=Z):Y=Y.next=me,v|=Q;if(j=j.next,j===null){if(j=h.shared.pending,j===null)break;Q=j,j=Q.next,Q.next=null,h.lastBaseUpdate=Q,h.shared.pending=null}}while(!0);if(Y===null&&(T=Z),h.baseState=T,h.firstBaseUpdate=M,h.lastBaseUpdate=Y,t=h.shared.interleaved,t!==null){h=t;do v|=h.lane,h=h.next;while(h!==t)}else f===null&&(h.shared.lanes=0);qr|=v,e.lanes=v,e.memoizedState=Z}}function Td(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var u=e[t],h=u.callback;if(h!==null){if(u.callback=null,u=i,typeof h!="function")throw Error(r(191,h));h.call(u)}}}var Ti={},Tn=cr(Ti),Pi=cr(Ti),Oi=cr(Ti);function $r(e){if(e===Ti)throw Error(r(174));return e}function Il(e,t){switch(et(Oi,t),et(Pi,e),et(Tn,Ti),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:At(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=At(t,e)}it(Tn),et(Tn,t)}function Ps(){it(Tn),it(Pi),it(Oi)}function Pd(e){$r(Oi.current);var t=$r(Tn.current),i=At(t,e.type);t!==i&&(et(Pi,e),et(Tn,i))}function Rl(e){Pi.current===e&&(it(Tn),it(Pi))}var ct=cr(0);function za(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Dl=[];function Ll(){for(var e=0;e<Dl.length;e++)Dl[e]._workInProgressVersionPrimary=null;Dl.length=0}var qa=B.ReactCurrentDispatcher,Ml=B.ReactCurrentBatchConfig,zr=0,ut=null,wt=null,jt=null,Ha=!1,Ai=!1,Ii=0,Fm=0;function Lt(){throw Error(r(321))}function Ul(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!vn(e[i],t[i]))return!1;return!0}function Fl(e,t,i,u,h,f){if(zr=f,ut=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qa.current=e===null||e.memoizedState===null?zm:qm,e=i(u,h),Ai){f=0;do{if(Ai=!1,Ii=0,25<=f)throw Error(r(301));f+=1,jt=wt=null,t.updateQueue=null,qa.current=Hm,e=i(u,h)}while(Ai)}if(qa.current=Ja,t=wt!==null&&wt.next!==null,zr=0,jt=wt=ut=null,Ha=!1,t)throw Error(r(300));return e}function Bl(){var e=Ii!==0;return Ii=0,e}function Pn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?ut.memoizedState=jt=e:jt=jt.next=e,jt}function cn(){if(wt===null){var e=ut.alternate;e=e!==null?e.memoizedState:null}else e=wt.next;var t=jt===null?ut.memoizedState:jt.next;if(t!==null)jt=t,wt=e;else{if(e===null)throw Error(r(310));wt=e,e={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},jt===null?ut.memoizedState=jt=e:jt=jt.next=e}return jt}function Ri(e,t){return typeof t=="function"?t(e):t}function Wl(e){var t=cn(),i=t.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var u=wt,h=u.baseQueue,f=i.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}u.baseQueue=h=f,i.pending=null}if(h!==null){f=h.next,u=u.baseState;var j=v=null,T=null,M=f;do{var Y=M.lane;if((zr&Y)===Y)T!==null&&(T=T.next={lane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),u=M.hasEagerState?M.eagerState:e(u,M.action);else{var Z={lane:Y,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null};T===null?(j=T=Z,v=u):T=T.next=Z,ut.lanes|=Y,qr|=Y}M=M.next}while(M!==null&&M!==f);T===null?v=u:T.next=j,vn(u,t.memoizedState)||(Vt=!0),t.memoizedState=u,t.baseState=v,t.baseQueue=T,i.lastRenderedState=u}if(e=i.interleaved,e!==null){h=e;do f=h.lane,ut.lanes|=f,qr|=f,h=h.next;while(h!==e)}else h===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function $l(e){var t=cn(),i=t.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var u=i.dispatch,h=i.pending,f=t.memoizedState;if(h!==null){i.pending=null;var v=h=h.next;do f=e(f,v.action),v=v.next;while(v!==h);vn(f,t.memoizedState)||(Vt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),i.lastRenderedState=f}return[f,u]}function Od(){}function Ad(e,t){var i=ut,u=cn(),h=t(),f=!vn(u.memoizedState,h);if(f&&(u.memoizedState=h,Vt=!0),u=u.queue,zl(Dd.bind(null,i,u,e),[e]),u.getSnapshot!==t||f||jt!==null&&jt.memoizedState.tag&1){if(i.flags|=2048,Di(9,Rd.bind(null,i,u,h,t),void 0,null),Et===null)throw Error(r(349));(zr&30)!==0||Id(i,t,h)}return h}function Id(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=ut.updateQueue,t===null?(t={lastEffect:null,stores:null},ut.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Rd(e,t,i,u){t.value=i,t.getSnapshot=u,Ld(t)&&Md(e)}function Dd(e,t,i){return i(function(){Ld(t)&&Md(e)})}function Ld(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!vn(e,i)}catch{return!0}}function Md(e){var t=$n(e,1);t!==null&&Sn(t,e,1,-1)}function Ud(e){var t=Pn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:e},t.queue=e,e=e.dispatch=$m.bind(null,ut,e),[t.memoizedState,e]}function Di(e,t,i,u){return e={tag:e,create:t,destroy:i,deps:u,next:null},t=ut.updateQueue,t===null?(t={lastEffect:null,stores:null},ut.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(u=i.next,i.next=e,e.next=u,t.lastEffect=e)),e}function Fd(){return cn().memoizedState}function Ga(e,t,i,u){var h=Pn();ut.flags|=e,h.memoizedState=Di(1|t,i,void 0,u===void 0?null:u)}function Va(e,t,i,u){var h=cn();u=u===void 0?null:u;var f=void 0;if(wt!==null){var v=wt.memoizedState;if(f=v.destroy,u!==null&&Ul(u,v.deps)){h.memoizedState=Di(t,i,f,u);return}}ut.flags|=e,h.memoizedState=Di(1|t,i,f,u)}function Bd(e,t){return Ga(8390656,8,e,t)}function zl(e,t){return Va(2048,8,e,t)}function Wd(e,t){return Va(4,2,e,t)}function $d(e,t){return Va(4,4,e,t)}function zd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qd(e,t,i){return i=i!=null?i.concat([e]):null,Va(4,4,zd.bind(null,t,e),i)}function ql(){}function Hd(e,t){var i=cn();t=t===void 0?null:t;var u=i.memoizedState;return u!==null&&t!==null&&Ul(t,u[1])?u[0]:(i.memoizedState=[e,t],e)}function Gd(e,t){var i=cn();t=t===void 0?null:t;var u=i.memoizedState;return u!==null&&t!==null&&Ul(t,u[1])?u[0]:(e=e(),i.memoizedState=[e,t],e)}function Vd(e,t,i){return(zr&21)===0?(e.baseState&&(e.baseState=!1,Vt=!0),e.memoizedState=i):(vn(i,t)||(i=Su(),ut.lanes|=i,qr|=i,e.baseState=!0),t)}function Bm(e,t){var i=Ye;Ye=i!==0&&4>i?i:4,e(!0);var u=Ml.transition;Ml.transition={};try{e(!1),t()}finally{Ye=i,Ml.transition=u}}function Jd(){return cn().memoizedState}function Wm(e,t,i){var u=yr(e);if(i={lane:u,action:i,hasEagerState:!1,eagerState:null,next:null},Kd(e))Qd(t,i);else if(i=Ed(e,t,i,u),i!==null){var h=Wt();Sn(i,e,u,h),Yd(i,t,u)}}function $m(e,t,i){var u=yr(e),h={lane:u,action:i,hasEagerState:!1,eagerState:null,next:null};if(Kd(e))Qd(t,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var v=t.lastRenderedState,j=f(v,i);if(h.hasEagerState=!0,h.eagerState=j,vn(j,v)){var T=t.interleaved;T===null?(h.next=h,Ol(t)):(h.next=T.next,T.next=h),t.interleaved=h;return}}catch{}finally{}i=Ed(e,t,h,u),i!==null&&(h=Wt(),Sn(i,e,u,h),Yd(i,t,u))}}function Kd(e){var t=e.alternate;return e===ut||t!==null&&t===ut}function Qd(e,t){Ai=Ha=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Yd(e,t,i){if((i&4194240)!==0){var u=t.lanes;u&=e.pendingLanes,i|=u,t.lanes=i,Go(e,i)}}var Ja={readContext:ln,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},zm={readContext:ln,useCallback:function(e,t){return Pn().memoizedState=[e,t===void 0?null:t],e},useContext:ln,useEffect:Bd,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Ga(4194308,4,zd.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Ga(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ga(4,2,e,t)},useMemo:function(e,t){var i=Pn();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var u=Pn();return t=i!==void 0?i(t):t,u.memoizedState=u.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},u.queue=e,e=e.dispatch=Wm.bind(null,ut,e),[u.memoizedState,e]},useRef:function(e){var t=Pn();return e={current:e},t.memoizedState=e},useState:Ud,useDebugValue:ql,useDeferredValue:function(e){return Pn().memoizedState=e},useTransition:function(){var e=Ud(!1),t=e[0];return e=Bm.bind(null,e[1]),Pn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var u=ut,h=Pn();if(lt){if(i===void 0)throw Error(r(407));i=i()}else{if(i=t(),Et===null)throw Error(r(349));(zr&30)!==0||Id(u,t,i)}h.memoizedState=i;var f={value:i,getSnapshot:t};return h.queue=f,Bd(Dd.bind(null,u,f,e),[e]),u.flags|=2048,Di(9,Rd.bind(null,u,f,i,t),void 0,null),i},useId:function(){var e=Pn(),t=Et.identifierPrefix;if(lt){var i=Wn,u=Bn;i=(u&~(1<<32-yn(u)-1)).toString(32)+i,t=":"+t+"R"+i,i=Ii++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=Fm++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},qm={readContext:ln,useCallback:Hd,useContext:ln,useEffect:zl,useImperativeHandle:qd,useInsertionEffect:Wd,useLayoutEffect:$d,useMemo:Gd,useReducer:Wl,useRef:Fd,useState:function(){return Wl(Ri)},useDebugValue:ql,useDeferredValue:function(e){var t=cn();return Vd(t,wt.memoizedState,e)},useTransition:function(){var e=Wl(Ri)[0],t=cn().memoizedState;return[e,t]},useMutableSource:Od,useSyncExternalStore:Ad,useId:Jd,unstable_isNewReconciler:!1},Hm={readContext:ln,useCallback:Hd,useContext:ln,useEffect:zl,useImperativeHandle:qd,useInsertionEffect:Wd,useLayoutEffect:$d,useMemo:Gd,useReducer:$l,useRef:Fd,useState:function(){return $l(Ri)},useDebugValue:ql,useDeferredValue:function(e){var t=cn();return wt===null?t.memoizedState=e:Vd(t,wt.memoizedState,e)},useTransition:function(){var e=$l(Ri)[0],t=cn().memoizedState;return[e,t]},useMutableSource:Od,useSyncExternalStore:Ad,useId:Jd,unstable_isNewReconciler:!1};function xn(e,t){if(e&&e.defaultProps){t=N({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function Hl(e,t,i,u){t=e.memoizedState,i=i(u,t),i=i==null?t:N({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Ka={isMounted:function(e){return(e=e._reactInternals)?Dn(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var u=Wt(),h=yr(e),f=zn(u,h);f.payload=t,i!=null&&(f.callback=i),t=fr(e,f,h),t!==null&&(Sn(t,e,h,u),Wa(t,e,h))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var u=Wt(),h=yr(e),f=zn(u,h);f.tag=1,f.payload=t,i!=null&&(f.callback=i),t=fr(e,f,h),t!==null&&(Sn(t,e,h,u),Wa(t,e,h))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Wt(),u=yr(e),h=zn(i,u);h.tag=2,t!=null&&(h.callback=t),t=fr(e,h,u),t!==null&&(Sn(t,e,u,i),Wa(t,e,u))}};function Xd(e,t,i,u,h,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,f,v):t.prototype&&t.prototype.isPureReactComponent?!bi(i,u)||!bi(h,f):!0}function Zd(e,t,i){var u=!1,h=ur,f=t.contextType;return typeof f=="object"&&f!==null?f=ln(f):(h=Gt(t)?Ur:Dt.current,u=t.contextTypes,f=(u=u!=null)?Ss(e,h):ur),t=new t(i,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ka,e.stateNode=t,t._reactInternals=e,u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=f),t}function eh(e,t,i,u){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,u),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,u),t.state!==e&&Ka.enqueueReplaceState(t,t.state,null)}function Gl(e,t,i,u){var h=e.stateNode;h.props=i,h.state=e.memoizedState,h.refs={},Al(e);var f=t.contextType;typeof f=="object"&&f!==null?h.context=ln(f):(f=Gt(t)?Ur:Dt.current,h.context=Ss(e,f)),h.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(Hl(e,t,f,i),h.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(t=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),t!==h.state&&Ka.enqueueReplaceState(h,h.state,null),$a(e,i,h,u),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function Os(e,t){try{var i="",u=t;do i+=ie(u),u=u.return;while(u);var h=i}catch(f){h=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:h,digest:null}}function Vl(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function Jl(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var Gm=typeof WeakMap=="function"?WeakMap:Map;function th(e,t,i){i=zn(-1,i),i.tag=3,i.payload={element:null};var u=t.value;return i.callback=function(){no||(no=!0,cc=u),Jl(e,t)},i}function nh(e,t,i){i=zn(-1,i),i.tag=3;var u=e.type.getDerivedStateFromError;if(typeof u=="function"){var h=t.value;i.payload=function(){return u(h)},i.callback=function(){Jl(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(i.callback=function(){Jl(e,t),typeof u!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var v=t.stack;this.componentDidCatch(t.value,{componentStack:v!==null?v:""})}),i}function rh(e,t,i){var u=e.pingCache;if(u===null){u=e.pingCache=new Gm;var h=new Set;u.set(t,h)}else h=u.get(t),h===void 0&&(h=new Set,u.set(t,h));h.has(i)||(h.add(i),e=ag.bind(null,e,t,i),t.then(e,e))}function sh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ih(e,t,i,u,h){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=zn(-1,1),t.tag=2,fr(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=h,e)}var Vm=B.ReactCurrentOwner,Vt=!1;function Bt(e,t,i,u){t.child=e===null?jd(t,null,i,u):Ns(t,e.child,i,u)}function ah(e,t,i,u,h){i=i.render;var f=t.ref;return Ts(t,h),u=Fl(e,t,i,u,f,h),i=Bl(),e!==null&&!Vt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,qn(e,t,h)):(lt&&i&&kl(t),t.flags|=1,Bt(e,t,u,h),t.child)}function oh(e,t,i,u,h){if(e===null){var f=i.type;return typeof f=="function"&&!gc(f)&&f.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=f,lh(e,t,f,u,h)):(e=lo(i.type,null,u,t,t.mode,h),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&h)===0){var v=f.memoizedProps;if(i=i.compare,i=i!==null?i:bi,i(v,u)&&e.ref===t.ref)return qn(e,t,h)}return t.flags|=1,e=wr(f,u),e.ref=t.ref,e.return=t,t.child=e}function lh(e,t,i,u,h){if(e!==null){var f=e.memoizedProps;if(bi(f,u)&&e.ref===t.ref)if(Vt=!1,t.pendingProps=u=f,(e.lanes&h)!==0)(e.flags&131072)!==0&&(Vt=!0);else return t.lanes=e.lanes,qn(e,t,h)}return Kl(e,t,i,u,h)}function ch(e,t,i){var u=t.pendingProps,h=u.children,f=e!==null?e.memoizedState:null;if(u.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(Is,tn),tn|=i;else{if((i&1073741824)===0)return e=f!==null?f.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,et(Is,tn),tn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=f!==null?f.baseLanes:i,et(Is,tn),tn|=u}else f!==null?(u=f.baseLanes|i,t.memoizedState=null):u=i,et(Is,tn),tn|=u;return Bt(e,t,h,i),t.child}function uh(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Kl(e,t,i,u,h){var f=Gt(i)?Ur:Dt.current;return f=Ss(t,f),Ts(t,h),i=Fl(e,t,i,u,f,h),u=Bl(),e!==null&&!Vt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,qn(e,t,h)):(lt&&u&&kl(t),t.flags|=1,Bt(e,t,i,h),t.child)}function dh(e,t,i,u,h){if(Gt(i)){var f=!0;Ia(t)}else f=!1;if(Ts(t,h),t.stateNode===null)Ya(e,t),Zd(t,i,u),Gl(t,i,u,h),u=!0;else if(e===null){var v=t.stateNode,j=t.memoizedProps;v.props=j;var T=v.context,M=i.contextType;typeof M=="object"&&M!==null?M=ln(M):(M=Gt(i)?Ur:Dt.current,M=Ss(t,M));var Y=i.getDerivedStateFromProps,Z=typeof Y=="function"||typeof v.getSnapshotBeforeUpdate=="function";Z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(j!==u||T!==M)&&eh(t,v,u,M),hr=!1;var Q=t.memoizedState;v.state=Q,$a(t,u,v,h),T=t.memoizedState,j!==u||Q!==T||Ht.current||hr?(typeof Y=="function"&&(Hl(t,i,Y,u),T=t.memoizedState),(j=hr||Xd(t,i,j,u,Q,T,M))?(Z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(t.flags|=4194308)):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=u,t.memoizedState=T),v.props=u,v.state=T,v.context=M,u=j):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),u=!1)}else{v=t.stateNode,Nd(e,t),j=t.memoizedProps,M=t.type===t.elementType?j:xn(t.type,j),v.props=M,Z=t.pendingProps,Q=v.context,T=i.contextType,typeof T=="object"&&T!==null?T=ln(T):(T=Gt(i)?Ur:Dt.current,T=Ss(t,T));var me=i.getDerivedStateFromProps;(Y=typeof me=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(j!==Z||Q!==T)&&eh(t,v,u,T),hr=!1,Q=t.memoizedState,v.state=Q,$a(t,u,v,h);var we=t.memoizedState;j!==Z||Q!==we||Ht.current||hr?(typeof me=="function"&&(Hl(t,i,me,u),we=t.memoizedState),(M=hr||Xd(t,i,M,u,Q,we,T)||!1)?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,we,T),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,we,T)),typeof v.componentDidUpdate=="function"&&(t.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof v.componentDidUpdate!="function"||j===e.memoizedProps&&Q===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&Q===e.memoizedState||(t.flags|=1024),t.memoizedProps=u,t.memoizedState=we),v.props=u,v.state=we,v.context=T,u=M):(typeof v.componentDidUpdate!="function"||j===e.memoizedProps&&Q===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&Q===e.memoizedState||(t.flags|=1024),u=!1)}return Ql(e,t,i,u,f,h)}function Ql(e,t,i,u,h,f){uh(e,t);var v=(t.flags&128)!==0;if(!u&&!v)return h&&gd(t,i,!1),qn(e,t,f);u=t.stateNode,Vm.current=t;var j=v&&typeof i.getDerivedStateFromError!="function"?null:u.render();return t.flags|=1,e!==null&&v?(t.child=Ns(t,e.child,null,f),t.child=Ns(t,null,j,f)):Bt(e,t,j,f),t.memoizedState=u.state,h&&gd(t,i,!0),t.child}function hh(e){var t=e.stateNode;t.pendingContext?pd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&pd(e,t.context,!1),Il(e,t.containerInfo)}function fh(e,t,i,u,h){return Es(),El(h),t.flags|=256,Bt(e,t,i,u),t.child}var Yl={dehydrated:null,treeContext:null,retryLane:0};function Xl(e){return{baseLanes:e,cachePool:null,transitions:null}}function ph(e,t,i){var u=t.pendingProps,h=ct.current,f=!1,v=(t.flags&128)!==0,j;if((j=v)||(j=e!==null&&e.memoizedState===null?!1:(h&2)!==0),j?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),et(ct,h&1),e===null)return jl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(v=u.children,e=u.fallback,f?(u=t.mode,f=t.child,v={mode:"hidden",children:v},(u&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=v):f=co(v,u,0,null),e=Jr(e,u,i,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=Xl(i),t.memoizedState=Yl,e):Zl(t,v));if(h=e.memoizedState,h!==null&&(j=h.dehydrated,j!==null))return Jm(e,t,v,u,j,h,i);if(f){f=u.fallback,v=t.mode,h=e.child,j=h.sibling;var T={mode:"hidden",children:u.children};return(v&1)===0&&t.child!==h?(u=t.child,u.childLanes=0,u.pendingProps=T,t.deletions=null):(u=wr(h,T),u.subtreeFlags=h.subtreeFlags&14680064),j!==null?f=wr(j,f):(f=Jr(f,v,i,null),f.flags|=2),f.return=t,u.return=t,u.sibling=f,t.child=u,u=f,f=t.child,v=e.child.memoizedState,v=v===null?Xl(i):{baseLanes:v.baseLanes|i,cachePool:null,transitions:v.transitions},f.memoizedState=v,f.childLanes=e.childLanes&~i,t.memoizedState=Yl,u}return f=e.child,e=f.sibling,u=wr(f,{mode:"visible",children:u.children}),(t.mode&1)===0&&(u.lanes=i),u.return=t,u.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=u,t.memoizedState=null,u}function Zl(e,t){return t=co({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Qa(e,t,i,u){return u!==null&&El(u),Ns(t,e.child,null,i),e=Zl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Jm(e,t,i,u,h,f,v){if(i)return t.flags&256?(t.flags&=-257,u=Vl(Error(r(422))),Qa(e,t,v,u)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=u.fallback,h=t.mode,u=co({mode:"visible",children:u.children},h,0,null),f=Jr(f,h,v,null),f.flags|=2,u.return=t,f.return=t,u.sibling=f,t.child=u,(t.mode&1)!==0&&Ns(t,e.child,null,v),t.child.memoizedState=Xl(v),t.memoizedState=Yl,f);if((t.mode&1)===0)return Qa(e,t,v,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var j=u.dgst;return u=j,f=Error(r(419)),u=Vl(f,u,void 0),Qa(e,t,v,u)}if(j=(v&e.childLanes)!==0,Vt||j){if(u=Et,u!==null){switch(v&-v){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|v))!==0?0:h,h!==0&&h!==f.retryLane&&(f.retryLane=h,$n(e,h),Sn(u,e,h,-1))}return mc(),u=Vl(Error(r(421))),Qa(e,t,v,u)}return h.data==="$?"?(t.flags|=128,t.child=e.child,t=og.bind(null,e),h._reactRetry=t,null):(e=f.treeContext,en=lr(h.nextSibling),Zt=t,lt=!0,wn=null,e!==null&&(an[on++]=Bn,an[on++]=Wn,an[on++]=Fr,Bn=e.id,Wn=e.overflow,Fr=t),t=Zl(t,u.children),t.flags|=4096,t)}function mh(e,t,i){e.lanes|=t;var u=e.alternate;u!==null&&(u.lanes|=t),Pl(e.return,t,i)}function ec(e,t,i,u,h){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:u,tail:i,tailMode:h}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=u,f.tail=i,f.tailMode=h)}function gh(e,t,i){var u=t.pendingProps,h=u.revealOrder,f=u.tail;if(Bt(e,t,u.children,i),u=ct.current,(u&2)!==0)u=u&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mh(e,i,t);else if(e.tag===19)mh(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}u&=1}if(et(ct,u),(t.mode&1)===0)t.memoizedState=null;else switch(h){case"forwards":for(i=t.child,h=null;i!==null;)e=i.alternate,e!==null&&za(e)===null&&(h=i),i=i.sibling;i=h,i===null?(h=t.child,t.child=null):(h=i.sibling,i.sibling=null),ec(t,!1,h,i,f);break;case"backwards":for(i=null,h=t.child,t.child=null;h!==null;){if(e=h.alternate,e!==null&&za(e)===null){t.child=h;break}e=h.sibling,h.sibling=i,i=h,h=e}ec(t,!0,i,null,f);break;case"together":ec(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ya(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qn(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),qr|=t.lanes,(i&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,i=wr(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=wr(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Km(e,t,i){switch(t.tag){case 3:hh(t),Es();break;case 5:Pd(t);break;case 1:Gt(t.type)&&Ia(t);break;case 4:Il(t,t.stateNode.containerInfo);break;case 10:var u=t.type._context,h=t.memoizedProps.value;et(Fa,u._currentValue),u._currentValue=h;break;case 13:if(u=t.memoizedState,u!==null)return u.dehydrated!==null?(et(ct,ct.current&1),t.flags|=128,null):(i&t.child.childLanes)!==0?ph(e,t,i):(et(ct,ct.current&1),e=qn(e,t,i),e!==null?e.sibling:null);et(ct,ct.current&1);break;case 19:if(u=(i&t.childLanes)!==0,(e.flags&128)!==0){if(u)return gh(e,t,i);t.flags|=128}if(h=t.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),et(ct,ct.current),u)break;return null;case 22:case 23:return t.lanes=0,ch(e,t,i)}return qn(e,t,i)}var yh,tc,vh,wh;yh=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},tc=function(){},vh=function(e,t,i,u){var h=e.memoizedProps;if(h!==u){e=t.stateNode,$r(Tn.current);var f=null;switch(i){case"input":h=Ie(e,h),u=Ie(e,u),f=[];break;case"select":h=N({},h,{value:void 0}),u=N({},u,{value:void 0}),f=[];break;case"textarea":h=Te(e,h),u=Te(e,u),f=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(e.onclick=Pa)}Ar(i,u);var v;i=null;for(M in h)if(!u.hasOwnProperty(M)&&h.hasOwnProperty(M)&&h[M]!=null)if(M==="style"){var j=h[M];for(v in j)j.hasOwnProperty(v)&&(i||(i={}),i[v]="")}else M!=="dangerouslySetInnerHTML"&&M!=="children"&&M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(l.hasOwnProperty(M)?f||(f=[]):(f=f||[]).push(M,null));for(M in u){var T=u[M];if(j=h?.[M],u.hasOwnProperty(M)&&T!==j&&(T!=null||j!=null))if(M==="style")if(j){for(v in j)!j.hasOwnProperty(v)||T&&T.hasOwnProperty(v)||(i||(i={}),i[v]="");for(v in T)T.hasOwnProperty(v)&&j[v]!==T[v]&&(i||(i={}),i[v]=T[v])}else i||(f||(f=[]),f.push(M,i)),i=T;else M==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,j=j?j.__html:void 0,T!=null&&j!==T&&(f=f||[]).push(M,T)):M==="children"?typeof T!="string"&&typeof T!="number"||(f=f||[]).push(M,""+T):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&(l.hasOwnProperty(M)?(T!=null&&M==="onScroll"&&st("scroll",e),f||j===T||(f=[])):(f=f||[]).push(M,T))}i&&(f=f||[]).push("style",i);var M=f;(t.updateQueue=M)&&(t.flags|=4)}},wh=function(e,t,i,u){i!==u&&(t.flags|=4)};function Li(e,t){if(!lt)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var u=null;i!==null;)i.alternate!==null&&(u=i),i=i.sibling;u===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function Mt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,u=0;if(t)for(var h=e.child;h!==null;)i|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)i|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=u,e.childLanes=i,t}function Qm(e,t,i){var u=t.pendingProps;switch(Sl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(t),null;case 1:return Gt(t.type)&&Aa(),Mt(t),null;case 3:return u=t.stateNode,Ps(),it(Ht),it(Dt),Ll(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(e===null||e.child===null)&&(Ma(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,wn!==null&&(hc(wn),wn=null))),tc(e,t),Mt(t),null;case 5:Rl(t);var h=$r(Oi.current);if(i=t.type,e!==null&&t.stateNode!=null)vh(e,t,i,u,h),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!u){if(t.stateNode===null)throw Error(r(166));return Mt(t),null}if(e=$r(Tn.current),Ma(t)){u=t.stateNode,i=t.type;var f=t.memoizedProps;switch(u[Cn]=t,u[Ei]=f,e=(t.mode&1)!==0,i){case"dialog":st("cancel",u),st("close",u);break;case"iframe":case"object":case"embed":st("load",u);break;case"video":case"audio":for(h=0;h<Si.length;h++)st(Si[h],u);break;case"source":st("error",u);break;case"img":case"image":case"link":st("error",u),st("load",u);break;case"details":st("toggle",u);break;case"input":I(u,f),st("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!f.multiple},st("invalid",u);break;case"textarea":Re(u,f),st("invalid",u)}Ar(i,f),h=null;for(var v in f)if(f.hasOwnProperty(v)){var j=f[v];v==="children"?typeof j=="string"?u.textContent!==j&&(f.suppressHydrationWarning!==!0&&Ta(u.textContent,j,e),h=["children",j]):typeof j=="number"&&u.textContent!==""+j&&(f.suppressHydrationWarning!==!0&&Ta(u.textContent,j,e),h=["children",""+j]):l.hasOwnProperty(v)&&j!=null&&v==="onScroll"&&st("scroll",u)}switch(i){case"input":Be(u),je(u,f,!0);break;case"textarea":Be(u),ot(u);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(u.onclick=Pa)}u=h,t.updateQueue=u,u!==null&&(t.flags|=4)}else{v=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ht(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=v.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof u.is=="string"?e=v.createElement(i,{is:u.is}):(e=v.createElement(i),i==="select"&&(v=e,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):e=v.createElementNS(e,i),e[Cn]=t,e[Ei]=u,yh(e,t,!1,!1),t.stateNode=e;e:{switch(v=Ir(i,u),i){case"dialog":st("cancel",e),st("close",e),h=u;break;case"iframe":case"object":case"embed":st("load",e),h=u;break;case"video":case"audio":for(h=0;h<Si.length;h++)st(Si[h],e);h=u;break;case"source":st("error",e),h=u;break;case"img":case"image":case"link":st("error",e),st("load",e),h=u;break;case"details":st("toggle",e),h=u;break;case"input":I(e,u),h=Ie(e,u),st("invalid",e);break;case"option":h=u;break;case"select":e._wrapperState={wasMultiple:!!u.multiple},h=N({},u,{value:void 0}),st("invalid",e);break;case"textarea":Re(e,u),h=Te(e,u),st("invalid",e);break;default:h=u}Ar(i,h),j=h;for(f in j)if(j.hasOwnProperty(f)){var T=j[f];f==="style"?rn(e,T):f==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,T!=null&&gn(e,T)):f==="children"?typeof T=="string"?(i!=="textarea"||T!=="")&&It(e,T):typeof T=="number"&&It(e,""+T):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(l.hasOwnProperty(f)?T!=null&&f==="onScroll"&&st("scroll",e):T!=null&&U(e,f,T,v))}switch(i){case"input":Be(e),je(e,u,!1);break;case"textarea":Be(e),ot(e);break;case"option":u.value!=null&&e.setAttribute("value",""+he(u.value));break;case"select":e.multiple=!!u.multiple,f=u.value,f!=null?Ce(e,!!u.multiple,f,!1):u.defaultValue!=null&&Ce(e,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=Pa)}switch(i){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Mt(t),null;case 6:if(e&&t.stateNode!=null)wh(e,t,e.memoizedProps,u);else{if(typeof u!="string"&&t.stateNode===null)throw Error(r(166));if(i=$r(Oi.current),$r(Tn.current),Ma(t)){if(u=t.stateNode,i=t.memoizedProps,u[Cn]=t,(f=u.nodeValue!==i)&&(e=Zt,e!==null))switch(e.tag){case 3:Ta(u.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ta(u.nodeValue,i,(e.mode&1)!==0)}f&&(t.flags|=4)}else u=(i.nodeType===9?i:i.ownerDocument).createTextNode(u),u[Cn]=t,t.stateNode=u}return Mt(t),null;case 13:if(it(ct),u=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(lt&&en!==null&&(t.mode&1)!==0&&(t.flags&128)===0)kd(),Es(),t.flags|=98560,f=!1;else if(f=Ma(t),u!==null&&u.dehydrated!==null){if(e===null){if(!f)throw Error(r(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Cn]=t}else Es(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Mt(t),f=!1}else wn!==null&&(hc(wn),wn=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=i,t):(u=u!==null,u!==(e!==null&&e.memoizedState!==null)&&u&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(ct.current&1)!==0?xt===0&&(xt=3):mc())),t.updateQueue!==null&&(t.flags|=4),Mt(t),null);case 4:return Ps(),tc(e,t),e===null&&_i(t.stateNode.containerInfo),Mt(t),null;case 10:return Tl(t.type._context),Mt(t),null;case 17:return Gt(t.type)&&Aa(),Mt(t),null;case 19:if(it(ct),f=t.memoizedState,f===null)return Mt(t),null;if(u=(t.flags&128)!==0,v=f.rendering,v===null)if(u)Li(f,!1);else{if(xt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(v=za(e),v!==null){for(t.flags|=128,Li(f,!1),u=v.updateQueue,u!==null&&(t.updateQueue=u,t.flags|=4),t.subtreeFlags=0,u=i,i=t.child;i!==null;)f=i,e=u,f.flags&=14680066,v=f.alternate,v===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=v.childLanes,f.lanes=v.lanes,f.child=v.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=v.memoizedProps,f.memoizedState=v.memoizedState,f.updateQueue=v.updateQueue,f.type=v.type,e=v.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return et(ct,ct.current&1|2),t.child}e=e.sibling}f.tail!==null&&Qe()>Rs&&(t.flags|=128,u=!0,Li(f,!1),t.lanes=4194304)}else{if(!u)if(e=za(v),e!==null){if(t.flags|=128,u=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Li(f,!0),f.tail===null&&f.tailMode==="hidden"&&!v.alternate&&!lt)return Mt(t),null}else 2*Qe()-f.renderingStartTime>Rs&&i!==1073741824&&(t.flags|=128,u=!0,Li(f,!1),t.lanes=4194304);f.isBackwards?(v.sibling=t.child,t.child=v):(i=f.last,i!==null?i.sibling=v:t.child=v,f.last=v)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Qe(),t.sibling=null,i=ct.current,et(ct,u?i&1|2:i&1),t):(Mt(t),null);case 22:case 23:return pc(),u=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==u&&(t.flags|=8192),u&&(t.mode&1)!==0?(tn&1073741824)!==0&&(Mt(t),t.subtreeFlags&6&&(t.flags|=8192)):Mt(t),null;case 24:return null;case 25:return null}throw Error(r(156,t.tag))}function Ym(e,t){switch(Sl(t),t.tag){case 1:return Gt(t.type)&&Aa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ps(),it(Ht),it(Dt),Ll(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Rl(t),null;case 13:if(it(ct),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));Es()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return it(ct),null;case 4:return Ps(),null;case 10:return Tl(t.type._context),null;case 22:case 23:return pc(),null;case 24:return null;default:return null}}var Xa=!1,Ut=!1,Xm=typeof WeakSet=="function"?WeakSet:Set,ve=null;function As(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(u){dt(e,t,u)}else i.current=null}function nc(e,t,i){try{i()}catch(u){dt(e,t,u)}}var xh=!1;function Zm(e,t){if(pl=va,e=Xu(),al(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var u=i.getSelection&&i.getSelection();if(u&&u.rangeCount!==0){i=u.anchorNode;var h=u.anchorOffset,f=u.focusNode;u=u.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var v=0,j=-1,T=-1,M=0,Y=0,Z=e,Q=null;t:for(;;){for(var me;Z!==i||h!==0&&Z.nodeType!==3||(j=v+h),Z!==f||u!==0&&Z.nodeType!==3||(T=v+u),Z.nodeType===3&&(v+=Z.nodeValue.length),(me=Z.firstChild)!==null;)Q=Z,Z=me;for(;;){if(Z===e)break t;if(Q===i&&++M===h&&(j=v),Q===f&&++Y===u&&(T=v),(me=Z.nextSibling)!==null)break;Z=Q,Q=Z.parentNode}Z=me}i=j===-1||T===-1?null:{start:j,end:T}}else i=null}i=i||{start:0,end:0}}else i=null;for(ml={focusedElem:e,selectionRange:i},va=!1,ve=t;ve!==null;)if(t=ve,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ve=e;else for(;ve!==null;){t=ve;try{var we=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var be=we.memoizedProps,ft=we.memoizedState,A=t.stateNode,P=A.getSnapshotBeforeUpdate(t.elementType===t.type?be:xn(t.type,be),ft);A.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var R=t.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ne){dt(t,t.return,ne)}if(e=t.sibling,e!==null){e.return=t.return,ve=e;break}ve=t.return}return we=xh,xh=!1,we}function Mi(e,t,i){var u=t.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&e)===e){var f=h.destroy;h.destroy=void 0,f!==void 0&&nc(t,i,f)}h=h.next}while(h!==u)}}function Za(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var u=i.create;i.destroy=u()}i=i.next}while(i!==t)}}function rc(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function bh(e){var t=e.alternate;t!==null&&(e.alternate=null,bh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Cn],delete t[Ei],delete t[wl],delete t[Dm],delete t[Lm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function kh(e){return e.tag===5||e.tag===3||e.tag===4}function Sh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||kh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function sc(e,t,i){var u=e.tag;if(u===5||u===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Pa));else if(u!==4&&(e=e.child,e!==null))for(sc(e,t,i),e=e.sibling;e!==null;)sc(e,t,i),e=e.sibling}function ic(e,t,i){var u=e.tag;if(u===5||u===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(u!==4&&(e=e.child,e!==null))for(ic(e,t,i),e=e.sibling;e!==null;)ic(e,t,i),e=e.sibling}var Pt=null,bn=!1;function pr(e,t,i){for(i=i.child;i!==null;)_h(e,t,i),i=i.sibling}function _h(e,t,i){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Pe,i)}catch{}switch(i.tag){case 5:Ut||As(i,t);case 6:var u=Pt,h=bn;Pt=null,pr(e,t,i),Pt=u,bn=h,Pt!==null&&(bn?(e=Pt,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Pt.removeChild(i.stateNode));break;case 18:Pt!==null&&(bn?(e=Pt,i=i.stateNode,e.nodeType===8?vl(e.parentNode,i):e.nodeType===1&&vl(e,i),mi(e)):vl(Pt,i.stateNode));break;case 4:u=Pt,h=bn,Pt=i.stateNode.containerInfo,bn=!0,pr(e,t,i),Pt=u,bn=h;break;case 0:case 11:case 14:case 15:if(!Ut&&(u=i.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var f=h,v=f.destroy;f=f.tag,v!==void 0&&((f&2)!==0||(f&4)!==0)&&nc(i,t,v),h=h.next}while(h!==u)}pr(e,t,i);break;case 1:if(!Ut&&(As(i,t),u=i.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=i.memoizedProps,u.state=i.memoizedState,u.componentWillUnmount()}catch(j){dt(i,t,j)}pr(e,t,i);break;case 21:pr(e,t,i);break;case 22:i.mode&1?(Ut=(u=Ut)||i.memoizedState!==null,pr(e,t,i),Ut=u):pr(e,t,i);break;default:pr(e,t,i)}}function jh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new Xm),t.forEach(function(u){var h=lg.bind(null,e,u);i.has(u)||(i.add(u),u.then(h,h))})}}function kn(e,t){var i=t.deletions;if(i!==null)for(var u=0;u<i.length;u++){var h=i[u];try{var f=e,v=t,j=v;e:for(;j!==null;){switch(j.tag){case 5:Pt=j.stateNode,bn=!1;break e;case 3:Pt=j.stateNode.containerInfo,bn=!0;break e;case 4:Pt=j.stateNode.containerInfo,bn=!0;break e}j=j.return}if(Pt===null)throw Error(r(160));_h(f,v,h),Pt=null,bn=!1;var T=h.alternate;T!==null&&(T.return=null),h.return=null}catch(M){dt(h,t,M)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Eh(t,e),t=t.sibling}function Eh(e,t){var i=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(kn(t,e),On(e),u&4){try{Mi(3,e,e.return),Za(3,e)}catch(be){dt(e,e.return,be)}try{Mi(5,e,e.return)}catch(be){dt(e,e.return,be)}}break;case 1:kn(t,e),On(e),u&512&&i!==null&&As(i,i.return);break;case 5:if(kn(t,e),On(e),u&512&&i!==null&&As(i,i.return),e.flags&32){var h=e.stateNode;try{It(h,"")}catch(be){dt(e,e.return,be)}}if(u&4&&(h=e.stateNode,h!=null)){var f=e.memoizedProps,v=i!==null?i.memoizedProps:f,j=e.type,T=e.updateQueue;if(e.updateQueue=null,T!==null)try{j==="input"&&f.type==="radio"&&f.name!=null&&W(h,f),Ir(j,v);var M=Ir(j,f);for(v=0;v<T.length;v+=2){var Y=T[v],Z=T[v+1];Y==="style"?rn(h,Z):Y==="dangerouslySetInnerHTML"?gn(h,Z):Y==="children"?It(h,Z):U(h,Y,Z,M)}switch(j){case"input":ye(h,f);break;case"textarea":nt(h,f);break;case"select":var Q=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!f.multiple;var me=f.value;me!=null?Ce(h,!!f.multiple,me,!1):Q!==!!f.multiple&&(f.defaultValue!=null?Ce(h,!!f.multiple,f.defaultValue,!0):Ce(h,!!f.multiple,f.multiple?[]:"",!1))}h[Ei]=f}catch(be){dt(e,e.return,be)}}break;case 6:if(kn(t,e),On(e),u&4){if(e.stateNode===null)throw Error(r(162));h=e.stateNode,f=e.memoizedProps;try{h.nodeValue=f}catch(be){dt(e,e.return,be)}}break;case 3:if(kn(t,e),On(e),u&4&&i!==null&&i.memoizedState.isDehydrated)try{mi(t.containerInfo)}catch(be){dt(e,e.return,be)}break;case 4:kn(t,e),On(e);break;case 13:kn(t,e),On(e),h=e.child,h.flags&8192&&(f=h.memoizedState!==null,h.stateNode.isHidden=f,!f||h.alternate!==null&&h.alternate.memoizedState!==null||(lc=Qe())),u&4&&jh(e);break;case 22:if(Y=i!==null&&i.memoizedState!==null,e.mode&1?(Ut=(M=Ut)||Y,kn(t,e),Ut=M):kn(t,e),On(e),u&8192){if(M=e.memoizedState!==null,(e.stateNode.isHidden=M)&&!Y&&(e.mode&1)!==0)for(ve=e,Y=e.child;Y!==null;){for(Z=ve=Y;ve!==null;){switch(Q=ve,me=Q.child,Q.tag){case 0:case 11:case 14:case 15:Mi(4,Q,Q.return);break;case 1:As(Q,Q.return);var we=Q.stateNode;if(typeof we.componentWillUnmount=="function"){u=Q,i=Q.return;try{t=u,we.props=t.memoizedProps,we.state=t.memoizedState,we.componentWillUnmount()}catch(be){dt(u,i,be)}}break;case 5:As(Q,Q.return);break;case 22:if(Q.memoizedState!==null){Th(Z);continue}}me!==null?(me.return=Q,ve=me):Th(Z)}Y=Y.sibling}e:for(Y=null,Z=e;;){if(Z.tag===5){if(Y===null){Y=Z;try{h=Z.stateNode,M?(f=h.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(j=Z.stateNode,T=Z.memoizedProps.style,v=T!=null&&T.hasOwnProperty("display")?T.display:null,j.style.display=Yn("display",v))}catch(be){dt(e,e.return,be)}}}else if(Z.tag===6){if(Y===null)try{Z.stateNode.nodeValue=M?"":Z.memoizedProps}catch(be){dt(e,e.return,be)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===e)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===e)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===e)break e;Y===Z&&(Y=null),Z=Z.return}Y===Z&&(Y=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:kn(t,e),On(e),u&4&&jh(e);break;case 21:break;default:kn(t,e),On(e)}}function On(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(kh(i)){var u=i;break e}i=i.return}throw Error(r(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(It(h,""),u.flags&=-33);var f=Sh(e);ic(e,f,h);break;case 3:case 4:var v=u.stateNode.containerInfo,j=Sh(e);sc(e,j,v);break;default:throw Error(r(161))}}catch(T){dt(e,e.return,T)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function eg(e,t,i){ve=e,Nh(e)}function Nh(e,t,i){for(var u=(e.mode&1)!==0;ve!==null;){var h=ve,f=h.child;if(h.tag===22&&u){var v=h.memoizedState!==null||Xa;if(!v){var j=h.alternate,T=j!==null&&j.memoizedState!==null||Ut;j=Xa;var M=Ut;if(Xa=v,(Ut=T)&&!M)for(ve=h;ve!==null;)v=ve,T=v.child,v.tag===22&&v.memoizedState!==null?Ph(h):T!==null?(T.return=v,ve=T):Ph(h);for(;f!==null;)ve=f,Nh(f),f=f.sibling;ve=h,Xa=j,Ut=M}Ch(e)}else(h.subtreeFlags&8772)!==0&&f!==null?(f.return=h,ve=f):Ch(e)}}function Ch(e){for(;ve!==null;){var t=ve;if((t.flags&8772)!==0){var i=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Ut||Za(5,t);break;case 1:var u=t.stateNode;if(t.flags&4&&!Ut)if(i===null)u.componentDidMount();else{var h=t.elementType===t.type?i.memoizedProps:xn(t.type,i.memoizedProps);u.componentDidUpdate(h,i.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Td(t,f,u);break;case 3:var v=t.updateQueue;if(v!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Td(t,v,i)}break;case 5:var j=t.stateNode;if(i===null&&t.flags&4){i=j;var T=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":T.autoFocus&&i.focus();break;case"img":T.src&&(i.src=T.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var M=t.alternate;if(M!==null){var Y=M.memoizedState;if(Y!==null){var Z=Y.dehydrated;Z!==null&&mi(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Ut||t.flags&512&&rc(t)}catch(Q){dt(t,t.return,Q)}}if(t===e){ve=null;break}if(i=t.sibling,i!==null){i.return=t.return,ve=i;break}ve=t.return}}function Th(e){for(;ve!==null;){var t=ve;if(t===e){ve=null;break}var i=t.sibling;if(i!==null){i.return=t.return,ve=i;break}ve=t.return}}function Ph(e){for(;ve!==null;){var t=ve;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Za(4,t)}catch(T){dt(t,i,T)}break;case 1:var u=t.stateNode;if(typeof u.componentDidMount=="function"){var h=t.return;try{u.componentDidMount()}catch(T){dt(t,h,T)}}var f=t.return;try{rc(t)}catch(T){dt(t,f,T)}break;case 5:var v=t.return;try{rc(t)}catch(T){dt(t,v,T)}}}catch(T){dt(t,t.return,T)}if(t===e){ve=null;break}var j=t.sibling;if(j!==null){j.return=t.return,ve=j;break}ve=t.return}}var tg=Math.ceil,eo=B.ReactCurrentDispatcher,ac=B.ReactCurrentOwner,un=B.ReactCurrentBatchConfig,qe=0,Et=null,pt=null,Ot=0,tn=0,Is=cr(0),xt=0,Ui=null,qr=0,to=0,oc=0,Fi=null,Jt=null,lc=0,Rs=1/0,Hn=null,no=!1,cc=null,mr=null,ro=!1,gr=null,so=0,Bi=0,uc=null,io=-1,ao=0;function Wt(){return(qe&6)!==0?Qe():io!==-1?io:io=Qe()}function yr(e){return(e.mode&1)===0?1:(qe&2)!==0&&Ot!==0?Ot&-Ot:Um.transition!==null?(ao===0&&(ao=Su()),ao):(e=Ye,e!==0||(e=window.event,e=e===void 0?16:Au(e.type)),e)}function Sn(e,t,i,u){if(50<Bi)throw Bi=0,uc=null,Error(r(185));ui(e,i,u),((qe&2)===0||e!==Et)&&(e===Et&&((qe&2)===0&&(to|=i),xt===4&&vr(e,Ot)),Kt(e,u),i===1&&qe===0&&(t.mode&1)===0&&(Rs=Qe()+500,Ra&&dr()))}function Kt(e,t){var i=e.callbackNode;Up(e,t);var u=ma(e,e===Et?Ot:0);if(u===0)i!==null&&He(i),e.callbackNode=null,e.callbackPriority=0;else if(t=u&-u,e.callbackPriority!==t){if(i!=null&&He(i),t===1)e.tag===0?Mm(Ah.bind(null,e)):yd(Ah.bind(null,e)),Im(function(){(qe&6)===0&&dr()}),i=null;else{switch(_u(u)){case 1:i=Ke;break;case 4:i=rt;break;case 16:i=Yt;break;case 536870912:i=Mn;break;default:i=Yt}i=Bh(i,Oh.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function Oh(e,t){if(io=-1,ao=0,(qe&6)!==0)throw Error(r(327));var i=e.callbackNode;if(Ds()&&e.callbackNode!==i)return null;var u=ma(e,e===Et?Ot:0);if(u===0)return null;if((u&30)!==0||(u&e.expiredLanes)!==0||t)t=oo(e,u);else{t=u;var h=qe;qe|=2;var f=Rh();(Et!==e||Ot!==t)&&(Hn=null,Rs=Qe()+500,Gr(e,t));do try{sg();break}catch(j){Ih(e,j)}while(!0);Cl(),eo.current=f,qe=h,pt!==null?t=0:(Et=null,Ot=0,t=xt)}if(t!==0){if(t===2&&(h=qo(e),h!==0&&(u=h,t=dc(e,h))),t===1)throw i=Ui,Gr(e,0),vr(e,u),Kt(e,Qe()),i;if(t===6)vr(e,u);else{if(h=e.current.alternate,(u&30)===0&&!ng(h)&&(t=oo(e,u),t===2&&(f=qo(e),f!==0&&(u=f,t=dc(e,f))),t===1))throw i=Ui,Gr(e,0),vr(e,u),Kt(e,Qe()),i;switch(e.finishedWork=h,e.finishedLanes=u,t){case 0:case 1:throw Error(r(345));case 2:Vr(e,Jt,Hn);break;case 3:if(vr(e,u),(u&130023424)===u&&(t=lc+500-Qe(),10<t)){if(ma(e,0)!==0)break;if(h=e.suspendedLanes,(h&u)!==u){Wt(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=yl(Vr.bind(null,e,Jt,Hn),t);break}Vr(e,Jt,Hn);break;case 4:if(vr(e,u),(u&4194240)===u)break;for(t=e.eventTimes,h=-1;0<u;){var v=31-yn(u);f=1<<v,v=t[v],v>h&&(h=v),u&=~f}if(u=h,u=Qe()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*tg(u/1960))-u,10<u){e.timeoutHandle=yl(Vr.bind(null,e,Jt,Hn),u);break}Vr(e,Jt,Hn);break;case 5:Vr(e,Jt,Hn);break;default:throw Error(r(329))}}}return Kt(e,Qe()),e.callbackNode===i?Oh.bind(null,e):null}function dc(e,t){var i=Fi;return e.current.memoizedState.isDehydrated&&(Gr(e,t).flags|=256),e=oo(e,t),e!==2&&(t=Jt,Jt=i,t!==null&&hc(t)),e}function hc(e){Jt===null?Jt=e:Jt.push.apply(Jt,e)}function ng(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var u=0;u<i.length;u++){var h=i[u],f=h.getSnapshot;h=h.value;try{if(!vn(f(),h))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vr(e,t){for(t&=~oc,t&=~to,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-yn(t),u=1<<i;e[i]=-1,t&=~u}}function Ah(e){if((qe&6)!==0)throw Error(r(327));Ds();var t=ma(e,0);if((t&1)===0)return Kt(e,Qe()),null;var i=oo(e,t);if(e.tag!==0&&i===2){var u=qo(e);u!==0&&(t=u,i=dc(e,u))}if(i===1)throw i=Ui,Gr(e,0),vr(e,t),Kt(e,Qe()),i;if(i===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vr(e,Jt,Hn),Kt(e,Qe()),null}function fc(e,t){var i=qe;qe|=1;try{return e(t)}finally{qe=i,qe===0&&(Rs=Qe()+500,Ra&&dr())}}function Hr(e){gr!==null&&gr.tag===0&&(qe&6)===0&&Ds();var t=qe;qe|=1;var i=un.transition,u=Ye;try{if(un.transition=null,Ye=1,e)return e()}finally{Ye=u,un.transition=i,qe=t,(qe&6)===0&&dr()}}function pc(){tn=Is.current,it(Is)}function Gr(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Am(i)),pt!==null)for(i=pt.return;i!==null;){var u=i;switch(Sl(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Aa();break;case 3:Ps(),it(Ht),it(Dt),Ll();break;case 5:Rl(u);break;case 4:Ps();break;case 13:it(ct);break;case 19:it(ct);break;case 10:Tl(u.type._context);break;case 22:case 23:pc()}i=i.return}if(Et=e,pt=e=wr(e.current,null),Ot=tn=t,xt=0,Ui=null,oc=to=qr=0,Jt=Fi=null,Wr!==null){for(t=0;t<Wr.length;t++)if(i=Wr[t],u=i.interleaved,u!==null){i.interleaved=null;var h=u.next,f=i.pending;if(f!==null){var v=f.next;f.next=h,u.next=v}i.pending=u}Wr=null}return e}function Ih(e,t){do{var i=pt;try{if(Cl(),qa.current=Ja,Ha){for(var u=ut.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}Ha=!1}if(zr=0,jt=wt=ut=null,Ai=!1,Ii=0,ac.current=null,i===null||i.return===null){xt=1,Ui=t,pt=null;break}e:{var f=e,v=i.return,j=i,T=t;if(t=Ot,j.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){var M=T,Y=j,Z=Y.tag;if((Y.mode&1)===0&&(Z===0||Z===11||Z===15)){var Q=Y.alternate;Q?(Y.updateQueue=Q.updateQueue,Y.memoizedState=Q.memoizedState,Y.lanes=Q.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var me=sh(v);if(me!==null){me.flags&=-257,ih(me,v,j,f,t),me.mode&1&&rh(f,M,t),t=me,T=M;var we=t.updateQueue;if(we===null){var be=new Set;be.add(T),t.updateQueue=be}else we.add(T);break e}else{if((t&1)===0){rh(f,M,t),mc();break e}T=Error(r(426))}}else if(lt&&j.mode&1){var ft=sh(v);if(ft!==null){(ft.flags&65536)===0&&(ft.flags|=256),ih(ft,v,j,f,t),El(Os(T,j));break e}}f=T=Os(T,j),xt!==4&&(xt=2),Fi===null?Fi=[f]:Fi.push(f),f=v;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var A=th(f,T,t);Cd(f,A);break e;case 1:j=T;var P=f.type,R=f.stateNode;if((f.flags&128)===0&&(typeof P.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(mr===null||!mr.has(R)))){f.flags|=65536,t&=-t,f.lanes|=t;var ne=nh(f,j,t);Cd(f,ne);break e}}f=f.return}while(f!==null)}Lh(i)}catch(ke){t=ke,pt===i&&i!==null&&(pt=i=i.return);continue}break}while(!0)}function Rh(){var e=eo.current;return eo.current=Ja,e===null?Ja:e}function mc(){(xt===0||xt===3||xt===2)&&(xt=4),Et===null||(qr&268435455)===0&&(to&268435455)===0||vr(Et,Ot)}function oo(e,t){var i=qe;qe|=2;var u=Rh();(Et!==e||Ot!==t)&&(Hn=null,Gr(e,t));do try{rg();break}catch(h){Ih(e,h)}while(!0);if(Cl(),qe=i,eo.current=u,pt!==null)throw Error(r(261));return Et=null,Ot=0,xt}function rg(){for(;pt!==null;)Dh(pt)}function sg(){for(;pt!==null&&!ze();)Dh(pt)}function Dh(e){var t=Fh(e.alternate,e,tn);e.memoizedProps=e.pendingProps,t===null?Lh(e):pt=t,ac.current=null}function Lh(e){var t=e;do{var i=t.alternate;if(e=t.return,(t.flags&32768)===0){if(i=Qm(i,t,tn),i!==null){pt=i;return}}else{if(i=Ym(i,t),i!==null){i.flags&=32767,pt=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{xt=6,pt=null;return}}if(t=t.sibling,t!==null){pt=t;return}pt=t=e}while(t!==null);xt===0&&(xt=5)}function Vr(e,t,i){var u=Ye,h=un.transition;try{un.transition=null,Ye=1,ig(e,t,i,u)}finally{un.transition=h,Ye=u}return null}function ig(e,t,i,u){do Ds();while(gr!==null);if((qe&6)!==0)throw Error(r(327));i=e.finishedWork;var h=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var f=i.lanes|i.childLanes;if(Fp(e,f),e===Et&&(pt=Et=null,Ot=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||ro||(ro=!0,Bh(Yt,function(){return Ds(),null})),f=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||f){f=un.transition,un.transition=null;var v=Ye;Ye=1;var j=qe;qe|=4,ac.current=null,Zm(e,i),Eh(i,e),jm(ml),va=!!pl,ml=pl=null,e.current=i,eg(i),qt(),qe=j,Ye=v,un.transition=f}else e.current=i;if(ro&&(ro=!1,gr=e,so=h),f=e.pendingLanes,f===0&&(mr=null),De(i.stateNode),Kt(e,Qe()),t!==null)for(u=e.onRecoverableError,i=0;i<t.length;i++)h=t[i],u(h.value,{componentStack:h.stack,digest:h.digest});if(no)throw no=!1,e=cc,cc=null,e;return(so&1)!==0&&e.tag!==0&&Ds(),f=e.pendingLanes,(f&1)!==0?e===uc?Bi++:(Bi=0,uc=e):Bi=0,dr(),null}function Ds(){if(gr!==null){var e=_u(so),t=un.transition,i=Ye;try{if(un.transition=null,Ye=16>e?16:e,gr===null)var u=!1;else{if(e=gr,gr=null,so=0,(qe&6)!==0)throw Error(r(331));var h=qe;for(qe|=4,ve=e.current;ve!==null;){var f=ve,v=f.child;if((ve.flags&16)!==0){var j=f.deletions;if(j!==null){for(var T=0;T<j.length;T++){var M=j[T];for(ve=M;ve!==null;){var Y=ve;switch(Y.tag){case 0:case 11:case 15:Mi(8,Y,f)}var Z=Y.child;if(Z!==null)Z.return=Y,ve=Z;else for(;ve!==null;){Y=ve;var Q=Y.sibling,me=Y.return;if(bh(Y),Y===M){ve=null;break}if(Q!==null){Q.return=me,ve=Q;break}ve=me}}}var we=f.alternate;if(we!==null){var be=we.child;if(be!==null){we.child=null;do{var ft=be.sibling;be.sibling=null,be=ft}while(be!==null)}}ve=f}}if((f.subtreeFlags&2064)!==0&&v!==null)v.return=f,ve=v;else e:for(;ve!==null;){if(f=ve,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Mi(9,f,f.return)}var A=f.sibling;if(A!==null){A.return=f.return,ve=A;break e}ve=f.return}}var P=e.current;for(ve=P;ve!==null;){v=ve;var R=v.child;if((v.subtreeFlags&2064)!==0&&R!==null)R.return=v,ve=R;else e:for(v=P;ve!==null;){if(j=ve,(j.flags&2048)!==0)try{switch(j.tag){case 0:case 11:case 15:Za(9,j)}}catch(ke){dt(j,j.return,ke)}if(j===v){ve=null;break e}var ne=j.sibling;if(ne!==null){ne.return=j.return,ve=ne;break e}ve=j.return}}if(qe=h,dr(),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Pe,e)}catch{}u=!0}return u}finally{Ye=i,un.transition=t}}return!1}function Mh(e,t,i){t=Os(i,t),t=th(e,t,1),e=fr(e,t,1),t=Wt(),e!==null&&(ui(e,1,t),Kt(e,t))}function dt(e,t,i){if(e.tag===3)Mh(e,e,i);else for(;t!==null;){if(t.tag===3){Mh(t,e,i);break}else if(t.tag===1){var u=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(mr===null||!mr.has(u))){e=Os(i,e),e=nh(t,e,1),t=fr(t,e,1),e=Wt(),t!==null&&(ui(t,1,e),Kt(t,e));break}}t=t.return}}function ag(e,t,i){var u=e.pingCache;u!==null&&u.delete(t),t=Wt(),e.pingedLanes|=e.suspendedLanes&i,Et===e&&(Ot&i)===i&&(xt===4||xt===3&&(Ot&130023424)===Ot&&500>Qe()-lc?Gr(e,0):oc|=i),Kt(e,t)}function Uh(e,t){t===0&&((e.mode&1)===0?t=1:(t=pa,pa<<=1,(pa&130023424)===0&&(pa=4194304)));var i=Wt();e=$n(e,t),e!==null&&(ui(e,t,i),Kt(e,i))}function og(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Uh(e,i)}function lg(e,t){var i=0;switch(e.tag){case 13:var u=e.stateNode,h=e.memoizedState;h!==null&&(i=h.retryLane);break;case 19:u=e.stateNode;break;default:throw Error(r(314))}u!==null&&u.delete(t),Uh(e,i)}var Fh;Fh=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ht.current)Vt=!0;else{if((e.lanes&i)===0&&(t.flags&128)===0)return Vt=!1,Km(e,t,i);Vt=(e.flags&131072)!==0}else Vt=!1,lt&&(t.flags&1048576)!==0&&vd(t,La,t.index);switch(t.lanes=0,t.tag){case 2:var u=t.type;Ya(e,t),e=t.pendingProps;var h=Ss(t,Dt.current);Ts(t,i),h=Fl(null,t,u,e,h,i);var f=Bl();return t.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Gt(u)?(f=!0,Ia(t)):f=!1,t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Al(t),h.updater=Ka,t.stateNode=h,h._reactInternals=t,Gl(t,u,e,i),t=Ql(null,t,u,!0,f,i)):(t.tag=0,lt&&f&&kl(t),Bt(null,t,h,i),t=t.child),t;case 16:u=t.elementType;e:{switch(Ya(e,t),e=t.pendingProps,h=u._init,u=h(u._payload),t.type=u,h=t.tag=ug(u),e=xn(u,e),h){case 0:t=Kl(null,t,u,e,i);break e;case 1:t=dh(null,t,u,e,i);break e;case 11:t=ah(null,t,u,e,i);break e;case 14:t=oh(null,t,u,xn(u.type,e),i);break e}throw Error(r(306,u,""))}return t;case 0:return u=t.type,h=t.pendingProps,h=t.elementType===u?h:xn(u,h),Kl(e,t,u,h,i);case 1:return u=t.type,h=t.pendingProps,h=t.elementType===u?h:xn(u,h),dh(e,t,u,h,i);case 3:e:{if(hh(t),e===null)throw Error(r(387));u=t.pendingProps,f=t.memoizedState,h=f.element,Nd(e,t),$a(t,u,null,i);var v=t.memoizedState;if(u=v.element,f.isDehydrated)if(f={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){h=Os(Error(r(423)),t),t=fh(e,t,u,i,h);break e}else if(u!==h){h=Os(Error(r(424)),t),t=fh(e,t,u,i,h);break e}else for(en=lr(t.stateNode.containerInfo.firstChild),Zt=t,lt=!0,wn=null,i=jd(t,null,u,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Es(),u===h){t=qn(e,t,i);break e}Bt(e,t,u,i)}t=t.child}return t;case 5:return Pd(t),e===null&&jl(t),u=t.type,h=t.pendingProps,f=e!==null?e.memoizedProps:null,v=h.children,gl(u,h)?v=null:f!==null&&gl(u,f)&&(t.flags|=32),uh(e,t),Bt(e,t,v,i),t.child;case 6:return e===null&&jl(t),null;case 13:return ph(e,t,i);case 4:return Il(t,t.stateNode.containerInfo),u=t.pendingProps,e===null?t.child=Ns(t,null,u,i):Bt(e,t,u,i),t.child;case 11:return u=t.type,h=t.pendingProps,h=t.elementType===u?h:xn(u,h),ah(e,t,u,h,i);case 7:return Bt(e,t,t.pendingProps,i),t.child;case 8:return Bt(e,t,t.pendingProps.children,i),t.child;case 12:return Bt(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(u=t.type._context,h=t.pendingProps,f=t.memoizedProps,v=h.value,et(Fa,u._currentValue),u._currentValue=v,f!==null)if(vn(f.value,v)){if(f.children===h.children&&!Ht.current){t=qn(e,t,i);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var j=f.dependencies;if(j!==null){v=f.child;for(var T=j.firstContext;T!==null;){if(T.context===u){if(f.tag===1){T=zn(-1,i&-i),T.tag=2;var M=f.updateQueue;if(M!==null){M=M.shared;var Y=M.pending;Y===null?T.next=T:(T.next=Y.next,Y.next=T),M.pending=T}}f.lanes|=i,T=f.alternate,T!==null&&(T.lanes|=i),Pl(f.return,i,t),j.lanes|=i;break}T=T.next}}else if(f.tag===10)v=f.type===t.type?null:f.child;else if(f.tag===18){if(v=f.return,v===null)throw Error(r(341));v.lanes|=i,j=v.alternate,j!==null&&(j.lanes|=i),Pl(v,i,t),v=f.sibling}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===t){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}Bt(e,t,h.children,i),t=t.child}return t;case 9:return h=t.type,u=t.pendingProps.children,Ts(t,i),h=ln(h),u=u(h),t.flags|=1,Bt(e,t,u,i),t.child;case 14:return u=t.type,h=xn(u,t.pendingProps),h=xn(u.type,h),oh(e,t,u,h,i);case 15:return lh(e,t,t.type,t.pendingProps,i);case 17:return u=t.type,h=t.pendingProps,h=t.elementType===u?h:xn(u,h),Ya(e,t),t.tag=1,Gt(u)?(e=!0,Ia(t)):e=!1,Ts(t,i),Zd(t,u,h),Gl(t,u,h,i),Ql(null,t,u,!0,e,i);case 19:return gh(e,t,i);case 22:return ch(e,t,i)}throw Error(r(156,t.tag))};function Bh(e,t){return We(e,t)}function cg(e,t,i,u){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(e,t,i,u){return new cg(e,t,i,u)}function gc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ug(e){if(typeof e=="function")return gc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===oe)return 11;if(e===ce)return 14}return 2}function wr(e,t){var i=e.alternate;return i===null?(i=dn(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function lo(e,t,i,u,h,f){var v=2;if(u=e,typeof e=="function")gc(e)&&(v=1);else if(typeof e=="string")v=5;else e:switch(e){case z:return Jr(i.children,h,f,t);case te:v=8,h|=8;break;case ue:return e=dn(12,i,t,h|2),e.elementType=ue,e.lanes=f,e;case re:return e=dn(13,i,t,h),e.elementType=re,e.lanes=f,e;case V:return e=dn(19,i,t,h),e.elementType=V,e.lanes=f,e;case q:return co(i,h,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fe:v=10;break e;case K:v=9;break e;case oe:v=11;break e;case ce:v=14;break e;case pe:v=16,u=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return t=dn(v,i,t,h),t.elementType=e,t.type=u,t.lanes=f,t}function Jr(e,t,i,u){return e=dn(7,e,u,t),e.lanes=i,e}function co(e,t,i,u){return e=dn(22,e,u,t),e.elementType=q,e.lanes=i,e.stateNode={isHidden:!1},e}function yc(e,t,i){return e=dn(6,e,null,t),e.lanes=i,e}function vc(e,t,i){return t=dn(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function dg(e,t,i,u,h){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ho(0),this.expirationTimes=Ho(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ho(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function wc(e,t,i,u,h,f,v,j,T){return e=new dg(e,t,i,j,T),t===1?(t=1,f===!0&&(t|=8)):t=0,f=dn(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:u,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Al(f),e}function hg(e,t,i){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:u==null?null:""+u,children:e,containerInfo:t,implementation:i}}function Wh(e){if(!e)return ur;e=e._reactInternals;e:{if(Dn(e)!==e||e.tag!==1)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Gt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(r(171))}if(e.tag===1){var i=e.type;if(Gt(i))return md(e,i,t)}return t}function $h(e,t,i,u,h,f,v,j,T){return e=wc(i,u,!0,e,h,f,v,j,T),e.context=Wh(null),i=e.current,u=Wt(),h=yr(i),f=zn(u,h),f.callback=t??null,fr(i,f,h),e.current.lanes=h,ui(e,h,u),Kt(e,u),e}function uo(e,t,i,u){var h=t.current,f=Wt(),v=yr(h);return i=Wh(i),t.context===null?t.context=i:t.pendingContext=i,t=zn(f,v),t.payload={element:e},u=u===void 0?null:u,u!==null&&(t.callback=u),e=fr(h,t,v),e!==null&&(Sn(e,h,v,f),Wa(e,h,v)),v}function ho(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function xc(e,t){zh(e,t),(e=e.alternate)&&zh(e,t)}function fg(){return null}var qh=typeof reportError=="function"?reportError:function(e){console.error(e)};function bc(e){this._internalRoot=e}fo.prototype.render=bc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));uo(e,t,null,null)},fo.prototype.unmount=bc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hr(function(){uo(null,e,null,null)}),t[Un]=null}};function fo(e){this._internalRoot=e}fo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nu();e={blockedOn:null,target:e,priority:t};for(var i=0;i<ir.length&&t!==0&&t<ir[i].priority;i++);ir.splice(i,0,e),i===0&&Pu(e)}};function kc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function po(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Hh(){}function pg(e,t,i,u,h){if(h){if(typeof u=="function"){var f=u;u=function(){var M=ho(v);f.call(M)}}var v=$h(t,u,e,0,null,!1,!1,"",Hh);return e._reactRootContainer=v,e[Un]=v.current,_i(e.nodeType===8?e.parentNode:e),Hr(),v}for(;h=e.lastChild;)e.removeChild(h);if(typeof u=="function"){var j=u;u=function(){var M=ho(T);j.call(M)}}var T=wc(e,0,!1,null,null,!1,!1,"",Hh);return e._reactRootContainer=T,e[Un]=T.current,_i(e.nodeType===8?e.parentNode:e),Hr(function(){uo(t,T,i,u)}),T}function mo(e,t,i,u,h){var f=i._reactRootContainer;if(f){var v=f;if(typeof h=="function"){var j=h;h=function(){var T=ho(v);j.call(T)}}uo(t,v,e,h)}else v=pg(i,t,e,h,u);return ho(v)}ju=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=ci(t.pendingLanes);i!==0&&(Go(t,i|1),Kt(t,Qe()),(qe&6)===0&&(Rs=Qe()+500,dr()))}break;case 13:Hr(function(){var u=$n(e,1);if(u!==null){var h=Wt();Sn(u,e,1,h)}}),xc(e,1)}},Vo=function(e){if(e.tag===13){var t=$n(e,134217728);if(t!==null){var i=Wt();Sn(t,e,134217728,i)}xc(e,134217728)}},Eu=function(e){if(e.tag===13){var t=yr(e),i=$n(e,t);if(i!==null){var u=Wt();Sn(i,e,t,u)}xc(e,t)}},Nu=function(){return Ye},Cu=function(e,t){var i=Ye;try{return Ye=e,t()}finally{Ye=i}},ii=function(e,t,i){switch(t){case"input":if(ye(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var u=i[t];if(u!==e&&u.form===e.form){var h=Oa(u);if(!h)throw Error(r(90));Je(u),ye(u,h)}}}break;case"textarea":nt(e,i);break;case"select":t=i.value,t!=null&&Ce(e,!!i.multiple,t,!1)}},ua=fc,da=Hr;var mg={usingClientEntryPoint:!1,Events:[Ni,bs,Oa,la,ca,fc]},Wi={findFiberByHostInstance:Mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gg={bundleType:Wi.bundleType,version:Wi.version,rendererPackageName:Wi.rendererPackageName,rendererConfig:Wi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ge(e),e===null?null:e.stateNode},findFiberByHostInstance:Wi.findFiberByHostInstance||fg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var go=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!go.isDisabled&&go.supportsFiber)try{Pe=go.inject(gg),sn=go}catch{}}return Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mg,Qt.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kc(t))throw Error(r(200));return hg(e,t,null,i)},Qt.createRoot=function(e,t){if(!kc(e))throw Error(r(299));var i=!1,u="",h=qh;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(u=t.identifierPrefix),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=wc(e,1,!1,null,null,i,!1,u,h),e[Un]=t.current,_i(e.nodeType===8?e.parentNode:e),new bc(t)},Qt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=ge(t),e=e===null?null:e.stateNode,e},Qt.flushSync=function(e){return Hr(e)},Qt.hydrate=function(e,t,i){if(!po(t))throw Error(r(200));return mo(null,e,t,!0,i)},Qt.hydrateRoot=function(e,t,i){if(!kc(e))throw Error(r(405));var u=i!=null&&i.hydratedSources||null,h=!1,f="",v=qh;if(i!=null&&(i.unstable_strictMode===!0&&(h=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),t=$h(t,null,e,1,i??null,h,!1,f,v),e[Un]=t.current,_i(e),u)for(e=0;e<u.length;e++)i=u[e],h=i._getVersion,h=h(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,h]:t.mutableSourceEagerHydrationData.push(i,h);return new fo(t)},Qt.render=function(e,t,i){if(!po(t))throw Error(r(200));return mo(null,e,t,!1,i)},Qt.unmountComponentAtNode=function(e){if(!po(e))throw Error(r(40));return e._reactRootContainer?(Hr(function(){mo(null,null,e,!1,function(){e._reactRootContainer=null,e[Un]=null})}),!0):!1},Qt.unstable_batchedUpdates=fc,Qt.unstable_renderSubtreeIntoContainer=function(e,t,i,u){if(!po(i))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return mo(e,t,i,!1,u)},Qt.version="18.3.1-next-f1338f8080-20240426",Qt}var ef;function Gf(){if(ef)return jc.exports;ef=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),jc.exports=Tg(),jc.exports}var tf;function Pg(){if(tf)return yo;tf=1;var s=Gf();return yo.createRoot=s.createRoot,yo.hydrateRoot=s.hydrateRoot,yo}var Og=Pg();const Ag=ou(Og);Gf();function Yi(){return Yi=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o])}return s},Yi.apply(this,arguments)}var Cr;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Cr||(Cr={}));const nf="popstate";function Ig(s){s===void 0&&(s={});function n(o,l){let{pathname:c,search:d,hash:m}=o.location;return Wc("",{pathname:c,search:d,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(o,l){return typeof l=="string"?l:Eo(l)}return Dg(n,r,null,s)}function mt(s,n){if(s===!1||s===null||typeof s>"u")throw new Error(n)}function Vf(s,n){if(!s){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Rg(){return Math.random().toString(36).substr(2,8)}function rf(s,n){return{usr:s.state,key:s.key,idx:n}}function Wc(s,n,r,o){return r===void 0&&(r=null),Yi({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof n=="string"?ti(n):n,{state:r,key:n&&n.key||o||Rg()})}function Eo(s){let{pathname:n="/",search:r="",hash:o=""}=s;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),o&&o!=="#"&&(n+=o.charAt(0)==="#"?o:"#"+o),n}function ti(s){let n={};if(s){let r=s.indexOf("#");r>=0&&(n.hash=s.substr(r),s=s.substr(0,r));let o=s.indexOf("?");o>=0&&(n.search=s.substr(o),s=s.substr(0,o)),s&&(n.pathname=s)}return n}function Dg(s,n,r,o){o===void 0&&(o={});let{window:l=document.defaultView,v5Compat:c=!1}=o,d=l.history,m=Cr.Pop,p=null,g=y();g==null&&(g=0,d.replaceState(Yi({},d.state,{idx:g}),""));function y(){return(d.state||{idx:null}).idx}function x(){m=Cr.Pop;let k=y(),$=k==null?null:k-g;g=k,p&&p({action:m,location:_.location,delta:$})}function S(k,$){m=Cr.Push;let F=Wc(_.location,k,$);g=y()+1;let U=rf(F,g),B=_.createHref(F);try{d.pushState(U,"",B)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;l.location.assign(B)}c&&p&&p({action:m,location:_.location,delta:1})}function C(k,$){m=Cr.Replace;let F=Wc(_.location,k,$);g=y();let U=rf(F,g),B=_.createHref(F);d.replaceState(U,"",B),c&&p&&p({action:m,location:_.location,delta:0})}function b(k){let $=l.location.origin!=="null"?l.location.origin:l.location.href,F=typeof k=="string"?k:Eo(k);return F=F.replace(/ $/,"%20"),mt($,"No window.location.(origin|href) available to create URL for href: "+F),new URL(F,$)}let _={get action(){return m},get location(){return s(l,d)},listen(k){if(p)throw new Error("A history only accepts one active listener");return l.addEventListener(nf,x),p=k,()=>{l.removeEventListener(nf,x),p=null}},createHref(k){return n(l,k)},createURL:b,encodeLocation(k){let $=b(k);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:S,replace:C,go(k){return d.go(k)}};return _}var sf;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(sf||(sf={}));function Lg(s,n,r){return r===void 0&&(r="/"),Mg(s,n,r)}function Mg(s,n,r,o){let l=typeof n=="string"?ti(n):n,c=cu(l.pathname||"/",r);if(c==null)return null;let d=Jf(s);Ug(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let g=Qg(c);m=Vg(d[p],g)}return m}function Jf(s,n,r,o){n===void 0&&(n=[]),r===void 0&&(r=[]),o===void 0&&(o="");let l=(c,d,m)=>{let p={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};p.relativePath.startsWith("/")&&(mt(p.relativePath.startsWith(o),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(o.length));let g=Tr([o,p.relativePath]),y=r.concat(p);c.children&&c.children.length>0&&(mt(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),Jf(c.children,n,y,g)),!(c.path==null&&!c.index)&&n.push({path:g,score:Hg(g,c.index),routesMeta:y})};return s.forEach((c,d)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))l(c,d);else for(let p of Kf(c.path))l(c,d,p)}),n}function Kf(s){let n=s.split("/");if(n.length===0)return[];let[r,...o]=n,l=r.endsWith("?"),c=r.replace(/\?$/,"");if(o.length===0)return l?[c,""]:[c];let d=Kf(o.join("/")),m=[];return m.push(...d.map(p=>p===""?c:[c,p].join("/"))),l&&m.push(...d),m.map(p=>s.startsWith("/")&&p===""?"/":p)}function Ug(s){s.sort((n,r)=>n.score!==r.score?r.score-n.score:Gg(n.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}const Fg=/^:[\w-]+$/,Bg=3,Wg=2,$g=1,zg=10,qg=-2,af=s=>s==="*";function Hg(s,n){let r=s.split("/"),o=r.length;return r.some(af)&&(o+=qg),n&&(o+=Wg),r.filter(l=>!af(l)).reduce((l,c)=>l+(Fg.test(c)?Bg:c===""?$g:zg),o)}function Gg(s,n){return s.length===n.length&&s.slice(0,-1).every((o,l)=>o===n[l])?s[s.length-1]-n[n.length-1]:0}function Vg(s,n,r){let{routesMeta:o}=s,l={},c="/",d=[];for(let m=0;m<o.length;++m){let p=o[m],g=m===o.length-1,y=c==="/"?n:n.slice(c.length)||"/",x=Jg({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},y),S=p.route;if(!x)return null;Object.assign(l,x.params),d.push({params:l,pathname:Tr([c,x.pathname]),pathnameBase:ey(Tr([c,x.pathnameBase])),route:S}),x.pathnameBase!=="/"&&(c=Tr([c,x.pathnameBase]))}return d}function Jg(s,n){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,o]=Kg(s.path,s.caseSensitive,s.end),l=n.match(r);if(!l)return null;let c=l[0],d=c.replace(/(.)\/+$/,"$1"),m=l.slice(1);return{params:o.reduce((g,y,x)=>{let{paramName:S,isOptional:C}=y;if(S==="*"){let _=m[x]||"";d=c.slice(0,c.length-_.length).replace(/(.)\/+$/,"$1")}const b=m[x];return C&&!b?g[S]=void 0:g[S]=(b||"").replace(/%2F/g,"/"),g},{}),pathname:c,pathnameBase:d,pattern:s}}function Kg(s,n,r){n===void 0&&(n=!1),r===void 0&&(r=!0),Vf(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let o=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(o.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(o.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,n?void 0:"i"),o]}function Qg(s){try{return s.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Vf(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),s}}function cu(s,n){if(n==="/")return s;if(!s.toLowerCase().startsWith(n.toLowerCase()))return null;let r=n.endsWith("/")?n.length-1:n.length,o=s.charAt(r);return o&&o!=="/"?null:s.slice(r)||"/"}function Yg(s,n){n===void 0&&(n="/");let{pathname:r,search:o="",hash:l=""}=typeof s=="string"?ti(s):s;return{pathname:r?r.startsWith("/")?r:Xg(r,n):n,search:ty(o),hash:ny(l)}}function Xg(s,n){let r=n.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function Cc(s,n,r,o){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Zg(s){return s.filter((n,r)=>r===0||n.route.path&&n.route.path.length>0)}function Qf(s,n){let r=Zg(s);return n?r.map((o,l)=>l===r.length-1?o.pathname:o.pathnameBase):r.map(o=>o.pathnameBase)}function Yf(s,n,r,o){o===void 0&&(o=!1);let l;typeof s=="string"?l=ti(s):(l=Yi({},s),mt(!l.pathname||!l.pathname.includes("?"),Cc("?","pathname","search",l)),mt(!l.pathname||!l.pathname.includes("#"),Cc("#","pathname","hash",l)),mt(!l.search||!l.search.includes("#"),Cc("#","search","hash",l)));let c=s===""||l.pathname==="",d=c?"/":l.pathname,m;if(d==null)m=r;else{let x=n.length-1;if(!o&&d.startsWith("..")){let S=d.split("/");for(;S[0]==="..";)S.shift(),x-=1;l.pathname=S.join("/")}m=x>=0?n[x]:"/"}let p=Yg(l,m),g=d&&d!=="/"&&d.endsWith("/"),y=(c||d===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(g||y)&&(p.pathname+="/"),p}const Tr=s=>s.join("/").replace(/\/\/+/g,"/"),ey=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),ty=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,ny=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function ry(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const Xf=["post","put","patch","delete"];new Set(Xf);const sy=["get",...Xf];new Set(sy);function Xi(){return Xi=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o])}return s},Xi.apply(this,arguments)}const uu=E.createContext(null),iy=E.createContext(null),is=E.createContext(null),Do=E.createContext(null),as=E.createContext({outlet:null,matches:[],isDataRoute:!1}),Zf=E.createContext(null);function ay(s,n){let{relative:r}=n===void 0?{}:n;ta()||mt(!1);let{basename:o,navigator:l}=E.useContext(is),{hash:c,pathname:d,search:m}=tp(s,{relative:r}),p=d;return o!=="/"&&(p=d==="/"?o:Tr([o,d])),l.createHref({pathname:p,search:m,hash:c})}function ta(){return E.useContext(Do)!=null}function os(){return ta()||mt(!1),E.useContext(Do).location}function ep(s){E.useContext(is).static||E.useLayoutEffect(s)}function Rn(){let{isDataRoute:s}=E.useContext(as);return s?wy():oy()}function oy(){ta()||mt(!1);let s=E.useContext(uu),{basename:n,future:r,navigator:o}=E.useContext(is),{matches:l}=E.useContext(as),{pathname:c}=os(),d=JSON.stringify(Qf(l,r.v7_relativeSplatPath)),m=E.useRef(!1);return ep(()=>{m.current=!0}),E.useCallback(function(g,y){if(y===void 0&&(y={}),!m.current)return;if(typeof g=="number"){o.go(g);return}let x=Yf(g,JSON.parse(d),c,y.relative==="path");s==null&&n!=="/"&&(x.pathname=x.pathname==="/"?n:Tr([n,x.pathname])),(y.replace?o.replace:o.push)(x,y.state,y)},[n,o,d,c,s])}function tp(s,n){let{relative:r}=n===void 0?{}:n,{future:o}=E.useContext(is),{matches:l}=E.useContext(as),{pathname:c}=os(),d=JSON.stringify(Qf(l,o.v7_relativeSplatPath));return E.useMemo(()=>Yf(s,JSON.parse(d),c,r==="path"),[s,d,c,r])}function ly(s,n){return cy(s,n)}function cy(s,n,r,o){ta()||mt(!1);let{navigator:l}=E.useContext(is),{matches:c}=E.useContext(as),d=c[c.length-1],m=d?d.params:{};d&&d.pathname;let p=d?d.pathnameBase:"/";d&&d.route;let g=os(),y;if(n){var x;let k=typeof n=="string"?ti(n):n;p==="/"||(x=k.pathname)!=null&&x.startsWith(p)||mt(!1),y=k}else y=g;let S=y.pathname||"/",C=S;if(p!=="/"){let k=p.replace(/^\//,"").split("/");C="/"+S.replace(/^\//,"").split("/").slice(k.length).join("/")}let b=Lg(s,{pathname:C}),_=py(b&&b.map(k=>Object.assign({},k,{params:Object.assign({},m,k.params),pathname:Tr([p,l.encodeLocation?l.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?p:Tr([p,l.encodeLocation?l.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),c,r,o);return n&&_?E.createElement(Do.Provider,{value:{location:Xi({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Cr.Pop}},_):_}function uy(){let s=vy(),n=ry(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},n),r?E.createElement("pre",{style:l},r):null,null)}const dy=E.createElement(uy,null);class hy extends E.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,r){return r.location!==n.location||r.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:r.error,location:r.location,revalidation:n.revalidation||r.revalidation}}componentDidCatch(n,r){console.error("React Router caught the following error during render",n,r)}render(){return this.state.error!==void 0?E.createElement(as.Provider,{value:this.props.routeContext},E.createElement(Zf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fy(s){let{routeContext:n,match:r,children:o}=s,l=E.useContext(uu);return l&&l.static&&l.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=r.route.id),E.createElement(as.Provider,{value:n},o)}function py(s,n,r,o){var l;if(n===void 0&&(n=[]),r===void 0&&(r=null),o===void 0&&(o=null),s==null){var c;if(!r)return null;if(r.errors)s=r.matches;else if((c=o)!=null&&c.v7_partialHydration&&n.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let d=s,m=(l=r)==null?void 0:l.errors;if(m!=null){let y=d.findIndex(x=>x.route.id&&m?.[x.route.id]!==void 0);y>=0||mt(!1),d=d.slice(0,Math.min(d.length,y+1))}let p=!1,g=-1;if(r&&o&&o.v7_partialHydration)for(let y=0;y<d.length;y++){let x=d[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(g=y),x.route.id){let{loaderData:S,errors:C}=r,b=x.route.loader&&S[x.route.id]===void 0&&(!C||C[x.route.id]===void 0);if(x.route.lazy||b){p=!0,g>=0?d=d.slice(0,g+1):d=[d[0]];break}}}return d.reduceRight((y,x,S)=>{let C,b=!1,_=null,k=null;r&&(C=m&&x.route.id?m[x.route.id]:void 0,_=x.route.errorElement||dy,p&&(g<0&&S===0?(xy("route-fallback"),b=!0,k=null):g===S&&(b=!0,k=x.route.hydrateFallbackElement||null)));let $=n.concat(d.slice(0,S+1)),F=()=>{let U;return C?U=_:b?U=k:x.route.Component?U=E.createElement(x.route.Component,null):x.route.element?U=x.route.element:U=y,E.createElement(fy,{match:x,routeContext:{outlet:y,matches:$,isDataRoute:r!=null},children:U})};return r&&(x.route.ErrorBoundary||x.route.errorElement||S===0)?E.createElement(hy,{location:r.location,revalidation:r.revalidation,component:_,error:C,children:F(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):F()},null)}var np=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(np||{}),rp=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(rp||{});function my(s){let n=E.useContext(uu);return n||mt(!1),n}function gy(s){let n=E.useContext(iy);return n||mt(!1),n}function yy(s){let n=E.useContext(as);return n||mt(!1),n}function sp(s){let n=yy(),r=n.matches[n.matches.length-1];return r.route.id||mt(!1),r.route.id}function vy(){var s;let n=E.useContext(Zf),r=gy(),o=sp();return n!==void 0?n:(s=r.errors)==null?void 0:s[o]}function wy(){let{router:s}=my(np.UseNavigateStable),n=sp(rp.UseNavigateStable),r=E.useRef(!1);return ep(()=>{r.current=!0}),E.useCallback(function(l,c){c===void 0&&(c={}),r.current&&(typeof l=="number"?s.navigate(l):s.navigate(l,Xi({fromRouteId:n},c)))},[s,n])}const of={};function xy(s,n,r){of[s]||(of[s]=!0)}function by(s,n){s?.v7_startTransition,s?.v7_relativeSplatPath}function Tt(s){mt(!1)}function ky(s){let{basename:n="/",children:r=null,location:o,navigationType:l=Cr.Pop,navigator:c,static:d=!1,future:m}=s;ta()&&mt(!1);let p=n.replace(/^\/*/,"/"),g=E.useMemo(()=>({basename:p,navigator:c,static:d,future:Xi({v7_relativeSplatPath:!1},m)}),[p,m,c,d]);typeof o=="string"&&(o=ti(o));let{pathname:y="/",search:x="",hash:S="",state:C=null,key:b="default"}=o,_=E.useMemo(()=>{let k=cu(y,p);return k==null?null:{location:{pathname:k,search:x,hash:S,state:C,key:b},navigationType:l}},[p,y,x,S,C,b,l]);return _==null?null:E.createElement(is.Provider,{value:g},E.createElement(Do.Provider,{children:r,value:_}))}function Sy(s){let{children:n,location:r}=s;return ly($c(n),r)}new Promise(()=>{});function $c(s,n){n===void 0&&(n=[]);let r=[];return E.Children.forEach(s,(o,l)=>{if(!E.isValidElement(o))return;let c=[...n,l];if(o.type===E.Fragment){r.push.apply(r,$c(o.props.children,c));return}o.type!==Tt&&mt(!1),!o.props.index||!o.props.children||mt(!1);let d={id:o.props.id||c.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(d.children=$c(o.props.children,c)),r.push(d)}),r}function zc(){return zc=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o])}return s},zc.apply(this,arguments)}function _y(s,n){if(s==null)return{};var r={},o=Object.keys(s),l,c;for(c=0;c<o.length;c++)l=o[c],!(n.indexOf(l)>=0)&&(r[l]=s[l]);return r}function jy(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function Ey(s,n){return s.button===0&&(!n||n==="_self")&&!jy(s)}const Ny=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Cy="6";try{window.__reactRouterVersion=Cy}catch{}const Ty="startTransition",lf=Eg[Ty];function Py(s){let{basename:n,children:r,future:o,window:l}=s,c=E.useRef();c.current==null&&(c.current=Ig({window:l,v5Compat:!0}));let d=c.current,[m,p]=E.useState({action:d.action,location:d.location}),{v7_startTransition:g}=o||{},y=E.useCallback(x=>{g&&lf?lf(()=>p(x)):p(x)},[p,g]);return E.useLayoutEffect(()=>d.listen(y),[d,y]),E.useEffect(()=>by(o),[o]),E.createElement(ky,{basename:n,children:r,location:m.location,navigationType:m.action,navigator:d,future:o})}const Oy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ay=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,En=E.forwardRef(function(n,r){let{onClick:o,relative:l,reloadDocument:c,replace:d,state:m,target:p,to:g,preventScrollReset:y,viewTransition:x}=n,S=_y(n,Ny),{basename:C}=E.useContext(is),b,_=!1;if(typeof g=="string"&&Ay.test(g)&&(b=g,Oy))try{let U=new URL(window.location.href),B=g.startsWith("//")?new URL(U.protocol+g):new URL(g),X=cu(B.pathname,C);B.origin===U.origin&&X!=null?g=X+B.search+B.hash:_=!0}catch{}let k=ay(g,{relative:l}),$=Iy(g,{replace:d,state:m,target:p,preventScrollReset:y,relative:l,viewTransition:x});function F(U){o&&o(U),U.defaultPrevented||$(U)}return E.createElement("a",zc({},S,{href:b||k,onClick:_||c?o:F,ref:r,target:p}))});var cf;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(cf||(cf={}));var uf;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(uf||(uf={}));function Iy(s,n){let{target:r,replace:o,state:l,preventScrollReset:c,relative:d,viewTransition:m}=n===void 0?{}:n,p=Rn(),g=os(),y=tp(s,{relative:d});return E.useCallback(x=>{if(Ey(x,r)){x.preventDefault();let S=o!==void 0?o:Eo(g)===Eo(y);p(s,{replace:S,state:l,preventScrollReset:c,relative:d,viewTransition:m})}},[g,p,y,o,l,r,s,c,d,m])}var Ry={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Dy=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ly=(s,n)=>{const r=E.forwardRef(({color:o="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:d,children:m,...p},g)=>E.createElement("svg",{ref:g,...Ry,width:l,height:l,stroke:o,strokeWidth:d?Number(c)*24/Number(l):c,className:`lucide lucide-${Dy(s)}`,...p},[...n.map(([y,x])=>E.createElement(y,x)),...(Array.isArray(m)?m:[m])||[]]));return r.displayName=`${s}`,r};var Ve=Ly;const My=Ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Uy=Ve("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Nn=Ve("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),qc=Ve("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Hc=Ve("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Fy=Ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Ks=Ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),gt=Ve("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]),By=Ve("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),df=Ve("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),Gn=Ve("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Wy=Ve("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),$y=Ve("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Gc=Ve("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),zy=Ve("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),qy=Ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Vi=Ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),hf=Ve("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Vc=Ve("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Hy=Ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Gy=Ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Vy=Ve("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),ff=Ve("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),So=Ve("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),Kn=Ve("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),ip=Ve("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Jy=Ve("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),pn=Ve("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),_o=Ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Xs=Ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Zi=Ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ns=Ve("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Ky(){return a.jsx("footer",{className:"fb-footer",children:a.jsxs("div",{className:"fb-footer-inner",children:[a.jsxs("div",{className:"fb-brand",children:[a.jsx("div",{className:"fb-logo",children:a.jsx(gt,{size:28,color:"#fff"})}),a.jsxs("div",{children:[a.jsx("h4",{children:"FitBuddyAI"}),a.jsx("p",{className:"muted",children:"Your friendly AI fitness companion"})]})]}),a.jsxs("div",{className:"fb-links",children:[a.jsxs("div",{className:"fb-col",children:[a.jsx("h5",{children:"Product"}),a.jsx(En,{to:"/questionnaire",children:"Get Started"}),a.jsx(En,{to:"/chat",children:"AI Coach"}),a.jsx(En,{to:"/shop",children:"Shop"})]}),a.jsxs("div",{className:"fb-col",children:[a.jsx("h5",{children:"Legal"}),a.jsx(En,{to:"/terms",children:"Terms of Service"}),a.jsx(En,{to:"/privacy",children:"Privacy Policy"})]}),a.jsxs("div",{className:"fb-col",children:[a.jsx("h5",{children:"Support"}),a.jsx("a",{href:"mailto:fitbuddyaig@gmail.com",children:"fitbuddyaig@gmail.com"}),a.jsx(En,{to:"/help",children:"Help Center"})]})]}),a.jsxs("div",{className:"fb-bottom",children:[a.jsxs("div",{children:[" ",new Date().getFullYear()," FitBuddyAI, LLC. All rights reserved."]}),a.jsx("div",{className:"socials muted",children:"Made with  for a healthier life"})]})]})})}const br=[{text:"Set Goals",color:"primary",icon:a.jsx(pn,{size:20})},{text:"Track Progress",color:"blue",icon:a.jsx(ns,{size:20})},{text:"Plan Workouts",color:"orange",icon:a.jsx(Nn,{size:20})},{text:"Stay Motivated",color:"purple",icon:a.jsx(So,{size:20})},{text:"AI Powered",color:"pink",icon:a.jsx(Kn,{size:20})},{text:"Fun & Easy",color:"green",icon:a.jsx(ip,{size:20})},{text:"Personalized",color:"blue2",icon:a.jsx(Xs,{size:20})}],Qy=()=>{if(typeof document>"u")return!0;const s=document.referrer;if(console.log("[IntroBubbles] Referrer:",String(s).slice(0,200)),s)try{const n=new URL(s);if(console.log("[IntroBubbles] Referrer hostname:",n.hostname,"Current hostname:",window.location.hostname),n.hostname===window.location.hostname&&window.sessionStorage.getItem("fitbuddyai-skip-intro")==="1")return console.log("[IntroBubbles] Skipping intro due to sessionStorage flag."),!1}catch(n){console.log("[IntroBubbles] Referrer parse error:",n)}return console.log("[IntroBubbles] Showing intro."),!0},Yy=({onFinish:s})=>{const[n,r]=E.useState(null),[o,l]=E.useState("wait"),[c,d]=E.useState(!1),[m,p]=E.useState(0);E.useEffect(()=>{const x=Qy();console.log("[IntroBubbles] useEffect: shouldShowIntro() =",x),r(x)},[]);const g=E.useRef();if(!g.current){g.current={angle:Array.from({length:br.length},()=>Math.random()*30-15),dist:Array.from({length:br.length},()=>Math.random()*30-15),edge:Array.from({length:br.length},()=>Math.floor(Math.random()*4)),edgePos:Array.from({length:br.length},()=>Math.random()*100)};try{const x=JSON.stringify(g.current).slice(0,400);console.log("[IntroBubbles] Random seeds generated:",x)}catch{console.log("[IntroBubbles] Random seeds generated")}}const y=E.useRef(s);return E.useEffect(()=>{y.current=s},[s]),E.useEffect(()=>{if(n===null)return;if(!n){console.log("[IntroBubbles] Skipping intro, calling onFinish immediately."),y.current();return}const x=[];console.log("[IntroBubbles] Starting intro animation."),l("flyin"),p(0);for(let C=0;C<br.length;C++)x.push(setTimeout(()=>{p(b=>b+1),console.log(`[IntroBubbles] Bubble ${C} now visible.`)},C*400));const S=br.length*400+800;return x.push(setTimeout(()=>{l("meet"),console.log("[IntroBubbles] Phase changed: meet")},S)),x.push(setTimeout(()=>{l("orbit"),console.log("[IntroBubbles] Phase changed: orbit")},S+1e3)),x.push(setTimeout(()=>{l("fadeout"),console.log("[IntroBubbles] Phase changed: fadeout")},S+4e3)),x.push(setTimeout(()=>{console.log("[IntroBubbles] onFinish called after fadeout. Hiding overlay."),d(!0),y.current()},S+4800)),()=>{x.forEach(clearTimeout),console.log("[IntroBubbles] Cleaned up timers.")}},[n]),n===null||!n?null:(console.log("[IntroBubbles] Rendering. Phase:",o,"Hide:",c,"VisibleBubbles:",m),a.jsx("div",{className:`intro-bubbles-overlay${c?" hide":""} ${o==="fadeout"?"fade-white fade-out":""}`,children:a.jsxs("div",{className:"bubbles-centerpiece",children:[a.jsx("div",{className:"center-logo",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"72",height:"72",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-dumbbell",children:[a.jsx("path",{d:"m6.5 6.5 11 11"}),a.jsx("path",{d:"m21 21-1-1"}),a.jsx("path",{d:"m3 3 1 1"}),a.jsx("path",{d:"m18 22 4-4"}),a.jsx("path",{d:"m2 6 4-4"}),a.jsx("path",{d:"m3 10 7-7"}),a.jsx("path",{d:"m14 21 7-7"})]})}),a.jsx("div",{className:o==="orbit"?"bubbles-rotate":"",children:br.map((x,S)=>{if(S>=m)return null;const C=g.current.edge[S],b=g.current.edgePos[S];let _=0,k=0;C===0?(_=b,k=-10):C===1?(_=110,k=b):C===2?(_=b,k=110):(_=-10,k=b);const $=360/br.length*S,F=210;let U=`bubble bubble-color-${x.color}`;o==="flyin"&&(U+=" bubble-fly-in"),o==="orbit"&&(U+=" bubble-orbit"),o==="meet"&&(U+=" bubble-meet");try{const B=JSON.stringify({i:S,phase:o,bubbleClass:U,offX:_,offY:k,angle:$,distance:F}).slice(0,300);console.log(`[IntroBubbles] Rendering bubble ${S}:`,B)}catch{console.log(`[IntroBubbles] Rendering bubble ${S}`)}return a.jsxs("div",{className:U,style:{"--offscreen-x":`${_}px`,"--offscreen-y":`${k}px`,"--angle":`${$}deg`,"--distance":`${F}px`},children:[a.jsx("span",{className:"bubble-icon",children:x.icon}),x.text]},S)})})]})}))},Tc=["Set Goals","Track Progress","Plan Workouts","Stay Motivated","AI Powered","Fun & Easy","Personalized"],Qs=[];for(;Qs.length<3;){const s=Math.floor(Math.random()*7);Qs.includes(s)||Qs.push(s)}const Xy=()=>{const s=os(),n=Rn(),o=new URLSearchParams(s.search).get("intro"),l=o===null||o==="1",[c,d]=E.useState(l),[m,p]=E.useState(!l),g=o!=="0",y=E.useRef(null),x=E.useRef(null);E.useEffect(()=>()=>{y.current&&clearTimeout(y.current),x.current&&clearTimeout(x.current)},[]);const S=()=>{p(!0),y.current=window.setTimeout(()=>d(!1),900),s.search.includes("intro")&&n("/",{replace:!0})};return E.useEffect(()=>{if(c)return x.current=window.setTimeout(()=>{p(!0),d(!1)},6e3),()=>{x.current&&(clearTimeout(x.current),x.current=null)}},[c]),a.jsxs("div",{className:"welcome-page",children:[c&&a.jsx(Yy,{onFinish:S}),a.jsxs("div",{className:`welcome-main ${m?"is-visible":""}`,children:[a.jsxs("div",{className:"hero-section",children:[a.jsxs("div",{className:"hero-content",children:[a.jsxs("div",{className:"logo-section"+(g?" bounce-in":""),children:[a.jsx("div",{className:"logo logo-centered",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-dumbbell",children:[a.jsx("path",{d:"m6.5 6.5 11 11"}),a.jsx("path",{d:"m21 21-1-1"}),a.jsx("path",{d:"m3 3 1 1"}),a.jsx("path",{d:"m18 22 4-4"}),a.jsx("path",{d:"m2 6 4-4"}),a.jsx("path",{d:"m3 10 7-7"}),a.jsx("path",{d:"m14 21 7-7"})]})}),a.jsx("h1",{className:"app-title",children:"FitBuddyAI"}),a.jsx("p",{className:"app-subtitle",children:"Your AI-Powered Fitness Companion"})]}),a.jsxs("div",{className:"hero-text fade-in-up",children:[a.jsx("h2",{children:"Transform Your Fitness Journey"}),a.jsx("p",{children:"Get personalized workout plans powered by AI, track your progress, and achieve your fitness goals with fun, gamified experience."})]}),a.jsxs("div",{className:"cta-section fade-in-up",children:[a.jsx(En,{to:"/questionnaire",className:"btn btn-primary btn-large",children:"Start Your Journey"}),a.jsx("p",{className:"cta-subtitle",children:"Free  Personalized  AI-Powered"})]})]}),a.jsxs("div",{className:"hero-illustration",children:[a.jsxs("div",{className:"floating-card card-1",children:[a.jsx(pn,{size:24}),a.jsx("span",{children:Tc[Qs[0]]})]}),a.jsxs("div",{className:"floating-card card-2",children:[a.jsx(Nn,{size:24}),a.jsx("span",{children:Tc[Qs[1]]})]}),a.jsxs("div",{className:"floating-card card-3",children:[a.jsx(ns,{size:24}),a.jsx("span",{children:Tc[Qs[2]]})]}),a.jsxs("div",{className:"floating-card card-4",children:[a.jsx(gt,{size:24}),a.jsx("span",{children:"Strength Training"})]})]})]}),a.jsx("div",{className:"features-section",children:a.jsxs("div",{className:"container",children:[a.jsx("h3",{className:"section-title",children:"Why Choose FitBuddyAI?"}),a.jsxs("div",{className:"features-grid",children:[a.jsxs("div",{className:"feature-card card fade-in-up",children:[a.jsx("div",{className:"feature-icon",children:a.jsx(pn,{size:32})}),a.jsx("h4",{children:"AI-Powered Plans"}),a.jsx("p",{children:"Get personalized workout routines generated by advanced AI based on your goals, fitness level, and preferences."})]}),a.jsxs("div",{className:"feature-card card fade-in-up",children:[a.jsx("div",{className:"feature-icon",children:a.jsx(Nn,{size:32})}),a.jsx("h4",{children:"Smart Calendar"}),a.jsx("p",{children:"Visualize your workout schedule with an intuitive calendar. Easily modify or request new workouts for any day."})]}),a.jsxs("div",{className:"feature-card card fade-in-up",children:[a.jsx("div",{className:"feature-icon",children:a.jsx(ns,{size:32})}),a.jsx("h4",{children:"Adaptive Training"}),a.jsx("p",{children:"Your workouts evolve with you. The AI adjusts difficulty and variety based on your progress and feedback."})]})]})]})}),a.jsx("div",{className:"how-it-works-section",children:a.jsxs("div",{className:"container",children:[a.jsx("h3",{className:"section-title",children:"How It Works"}),a.jsxs("div",{className:"steps-container",children:[a.jsxs("div",{className:"step",children:[a.jsx("div",{className:"step-number",children:"1"}),a.jsxs("div",{className:"step-content",children:[a.jsx("h4",{children:"Tell Us About You"}),a.jsx("p",{children:"Answer a few questions about your fitness goals, experience level, and preferences."})]})]}),a.jsxs("div",{className:"step",children:[a.jsx("div",{className:"step-number",children:"2"}),a.jsxs("div",{className:"step-content",children:[a.jsx("h4",{children:"Get Your AI Plan"}),a.jsx("p",{children:"Our AI creates a personalized 30-day workout calendar tailored specifically for you."})]})]}),a.jsxs("div",{className:"step",children:[a.jsx("div",{className:"step-number",children:"3"}),a.jsxs("div",{className:"step-content",children:[a.jsx("h4",{children:"Train & Adapt"}),a.jsx("p",{children:"Follow your workouts, track progress, and request changes whenever you need them."})]})]})]})]})}),a.jsx("div",{className:"final-cta-section",children:a.jsx("div",{className:"container",children:a.jsxs("div",{className:"final-cta-content",children:[a.jsx("h3",{children:"Ready to Transform Your Fitness?"}),a.jsx("p",{children:"Join thousands of users who have already started their journey with Fatbuddy."}),a.jsx(En,{to:"/questionnaire",className:"btn btn-primary btn-large",children:"Get Started Now"})]})})})]}),a.jsx("div",{className:"welcome-footer-spacer",children:a.jsx(Ky,{})})]})},Zy="AIzaSyCdu8joW4s3FN2ybROS9f0Vj26fsmNGSlQ",du=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${Zy}`,Hi=async(s,n,r)=>{const o=new Date().toISOString().split("T")[0],l=n.startDate||o,c=`{
    "type": "object",
    "properties": {
      "id": { "type": "string" },
      "name": { "type": "string" },
      "description": { "type": "string" },
      "startDate": { "type": "string", "pattern": "\\d{4}-\\d{2}-\\d{2}" },
      "endDate": { "type": "string", "pattern": "\\d{4}-\\d{2}-\\d{2}" },
      "totalDays": { "type": "number" },
      "totalTime": { "type": "string" },
      "weeklyStructure": { "type": "array", "items": { "type": "string" } },
      "dailyWorkouts": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "date": { "type": "string", "pattern": "\\d{4}-\\d{2}-\\d{2}" },
            "type": { "type": "string" },
            "completed": { "type": "boolean" },
            "totalTime": { "type": "string" },
            "workouts": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "difficulty": { "type": "string" },
                  "duration": { "type": "string" },
                  "reps": { "anyOf": [{ "type": "number" }, { "type": "string" }] },
                  "muscleGroups": { "type": "array", "items": { "type": "string" } },
                  "equipment": { "type": "array", "items": { "type": "string" } },
                  "description": { "type": "string" },
                  "sets": { "type": "number" },
                  "rest": { "type": "string" }
                },
                "required": ["name","difficulty","duration","reps","muscleGroups"]
              }
            },
            "alternativeWorkouts": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "difficulty": { "type": "string" },
                  "duration": { "type": "string" },
                  "reps": { "anyOf": [{ "type": "number" }, { "type": "string" }] },
                  "muscleGroups": { "type": "array", "items": { "type": "string" } },
                  "equipment": { "type": "array", "items": { "type": "string" } },
                  "description": { "type": "string" }
                },
                "required": ["name","difficulty","duration","reps","muscleGroups"]
              }
            }
          },
          "required": ["date","type","workouts","alternativeWorkouts"]
        }
      }
    },
    "required": ["id","name","description","startDate","endDate","totalDays","totalTime","weeklyStructure","dailyWorkouts"]
  }`,d=JSON.stringify(r.map(k=>({id:k.id,title:k.title,subtitle:k.subtitle,type:k.type,options:k.options||[]})),null,2),m=JSON.stringify(n,null,2),g=`Please strictly adhere to the following JSON schema without adding any extra text, markdown, or code fences. Ensure all required fields are present and match the specified types. For the 'type' field in dailyWorkouts, use only one of the following values: 'strength', 'cardio', 'flexibility', 'rest', or 'mixed'.

Schema:
${c}

User Data:
${JSON.stringify(s,null,2)}

Questions Context:
${d}

Answers Context:
${m}

The current date is ${o}. The plan MUST start on ${l}.

Follow the provided weeklyStructure order as given by the schema.


  In dailyWorkouts, items must include keys in this order: date, type, completed, totalTime, workouts, alternativeWorkouts.

  Each workout entry must have ONLY these fields (and in the schema above these are required where noted): name, difficulty, duration, reps, muscleGroups, equipment, description. Additional optional fields allowed are: sets (number) and rest (string).

  Field formats (MUST be human-readable where indicated):
  - duration: a human-readable time string such as "5 minutes", "30 sec", "1 min per side" or "15-20 minutes".
  - reps: either a number (e.g. 10) or a short string like "AMRAP", "to failure", "8-12". If an exercise is time-based, reps can be an empty string or a descriptor.
  - muscleGroups: an array of short strings naming targeted body parts, e.g. ["chest","triceps","quads"]. Use common single-word names; avoid sentences.

  Ensure the JSON is syntactically valid: all arrays, objects, quotes, commas, brackets and braces must be closed. No trailing commas. Do not truncate any lists or objects.

Generate and return the JSON now.`,y=Math.random().toString(36).slice(2,9),x=new Date().toISOString(),S=`${g}

Variation-hint: please vary the workout details. RequestNonce:${y} RequestTime:${x}`,C=await fetch("/api/ai/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:S,userId:s?.id||null,meta:{nonce:y,ts:x}})});if(!C.ok)throw new Error("AI generation failed");const _=(await C.json()).text||"";return ev(_,s)},ev=(s,n)=>{console.log("Parsing AI response:",s);try{let r=s;const o=s.match(/```(?:json)?\s*([\s\S]*?)```/i);o&&o[1]?r=o[1].trim():r=s.replace(/```[a-zA-Z]*\n?|```/g,"").trim(),console.log("Extracted AI JSON:",r);const l=r.match(/{[\s\S]*}/);if(l&&(r=l[0],console.log("Trimmed to JSON block:",r)),r.startsWith("{")&&r.endsWith("}")){let c=JSON.parse(r);if(c.workout_plan&&(console.warn("parseAIResponse: unwrapping top-level workout_plan field"),c=c.workout_plan),!c.dailyWorkouts&&c.workouts&&(console.warn("parseAIResponse: mapping top-level 'workouts' to 'dailyWorkouts'"),c.dailyWorkouts=c.workouts),c.dailyWorkouts&&c.dailyWorkouts.length>0&&c.dailyWorkouts.every(m=>!m.date)&&c.startDate&&c.weeklyStructure){const m=new Date(c.startDate),p=c.weeklyStructure.map(S=>S.split(":")[0].trim()),g={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},y=p.map(S=>{const C=g[S]??new Date(c.startDate).getDay(),b=new Date(m);for(let _=0;_<7;_++){if(b.getDay()===C)return new Date(b);b.setDate(b.getDate()+1)}return new Date(m)}),x=p.length;c.dailyWorkouts.forEach((S,C)=>{const b=Math.floor(C/x),_=C%x,k=new Date(y[_]);k.setDate(k.getDate()+b*7),S.date=k.toISOString().split("T")[0],S.type=p[_].toLowerCase()}),console.warn("parseAIResponse: assigned fallback dates/types from weeklyStructure")}if(console.log("Parsed AI response JSON:",c),!c.dailyWorkouts)throw new Error("Parsed response missing dailyWorkouts");const d=c.dailyWorkouts.map(m=>({date:m.date,totalTime:m.totalTime||"",workouts:((m.workouts??m.exercises)||[]).map(p=>{if(typeof p=="string")return{name:p,description:p,difficulty:"beginner",muscleGroups:[],equipment:[],duration:"",reps:""};const g=p.name??p.exercise??"",y=p.description??p.instructions??"",x=p.duration??(p.durationSeconds?`${p.durationSeconds} sec`:""),S=p.sets,C=p.reps??"",b=p.rest??"";return{name:g,description:y,difficulty:p.difficulty||"beginner",muscleGroups:p.muscleGroups||[],equipment:p.equipment||[],duration:x,reps:C,...S!==void 0?{sets:S}:{},...b?{rest:b}:{}}}),alternativeWorkouts:((m.alternativeWorkouts??m.alternativeExercises)||[]).map(p=>{if(typeof p=="string")return{name:p,description:p,difficulty:"beginner",muscleGroups:[],equipment:[],duration:"",reps:""};const g=p.name??p.exercise??"",y=p.description??p.instructions??"",x=p.duration??(p.durationSeconds?`${p.durationSeconds} sec`:""),S=p.sets,C=p.reps??"",b=p.rest??"";return{name:g,description:y,difficulty:p.difficulty||"beginner",muscleGroups:p.muscleGroups||[],equipment:p.equipment||[],duration:x,reps:C,...S!==void 0?{sets:S}:{},...b?{rest:b}:{}}}),completed:!1,type:m.type||"mixed"}));return console.log("Mapped daily workouts:",d),{id:c.id||`plan-${Date.now()}`,name:c.name||`${n.username||"User"}'s Fitness Plan`,description:c.description||"A personalized workout plan.",startDate:c.startDate||new Date().toISOString().split("T")[0],endDate:c.endDate||new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],totalDays:c.totalDays||30,weeklyStructure:c.weeklyStructure||[],dailyWorkouts:d}}else throw new Error("Response is not in JSON format")}catch(r){throw console.error("Error parsing AI response:",r),console.error("Raw AI response:",s),r}},Pc=async(s,n,r,o,l,c,d)=>{const m=new Date().toISOString().split("T")[0],p=n.startDate||m,g=`{
    "type": "object",
    "properties": {
      "date": { "type": "string", "pattern": "\\d{4}-\\d{2}-\\d{2}" },
      "type": { "type": "string" },
      "totalTime": { "type": "string" },
      "workouts": { "type": "array", "items": { "type": "object" } },
      "alternativeWorkouts": { "type": "array", "items": { "type": "object" } }
    },
    "required": ["date","type","workouts","alternativeWorkouts"]
  }`,y=JSON.stringify(s,null,2),x=JSON.stringify(r.map(F=>({id:F.id,title:F.title,type:F.type,options:F.options||[]})),null,2),S=JSON.stringify(n,null,2),C=JSON.stringify(c,null,2),b=JSON.stringify(d,null,2),_=`Here is the JSON schema for a DayWorkout:
${g}

Preferred start date: ${p}
User data:
${y}

User questionnaire schema and answers:
${x}
${S}

Existing plan workouts:
${C}
Current day old workout:
${b}

Current date: ${m}
Generate one DayWorkout JSON for ${o}, type '${l}', compatible with others. No wrappers, no markdown, pure JSON.`,k=`
IMPORTANT: return only the pure JSON object matching the DayWorkout schema, no markdown or code fences.`;let $=null;for(let F=1;F<=2;F++){const U=Math.random().toString(36).slice(2,9),B=new Date().toISOString(),X=`${_}

Variation-hint: please vary the workout details and ordering where possible. RequestNonce:${U} RequestTime:${B}`,L=F===1?X:X+k;console.log(`generateWorkoutForDay: attempt ${F}, nonce=${U}, promptStart=`,L.slice(0,300));const ue=(await(await fetch(du,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:L}]}]})})).json()).candidates?.[0]?.content?.parts?.[0]?.text||"";console.log("generateWorkoutForDay: received AI text=",ue);try{let K=ue.match(/```(?:json)?\s*([\s\S]*?)```/i)?.[1]?.trim()??ue.replace(/```[a-zA-Z]*\\n?|```/g,"").trim();const oe=K.match(/{[\s\S]*}/);return oe&&(K=oe[0]),console.log("generateWorkoutForDay: parsing cleaned=",K),JSON.parse(K)}catch(fe){if(console.warn(`generateWorkoutForDay: parse failed on attempt ${F}:`,fe),$=fe,F===2)throw $}}throw new Error("generateWorkoutForDay: unknown error")};async function tv(s){console.log("Requesting AI response with prompt:",s.prompt);const r=await(await fetch(du,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:s.prompt}]}]})})).json();console.log("Raw AI response:",r);const o=r.candidates?.[0];console.log("Candidate content:",o?.content),console.log("Candidate content.parts:",o?.content?.parts),console.log("Candidate content.parts[0].text:",o?.content?.parts?.[0]?.text);const l=o?.content?.parts?.[0]?.text||"";let c=l;const d=l.match(/```(?:json)?\n([\s\S]*?)```/);d&&d[1]&&(c=d[1].trim()),console.log("Cleaned AI JSON or text:",c);try{return JSON.parse(c)}catch{return console.warn("AI response is not valid JSON, returning raw text instead."),c}}async function nv(s){const n=[s.prompt],r=s.localStorageContext;r?(r.questionnaire&&n.push(`

Local: fitbuddyai_questionnaire_progress: ${JSON.stringify(r.questionnaire).slice(0,1200)}`),r.userData&&n.push(`

Local: fitbuddyai_user_data: ${JSON.stringify(r.userData).slice(0,1200)}`),r.workoutPlan&&n.push(`

Local: fitbuddyai_workout_plan: ${JSON.stringify(r.workoutPlan).slice(0,2e3)}`)):s.workoutPlan&&n.push(`

User workoutPlan (truncated): ${JSON.stringify(s.workoutPlan).slice(0,2e3)}`);const o=n.join(`
`);console.log("Requesting AI text response with prompt (trim):",o.slice(0,300));const m=(await(await fetch(du,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:o}]}]})})).json()).candidates?.[0]?.content?.parts?.[0]?.text||"",p=m.match(/```(?:json)?\n([\s\S]*?)```/);return{text:p&&p[1]?p[1].trim():m.trim(),raw:m}}async function na(s){const n=localStorage.getItem("fitbuddyai_questionnaire_progress"),r=localStorage.getItem("fitbuddyai_workout_plan"),o=localStorage.getItem("fitbuddyai_assessment_data"),l=sessionStorage.getItem(`fitbuddyai_chat_${s}`)||localStorage.getItem(`fitbuddyai_chat_${s}`),c=sessionStorage.getItem("fitbuddyai_user_data")||localStorage.getItem("fitbuddyai_user_data");if(s)try{const d={userId:s};n!=null&&(d.fitbuddyai_questionnaire_progress=n),r!=null&&(d.fitbuddyai_workout_plan=r),o!=null&&(d.fitbuddyai_assessment_data=o),l!=null&&(d.chat_history=l),c!=null&&(d.fitbuddyai_user_data=c);try{const p=sessionStorage.getItem("fitbuddyai_user_data")||localStorage.getItem("fitbuddyai_user_data");if(p)try{const g=JSON.parse(p);if(g&&typeof g=="object"){const y={...g};y.token&&delete y.token,y.jwt&&delete y.jwt,d.fitbuddyai_user_data=y,y.accepted_terms!==void 0&&(d.accepted_terms=y.accepted_terms),y.accepted_privacy!==void 0&&(d.accepted_privacy=y.accepted_privacy),y.chat_history!==void 0&&d.chat_history===void 0&&(d.chat_history=y.chat_history)}}catch{}}catch{}const m=await $e(()=>Promise.resolve().then(()=>Or),void 0).then(p=>p.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}));await fetch("/api/userdata/save",m)}catch{}}function rv(s){try{if(!s||typeof navigator>"u"||typeof navigator.sendBeacon!="function")return!1;const n=localStorage.getItem("fitbuddyai_questionnaire_progress"),r=localStorage.getItem("fitbuddyai_workout_plan"),o=localStorage.getItem("fitbuddyai_assessment_data"),l={userId:s};n!=null&&(l.fitbuddyai_questionnaire_progress=n),r!=null&&(l.fitbuddyai_workout_plan=r),o!=null&&(l.fitbuddyai_assessment_data=o);try{const m=sessionStorage.getItem("fitbuddyai_user_data")||localStorage.getItem("fitbuddyai_user_data");if(m)try{const p=JSON.parse(m);p&&typeof p=="object"&&(p.accepted_terms!==void 0&&(l.accepted_terms=p.accepted_terms),p.accepted_privacy!==void 0&&(l.accepted_privacy=p.accepted_privacy),p.chat_history!==void 0&&l.chat_history===void 0&&(l.chat_history=p.chat_history))}catch{}}catch{}const c="/api/userdata/save",d=new Blob([JSON.stringify(l)],{type:"application/json"});return navigator.sendBeacon(c,d)}catch{return!1}}async function rs(s){if(s)try{const n="/api/userdata/load";console.log("[cloudBackupService] restoreUserDataFromServer -> POSTing",n,"userId=",s);const r=await $e(()=>Promise.resolve().then(()=>Or),void 0).then(p=>p.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s})})),o=await fetch(n,r),l=await o.text();if(console.log("[cloudBackupService] restoreUserDataFromServer -> response status:",o.status,"ok:",o.ok),l&&l.length>0&&console.log("[cloudBackupService] restoreUserDataFromServer -> response snippet:",l.slice(0,1e3)),!o.ok)return;let c=null;try{c=l?JSON.parse(l):null}catch(p){console.warn("[cloudBackupService] restoreUserDataFromServer -> failed to parse JSON response:",p);return}const d=c?.stored??c?.payload??c;if(!d)return;const m=p=>{try{const g=d[p];if(g==null)return;const y=typeof g=="string"?g:JSON.stringify(g);if(p==="fitbuddyai_user_data")try{sessionStorage.setItem(p,y)}catch{}else try{localStorage.setItem(p,y)}catch{}}catch{}};m("fitbuddyai_questionnaire_progress"),m("fitbuddyai_workout_plan"),m("fitbuddyai_assessment_data");try{const p=d.chat_history??d.fitbuddyai_chat??d.fitbuddyai_chat_history;if(p!=null)try{const g=typeof p=="string"?p:JSON.stringify(p);try{sessionStorage.setItem(`fitbuddyai_chat_${s}`,g)}catch{try{localStorage.setItem(`fitbuddyai_chat_${s}`,g)}catch{}}}catch{}}catch{}console.log("[cloudBackupService] restoreUserDataFromServer -> wrote keys from payload:",Object.keys(d))}catch{}}async function hu(s){if(!s)return!1;try{const n=`fitbuddyai_chat_${s}`,r=localStorage.getItem(n),o=localStorage.getItem("fitbuddyai_tos_accepted_v1"),l={userId:s};if(r!=null)try{l.chat_history=JSON.parse(r)}catch{l.chat_history=r}if(o!=null)try{l.fitbuddyai_tos_accepted_v1=JSON.parse(o)}catch{l.fitbuddyai_tos_accepted_v1=o}if(l.chat_history===void 0&&l.fitbuddyai_tos_accepted_v1===void 0)return!0;const c=await $e(()=>Promise.resolve().then(()=>Or),void 0).then(m=>m.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}));if(!(await fetch("/api/userdata/save",c)).ok)return!1;try{localStorage.removeItem(n)}catch{}try{localStorage.removeItem("fitbuddyai_tos_accepted_v1")}catch{}return!0}catch{return!1}}const Ys=Object.freeze(Object.defineProperty({__proto__:null,backupAndDeleteSensitive:hu,backupUserDataToServer:na,beaconBackupUserData:rv,restoreUserDataFromServer:rs},Symbol.toStringTag,{value:"Module"})),yt={QUESTIONNAIRE_PROGRESS:"fitbuddyai_questionnaire_progress",USER_DATA:"fitbuddyai_user_data",ASSESSMENT_DATA:"fitbuddyai_assessment_data",WORKOUT_PLAN:"fitbuddyai_workout_plan"},ra={TOKEN:"fitbuddyai_token"};function fu(s){if(!s)return null;try{let n=JSON.parse(s);if(typeof n=="string")try{n=JSON.parse(n),console.log("[localStorage] safeParseStored -> double-encoded JSON parsed")}catch{}return n}catch(n){return console.warn("[localStorage] safeParseStored -> parse failed:",n),null}}let es=null;const sv=800;function Qn(){try{const s=sessionStorage.getItem(yt.USER_DATA),n=s&&JSON.parse(s).data?.id||null;if(!n)return;es&&clearTimeout(es),es=window.setTimeout(async()=>{es=null;try{await na(n)}catch(r){console.warn("Auto backup failed:",r)}},sv)}catch(s){console.warn("Failed to schedule backup:",s)}}const pu=s=>{try{localStorage.setItem(yt.ASSESSMENT_DATA,JSON.stringify({data:s,timestamp:Date.now()})),Qn()}catch(n){console.warn("Failed to save assessment data:",n)}},Jc=()=>{try{const s=localStorage.getItem(yt.ASSESSMENT_DATA);if(!s)return null;const n=fu(s);if(!n)return null;const{data:r,timestamp:o}=n;return console.log("[localStorage] loadAssessmentData -> found data, timestamp:",o),Date.now()-o>10080*60*1e3?(ap(),null):r}catch(s){return console.warn("Failed to load assessment data:",s),null}},ap=()=>{try{localStorage.removeItem(yt.ASSESSMENT_DATA),Qn()}catch(s){console.warn("Failed to clear assessment data:",s)}},jo=s=>{try{localStorage.setItem(yt.QUESTIONNAIRE_PROGRESS,JSON.stringify(s)),Qn()}catch(n){console.warn("Failed to save questionnaire progress:",n)}},fn=()=>{try{const s=localStorage.getItem(yt.QUESTIONNAIRE_PROGRESS);if(!s)return null;const n=fu(s);return n?Date.now()-n.timestamp>1440*60*1e3?(ni(),null):n:null}catch(s){return console.warn("Failed to load questionnaire progress:",s),null}},ni=()=>{try{localStorage.removeItem(yt.QUESTIONNAIRE_PROGRESS),Qn()}catch(s){console.warn("Failed to clear questionnaire progress:",s)}},mn=(s,n)=>{try{try{if((sessionStorage.getItem("fitbuddyai_no_auto_restore")||localStorage.getItem("fitbuddyai_no_auto_restore"))&&!(n&&n.forceSave))return}catch{}let r={};if(s&&typeof s=="object"&&("data"in s||"token"in s)){if(r.data=s.data||null,"token"in s&&s.token)try{sessionStorage.setItem(ra.TOKEN,String(s.token))}catch{}}else r.data=s||null;const o={...r,timestamp:Date.now()};try{sessionStorage.setItem(yt.USER_DATA,JSON.stringify(o))}catch{}try{const l=new BroadcastChannel("fitbuddyai");l.postMessage({type:"user-update",timestamp:Date.now()}),l.close()}catch{}(!n||!n.skipBackup)&&Qn();try{sessionStorage.removeItem("fitbuddyai_no_auto_restore")}catch{}try{localStorage.removeItem("fitbuddyai_no_auto_restore")}catch{}}catch(r){console.warn("Failed to save user data:",r)}},In=()=>{try{const s=sessionStorage.getItem(yt.USER_DATA);if(!s)return null;const{data:n,timestamp:r}=JSON.parse(s);return Date.now()-r>10080*60*1e3?(ri(),null):n}catch(s){return console.warn("Failed to load user data:",s),null}},ri=()=>{try{try{sessionStorage.removeItem(yt.USER_DATA)}catch{}try{sessionStorage.removeItem(ra.TOKEN)}catch{}es&&(clearTimeout(es),es=null);try{const s=new BroadcastChannel("fitbuddyai");s.postMessage({type:"user-clear",timestamp:Date.now()}),s.close()}catch{}}catch(s){console.warn("Failed to clear user data:",s)}},op=s=>{try{if(!s)return;sessionStorage.setItem(ra.TOKEN,String(s))}catch{}},No=()=>{try{const s=sessionStorage.getItem(ra.TOKEN);return s||null}catch{return null}},mu=()=>{try{sessionStorage.removeItem(ra.TOKEN)}catch{}},Er=s=>{try{const o={data:(c=>c&&{id:c.id,name:c.name,description:c.description,startDate:typeof c.startDate=="string"?c.startDate:c.startDate?new Date(c.startDate).toISOString().split("T")[0]:void 0,endDate:typeof c.endDate=="string"?c.endDate:c.endDate?new Date(c.endDate).toISOString().split("T")[0]:void 0,totalDays:typeof c.totalDays=="number"?c.totalDays:Array.isArray(c.dailyWorkouts)?c.dailyWorkouts.filter(Boolean).length:void 0,totalTime:c.totalTime,weeklyStructure:Array.isArray(c.weeklyStructure)?c.weeklyStructure.slice():[],dailyWorkouts:Array.isArray(c.dailyWorkouts)?c.dailyWorkouts.filter(Boolean).map(m=>({date:typeof m?.date=="string"?m.date:m?.date?new Date(m.date).toISOString().split("T")[0]:"",type:m?.type,completed:!!m?.completed,totalTime:m?.totalTime||"",workouts:Array.isArray(m?.workouts)?m.workouts.filter(Boolean).map(p=>({name:p?.name??"",description:p?.description??"",difficulty:p?.difficulty??"beginner",duration:p?.duration??"",reps:p?.reps??"",muscleGroups:Array.isArray(p?.muscleGroups)?p.muscleGroups:p?.muscleGroups?[p.muscleGroups]:[],equipment:Array.isArray(p?.equipment)?p.equipment:p?.equipment?[p.equipment]:[],sets:typeof p?.sets=="number"?p.sets:void 0,rest:p?.rest||void 0})):[],alternativeWorkouts:Array.isArray(m?.alternativeWorkouts)?m.alternativeWorkouts.filter(Boolean).map(p=>({name:p?.name??"",description:p?.description??"",difficulty:p?.difficulty??"beginner",duration:p?.duration??"",reps:p?.reps??"",muscleGroups:Array.isArray(p?.muscleGroups)?p.muscleGroups:p?.muscleGroups?[p.muscleGroups]:[],equipment:Array.isArray(p?.equipment)?p.equipment:p?.equipment?[p.equipment]:[],sets:typeof p?.sets=="number"?p.sets:void 0,rest:p?.rest||void 0})):[]})):[]})(s),timestamp:Date.now()},l=JSON.stringify(o);localStorage.setItem(yt.WORKOUT_PLAN,l);try{const c=localStorage.getItem(yt.WORKOUT_PLAN);if(!c)throw new Error("Written value missing");JSON.parse(c)}catch(c){console.warn("Workout plan verification failed after save; removing corrupted key.",c);try{localStorage.removeItem(yt.WORKOUT_PLAN)}catch{}return}Qn()}catch(n){console.warn("Failed to save workout plan:",n)}},Zs=()=>{try{const s=localStorage.getItem(yt.WORKOUT_PLAN);if(!s)return null;console.log("[localStorage] loadWorkoutPlan -> raw length:",s.length);const n=fu(s);if(!n)return null;const{data:r,timestamp:o}=n;return Date.now()-o>720*60*60*1e3?(sa(),null):r}catch(s){return console.warn("Failed to load workout plan:",s),null}},sa=()=>{try{localStorage.removeItem(yt.WORKOUT_PLAN),Qn()}catch(s){console.warn("Failed to clear workout plan:",s)}},iv=()=>{ni(),ri(),sa()},av=(s,n)=>{try{const o=`fitbuddyai_chat_${n?.userId||(()=>{try{const m=sessionStorage.getItem(yt.USER_DATA);return m&&JSON.parse(m).data?.id||null}catch{return null}})()||"anon"}`,l=sessionStorage.getItem(o)||localStorage.getItem(o);let c=[];if(l)try{c=JSON.parse(l),Array.isArray(c)||(c=[])}catch{c=[]}const d={role:s.role,text:s.text,ts:s.ts||Date.now()};c.push(d);try{sessionStorage.setItem(o,JSON.stringify(c))}catch{}try{const m=sessionStorage.getItem(yt.USER_DATA);if(m)try{const p=JSON.parse(m);p.chat_history=p.chat_history||[],p.chat_history.push(d);try{sessionStorage.setItem(yt.USER_DATA,JSON.stringify(p))}catch{}}catch{}}catch{}Qn()}catch(r){console.warn("appendChatMessage failed",r)}},ov=s=>{try{const n=sessionStorage.getItem(yt.USER_DATA);let r=n?JSON.parse(n):{data:null,timestamp:Date.now()};r.accepted_terms=s.accepted_terms??r.accepted_terms??null,r.accepted_privacy=s.accepted_privacy??r.accepted_privacy??null;try{sessionStorage.setItem(yt.USER_DATA,JSON.stringify(r))}catch{}Qn()}catch(n){console.warn("setAcceptanceFlags failed",n)}},zt=Object.freeze(Object.defineProperty({__proto__:null,appendChatMessage:av,clearAllData:iv,clearAssessmentData:ap,clearAuthToken:mu,clearQuestionnaireProgress:ni,clearUserData:ri,clearWorkoutPlan:sa,getAuthToken:No,loadAssessmentData:Jc,loadQuestionnaireProgress:fn,loadUserData:In,loadWorkoutPlan:Zs,saveAssessmentData:pu,saveAuthToken:op,saveQuestionnaireProgress:jo,saveUserData:mn,saveWorkoutPlan:Er,setAcceptanceFlags:ov},Symbol.toStringTag,{value:"Module"})),lv="https://corsproxy.io/?key=7cf03de1&url=https://script.google.com/macros/s/AKfycbwFDdT0QVaP2jY8t4N0048PfQW_rYxB4noFaG-nExO9MZ5h3DCuNLUPNg3-qntT01tg/exec?gid=0",kr=[{id:"age",title:"How old are you?",subtitle:"This helps us create age-appropriate workouts",type:"number",min:13,max:100,icon:a.jsx(Nn,{size:32})},{id:"fitnessLevel",title:"What's your current fitness level?",subtitle:"Be honest - we'll adjust everything to match your abilities",type:"single",options:["Beginner - Just starting out","Intermediate - I work out sometimes","Advanced - I exercise regularly"],icon:a.jsx(gt,{size:32})},{id:"fitnessBackground",title:"Tell us about your fitness journey so far",subtitle:"Share any previous experience, challenges, or what's worked for you before",type:"textarea",icon:a.jsx(Gn,{size:32})},{id:"motivation",title:"What motivates you to start this fitness journey?",subtitle:"Understanding your 'why' helps us keep you motivated",type:"textarea",icon:a.jsx(pn,{size:32})},{id:"goals",title:"What are your fitness goals?",subtitle:"Select all that apply - we'll create a plan that covers everything",type:"multiple",options:["Lose weight","Build muscle","Improve endurance","Increase flexibility","General health","Sport-specific training","Stress relief","Better sleep","Improve posture","Boost confidence","Other"],icon:a.jsx(pn,{size:32})},{id:"specificGoals",title:"Can you be more specific about your main goal?",subtitle:"For example: 'Lose 20 pounds for my wedding' or 'Run a 5K without stopping'",type:"textarea",icon:a.jsx(pn,{size:32})},{id:"timeAvailable",title:"How much time can you dedicate daily?",subtitle:"We'll make sure every minute counts",type:"slider",min:15,max:120,step:15,icon:a.jsx(Ks,{size:32})},{id:"startDate",title:"When would you like to start your workout plan?",subtitle:"Please enter your preferred start date (YYYY-MM-DD)",type:"text",icon:a.jsx(Nn,{size:32})},{id:"exerciseFormat",title:"How do you prefer to track your exercises?",subtitle:"This helps us format your workout instructions perfectly for you",type:"single",options:["Time-based (e.g., 30 seconds)","Rep-based (e.g., 10 reps)","Mixed - both time and reps","Other"],icon:a.jsx(Ks,{size:32})},{id:"planDuration",title:"How long do you want your workout plan to be?",subtitle:"We can create plans of different lengths to match your goals and commitment level",type:"single",options:["1 week (Mini)","2 weeks (Quick start)","1 month (Standard)","6 weeks (Build habits)","3 months (Transformation)","6 months (Lifestyle change)"],icon:a.jsx(Nn,{size:32})},{id:"daysPerWeek",title:"How many days per week do you want to work out?",subtitle:"We'll plan rest days to help you recover",type:"single",options:["3 days","4 days","5 days","6 days","7 days","Other"],icon:a.jsx(Nn,{size:32})},{id:"preferredTime",title:"When do you prefer to work out?",subtitle:"We can tailor workouts to your energy levels throughout the day",type:"single",options:["Early morning (5-8 AM)","Morning (8-11 AM)","Lunch time (11 AM-2 PM)","Afternoon (2-5 PM)","Evening (5-8 PM)","Night (8-11 PM)","Varies/Flexible","Other"],icon:a.jsx(Ks,{size:32})},{id:"energyLevels",title:"How would you rate your current energy levels?",subtitle:"This helps us design workouts that match your vitality",type:"rating",min:1,max:10,icon:a.jsx(Gn,{size:32})},{id:"preferences",title:"What types of workouts do you enjoy?",subtitle:"Let's make fitness fun for you",type:"multiple",options:["Strength training","Cardio workouts","Yoga & stretching","HIIT workouts","Bodyweight exercises","Dance workouts","Outdoor activities","Swimming","Pilates","Martial arts","Team sports","Walking/Hiking","Other"],icon:a.jsx(Gn,{size:32})},{id:"dislikes",title:"Are there any exercises you want to avoid?",subtitle:"We'll make sure to exclude anything you don't enjoy or can't do",type:"textarea",icon:a.jsx(Gn,{size:32})},{id:"injuries",title:"Do you have any injuries or physical limitations?",subtitle:"This helps us create safe workouts tailored to your needs",type:"textarea",icon:a.jsx(Gn,{size:32})},{id:"equipment",title:"What equipment do you have access to?",subtitle:"We'll work with whatever you've got",type:"multiple",options:["No equipment (bodyweight only)","Dumbbells","Resistance bands","Yoga mat","Pull-up bar","Gym membership","Treadmill/bike","Kettlebells","Barbell","Medicine ball","Foam roller","Suspension trainer (TRX)","Other"],icon:a.jsx(gt,{size:32})},{id:"budget",title:"Are you interested in additional fitness resources?",subtitle:"We can suggest equipment or services within your budget",type:"single",options:["No budget for additional equipment","Small budget ($0-50)","Medium budget ($50-200)","Higher budget ($200+)","Already have everything I need"],icon:a.jsx(pn,{size:32})},{id:"lifestyle",title:"How would you describe your lifestyle?",subtitle:"This helps us understand how to fit fitness into your routine",type:"single",options:["Very sedentary (desk job, little movement)","Mostly sedentary with some walking","Moderately active (some daily movement)","Active (regular movement throughout day)","Very active (physical job or lots of movement)"],icon:a.jsx(Xs,{size:32})},{id:"sleepQuality",title:"How well do you sleep?",subtitle:"Sleep affects recovery and workout performance",type:"rating",min:1,max:10,icon:a.jsx(Gn,{size:32})},{id:"stressLevel",title:"What's your current stress level?",subtitle:"We can include stress-relief exercises in your plan",type:"rating",min:1,max:10,icon:a.jsx(Gn,{size:32})},{id:"socialPreference",title:"Do you prefer working out alone or with others?",subtitle:"This helps us suggest the right type of workout environment",type:"single",options:["Definitely alone","Mostly alone","No preference","Mostly with others","Definitely with others"],icon:a.jsx(Xs,{size:32})},{id:"progressTracking",title:"How do you like to track your progress?",subtitle:"We can suggest the best methods for you",type:"multiple",options:["Weight/measurements","Progress photos","Workout logs","Fitness apps","Wearable devices","How I feel","Performance improvements","I don't like tracking","Other"],icon:a.jsx(pn,{size:32})},{id:"concerns",title:"Any questions, concerns, or special requests?",subtitle:"Share anything else that would help us create the perfect plan for you - dietary restrictions, work schedule, family commitments, past injuries, fears, or anything else on your mind",type:"textarea",icon:a.jsx(Gn,{size:32})}],cv=({onRegenerate:s,onEditResponses:n})=>a.jsx("div",{className:"menu-screen",children:a.jsxs("div",{className:"menu-container menu-container--hero",children:[a.jsxs("div",{className:"menu-hero",children:[a.jsx("div",{className:"menu-hero-icon",children:a.jsx(gt,{size:48})}),a.jsx("h1",{className:"menu-header",children:"Assessment Complete"}),a.jsx("p",{className:"menu-subtitle",children:"Nice work  we've saved your answers and can generate a refreshed plan anytime."})]}),a.jsxs("div",{className:"menu-actions",children:[a.jsxs("button",{className:"btn btn-primary menu-btn menu-btn--large",onClick:()=>s(),children:[a.jsx(Vi,{size:18}),a.jsx("span",{children:"Regenerate Plan"})]}),a.jsxs("button",{className:"btn btn-outline menu-btn menu-btn--alt",onClick:()=>n(),children:[a.jsx(Xs,{size:18}),a.jsx("span",{children:"Edit Responses"})]})]}),a.jsx("div",{className:"menu-footer",children:a.jsx("small",{className:"menu-note",children:"Tip: Regenerating will create a fresh plan based on your current answers  your previous plan is saved in your profile."})})]})}),uv=()=>a.jsx("div",{className:"questionnaire-page",children:a.jsx("div",{className:"questionnaire-container",children:a.jsxs("div",{className:"followup-loading-content",children:[a.jsx("div",{className:"spinner"}),a.jsx("h2",{className:"loading-title",children:"Generating Follow-Up Questions"}),a.jsx("p",{className:"loading-subtitle",children:"Hang tight while we personalize your questionnaire..."}),a.jsx("p",{className:"ai-disclaimer",children:"Disclaimer: These follow-up questions are AI-generated and may not be perfect."})]})})}),dv=({onRetry:s})=>a.jsx("div",{className:"questionnaire-page",children:a.jsx("div",{className:"questionnaire-container error-screen",children:a.jsxs("div",{className:"error-content",children:[a.jsx("h2",{className:"error-title",children:"Oops! Something went wrong."}),a.jsx("p",{className:"error-message",children:"We couldn't generate your plan. Please try again."}),a.jsx("button",{className:"btn error-btn",onClick:s,children:"Retry"})]})})}),hv=({onComplete:s})=>{const n=async(I,W)=>{try{console.log("Preparing data to send to Google Sheet webhook...");const ye=Object.entries(I).map(([Se,Ce],Te)=>{const Re=W.find(nt=>nt.id===Se);return{questionOrder:Te+1,questionType:Re?.aiGenerated?"AI":"Base",question:Re?.title||Se,answer:Array.isArray(Ce)?Ce.join("; "):String(Ce)}}),je={timestamp:new Date().toISOString(),rows:ye};console.log("Sending POST request to Google Sheet webhook with payload:",je);const xe=await fetch(lv,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)});if(!xe.ok)throw new Error(`Failed with status ${xe.status}`);console.log("Data successfully sent to Google Sheet:",await xe.json())}catch(ye){console.error("Failed to send to Google Sheet:",ye)}},[r,o]=E.useState(0),[l,c]=E.useState({}),[d,m]=E.useState({}),[p,g]=E.useState(kr),[y,x]=E.useState(!1),[S,C]=E.useState(!1),b=5,[_,k]=E.useState(!1),[$,F]=E.useState(!1),[U,B]=E.useState(null),[X,L]=E.useState(!1),[z,te]=E.useState(null),[ue,fe]=E.useState(null),K=Rn(),[oe,re]=E.useState(!1);nn.useEffect(()=>{const I=()=>{document.visibilityState==="visible"&&re(!0)};return document.addEventListener("visibilitychange",I),()=>document.removeEventListener("visibilitychange",I)},[]);const V=(I=!1)=>{if(oe&&!I){re(!1),console.log("Skipped automatic navigation to /loading due to recent tab return");return}K("/loading")},[ce,pe]=E.useState(!1),q=p[r],H=kr.length+b,ae=(r+1)/H*100;E.useEffect(()=>{let I=!0;return(async()=>{try{try{if(localStorage.getItem("fitbuddyai_no_auto_restore")||sessionStorage.getItem("fitbuddyai_no_auto_restore"))return}catch{}const ye=fn(),je=Zs();if(ye||je)return;const xe=In();if(!xe||!xe.id||(await rs(xe.id),!I))return;const Se=Jc();Se&&c(Te=>({...Te||{},...Se||{}}));const Ce=fn();Ce&&(g(Ce.questionsList||p),c(Ce.answers||{}),m(Ce.customInputs||{}),o(Ce.currentQuestion||0),C(!0),Ce.completed&&(k(!0),F(!0))),B(xe)}catch(ye){console.warn("Failed to restore server data in Questionnaire:",ye)}})(),()=>{I=!1}},[]);const N=nn.useRef(null);nn.useEffect(()=>{N.current&&N.current.style.setProperty("--progress-width",`${ae}%`)},[ae]),E.useEffect(()=>{const I=fn();if(I){if(I.questionsList){const W=I.questionsList.map(ye=>({...ye,icon:O(ye.iconType||"")}));g(W),W.length>kr.length&&x(!0)}if(I.completed){k(!0),F(!0),c(I.answers);return}o(I.currentQuestion),c(I.answers),m(I.customInputs||{}),C(!0)}},[]),E.useEffect(()=>{if(S||Object.keys(l).length>0){const I=p.map(({icon:W,...ye})=>ye);jo({currentQuestion:r,answers:l,customInputs:d,completed:_,timestamp:Date.now(),userData:U,questionsList:I})}},[r,l,d,S,_,p]);const w=Object.keys(l).length>=23&&!y,O=I=>{switch(I){case"Target":case"target":return a.jsx(pn,{size:32});case"Clock":case"clock":return a.jsx(Ks,{size:32});case"Dumbbell":case"dumbbell":case"equipment":return a.jsx(gt,{size:32});case"Heart":case"heart":case"heartRate":return a.jsx(Gn,{size:32});case"Calendar":case"calendar":return a.jsx(Nn,{size:32});case"User":case"user":return a.jsx(Xs,{size:32});case"Star":case"star":return a.jsx(ip,{size:32});default:return a.jsx(pn,{size:32})}},J=async(I=!1)=>{if(!I&&Object.keys(l).length<23)return console.log("[AI-FOLLOWUP] Not enough answers for follow-up. answers.length:",Object.keys(l).length),!1;L(!0),te(null);try{const W={...l};Object.keys(d).forEach(Se=>{if(d[Se]){const Ce=W[Se];if(typeof Ce=="string"&&Ce==="Other")W[Se]=d[Se];else if(Array.isArray(Ce)&&Ce.includes("Other")){const Te=Ce.filter(Re=>Re!=="Other");Te.push(d[Se]),W[Se]=Te}}});const ye={questions:p.slice(0,23).map(Se=>({id:Se.id,title:Se.title})),answers:W},je=`Based on the following user questions and responses, generate exactly 5 additional follow-up questions in JSON array format. Only return valid JSON; no extra text. Each object should have id, title, subtitle, type (single, multiple, textarea (for written responses), rating, slider, number), options, iconType, aiGenerated:true. Context: ${JSON.stringify(ye)}`;console.log("[AI-FOLLOWUP] Prompt:",je);const xe=await tv({prompt:je});if(console.log("[AI-FOLLOWUP] Received AI response:",xe),Array.isArray(xe)){const Se=xe.map((Ce,Te)=>(console.log(`[AI-FOLLOWUP] Generated Q${Te+1}:`,Ce),{...Ce,icon:O(Ce.iconType||"")}));return g(Ce=>{const Te=[...Ce,...Se];return console.log("[AI-FOLLOWUP] allQuestions after append:",Te),setTimeout(()=>{try{r===kr.length-1&&o(kr.length)}catch{}},0),Te}),x(!0),console.log("[AI-FOLLOWUP] Follow-up questions appended and flag set."),!0}else console.error("[AI-FOLLOWUP] AI response is not an array:",xe),te("Invalid AI response format")}catch(W){console.error("[AI-FOLLOWUP] Error fetching follow-up questions:",W),te("Failed to fetch follow-up questions. Please try again.")}finally{L(!1),console.log("[AI-FOLLOWUP] Done loading follow-up questions.")}return!1};E.useEffect(()=>{w&&J()},[w]);const ee=I=>{if(q.id==="startDate"){const W=new Date().toISOString().split("T")[0];I&&I<W?fe("Start date cannot be in the past"):fe(null)}c(W=>({...W,[q.id]:I}))},ie=async()=>{if(console.log("[NAV] handleNext called. currentQuestion:",r,"allQuestions.length:",p.length),r<p.length-1)r===22&&console.log("[NAV] About to answer 23rd question. Next click will trigger AI follow-up logic."),o(I=>{const W=I+1;return console.log("[NAV] Advancing to question index:",W),W});else{if(!y&&r===kr.length-1){console.log("[NAV] At last base question; generating follow-ups instead of final plan.");const I=await J(!0);o(I?kr.length:W=>Math.min(p.length-1,W+1));return}if(ce){console.log("[PLAN] Generation already in progress, ignoring duplicate request");return}pe(!0),V(!0),te(null),V();try{n(l,p);const I={...l};Object.keys(d).forEach(xe=>{if(d[xe]){const Se=I[xe];if(typeof Se=="string"&&Se==="Other")I[xe]=d[xe];else if(Array.isArray(Se)&&Se.includes("Other")){const Ce=Se.filter(Te=>Te!=="Other");Ce.push(d[xe]),I[xe]=Ce}}});const W={username:I.username||"",age:I.age,fitnessLevel:I.fitnessLevel?.split(" -")[0].toLowerCase(),fitnessBackground:I.fitnessBackground,motivation:I.motivation,goals:I.goals||[],specificGoals:I.specificGoals,timeAvailable:I.timeAvailable,exerciseFormat:I.exerciseFormat,planDuration:I.planDuration,daysPerWeek:I.daysPerWeek,preferredTime:I.preferredTime,energyLevels:I.energyLevels,preferences:I.preferences||[],dislikes:I.dislikes,injuries:I.injuries,equipment:I.equipment||[],budget:I.budget,lifestyle:I.lifestyle,sleepQuality:I.sleepQuality,stressLevel:I.stressLevel,socialPreference:I.socialPreference,progressTracking:I.progressTracking,concerns:I.concerns};B(W);let ye;const je=2;for(let xe=1;xe<=je+1;xe++)try{console.log(`[PLAN] Generating workout plan, attempt ${xe}`);const Se=(I.planDuration||"").toString().toLowerCase(),Te=(Re=>Re.includes("1 week")?1:Re.includes("2 week")?2:Re.includes("6 week")?6:Re.includes("1 month")?4:Re.includes("3 month")?12:Re.includes("6 month")?24:2)(Se);if(Te<=1)ye=await Hi(W,I,p);else{const Re=I.startDate||new Date().toISOString().split("T")[0],nt=[];let ot=new Date(Re);for(let _t=0;_t<Te;_t++){const Yn={...I,startDate:ot.toISOString().split("T")[0],planDuration:"1 week (part)"};try{const rn=await Hi(W,Yn,p);nt.push(rn),ot.setDate(ot.getDate()+7)}catch(rn){throw console.warn("Week generation failed for week",_t,rn),rn}}const ht=[];let At="",St="",gn="",It="",Rt=[];nt.forEach(_t=>{gn||(gn=_t.startDate),It=_t.endDate||It,At=At||_t.name,St=St||_t.description,Array.isArray(_t.weeklyStructure)&&Rt.length===0&&(Rt=_t.weeklyStructure),Array.isArray(_t.dailyWorkouts)&&ht.push(..._t.dailyWorkouts)}),ye={id:`merged-plan-${Date.now()}`,name:At||`${W.username||"User"}'s Plan`,description:St||"Merged weekly plan",startDate:gn||Re,endDate:It||ht[ht.length-1]?.date||Re,totalDays:ht.length,weeklyStructure:Rt,dailyWorkouts:ht}}console.log(`[PLAN] Workout plan generated on attempt ${xe}`);break}catch(Se){console.error(`[PLAN] Attempt ${xe} failed:`,Se),xe===je+1&&te("Failed to generate workout plan. Please try again.")}if(ye){console.log("[PLAN] Plan complete, calling onComplete."),k(!0),F(!0);try{const xe=p.map(({icon:Se,...Ce})=>Ce);jo({currentQuestion:r,answers:l,customInputs:d,completed:!0,timestamp:Date.now(),userData:W,questionsList:xe})}catch(xe){console.warn("Failed to save completed questionnaire progress:",xe)}try{const xe=In();if(xe){const Se={...W,...xe};s(Se,ye)}else{const{id:Se,token:Ce,access_token:Te,jwt:Re,sub:nt,...ot}=W||{};s(ot,ye)}}catch{const{id:Se,token:Ce,access_token:Te,jwt:Re,sub:nt,...ot}=W||{};s(ot,ye)}}}catch(I){console.error("[PLAN] Error generating plan:",I),te("Failed to generate workout plan. Please try again.")}finally{console.log("[PLAN] Done loading plan."),pe(!1)}}},de=()=>{r>0?o(I=>I-1):K("/")},se=()=>{const I=l[q.id];return q.type==="multiple"?I&&I.length>0:q.type==="textarea"?I&&I.trim().length>0:q.type==="rating"?I!==void 0&&I>0:I!==void 0&&I!==""},he=async()=>{if(se()){ie();return}if(r===kr.length-1&&!y){await J(!0),o(je=>Math.min(p.length-1,je+1));return}const W=r===H-1,ye=y&&r===p.length-1;if(W||ye){ie();return}o(je=>Math.min(p.length-1,je+1))},_e=()=>{const I=l[q.id];switch(q.type){case"text":if(q.id==="startDate"){const W=new Date().toISOString().split("T")[0];return a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"date",className:"input question-input",min:W,value:I||"",onChange:ye=>ee(ye.target.value),onKeyDown:ye=>ye.key==="Enter"&&!ue&&se()&&ie(),"aria-label":q.title}),ue&&a.jsx("div",{className:"error-message",role:"alert",children:ue})]})}return a.jsx("input",{type:"text",className:"input question-input",placeholder:"Enter your name",value:I||"",onChange:W=>ee(W.target.value),onKeyDown:W=>W.key==="Enter"&&se()&&ie(),"aria-label":q.title});case"number":return a.jsx("input",{type:"number",className:"input question-input",placeholder:"Enter your age",min:q.min,max:q.max,value:I||"",onChange:W=>ee(parseInt(W.target.value)),onKeyDown:W=>W.key==="Enter"&&se()&&ie(),"aria-label":q.title});case"textarea":return a.jsx("textarea",{className:"input question-textarea",placeholder:"Share your thoughts...",rows:4,value:I||"",onChange:W=>ee(W.target.value),"aria-label":q.title});case"rating":return a.jsxs("div",{className:"rating-container",children:[a.jsx("div",{className:"rating-scale",children:Array.from({length:q.max||10},(W,ye)=>ye+1).map(W=>a.jsx("button",{className:`rating-button ${I===W?"selected":""}`,onClick:()=>ee(W),"aria-label":`Rating ${W}`,children:W},W))}),a.jsxs("div",{className:"rating-labels",children:[a.jsx("span",{children:"Poor"}),a.jsx("span",{children:"Excellent"})]}),I&&a.jsxs("div",{className:"rating-value",children:["You rated: ",I,"/10"]})]});case"slider":return a.jsxs("div",{className:"slider-container",children:[a.jsx("input",{type:"range",className:"slider",min:q.min,max:q.max,step:q.step,value:I||q.min,onChange:W=>ee(parseInt(W.target.value)),"aria-label":q.title}),a.jsxs("div",{className:"slider-value",children:[I||q.min," minutes"]})]});case"single":return a.jsxs("div",{className:"options-container",children:[a.jsx("div",{className:"options-grid",children:q.options?.map((W,ye)=>a.jsx("button",{className:`option-button ${I===W?"selected":""}`,onClick:()=>ee(W),"aria-label":W,children:W},ye))}),I==="Other"&&a.jsx("div",{className:"custom-input-container",children:a.jsx("input",{type:"text",className:"input custom-input",placeholder:"Please specify...",value:d[q.id]||"",onChange:W=>m(ye=>({...ye,[q.id]:W.target.value}))})})]});case"multiple":return a.jsxs("div",{className:"options-container",children:[a.jsx("div",{className:"options-grid",children:q.options?.map((W,ye)=>a.jsx("button",{className:`option-button ${I&&I.includes(W)?"selected":""}`,onClick:()=>{const je=I||[],xe=je.includes(W)?je.filter(Se=>Se!==W):[...je,W];ee(xe)},"aria-label":W,children:W},ye))}),I&&I.includes("Other")&&a.jsx("div",{className:"custom-input-container",children:a.jsx("input",{type:"text",className:"input custom-input",placeholder:"Please specify...",value:d[q.id]||"",onChange:W=>m(ye=>({...ye,[q.id]:W.target.value}))})})]});default:return a.jsx("input",{type:"text",className:"input question-input",placeholder:"Enter your response",value:I||"",onChange:W=>ee(W.target.value),onKeyDown:W=>W.key==="Enter"&&se()&&ie(),"aria-label":q.title})}},Ae=()=>{ni(),o(0),c({}),m({}),k(!1),F(!1)},Be=()=>{console.log("Edit Responses button clicked"),F(!1),k(!1),o(0),Ze(!1);const I=fn();I?.answers?(c(I.answers),console.log("Previous answers loaded into state:",I.answers)):console.warn("No previous answers found to populate."),console.log("Questionnaire reset to allow editing of responses")},[Je,Ze]=E.useState(!1);E.useEffect(()=>{const I=fn();if(console.log("Loaded questionnaire progress:",I),I?.completed){if(Ze(!0),I.userData&&(B(I.userData),console.log("Restored userData:",I.userData)),I.answers&&(c(I.answers),console.log("Restored answers:",I.answers)),I.customInputs&&(m(I.customInputs),console.log("Restored customInputs:",I.customInputs)),I.questionsList){const W=I.questionsList.map(ye=>({...ye,icon:O(ye.iconType||"")}));g(W),console.log("Restored questionsList:",W)}}else console.warn("No completed progress found in local storage.")},[]);const Ie=async()=>{console.log("handleRegenerate invoked"),console.log("State before regeneration  userData:",U,"answers:",l,"allQuestions length:",p.length);let I=U,W=l,ye=p;if(!I){console.log("No userData in state, attempting to load from localStorage");const je=fn();if(console.log("loadQuestionnaireProgress returned:",je),je?.userData){if(console.log("Found saved.userData:",je.userData),I=je.userData,W=je.answers,c(W),console.log("State after restoring answers:",W),je.customInputs&&m(je.customInputs),je.questionsList){console.log("Restoring questionsList of length:",je.questionsList.length);const xe=je.questionsList.map(Se=>({...Se,icon:O(Se.iconType||"")}));g(xe),console.log("State after restoring allQuestions length:",xe.length),ye=xe}B(I),console.log("State after restoring userData:",I),console.log("Regenerate: restored state from localStorage",je)}else{const xe=Jc();console.log("loadAssessmentData returned:",xe),xe&&(I=xe,B(I))}}if(!I&&W){console.log("Reconstructing userData from currentAnswers");const je={username:W.username||"",age:W.age,fitnessLevel:typeof W.fitnessLevel=="string"?W.fitnessLevel.split(" -")[0].toLowerCase():"",fitnessBackground:W.fitnessBackground,motivation:W.motivation,goals:W.goals||[],specificGoals:W.specificGoals,timeAvailable:W.timeAvailable,exerciseFormat:W.exerciseFormat,planDuration:W.planDuration,daysPerWeek:W.daysPerWeek,preferredTime:W.preferredTime,energyLevels:W.energyLevels,preferences:W.preferences||[],dislikes:W.dislikes,injuries:W.injuries,equipment:W.equipment||[],budget:W.budget,lifestyle:W.lifestyle,sleepQuality:W.sleepQuality,stressLevel:W.stressLevel,socialPreference:W.socialPreference,progressTracking:W.progressTracking,concerns:W.concerns};I=je,B(I),console.log("Reconstructed userData:",je),pu(I)}if(console.log("After restoration  currentUser:",I),!I){console.warn("No userData available to regenerate plan. Exiting handleRegenerate");return}console.log("Regenerate Plan clicked with userData:",I),te(null);try{V();const je=(W.planDuration||"").toString().toLowerCase(),Se=(Te=>Te.includes("1 week")?1:Te.includes("2 week")?2:Te.includes("6 week")?6:Te.includes("1 month")?4:Te.includes("3 month")?12:Te.includes("6 month")?24:2)(je);let Ce;if(Se<=1)Ce=await Hi(I,W,ye);else{const Te=W.startDate||new Date().toISOString().split("T")[0],Re=[];let nt=new Date(Te);for(let ht=0;ht<Se;ht++){const At={...W,startDate:nt.toISOString().split("T")[0],planDuration:"1 week (part)"},St=await Hi(I,At,ye);Re.push(St),nt.setDate(nt.getDate()+7)}const ot=[];Re.forEach(ht=>{Array.isArray(ht.dailyWorkouts)&&ot.push(...ht.dailyWorkouts)}),Ce={id:`merged-plan-${Date.now()}`,name:Re[0]?.name||"Merged Plan",description:Re[0]?.description||"",startDate:Re[0]?.startDate||Te,endDate:Re[Re.length-1]?.endDate||ot[ot.length-1]?.date||Te,totalDays:ot.length,weeklyStructure:Re[0]?.weeklyStructure||[],dailyWorkouts:ot}}console.log("New plan generated:",Ce),k(!0),F(!0);try{const Te=ye.map(({icon:Re,...nt})=>nt);jo({currentQuestion:0,answers:W,customInputs:{},completed:!0,timestamp:Date.now(),userData:I,questionsList:Te})}catch(Te){console.warn("Failed to save completed progress on regenerate:",Te)}try{const Te=In();if(Te){const Re={...I,...Te};s(Re,Ce)}else{const{id:Re,token:nt,access_token:ot,jwt:ht,sub:At,...St}=I||{};s(St,Ce)}}catch{const{id:Re,token:nt,access_token:ot,jwt:ht,sub:At,...St}=I||{};s(St,Ce)}K("/calendar")}catch(je){console.error("Error regenerating plan:",je),te("Failed to generate a new plan. Please try again.")}finally{}};return E.useEffect(()=>{_&&!y&&J()},[_,y]),X?a.jsx(uv,{}):z?a.jsx(dv,{onRetry:Ie}):Je?a.jsx(cv,{onRegenerate:Ie,onEditResponses:Be}):_&&$?a.jsxs("div",{className:"completion-screen",children:[a.jsx("h2",{children:"Questionnaire Completed"}),a.jsx("p",{children:"Your responses have been saved. What would you like to do?"}),a.jsx("button",{className:"btn",onClick:Be,children:"Edit Responses"}),a.jsx("button",{className:"btn btn-secondary",onClick:Ae,children:"Start Over"})]}):a.jsx("div",{className:"questionnaire-page",children:a.jsxs("div",{className:"questionnaire-container",children:[a.jsxs("div",{className:"questionnaire-header",children:["          ",a.jsx("button",{className:"back-button",onClick:de,"aria-label":"Go back to previous question",children:a.jsx(Hc,{size:24})}),"          ",a.jsxs("div",{className:"progress-container",ref:N,children:[a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-fill"})}),a.jsxs("span",{className:"progress-text",children:[r+1," of ",H]})]}),"        "]}),S&&r===0&&a.jsx("div",{className:"restoration-notification",children:a.jsxs("div",{className:"notification-content",children:[a.jsx(Vi,{size:20}),a.jsx("span",{children:"Your previous progress has been restored!"}),a.jsx("button",{className:"restart-button",onClick:Ae,children:"Start Fresh"})]})}),a.jsxs("div",{className:"question-container card fade-in-up",children:[a.jsx("div",{className:"question-icon",children:q.icon}),q.aiGenerated&&a.jsx("div",{className:"ai-badge",children:" AI Personalized Question"}),a.jsx("h2",{className:"question-title",children:q.title}),a.jsx("p",{className:"question-subtitle",children:q.subtitle}),a.jsx("div",{className:"question-input-container",children:_e()})]}),"        ",a.jsxs("div",{className:"questionnaire-navigation",children:[a.jsxs("button",{className:`btn btn-secondary ${r===0?"disabled":""}`,onClick:()=>o(I=>Math.max(0,I-1)),disabled:r===0,children:[a.jsx(Hc,{size:20}),"Previous"]}),(()=>{const I=r===H-1||y&&r===p.length-1;return a.jsxs("button",{className:`btn ${se()?"btn-primary":"btn-secondary"} continue-skip-btn${se()?"":" fake-disabled"}`,onClick:()=>{ce||(I?ie():he())},tabIndex:0,"aria-disabled":!se()||ce,disabled:ce,onKeyDown:W=>{if(W.key==="Enter"||W.key===" "){if(W.preventDefault(),ce)return;I?ie():he()}},children:[a.jsx("span",{className:"continue-text",children:I?ce?"Generating":"Generate My Plan":"Continue"}),!se()&&a.jsx("span",{className:"skip-inline-btn",children:"Skip"})]})})()]})]})})};function Co(s){"@babel/helpers - typeof";return Co=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Co(s)}function ss(s){if(s===null||s===!0||s===!1)return NaN;var n=Number(s);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}function vt(s,n){if(n.length<s)throw new TypeError(s+" argument"+(s>1?"s":"")+" required, but only "+n.length+" present")}function Ft(s){vt(1,arguments);var n=Object.prototype.toString.call(s);return s instanceof Date||Co(s)==="object"&&n==="[object Date]"?new Date(s.getTime()):typeof s=="number"||n==="[object Number]"?new Date(s):((typeof s=="string"||n==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function fv(s,n){vt(2,arguments);var r=Ft(s).getTime(),o=ss(n);return new Date(r+o)}var pv={};function Lo(){return pv}function mv(s){var n=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return n.setUTCFullYear(s.getFullYear()),s.getTime()-n.getTime()}function pf(s){vt(1,arguments);var n=Ft(s);return n.setHours(0,0,0,0),n}function gv(s,n){vt(2,arguments);var r=pf(s),o=pf(n);return r.getTime()===o.getTime()}function yv(s){return vt(1,arguments),s instanceof Date||Co(s)==="object"&&Object.prototype.toString.call(s)==="[object Date]"}function vv(s){if(vt(1,arguments),!yv(s)&&typeof s!="number")return!1;var n=Ft(s);return!isNaN(Number(n))}function wv(s){vt(1,arguments);var n=Ft(s),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function xv(s,n){var r;vt(1,arguments);var o=s||{},l=Ft(o.start),c=Ft(o.end),d=c.getTime();if(!(l.getTime()<=d))throw new RangeError("Invalid interval");var m=[],p=l;p.setHours(0,0,0,0);var g=Number((r=void 0)!==null&&r!==void 0?r:1);if(g<1||isNaN(g))throw new RangeError("`options.step` must be a number greater than 1");for(;p.getTime()<=d;)m.push(Ft(p)),p.setDate(p.getDate()+g),p.setHours(0,0,0,0);return m}function bv(s){vt(1,arguments);var n=Ft(s);return n.setDate(1),n.setHours(0,0,0,0),n}function kv(s,n){vt(2,arguments);var r=ss(n);return fv(s,-r)}var Sv=864e5;function _v(s){vt(1,arguments);var n=Ft(s),r=n.getTime();n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0);var o=n.getTime(),l=r-o;return Math.floor(l/Sv)+1}function To(s){vt(1,arguments);var n=1,r=Ft(s),o=r.getUTCDay(),l=(o<n?7:0)+o-n;return r.setUTCDate(r.getUTCDate()-l),r.setUTCHours(0,0,0,0),r}function lp(s){vt(1,arguments);var n=Ft(s),r=n.getUTCFullYear(),o=new Date(0);o.setUTCFullYear(r+1,0,4),o.setUTCHours(0,0,0,0);var l=To(o),c=new Date(0);c.setUTCFullYear(r,0,4),c.setUTCHours(0,0,0,0);var d=To(c);return n.getTime()>=l.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function jv(s){vt(1,arguments);var n=lp(s),r=new Date(0);r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0);var o=To(r);return o}var Ev=6048e5;function Nv(s){vt(1,arguments);var n=Ft(s),r=To(n).getTime()-jv(n).getTime();return Math.round(r/Ev)+1}function Po(s,n){var r,o,l,c,d,m,p,g;vt(1,arguments);var y=Lo(),x=ss((r=(o=(l=(c=n?.weekStartsOn)!==null&&c!==void 0?c:n==null||(d=n.locale)===null||d===void 0||(m=d.options)===null||m===void 0?void 0:m.weekStartsOn)!==null&&l!==void 0?l:y.weekStartsOn)!==null&&o!==void 0?o:(p=y.locale)===null||p===void 0||(g=p.options)===null||g===void 0?void 0:g.weekStartsOn)!==null&&r!==void 0?r:0);if(!(x>=0&&x<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var S=Ft(s),C=S.getUTCDay(),b=(C<x?7:0)+C-x;return S.setUTCDate(S.getUTCDate()-b),S.setUTCHours(0,0,0,0),S}function cp(s,n){var r,o,l,c,d,m,p,g;vt(1,arguments);var y=Ft(s),x=y.getUTCFullYear(),S=Lo(),C=ss((r=(o=(l=(c=n?.firstWeekContainsDate)!==null&&c!==void 0?c:n==null||(d=n.locale)===null||d===void 0||(m=d.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&l!==void 0?l:S.firstWeekContainsDate)!==null&&o!==void 0?o:(p=S.locale)===null||p===void 0||(g=p.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=new Date(0);b.setUTCFullYear(x+1,0,C),b.setUTCHours(0,0,0,0);var _=Po(b,n),k=new Date(0);k.setUTCFullYear(x,0,C),k.setUTCHours(0,0,0,0);var $=Po(k,n);return y.getTime()>=_.getTime()?x+1:y.getTime()>=$.getTime()?x:x-1}function Cv(s,n){var r,o,l,c,d,m,p,g;vt(1,arguments);var y=Lo(),x=ss((r=(o=(l=(c=n?.firstWeekContainsDate)!==null&&c!==void 0?c:n==null||(d=n.locale)===null||d===void 0||(m=d.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&l!==void 0?l:y.firstWeekContainsDate)!==null&&o!==void 0?o:(p=y.locale)===null||p===void 0||(g=p.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&r!==void 0?r:1),S=cp(s,n),C=new Date(0);C.setUTCFullYear(S,0,x),C.setUTCHours(0,0,0,0);var b=Po(C,n);return b}var Tv=6048e5;function Pv(s,n){vt(1,arguments);var r=Ft(s),o=Po(r,n).getTime()-Cv(r,n).getTime();return Math.round(o/Tv)+1}function Xe(s,n){for(var r=s<0?"-":"",o=Math.abs(s).toString();o.length<n;)o="0"+o;return r+o}var Sr={y:function(n,r){var o=n.getUTCFullYear(),l=o>0?o:1-o;return Xe(r==="yy"?l%100:l,r.length)},M:function(n,r){var o=n.getUTCMonth();return r==="M"?String(o+1):Xe(o+1,2)},d:function(n,r){return Xe(n.getUTCDate(),r.length)},a:function(n,r){var o=n.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return o.toUpperCase();case"aaa":return o;case"aaaaa":return o[0];case"aaaa":default:return o==="am"?"a.m.":"p.m."}},h:function(n,r){return Xe(n.getUTCHours()%12||12,r.length)},H:function(n,r){return Xe(n.getUTCHours(),r.length)},m:function(n,r){return Xe(n.getUTCMinutes(),r.length)},s:function(n,r){return Xe(n.getUTCSeconds(),r.length)},S:function(n,r){var o=r.length,l=n.getUTCMilliseconds(),c=Math.floor(l*Math.pow(10,o-3));return Xe(c,r.length)}},Ls={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ov={G:function(n,r,o){var l=n.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return o.era(l,{width:"abbreviated"});case"GGGGG":return o.era(l,{width:"narrow"});case"GGGG":default:return o.era(l,{width:"wide"})}},y:function(n,r,o){if(r==="yo"){var l=n.getUTCFullYear(),c=l>0?l:1-l;return o.ordinalNumber(c,{unit:"year"})}return Sr.y(n,r)},Y:function(n,r,o,l){var c=cp(n,l),d=c>0?c:1-c;if(r==="YY"){var m=d%100;return Xe(m,2)}return r==="Yo"?o.ordinalNumber(d,{unit:"year"}):Xe(d,r.length)},R:function(n,r){var o=lp(n);return Xe(o,r.length)},u:function(n,r){var o=n.getUTCFullYear();return Xe(o,r.length)},Q:function(n,r,o){var l=Math.ceil((n.getUTCMonth()+1)/3);switch(r){case"Q":return String(l);case"QQ":return Xe(l,2);case"Qo":return o.ordinalNumber(l,{unit:"quarter"});case"QQQ":return o.quarter(l,{width:"abbreviated",context:"formatting"});case"QQQQQ":return o.quarter(l,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(l,{width:"wide",context:"formatting"})}},q:function(n,r,o){var l=Math.ceil((n.getUTCMonth()+1)/3);switch(r){case"q":return String(l);case"qq":return Xe(l,2);case"qo":return o.ordinalNumber(l,{unit:"quarter"});case"qqq":return o.quarter(l,{width:"abbreviated",context:"standalone"});case"qqqqq":return o.quarter(l,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(l,{width:"wide",context:"standalone"})}},M:function(n,r,o){var l=n.getUTCMonth();switch(r){case"M":case"MM":return Sr.M(n,r);case"Mo":return o.ordinalNumber(l+1,{unit:"month"});case"MMM":return o.month(l,{width:"abbreviated",context:"formatting"});case"MMMMM":return o.month(l,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(l,{width:"wide",context:"formatting"})}},L:function(n,r,o){var l=n.getUTCMonth();switch(r){case"L":return String(l+1);case"LL":return Xe(l+1,2);case"Lo":return o.ordinalNumber(l+1,{unit:"month"});case"LLL":return o.month(l,{width:"abbreviated",context:"standalone"});case"LLLLL":return o.month(l,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(l,{width:"wide",context:"standalone"})}},w:function(n,r,o,l){var c=Pv(n,l);return r==="wo"?o.ordinalNumber(c,{unit:"week"}):Xe(c,r.length)},I:function(n,r,o){var l=Nv(n);return r==="Io"?o.ordinalNumber(l,{unit:"week"}):Xe(l,r.length)},d:function(n,r,o){return r==="do"?o.ordinalNumber(n.getUTCDate(),{unit:"date"}):Sr.d(n,r)},D:function(n,r,o){var l=_v(n);return r==="Do"?o.ordinalNumber(l,{unit:"dayOfYear"}):Xe(l,r.length)},E:function(n,r,o){var l=n.getUTCDay();switch(r){case"E":case"EE":case"EEE":return o.day(l,{width:"abbreviated",context:"formatting"});case"EEEEE":return o.day(l,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(l,{width:"short",context:"formatting"});case"EEEE":default:return o.day(l,{width:"wide",context:"formatting"})}},e:function(n,r,o,l){var c=n.getUTCDay(),d=(c-l.weekStartsOn+8)%7||7;switch(r){case"e":return String(d);case"ee":return Xe(d,2);case"eo":return o.ordinalNumber(d,{unit:"day"});case"eee":return o.day(c,{width:"abbreviated",context:"formatting"});case"eeeee":return o.day(c,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(c,{width:"short",context:"formatting"});case"eeee":default:return o.day(c,{width:"wide",context:"formatting"})}},c:function(n,r,o,l){var c=n.getUTCDay(),d=(c-l.weekStartsOn+8)%7||7;switch(r){case"c":return String(d);case"cc":return Xe(d,r.length);case"co":return o.ordinalNumber(d,{unit:"day"});case"ccc":return o.day(c,{width:"abbreviated",context:"standalone"});case"ccccc":return o.day(c,{width:"narrow",context:"standalone"});case"cccccc":return o.day(c,{width:"short",context:"standalone"});case"cccc":default:return o.day(c,{width:"wide",context:"standalone"})}},i:function(n,r,o){var l=n.getUTCDay(),c=l===0?7:l;switch(r){case"i":return String(c);case"ii":return Xe(c,r.length);case"io":return o.ordinalNumber(c,{unit:"day"});case"iii":return o.day(l,{width:"abbreviated",context:"formatting"});case"iiiii":return o.day(l,{width:"narrow",context:"formatting"});case"iiiiii":return o.day(l,{width:"short",context:"formatting"});case"iiii":default:return o.day(l,{width:"wide",context:"formatting"})}},a:function(n,r,o){var l=n.getUTCHours(),c=l/12>=1?"pm":"am";switch(r){case"a":case"aa":return o.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"aaa":return o.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return o.dayPeriod(c,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(c,{width:"wide",context:"formatting"})}},b:function(n,r,o){var l=n.getUTCHours(),c;switch(l===12?c=Ls.noon:l===0?c=Ls.midnight:c=l/12>=1?"pm":"am",r){case"b":case"bb":return o.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"bbb":return o.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return o.dayPeriod(c,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(c,{width:"wide",context:"formatting"})}},B:function(n,r,o){var l=n.getUTCHours(),c;switch(l>=17?c=Ls.evening:l>=12?c=Ls.afternoon:l>=4?c=Ls.morning:c=Ls.night,r){case"B":case"BB":case"BBB":return o.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"BBBBB":return o.dayPeriod(c,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(c,{width:"wide",context:"formatting"})}},h:function(n,r,o){if(r==="ho"){var l=n.getUTCHours()%12;return l===0&&(l=12),o.ordinalNumber(l,{unit:"hour"})}return Sr.h(n,r)},H:function(n,r,o){return r==="Ho"?o.ordinalNumber(n.getUTCHours(),{unit:"hour"}):Sr.H(n,r)},K:function(n,r,o){var l=n.getUTCHours()%12;return r==="Ko"?o.ordinalNumber(l,{unit:"hour"}):Xe(l,r.length)},k:function(n,r,o){var l=n.getUTCHours();return l===0&&(l=24),r==="ko"?o.ordinalNumber(l,{unit:"hour"}):Xe(l,r.length)},m:function(n,r,o){return r==="mo"?o.ordinalNumber(n.getUTCMinutes(),{unit:"minute"}):Sr.m(n,r)},s:function(n,r,o){return r==="so"?o.ordinalNumber(n.getUTCSeconds(),{unit:"second"}):Sr.s(n,r)},S:function(n,r){return Sr.S(n,r)},X:function(n,r,o,l){var c=l._originalDate||n,d=c.getTimezoneOffset();if(d===0)return"Z";switch(r){case"X":return gf(d);case"XXXX":case"XX":return Yr(d);case"XXXXX":case"XXX":default:return Yr(d,":")}},x:function(n,r,o,l){var c=l._originalDate||n,d=c.getTimezoneOffset();switch(r){case"x":return gf(d);case"xxxx":case"xx":return Yr(d);case"xxxxx":case"xxx":default:return Yr(d,":")}},O:function(n,r,o,l){var c=l._originalDate||n,d=c.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+mf(d,":");case"OOOO":default:return"GMT"+Yr(d,":")}},z:function(n,r,o,l){var c=l._originalDate||n,d=c.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+mf(d,":");case"zzzz":default:return"GMT"+Yr(d,":")}},t:function(n,r,o,l){var c=l._originalDate||n,d=Math.floor(c.getTime()/1e3);return Xe(d,r.length)},T:function(n,r,o,l){var c=l._originalDate||n,d=c.getTime();return Xe(d,r.length)}};function mf(s,n){var r=s>0?"-":"+",o=Math.abs(s),l=Math.floor(o/60),c=o%60;if(c===0)return r+String(l);var d=n;return r+String(l)+d+Xe(c,2)}function gf(s,n){if(s%60===0){var r=s>0?"-":"+";return r+Xe(Math.abs(s)/60,2)}return Yr(s,n)}function Yr(s,n){var r=n||"",o=s>0?"-":"+",l=Math.abs(s),c=Xe(Math.floor(l/60),2),d=Xe(l%60,2);return o+c+r+d}var yf=function(n,r){switch(n){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},up=function(n,r){switch(n){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},Av=function(n,r){var o=n.match(/(P+)(p+)?/)||[],l=o[1],c=o[2];if(!c)return yf(n,r);var d;switch(l){case"P":d=r.dateTime({width:"short"});break;case"PP":d=r.dateTime({width:"medium"});break;case"PPP":d=r.dateTime({width:"long"});break;case"PPPP":default:d=r.dateTime({width:"full"});break}return d.replace("{{date}}",yf(l,r)).replace("{{time}}",up(c,r))},Iv={p:up,P:Av},Rv=["D","DD"],Dv=["YY","YYYY"];function Lv(s){return Rv.indexOf(s)!==-1}function Mv(s){return Dv.indexOf(s)!==-1}function vf(s,n,r){if(s==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(n,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(s==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(n,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(s==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(n,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(s==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(n,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Uv={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Fv=function(n,r,o){var l,c=Uv[n];return typeof c=="string"?l=c:r===1?l=c.one:l=c.other.replace("{{count}}",r.toString()),o!=null&&o.addSuffix?o.comparison&&o.comparison>0?"in "+l:l+" ago":l};function Oc(s){return function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.width?String(n.width):s.defaultWidth,o=s.formats[r]||s.formats[s.defaultWidth];return o}}var Bv={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Wv={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$v={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},zv={date:Oc({formats:Bv,defaultWidth:"full"}),time:Oc({formats:Wv,defaultWidth:"full"}),dateTime:Oc({formats:$v,defaultWidth:"full"})},qv={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Hv=function(n,r,o,l){return qv[n]};function zi(s){return function(n,r){var o=r!=null&&r.context?String(r.context):"standalone",l;if(o==="formatting"&&s.formattingValues){var c=s.defaultFormattingWidth||s.defaultWidth,d=r!=null&&r.width?String(r.width):c;l=s.formattingValues[d]||s.formattingValues[c]}else{var m=s.defaultWidth,p=r!=null&&r.width?String(r.width):s.defaultWidth;l=s.values[p]||s.values[m]}var g=s.argumentCallback?s.argumentCallback(n):n;return l[g]}}var Gv={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Vv={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Jv={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Kv={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Qv={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Yv={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Xv=function(n,r){var o=Number(n),l=o%100;if(l>20||l<10)switch(l%10){case 1:return o+"st";case 2:return o+"nd";case 3:return o+"rd"}return o+"th"},Zv={ordinalNumber:Xv,era:zi({values:Gv,defaultWidth:"wide"}),quarter:zi({values:Vv,defaultWidth:"wide",argumentCallback:function(n){return n-1}}),month:zi({values:Jv,defaultWidth:"wide"}),day:zi({values:Kv,defaultWidth:"wide"}),dayPeriod:zi({values:Qv,defaultWidth:"wide",formattingValues:Yv,defaultFormattingWidth:"wide"})};function qi(s){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.width,l=o&&s.matchPatterns[o]||s.matchPatterns[s.defaultMatchWidth],c=n.match(l);if(!c)return null;var d=c[0],m=o&&s.parsePatterns[o]||s.parsePatterns[s.defaultParseWidth],p=Array.isArray(m)?tw(m,function(x){return x.test(d)}):ew(m,function(x){return x.test(d)}),g;g=s.valueCallback?s.valueCallback(p):p,g=r.valueCallback?r.valueCallback(g):g;var y=n.slice(d.length);return{value:g,rest:y}}}function ew(s,n){for(var r in s)if(s.hasOwnProperty(r)&&n(s[r]))return r}function tw(s,n){for(var r=0;r<s.length;r++)if(n(s[r]))return r}function nw(s){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=n.match(s.matchPattern);if(!o)return null;var l=o[0],c=n.match(s.parsePattern);if(!c)return null;var d=s.valueCallback?s.valueCallback(c[0]):c[0];d=r.valueCallback?r.valueCallback(d):d;var m=n.slice(l.length);return{value:d,rest:m}}}var rw=/^(\d+)(th|st|nd|rd)?/i,sw=/\d+/i,iw={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},aw={any:[/^b/i,/^(a|c)/i]},ow={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},lw={any:[/1/i,/2/i,/3/i,/4/i]},cw={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},uw={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},dw={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hw={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fw={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},pw={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mw={ordinalNumber:nw({matchPattern:rw,parsePattern:sw,valueCallback:function(n){return parseInt(n,10)}}),era:qi({matchPatterns:iw,defaultMatchWidth:"wide",parsePatterns:aw,defaultParseWidth:"any"}),quarter:qi({matchPatterns:ow,defaultMatchWidth:"wide",parsePatterns:lw,defaultParseWidth:"any",valueCallback:function(n){return n+1}}),month:qi({matchPatterns:cw,defaultMatchWidth:"wide",parsePatterns:uw,defaultParseWidth:"any"}),day:qi({matchPatterns:dw,defaultMatchWidth:"wide",parsePatterns:hw,defaultParseWidth:"any"}),dayPeriod:qi({matchPatterns:fw,defaultMatchWidth:"any",parsePatterns:pw,defaultParseWidth:"any"})},gw={code:"en-US",formatDistance:Fv,formatLong:zv,formatRelative:Hv,localize:Zv,match:mw,options:{weekStartsOn:0,firstWeekContainsDate:1}},yw=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ww=/^'([^]*?)'?$/,xw=/''/g,bw=/[a-zA-Z]/;function hn(s,n,r){var o,l,c,d,m,p,g,y,x,S,C,b,_,k;vt(2,arguments);var $=String(n),F=Lo(),U=(o=(l=void 0)!==null&&l!==void 0?l:F.locale)!==null&&o!==void 0?o:gw,B=ss((c=(d=(m=(p=void 0)!==null&&p!==void 0?p:void 0)!==null&&m!==void 0?m:F.firstWeekContainsDate)!==null&&d!==void 0?d:(g=F.locale)===null||g===void 0||(y=g.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&c!==void 0?c:1);if(!(B>=1&&B<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var X=ss((x=(S=(C=(b=void 0)!==null&&b!==void 0?b:void 0)!==null&&C!==void 0?C:F.weekStartsOn)!==null&&S!==void 0?S:(_=F.locale)===null||_===void 0||(k=_.options)===null||k===void 0?void 0:k.weekStartsOn)!==null&&x!==void 0?x:0);if(!(X>=0&&X<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!U.localize)throw new RangeError("locale must contain localize property");if(!U.formatLong)throw new RangeError("locale must contain formatLong property");var L=Ft(s);if(!vv(L))throw new RangeError("Invalid time value");var z=mv(L),te=kv(L,z),ue={firstWeekContainsDate:B,weekStartsOn:X,locale:U,_originalDate:L},fe=$.match(vw).map(function(K){var oe=K[0];if(oe==="p"||oe==="P"){var re=Iv[oe];return re(K,U.formatLong)}return K}).join("").match(yw).map(function(K){if(K==="''")return"'";var oe=K[0];if(oe==="'")return kw(K);var re=Ov[oe];if(re)return Mv(K)&&vf(K,n,String(s)),Lv(K)&&vf(K,n,String(s)),re(te,K,U.localize,ue);if(oe.match(bw))throw new RangeError("Format string contains an unescaped latin alphabet character `"+oe+"`");return K}).join("");return fe}function kw(s){var n=s.match(ww);return n?n[1].replace(xw,"'"):s}const Sw={images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Lunges",resources:[{label:"Lunge technique guide",url:"https://example.com/lunges/technique"},{label:"Walking lunge progression",url:"https://example.com/lunges/progression"},{label:"Lunge programming for strength",url:"https://example.com/lunges/programming"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Forward lunge finish"],difficulty:"Moderate",duration:"5-12 min",exampleNote:"Step forward, lower until back knee is near floor, then drive through front heel to stand.",meta:{exercise:"Lower Body / Quads / Glutes / Hamstrings / Calves",movement:"Squat/Lunge -- Sagittal",equipment:"Bodyweight / Optional Weights",trainingType:"Strength / Hypertrophy / Endurance / Balance-Stability",planeOfMotion:"Sagittal",description:"Step forward and lower body by bending knees until back knee is just above the floor; push back to start. Keep torso upright and core engaged."}},_w={images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed/aclHkVaku9U",featuredVideo:!0,resources:[{label:"Harvard Health: How to do a squat",url:"https://www.health.harvard.edu/staying-healthy/squat-exercise"},{label:"ACE Fitness: Squat technique and tips",url:"https://www.acefitness.org/education-and-resources/lifestyle/exercise-library/136/squat/"},{label:"Video: How to Do a Barbell Squat (YouTube)",url:"https://www.youtube.com/watch?v=aclHkVaku9U"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Proper squat depth and posture"],difficulty:"Moderate",duration:"8-15 min",exampleNote:"Keep chest up, push hips back, and drive through heels to stand.",meta:{exercise:"Lower Body / Quads / Glutes / Hamstrings / Calves / Core Stabilizers",movement:"Squat/Lunge -- Sagittal",equipment:"Bodyweight / Free Weights",trainingType:"Strength / Hypertrophy / Endurance / Power-Plyometrics / Balance-Stability",planeOfMotion:"Sagittal",description:"Stand shoulder-width apart, lower by bending hips and knees, then push through heels to return to standing. Avoid knees caving and keep heels down."}},jw={images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Bridges+exercise",resources:[{label:"Glute bridge progressions",url:"https://example.com/bridges/progressions"},{label:"Hip thrust vs bridge comparison",url:"https://example.com/bridges/compare"},{label:"Bridge programming for glute strength",url:"https://example.com/bridges/program"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Bridge top squeeze"],difficulty:"Easy",duration:"5-10 min",exampleNote:"Press through heels to lift hips until body forms straight line from shoulders to knees.",meta:{exercise:"Lower Body / Glutes / Hamstrings / Core Stabilizers / Lower Back",movement:"Push -- Hip Hinge/Extension",equipment:"Bodyweight / Optional Weights",trainingType:"Strength / Hypertrophy",planeOfMotion:"Sagittal",description:"Lie on your back with knees bent and feet flat, press through heels to lift hips toward ceiling and squeeze glutes at top."}},Ew={images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Punches+drill",resources:[{label:"Basic punching technique",url:"https://example.com/punches/technique"},{label:"Shadowboxing routines",url:"https://example.com/punches/shadowboxing"},{label:"Rotational power drills",url:"https://example.com/punches/power"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Punching stance"],difficulty:"Moderate",duration:"3-8 min",exampleNote:"Stand in a fighting stance, extend the arm and rotate torso for power, retract quickly.",meta:{exercise:"Upper Body / Arms / Shoulders / Chest / Core  Rotation",movement:"Push -- Horizontal / Rotation",equipment:"Bodyweight / Optional Weights",trainingType:"Endurance / Power-Plyometrics",planeOfMotion:"Transverse",description:"Stand with feet shoulder-width and rotate through the torso while extending the arm to punch, then retract. Focus on controlled power and posture."}},Nw={images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Superman+exercise",resources:[{label:"Superman back extension tips",url:"https://example.com/superman/tips"},{label:"Lower back strengthening program",url:"https://example.com/superman/program"},{label:"Glute and hamstring pairing",url:"https://example.com/superman/pairings"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Superman top position"],difficulty:"Easy",duration:"3-8 min",exampleNote:"Lift arms, chest, and legs slightly off the ground squeezing glutes and lower back.",meta:{exercise:"Core / Lower Back / Glutes / Hamstrings / Shoulders",movement:"Extension -- Sagittal Isometric Hold",equipment:"Bodyweight",trainingType:"Endurance / Balance-Stability",planeOfMotion:"Sagittal",description:"Lie face down and lift arms, chest, and legs a few inches off the ground, holding briefly at the top."}},wf={"Sit-ups":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed/1fbU_MkV7NE",featuredVideo:!0,resources:[{label:"NHS: How to do sit-ups safely",url:"https://www.nhs.uk/live-well/exercise/how-to-do-a-sit-up-or-crunch/"},{label:"LIVESTRONG: How to Do a Sit Up",url:"https://www.livestrong.com/article/137075-how-to-do-a-sit-up/"},{label:"Video: How to Do a Sit Up (YouTube)",url:"https://www.youtube.com/watch?v=1fbU_MkV7NE"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Controlled sit-up finish"],difficulty:"Moderate",duration:"3-10 min",exampleNote:"Lie on your back with knees bent and feet flat; curl up using the core and avoid neck strain.",meta:{exercise:"Core / Abs",movement:"Push -- Sagittal Flexion",equipment:"Bodyweight",trainingType:"Endurance / Hypertrophy",planeOfMotion:"Sagittal",description:"Lie on your back with knees bent and feet flat on the floor. Cross arms or place hands by your head. Tighten core and curl upper body toward knees, then lower with control."}},"Reverse Crunches":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Reverse+Crunches",resources:[{label:"Reverse crunch tutorial",url:"https://example.com/reverse-crunches/tutorial"},{label:"Lower-abs progressions",url:"https://example.com/reverse-crunches/progressions"},{label:"Reverse crunch common errors",url:"https://example.com/reverse-crunches/errors"}],galleryImages:["/images/we09532.png"],imageCaptions:["Reverse crunch top position"],difficulty:"Moderate",duration:"5-10 min",exampleNote:"Curl hips off the floor and draw knees toward chest using the abs.",meta:{exercise:"Core / Abs / Lower Back Stabilizers",movement:"Pull -- Sagittal Flexion",equipment:"Bodyweight",trainingType:"Endurance / Hypertrophy",planeOfMotion:"Sagittal",description:"Lie on your back with knees bent and feet lifted. Contract abs to curl hips off the floor and draw knees toward your chest. Lower down under control."}},"Bicycle Crunches":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Bicycle+Crunches",resources:[{label:"Bicycle crunch form guide",url:"https://example.com/bicycle-crunches/form"},{label:"Oblique strengthening routine",url:"https://example.com/bicycle-crunches/obliques"},{label:"Progressions for bicycle crunches",url:"https://example.com/bicycle-crunches/progressions"}],galleryImages:["/images/we09532.png"],imageCaptions:["Bicycle crunch twist"],difficulty:"Moderate",duration:"5-8 min",exampleNote:"Perform slow, controlled alternating twist motions to target obliques.",meta:{exercise:"Core / Abs / Obliques",movement:"Rotation -- Transverse Flexion",equipment:"Bodyweight",trainingType:"Endurance / Hypertrophy",planeOfMotion:"Transverse",description:"Lie on your back with hands behind head and legs lifted. Bring one knee toward chest while twisting the opposite elbow toward it, then switch sides."}},"Flutter Kicks":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Flutter+Kicks",resources:[{label:"Flutter kicks technique",url:"https://example.com/flutter-kicks/technique"},{label:"Core endurance workouts",url:"https://example.com/flutter-kicks/endurance"},{label:"Protect your lower back while flutter kicking",url:"https://example.com/flutter-kicks/lower-back"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Flutter kicks supine"],difficulty:"Moderate",duration:"1-3 min",exampleNote:"Keep core tight and lower back pressed to the floor while performing small kicking motions.",meta:{exercise:"Core / Abs / Hip Flexors",movement:"Push -- Sagittal Flexion/Stability",equipment:"Bodyweight",trainingType:"Endurance / Hypertrophy / Balance-Stability",planeOfMotion:"Sagittal",description:"Lie flat on your back with legs extended, hands under hips for support. Lift legs a few inches and alternate small kicks while keeping the core engaged."}},"Leg Raises":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed/2XcmRr0Vj3I",featuredVideo:!0,resources:[{label:"Penn State Health: How to do leg raises",url:"https://www.pennstatehealth.org/health-a-to-z/leg-raises"},{label:"Nuffield Health: Straight leg raise technique",url:"https://www.nuffieldhealth.com/article/how-to-do-a-straight-leg-raise"},{label:"Video: Lying Leg Raises (YouTube)",url:"https://www.youtube.com/watch?v=2XcmRr0Vj3I"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Leg raise - controlled descent"],difficulty:"Moderate",duration:"5-10 min",exampleNote:"Keep legs straight and lift toward the ceiling, lowering with control.",meta:{exercise:"Core / Abs / Hip Flexors",movement:"Push -- Sagittal Flexion",equipment:"Bodyweight",trainingType:"Endurance / Hypertrophy",planeOfMotion:"Sagittal",description:"Lie flat with legs extended and hands under hips. Slowly lift legs toward ceiling, then lower with control while maintaining tension in the abs."}},"Elbow Plank":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Elbow+Plank",resources:[{label:"Plank form and variations",url:"https://example.com/elbow-plank/form"},{label:"Plank progressions for endurance",url:"https://example.com/elbow-plank/progressions"},{label:"Shoulder and core stability tips",url:"https://example.com/elbow-plank/stability"}],galleryImages:["/images/we09532.png"],imageCaptions:["Elbow plank alignment"],difficulty:"Easy",duration:"30s-2min",exampleNote:"Form a straight line from head to heels on elbows; keep hips level and core braced.",meta:{exercise:"Core / Abs / Lower Back / Shoulders",movement:"Anti-Rotation / Stability -- Isometric Hold",equipment:"Bodyweight",trainingType:"Endurance / Balance-Stability",planeOfMotion:"Sagittal",description:"Start face down with elbows under shoulders and legs extended. Lift body into a straight line and hold while breathing evenly."}},Lunges:Sw,"High Knees":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=High+Knees",resources:[{label:"High knees drill and form",url:"https://example.com/high-knees/drill"},{label:"Warm-up plyometrics",url:"https://example.com/high-knees/plyometrics"},{label:"Cardio interval ideas",url:"https://example.com/high-knees/cardio"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["High knees sprint form"],difficulty:"Moderate",duration:"30s-3min",exampleNote:"Drive knees up rapidly while pumping opposite arm and staying light on the feet.",meta:{exercise:"Lower Body / Quads / Hamstrings / Glutes / Calves / Core Stabilizers",movement:"Running/Carry -- Sagittal",equipment:"Bodyweight",trainingType:"Endurance / Power-Plyometrics / Balance-Stability",planeOfMotion:"Sagittal",description:"Quickly drive one knee toward the chest while pumping the opposite arm, alternating rapidly to raise heart rate."}},"Side Kicks":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Side+Kicks",resources:[{label:"Side kick mechanics",url:"https://example.com/side-kicks/mechanics"},{label:"Hip abductor strengthening",url:"https://example.com/side-kicks/hip-abductors"},{label:"Balance drills for kicks",url:"https://example.com/side-kicks/balance"}],galleryImages:["/images/we09532.png"],imageCaptions:["Side kick height"],difficulty:"Moderate",duration:"3-8 min",exampleNote:"Shift weight to one leg and lift the opposite leg to the side with control.",meta:{exercise:"Lower Body / Glutes / Hip Abductors / Quads / Core Stabilizers",movement:"Push -- Frontal",equipment:"Bodyweight",trainingType:"Strength / Hypertrophy / Balance-Stability",planeOfMotion:"Frontal",description:"Stand with feet shoulder-width apart, shift weight to one leg, lift the other leg out to the side while keeping torso upright."}},"Mountain Climbers":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Mountain+Climbers",resources:[{label:"Mountain climber intervals",url:"https://example.com/mountain-climbers/intervals"},{label:"Plank-to-mountain transitions",url:"https://example.com/mountain-climbers/transitions"},{label:"Core conditioning with mountain climbers",url:"https://example.com/mountain-climbers/core"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Mountain climbers quick drive"],difficulty:"Moderate",duration:"30s-2min",exampleNote:"From high plank, drive knees toward chest alternately while keeping torso stable.",meta:{exercise:"Core / Abs / Shoulders / Arms / Quads / Hip Flexors",movement:"Push -- Sagittal Dynamic Stability",equipment:"Bodyweight",trainingType:"Endurance / Power-Plyometrics / Balance-Stability",planeOfMotion:"Sagittal",description:"Start in a high plank and alternately drive knees toward chest at a steady pace while keeping hips low."}},Squats:_w,"Donkey Kicks":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Donkey+Kicks",resources:[{label:"Donkey kick variations",url:"https://example.com/donkey-kicks/variations"},{label:"Glute activation exercises",url:"https://example.com/donkey-kicks/activation"},{label:"Band-assisted donkey kicks",url:"https://example.com/donkey-kicks/band"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Donkey kick top"],difficulty:"Easy",duration:"3-8 min",exampleNote:"From all fours, lift one knee to the ceiling with knee bent at 90 degrees, squeezing glutes at top.",meta:{exercise:"Lower Body / Glutes / Hamstrings / Core Stabilizers",movement:"Push -- Sagittal Hip Extension",equipment:"Bodyweight / Optional Bands",trainingType:"Strength / Hypertrophy / Balance-Stability",planeOfMotion:"Sagittal",description:"Start on all fours and lift one leg upward with knee bent at 90 degrees, squeeze glutes at the top, then lower with control."}},Bridges:jw,"Jump Knee Tucks":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Jump+Knee+Tucks",resources:[{label:"Plyometric tuck jump progressions",url:"https://example.com/jump-knee-tucks/progressions"},{label:"Landing mechanics for knee tucks",url:"https://example.com/jump-knee-tucks/landing"},{label:"Plyometric conditioning",url:"https://example.com/jump-knee-tucks/conditioning"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Tuck jump peak"],difficulty:"Hard",duration:"1-5 min",exampleNote:"Explosively jump and drive knees to chest; land softly and reset.",meta:{exercise:"Lower Body / Quads / Hamstrings / Glutes / Calves / Core Stabilizers",movement:"Squat/Lunge + Jump -- Explosive Plyometric",equipment:"Bodyweight",trainingType:"Power-Plyometrics / Endurance",planeOfMotion:"Sagittal",description:"Bend into a quarter squat, explode upward bringing knees toward chest, and land softly absorbing impact."}},"Side Leg Raises":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Side+Leg+Raises",resources:[{label:"Side leg raise technique",url:"https://example.com/side-leg-raises/technique"},{label:"Glute med strengthening routine",url:"https://example.com/side-leg-raises/routine"},{label:"Ankle and hip mobility for side raises",url:"https://example.com/side-leg-raises/mobility"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Side leg raise top"],difficulty:"Easy",duration:"3-8 min",exampleNote:"Lie on your side and lift the top leg with control, keeping hips stacked.",meta:{exercise:"Lower Body / Glutes / Hip Abductors / Core Stabilizers",movement:"Push -- Frontal Hip Abduction",equipment:"Bodyweight / Optional Bands",trainingType:"Strength / Balance-Stability",planeOfMotion:"Frontal",description:"Lie on your side and lift the top leg upward while keeping your hips stacked and torso stable."}},"Close-Grip Push-ups":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Close-Grip+Push-ups",resources:[{label:"Close-grip push-up form",url:"https://example.com/close-grip-pushups/form"},{label:"Triceps-focused bodyweight work",url:"https://example.com/close-grip-pushups/triceps"},{label:"Progressions for stronger push-ups",url:"https://example.com/close-grip-pushups/progressions"}],galleryImages:["/images/we09532.png"],imageCaptions:["Close-grip push-up finish"],difficulty:"Moderate",duration:"5-12 min",exampleNote:"Hands close under shoulders; lower chest while keeping elbows tucked to emphasize triceps.",meta:{exercise:"Upper Body / Chest / Triceps / Shoulders / Core Stabilizers",movement:"Push -- Horizontal",equipment:"Bodyweight",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"From a push-up position, place hands closer than shoulder width and lower chest while keeping elbows near the ribs."}},Punches:Ew,"Pseudo Planche":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Pseudo+Planche",resources:[{label:"Pseudo planche progressions",url:"https://example.com/pseudo-planche/progressions"},{label:"Wrist and shoulder prep for planche",url:"https://example.com/pseudo-planche/prep"},{label:"Advanced bodyweight skills programming",url:"https://example.com/pseudo-planche/program"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Pseudo planche lean"],difficulty:"Hard",duration:"Varies",exampleNote:"Lean shoulders forward in push-up position to increase horizontal load on shoulders and core.",meta:{exercise:"Upper Body / Chest / Triceps / Shoulders / Core Stabilizers",movement:"Push -- Horizontal with Forward Lean",equipment:"Bodyweight",trainingType:"Strength / Hypertrophy / Balance-Stability / Power (advanced variations)",planeOfMotion:"Sagittal",description:"From a push-up position, place hands lower toward hips and lean shoulders forward to increase load on the shoulders and core."}},"Sitting Pull-ups":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Sitting+Pull-ups",resources:[{label:"Assisted pull-up options",url:"https://example.com/sitting-pullups/assisted"},{label:"Seated pull mechanics",url:"https://example.com/sitting-pullups/mechanics"},{label:"Upper back strengthening",url:"https://example.com/sitting-pullups/upper-back"}],galleryImages:["/images/we09532.png"],imageCaptions:["Sitting pull-up setup"],difficulty:"Moderate",duration:"Varies",exampleNote:"Sit under a bar or rings and pull chest toward the bar using the back and arms. Focus on technique over momentum.",meta:{exercise:"Upper Body / Back / Biceps / Forearms / Shoulders / Core Stabilizers",movement:"Pull -- Vertical",equipment:"Bodyweight / Suspension Trainer / Bar / Rings",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Sit or use an assisted setup to pull the chest toward a bar, focusing on scapular retraction and elbow drive."}},"Doorframe Rows":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Doorframe+Rows",resources:[{label:"Doorframe row setup and safety",url:"https://example.com/doorframe-rows/setup"},{label:"Horizontal pulling programming",url:"https://example.com/doorframe-rows/programming"},{label:"Grip and wrist considerations",url:"https://example.com/doorframe-rows/grip"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Doorframe row body angle"],difficulty:"Easy",duration:"5-12 min",exampleNote:"Grip the doorframe and lean back, pulling the chest toward the frame while keeping the body straight.",meta:{exercise:"Upper Body / Back / Biceps / Forearms / Shoulders / Core Stabilizers",movement:"Pull -- Horizontal",equipment:"Bodyweight / Doorframe or Sturdy Support",trainingType:"Strength / Endurance / Balance-Stability",planeOfMotion:"Sagittal",description:"Stand facing an open door, grip the frame, and lean back. Pull your chest toward the frame using back muscles and squeeze shoulder blades."}},"Scapular Shrugs":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Scapular+Shrugs",resources:[{label:"Scapular control drills",url:"https://example.com/scapular-shrugs/drills"},{label:"Shoulder health routines",url:"https://example.com/scapular-shrugs/shoulder-health"},{label:"Band-based scapular work",url:"https://example.com/scapular-shrugs/bands"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Scapular shrug small range"],difficulty:"Easy",duration:"2-6 min",exampleNote:"From a hang, pull shoulder blades down and together without bending elbows to create a small upward movement.",meta:{exercise:"Upper Body / Back / Trapezius / Rhomboids / Lats / Shoulders / Core Stabilizers",movement:"Pull -- Vertical Scapular Depression/Elevation",equipment:"Bodyweight / Pull-Up Bar",trainingType:"Strength / Hypertrophy / Balance-Stability",planeOfMotion:"Sagittal",description:"Hang from a bar and pull shoulder blades down and together to produce a slight lift, focusing on scapular control."}},Superman:Nw,"Back Lifts":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Back+Lifts",resources:[{label:"Back lift variations",url:"https://example.com/back-lifts/variations"},{label:"Safe tempo for back lifts",url:"https://example.com/back-lifts/tempo"},{label:"Lower back strengthening plans",url:"https://example.com/back-lifts/plans"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Back lift top"],difficulty:"Moderate",duration:"5-12 min",exampleNote:"Lift torso using lower back and glutes; avoid jerky motions.",meta:{exercise:"Core / Lower Back / Glutes / Hamstrings",movement:"Extension -- Hip Hinge",equipment:"Bodyweight / Roman Chair / Stability Ball",trainingType:"Strength / Hypertrophy",planeOfMotion:"Sagittal",description:"Perform controlled back extensions focusing on hip hinge mechanics and lower back engagement."}},"Alternative Arm Leg Plank":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Arm+Leg+Plank",resources:[{label:"Arm/leg plank progressions",url:"https://example.com/arm-leg-plank/progressions"},{label:"Anti-rotation core drills",url:"https://example.com/arm-leg-plank/anti-rotation"},{label:"Plank stability programming",url:"https://example.com/arm-leg-plank/program"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Arm-leg plank balance"],difficulty:"Moderate",duration:"30s-2min",exampleNote:"Lift opposite arm and leg while maintaining a straight plank line and steady breathing.",meta:{exercise:"Core / Abs / Lower Back / Shoulders / Glutes",movement:"Anti-Rotation / Stability -- Isometric Hold with Alternating Lift",equipment:"Bodyweight",trainingType:"Endurance / Balance-Stability",planeOfMotion:"Sagittal with Transverse Stability Demand",description:"From a plank position, lift one arm and the opposite leg while keeping hips level and core braced."}},"Push-ups":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Push-ups",resources:[{label:"Push-up form checklist",url:"https://example.com/push-ups/form"},{label:"Push-up progressions and regressions",url:"https://example.com/push-ups/progressions"},{label:"Programming push-ups for strength",url:"https://example.com/push-ups/programming"}],galleryImages:["/images/we09532.png"],imageCaptions:["Standard push-up finish"],difficulty:"Moderate",duration:"5-15 min",exampleNote:"Keep body straight and lower chest to floor, then push back up using chest and triceps.",meta:{exercise:"Upper Body / Chest / Triceps / Shoulders / Core Stabilizers",movement:"Push -- Horizontal",equipment:"Bodyweight",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"From a high plank, lower chest toward floor and press back up, keeping core engaged."}},"Chest Expansions":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Chest+Expansions",resources:[{label:"Chest expansion mobility sequence",url:"https://example.com/chest-expansions/mobility"},{label:"Band-assisted chest opens",url:"https://example.com/chest-expansions/band"},{label:"Upper body flexibility routine",url:"https://example.com/chest-expansions/flexibility"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Chest expansion range"],difficulty:"Easy",duration:"3-8 min",exampleNote:"Open the arms wide and squeeze shoulder blades together; focus on posture and range of motion.",meta:{exercise:"Upper Body / Chest / Shoulders / Upper Back / Arms",movement:"Push -- Horizontal Abduction/Adduction",equipment:"Bodyweight / Bands",trainingType:"Endurance / Mobility-Flexibility",planeOfMotion:"Frontal",description:"Extend arms forward and open wide to stretch and mobilize the chest and shoulders."}},"Chest Squeezes":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Chest+Squeezes",resources:[{label:"Chest squeeze variations",url:"https://example.com/chest-squeezes/variations"},{label:"Medicine ball chest squeeze",url:"https://example.com/chest-squeezes/medicine-ball"},{label:"Isometric chest work for posture",url:"https://example.com/chest-squeezes/isometrics"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Chest squeeze hold"],difficulty:"Easy",duration:"2-6 min",exampleNote:"Press hands or an object together in front of chest to contract chest muscles.",meta:{exercise:"Upper Body / Chest / Shoulders / Arms",movement:"Push -- Horizontal Adduction/Isometric Hold",equipment:"Bodyweight / Bands / Dumbbell / Medicine Ball",trainingType:"Endurance / Mobility-Flexibility",planeOfMotion:"Frontal",description:"Squeeze hands or an object toward the midline to contract chest muscles and improve posture."}},"Pike Push-ups":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Pike+Push-ups",resources:[{label:"Pike push-up progression",url:"https://example.com/pike-pushups/progression"},{label:"Shoulder press alternatives",url:"https://example.com/pike-pushups/alternatives"},{label:"Inverted push-up technique",url:"https://example.com/pike-pushups/inverted"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Pike push-up peak"],difficulty:"Hard",duration:"Varies",exampleNote:"Walk feet toward hands to create a pike position and lower head toward the floor using shoulders.",meta:{exercise:"Upper Body / Shoulders / Triceps / Chest / Core Stabilizers",movement:"Push -- Vertical Press Variation",equipment:"Bodyweight",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Assume a pike (inverted V) position and lower the top of the head toward the floor, pressing back up to start."}},"Shoulder Taps":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Shoulder+Taps",resources:[{label:"Shoulder tap stability drill",url:"https://example.com/shoulder-taps/drill"},{label:"Anti-rotation core work",url:"https://example.com/shoulder-taps/anti-rotation"},{label:"Progressions for single-arm stability",url:"https://example.com/shoulder-taps/progressions"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Shoulder tap balance"],difficulty:"Easy",duration:"1-5 min",exampleNote:"From plank, lift one hand to tap the opposite shoulder while keeping hips square and body stable.",meta:{exercise:"Upper Body / Shoulders / Triceps / Chest / Core Stabilizers",movement:"Anti-Rotation / Stability -- Isometric Hold with Alternating Lift",equipment:"Bodyweight",trainingType:"Endurance / Balance-Stability / Strength",planeOfMotion:"Sagittal",description:"Maintain a stable plank while alternately tapping opposite shoulders with controlled motion."}},"Clapping Push-ups":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Clapping+Push-ups",resources:[{label:"Plyometric push-up progressions",url:"https://example.com/clapping-pushups/progressions"},{label:"Safe landing mechanics for plyo",url:"https://example.com/clapping-pushups/landing"},{label:"Upper body power drills",url:"https://example.com/clapping-pushups/power"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Clap push-up explosion"],difficulty:"Hard",duration:"Varies",exampleNote:"Explode off the ground and clap hands before returning to push-up position; land softly.",meta:{exercise:"Upper Body / Chest / Triceps / Shoulders / Core Stabilizers",movement:"Push -- Horizontal Explosive",equipment:"Bodyweight",trainingType:"Power-Plyometrics / Strength / Hypertrophy",planeOfMotion:"Sagittal",description:"Perform an explosive push-up so hands leave the ground, clap, and land in a controlled manner."}},"Cable Woodchop":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Cable+Woodchop",resources:[{label:"Cable woodchop technique",url:"https://example.com/cable-woodchop/technique"},{label:"Rotational core programming",url:"https://example.com/cable-woodchop/programming"},{label:"Anti-rotation vs rotation training",url:"https://example.com/cable-woodchop/rotation"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Cable woodchop finish"],difficulty:"Moderate",duration:"5-12 min",exampleNote:"Pull a handle diagonally across the body using torso rotation; control the return.",meta:{exercise:"Core / Abs / Obliques / Shoulders / Back Stabilizers",movement:"Rotation -- Transverse",equipment:"Cables / Bands",trainingType:"Strength / Hypertrophy / Endurance / Balance-Stability",planeOfMotion:"Transverse",description:"Attach a handle high on a cable and pull diagonally across the body while rotating the torso, then return smoothly."}},"Hanging Leg Raises":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Hanging+Leg+Raises",resources:[{label:"Hanging leg raise progressions",url:"https://example.com/hanging-leg-raises/progressions"},{label:"Grip endurance tips",url:"https://example.com/hanging-leg-raises/grip"},{label:"Core-to-hip flexor coordination drills",url:"https://example.com/hanging-leg-raises/coordination"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Hanging leg raise top"],difficulty:"Hard",duration:"Varies",exampleNote:"Hang from a bar and raise legs toward parallel while keeping control and avoiding swing.",meta:{exercise:"Core / Abs / Hip Flexors",movement:"Push -- Sagittal Flexion",equipment:"Bodyweight / Pull-Up Bar",trainingType:"Strength / Hypertrophy",planeOfMotion:"Sagittal",description:"Hang from a bar and lift legs upward while maintaining a controlled motion and braced core."}},"Crunch Machine":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Crunch+Machine",resources:[{label:"Using the crunch machine safely",url:"https://example.com/crunch-machine/safety"},{label:"Machine-based core workouts",url:"https://example.com/crunch-machine/workouts"},{label:"Adjusting machine settings for form",url:"https://example.com/crunch-machine/settings"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Crunch machine setup"],difficulty:"Easy",duration:"5-12 min",exampleNote:"Use a crunch machine to perform controlled spinal flexion focusing on the abs.",meta:{exercise:"Core / Abs / Obliques  secondary",movement:"Push -- Sagittal Flexion",equipment:"Machine",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Sit in the crunch machine and curl the torso forward under control, keeping tension in the abs."}},"Cable Crunch":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Cable+Crunch",resources:[{label:"Cable crunch form and setup",url:"https://example.com/cable-crunch/form"},{label:"Rope attachment best practices",url:"https://example.com/cable-crunch/rope"},{label:"Core strength progressions",url:"https://example.com/cable-crunch/progressions"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Cable crunch finish"],difficulty:"Moderate",duration:"5-12 min",exampleNote:"Attach a rope to a high pulley and curl the torso down while keeping hips stable.",meta:{exercise:"Core / Abs / Obliques  secondary",movement:"Push -- Sagittal Flexion",equipment:"Cables / Rope Attachment",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Kneel in front of a high pulley and pull the rope down with core contraction to flex the spine."}},"Rotary Torso Machine":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Rotary+Torso+Machine",resources:[{label:"Rotary torso machine technique",url:"https://example.com/rotary-torso/technique"},{label:"Machine-based rotation programming",url:"https://example.com/rotary-torso/programming"},{label:"Comparing rotational tools",url:"https://example.com/rotary-torso/compare"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Rotary torso setup"],difficulty:"Easy",duration:"5-10 min",exampleNote:"Use the rotary torso machine to rotate the torso slowly and with control.",meta:{exercise:"Core / Abs / Obliques / Lower Back Stabilizers",movement:"Rotation -- Transverse",equipment:"Machine",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Transverse",description:"Use a rotary torso machine to perform controlled rotations, focusing on controlled movement and posture."}},"Leg Press Machine":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Leg+Press+Machine",resources:[{label:"Leg press setup and foot placement",url:"https://example.com/leg-press/setup"},{label:"Programming leg press for hypertrophy",url:"https://example.com/leg-press/programming"},{label:"Knee and hip safety on leg press",url:"https://example.com/leg-press/safety"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Leg press foot placement"],difficulty:"Moderate",duration:"Varies",exampleNote:"Place feet on platform and press while keeping lower back against the seat; control range of motion.",meta:{exercise:"Lower Body / Quads / Glutes / Hamstrings / Calves",movement:"Squat/Lunge -- Sagittal",equipment:"Machine  Leg Press",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Use the leg press machine to push the platform under control, focusing on foot placement and knee tracking."}},"Weighted Lunges":{images:["/images/fitbuddyai_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Weighted+Lunges",resources:[{label:"Weighted lunge variations",url:"https://example.com/weighted-lunges/variations"},{label:"Programming lunges for mass",url:"https://example.com/weighted-lunges/programming"},{label:"Lunge safety with weights",url:"https://example.com/weighted-lunges/safety"}],galleryImages:["/images/fitbuddyai_head.png"],imageCaptions:["Weighted lunge stance"],difficulty:"Moderate",duration:"8-20 min",exampleNote:"Step forward with weight and lower into a controlled lunge, keeping torso upright and pushing through the front heel.",meta:{exercise:"Lower Body / Quads / Glutes / Hamstrings / Calves / Core Stabilizers",movement:"Squat/Lunge -- Sagittal",equipment:"Free Weights  Dumbbells / Barbells / Kettlebells",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Perform lunges while holding weight, focusing on balance, knee tracking, and controlled movement."}}},Cw=({name:s,exercise:n,onClose:r})=>{const o=wf[s]||wf.Default||{},l=n?{...o,...n}:o,c={images:l.images||[],galleryImages:l.galleryImages||[],imageCaptions:l.imageCaptions||[],video:l.video||"",featuredVideo:l.featuredVideo||!1,resources:Array.isArray(l.resources)?l.resources:[],difficulty:l.difficulty||"",duration:l.duration||"",exampleNote:l.exampleNote||"",meta:l.meta||{}},d=n&&n.muscleGroups&&n.muscleGroups.length?n.muscleGroups.join(", "):c.meta?.muscleGroups&&c.meta.muscleGroups.length?c.meta.muscleGroups.join(", "):l.muscleGroups&&l.muscleGroups.join?l.muscleGroups.join(", "):"",m=n&&(n.sets||n.reps)?n.sets?`${n.sets} sets  ${n.reps||""}`:`${n.reps} reps`:c.sets&&c.reps?`${c.sets} sets  ${c.reps}`:c.meta?.reps?`${c.meta.reps} reps`:null,p=m?m.toString().toLowerCase().endsWith("reps")?m:`${m} reps`:null;return a.jsx("div",{className:"exercise-modal-overlay",onClick:r,children:a.jsxs("div",{className:"exercise-detail-modal",onClick:g=>g.stopPropagation(),role:"dialog","aria-label":`${s} details`,children:[a.jsxs("div",{className:"exercise-detail-header",children:[a.jsxs("div",{className:"header-left",children:[a.jsx("div",{className:"illustration","aria-hidden":!0,children:a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"8",rx:"2",fill:"#F3FBF6"}),a.jsx("path",{d:"M7 11V8a3 3 0 0 1 3-3h4",stroke:"#2EB06A",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("circle",{cx:"17",cy:"6",r:"1.6",fill:"#2EB06A"})]})}),a.jsxs("div",{className:"title-block",children:[a.jsxs("div",{className:"title-text",children:[a.jsx("h3",{children:s}),a.jsxs("div",{className:"tag-row",children:[(()=>{const y=((n&&n.difficulty?n.difficulty:c.difficulty||"")||"").toString().toLowerCase().trim();let x="Unknown",S="unknown";return y.includes("easy")||y.includes("beginner")?(x="Beginner",S="beginner"):y.includes("moder")||y.includes("inter")||y.includes("medium")||y.includes("intermediate")?(x="Intermediate",S="intermediate"):y.includes("hard")||y.includes("adv")||y.includes("advanced")?(x="Advanced",S="advanced"):y&&(x=y.charAt(0).toUpperCase()+y.slice(1),S=y.replace(/\s+/g,"-")),a.jsx("span",{className:`tag tag-difficulty tag-${S}`,children:x})})(),a.jsxs("span",{className:"meta-pill duration",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-clock",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("polyline",{points:"12 6 12 12 16 14"})]}),c.duration||""]}),p?a.jsxs("span",{className:"meta-pill reps",children:[a.jsx(gt,{size:14}),p]}):null,a.jsxs("span",{className:"meta-pill target",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-zap",children:a.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),d]})]})]}),a.jsx("div",{className:"header-subinfo","aria-hidden":!0})]})]}),a.jsx("button",{className:"close-btn",onClick:r,"aria-label":"Close",children:a.jsx(Zi,{size:18})})]}),a.jsxs("div",{className:"exercise-body",children:[a.jsx("div",{className:"hero-media",children:c.video?a.jsx("div",{className:"hero-video",children:a.jsx("iframe",{src:c.video,title:`${s} video`,frameBorder:"0",allowFullScreen:!0})}):a.jsx("div",{className:"hero-placeholder",children:a.jsx("svg",{width:"96",height:"64",viewBox:"0 0 96 64",fill:"none",children:a.jsx("rect",{width:"96",height:"64",rx:"8",fill:"#F3FBF6"})})})}),a.jsxs("div",{className:"meta-grid",children:[a.jsxs("div",{className:"meta-item",children:[a.jsx("div",{className:"meta-icon",children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M12 2v20",stroke:"#4CAF50",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),a.jsxs("div",{className:"meta-content",children:[a.jsx("div",{className:"meta-label",children:"Exercise"}),a.jsx("div",{className:"meta-value",children:c.meta?.exercise||""})]})]}),a.jsxs("div",{className:"meta-item",children:[a.jsx("div",{className:"meta-icon",children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M4 12h16",stroke:"#1E90CB",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),a.jsxs("div",{className:"meta-content",children:[a.jsx("div",{className:"meta-label",children:"Movement"}),a.jsx("div",{className:"meta-value",children:c.meta?.movement||""})]})]}),a.jsxs("div",{className:"meta-item",children:[a.jsx("div",{className:"meta-icon",children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:a.jsx("rect",{x:"3",y:"6",width:"18",height:"12",rx:"2",stroke:"#FF9600",strokeWidth:"1.2"})})}),a.jsxs("div",{className:"meta-content",children:[a.jsx("div",{className:"meta-label",children:"Equipment"}),a.jsx("div",{className:"meta-value",children:c.meta?.equipment||""})]})]}),a.jsxs("div",{className:"meta-item",children:[a.jsx("div",{className:"meta-icon",children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M12 20V4",stroke:"#6A5ACD",strokeWidth:"1.2",strokeLinecap:"round"})})}),a.jsxs("div",{className:"meta-content",children:[a.jsx("div",{className:"meta-label",children:"Type of Training"}),a.jsx("div",{className:"meta-value",children:c.meta?.trainingType||""})]})]}),a.jsxs("div",{className:"meta-item",children:[a.jsx("div",{className:"meta-icon",children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:a.jsx("circle",{cx:"12",cy:"12",r:"8",stroke:"#2E8B57",strokeWidth:"1.2"})})}),a.jsxs("div",{className:"meta-content",children:[a.jsx("div",{className:"meta-label",children:"Plane of Motion"}),a.jsx("div",{className:"meta-value",children:c.meta?.planeOfMotion||""})]})]})]}),a.jsxs("div",{className:"description",children:[a.jsx("div",{className:"desc-label",children:"Description"}),a.jsx("div",{className:"desc-text",children:c.meta?.description||c.exampleNote||"No description available."})]}),a.jsx("div",{className:"image-gallery",children:(c.galleryImages&&c.galleryImages.length?c.galleryImages:c.images||[]).slice(0,2).map((g,y)=>a.jsxs("figure",{className:"gallery-item",children:[a.jsx("img",{src:g,alt:`${s} image ${y+1}`}),a.jsx("figcaption",{children:c.imageCaptions&&c.imageCaptions[y]||c.resources?.[y]?.label||""})]},y))}),a.jsx("div",{className:"section-divider"}),a.jsxs("div",{className:"meta-resources",children:[a.jsx("h4",{children:"Resources"}),a.jsx("div",{className:"resource-cards",children:c.resources.map((g,y)=>a.jsxs("div",{className:"resource-card",children:[a.jsxs("div",{className:"resource-card-left",children:[a.jsx("div",{className:"resource-icon",children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:a.jsx("rect",{x:"3",y:"6",width:"18",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"1.4"})})}),a.jsxs("div",{className:"resource-body",children:[a.jsx("div",{className:"resource-title",children:g.label}),a.jsx("div",{className:"resource-caption",children:g.caption||""})]})]}),a.jsx("div",{className:"resource-actions",children:a.jsx("a",{className:`resource-btn btn btn-primary ${y%2===0?"green":"blue"}`,href:g.url,target:"_blank",rel:"noreferrer",children:"Open"})})]},y))})]})]})]})})};var ia={};(function s(n,r,o,l){var c=!!(n.Worker&&n.Blob&&n.Promise&&n.OffscreenCanvas&&n.OffscreenCanvasRenderingContext2D&&n.HTMLCanvasElement&&n.HTMLCanvasElement.prototype.transferControlToOffscreen&&n.URL&&n.URL.createObjectURL),d=typeof Path2D=="function"&&typeof DOMMatrix=="function",m=function(){if(!n.OffscreenCanvas)return!1;var N=new OffscreenCanvas(1,1),w=N.getContext("2d");w.fillRect(0,0,1,1);var O=N.transferToImageBitmap();try{w.createPattern(O,"no-repeat")}catch{return!1}return!0}();function p(){}function g(N){var w=r.exports.Promise,O=w!==void 0?w:n.Promise;return typeof O=="function"?new O(N):(N(p,p),null)}var y=function(N,w){return{transform:function(O){if(N)return O;if(w.has(O))return w.get(O);var J=new OffscreenCanvas(O.width,O.height),ee=J.getContext("2d");return ee.drawImage(O,0,0),w.set(O,J),J},clear:function(){w.clear()}}}(m,new Map),x=function(){var N=Math.floor(16.666666666666668),w,O,J={},ee=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(w=function(ie){var de=Math.random();return J[de]=requestAnimationFrame(function se(he){ee===he||ee+N-1<he?(ee=he,delete J[de],ie()):J[de]=requestAnimationFrame(se)}),de},O=function(ie){J[ie]&&cancelAnimationFrame(J[ie])}):(w=function(ie){return setTimeout(ie,N)},O=function(ie){return clearTimeout(ie)}),{frame:w,cancel:O}}(),S=function(){var N,w,O={};function J(ee){function ie(de,se){ee.postMessage({options:de||{},callback:se})}ee.init=function(se){var he=se.transferControlToOffscreen();ee.postMessage({canvas:he},[he])},ee.fire=function(se,he,_e){if(w)return ie(se,null),w;var Ae=Math.random().toString(36).slice(2);return w=g(function(Be){function Je(Ze){Ze.data.callback===Ae&&(delete O[Ae],ee.removeEventListener("message",Je),w=null,y.clear(),_e(),Be())}ee.addEventListener("message",Je),ie(se,Ae),O[Ae]=Je.bind(null,{data:{callback:Ae}})}),w},ee.reset=function(){ee.postMessage({reset:!0});for(var se in O)O[se](),delete O[se]}}return function(){if(N)return N;if(!o&&c){var ee=["var CONFETTI, SIZE = {}, module = {};","("+s.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{N=new Worker(URL.createObjectURL(new Blob([ee])))}catch(ie){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn(" Could not load worker",ie),null}J(N)}return N}}(),C={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function b(N,w){return w?w(N):N}function _(N){return N!=null}function k(N,w,O){return b(N&&_(N[w])?N[w]:C[w],O)}function $(N){return N<0?0:Math.floor(N)}function F(N,w){return Math.floor(Math.random()*(w-N))+N}function U(N){return parseInt(N,16)}function B(N){return N.map(X)}function X(N){var w=String(N).replace(/[^0-9a-f]/gi,"");return w.length<6&&(w=w[0]+w[0]+w[1]+w[1]+w[2]+w[2]),{r:U(w.substring(0,2)),g:U(w.substring(2,4)),b:U(w.substring(4,6))}}function L(N){var w=k(N,"origin",Object);return w.x=k(w,"x",Number),w.y=k(w,"y",Number),w}function z(N){N.width=document.documentElement.clientWidth,N.height=document.documentElement.clientHeight}function te(N){var w=N.getBoundingClientRect();N.width=w.width,N.height=w.height}function ue(N){var w=document.createElement("canvas");return w.style.position="fixed",w.style.top="0px",w.style.left="0px",w.style.pointerEvents="none",w.style.zIndex=N,w}function fe(N,w,O,J,ee,ie,de,se,he){N.save(),N.translate(w,O),N.rotate(ie),N.scale(J,ee),N.arc(0,0,1,de,se,he),N.restore()}function K(N){var w=N.angle*(Math.PI/180),O=N.spread*(Math.PI/180);return{x:N.x,y:N.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:N.startVelocity*.5+Math.random()*N.startVelocity,angle2D:-w+(.5*O-Math.random()*O),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:N.color,shape:N.shape,tick:0,totalTicks:N.ticks,decay:N.decay,drift:N.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:N.gravity*3,ovalScalar:.6,scalar:N.scalar,flat:N.flat}}function oe(N,w){w.x+=Math.cos(w.angle2D)*w.velocity+w.drift,w.y+=Math.sin(w.angle2D)*w.velocity+w.gravity,w.velocity*=w.decay,w.flat?(w.wobble=0,w.wobbleX=w.x+10*w.scalar,w.wobbleY=w.y+10*w.scalar,w.tiltSin=0,w.tiltCos=0,w.random=1):(w.wobble+=w.wobbleSpeed,w.wobbleX=w.x+10*w.scalar*Math.cos(w.wobble),w.wobbleY=w.y+10*w.scalar*Math.sin(w.wobble),w.tiltAngle+=.1,w.tiltSin=Math.sin(w.tiltAngle),w.tiltCos=Math.cos(w.tiltAngle),w.random=Math.random()+2);var O=w.tick++/w.totalTicks,J=w.x+w.random*w.tiltCos,ee=w.y+w.random*w.tiltSin,ie=w.wobbleX+w.random*w.tiltCos,de=w.wobbleY+w.random*w.tiltSin;if(N.fillStyle="rgba("+w.color.r+", "+w.color.g+", "+w.color.b+", "+(1-O)+")",N.beginPath(),d&&w.shape.type==="path"&&typeof w.shape.path=="string"&&Array.isArray(w.shape.matrix))N.fill(q(w.shape.path,w.shape.matrix,w.x,w.y,Math.abs(ie-J)*.1,Math.abs(de-ee)*.1,Math.PI/10*w.wobble));else if(w.shape.type==="bitmap"){var se=Math.PI/10*w.wobble,he=Math.abs(ie-J)*.1,_e=Math.abs(de-ee)*.1,Ae=w.shape.bitmap.width*w.scalar,Be=w.shape.bitmap.height*w.scalar,Je=new DOMMatrix([Math.cos(se)*he,Math.sin(se)*he,-Math.sin(se)*_e,Math.cos(se)*_e,w.x,w.y]);Je.multiplySelf(new DOMMatrix(w.shape.matrix));var Ze=N.createPattern(y.transform(w.shape.bitmap),"no-repeat");Ze.setTransform(Je),N.globalAlpha=1-O,N.fillStyle=Ze,N.fillRect(w.x-Ae/2,w.y-Be/2,Ae,Be),N.globalAlpha=1}else if(w.shape==="circle")N.ellipse?N.ellipse(w.x,w.y,Math.abs(ie-J)*w.ovalScalar,Math.abs(de-ee)*w.ovalScalar,Math.PI/10*w.wobble,0,2*Math.PI):fe(N,w.x,w.y,Math.abs(ie-J)*w.ovalScalar,Math.abs(de-ee)*w.ovalScalar,Math.PI/10*w.wobble,0,2*Math.PI);else if(w.shape==="star")for(var Ie=Math.PI/2*3,I=4*w.scalar,W=8*w.scalar,ye=w.x,je=w.y,xe=5,Se=Math.PI/xe;xe--;)ye=w.x+Math.cos(Ie)*W,je=w.y+Math.sin(Ie)*W,N.lineTo(ye,je),Ie+=Se,ye=w.x+Math.cos(Ie)*I,je=w.y+Math.sin(Ie)*I,N.lineTo(ye,je),Ie+=Se;else N.moveTo(Math.floor(w.x),Math.floor(w.y)),N.lineTo(Math.floor(w.wobbleX),Math.floor(ee)),N.lineTo(Math.floor(ie),Math.floor(de)),N.lineTo(Math.floor(J),Math.floor(w.wobbleY));return N.closePath(),N.fill(),w.tick<w.totalTicks}function re(N,w,O,J,ee){var ie=w.slice(),de=N.getContext("2d"),se,he,_e=g(function(Ae){function Be(){se=he=null,de.clearRect(0,0,J.width,J.height),y.clear(),ee(),Ae()}function Je(){o&&!(J.width===l.width&&J.height===l.height)&&(J.width=N.width=l.width,J.height=N.height=l.height),!J.width&&!J.height&&(O(N),J.width=N.width,J.height=N.height),de.clearRect(0,0,J.width,J.height),ie=ie.filter(function(Ze){return oe(de,Ze)}),ie.length?se=x.frame(Je):Be()}se=x.frame(Je),he=Be});return{addFettis:function(Ae){return ie=ie.concat(Ae),_e},canvas:N,promise:_e,reset:function(){se&&x.cancel(se),he&&he()}}}function V(N,w){var O=!N,J=!!k(w||{},"resize"),ee=!1,ie=k(w,"disableForReducedMotion",Boolean),de=c&&!!k(w||{},"useWorker"),se=de?S():null,he=O?z:te,_e=N&&se?!!N.__confetti_initialized:!1,Ae=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Be;function Je(Ie,I,W){for(var ye=k(Ie,"particleCount",$),je=k(Ie,"angle",Number),xe=k(Ie,"spread",Number),Se=k(Ie,"startVelocity",Number),Ce=k(Ie,"decay",Number),Te=k(Ie,"gravity",Number),Re=k(Ie,"drift",Number),nt=k(Ie,"colors",B),ot=k(Ie,"ticks",Number),ht=k(Ie,"shapes"),At=k(Ie,"scalar"),St=!!k(Ie,"flat"),gn=L(Ie),It=ye,Rt=[],_t=N.width*gn.x,Yn=N.height*gn.y;It--;)Rt.push(K({x:_t,y:Yn,angle:je,spread:xe,startVelocity:Se,color:nt[It%nt.length],shape:ht[F(0,ht.length)],ticks:ot,decay:Ce,gravity:Te,drift:Re,scalar:At,flat:St}));return Be?Be.addFettis(Rt):(Be=re(N,Rt,he,I,W),Be.promise)}function Ze(Ie){var I=ie||k(Ie,"disableForReducedMotion",Boolean),W=k(Ie,"zIndex",Number);if(I&&Ae)return g(function(Se){Se()});O&&Be?N=Be.canvas:O&&!N&&(N=ue(W),document.body.appendChild(N)),J&&!_e&&he(N);var ye={width:N.width,height:N.height};se&&!_e&&se.init(N),_e=!0,se&&(N.__confetti_initialized=!0);function je(){if(se){var Se={getBoundingClientRect:function(){if(!O)return N.getBoundingClientRect()}};he(Se),se.postMessage({resize:{width:Se.width,height:Se.height}});return}ye.width=ye.height=null}function xe(){Be=null,J&&(ee=!1,n.removeEventListener("resize",je)),O&&N&&(document.body.contains(N)&&document.body.removeChild(N),N=null,_e=!1)}return J&&!ee&&(ee=!0,n.addEventListener("resize",je,!1)),se?se.fire(Ie,ye,xe):Je(Ie,ye,xe)}return Ze.reset=function(){se&&se.reset(),Be&&Be.reset()},Ze}var ce;function pe(){return ce||(ce=V(null,{useWorker:!0,resize:!0})),ce}function q(N,w,O,J,ee,ie,de){var se=new Path2D(N),he=new Path2D;he.addPath(se,new DOMMatrix(w));var _e=new Path2D;return _e.addPath(he,new DOMMatrix([Math.cos(de)*ee,Math.sin(de)*ee,-Math.sin(de)*ie,Math.cos(de)*ie,O,J])),_e}function H(N){if(!d)throw new Error("path confetti are not supported in this browser");var w,O;typeof N=="string"?w=N:(w=N.path,O=N.matrix);var J=new Path2D(w),ee=document.createElement("canvas"),ie=ee.getContext("2d");if(!O){for(var de=1e3,se=de,he=de,_e=0,Ae=0,Be,Je,Ze=0;Ze<de;Ze+=2)for(var Ie=0;Ie<de;Ie+=2)ie.isPointInPath(J,Ze,Ie,"nonzero")&&(se=Math.min(se,Ze),he=Math.min(he,Ie),_e=Math.max(_e,Ze),Ae=Math.max(Ae,Ie));Be=_e-se,Je=Ae-he;var I=10,W=Math.min(I/Be,I/Je);O=[W,0,0,W,-Math.round(Be/2+se)*W,-Math.round(Je/2+he)*W]}return{type:"path",path:w,matrix:O}}function ae(N){var w,O=1,J="#000000",ee='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof N=="string"?w=N:(w=N.text,O="scalar"in N?N.scalar:O,ee="fontFamily"in N?N.fontFamily:ee,J="color"in N?N.color:J);var ie=10*O,de=""+ie+"px "+ee,se=new OffscreenCanvas(ie,ie),he=se.getContext("2d");he.font=de;var _e=he.measureText(w),Ae=Math.ceil(_e.actualBoundingBoxRight+_e.actualBoundingBoxLeft),Be=Math.ceil(_e.actualBoundingBoxAscent+_e.actualBoundingBoxDescent),Je=2,Ze=_e.actualBoundingBoxLeft+Je,Ie=_e.actualBoundingBoxAscent+Je;Ae+=Je+Je,Be+=Je+Je,se=new OffscreenCanvas(Ae,Be),he=se.getContext("2d"),he.font=de,he.fillStyle=J,he.fillText(w,Ze,Ie);var I=1/O;return{type:"bitmap",bitmap:se.transferToImageBitmap(),matrix:[I,0,0,I,-Ae*I/2,-Be*I/2]}}r.exports=function(){return pe().apply(this,arguments)},r.exports.reset=function(){pe().reset()},r.exports.create=V,r.exports.shapeFromPath=H,r.exports.shapeFromText=ae})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),ia,!1);const Tw=ia.exports;ia.exports.create;const Pw=({workout:s,onClose:n,onComplete:r,onRegenerateWorkout:o,isRegenerating:l,onUpdateWorkout:c})=>{const[d,m]=E.useState(!1),[p,g]=E.useState(!1),[y,x]=E.useState(s),[S,C]=E.useState(s.completed);nn.useEffect(()=>{C(s.completed)},[s.completed]);const b=K=>{const[oe,re,V]=K.split("-").map(Number);return new Date(oe,re-1,V).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},_=K=>{switch(K){case"strength":return"strength";case"cardio":return"cardio";case"flexibility":return"flexibility";case"rest":return"rest";case"mixed":return"mixed";default:return"mixed"}},k=K=>{if(!K)return{label:"",cls:""};const oe=(K||"").toString().toLowerCase();return oe==="easy"||oe==="beginner"?{label:"Easy",cls:"difficulty-easy"}:oe==="medium"||oe==="intermediate"?{label:"Medium",cls:"difficulty-medium"}:oe==="hard"||oe==="advanced"?{label:"Hard",cls:"difficulty-hard"}:{label:oe.charAt(0).toUpperCase()+oe.slice(1),cls:`difficulty-${oe.replace(/\s+/g,"-")}`}},$=d?s.alternativeWorkouts:s.workouts,[F,U]=nn.useState(null),[B,X]=nn.useState(null),L=(K,oe=!1)=>{const re={...y};oe?re.alternativeWorkouts=re.alternativeWorkouts.filter((V,ce)=>ce!==K):re.workouts=re.workouts.filter((V,ce)=>ce!==K),x(re)},z=(K,oe=!1)=>{if(oe){const re=y.alternativeWorkouts[K];x({...y,workouts:[...y.workouts,re],alternativeWorkouts:y.alternativeWorkouts.filter((V,ce)=>ce!==K)})}else{const re=y.workouts[K];x({...y,workouts:y.workouts.filter((V,ce)=>ce!==K),alternativeWorkouts:[...y.alternativeWorkouts,re]})}},te=()=>{const K=y.workouts.length>0,oe=y.alternativeWorkouts.length>0;if(!K&&!oe){c&&c({...y,workouts:[],alternativeWorkouts:[]}),n();return}c&&c(y),g(!1),n()},ue=()=>{x(s),g(!1)},fe=()=>{S||Tw({particleCount:100,spread:70,origin:{y:.3},zIndex:9999});const K=!S;C(K),c&&c({...s,completed:K}),r()};return a.jsx("div",{className:"modal-overlay",onClick:n,children:a.jsxs("div",{className:"workout-modal",onClick:K=>K.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("div",{className:"modal-title-section",children:[a.jsx("div",{className:`workout-type-badge ${_(s.type)}`,children:s.type==="rest"?"Rest Day":s.type==="strength"?"Strength":s.type==="cardio"?"Cardio":s.type==="flexibility"?"Flexibility":"Mixed"}),a.jsxs("div",{children:[a.jsx("h2",{children:b(s.date)}),s.completed&&a.jsxs("span",{className:"completed-badge",children:[a.jsx(qc,{size:16}),"Completed"]})]})]}),"          ",a.jsx("button",{className:"close-button",onClick:n,title:"Close modal",children:a.jsx(Zi,{size:24})})]}),a.jsx("div",{className:"modal-content",children:s.type==="rest"?s.isRickroll?a.jsxs("div",{className:"rest-day-content rickroll-rest",children:[a.jsx("div",{className:"rest-icon",children:a.jsx(ns,{size:48})}),a.jsx("h3",{children:"Rest & Recharge"}),a.jsx("p",{children:"Todays a gentle recovery day  take it slow and treat yourself. A short, uplifting break can do wonders. Enjoy this pick-me-up while you rest."}),a.jsx("div",{className:"rickroll-embed",children:a.jsx("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/dQw4w9WgXcQ?rel=0",title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),a.jsxs("div",{className:"rest-activities",children:[a.jsxs("div",{className:"activity-item",children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Slow breathing or meditation (5-10 min)"})]}),a.jsxs("div",{className:"activity-item",children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Enjoy a calming drink while you relax"})]})]})]}):a.jsxs("div",{className:"rest-day-content",children:[a.jsx("div",{className:"rest-icon",children:a.jsx(ns,{size:48})}),a.jsx("h3",{children:"Recovery Day"}),a.jsx("p",{children:"Take this day to rest and let your muscles recover. You can do light stretching, meditation, or gentle walking."}),a.jsxs("div",{className:"rest-activities",children:[a.jsxs("div",{className:"activity-item",children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Meditation (10-15 min)"})]}),a.jsxs("div",{className:"activity-item",children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Light walking"})]}),a.jsxs("div",{className:"activity-item",children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Relaxing bath"})]}),a.jsxs("div",{className:"activity-item",children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Reading or relaxing"})]})]})]}):a.jsxs("div",{className:"workout-content",children:[a.jsxs("div",{className:"workout-toggle",children:[a.jsx("button",{className:`toggle-button ${d?"":"active"}`,onClick:()=>m(!1),children:"Main Workout"}),a.jsx("button",{className:`toggle-button ${d?"active":""}`,onClick:()=>m(!0),children:"Alternative"})]}),"              ",a.jsx("div",{className:"exercise-list",children:(p?d?y.alternativeWorkouts:y.workouts:$).map((K,oe)=>a.jsxs("div",{className:"exercise-card",role:p?void 0:"button",tabIndex:p?void 0:0,onClick:()=>{p||(U(K.name),X(K))},onKeyDown:re=>{!p&&(re.key==="Enter"||re.key===" ")&&(re.preventDefault(),U(K.name),X(K))},children:[a.jsxs("div",{className:"exercise-header",children:[a.jsxs("div",{className:"exercise-title-section",children:[a.jsx("h4",{children:K.name}),(()=>{const{label:re,cls:V}=k(K.difficulty);return a.jsx("div",{className:`difficulty-badge ${V}`,children:re})})()]}),p&&a.jsxs("div",{className:"exercise-actions",children:[a.jsx("button",{className:"action-btn swap-btn",onClick:re=>{re.stopPropagation(),z(oe,d)},title:d?"Move to main workout":"Move to alternative",children:d?a.jsx(My,{size:16}):a.jsx(Uy,{size:16})}),a.jsx("button",{className:"action-btn delete-btn",onClick:re=>{re.stopPropagation(),L(oe,d)},title:"Delete exercise",children:a.jsx(_o,{size:16})})]})]}),a.jsxs("div",{className:"exercise-details",children:[K.sets&&K.reps&&a.jsxs("div",{className:"detail-item",children:[a.jsx(gt,{size:16}),a.jsxs("span",{children:[K.sets," sets  ",K.reps," reps"]})]}),K.duration&&a.jsxs("div",{className:"detail-item",children:[a.jsx(Ks,{size:16}),a.jsx("span",{children:K.duration})]}),K.muscleGroups&&K.muscleGroups.length>0&&a.jsxs("div",{className:"detail-item",children:[a.jsx(ns,{size:16}),a.jsx("span",{children:K.muscleGroups.join(", ")})]})]}),a.jsx("p",{className:"exercise-description",children:K.description}),Array.isArray(K.equipment)&&K.equipment.some(re=>re!=="No equipment")&&a.jsx("div",{className:"equipment-tags",children:K.equipment.filter(re=>re!=="No equipment").map((re,V)=>a.jsx("span",{className:"equipment-tag",children:re},V))})]},oe))})]})}),F&&a.jsx(Cw,{name:F,exercise:B||void 0,onClose:()=>{U(null),X(null)}}),s.type!=="rest"&&a.jsx("div",{className:"modal-footer",children:a.jsx("div",{className:"action-buttons",children:p?a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"btn btn-secondary",onClick:ue,children:[a.jsx(Zi,{size:16}),"Cancel"]}),a.jsxs("button",{className:"btn btn-primary",onClick:te,children:[a.jsx(Vc,{size:16}),"Save Changes"]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"btn btn-secondary",onClick:()=>g(!0),children:[a.jsx(Gc,{size:16}),"Edit Workout"]}),a.jsx("button",{className:"btn btn-secondary",onClick:o,disabled:!!l,"aria-busy":!!l,children:l?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"button-spinner",children:a.jsx("div",{className:"loading-dumbbell small",children:a.jsx(gt,{size:16,color:"#fff"})})}),a.jsx("span",{className:"generating-text",children:"Generating..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(hf,{size:16}),"New Workout"]})}),a.jsx("button",{className:`btn ${S?"btn-accent":"btn-primary"}`,onClick:fe,children:S?a.jsxs(a.Fragment,{children:[a.jsx(hf,{size:16}),"Mark Incomplete"]}):a.jsxs(a.Fragment,{children:[a.jsx(qc,{size:16}),"Complete Workout"]})})]})})}),s.type!=="rest"&&a.jsxs("div",{className:"add-workout-section",children:[a.jsx("h3",{children:"Select Date and Workout Type"}),a.jsxs("div",{className:"date-picker-container",children:[a.jsx("label",{htmlFor:"workout-date",children:"Date:"}),a.jsx("input",{type:"date",id:"workout-date",className:"date-picker",value:y.date,onChange:K=>x({...y,date:K.target.value})})]}),a.jsxs("div",{className:"workout-type-container",children:[a.jsx("label",{htmlFor:"workout-type",children:"Workout Type:"}),a.jsxs("select",{id:"workout-type",className:"workout-type-selector",value:y.type,onChange:K=>x({...y,type:K.target.value}),children:[a.jsx("option",{value:"strength",children:"Strength"}),a.jsx("option",{value:"cardio",children:"Cardio"}),a.jsx("option",{value:"flexibility",children:"Flexibility"}),a.jsx("option",{value:"rest",children:"Rest"})]})]}),a.jsx("button",{className:"add-workout-button",onClick:te,children:"Add Workout Day"})]}),a.jsx("style",{children:`
            .add-workout-section {
              margin-top: 20px;
              padding: 15px;
              background-color: var(--light-blue);
              border-radius: 8px;
              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            }
            .date-picker-container, .workout-type-container {
              margin-bottom: 15px;
            }
            .date-picker, .workout-type-selector {
              width: 100%;
              padding: 10px;
              border: 1px solid var(--gray);
              border-radius: 4px;
              font-size: 16px;
            }
            .add-workout-button {
              width: 100%;
              padding: 10px;
              background-color: var(--green);
              color: white;
              font-size: 16px;
              border: none;
              border-radius: 4px;
              cursor: pointer;
              transition: background-color 0.3s;
            }
            .add-workout-button:hover {
              background-color: var(--dark-green);
            }
          `})]})})},Ow=({workoutPlan:s,userData:n,onUpdatePlan:r})=>{const o=E.useRef(0),l=E.useRef(0),[c,d]=E.useState(new Date),[m,p]=E.useState(null),[g,y]=E.useState(!1),[x,S]=E.useState(null),[C,b]=E.useState(!1),[_,k]=E.useState(null),[$,F]=E.useState(!1),[U,B]=E.useState(!1),[X,L]=E.useState(!1),[z,te]=E.useState(!1),[ue,fe]=E.useState([]),[K,oe]=E.useState(!1),[re,V]=E.useState(["strength"]),[ce,pe]=E.useState(""),[q,H]=E.useState([]),[ae,N]=E.useState(""),[w,O]=E.useState(!1),[J,ee]=E.useState(""),[ie,de]=E.useState(null),[se,he]=E.useState(null),[_e,Ae]=E.useState(!1),[Be,Je]=E.useState(!1),[Ze,Ie]=E.useState(null),[I,W]=E.useState(!1),[ye,je]=E.useState("strength"),[xe,Se]=E.useState({duration:"30 min",muscleGroups:[],equipment:[]}),[Ce,Te]=E.useState(!1),[Re,nt]=E.useState([]);if(E.useEffect(()=>{if(s&&s.dailyWorkouts.length>0&&!I){const[D,G,le]=s.startDate.split("-").map(Number);d(new Date(D,G-1,le))}},[s]),E.useEffect(()=>{let D=!0;return(async()=>{try{if(s&&s.dailyWorkouts&&s.dailyWorkouts.length>0)return;try{if(localStorage.getItem("fitbuddyai_no_auto_restore")||sessionStorage.getItem("fitbuddyai_no_auto_restore"))return}catch{}const le=In();if(!le||!le.id||(await rs(le.id),!D))return;const ge=Zs();ge&&r(ge)}catch(le){console.warn("Failed to restore server data in WorkoutCalendar:",le)}})(),()=>{D=!1}},[r]),E.useEffect(()=>{},[s]),E.useEffect(()=>{},[]),E.useEffect(()=>{if(s){let D=s.dailyWorkouts.map(G=>{if(G.type==="mixed"&&(!G.workouts||G.workouts.length===0)&&us(G)==="0 min"){const le={...G,type:"rest",workouts:[{name:"Rest Day",description:"Take a well-deserved break and let your body recover.",duration:"0 min",difficulty:"beginner",muscleGroups:[]}],alternativeWorkouts:[]};return Math.random()<1e-6&&(le.isRickroll=!0),le}return G});try{const G=Array.isArray(s.weeklyStructure)?s.weeklyStructure:[],le=typeof s.totalDays=="number"&&s.totalDays>0?s.totalDays:s.dailyWorkouts?s.dailyWorkouts.length:0;if(s.startDate&&le>0&&G.length===7){const ge=s.startDate.split("-").map(Number);if(ge.length===3){const Me=new Date(ge[0],ge[1]-1,ge[2]),We=new Set((D||[]).map(He=>He.date));for(let He=0;He<le;He++){const ze=new Date(Me.getTime());ze.setDate(Me.getDate()+He);const qt=hn(ze,"yyyy-MM-dd"),Qe=He%7;if((G[Qe]||"").toString().toLowerCase().includes("rest")&&!We.has(qt)){const Ke={date:qt,workouts:[{name:"Rest Day",description:"Take a well-deserved break and let your body recover.",duration:"0 min",difficulty:"beginner",muscleGroups:[]}],alternativeWorkouts:[],completed:!1,type:"rest"};Math.random()<1/1e6&&(Ke.isRickroll=!0),D=[...D,Ke],We.add(qt)}}}}}catch(G){console.warn("Failed to populate missing rest days from weeklyStructure:",G)}if(JSON.stringify(D)!==JSON.stringify(s.dailyWorkouts)){const G={...s,dailyWorkouts:D,totalDays:D.length};r(G);try{console.log("[WorkoutCalendar] Saving normalized plan to localStorage:",{totalDays:G.totalDays,dailyWorkoutsCount:G.dailyWorkouts.length}),Er(G)}catch(le){console.warn("Failed to save normalized plan locally:",le)}}}},[s,r]),!s||!n)return a.jsx("div",{className:"calendar-no-plan-container",children:a.jsxs("div",{className:"calendar-no-plan-content fade-in-bounce",children:[a.jsx("div",{className:"calendar-no-plan-icon-bg",children:a.jsx(gt,{size:48,color:"#fff"})}),a.jsx("h1",{className:"calendar-no-plan-title",children:"No Plan"}),a.jsx("h2",{className:"calendar-no-plan-message",children:"No Workout Plan Found"}),a.jsx("p",{className:"calendar-no-plan-desc",children:"Please complete the questionnaire first to generate your personalized workout plan."}),a.jsx("a",{className:"calendar-no-plan-btn",href:"/questionnaire",children:"Go to Questionnaire"})]})});const ot=bv(c),ht=wv(c),At=xv({start:ot,end:ht}),St=Array(ot.getDay()).fill(null),gn=Array((7-(ot.getDay()+At.length)%7)%7).fill(null),It=D=>{let G;if(typeof D=="string")if(D.includes("T"))G=new Date(D);else{const[le,ge,Me]=D.split("-").map(Number);G=new Date(le,ge-1,Me)}else G=D;if(isNaN(G.getTime()))throw new RangeError("Invalid time value");return hn(G,"yyyy-MM-dd")},Rt=D=>{const G=It(D.toISOString());return s.dailyWorkouts.find(ge=>ge.date===G)||null},_t=D=>{const G=hn(D,"yyyy-MM-dd");if(z){fe(ge=>ge.includes(G)?ge.filter(Me=>Me!==G):[...ge,G]);return}if(w){if(x===G||_e)return;const ge=new Date(D.getFullYear(),D.getMonth(),D.getDate()-1);ds(ge),O(!1),Ie(G);return}if(x===G||_e)return;if(Ce){nt(ge=>ge.includes(G)?ge.filter(Me=>Me!==G):[...ge,G]);return}const le=Rt(D);if(C&&le){ii(le);return}if(C&&!le){const ge=new Date(D.getFullYear(),D.getMonth(),D.getDate()-1);ds(ge);return}le&&(p(le),y(!0))},Yn=D=>{const G=s.dailyWorkouts.map(ge=>ge.date===D?{...ge,completed:!ge.completed}:ge),le={...s,dailyWorkouts:G};r(le)},rn=D=>{const G=new Date(c);D==="prev"?G.setMonth(G.getMonth()-1):G.setMonth(G.getMonth()+1),W(!0),d(G),window.setTimeout(()=>W(!1),2e3)},Bo=D=>{switch(D){case"strength":return"strength";case"cardio":return"cardio";case"flexibility":return"flexibility";case"rest":return"rest";case"mixed":return"mixed";default:return"mixed"}},Ar=s.dailyWorkouts.filter(D=>D.completed).length,Ir=s.dailyWorkouts.filter(D=>D.type!=="rest").length,cs=Ir>0?Ar/Ir*100:0,us=D=>{if(D.type==="rest")return"0 min";let G=0;return D.workouts.forEach(le=>{if(le.duration){const ge=le.duration.match(/(\d+)/);ge&&(G+=parseInt(ge[1]))}}),G>0?`${G} min`:"30 min"},ii=D=>{k({...D}),F(!0),b(!0)},Xn=()=>{if(!_||!s)return;const D=s.dailyWorkouts.map(le=>le.date===_.date?_:le),G={...s,dailyWorkouts:D};r(G),F(!1),b(!1),k(null)},Zn=()=>{F(!1),b(!1),k(null)},ds=D=>{if(!s)return;let G;D?G=new Date(D.getFullYear(),D.getMonth(),D.getDate()+1):G=new Date;const le=hn(G,"yyyy-MM-dd"),ge=s.dailyWorkouts.find(ze=>ze.date===le);if(ge){const ze={...ge,type:"rest",workouts:[{name:"Rest Day",description:"Take a well-deserved break and let your body recover.",duration:"0 min",difficulty:"beginner",muscleGroups:[]}],alternativeWorkouts:[]};er(ze);return}const Me={date:le,workouts:[{name:"Rest Day",description:"Take a well-deserved break and let your body recover.",duration:"0 min",difficulty:"beginner",muscleGroups:[]}],alternativeWorkouts:[],completed:!1,type:"rest"},We=[...s?.dailyWorkouts||[],Me];Math.random()<1/1e6&&(Me.isRickroll=!0);const He={...s,dailyWorkouts:We};r(He)},la=()=>{ae?(ds(new Date(ae)),N(""),B(!1)):B(!0)},ca=()=>{J?(ha(new Date(J),ye,xe),ee(""),L(!1)):L(!0)},ua=()=>{const D=Date.now();if(D-l.current<350){console.debug("[WorkoutCalendar] handleSelectToAddToggle ignored - rapid duplicate");return}l.current=D,console.debug("[WorkoutCalendar] handleSelectToAddToggle called",{addMode:z,showBatchAddPanel:K,selectedForAddLength:ue.length}),z?(console.debug("[WorkoutCalendar] exiting selection mode"),te(!1),fe([]),oe(!1),b(!0)):(te(!0),Te(!1),fe([]),oe(!1),b(!0))},da=()=>{if(console.debug("[WorkoutCalendar] handleConfirmSelection",{selectedForAddLength:ue.length}),ue.length===0){alert("Please select at least one date before confirming.");return}te(!1),oe(!0),b(!0)},ai=async()=>{if(!s||!n)return;if(ue.length===0){alert("Please select at least one date.");return}oe(!1),b(!1),te(!1),H([...ue]);const D=fn(),G=D?.answers||{},le=D?.questionsList||[];let ge=[...s.dailyWorkouts];for(const We of ue){if(ge.some(He=>He.date===We)){console.warn("Skipping existing date during batch add:",We);continue}try{const He=re&&re.length>0?re.join(","):"mixed",ze={...G,batchComments:ce},qt=ge.filter(rt=>rt.date!==We),Qe=await Pc(n,ze,le,We,He,qt,[]),Ke=((rt,Yt)=>{const Lr=(rt?.date||Yt||"").toString();let Mn=Lr;try{Lr.includes("T")&&(Mn=hn(new Date(Lr),"yyyy-MM-dd"))}catch{Mn=Yt}Mn=Yt;const Pe=Array.isArray(rt?.workouts)?rt.workouts:Array.isArray(rt?.exercises)?rt.exercises:[],sn=Array.isArray(rt?.alternativeWorkouts)?rt.alternativeWorkouts:Array.isArray(rt?.alternativeExercises)?rt.alternativeExercises:[];return{date:Mn,type:rt?.type||"mixed",workouts:Pe.map(De=>({name:De?.name||De?.exercise||"Exercise",description:De?.description||De?.instructions||"",difficulty:De?.difficulty||"beginner",duration:De?.duration||(De?.durationSeconds?`${De.durationSeconds} sec`:""),reps:De?.reps??"",muscleGroups:Array.isArray(De?.muscleGroups)?De.muscleGroups:De?.muscleGroups?[De.muscleGroups]:[],equipment:Array.isArray(De?.equipment)?De.equipment:De?.equipment?[De.equipment]:[],sets:typeof De?.sets=="number"?De.sets:void 0,rest:De?.rest||void 0})),alternativeWorkouts:sn.map(De=>({name:De?.name||De?.exercise||"Alt Exercise",description:De?.description||De?.instructions||"",difficulty:De?.difficulty||"beginner",duration:De?.duration||(De?.durationSeconds?`${De.durationSeconds} sec`:""),reps:De?.reps??"",muscleGroups:Array.isArray(De?.muscleGroups)?De.muscleGroups:De?.muscleGroups?[De.muscleGroups]:[],equipment:Array.isArray(De?.equipment)?De.equipment:De?.equipment?[De.equipment]:[],sets:typeof De?.sets=="number"?De.sets:void 0,rest:De?.rest||void 0})),completed:!!rt?.completed,totalTime:rt?.totalTime||""}})(Qe,We);ge=[...ge,Ke]}catch(He){console.error("Batch generate error for date",We,He)}}const Me={...s,dailyWorkouts:ge,totalDays:ge.length};r(Me);try{console.log("[WorkoutCalendar] Saving batch-generated plan to localStorage:",{totalDays:Me.totalDays,dailyWorkoutsCount:Me.dailyWorkouts.length}),Er(Me)}catch(We){console.warn("Failed to save batch-generated plan locally:",We)}H([]),fe([])},ha=async(D,G,le)=>{if(!s||!n)return;let ge,Me;if(D){if(ge=new Date(D.getFullYear(),D.getMonth(),D.getDate()+1),Me=hn(ge,"yyyy-MM-dd"),s.dailyWorkouts.find(rt=>rt.date===Me))return}else{const Ke=s.dailyWorkouts.length>0?new Date(Math.max(...s.dailyWorkouts.map(rt=>new Date(rt.date).getTime()))):new Date(s.startDate);ge=new Date(Ke.getTime()+1440*60*1e3),Me=hn(ge,"yyyy-MM-dd")}const We=[...n.preferences||[],...le?.muscleGroups||[],...le?.equipment||[],`Workout type: ${G||"mixed"}`,`Duration: ${le?.duration||"30 min"}`],He={...n,preferences:We},ze=await Hi(He,{},[]),qt={date:Me,type:G||"mixed",workouts:ze.dailyWorkouts[0]?.workouts||[],alternativeWorkouts:[],completed:!1},Qe=[...s.dailyWorkouts,qt],Ln={...s,dailyWorkouts:Qe,totalDays:Qe.length};r(Ln)},er=D=>{if(!s)return;const G=s.dailyWorkouts.map(ge=>ge.date===D.date?D:ge),le={...s,dailyWorkouts:G};r(le)},oi=async D=>{if(!s||!n)return;y(!1),S(D.date),Je(!0);const G=fn(),le=G?.answers||{},ge=G?.questionsList||[];try{const Me=s.dailyWorkouts.filter(Ke=>Ke.date!==D.date),We=[...D.workouts,...D.alternativeWorkouts];console.log("[AI] Sending generateWorkoutForDay request:",{username:n?.username,date:D.date,type:D.type,othersCount:Me.length,currentDayListLength:We.length});const He=await Pc(n,le,ge,D.date,D.type,Me,We);console.log("[AI] Received response for generateWorkoutForDay:",He);const qt=(Ke=>{const rt=(Ke?.date||D.date||"").toString();let Yt=rt;try{rt.includes("T")&&(Yt=hn(new Date(rt),"yyyy-MM-dd"))}catch{Yt=D.date}Yt=D.date;const Lr=Array.isArray(Ke?.workouts)?Ke.workouts:Array.isArray(Ke?.exercises)?Ke.exercises:[],Mn=Array.isArray(Ke?.alternativeWorkouts)?Ke.alternativeWorkouts:Array.isArray(Ke?.alternativeExercises)?Ke.alternativeExercises:[];return{date:Yt,type:Ke?.type||D.type||"mixed",workouts:Lr.map(Pe=>({name:Pe?.name||Pe?.exercise||"Exercise",description:Pe?.description||Pe?.instructions||"",difficulty:Pe?.difficulty||"beginner",duration:Pe?.duration||(Pe?.durationSeconds?`${Pe.durationSeconds} sec`:""),reps:Pe?.reps??"",muscleGroups:Array.isArray(Pe?.muscleGroups)?Pe.muscleGroups:Pe?.muscleGroups?[Pe.muscleGroups]:[],equipment:Array.isArray(Pe?.equipment)?Pe.equipment:Pe?.equipment?[Pe.equipment]:[],sets:typeof Pe?.sets=="number"?Pe.sets:void 0,rest:Pe?.rest||void 0})),alternativeWorkouts:Mn.map(Pe=>({name:Pe?.name||Pe?.exercise||"Alt Exercise",description:Pe?.description||Pe?.instructions||"",difficulty:Pe?.difficulty||"beginner",duration:Pe?.duration||(Pe?.durationSeconds?`${Pe.durationSeconds} sec`:""),reps:Pe?.reps??"",muscleGroups:Array.isArray(Pe?.muscleGroups)?Pe.muscleGroups:Pe?.muscleGroups?[Pe.muscleGroups]:[],equipment:Array.isArray(Pe?.equipment)?Pe.equipment:Pe?.equipment?[Pe.equipment]:[],sets:typeof Pe?.sets=="number"?Pe.sets:void 0,rest:Pe?.rest||void 0})),completed:!!Ke?.completed,totalTime:Ke?.totalTime||""}})(He);console.log("[REGenerate] Normalized regenerated day:",qt);const Qe=s.dailyWorkouts.map(Ke=>Ke.date===D.date?qt:Ke),Ln={...s,dailyWorkouts:Qe};r(Ln);try{console.log("[WorkoutCalendar] Saving regenerated plan to localStorage:",{dailyWorkoutsCount:Ln.dailyWorkouts.length}),Er(Ln),console.log("[REGenerate] saved regenerated plan to localStorage")}catch(Ke){console.warn("Failed to save regenerated plan locally:",Ke)}p(qt),y(!0),Ie(qt.date),window.setTimeout(()=>Ie(null),2e3),S(null),Je(!1)}catch(Me){console.error("Error regenerating single-day workout with AI:",Me),S(null),Je(!1)}},Rr=async()=>{if(!s||!n||!J)return;S(J);const D=fn(),G=D?.answers||{},le=D?.questionsList||[];try{const ge=s.dailyWorkouts.filter(ze=>ze.date!==J);console.log("[AI] Sending generateWorkoutForDay request:",{username:n?.username,date:J,type:ye,othersCount:ge.length});const Me=await Pc(n,G,le,J,ye,ge,[]);console.log("[AI] Received response for generateWorkoutForDay:",Me);const We=[...s.dailyWorkouts,Me],He={...s,dailyWorkouts:We};r(He);try{Er(He)}catch(ze){console.warn("Failed to save generated day locally:",ze)}console.log("[Calendar] Updated plan after generation:",{totalDays:He.totalDays||He.dailyWorkouts.length,dailyWorkoutsCount:He.dailyWorkouts.length,addedDate:J,addedDay:Me}),S(null)}catch(ge){console.error("Error generating workout:",ge),S(null)}},Wo=(D,G)=>{de(G),Ae(!0);try{D.dataTransfer.effectAllowed="move"}catch{}},Dr=(D,G)=>{D.preventDefault();try{D.dataTransfer.dropEffect="move"}catch{}he(It(G.toISOString()))},hs=()=>{he(null)},fs=()=>{Ae(!1),de(null),he(null)},li=(D,G)=>{if(D.preventDefault(),!ie||!s){Ae(!1);return}const le=It(G.toISOString()),ge=ie.date;if(le===ge){de(null),he(null),Ae(!1);return}const Me=s.dailyWorkouts.find(ze=>ze.date===le);let We=[...s.dailyWorkouts];Me?We=We.map(ze=>ze.date===ge?{...Me,date:ge}:ze.date===le?{...ie,date:le}:ze):We=We.map(ze=>ze.date===ge?{...ze,date:le}:ze),W(!0),d(c);const He={...s,dailyWorkouts:We};r(He),window.setTimeout(()=>W(!1),2e3),de(null),he(null),Ae(!1)},tr=(D,G)=>{Se(le=>({...le,[D]:G}))},$o=async()=>{if(!s)return;const D=s.dailyWorkouts.map(le=>le.date);nt(D);const G={...s,dailyWorkouts:[]};try{localStorage.setItem("fitbuddyai_no_auto_restore","1"),sessionStorage.setItem("fitbuddyai_no_auto_restore","1"),setTimeout(()=>{try{localStorage.removeItem("fitbuddyai_no_auto_restore")}catch{}try{sessionStorage.removeItem("fitbuddyai_no_auto_restore")}catch{}},3e5)}catch(le){console.warn("Failed to set no-auto-restore guard:",le)}r(G);try{Er(G)}catch(le){console.warn("Failed to persist cleared plan:",le)}try{const{loadUserData:le}=await $e(async()=>{const{loadUserData:We}=await Promise.resolve().then(()=>zt);return{loadUserData:We}},void 0),Me=le()?.id;Me&&na(Me).catch(()=>{})}catch{}b(!1),Te(!1),alert("Calendar has been cleared!")},zo=()=>{if(!s)return;if(Re.length===0){alert("Please select at least one date to delete.");return}const D=s.dailyWorkouts.filter(G=>!Re.includes(G.date));r({...s,dailyWorkouts:D}),nt([]),Te(!1),b(!1)},Dn=()=>{nt([]),Te(!1)};return a.jsxs("div",{className:"calendar-page",children:[a.jsxs("div",{className:"calendar-container",children:[a.jsxs("div",{className:"calendar-header",children:[a.jsxs("div",{className:"user-info",children:[a.jsxs("h1",{children:["Welcome back, ",n?.username?.trim()||"User","!"]}),a.jsx("p",{children:s.description})]}),a.jsxs("div",{className:"progress-stats",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx(pn,{size:24}),a.jsxs("div",{className:"stat-content",children:[a.jsx("span",{className:"stat-number",children:Ar}),a.jsx("span",{className:"stat-label",children:"Completed"})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx(Ks,{size:24}),a.jsxs("div",{className:"stat-content",children:[a.jsx("span",{className:"stat-number",children:Ir-Ar}),a.jsx("span",{className:"stat-label",children:"Remaining"})]})]}),a.jsx("div",{className:"progress-circle",children:a.jsxs("svg",{viewBox:"0 0 36 36",className:"circular-chart",children:[a.jsx("path",{className:"circle-bg",d:`M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831`}),a.jsx("path",{className:"circle",strokeDasharray:`${cs}, 100`,d:`M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831`}),a.jsxs("text",{x:"18",y:"20.35",className:"percentage",children:[Math.round(cs),"%"]})]})})]})]}),a.jsxs("div",{className:"calendar-nav",children:[a.jsx("button",{className:"nav-button",onClick:()=>rn("prev"),onDragEnter:()=>{const D=Date.now();D-o.current>=1e3&&(rn("prev"),o.current=D)},"aria-label":"Previous month",children:a.jsx(Hc,{size:20})}),a.jsx("h2",{className:"month-year",children:hn(c,"MMMM yyyy")}),a.jsx("button",{className:"nav-button",onClick:()=>rn("next"),onDragEnter:()=>{const D=Date.now();D-o.current>=1e3&&(rn("next"),o.current=D)},"aria-label":"Next month",children:a.jsx(Fy,{size:20})})]}),a.jsxs("div",{className:"calendar-grid",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(D=>a.jsx("div",{className:"day-header",children:D},D)),St.map((D,G)=>a.jsx("div",{className:"calendar-day empty"},`empty-start-${G}`)),At.map(D=>{const G=Rt(D),le=hn(D,"yyyy-MM-dd"),ge=gv(D,new Date),Me=se===le,We=x===le,He=Ze===le;return a.jsxs("div",{className:`calendar-day ${ge?"today":""} ${G?"has-workout":""} ${Me?"drag-over":""}`+(Ce?" delete-active":"")+(z?" add-active":"")+(We?" loading":"")+(He?" just-updated":"")+(ue.includes(le)?" selected":"")+(w?" rest-pending":"")+(Re.includes(le)?" delete-selected":""),onClick:()=>_t(D),onDragOver:ze=>Dr(ze,D),onDragLeave:hs,onDrop:ze=>li(ze,D),children:[a.jsx("span",{className:"day-number",children:hn(D,"d")}),G?a.jsxs("div",{className:`workout-indicator ${Bo(G.type)} ${G.completed?"completed":""}`,draggable:!C,onDragStart:ze=>Wo(ze,G),onDragEnd:fs,children:[(We||q.includes(le))&&a.jsx("div",{className:"loader-overlay inside-indicator",children:a.jsx("div",{className:"loading-dumbbell small",children:a.jsx(gt,{size:28,color:"#fff"})})}),a.jsxs("div",{className:"workout-content",children:[a.jsx("span",{className:"workout-type",children:G.type==="rest"?"Rest":G.type==="strength"?"Strength":G.type==="cardio"?"Cardio":G.type==="flexibility"?"Flexibility":"Mixed"}),a.jsx("span",{className:"workout-duration",children:G.totalTime?` ${G.totalTime}`:` ${us(G)}`}),G.completed&&a.jsx(qc,{size:14,className:"check-icon"}),!G.completed&&G.type!=="rest"&&a.jsx(zy,{size:14,className:"play-icon"})]})]}):q.includes(le)?a.jsx("div",{className:"loader-overlay inside-indicator",children:a.jsx("div",{className:"loading-dumbbell small",children:a.jsx(gt,{size:28,color:"#fff"})})}):null]},D.toISOString())}),gn.map((D,G)=>a.jsx("div",{className:"calendar-day empty"},`empty-end-${G}`))]}),a.jsxs("div",{className:"calendar-legend",children:[a.jsx("h3",{children:"Workout Types"}),a.jsxs("div",{className:"legend-items",children:[a.jsxs("div",{className:"legend-item",children:[a.jsx("div",{className:"legend-color strength"}),a.jsx("span",{children:"Strength Training"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("div",{className:"legend-color cardio"}),a.jsx("span",{children:"Cardio"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("div",{className:"legend-color flexibility"}),a.jsx("span",{children:"Flexibility"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("div",{className:"legend-color mixed"}),a.jsx("span",{children:"Mixed"})]}),a.jsxs("div",{className:"legend-item",children:[a.jsx("div",{className:"legend-color rest"}),a.jsx("span",{children:"Rest Day"})]})]})]})]}),"      ",g&&m&&a.jsx(Pw,{workout:m,onClose:()=>y(!1),onComplete:()=>Yn(m.date),onRegenerateWorkout:()=>oi(m),isRegenerating:Be,onUpdateWorkout:er}),a.jsx("button",{className:`edit-fab ${C?"active":""}`,onClick:()=>b(!C),"aria-label":"Edit workouts",children:C?a.jsx(Zi,{size:24}):a.jsx(Gc,{size:24})}),a.jsxs("div",{className:`edit-menu ${C?"open":""}`,children:[a.jsxs("div",{className:"edit-menu-header",children:[a.jsx("h3",{children:"Workout Editor"}),a.jsx("p",{children:"Customize your workout plan"})]}),a.jsxs("div",{className:"edit-menu-content",children:["          ",a.jsxs("div",{className:"edit-section",children:[a.jsxs("h4",{children:[a.jsx(Gy,{size:16})," Quick Actions"]}),"            ",a.jsxs("div",{className:"edit-actions",children:[a.jsxs("button",{className:"edit-action-btn",onClick:ua,children:[a.jsx(qy,{size:16}),z?"Selecting...":"Select to Add"]}),z&&a.jsxs("button",{className:"edit-action-btn confirm-btn",onClick:da,children:[a.jsx(Vc,{size:16})," Confirm"]}),K&&a.jsxs("div",{className:"batch-add-panel",children:[a.jsxs("h4",{children:["Batch Add Workouts (",ue.length," selected)"]}),a.jsx("label",{children:"Choose workout types (multi-select):"}),a.jsx("div",{className:"batch-types",children:["strength","cardio","flexibility","mixed","rest"].map(D=>a.jsxs("label",{className:`batch-type ${re.includes(D)?"selected":""}`,children:[a.jsx("input",{type:"checkbox",checked:re.includes(D),onChange:G=>{V(le=>G.target.checked?[...le,D]:le.filter(ge=>ge!==D))}}),D]},D))}),a.jsx("label",{children:"Comments (optional):"}),a.jsx("textarea",{"aria-label":"Batch comments",value:ce,onChange:D=>pe(D.target.value)}),a.jsxs("div",{className:"batch-actions",children:[a.jsx("button",{className:"save-btn",onClick:ai,disabled:ue.length===0,children:"Generate"}),a.jsx("button",{className:"cancel-btn",onClick:()=>{oe(!1),fe([])},children:"Cancel"})]})]}),a.jsxs("button",{className:"edit-action-btn",onClick:()=>{O(!0),b(!1),B(!1)},title:"Click a calendar day to assign a Rest Day",children:[a.jsx(Nn,{size:16}),w?"Click a day to add Rest":"Add Rest Day"]}),a.jsxs("button",{className:"edit-action-btn",onClick:()=>{Te(D=>{const G=!D;return G&&te(!1),G})},children:[a.jsx(_o,{size:16})," ",Ce?"Stop Delete":"Delete Days"]}),Ce&&a.jsxs("div",{className:"delete-action-row",children:[a.jsxs("button",{className:"confirm-btn",onClick:zo,disabled:Re.length===0,children:[a.jsx(_o,{size:16})," Delete ",Re.length>0?`(${Re.length})`:""]}),a.jsx("button",{className:"cancel-btn",onClick:Dn,children:"Cancel"})]}),a.jsxs("button",{className:"edit-action-btn clear-calendar-btn",onClick:$o,children:[a.jsx(_o,{size:16}),"Clear Calendar"]})]}),U&&a.jsxs("div",{className:"date-picker-section",children:[a.jsx("label",{htmlFor:"rest-date",children:"Select date for rest day:"}),a.jsx("input",{id:"rest-date",type:"date",value:ae,onChange:D=>N(D.target.value),className:"date-input"}),a.jsxs("div",{className:"date-picker-actions",children:[a.jsx("button",{className:"save-btn",onClick:la,disabled:!ae,children:"Add Rest Day"}),a.jsx("button",{className:"cancel-btn",onClick:()=>{B(!1),N("")},children:"Cancel"})]})]}),X&&a.jsxs("div",{className:"date-picker-section",children:[a.jsx("label",{htmlFor:"workout-date",children:"Select date for workout day:"}),a.jsx("input",{id:"workout-date",type:"date",value:J,onChange:D=>ee(D.target.value),className:"date-input"}),a.jsx("label",{htmlFor:"workout-type",children:"Select workout type:"}),a.jsxs("select",{id:"workout-type",value:ye,onChange:D=>je(D.target.value),children:[a.jsx("option",{value:"strength",children:"Strength"}),a.jsx("option",{value:"cardio",children:"Cardio"}),a.jsx("option",{value:"flexibility",children:"Flexibility"}),a.jsx("option",{value:"mixed",children:"Mixed"})]}),a.jsx("label",{htmlFor:"workout-duration",children:"Duration:"}),a.jsx("input",{id:"workout-duration",type:"text",value:xe.duration,onChange:D=>tr("duration",D.target.value)}),a.jsx("label",{htmlFor:"muscle-groups",children:"Muscle Groups:"}),a.jsx("input",{id:"muscle-groups",type:"text",placeholder:"e.g., Legs, Arms",onChange:D=>tr("muscleGroups",D.target.value.split(",").map(G=>G.trim()))}),a.jsx("label",{htmlFor:"equipment",children:"Equipment:"}),a.jsx("input",{id:"equipment",type:"text",placeholder:"e.g., Dumbbells, Mat",onChange:D=>tr("equipment",D.target.value.split(",").map(G=>G.trim()))}),a.jsxs("div",{className:"date-picker-actions",children:[a.jsx("button",{className:"save-btn",onClick:ca,disabled:!J,children:"Add Workout Day"}),a.jsx("button",{className:"cancel-btn",onClick:()=>{L(!1),ee("")},children:"Cancel"})]}),J&&s?.dailyWorkouts.find(D=>D.date===J)&&a.jsx("div",{className:"error-message",children:"This date already has a workout. Please select a different date."})]})]}),$&&_&&a.jsxs("div",{className:"edit-section",children:[a.jsxs("h4",{children:[a.jsx(Gc,{size:16})," Editing ",(()=>{const[D,G,le]=_.date.split("-").map(Number);return hn(new Date(D,G-1,le),"MMM d")})()]}),a.jsxs("div",{className:"workout-edit-form",children:[a.jsxs("label",{children:["Workout Type:",a.jsxs("select",{value:_.type,onChange:D=>k({..._,type:D.target.value}),children:[a.jsx("option",{value:"strength",children:"Strength"}),a.jsx("option",{value:"cardio",children:"Cardio"}),a.jsx("option",{value:"flexibility",children:"Flexibility"}),a.jsx("option",{value:"mixed",children:"Mixed"}),a.jsx("option",{value:"rest",children:"Rest"})]})]}),a.jsxs("div",{className:"edit-actions",children:[a.jsxs("button",{className:"save-btn",onClick:Xn,children:[a.jsx(Vc,{size:16}),"Save Changes"]}),a.jsxs("button",{className:"cancel-btn",onClick:Zn,children:[a.jsx(Zi,{size:16}),"Cancel"]})]})]})]}),a.jsxs("div",{className:"edit-section",children:[a.jsx("h4",{children:"Tips"}),a.jsxs("ul",{className:"edit-tips",children:[a.jsx("li",{children:"Click on any day to view and edit workouts"}),a.jsx("li",{children:"Use quick actions to add new workout or rest days"}),a.jsx("li",{children:"Changes are saved automatically to your plan"})]})]})]})]}),C&&a.jsx("div",{className:"edit-menu-overlay",onClick:()=>b(!1)}),a.jsx("div",{className:"edit-menu-popup-root","aria-hidden":!C,children:C&&z&&a.jsxs("div",{className:"workout-popup",children:[a.jsx("h3",{children:"Workout Details"}),a.jsx("label",{htmlFor:"workout-type",children:"Workout Type:"}),a.jsxs("select",{id:"workout-type",value:ye,onChange:D=>je(D.target.value),children:[a.jsx("option",{value:"strength",children:"Strength"}),a.jsx("option",{value:"cardio",children:"Cardio"}),a.jsx("option",{value:"flexibility",children:"Flexibility"}),a.jsx("option",{value:"mixed",children:"Mixed"})]}),a.jsx("label",{htmlFor:"workout-duration",children:"Duration:"}),a.jsx("input",{id:"workout-duration",type:"text",value:xe.duration,onChange:D=>tr("duration",D.target.value)}),a.jsx("label",{htmlFor:"muscle-groups",children:"Muscle Groups:"}),a.jsx("input",{id:"muscle-groups",type:"text",placeholder:"e.g., Legs, Arms",onChange:D=>tr("muscleGroups",D.target.value.split(",").map(G=>G.trim()))}),a.jsx("label",{htmlFor:"equipment",children:"Equipment:"}),a.jsx("input",{id:"equipment",type:"text",placeholder:"e.g., Dumbbells, Mat",onChange:D=>tr("equipment",D.target.value.split(",").map(G=>G.trim()))}),a.jsxs("div",{className:"workout-popup-actions",children:[a.jsx("button",{className:"save-btn",onClick:Rr,children:"Generate Workout"}),a.jsx("button",{className:"cancel-btn",onClick:()=>te(!1),children:"Cancel"})]})]})})]})},dp="fitbuddyai_tos_accepted_v1";function aa(){try{const s=localStorage.getItem(dp);return s?JSON.parse(s):{}}catch{return{}}}function gu(s){try{localStorage.setItem(dp,JSON.stringify(s))}catch{}}function Mo(s){try{const n=aa(),r=s?String(s):"__anon__",o=n[r],l=n.__anon__;return!!(o&&(o.tos||o.acceptedAt)||l&&(l.tos||l.acceptedAt))}catch{return!1}}function Uo(s){try{const n=aa(),r=s?String(s):"__anon__",o=n[r],l=n.__anon__;return!!(o&&o.privacy||l&&l.privacy)}catch{return!1}}function ts(s){return Mo(s)&&Uo(s)}function hp(s){try{const n=aa(),r=s?String(s):"__anon__",o=n[r]||{};o.tos={acceptedAt:new Date().toISOString()},n[r]=o,gu(n);try{window.dispatchEvent(new CustomEvent("fitbuddyai-tos-accepted",{detail:{userId:r}}))}catch{}return!0}catch{return!1}}function fp(s){try{const n=aa(),r=s?String(s):"__anon__",o=n[r]||{};o.privacy={acceptedAt:new Date().toISOString()},n[r]=o,gu(n);try{window.dispatchEvent(new CustomEvent("fitbuddyai-privacy-accepted",{detail:{userId:r}}))}catch{}return!0}catch{return!1}}function Aw(s){try{if(!s)return!1;const n=aa(),r=n.__anon__;if(!r)return!1;const o=String(s),l=n[o]||{};let c=!1;if(r.tos&&!l.tos&&(l.tos=r.tos,c=!0),r.privacy&&!l.privacy&&(l.privacy=r.privacy,c=!0),c){if(n[o]=l,delete n.__anon__,gu(n),l.tos)try{window.dispatchEvent(new CustomEvent("fitbuddyai-tos-accepted",{detail:{userId:o}}))}catch{}if(l.privacy)try{window.dispatchEvent(new CustomEvent("fitbuddyai-privacy-accepted",{detail:{userId:o}}))}catch{}}return c}catch{return!1}}function xf({userData:s,children:n}){const[r,o]=E.useState(!1),[l,c]=E.useState(!1),[d,m]=E.useState(!1);if(E.useEffect(()=>{(()=>{c(Mo(s?.id)),m(Uo(s?.id)),o(!ts(s?.id))})();const y=()=>{c(!0),o(!ts(s?.id))},x=()=>{m(!0),o(!ts(s?.id))};return window.addEventListener("fitbuddyai-tos-accepted",y),window.addEventListener("fitbuddyai-privacy-accepted",x),()=>{window.removeEventListener("fitbuddyai-tos-accepted",y),window.removeEventListener("fitbuddyai-privacy-accepted",x)}},[s?.id]),!r)return a.jsx(a.Fragment,{children:n});const p=()=>{try{hp(s?.id)}catch{}try{fp(s?.id)}catch{}if(s?.id)try{$e(()=>Promise.resolve().then(()=>Or),void 0).then(g=>g.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s.id,accepted_terms:!0,accepted_privacy:!0})})).then(g=>{fetch("/api/userdata/save",g).catch(()=>{})}).catch(()=>{})}catch{}o(!1)};return a.jsxs("div",{className:"agreement-guard-wrapper","aria-hidden":"false",children:[a.jsx("div",{className:"agreement-guard-underlay","aria-hidden":"true",children:n}),a.jsx("div",{className:"agreement-guard-backdrop",role:"dialog","aria-modal":"true","aria-label":"Terms and Privacy agreement",children:a.jsxs("div",{className:"agreement-guard-modal",role:"document",children:[a.jsx("h2",{className:"agreement-guard-title",children:"Before you continue"}),a.jsxs("p",{className:"agreement-guard-body",children:["To continue, please agree to our ",a.jsx("a",{className:l?"agreement-accepted":"",href:"/terms",target:"_blank",rel:"noopener noreferrer",children:"Terms of Service"})," and ",a.jsx("a",{className:d?"agreement-accepted":"",href:"/privacy",target:"_blank",rel:"noopener noreferrer",children:"Privacy Policy"}),". Both will open in a new tab if you want to review them."]}),a.jsx("div",{className:"agreement-guard-actions",children:a.jsx("button",{className:"btn btn-agree",onClick:p,children:"I have read and agree"})})]})})]})}const Iw=({profileVersion:s,userData:n,theme:r,onToggleTheme:o})=>{const l=Rn(),c=os(),[d,m]=nn.useState(null),[p,g]=nn.useState(null);nn.useEffect(()=>{const b=()=>{if(n){m(n);return}try{const{loadUserData:$}=require("../services/localStorage"),F=$();m(F||null)}catch{m(null)}};b(),window.addEventListener("storage",b);const _=$=>{try{const F=$?.detail?.preview;F?.type==="avatar"&&F?.image&&(g(F.image),setTimeout(()=>g(null),4e3))}catch{}};window.addEventListener("shop-try-on",_),b();const k=setInterval(()=>{typeof document<"u"&&document.hidden||b()},15e3);return()=>{window.removeEventListener("storage",b),window.removeEventListener("shop-try-on",_),clearInterval(k)}},[c.pathname,s,n]);const y=nn.useMemo(()=>{try{const b=d||(()=>{try{const{loadUserData:k}=require("../services/localStorage");return k()||null}catch{return null}})();if(!b)return!1;if(b.role&&String(b.role).toLowerCase()==="admin")return!0;const _=b?.token||b?.access_token||null;if(_&&typeof _=="string")try{const k=_.split(".");if(k.length>=2){const $=JSON.parse(atob(k[1].replace(/-/g,"+").replace(/_/g,"/"))),F=$?.roles||$?.role||$?.roles?.join?.(",");if(Array.isArray(F)&&F.includes("admin")||String(F).toLowerCase()==="admin")return!0}}catch{}return String(b.username||"").toLowerCase()==="admin"}catch{return!1}},[d]),x=nn.useMemo(()=>{try{return d?!!(d.id||d.sub):!1}catch{return!1}},[d]),S=()=>{switch(c.pathname){case"/":return"Welcome to FitBuddyAI";case"/questionnaire":return"Fitness Assessment";case"/calendar":return"Your Workout Plan";case"/profile":return"Your Profile";case"/signin":return"Sign In";case"/signup":return"Sign Up";case"/chat":return"Chat with Buddy";default:return"FitBuddyAI"}},C=b=>c.pathname===b;return a.jsx("header",{className:"app-header",children:a.jsxs("div",{className:"header-container",children:[a.jsxs("div",{className:"page-title centered-title",children:[a.jsx("h2",{children:S()}),d&&(()=>{const b=d.username?.trim(),_=d.username?.trim(),k=b||_||"User";return a.jsxs("p",{className:"user-greeting",children:["Hello, ",k,"! "]})})()]}),a.jsxs("nav",{className:"header-nav",children:[a.jsxs("button",{className:`nav-button ${C("/")?"active":""}`,onClick:()=>l("/?intro=0"),"aria-label":"Home",children:[a.jsx(Wy,{size:20,className:"home-icon"}),a.jsx("span",{children:"Home"})]}),a.jsxs("button",{className:`nav-button ${C("/questionnaire")?"active":""}`,onClick:()=>{fn()?.completed?l("/questionnaire?edit=true"):l("/questionnaire")},"aria-label":"Questionnaire",children:[a.jsx(Xs,{size:20}),a.jsx("span",{children:"Assessment"})]}),a.jsxs("button",{className:`nav-button ${C("/calendar")?"active":""}`,onClick:()=>l("/calendar"),"aria-label":"Workout Calendar",disabled:!x,children:[a.jsx(Nn,{size:20}),a.jsx("span",{children:"Calendar"})]}),a.jsxs("button",{className:`nav-button ${C("/chat")?"active":""}`,onClick:()=>{try{window.dispatchEvent(new CustomEvent("fitbuddyai-open-chat"))}catch{}l("/chat")},"aria-label":"Chat with Buddy",children:[a.jsx("span",{className:"sparkles-mobile-only",children:a.jsx(Kn,{size:20})}),a.jsx("span",{children:"Chat"})]}),a.jsxs("button",{className:`nav-button ${C("/shop")?"active":""}`,onClick:()=>l("/shop"),"aria-label":"Shop",children:[a.jsx(Vy,{size:20}),a.jsx("span",{children:"Shop"})]}),a.jsxs("button",{className:"nav-button theme-toggle",onClick:o,"aria-label":"Toggle theme",children:[r==="theme-dark"?a.jsx(Jy,{size:20}):a.jsx($y,{size:20}),a.jsx("span",{children:r==="theme-dark"?"Light":"Dark"})]}),y&&a.jsxs("button",{className:`nav-button ${C("/admin")?"active":""}`,onClick:()=>l("/admin"),"aria-label":"Admin",children:[a.jsx("span",{className:"flame-mobile-only",children:a.jsx(df,{size:20})}),a.jsx("span",{children:"Admin"})]}),x&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"header-counters",children:[a.jsxs("div",{className:"header-counter streak",children:[a.jsx(df,{size:20,color:"#ffb347",style:{marginRight:4}}),a.jsx("span",{className:"counter-value",children:d?.streak??0})]}),a.jsxs("div",{className:"header-counter energy",children:[a.jsx(Kn,{size:20,color:"#1e90cb",style:{marginRight:4}}),a.jsx("span",{className:"counter-value",children:d?.energy??0})]})]})}),a.jsxs("div",{className:"profile-section",children:[a.jsx("img",{src:p||(d&&d.avatar&&d.avatar.trim()?d.avatar:"/images/fitbuddy_head.png"),alt:"Profile",className:"profile-image",onClick:()=>l(x?"/profile":"/signin")}),a.jsxs("div",{className:"dropdown",children:[a.jsx("button",{className:"dropdown-button",onClick:()=>l(x?"/profile":"/signin"),children:x?d.username&&d.username.trim()||"User":"Sign In"}),a.jsx("div",{className:"dropdown-content",children:x?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>l("/profile"),children:" Profile"}),a.jsx("button",{onClick:()=>l("/profile/settings"),children:"Settings"}),a.jsx("button",{onClick:()=>l("/profile/friends"),children:"Friends"}),a.jsx("button",{onClick:()=>l("/profile/achievements"),children:"Achievements"}),a.jsx("button",{onClick:()=>{(async()=>{try{localStorage.setItem("fitbuddyai_no_auto_restore","1")}catch{}try{sessionStorage.setItem("fitbuddyai_no_auto_restore","1")}catch{}try{const{loadUserData:b}=await $e(async()=>{const{loadUserData:$}=await Promise.resolve().then(()=>zt);return{loadUserData:$}},void 0),_=b(),k=_?.id||_?.sub||_?.data?.id||null;if(k){const $=(async()=>{try{await hu(String(k))}catch{}})(),F=new Promise(U=>setTimeout(U,2e3));await Promise.race([$,F])}}catch{}try{ri()}catch{}try{ni()}catch{}try{sa()}catch{}window.dispatchEvent(new Event("fitbuddyai-logout")),l("/signin")})()},children:"Sign Out"})]}):a.jsx("button",{onClick:()=>l("/signin"),children:"Sign In"})})]})]})]})]})})},Rw=()=>a.jsx("div",{className:"loading-screen",children:a.jsxs("div",{className:"loading-container fade-in-bounce",children:[a.jsx("div",{className:"loading-dumbbell",children:a.jsx(gt,{size:40,color:"#fff"})}),a.jsxs("div",{className:"loading-icons",children:[a.jsxs("div",{className:"loading-icon-pill",children:[a.jsx(pn,{size:18}),a.jsx("span",{children:"Goals"})]}),a.jsxs("div",{className:"loading-icon-pill",children:[a.jsx(Nn,{size:18}),a.jsx("span",{children:"Schedule"})]}),a.jsxs("div",{className:"loading-icon-pill",children:[a.jsx(ns,{size:18}),a.jsx("span",{children:"Energy"})]}),a.jsxs("div",{className:"loading-icon-pill",children:[a.jsx(gt,{size:18}),a.jsx("span",{children:"Strength"})]})]}),a.jsx("h2",{className:"loading-title",children:"Hang tight!"}),a.jsx("p",{className:"loading-desc",children:"Your personalized plan is on its way..."}),a.jsx("p",{className:"ai-disclaimer",children:"Disclaimer: This plan is AI-generated and may not be perfect for everyone. Check important info."})]})}),Dw=s=>{let n;return s?n=s:typeof fetch>"u"?n=(...r)=>$e(async()=>{const{default:o}=await Promise.resolve().then(()=>si);return{default:o}},void 0).then(({default:o})=>o(...r)):n=fetch,(...r)=>n(...r)};class yu extends Error{constructor(n,r="FunctionsError",o){super(n),this.name=r,this.context=o}}class Lw extends yu{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class bf extends yu{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class kf extends yu{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Kc;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Kc||(Kc={}));var Mw=function(s,n,r,o){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function m(y){try{g(o.next(y))}catch(x){d(x)}}function p(y){try{g(o.throw(y))}catch(x){d(x)}}function g(y){y.done?c(y.value):l(y.value).then(m,p)}g((o=o.apply(s,n||[])).next())})};class Uw{constructor(n,{headers:r={},customFetch:o,region:l=Kc.Any}={}){this.url=n,this.headers=r,this.region=l,this.fetch=Dw(o)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,r={}){var o;return Mw(this,void 0,void 0,function*(){try{const{headers:l,method:c,body:d}=r;let m={},{region:p}=r;p||(p=this.region);const g=new URL(`${this.url}/${n}`);p&&p!=="any"&&(m["x-region"]=p,g.searchParams.set("forceFunctionRegion",p));let y;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",y=d):typeof d=="string"?(m["Content-Type"]="text/plain",y=d):typeof FormData<"u"&&d instanceof FormData?y=d:(m["Content-Type"]="application/json",y=JSON.stringify(d)));const x=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:y}).catch(_=>{throw new Lw(_)}),S=x.headers.get("x-relay-error");if(S&&S==="true")throw new bf(x);if(!x.ok)throw new kf(x);let C=((o=x.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),b;return C==="application/json"?b=yield x.json():C==="application/octet-stream"?b=yield x.blob():C==="text/event-stream"?b=x:C==="multipart/form-data"?b=yield x.formData():b=yield x.text(),{data:b,error:null,response:x}}catch(l){return{data:null,error:l,response:l instanceof kf||l instanceof bf?l.context:void 0}}})}}var Ct={},Ms={},Us={},Fs={},Bs={},Ws={},Fw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ei=Fw();const Bw=ei.fetch,pp=ei.fetch.bind(ei),mp=ei.Headers,Ww=ei.Request,$w=ei.Response,si=Object.freeze(Object.defineProperty({__proto__:null,Headers:mp,Request:Ww,Response:$w,default:pp,fetch:Bw},Symbol.toStringTag,{value:"Module"})),zw=kg(si);var vo={},Sf;function gp(){if(Sf)return vo;Sf=1,Object.defineProperty(vo,"__esModule",{value:!0});class s extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return vo.default=s,vo}var _f;function yp(){if(_f)return Ws;_f=1;var s=Ws&&Ws.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ws,"__esModule",{value:!0});const n=s(zw),r=s(gp());class o{constructor(c){var d,m;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(d=c.shouldThrowOnError)!==null&&d!==void 0?d:!1,this.signal=c.signal,this.isMaybeSingle=(m=c.isMaybeSingle)!==null&&m!==void 0?m:!1,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,d){return this.headers=new Headers(this.headers),this.headers.set(c,d),this}then(c,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const m=this.fetch;let p=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var y,x,S,C;let b=null,_=null,k=null,$=g.status,F=g.statusText;if(g.ok){if(this.method!=="HEAD"){const L=await g.text();L===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?_=L:_=JSON.parse(L))}const B=(x=this.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),X=(S=g.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");B&&X&&X.length>1&&(k=parseInt(X[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(b={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,k=null,$=406,F="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const B=await g.text();try{b=JSON.parse(B),Array.isArray(b)&&g.status===404&&(_=[],b=null,$=200,F="OK")}catch{g.status===404&&B===""?($=204,F="No Content"):b={message:B}}if(b&&this.isMaybeSingle&&(!((C=b?.details)===null||C===void 0)&&C.includes("0 rows"))&&(b=null,$=200,F="OK"),b&&this.shouldThrowOnError)throw new r.default(b)}return{error:b,data:_,count:k,status:$,statusText:F}});return this.shouldThrowOnError||(p=p.catch(g=>{var y,x,S;return{error:{message:`${(y=g?.name)!==null&&y!==void 0?y:"FetchError"}: ${g?.message}`,details:`${(x=g?.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(S=g?.code)!==null&&S!==void 0?S:""}`},data:null,count:null,status:0,statusText:""}})),p.then(c,d)}returns(){return this}overrideTypes(){return this}}return Ws.default=o,Ws}var jf;function vp(){if(jf)return Bs;jf=1;var s=Bs&&Bs.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Bs,"__esModule",{value:!0});const n=s(yp());class r extends n.default{select(l){let c=!1;const d=(l??"*").split("").map(m=>/\s/.test(m)&&!c?"":(m==='"'&&(c=!c),m)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:c=!0,nullsFirst:d,foreignTable:m,referencedTable:p=m}={}){const g=p?`${p}.order`:"order",y=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${y?`${y},`:""}${l}.${c?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:c,referencedTable:d=c}={}){const m=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(m,`${l}`),this}range(l,c,{foreignTable:d,referencedTable:m=d}={}){const p=typeof m>"u"?"offset":`${m}.offset`,g=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(p,`${l}`),this.url.searchParams.set(g,`${c-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:c=!1,settings:d=!1,buffers:m=!1,wal:p=!1,format:g="text"}={}){var y;const x=[l?"analyze":null,c?"verbose":null,d?"settings":null,m?"buffers":null,p?"wal":null].filter(Boolean).join("|"),S=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${S}"; options=${x};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return Bs.default=r,Bs}var Ef;function vu(){if(Ef)return Fs;Ef=1;var s=Fs&&Fs.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Fs,"__esModule",{value:!0});const n=s(vp());class r extends n.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}in(l,c){const d=Array.from(new Set(c)).map(m=>typeof m=="string"&&new RegExp("[,()]").test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(l,`in.(${d})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:d,type:m}={}){let p="";m==="plain"?p="pl":m==="phrase"?p="ph":m==="websearch"&&(p="w");const g=d===void 0?"":`(${d})`;return this.url.searchParams.append(l,`${p}fts${g}.${c}`),this}match(l){return Object.entries(l).forEach(([c,d])=>{this.url.searchParams.append(c,`eq.${d}`)}),this}not(l,c,d){return this.url.searchParams.append(l,`not.${c}.${d}`),this}or(l,{foreignTable:c,referencedTable:d=c}={}){const m=d?`${d}.or`:"or";return this.url.searchParams.append(m,`(${l})`),this}filter(l,c,d){return this.url.searchParams.append(l,`${c}.${d}`),this}}return Fs.default=r,Fs}var Nf;function wp(){if(Nf)return Us;Nf=1;var s=Us&&Us.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Us,"__esModule",{value:!0});const n=s(vu());class r{constructor(l,{headers:c={},schema:d,fetch:m}){this.url=l,this.headers=new Headers(c),this.schema=d,this.fetch=m}select(l,{head:c=!1,count:d}={}){const m=c?"HEAD":"GET";let p=!1;const g=(l??"*").split("").map(y=>/\s/.test(y)&&!p?"":(y==='"'&&(p=!p),y)).join("");return this.url.searchParams.set("select",g),d&&this.headers.append("Prefer",`count=${d}`),new n.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:c,defaultToNull:d=!0}={}){var m;const p="POST";if(c&&this.headers.append("Prefer",`count=${c}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const g=l.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(g.length>0){const y=[...new Set(g)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(l,{onConflict:c,ignoreDuplicates:d=!1,count:m,defaultToNull:p=!0}={}){var g;const y="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),m&&this.headers.append("Prefer",`count=${m}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const x=l.reduce((S,C)=>S.concat(Object.keys(C)),[]);if(x.length>0){const S=[...new Set(x)].map(C=>`"${C}"`);this.url.searchParams.set("columns",S.join(","))}}return new n.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(l,{count:c}={}){var d;const m="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new n.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:l}={}){var c;const d="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new n.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return Us.default=r,Us}var Cf;function qw(){if(Cf)return Ms;Cf=1;var s=Ms&&Ms.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ms,"__esModule",{value:!0});const n=s(wp()),r=s(vu());class o{constructor(c,{headers:d={},schema:m,fetch:p}={}){this.url=c,this.headers=new Headers(d),this.schemaName=m,this.fetch=p}from(c){const d=new URL(`${this.url}/${c}`);return new n.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new o(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,d={},{head:m=!1,get:p=!1,count:g}={}){var y;let x;const S=new URL(`${this.url}/rpc/${c}`);let C;m||p?(x=m?"HEAD":"GET",Object.entries(d).filter(([_,k])=>k!==void 0).map(([_,k])=>[_,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([_,k])=>{S.searchParams.append(_,k)})):(x="POST",C=d);const b=new Headers(this.headers);return g&&b.set("Prefer",`count=${g}`),new r.default({method:x,url:S,headers:b,schema:this.schemaName,body:C,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return Ms.default=o,Ms}var Tf;function Hw(){if(Tf)return Ct;Tf=1;var s=Ct&&Ct.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.PostgrestError=Ct.PostgrestBuilder=Ct.PostgrestTransformBuilder=Ct.PostgrestFilterBuilder=Ct.PostgrestQueryBuilder=Ct.PostgrestClient=void 0;const n=s(qw());Ct.PostgrestClient=n.default;const r=s(wp());Ct.PostgrestQueryBuilder=r.default;const o=s(vu());Ct.PostgrestFilterBuilder=o.default;const l=s(vp());Ct.PostgrestTransformBuilder=l.default;const c=s(yp());Ct.PostgrestBuilder=c.default;const d=s(gp());return Ct.PostgrestError=d.default,Ct.default={PostgrestClient:n.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:c.default,PostgrestError:d.default},Ct}var Gw=Hw();const Vw=ou(Gw),{PostgrestClient:Jw,PostgrestQueryBuilder:xb,PostgrestFilterBuilder:bb,PostgrestTransformBuilder:kb,PostgrestBuilder:Sb,PostgrestError:_b}=Vw;class Kw{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const o=r.node,l=parseInt(o.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const o=this.getWebSocketConstructor();return new o(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Qw="2.15.5",Yw=`realtime-js/${Qw}`,Xw="1.0.0",Qc=1e4,Zw=1e3,e0=100;var Ji;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Ji||(Ji={}));var bt;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(bt||(bt={}));var jn;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(jn||(jn={}));var Yc;(function(s){s.websocket="websocket"})(Yc||(Yc={}));var Zr;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Zr||(Zr={}));class t0{constructor(){this.HEADER_LENGTH=1}decode(n,r){return n.constructor===ArrayBuffer?r(this._binaryDecode(n)):r(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const r=new DataView(n),o=new TextDecoder;return this._decodeBroadcast(n,r,o)}_decodeBroadcast(n,r,o){const l=r.getUint8(1),c=r.getUint8(2);let d=this.HEADER_LENGTH+2;const m=o.decode(n.slice(d,d+l));d=d+l;const p=o.decode(n.slice(d,d+c));d=d+c;const g=JSON.parse(o.decode(n.slice(d,n.byteLength)));return{ref:null,topic:m,event:p,payload:g}}}class xp{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var tt;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(tt||(tt={}));const Pf=(s,n,r={})=>{var o;const l=(o=r.skipTypes)!==null&&o!==void 0?o:[];return Object.keys(n).reduce((c,d)=>(c[d]=n0(d,s,n,l),c),{})},n0=(s,n,r,o)=>{const l=n.find(m=>m.name===s),c=l?.type,d=r[s];return c&&!o.includes(c)?bp(c,d):Xc(d)},bp=(s,n)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return a0(n,r)}switch(s){case tt.bool:return r0(n);case tt.float4:case tt.float8:case tt.int2:case tt.int4:case tt.int8:case tt.numeric:case tt.oid:return s0(n);case tt.json:case tt.jsonb:return i0(n);case tt.timestamp:return o0(n);case tt.abstime:case tt.date:case tt.daterange:case tt.int4range:case tt.int8range:case tt.money:case tt.reltime:case tt.text:case tt.time:case tt.timestamptz:case tt.timetz:case tt.tsrange:case tt.tstzrange:return Xc(n);default:return Xc(n)}},Xc=s=>s,r0=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},s0=s=>{if(typeof s=="string"){const n=parseFloat(s);if(!Number.isNaN(n))return n}return s},i0=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(n){return console.log(`JSON parse error: ${n}`),s}return s},a0=(s,n)=>{if(typeof s!="string")return s;const r=s.length-1,o=s[r];if(s[0]==="{"&&o==="}"){let c;const d=s.slice(1,r);try{c=JSON.parse("["+d+"]")}catch{c=d?d.split(","):[]}return c.map(m=>bp(n,m))}return s},o0=s=>typeof s=="string"?s.replace(" ","T"):s,kp=s=>{let n=s;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"};class Ac{constructor(n,r,o={},l=Qc){this.channel=n,this.event=r,this.payload=o,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var o;return this._hasReceived(n)&&r((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(o=>o.status===n).forEach(o=>o.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Of;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Of||(Of={}));class Ki{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},l=>{const{onJoin:c,onLeave:d,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ki.syncState(this.state,l,c,d),this.pendingDiffs.forEach(p=>{this.state=Ki.syncDiff(this.state,p,c,d)}),this.pendingDiffs=[],m()}),this.channel._on(o.diff,{},l=>{const{onJoin:c,onLeave:d,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Ki.syncDiff(this.state,l,c,d),m())}),this.onJoin((l,c,d)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:d})}),this.onLeave((l,c,d)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,o,l){const c=this.cloneDeep(n),d=this.transformState(r),m={},p={};return this.map(c,(g,y)=>{d[g]||(p[g]=y)}),this.map(d,(g,y)=>{const x=c[g];if(x){const S=y.map(k=>k.presence_ref),C=x.map(k=>k.presence_ref),b=y.filter(k=>C.indexOf(k.presence_ref)<0),_=x.filter(k=>S.indexOf(k.presence_ref)<0);b.length>0&&(m[g]=b),_.length>0&&(p[g]=_)}else m[g]=y}),this.syncDiff(c,{joins:m,leaves:p},o,l)}static syncDiff(n,r,o,l){const{joins:c,leaves:d}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return o||(o=()=>{}),l||(l=()=>{}),this.map(c,(m,p)=>{var g;const y=(g=n[m])!==null&&g!==void 0?g:[];if(n[m]=this.cloneDeep(p),y.length>0){const x=n[m].map(C=>C.presence_ref),S=y.filter(C=>x.indexOf(C.presence_ref)<0);n[m].unshift(...S)}o(m,y,p)}),this.map(d,(m,p)=>{let g=n[m];if(!g)return;const y=p.map(x=>x.presence_ref);g=g.filter(x=>y.indexOf(x.presence_ref)<0),n[m]=g,l(m,g,p),g.length===0&&delete n[m]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(o=>r(o,n[o]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,o)=>{const l=n[o];return"metas"in l?r[o]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[o]=l,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Af;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Af||(Af={}));var Qi;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Qi||(Qi={}));var Jn;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Jn||(Jn={}));class wu{constructor(n,r={config:{}},o){this.topic=n,this.params=r,this.socket=o,this.bindings={},this.state=bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ac(this,jn.join,this.params,this.timeout),this.rejoinTimer=new xp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=bt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(jn.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new Ki(this),this.broadcastEndpointURL=kp(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(n,r=this.timeout){var o,l,c;if(this.socket.isConnected()||this.socket.connect(),this.state==bt.closed){const{config:{broadcast:d,presence:m,private:p}}=this.params,g=(l=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(C=>C.filter))!==null&&l!==void 0?l:[],y=!!this.bindings[Qi.PRESENCE]&&this.bindings[Qi.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,x={},S={broadcast:d,presence:Object.assign(Object.assign({},m),{enabled:y}),postgres_changes:g,private:p};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(C=>n?.(Jn.CHANNEL_ERROR,C)),this._onClose(()=>n?.(Jn.CLOSED)),this.updateJoinPayload(Object.assign({config:S},x)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:C})=>{var b;if(this.socket.setAuth(),C===void 0){n?.(Jn.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,k=(b=_?.length)!==null&&b!==void 0?b:0,$=[];for(let F=0;F<k;F++){const U=_[F],{filter:{event:B,schema:X,table:L,filter:z}}=U,te=C&&C[F];if(te&&te.event===B&&te.schema===X&&te.table===L&&te.filter===z)$.push(Object.assign(Object.assign({},U),{id:te.id}));else{this.unsubscribe(),this.state=bt.errored,n?.(Jn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=$,n&&n(Jn.SUBSCRIBED);return}}).receive("error",C=>{this.state=bt.errored,n?.(Jn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(C).join(", ")||"error")))}).receive("timeout",()=>{n?.(Jn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,o){return this.state===bt.joined&&n===Qi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,r,o)}async send(n,r={}){var o,l;if(!this._canPush()&&n.type==="broadcast"){const{event:c,payload:d}=n,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:d,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);return await((l=g.body)===null||l===void 0?void 0:l.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var d,m,p;const g=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((p=(m=(d=this.params)===null||d===void 0?void 0:d.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&c("ok"),g.receive("ok",()=>c("ok")),g.receive("error",()=>c("error")),g.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=bt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(jn.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(l=>{o=new Ac(this,jn.leave,{},n),o.receive("ok",()=>{r(),l("ok")}).receive("timeout",()=>{r(),l("timed out")}).receive("error",()=>{l("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=bt.closed,this.bindings={}}async _fetchWithTimeout(n,r,o){const l=new AbortController,c=setTimeout(()=>l.abort(),o),d=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:l.signal}));return clearTimeout(c),d}_push(n,r,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new Ac(this,n,r,o);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>e0){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,o){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,o){var l,c;const d=n.toLocaleLowerCase(),{close:m,error:p,leave:g,join:y}=jn;if(o&&[m,p,g,y].indexOf(d)>=0&&o!==this._joinRef())return;let S=this._onMessage(d,r,o);if(r&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(C=>{var b,_,k;return((b=C.filter)===null||b===void 0?void 0:b.event)==="*"||((k=(_=C.filter)===null||_===void 0?void 0:_.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===d}).map(C=>C.callback(S,o)):(c=this.bindings[d])===null||c===void 0||c.filter(C=>{var b,_,k,$,F,U;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in C){const B=C.id,X=(b=C.filter)===null||b===void 0?void 0:b.event;return B&&((_=r.ids)===null||_===void 0?void 0:_.includes(B))&&(X==="*"||X?.toLocaleLowerCase()===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const B=(F=($=C?.filter)===null||$===void 0?void 0:$.event)===null||F===void 0?void 0:F.toLocaleLowerCase();return B==="*"||B===((U=r?.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===d}).map(C=>{if(typeof S=="object"&&"ids"in S){const b=S.data,{schema:_,table:k,commit_timestamp:$,type:F,errors:U}=b;S=Object.assign(Object.assign({},{schema:_,table:k,commit_timestamp:$,eventType:F,new:{},old:{},errors:U}),this._getPayloadRecords(b))}C.callback(S,o)})}_isClosed(){return this.state===bt.closed}_isJoined(){return this.state===bt.joined}_isJoining(){return this.state===bt.joining}_isLeaving(){return this.state===bt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,o){const l=n.toLocaleLowerCase(),c={type:l,filter:r,callback:o};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(n,r){const o=n.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===o&&wu.isEqual(l.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const o in n)if(n[o]!==r[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(jn.close,{},n)}_onError(n){this._on(jn.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=bt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=Pf(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=Pf(n.columns,n.old_record)),r}}const Ic=()=>{},wo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},l0=[1e3,2e3,5e3,1e4],c0=1e4,u0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class d0{constructor(n,r){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Qc,this.transport=null,this.heartbeatIntervalMs=wo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ic,this.ref=0,this.reconnectTimer=null,this.logger=Ic,this.conn=null,this.sendBuffer=[],this.serializer=new t0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>{let c;return l?c=l:typeof fetch>"u"?c=(...d)=>$e(async()=>{const{default:m}=await Promise.resolve().then(()=>si);return{default:m}},void 0).then(({default:m})=>m(...d)).catch(m=>{throw new Error(`Failed to load @supabase/node-fetch: ${m.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):c=fetch,(...d)=>c(...d)},!(!((o=r?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${Yc.websocket}`,this.httpEndpoint=kp(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Kw.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Xw}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},n?this.conn.close(n,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,o){this.logger(n,r,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Ji.connecting:return Zr.Connecting;case Ji.open:return Zr.Open;case Ji.closing:return Zr.Closing;default:return Zr.Closed}}isConnected(){return this.connectionState()===Zr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const o=`realtime:${n}`,l=this.getChannels().find(c=>c.topic===o);if(l)return l;{const c=new wu(`realtime:${n}`,r,this);return this.channels.push(c),c}}push(n){const{topic:r,event:o,payload:l,ref:c}=n,d=()=>{this.encode(n,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${r} ${o} (${c})`,l),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Zw,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},wo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(o=>o.topic===n&&(o._isJoined()||o._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:l,payload:c,ref:d}=r,m=d?`(${d})`:"",p=c.status||"";this.log("receive",`${p} ${o} ${l} ${m}`.trim(),c),this.channels.filter(g=>g._isMember(o)).forEach(g=>g._trigger(l,c,d)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(jn.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const o=n.match(/\?/)?"&":"?",l=new URLSearchParams(r);return`${n}${o}${l}`}_workerObjectUrl(n){let r;if(n)r=n;else{const o=new Blob([u0],{type:"application/javascript"});r=URL.createObjectURL(o)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r;n?r=n:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(o=>{const l={access_token:r,version:Yw};r&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(jn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(o=>{try{o(r)}catch(l){this.log("error",`error in ${n} callback`,l)}})}catch(o){this.log("error",`error triggering ${n} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new xp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},wo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,o,l,c,d,m,p,g,y;if(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(o=n?.timeout)!==null&&o!==void 0?o:Qc,this.heartbeatIntervalMs=(l=n?.heartbeatIntervalMs)!==null&&l!==void 0?l:wo.HEARTBEAT_INTERVAL,this.worker=(c=n?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(d=n?.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(m=n?.heartbeatCallback)!==null&&m!==void 0?m:Ic,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=n?.reconnectAfterMs)!==null&&p!==void 0?p:x=>l0[x-1]||c0,this.encode=(g=n?.encode)!==null&&g!==void 0?g:(x,S)=>S(JSON.stringify(x)),this.decode=(y=n?.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class xu extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function kt(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class h0 extends xu{constructor(n,r,o){super(n),this.name="StorageApiError",this.status=r,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Zc extends xu{constructor(n,r){super(n),this.name="StorageUnknownError",this.originalError=r}}var f0=function(s,n,r,o){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function m(y){try{g(o.next(y))}catch(x){d(x)}}function p(y){try{g(o.throw(y))}catch(x){d(x)}}function g(y){y.done?c(y.value):l(y.value).then(m,p)}g((o=o.apply(s,n||[])).next())})};const Sp=s=>{let n;return s?n=s:typeof fetch>"u"?n=(...r)=>$e(async()=>{const{default:o}=await Promise.resolve().then(()=>si);return{default:o}},void 0).then(({default:o})=>o(...r)):n=fetch,(...r)=>n(...r)},p0=()=>f0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $e(()=>Promise.resolve().then(()=>si),void 0)).Response:Response}),eu=s=>{if(Array.isArray(s))return s.map(r=>eu(r));if(typeof s=="function"||s!==Object(s))return s;const n={};return Object.entries(s).forEach(([r,o])=>{const l=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[l]=eu(o)}),n},m0=s=>{if(typeof s!="object"||s===null)return!1;const n=Object.getPrototypeOf(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)};var ls=function(s,n,r,o){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function m(y){try{g(o.next(y))}catch(x){d(x)}}function p(y){try{g(o.throw(y))}catch(x){d(x)}}function g(y){y.done?c(y.value):l(y.value).then(m,p)}g((o=o.apply(s,n||[])).next())})};const Rc=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),g0=(s,n,r)=>ls(void 0,void 0,void 0,function*(){const o=yield p0();s instanceof o&&!r?.noResolveJson?s.json().then(l=>{const c=s.status||500,d=l?.statusCode||c+"";n(new h0(Rc(l),c,d))}).catch(l=>{n(new Zc(Rc(l),l))}):n(new Zc(Rc(s),s))}),y0=(s,n,r,o)=>{const l={method:s,headers:n?.headers||{}};return s==="GET"||!o?l:(m0(o)?(l.headers=Object.assign({"Content-Type":"application/json"},n?.headers),l.body=JSON.stringify(o)):l.body=o,n?.duplex&&(l.duplex=n.duplex),Object.assign(Object.assign({},l),r))};function oa(s,n,r,o,l,c){return ls(this,void 0,void 0,function*(){return new Promise((d,m)=>{s(r,y0(n,o,l,c)).then(p=>{if(!p.ok)throw p;return o?.noResolveJson?p:p.json()}).then(p=>d(p)).catch(p=>g0(p,m,o))})})}function Oo(s,n,r,o){return ls(this,void 0,void 0,function*(){return oa(s,"GET",n,r,o)})}function An(s,n,r,o,l){return ls(this,void 0,void 0,function*(){return oa(s,"POST",n,o,l,r)})}function tu(s,n,r,o,l){return ls(this,void 0,void 0,function*(){return oa(s,"PUT",n,o,l,r)})}function v0(s,n,r,o){return ls(this,void 0,void 0,function*(){return oa(s,"HEAD",n,Object.assign(Object.assign({},r),{noResolveJson:!0}),o)})}function _p(s,n,r,o,l){return ls(this,void 0,void 0,function*(){return oa(s,"DELETE",n,o,l,r)})}var $t=function(s,n,r,o){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function m(y){try{g(o.next(y))}catch(x){d(x)}}function p(y){try{g(o.throw(y))}catch(x){d(x)}}function g(y){y.done?c(y.value):l(y.value).then(m,p)}g((o=o.apply(s,n||[])).next())})};const w0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},If={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class x0{constructor(n,r={},o,l){this.shouldThrowOnError=!1,this.url=n,this.headers=r,this.bucketId=o,this.fetch=Sp(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,r,o,l){return $t(this,void 0,void 0,function*(){try{let c;const d=Object.assign(Object.assign({},If),l);let m=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(d.upsert)});const p=d.metadata;typeof Blob<"u"&&o instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),p&&c.append("metadata",this.encodeMetadata(p)),c.append("",o)):typeof FormData<"u"&&o instanceof FormData?(c=o,c.append("cacheControl",d.cacheControl),p&&c.append("metadata",this.encodeMetadata(p))):(c=o,m["cache-control"]=`max-age=${d.cacheControl}`,m["content-type"]=d.contentType,p&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),l?.headers&&(m=Object.assign(Object.assign({},m),l.headers));const g=this._removeEmptyFolders(r),y=this._getFinalPath(g),x=yield(n=="PUT"?tu:An)(this.fetch,`${this.url}/object/${y}`,c,Object.assign({headers:m},d?.duplex?{duplex:d.duplex}:{}));return{data:{path:g,id:x.Id,fullPath:x.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(kt(c))return{data:null,error:c};throw c}})}upload(n,r,o){return $t(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,r,o)})}uploadToSignedUrl(n,r,o,l){return $t(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),m=new URL(this.url+`/object/upload/sign/${d}`);m.searchParams.set("token",r);try{let p;const g=Object.assign({upsert:If.upsert},l),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&o instanceof Blob?(p=new FormData,p.append("cacheControl",g.cacheControl),p.append("",o)):typeof FormData<"u"&&o instanceof FormData?(p=o,p.append("cacheControl",g.cacheControl)):(p=o,y["cache-control"]=`max-age=${g.cacheControl}`,y["content-type"]=g.contentType);const x=yield tu(this.fetch,m.toString(),p,{headers:y});return{data:{path:c,fullPath:x.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(kt(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(n,r){return $t(this,void 0,void 0,function*(){try{let o=this._getFinalPath(n);const l=Object.assign({},this.headers);r?.upsert&&(l["x-upsert"]="true");const c=yield An(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:l}),d=new URL(this.url+c.url),m=d.searchParams.get("token");if(!m)throw new xu("No token returned by API");return{data:{signedUrl:d.toString(),path:n,token:m},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(kt(o))return{data:null,error:o};throw o}})}update(n,r,o){return $t(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,r,o)})}move(n,r,o){return $t(this,void 0,void 0,function*(){try{return{data:yield An(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(kt(l))return{data:null,error:l};throw l}})}copy(n,r,o){return $t(this,void 0,void 0,function*(){try{return{data:{path:(yield An(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(kt(l))return{data:null,error:l};throw l}})}createSignedUrl(n,r,o){return $t(this,void 0,void 0,function*(){try{let l=this._getFinalPath(n),c=yield An(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:r},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const d=o?.download?`&download=${o.download===!0?"":o.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${d}`)},{data:c,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(kt(l))return{data:null,error:l};throw l}})}createSignedUrls(n,r,o){return $t(this,void 0,void 0,function*(){try{const l=yield An(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:n},{headers:this.headers}),c=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:l.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${c}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(kt(l))return{data:null,error:l};throw l}})}download(n,r){return $t(this,void 0,void 0,function*(){const l=typeof r?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(r?.transform||{}),d=c?`?${c}`:"";try{const m=this._getFinalPath(n);return{data:yield(yield Oo(this.fetch,`${this.url}/${l}/${m}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(kt(m))return{data:null,error:m};throw m}})}info(n){return $t(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{const o=yield Oo(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:eu(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(kt(o))return{data:null,error:o};throw o}})}exists(n){return $t(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{return yield v0(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(kt(o)&&o instanceof Zc){const l=o.originalError;if([400,404].includes(l?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(n,r){const o=this._getFinalPath(n),l=[],c=r?.download?`download=${r.download===!0?"":r.download}`:"";c!==""&&l.push(c);const m=typeof r?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(r?.transform||{});p!==""&&l.push(p);let g=l.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${o}${g}`)}}}remove(n){return $t(this,void 0,void 0,function*(){try{return{data:yield _p(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kt(r))return{data:null,error:r};throw r}})}list(n,r,o){return $t(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},w0),r),{prefix:n||""});return{data:yield An(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},o),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(kt(l))return{data:null,error:l};throw l}})}listV2(n,r){return $t(this,void 0,void 0,function*(){try{const o=Object.assign({},n);return{data:yield An(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(kt(o))return{data:null,error:o};throw o}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const r=[];return n.width&&r.push(`width=${n.width}`),n.height&&r.push(`height=${n.height}`),n.resize&&r.push(`resize=${n.resize}`),n.format&&r.push(`format=${n.format}`),n.quality&&r.push(`quality=${n.quality}`),r.join("&")}}const b0="2.12.1",k0={"X-Client-Info":`storage-js/${b0}`};var $s=function(s,n,r,o){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function m(y){try{g(o.next(y))}catch(x){d(x)}}function p(y){try{g(o.throw(y))}catch(x){d(x)}}function g(y){y.done?c(y.value):l(y.value).then(m,p)}g((o=o.apply(s,n||[])).next())})};class S0{constructor(n,r={},o,l){this.shouldThrowOnError=!1;const c=new URL(n);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href,this.headers=Object.assign(Object.assign({},k0),r),this.fetch=Sp(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return $s(this,void 0,void 0,function*(){try{return{data:yield Oo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(kt(n))return{data:null,error:n};throw n}})}getBucket(n){return $s(this,void 0,void 0,function*(){try{return{data:yield Oo(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kt(r))return{data:null,error:r};throw r}})}createBucket(n,r={public:!1}){return $s(this,void 0,void 0,function*(){try{return{data:yield An(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(kt(o))return{data:null,error:o};throw o}})}updateBucket(n,r){return $s(this,void 0,void 0,function*(){try{return{data:yield tu(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(kt(o))return{data:null,error:o};throw o}})}emptyBucket(n){return $s(this,void 0,void 0,function*(){try{return{data:yield An(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kt(r))return{data:null,error:r};throw r}})}deleteBucket(n){return $s(this,void 0,void 0,function*(){try{return{data:yield _p(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kt(r))return{data:null,error:r};throw r}})}}class _0 extends S0{constructor(n,r={},o,l){super(n,r,o,l)}from(n){return new x0(this.url,this.headers,n,this.fetch)}}const j0="2.57.4";let Gi="";typeof Deno<"u"?Gi="deno":typeof document<"u"?Gi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Gi="react-native":Gi="node";const E0={"X-Client-Info":`supabase-js-${Gi}/${j0}`},N0={headers:E0},C0={schema:"public"},T0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},P0={};var O0=function(s,n,r,o){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function m(y){try{g(o.next(y))}catch(x){d(x)}}function p(y){try{g(o.throw(y))}catch(x){d(x)}}function g(y){y.done?c(y.value):l(y.value).then(m,p)}g((o=o.apply(s,n||[])).next())})};const A0=s=>{let n;return s?n=s:typeof fetch>"u"?n=pp:n=fetch,(...r)=>n(...r)},I0=()=>typeof Headers>"u"?mp:Headers,R0=(s,n,r)=>{const o=A0(r),l=I0();return(c,d)=>O0(void 0,void 0,void 0,function*(){var m;const p=(m=yield n())!==null&&m!==void 0?m:s;let g=new l(d?.headers);return g.has("apikey")||g.set("apikey",s),g.has("Authorization")||g.set("Authorization",`Bearer ${p}`),o(c,Object.assign(Object.assign({},d),{headers:g}))})};var D0=function(s,n,r,o){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function m(y){try{g(o.next(y))}catch(x){d(x)}}function p(y){try{g(o.throw(y))}catch(x){d(x)}}function g(y){y.done?c(y.value):l(y.value).then(m,p)}g((o=o.apply(s,n||[])).next())})};function L0(s){return s.endsWith("/")?s:s+"/"}function M0(s,n){var r,o;const{db:l,auth:c,realtime:d,global:m}=s,{db:p,auth:g,realtime:y,global:x}=n,S={db:Object.assign(Object.assign({},p),l),auth:Object.assign(Object.assign({},g),c),realtime:Object.assign(Object.assign({},y),d),storage:{},global:Object.assign(Object.assign(Object.assign({},x),m),{headers:Object.assign(Object.assign({},(r=x?.headers)!==null&&r!==void 0?r:{}),(o=m?.headers)!==null&&o!==void 0?o:{})}),accessToken:()=>D0(this,void 0,void 0,function*(){return""})};return s.accessToken?S.accessToken=s.accessToken:delete S.accessToken,S}function U0(s){const n=s?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(L0(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const jp="2.71.1",Vs=30*1e3,nu=3,Dc=nu*Vs,F0="http://localhost:9999",B0="supabase.auth.token",W0={"X-Client-Info":`gotrue-js/${jp}`},ru="X-Supabase-Api-Version",Ep={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,z0=600*1e3;class bu extends Error{constructor(n,r,o){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=o}}function Le(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class q0 extends bu{constructor(n,r,o){super(n,r,o),this.name="AuthApiError",this.status=r,this.code=o}}function H0(s){return Le(s)&&s.name==="AuthApiError"}class Np extends bu{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class Pr extends bu{constructor(n,r,o,l){super(n,o,l),this.name=r,this.status=o}}class jr extends Pr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function G0(s){return Le(s)&&s.name==="AuthSessionMissingError"}class xo extends Pr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bo extends Pr{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class ko extends Pr{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function V0(s){return Le(s)&&s.name==="AuthImplicitGrantRedirectError"}class Rf extends Pr{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class su extends Pr{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function Lc(s){return Le(s)&&s.name==="AuthRetryableFetchError"}class Df extends Pr{constructor(n,r,o){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=o}}class iu extends Pr{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ao="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lf=` 	
\r=`.split(""),J0=(()=>{const s=new Array(128);for(let n=0;n<s.length;n+=1)s[n]=-1;for(let n=0;n<Lf.length;n+=1)s[Lf[n].charCodeAt(0)]=-2;for(let n=0;n<Ao.length;n+=1)s[Ao[n].charCodeAt(0)]=n;return s})();function Mf(s,n,r){if(s!==null)for(n.queue=n.queue<<8|s,n.queuedBits+=8;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;r(Ao[o]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;r(Ao[o]),n.queuedBits-=6}}function Cp(s,n,r){const o=J0[s];if(o>-1)for(n.queue=n.queue<<6|o,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function Uf(s){const n=[],r=d=>{n.push(String.fromCodePoint(d))},o={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=d=>{Y0(d,o,r)};for(let d=0;d<s.length;d+=1)Cp(s.charCodeAt(d),l,c);return n.join("")}function K0(s,n){if(s<=127){n(s);return}else if(s<=2047){n(192|s>>6),n(128|s&63);return}else if(s<=65535){n(224|s>>12),n(128|s>>6&63),n(128|s&63);return}else if(s<=1114111){n(240|s>>18),n(128|s>>12&63),n(128|s>>6&63),n(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function Q0(s,n){for(let r=0;r<s.length;r+=1){let o=s.charCodeAt(r);if(o>55295&&o<=56319){const l=(o-55296)*1024&65535;o=(s.charCodeAt(r+1)-56320&65535|l)+65536,r+=1}K0(o,n)}}function Y0(s,n,r){if(n.utf8seq===0){if(s<=127){r(s);return}for(let o=1;o<6;o+=1)if((s>>7-o&1)===0){n.utf8seq=o;break}if(n.utf8seq===2)n.codepoint=s&31;else if(n.utf8seq===3)n.codepoint=s&15;else if(n.utf8seq===4)n.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|s&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function X0(s){const n=[],r={queue:0,queuedBits:0},o=l=>{n.push(l)};for(let l=0;l<s.length;l+=1)Cp(s.charCodeAt(l),r,o);return new Uint8Array(n)}function Z0(s){const n=[];return Q0(s,r=>n.push(r)),new Uint8Array(n)}function ex(s){const n=[],r={queue:0,queuedBits:0},o=l=>{n.push(l)};return s.forEach(l=>Mf(l,r,o)),Mf(null,r,o),n.join("")}function tx(s){return Math.round(Date.now()/1e3)+s}function nx(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const n=Math.random()*16|0;return(s=="x"?n:n&3|8).toString(16)})}const _n=()=>typeof window<"u"&&typeof document<"u",Kr={tested:!1,writable:!1},Tp=()=>{if(!_n())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kr.tested)return Kr.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Kr.tested=!0,Kr.writable=!0}catch{Kr.tested=!0,Kr.writable=!1}return Kr.writable};function rx(s){const n={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((l,c)=>{n[c]=l})}catch{}return r.searchParams.forEach((o,l)=>{n[l]=o}),n}const Pp=s=>{let n;return s?n=s:typeof fetch>"u"?n=(...r)=>$e(async()=>{const{default:o}=await Promise.resolve().then(()=>si);return{default:o}},void 0).then(({default:o})=>o(...r)):n=fetch,(...r)=>n(...r)},sx=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Js=async(s,n,r)=>{await s.setItem(n,JSON.stringify(r))},Qr=async(s,n)=>{const r=await s.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},_r=async(s,n)=>{await s.removeItem(n)};class Fo{constructor(){this.promise=new Fo.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}Fo.promiseConstructor=Promise;function Mc(s){const n=s.split(".");if(n.length!==3)throw new iu("Invalid JWT structure");for(let o=0;o<n.length;o++)if(!$0.test(n[o]))throw new iu("JWT not in base64url format");return{header:JSON.parse(Uf(n[0])),payload:JSON.parse(Uf(n[1])),signature:X0(n[2]),raw:{header:n[0],payload:n[1]}}}async function ix(s){return await new Promise(n=>{setTimeout(()=>n(null),s)})}function ax(s,n){return new Promise((o,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const d=await s(c);if(!n(c,null,d)){o(d);return}}catch(d){if(!n(c,d)){l(d);return}}})()})}function ox(s){return("0"+s.toString(16)).substr(-2)}function lx(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=r.length;let l="";for(let c=0;c<56;c++)l+=r.charAt(Math.floor(Math.random()*o));return l}return crypto.getRandomValues(n),Array.from(n,ox).join("")}async function cx(s){const r=new TextEncoder().encode(s),o=await crypto.subtle.digest("SHA-256",r),l=new Uint8Array(o);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function ux(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=await cx(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zs(s,n,r=!1){const o=lx();let l=o;r&&(l+="/PASSWORD_RECOVERY"),await Js(s,`${n}-code-verifier`,l);const c=await ux(o);return[c,o===c?"plain":"s256"]}const dx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function hx(s){const n=s.headers.get(ru);if(!n||!n.match(dx))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function fx(s){if(!s)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(s<=n)throw new Error("JWT has expired")}function px(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const mx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qs(s){if(!mx.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Uc(){const s={};return new Proxy(s,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ff(s){return JSON.parse(JSON.stringify(s))}var gx=function(s,n){var r={};for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&n.indexOf(o)<0&&(r[o]=s[o]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(s);l<o.length;l++)n.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(s,o[l])&&(r[o[l]]=s[o[l]]);return r};const Xr=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),yx=[502,503,504];async function Bf(s){var n;if(!sx(s))throw new su(Xr(s),0);if(yx.includes(s.status))throw new su(Xr(s),s.status);let r;try{r=await s.json()}catch(c){throw new Np(Xr(c),c)}let o;const l=hx(s);if(l&&l.getTime()>=Ep["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?o=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(o=r.error_code),o){if(o==="weak_password")throw new Df(Xr(r),s.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(o==="session_not_found")throw new jr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,d)=>c&&typeof d=="string",!0))throw new Df(Xr(r),s.status,r.weak_password.reasons);throw new q0(Xr(r),s.status||500,o)}const vx=(s,n,r,o)=>{const l={method:s,headers:n?.headers||{}};return s==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),l.body=JSON.stringify(o),Object.assign(Object.assign({},l),r))};async function Fe(s,n,r,o){var l;const c=Object.assign({},o?.headers);c[ru]||(c[ru]=Ep["2024-01-01"].name),o?.jwt&&(c.Authorization=`Bearer ${o.jwt}`);const d=(l=o?.query)!==null&&l!==void 0?l:{};o?.redirectTo&&(d.redirect_to=o.redirectTo);const m=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",p=await wx(s,n,r+m,{headers:c,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(p):{data:Object.assign({},p),error:null}}async function wx(s,n,r,o,l,c){const d=vx(n,o,l,c);let m;try{m=await s(r,Object.assign({},d))}catch(p){throw console.error(p),new su(Xr(p),0)}if(m.ok||await Bf(m),o?.noResolveJson)return m;try{return await m.json()}catch(p){await Bf(p)}}function Vn(s){var n;let r=null;Sx(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=tx(s.expires_in)));const o=(n=s.user)!==null&&n!==void 0?n:s;return{data:{session:r,user:o},error:null}}function Wf(s){const n=Vn(s);return!n.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0)&&(n.data.weak_password=s.weak_password),n}function Nr(s){var n;return{data:{user:(n=s.user)!==null&&n!==void 0?n:s},error:null}}function xx(s){return{data:s,error:null}}function bx(s){const{action_link:n,email_otp:r,hashed_token:o,redirect_to:l,verification_type:c}=s,d=gx(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:n,email_otp:r,hashed_token:o,redirect_to:l,verification_type:c},p=Object.assign({},d);return{data:{properties:m,user:p},error:null}}function kx(s){return s}function Sx(s){return s.access_token&&s.refresh_token&&s.expires_in}const Fc=["global","local","others"];var _x=function(s,n){var r={};for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&n.indexOf(o)<0&&(r[o]=s[o]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(s);l<o.length;l++)n.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(s,o[l])&&(r[o[l]]=s[o[l]]);return r};class jx{constructor({url:n="",headers:r={},fetch:o}){this.url=n,this.headers=r,this.fetch=Pp(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,r=Fc[0]){if(Fc.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Fc.join(", ")}`);try{return await Fe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(o){if(Le(o))return{data:null,error:o};throw o}}async inviteUserByEmail(n,r={}){try{return await Fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Nr})}catch(o){if(Le(o))return{data:{user:null},error:o};throw o}}async generateLink(n){try{const{options:r}=n,o=_x(n,["options"]),l=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(l.new_email=o?.newEmail,delete l.newEmail),await Fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:bx,redirectTo:r?.redirectTo})}catch(r){if(Le(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await Fe(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Nr})}catch(r){if(Le(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,o,l,c,d,m,p;try{const g={nextPage:null,lastPage:0,total:0},y=await Fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(c=(l=n?.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:kx});if(y.error)throw y.error;const x=await y.json(),S=(d=y.headers.get("x-total-count"))!==null&&d!==void 0?d:0,C=(p=(m=y.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return C.length>0&&(C.forEach(b=>{const _=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(b.split(";")[1].split("=")[1]);g[`${k}Page`]=_}),g.total=parseInt(S)),{data:Object.assign(Object.assign({},x),g),error:null}}catch(g){if(Le(g))return{data:{users:[]},error:g};throw g}}async getUserById(n){qs(n);try{return await Fe(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Nr})}catch(r){if(Le(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){qs(n);try{return await Fe(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Nr})}catch(o){if(Le(o))return{data:{user:null},error:o};throw o}}async deleteUser(n,r=!1){qs(n);try{return await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Nr})}catch(o){if(Le(o))return{data:{user:null},error:o};throw o}}async _listFactors(n){qs(n.userId);try{const{data:r,error:o}=await Fe(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:r,error:o}}catch(r){if(Le(r))return{data:null,error:r};throw r}}async _deleteFactor(n){qs(n.userId),qs(n.id);try{return{data:await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(Le(r))return{data:null,error:r};throw r}}}function $f(s={}){return{getItem:n=>s[n]||null,setItem:(n,r)=>{s[n]=r},removeItem:n=>{delete s[n]}}}function Ex(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Hs={debug:!!(globalThis&&Tp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Op extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Nx extends Op{}async function Cx(s,n,r){Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,n);const o=new globalThis.AbortController;return n>0&&setTimeout(()=>{o.abort(),Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async l=>{if(l){Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,l.name);try{return await r()}finally{Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,l.name)}}else{if(n===0)throw Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Nx(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Hs.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Ex();const Tx={url:F0,storageKey:B0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:W0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function zf(s,n,r){return await r()}const Gs={};class ea{constructor(n){var r,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ea.nextInstanceID,ea.nextInstanceID+=1,this.instanceID>0&&_n()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},Tx),n);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new jx({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Pp(l.fetch),this.lock=l.lock||zf,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:_n()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=Cx:this.lock=zf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Tp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$f(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=$f(this.memoryStorage)),_n()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}get jwks(){var n,r;return(r=(n=Gs[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Gs[this.storageKey]=Object.assign(Object.assign({},Gs[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Gs[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Gs[this.storageKey]=Object.assign(Object.assign({},Gs[this.storageKey]),{cachedAt:n})}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${jp}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const r=rx(window.location.href);let o="none";if(this._isImplicitGrantCallback(r)?o="implicit":await this._isPKCECallback(r)&&(o="pkce"),_n()&&this.detectSessionInUrl&&o!=="none"){const{data:l,error:c}=await this._getSessionFromURL(r,o);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),V0(c)){const p=(n=c.details)===null||n===void 0?void 0:n.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:d,redirectType:m}=l;return this._debug("#_initialize()","detected session in URL",d,"redirect type",m),await this._saveSession(d),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Le(r)?{error:r}:{error:new Np("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,o,l;try{const c=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(l=n?.options)===null||l===void 0?void 0:l.captchaToken}},xform:Vn}),{data:d,error:m}=c;if(m||!d)return{data:{user:null,session:null},error:m};const p=d.session,g=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(c){if(Le(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(n){var r,o,l;try{let c;if("email"in n){const{email:y,password:x,options:S}=n;let C=null,b=null;this.flowType==="pkce"&&([C,b]=await zs(this.storage,this.storageKey)),c=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S?.emailRedirectTo,body:{email:y,password:x,data:(r=S?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:S?.captchaToken},code_challenge:C,code_challenge_method:b},xform:Vn})}else if("phone"in n){const{phone:y,password:x,options:S}=n;c=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:x,data:(o=S?.data)!==null&&o!==void 0?o:{},channel:(l=S?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:Vn})}else throw new bo("You must provide either an email or phone number and a password");const{data:d,error:m}=c;if(m||!d)return{data:{user:null,session:null},error:m};const p=d.session,g=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(c){if(Le(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(n){try{let r;if("email"in n){const{email:c,password:d,options:m}=n;r=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Wf})}else if("phone"in n){const{phone:c,password:d,options:m}=n;r=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Wf})}else throw new bo("You must provide either an email or phone number and a password");const{data:o,error:l}=r;return l?{data:{user:null,session:null},error:l}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new xo}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:l})}catch(r){if(Le(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(n){var r,o,l,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(o=n.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=n.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;if(r==="solana")return await this.signInWithSolana(n);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(n){var r,o,l,c,d,m,p,g,y,x,S,C;let b,_;if("message"in n)b=n.message,_=n.signature;else{const{chain:k,wallet:$,statement:F,options:U}=n;let B;if(_n())if(typeof $=="object")B=$;else{const L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))B=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!U?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=$}const X=new URL((r=U?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in B&&B.signIn){const L=await B.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},U?.signInWithSolana),{version:"1",domain:X.host,uri:X.href}),F?{statement:F}:null));let z;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")z=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)z=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)b=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),_=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in B)||typeof B.signMessage!="function"||!("publicKey"in B)||typeof B!="object"||!B.publicKey||!("toBase58"in B.publicKey)||typeof B.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${X.host} wants you to sign in with your Solana account:`,B.publicKey.toBase58(),...F?["",F,""]:[""],"Version: 1",`URI: ${X.href}`,`Issued At: ${(l=(o=U?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((c=U?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${U.signInWithSolana.notBefore}`]:[],...!((d=U?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${U.signInWithSolana.expirationTime}`]:[],...!((m=U?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${U.signInWithSolana.chainId}`]:[],...!((p=U?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${U.signInWithSolana.nonce}`]:[],...!((g=U?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${U.signInWithSolana.requestId}`]:[],...!((x=(y=U?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||x===void 0)&&x.length?["Resources",...U.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const L=await B.signMessage(new TextEncoder().encode(b),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=L}}try{const{data:k,error:$}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:ex(_)},!((S=n.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(C=n.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:Vn});if($)throw $;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new xo}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:$})}catch(k){if(Le(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(n){const r=await Qr(this.storage,`${this.storageKey}-code-verifier`),[o,l]=(r??"").split("/");try{const{data:c,error:d}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:o},xform:Vn});if(await _r(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new xo}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:d})}catch(c){if(Le(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(n){try{const{options:r,provider:o,token:l,access_token:c,nonce:d}=n,m=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:l,access_token:c,nonce:d,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Vn}),{data:p,error:g}=m;return g?{data:{user:null,session:null},error:g}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new xo}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:g})}catch(r){if(Le(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(n){var r,o,l,c,d;try{if("email"in n){const{email:m,options:p}=n;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await zs(this.storage,this.storageKey));const{error:x}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(r=p?.data)!==null&&r!==void 0?r:{},create_user:(o=p?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:g,code_challenge_method:y},redirectTo:p?.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in n){const{phone:m,options:p}=n,{data:g,error:y}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(l=p?.data)!==null&&l!==void 0?l:{},create_user:(c=p?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(d=p?.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:g?.message_id},error:y}}throw new bo("You must provide either an email or phone number.")}catch(m){if(Le(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(n){var r,o;try{let l,c;"options"in n&&(l=(r=n.options)===null||r===void 0?void 0:r.redirectTo,c=(o=n.options)===null||o===void 0?void 0:o.captchaToken);const{data:d,error:m}=await Fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:Vn});if(m)throw m;if(!d)throw new Error("An error occurred on token verification.");const p=d.session,g=d.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(l){if(Le(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(n){var r,o,l;try{let c=null,d=null;return this.flowType==="pkce"&&([c,d]=await zs(this.storage,this.storageKey)),await Fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&o!==void 0?o:void 0}),!((l=n?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:d}),headers:this.headers,xform:xx})}catch(c){if(Le(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:o}=n;if(o)throw o;if(!r)throw new jr;const{error:l}=await Fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:l}})}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:o,type:l,options:c}=n,{error:d}=await Fe(this.fetch,"POST",r,{headers:this.headers,body:{email:o,type:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in n){const{phone:o,type:l,options:c}=n,{data:d,error:m}=await Fe(this.fetch,"POST",r,{headers:this.headers,body:{phone:o,type:l,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return{data:{user:null,session:null,messageId:d?.message_id},error:m}}throw new bo("You must provide either an email or phone number and a type")}catch(r){if(Le(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await o,await r()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=r();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await Qr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const o=n.expires_at?n.expires_at*1e3-Date.now()<Dc:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",n.expires_at),!o){if(this.userStorage){const d=await Qr(this.userStorage,this.storageKey+"-user");d?.user?n.user=d.user:n.user=Uc()}if(this.storage.isServer&&n.user){let d=this.suppressGetSessionWarning;n=new Proxy(n,{get:(p,g,y)=>(!d&&g==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,g,y))})}return{data:{session:n},error:null}}const{session:l,error:c}=await this._callRefreshToken(n.refresh_token);return c?{data:{session:null},error:c}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Nr}):await this._useSession(async r=>{var o,l,c;const{data:d,error:m}=r;if(m)throw m;return!(!((o=d.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new jr}:await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:Nr})})}catch(r){if(Le(r))return G0(r)&&(await this._removeSession(),await _r(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async o=>{const{data:l,error:c}=o;if(c)throw c;if(!l.session)throw new jr;const d=l.session;let m=null,p=null;this.flowType==="pkce"&&n.email!=null&&([m,p]=await zs(this.storage,this.storageKey));const{data:g,error:y}=await Fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:m,code_challenge_method:p}),jwt:d.access_token,xform:Nr});if(y)throw y;return d.user=g.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(o){if(Le(o))return{data:{user:null},error:o};throw o}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new jr;const r=Date.now()/1e3;let o=r,l=!0,c=null;const{payload:d}=Mc(n.access_token);if(d.exp&&(o=d.exp,l=o<=r),l){const{session:m,error:p}=await this._callRefreshToken(n.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!m)return{data:{user:null,session:null},error:null};c=m}else{const{data:m,error:p}=await this._getUser(n.access_token);if(p)throw p;c={access_token:n.access_token,refresh_token:n.refresh_token,user:m.user,token_type:"bearer",expires_in:o-r,expires_at:o},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(r){if(Le(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var o;if(!n){const{data:d,error:m}=r;if(m)throw m;n=(o=d.session)!==null&&o!==void 0?o:void 0}if(!n?.refresh_token)throw new jr;const{session:l,error:c}=await this._callRefreshToken(n.refresh_token);return c?{data:{user:null,session:null},error:c}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Le(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(n,r){try{if(!_n())throw new ko("No browser detected.");if(n.error||n.error_description||n.error_code)throw new ko(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Rf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ko("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Rf("No code detected.");const{data:F,error:U}=await this._exchangeCodeForSession(n.code);if(U)throw U;const B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:F.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:l,access_token:c,refresh_token:d,expires_in:m,expires_at:p,token_type:g}=n;if(!c||!m||!d||!g)throw new ko("No session defined in URL");const y=Math.round(Date.now()/1e3),x=parseInt(m);let S=y+x;p&&(S=parseInt(p));const C=S-y;C*1e3<=Vs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${x}s`);const b=S-x;y-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,S,y):y-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,S,y);const{data:_,error:k}=await this._getUser(c);if(k)throw k;const $={provider_token:o,provider_refresh_token:l,access_token:c,expires_in:x,expires_at:S,refresh_token:d,token_type:g,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:$,redirectType:n.type},error:null}}catch(o){if(Le(o))return{data:{session:null,redirectType:null},error:o};throw o}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await Qr(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var o;const{data:l,error:c}=r;if(c)return{error:c};const d=(o=l.session)===null||o===void 0?void 0:o.access_token;if(d){const{error:m}=await this.admin.signOut(d,n);if(m&&!(H0(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return n!=="others"&&(await this._removeSession(),await _r(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const r=nx(),o={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:o}}}async _emitInitialSession(n){return await this._useSession(async r=>{var o,l;try{const{data:{session:c},error:d}=r;if(d)throw d;await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,r={}){let o=null,l=null;this.flowType==="pkce"&&([o,l]=await zs(this.storage,this.storageKey,!0));try{return await Fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:o,code_challenge_method:l,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(Le(c))return{data:null,error:c};throw c}}async getUserIdentities(){var n;try{const{data:r,error:o}=await this.getUser();if(o)throw o;return{data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(r){if(Le(r))return{data:null,error:r};throw r}}async linkIdentity(n){var r;try{const{data:o,error:l}=await this._useSession(async c=>{var d,m,p,g,y;const{data:x,error:S}=c;if(S)throw S;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(d=n.options)===null||d===void 0?void 0:d.redirectTo,scopes:(m=n.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=n.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await Fe(this.fetch,"GET",C,{headers:this.headers,jwt:(y=(g=x.session)===null||g===void 0?void 0:g.access_token)!==null&&y!==void 0?y:void 0})});if(l)throw l;return _n()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(o?.url),{data:{provider:n.provider,url:o?.url},error:null}}catch(o){if(Le(o))return{data:{provider:n.provider,url:null},error:o};throw o}}async unlinkIdentity(n){try{return await this._useSession(async r=>{var o,l;const{data:c,error:d}=r;if(d)throw d;return await Fe(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(l=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0})})}catch(r){if(Le(r))return{data:null,error:r};throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const o=Date.now();return await ax(async l=>(l>0&&await ix(200*Math.pow(2,l-1)),this._debug(r,"refreshing attempt",l),await Fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Vn})),(l,c)=>{const d=200*Math.pow(2,l);return c&&Lc(c)&&Date.now()+d-o<Vs})}catch(o){if(this._debug(r,"error",o),Le(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const o=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",o),_n()&&!r.skipBrowserRedirect&&window.location.assign(o),{data:{provider:n,url:o},error:null}}async _recoverAndRefresh(){var n,r;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const l=await Qr(this.storage,this.storageKey);if(l&&this.userStorage){let d=await Qr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:l.user},await Js(this.userStorage,this.storageKey+"-user",d)),l.user=(n=d?.user)!==null&&n!==void 0?n:Uc()}else if(l&&!l.user&&!l.user){const d=await Qr(this.storage,this.storageKey+"-user");d&&d?.user?(l.user=d.user,await _r(this.storage,this.storageKey+"-user"),await Js(this.storage,this.storageKey,l)):l.user=Uc()}if(this._debug(o,"session from storage",l),!this._isValidSession(l)){this._debug(o,"session is not valid"),l!==null&&await this._removeSession();return}const c=((r=l.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Dc;if(this._debug(o,`session has${c?"":" not"} expired with margin of ${Dc}s`),c){if(this.autoRefreshToken&&l.refresh_token){const{error:d}=await this._callRefreshToken(l.refresh_token);d&&(console.error(d),Lc(d)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:m}=await this._getUser(l.access_token);!m&&d?.user?(l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(o,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(o,"error",l),console.error(l);return}finally{this._debug(o,"end")}}async _callRefreshToken(n){var r,o;if(!n)throw new jr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Fo;const{data:c,error:d}=await this._refreshAccessToken(n);if(d)throw d;if(!c.session)throw new jr;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const m={session:c.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(c){if(this._debug(l,"error",c),Le(c)){const d={session:null,error:c};return Lc(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(d),d}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(n,r,o=!0){const l=`#_notifyAllSubscribers(${n})`;this._debug(l,"begin",r,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:n,session:r});const c=[],d=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(n,r)}catch(p){c.push(p)}});if(await Promise.all(d),c.length>0){for(let m=0;m<c.length;m+=1)console.error(c[m]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const r=Object.assign({},n),o=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&r.user&&await Js(this.userStorage,this.storageKey+"-user",{user:r.user});const l=Object.assign({},r);delete l.user;const c=Ff(l);await Js(this.storage,this.storageKey,c)}else{const l=Ff(r);await Js(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await _r(this.storage,this.storageKey),await _r(this.storage,this.storageKey+"-code-verifier"),await _r(this.storage,this.storageKey+"-user"),this.userStorage&&await _r(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&_n()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Vs);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:o}}=r;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((o.expires_at*1e3-n)/Vs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${Vs}ms, refresh threshold is ${nu} ticks`),l<=nu&&await this._callRefreshToken(o.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Op)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_n()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,o){const l=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&l.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[c,d]=await zs(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(d)}`});l.push(m.toString())}if(o?.queryParams){const c=new URLSearchParams(o.queryParams);l.push(c.toString())}return o?.skipBrowserRedirect&&l.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${n}?${l.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var o;const{data:l,error:c}=r;return c?{data:null,error:c}:await Fe(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token})})}catch(r){if(Le(r))return{data:null,error:r};throw r}}async _enroll(n){try{return await this._useSession(async r=>{var o,l;const{data:c,error:d}=r;if(d)return{data:null,error:d};const m=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:p,error:g}=await Fe(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token});return g?{data:null,error:g}:(n.factorType==="totp"&&(!((l=p?.totp)===null||l===void 0)&&l.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(r){if(Le(r))return{data:null,error:r};throw r}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var o;const{data:l,error:c}=r;if(c)return{data:null,error:c};const{data:d,error:m}=await Fe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token});return m?{data:null,error:m}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:m})})}catch(r){if(Le(r))return{data:null,error:r};throw r}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var o;const{data:l,error:c}=r;return c?{data:null,error:c}:await Fe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token})})}catch(r){if(Le(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(n){const{data:r,error:o}=await this._challenge({factorId:n.factorId});return o?{data:null,error:o}:await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const o=n?.factors||[],l=o.filter(d=>d.factor_type==="totp"&&d.status==="verified"),c=o.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:o,totp:l,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var r,o;const{data:{session:l},error:c}=n;if(c)return{data:null,error:c};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Mc(l.access_token);let m=null;d.aal&&(m=d.aal);let p=m;((o=(r=l.user.factors)===null||r===void 0?void 0:r.filter(x=>x.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(p="aal2");const y=d.amr||[];return{data:{currentLevel:m,nextLevel:p,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(n,r={keys:[]}){let o=r.keys.find(m=>m.kid===n);if(o)return o;const l=Date.now();if(o=this.jwks.keys.find(m=>m.kid===n),o&&this.jwks_cached_at+z0>l)return o;const{data:c,error:d}=await Fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=l,o=c.keys.find(m=>m.kid===n),!o)?null:o}async getClaims(n,r={}){try{let o=n;if(!o){const{data:C,error:b}=await this.getSession();if(b||!C.session)return{data:null,error:b};o=C.session.access_token}const{header:l,payload:c,signature:d,raw:{header:m,payload:p}}=Mc(o);r?.allowExpired||fx(c.exp);const g=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!g){const{error:C}=await this.getUser(o);if(C)throw C;return{data:{claims:c,header:l,signature:d},error:null}}const y=px(l.alg),x=await crypto.subtle.importKey("jwk",g,y,!0,["verify"]);if(!await crypto.subtle.verify(y,x,d,Z0(`${m}.${p}`)))throw new iu("Invalid JWT signature");return{data:{claims:c,header:l,signature:d},error:null}}catch(o){if(Le(o))return{data:null,error:o};throw o}}}ea.nextInstanceID=0;const Px=ea;class Ox extends Px{constructor(n){super(n)}}var Ax=function(s,n,r,o){function l(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function m(y){try{g(o.next(y))}catch(x){d(x)}}function p(y){try{g(o.throw(y))}catch(x){d(x)}}function g(y){y.done?c(y.value):l(y.value).then(m,p)}g((o=o.apply(s,n||[])).next())})};class Ix{constructor(n,r,o){var l,c,d;this.supabaseUrl=n,this.supabaseKey=r;const m=U0(n);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const p=`sb-${m.hostname.split(".")[0]}-auth-token`,g={db:C0,realtime:P0,auth:Object.assign(Object.assign({},T0),{storageKey:p}),global:N0},y=M0(o??{},g);this.storageKey=(l=y.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=y.global.headers)!==null&&c!==void 0?c:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(x,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=y.auth)!==null&&d!==void 0?d:{},this.headers,y.global.fetch),this.fetch=R0(r,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new Jw(new URL("rest/v1",m).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new _0(this.storageUrl.href,this.headers,this.fetch,o?.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new Uw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,r={},o={}){return this.rest.rpc(n,r,o)}channel(n,r={config:{}}){return this.realtime.channel(n,r)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,r;return Ax(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:o}=yield this.auth.getSession();return(r=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:r,detectSessionInUrl:o,storage:l,userStorage:c,storageKey:d,flowType:m,lock:p,debug:g},y,x){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ox({url:this.authUrl.href,headers:Object.assign(Object.assign({},S),y),storageKey:d,autoRefreshToken:n,persistSession:r,detectSessionInUrl:o,storage:l,userStorage:c,flowType:m,lock:p,debug:g,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new d0(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,o)=>{this._handleTokenChanged(r,"CLIENT",o?.access_token)})}_handleTokenChanged(n,r,o){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==o?this.changedAccessToken=o:n==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Rx=(s,n,r)=>new Ix(s,n,r);function Dx(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const n=s.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}Dx()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Lx="https://hkvkomtaffybchjdjfws.supabase.co",Mx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhrdmtvbXRhZmZ5YmNoamRqZndzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY4MTc3ODQsImV4cCI6MjA3MjM5Mzc4NH0.A0Eaqx1g8ADX0uiUL8eDw-2h6RF50csP-KKCTtVdhCE",at=Rx(Lx,Mx,{auth:{persistSession:!1}});async function au(s){const n=s&&s.headers?{...s.headers}:{};try{if(at&&typeof at.auth?.getSession=="function"){const o=(await at.auth.getSession())?.data?.session?.access_token??null;o&&(n.Authorization=`Bearer ${o}`)}}catch{}if(!n.Authorization)try{const r=No();r&&(n.Authorization=`Bearer ${r}`)}catch{}return{...s||{},headers:n}}const Or=Object.freeze(Object.defineProperty({__proto__:null,attachAuthHeaders:au,default:au},Symbol.toStringTag,{value:"Module"}));async function Ux(s,n){try{const r={id:n.id,name:n.name,price:n.price,type:n.type,image:n.image||null,description:n.description||""},o=await au({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s,item:r})}),l=await fetch("/api/user?action=buy",o);if(!l.ok){try{const d=await l.json();console.warn("[buyShopItem] server error",d.code||d.message||l.status)}catch{console.warn("[buyShopItem] server error status",l.status)}return null}const c=await l.json();if(c.user){try{mn({data:c.user})}catch{}return c.user}return null}catch{return null}}async function Io(s){try{try{const{data:l,error:c}=await at.from("fitbuddyai_userdata").select("*").eq("user_id",s).limit(1).maybeSingle();if(c||!l)return null;try{mn({data:l})}catch{}return l}catch{return null}const r=await fetch(`/api/user/${s}`);if(!r.ok)return null;const o=await r.json();if(o.user){try{mn({data:o.user})}catch{}return o.user}return null}catch{return null}}async function Fx(s,n){const r=String(s).trim().toLowerCase();if(!0){const d=await at.auth.signInWithPassword({email:r,password:n});if(d.error||!d.data?.session){const x=d.error?.message||"Sign in failed";if(/confirm|verify|not.*confirmed|email.*confirm/i.test(x)){const S=new Error("Email not confirmed");throw S.code="ERR_EMAIL_UNCONFIRMED",S}throw new Error(x)}const m=d.data.session.access_token,p=d.data.user;let g=p.user_metadata&&p.user_metadata.username||null;if(!g)try{const{data:x}=await at.from("fitbuddyai_userdata").select("username").eq("user_id",p.id).limit(1).maybeSingle();x&&x.username&&(g=x.username)}catch{}const y={data:{id:p.id,email:p.email,username:g||p.email,energy:p.user_metadata&&p.user_metadata.energy||0}};try{sessionStorage.removeItem("fitbuddyai_no_auto_restore")}catch{}try{localStorage.removeItem("fitbuddyai_no_auto_restore")}catch{}try{mn({data:y.data,token:m},{skipBackup:!0,forceSave:!0})}catch{}try{m&&op(m)}catch{}try{const x=y.data.username;x&&await at.auth.updateUser({data:{display_name:x,username:x}})}catch(x){console.warn("[authService] failed to update supabase user metadata",x&&x.message||String(x))}return y.data}const l=await fetch("/api/auth?action=signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:n})});if(!l.ok){const d=await l.json();throw new Error(d.message||"Sign in failed")}const c=await l.json();if(c.user){const d={data:c.user,token:c.token??null};try{mn(d,{skipBackup:!0})}catch{}}return c.user}async function Bx(s,n,r){const o=String(s).trim().toLowerCase();if(!0){const m=await at.auth.signUp({email:o,password:r,options:{data:{username:n,energy:100}}});if(m.error)throw new Error(m.error.message||"Sign up failed");const p=m.data?.session?.access_token??null,g=m.data?.user??null,y=g?{id:g.id,email:g.email,username:n,energy:100}:null;if(p&&y){try{sessionStorage.removeItem("fitbuddyai_no_auto_restore")}catch{}try{localStorage.removeItem("fitbuddyai_no_auto_restore")}catch{}try{mn({data:y,token:p},{skipBackup:!0,forceSave:!0})}catch{}}try{g&&g.id&&await fetch("/api/auth?action=create_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:g.id,email:g.email,username:n})})}catch(x){console.warn("[authService] create_profile call failed",x)}return y}const c=await fetch("/api/auth?action=signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,username:n,password:r})});if(!c.ok){let m=null;try{m=await c.json()}catch{}const p=new Error(m&&m.message||"Sign up failed");throw m&&m.code&&(p.code=m.code),p}const d=await c.json();if(d.user){const m={data:d.user,token:d.token??null};try{mn(m,{skipBackup:!0})}catch{}}return d.user}async function Wx(){try{const n="http://localhost:5173".trim()||"",r=window.location.origin+window.location.pathname+window.location.search+window.location.hash,o=n&&n!=="PUT_YOUR_PUBLIC_APP_URL_HERE"?n.replace(/\/$/,"")+window.location.pathname:r;console.log("[authService] initiating Google sign-in, redirectTo=",o),await at.auth.signInWithOAuth({provider:"google",options:{redirectTo:o}});return}catch(n){throw console.warn("[authService] Google sign-in failed",n),n}throw new Error("Google sign-in is not available in this environment.")}async function $x(s){try{const n=await fetch("/api/auth?action=google_id_token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_token:s})});if(!n.ok){let o=null;try{o=await n.json()}catch{}throw new Error(o&&o.message||`Google ID token sign-in failed (${n.status})`)}const r=await n.json();if(r&&r.user)try{mn({data:r.user,token:r.token??null},{skipBackup:!0})}catch{}return r}catch(n){throw console.warn("[authService] signInWithGoogleCredential error",n),n}}function Ro(){try{return In()}catch{return null}}function zx(){try{mu()}catch{}try{sessionStorage.removeItem("fitbuddyai_no_auto_restore")}catch{}try{localStorage.removeItem("fitbuddyai_no_auto_restore")}catch{}try{const{clearUserData:s}=require("./localStorage");s()}catch{}try{sessionStorage.removeItem("fitbuddyaiUsername")}catch{}try{at&&typeof at.auth?.signOut=="function"&&at.auth.signOut().catch(()=>{})}catch{}}const qx=()=>{const s=Rn(),n=()=>{try{localStorage.setItem("fitbuddyai_no_auto_restore","1")}catch{}try{sessionStorage.setItem("fitbuddyai_no_auto_restore","1")}catch{}try{mu()}catch{}try{ri()}catch{}try{ni()}catch{}try{sa()}catch{}try{zx()}catch{}try{window.dispatchEvent(new Event("fitbuddyai-logout"))}catch{}s("/signin"),(async()=>{try{let r=null;try{const{loadUserData:o}=await $e(async()=>{const{loadUserData:c}=await Promise.resolve().then(()=>zt);return{loadUserData:c}},void 0),l=o();r=l?.id||l?.sub||l?.data?.id||null}catch{}if(r){try{await hu(String(r))}catch{}try{await na(String(r))}catch{}}}catch{}})();try{setTimeout(()=>{try{sessionStorage.removeItem("fitbuddyai_no_auto_restore")}catch{}try{localStorage.removeItem("fitbuddyai_no_auto_restore")}catch{}},3e3)}catch{}};return a.jsx("button",{className:"btn signout-btn",onClick:n,children:"Sign Out"})},Hx=({userData:s,onProfileUpdate:n})=>{const[r,o]=E.useState(s||Ro()),[l,c]=E.useState(!1),[d,m]=E.useState(r?.username||""),[p,g]=E.useState(r?.avatar||"/images/fitbuddyai_head.png"),[y,x]=E.useState(!1),[S,C]=E.useState(""),b=Rn();if(E.useEffect(()=>{let B=!1;const X=async()=>{try{if(B)return;const z=Ro();if(!z?.id||typeof document<"u"&&document.hidden)return;const te=await Io(z.id);!B&&te&&o(te)}catch{}};X();const L=setInterval(X,15e3);return()=>{B=!0,clearInterval(L)}},[]),!r)return a.jsx("div",{className:"profile-page",children:a.jsxs("div",{className:"profile-card fade-in-bounce",children:[a.jsx("div",{className:"profile-avatar-bg",children:a.jsx("img",{src:"/images/fitbuddyai_head.png",alt:"User Avatar",className:"avatar","data-testid":"profile-avatar"})}),a.jsx("h1",{className:"profile-username-gradient",children:"Guest"}),a.jsxs("div",{className:"profile-actions-row",children:[a.jsx("button",{className:"btn edit-profile",onClick:()=>b("/signin"),children:"Sign In"}),a.jsx("button",{className:"btn view-achievements",onClick:()=>b("/signup"),children:"Sign Up"})]}),a.jsx("p",{className:"not-logged-in-desc",children:"Sign in to track your workouts, earn energy, and unlock achievements!"})]})});const _=["https://api.dicebear.com/7.x/bottts/svg?seed=FitBuddyAI1","https://api.dicebear.com/7.x/bottts/svg?seed=DragonHead","https://api.dicebear.com/7.x/bottts/svg?seed=Duolingo"],k=["/images/fitbuddyai_head.png",..._,"https://api.dicebear.com/7.x/bottts/svg?seed=FitBuddyAI2","https://api.dicebear.com/7.x/bottts/svg?seed=FitBuddyAI3","https://api.dicebear.com/7.x/bottts/svg?seed=FitBuddyAI4","https://api.dicebear.com/7.x/bottts/svg?seed=Pizza","https://we09532.github.io/Image_Hosting/Fishwins/Fishwin_Head.png","https://api.dicebear.com/7.x/bottts/svg?seed=Language","https://api.dicebear.com/7.x/bottts/svg?seed=Fitness","https://media1.giphy.com/media/4bjIKBOWUnVPICCzJc/source.gif"],$=()=>{m(r?.username||""),g(r?.avatar||"/images/fitbuddyai_head.png"),c(!0),C("")},F=()=>{c(!1),C("")},U=async()=>{x(!0),C("");try{const B=await fetch("/api/user?action=update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r.id,username:d,avatar:p})});if(B.ok){const X=await B.json();o(X.user),n(X.user),c(!1);try{const L=X.user?.username;L&&at&&typeof at.auth?.updateUser=="function"&&await at.auth.updateUser({data:{display_name:L,username:L}})}catch(L){console.warn("[ProfilePage] failed to update supabase user metadata",L&&L.message||String(L))}}else{const X={...r,username:d,avatar:p};try{const{saveUserData:L}=await $e(async()=>{const{saveUserData:z}=await Promise.resolve().then(()=>zt);return{saveUserData:z}},void 0);L({data:X})}catch{}o(X),n(X),c(!1),C("Saved locally (session)  server unavailable.")}}catch{const X={...r,username:d,avatar:p};try{const{saveUserData:L}=await $e(async()=>{const{saveUserData:z}=await Promise.resolve().then(()=>zt);return{saveUserData:z}},void 0);L({data:X})}catch{}o(X),n(X),c(!1),C("Saved locally (network error).")}finally{x(!1)}};return a.jsx("div",{className:"profile-page",children:a.jsxs("div",{className:"profile-card fade-in-bounce",children:[a.jsx("div",{className:"profile-avatar-bg",children:a.jsx("img",{src:l?p:r.avatar||"/images/fitbuddy_head.png",alt:"User Avatar",className:"avatar","data-testid":"profile-avatar"})}),l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"avatar-select-row",children:k.map(B=>{const L=!_.includes(B)||Array.isArray(r.inventory)&&r.inventory.some(z=>z.image===B);return a.jsxs("button",{className:`avatar-select-btn${p===B?" selected":""}${L?"":" locked"}`,onClick:()=>{L?g(B):b("/shop")},type:"button","aria-label":L?"Choose avatar":"Locked avatar",children:[!L&&a.jsx("span",{className:"avatar-lock-emoji",children:""}),a.jsx("img",{src:B,alt:"avatar option",className:"avatar avatar-option"})]},B)})}),a.jsx("input",{className:"edit-username-input",value:d,onChange:B=>m(B.target.value),maxLength:20,placeholder:"Username"}),S&&a.jsx("div",{className:"edit-error",children:S}),a.jsxs("div",{className:"profile-actions-row",children:[a.jsx("button",{className:"btn edit-profile",onClick:U,disabled:y,children:y?"Saving...":"Save"}),a.jsx("button",{className:"btn view-achievements",onClick:F,disabled:y,children:"Cancel"})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("h1",{className:"profile-username-gradient",children:r.username}),a.jsxs("div",{className:"profile-stats-row",children:[a.jsxs("div",{className:"profile-stat",children:[a.jsx("span",{className:"profile-stat-label",children:"Workouts"}),a.jsx("span",{className:"profile-stat-value",children:r?.workouts?.length??"-"})]}),a.jsxs("div",{className:"profile-stat",children:[a.jsx("span",{className:"profile-stat-label",children:"Streak"}),a.jsx("span",{className:"profile-stat-value streak",children:r?.streak??"-"})]}),a.jsxs("div",{className:"profile-stat",children:[a.jsx("span",{className:"profile-stat-label",children:"Energy"}),a.jsx("span",{className:"profile-stat-value points",children:r?.energy??0})]})]}),a.jsxs("div",{className:"profile-actions-row",children:[a.jsx("button",{className:"btn edit-profile",onClick:$,children:"Edit Profile"}),a.jsx("button",{className:"btn view-achievements",children:"View Achievements"}),a.jsx(qx,{})]})]})]})})};function Gx(s){try{const r=s.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=decodeURIComponent(atob(r).split("").map(function(l){return"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(o)}catch{return null}}const Ap=()=>{const s=E.useRef(null),n="401606357553-q8h8b6do4c26cuho2ja94p03kkq5vht1.apps.googleusercontent.com";return!0?a.jsx("div",{className:"google-fallback",children:a.jsxs("button",{className:"btn btn-google",onClick:async()=>{try{await Wx()}catch(o){console.warn("[GoogleIdentityButton] signInWithGoogle failed",o),window.alert("Google sign-in failed. Check console for details.")}},children:[a.jsx("span",{className:"google-icon","aria-hidden":"true",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 533.5 544.3",width:"18",height:"18","aria-hidden":"true",children:[a.jsx("path",{fill:"#4285F4",d:"M533.5 278.4c0-17.4-1.6-34.1-4.6-50.4H272v95.5h146.9c-6.3 34.1-25 63-53.4 82.3v68.3h86.4c50.6-46.6 81.6-115.3 81.6-195.7z"}),a.jsx("path",{fill:"#34A853",d:"M272 544.3c72.6 0 133.7-24.1 178.2-65.6l-86.4-68.3c-24 16.1-54.9 25.6-91.8 25.6-70.6 0-130.4-47.6-151.8-111.5H29.8v69.9C74.3 486.9 166.3 544.3 272 544.3z"}),a.jsx("path",{fill:"#FBBC05",d:"M120.2 325.1c-10.9-32.6-10.9-67.6 0-100.2V155H29.8c-39.6 77.4-39.6 169.4 0 246.8l90.4-76.7z"}),a.jsx("path",{fill:"#EA4335",d:"M272 107.7c38.5 0 73 13.2 100.3 39.2l75.1-75.1C405.8 24.7 346.7 0 272 0 166.3 0 74.3 57.4 29.8 143.6l90.4 69.9C141.6 155.3 201.4 107.7 272 107.7z"})]})}),a.jsx("span",{className:"google-text",children:"Continue with Google"})]})}):(E.useEffect(()=>{const o=()=>{if(window.google&&window.google.accounts&&window.google.accounts.id)try{window.google.accounts.id.initialize({client_id:n,callback:async l=>{try{const c=l?.credential;if(!c)return;const d=Gx(c);console.log("[GoogleIdentityButton] GSI credential received, payload:",d);try{await $x(c)}catch(m){console.warn("[GoogleIdentityButton] signInWithGoogleCredential failed",m)}}catch(c){console.warn("[GoogleIdentityButton] error handling credential",c)}},auto_select:!1,cancel_on_tap_outside:!0}),s.current&&window.google.accounts.id.renderButton(s.current,{theme:"outline",size:"large",width:"100%"})}catch(l){console.warn("[GoogleIdentityButton] failed to initialize GSI",l)}else setTimeout(o,250)};return o(),()=>{try{window.google&&window.google.accounts&&window.google.accounts.id&&typeof window.google.accounts.id.cancel=="function"&&window.google.accounts.id.cancel()}catch{}}},[n]),a.jsxs("div",{children:[a.jsx("div",{ref:s}),!window.google&&a.jsx("div",{className:"google-fallback",children:a.jsx("button",{className:"btn btn-google",onClick:()=>window.alert("Google sign-in is not available. Try enabling Supabase OAuth or add VITE_GOOGLE_CLIENT_ID to your .env"),children:"Continue with Google"})})]}))},Vx=()=>{const s=Rn(),[n,r]=E.useState(""),[o,l]=E.useState(""),[c,d]=E.useState(""),[m,p]=E.useState(!1),[g,y]=E.useState(!1),[x,S]=E.useState(""),C=async b=>{b.preventDefault(),p(!0),d("");const _=String(n).trim().toLowerCase();try{const k=await Fx(_,o),$=k?{user:k,token:null}:null;if($&&$.user){const F={data:$.user,token:$.token||null};try{mn(F,{skipBackup:!0,forceSave:!0})}catch{}await(async(B=2e3)=>{const X=Date.now();for(;Date.now()-X<B;){try{const{getAuthToken:L,loadUserData:z}=await $e(async()=>{const{getAuthToken:ue,loadUserData:fe}=await Promise.resolve().then(()=>zt);return{getAuthToken:ue,loadUserData:fe}},void 0),te=L()||z()?.token||z()?.data?.token||null;if(te)return te}catch{}await new Promise(L=>setTimeout(L,150))}return null})(3e3);try{sessionStorage.setItem("fitbuddyaiUsername",$.user.username)}catch{}try{await rs($.user.id)}catch(B){console.warn("Failed to restore user data from server:",B)}try{window.dispatchEvent(new Event("fitbuddyai-login"))}catch{}try{const B="/api/userdata/load";console.log("[SignInPage] POSTing to userdata save endpoint to retrieve stored payload",B);const X=await $e(()=>Promise.resolve().then(()=>Or),void 0).then(fe=>fe.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:$.user.id})})),L=async(fe,K,oe=3,re=500)=>{let V=null,ce=null;for(let pe=1;pe<=oe;pe++)try{const q=await fetch(fe,K),H=await q.text();if(V=q,ce=H,q.ok)return{res:q,text:H};if(pe<oe&&(q.status===401||q.status===403||q.status>=500&&q.status<600)){console.warn(`[SignInPage] userdata POST attempt ${pe} failed status ${q.status}. Retrying after ${re}ms`),await new Promise(ae=>setTimeout(ae,re));continue}return{res:q,text:H}}catch(q){if(V=null,ce=null,pe<oe){console.warn(`[SignInPage] userdata POST attempt ${pe} threw, retrying after ${re}ms`,q),await new Promise(H=>setTimeout(H,re));continue}throw q}return{res:V,text:ce}},{res:z,text:te}=await L(B,X,3,500);if(!z)throw new Error("Failed to receive a response from userdata endpoint");console.log("[SignInPage] userdata POST response status:",z.status,"ok:",z.ok),te&&te.length&&console.log("[SignInPage] userdata POST response snippet:",te.slice(0,500));const ue=z.headers.get("x-userdata-source");if(ue&&console.log("[SignInPage] userdata source header:",ue),z.ok){let fe=null;try{fe=te?JSON.parse(te):null}catch(oe){console.warn("[SignInPage] userdata POST returned invalid JSON; invoking restoreUserDataFromServer fallback",oe);try{await rs($.user.id)}catch(re){console.warn("[SignInPage] fallback restore failed:",re)}}const K=fe?.stored??fe?.payload??fe;if(K)try{const oe=K.fitbuddyai_assessment_data,re=K.fitbuddyai_workout_plan,V=oe?.data??oe??null,ce=re?.data??re??null;V&&pu(V),ce&&Er(ce)}catch(oe){console.warn("Failed to save restored payload values:",oe)}}else{console.warn("[SignInPage] userdata POST returned non-ok status");try{await rs($.user.id)}catch(fe){console.warn("[SignInPage] fallback restore failed:",fe)}}}catch(B){console.warn("Failed to fetch userdata payload via POST:",B)}s("/profile")}else throw new Error("Invalid server response.")}catch(k){if(k&&(k.code==="ERR_EMAIL_UNCONFIRMED"||/Email not confirmed/i.test(k.message||""))){d("Your email address is not confirmed. Please check your inbox for the confirmation link."),S(_),y(!0);return}d(k.message)}finally{p(!1)}};return a.jsxs("div",{className:"signin-page",children:[a.jsxs("form",{className:"signin-form",onSubmit:C,children:[a.jsx("h1",{children:"Sign In"}),a.jsxs("label",{children:["Email",a.jsx("input",{type:"email",value:n,onChange:b=>r(b.target.value),required:!0,autoComplete:"username"})]}),a.jsxs("label",{children:["Password",a.jsx("input",{type:"password",value:o,onChange:b=>l(b.target.value),required:!0,autoComplete:"current-password"})]}),c&&a.jsx("div",{className:"error",children:c}),a.jsx("button",{className:"btn",type:"submit",disabled:m,children:m?"Signing in...":"Sign In"}),a.jsx("div",{className:"oauth-divider",children:"or"}),a.jsx(Ap,{}),a.jsxs("div",{className:"signup-link",children:["Don't have an account? ",a.jsx("span",{onClick:()=>s("/signup"),children:"Sign Up"})]})]}),g&&a.jsx(Jx,{email:x,onClose:()=>y(!1),onSent:()=>{y(!1),s("/verify-email?email="+encodeURIComponent(x))}})]})};function Jx({email:s,onClose:n,onSent:r}){const[o,l]=E.useState(!1),[c,d]=E.useState(""),m=async()=>{l(!0),d("");try{const p=`${"https://hkvkomtaffybchjdjfws.supabase.co".replace(/\/$/,"")}/auth/v1/recover`;(await fetch(p,{method:"POST",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhrdmtvbXRhZmZ5YmNoamRqZndzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY4MTc3ODQsImV4cCI6MjA3MjM5Mzc4NH0.A0Eaqx1g8ADX0uiUL8eDw-2h6RF50csP-KKCTtVdhCE"||"","Content-Type":"application/json"},body:JSON.stringify({email:s})})).ok?(d("Verification email resent  check your inbox (and spam)."),r()):d("Failed to resend verification email. Please contact support.")}catch{d("Failed to resend verification email. Please contact support.")}l(!1)};return a.jsx("div",{className:"hc-modal-backdrop",role:"dialog","aria-modal":"true",children:a.jsxs("div",{className:"hc-modal",children:[a.jsxs("header",{className:"hc-modal-header",children:[a.jsx("h3",{children:"Resend confirmation"}),a.jsx("button",{className:"btn",onClick:n,children:"Close"})]}),a.jsxs("div",{className:"hc-modal-body",children:[a.jsxs("p",{children:["We can resend the verification email to ",a.jsx("strong",{children:s}),". Would you like to resend it now?"]}),c&&a.jsx("div",{className:"info",children:c}),a.jsxs("div",{className:"hc-modal-actions",children:[a.jsx("button",{className:"btn",onClick:n,disabled:o,children:"Cancel"}),a.jsx("button",{className:"btn btn-primary",onClick:m,disabled:o,children:o?"Sending...":"Resend"})]})]})]})})}const Kx=()=>{const s=Rn(),[n,r]=E.useState(""),[o,l]=E.useState(""),[c,d]=E.useState(""),[m,p]=E.useState(""),[g,y]=E.useState(""),[x,S]=E.useState(!1),C=async b=>{if(b.preventDefault(),y(""),c!==m){y("Passwords do not match");return}S(!0);try{const _=String(n).trim().toLowerCase(),k=await Bx(_,o,c);if(k&&k.id){try{sessionStorage.setItem("fitbuddyaiUsername",k.username)}catch{}s("/profile")}else throw new Error("Invalid server response.")}catch(_){const k=String(_?.message||_||"");/email already exists|duplicate|23505|An account with that email already exists/i.test(k)?y("An account with that email already exists. Please sign in or use a different email."):y(k||"Sign up failed")}finally{S(!1)}};return a.jsx("div",{className:"signup-page",children:a.jsxs("form",{className:"signup-form",onSubmit:C,children:[a.jsx("h1",{children:"Sign Up"}),a.jsxs("label",{children:["Email",a.jsx("input",{type:"email",value:n,onChange:b=>r(b.target.value),required:!0})]}),a.jsxs("label",{children:["Username",a.jsx("input",{type:"text",value:o,onChange:b=>l(b.target.value),required:!0})]}),a.jsxs("label",{children:["Password",a.jsx("input",{type:"password",value:c,onChange:b=>d(b.target.value),required:!0,autoComplete:"new-password"})]}),a.jsxs("label",{children:["Confirm Password",a.jsx("input",{type:"password",value:m,onChange:b=>p(b.target.value),required:!0,autoComplete:"new-password"})]}),g&&a.jsx("div",{className:"error",children:g}),a.jsx("button",{className:"btn",type:"submit",disabled:x,children:x?"Signing up...":"Sign Up"}),a.jsx("div",{className:"oauth-divider",children:"or"}),a.jsx(Ap,{}),a.jsxs("div",{className:"signin-link",children:["Already have an account? ",a.jsx("span",{onClick:()=>s("/signin"),children:"Sign In"})]})]})})};function Qx(s){try{const n="analytics_verify_page_views",r=localStorage.getItem(n),o=r&&Number(r)||0;localStorage.setItem(n,String(o+1))}catch{}}function Yx(){return new URLSearchParams(os().search)}const Xx=()=>{const s=Rn(),r=Yx().get("email")||"",[o,l]=E.useState(!1),[c,d]=E.useState("");return E.useEffect(()=>{Qx({email:r})},[r]),a.jsx("div",{className:"email-verify-page",children:a.jsxs("div",{className:"verify-card",children:[a.jsx("h1",{children:"Confirm your email"}),a.jsxs("p",{children:["We sent a confirmation link to ",a.jsx("strong",{children:r||"your email address"}),". Please check your inbox and click the link to finish signing up."]}),a.jsx("p",{children:"If you don't see the email, check your spam/junk folder."}),a.jsx("p",{children:"After clicking the link you'll be signed in automatically."}),a.jsxs("div",{className:"verify-actions",children:[a.jsx("button",{className:"btn",onClick:()=>s("/signin"),children:"Back to Sign In"}),a.jsx("button",{className:"btn",disabled:o,onClick:async()=>{l(!0),d("");try{const m="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhrdmtvbXRhZmZ5YmNoamRqZndzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY4MTc3ODQsImV4cCI6MjA3MjM5Mzc4NH0.A0Eaqx1g8ADX0uiUL8eDw-2h6RF50csP-KKCTtVdhCE",p=`${"https://hkvkomtaffybchjdjfws.supabase.co".replace(/\/$/,"")}/auth/v1/recover`,g=JSON.stringify({email:r});if((await fetch(p,{method:"POST",headers:{apikey:m||"","Content-Type":"application/json"},body:g})).ok)d("Verification email resent  check your inbox (and spam).");else try{await at.auth.resetPasswordForEmail(r),d("Verification email resent  check your inbox (and spam).")}catch{d("Failed to resend verification email. Contact support.")}}catch{d("Failed to resend verification email. Contact support.")}l(!1)},children:"Resend confirmation"})]}),c&&a.jsx("div",{className:"info",children:c})]})})},ku=()=>a.jsx("div",{className:"notfound-container",children:a.jsxs("div",{className:"notfound-content fade-in-bounce",children:[a.jsx("div",{className:"notfound-icon-bg",children:a.jsx(gt,{size:48,color:"#fff"})}),a.jsx("h1",{className:"notfound-title",children:"404"}),a.jsx("h2",{className:"notfound-message",children:"Page Not Found"}),a.jsx("p",{className:"notfound-desc",children:"Oops! The page you are looking for does not exist."}),a.jsx("a",{className:"notfound-home-btn",href:"/?intro=0",children:"Go Home"})]})}),Zx=[{id:"avatar1",name:"Bot Buddy",image:"https://api.dicebear.com/7.x/bottts/svg?seed=FitBuddyAI1",price:100,type:"avatar",description:"A friendly robot avatar."},{id:"avatar2",name:"Dragon Head",image:"https://api.dicebear.com/7.x/bottts/svg?seed=DragonHead",price:200,type:"avatar",description:"Unleash your inner dragon!"},{id:"avatar3",name:"Duolingo Owl",image:"https://api.dicebear.com/7.x/bottts/svg?seed=Duolingo",price:250,type:"avatar",description:"Inspired by the language learning legend."},{id:"avatar4",name:"Neo Cat",image:"https://api.dicebear.com/7.x/croodles/svg?seed=NeoCat",price:120,type:"avatar",description:"A sleek cyber cat."},{id:"avatar5",name:"Mountain Goat",image:"https://api.dicebear.com/7.x/bottts/svg?seed=Goat",price:140,type:"avatar",description:"Sturdy and sure-footed."},{id:"avatar6",name:"Galaxy Fox",image:"https://api.dicebear.com/7.x/bottts/svg?seed=GalaxyFox",price:220,type:"avatar",description:"Out-of-this-world style."},{id:"avatar7",name:"Pixel Pup",image:"https://api.dicebear.com/7.x/bottts/svg?seed=PixelPup",price:80,type:"avatar",description:"Cute pixel-styled puppy."},{id:"avatar8",name:"Samurai",image:"https://api.dicebear.com/7.x/bottts/svg?seed=Samurai",price:300,type:"avatar",description:"Honor and style."},{id:"avatar9",name:"Astronaut",image:"https://api.dicebear.com/7.x/bottts/svg?seed=Astronaut",price:260,type:"avatar",description:"Reach for the stars."},{id:"avatar10",name:"Vintage Robot",image:"https://api.dicebear.com/7.x/bottts/svg?seed=VintageBot",price:110,type:"avatar",description:"Retro charm."},{id:"avatar11",name:"Neon Ninja",image:"https://api.dicebear.com/7.x/bottts/svg?seed=NeonNinja",price:210,type:"avatar",description:"Stealthy and bright."},{id:"avatar12",name:"Forest Sprite",image:"https://api.dicebear.com/7.x/bottts/svg?seed=ForestSprite",price:130,type:"avatar",description:"Whimsical woodland friend."},{id:"avatar12",name:"Forest Sprite",image:"/public/images/ChatGPT_Image_Clan_Of_27_Fire.png",price:130,type:"avatar",description:"Whimsical woodland friend."}],eb=[{id:"spinpfp",name:"Spinning Profile Picture",icon:a.jsx(Vi,{size:32,color:"#1e90cb"}),price:300,type:"powerup",description:"Make your profile picture spin for 7 days!"},{id:"sparkle",name:"Sparkle Effect",icon:a.jsx(Kn,{size:32,color:"#ffb347"}),price:150,type:"powerup",description:"Add a sparkle effect to your avatar."},{id:"smile",name:"Smile Badge",icon:a.jsx(So,{size:32,color:"#1ecb7b"}),price:80,type:"powerup",description:"Show off your positivity!"},{id:"glow",name:"Glow Outline",icon:a.jsx(Kn,{size:32,color:"#1ecb7b"}),price:140,type:"powerup",description:"Add a soft glow behind your avatar."},{id:"confetti",name:"Confetti Burst",icon:a.jsx(Kn,{size:32,color:"#ffb347"}),price:220,type:"powerup",description:"Celebrate finishes with confetti."},{id:"badge-pro",name:"Pro Badge",icon:a.jsx(So,{size:32,color:"#1ecb7b"}),price:190,type:"powerup",description:"Show you are a FitBuddyAI Pro."},{id:"trail",name:"Movement Trail",icon:a.jsx(Vi,{size:32,color:"#1e90cb"}),price:170,type:"powerup",description:"Leave a subtle trail when you move."},{id:"animated-frames",name:"Animated Frames",icon:a.jsx(Kn,{size:32,color:"#ffb347"}),price:250,type:"powerup",description:"Frame your avatar with animated borders."},{id:"voice-chime",name:"Voice Chime",icon:a.jsx(So,{size:32,color:"#1ecb7b"}),price:120,type:"powerup",description:"Play a chime when you start workouts."},{id:"seasonal-halo",name:"Seasonal Halo",icon:a.jsx(Kn,{size:32,color:"#1ecb7b"}),price:160,type:"powerup",description:"A seasonal halo that changes with events."},{id:"vfx",name:"VFX Pack",icon:a.jsx(Kn,{size:32,color:"#ffb347"}),price:320,type:"powerup",description:"A bundle of effects for your avatar."},{id:"status-glow",name:"Status Glow",icon:a.jsx(Vi,{size:32,color:"#1e90cb"}),price:90,type:"powerup",description:"Show a small glow if you are active."}],tb=({user:s,onPurchase:n})=>{const[r,o]=E.useState("avatars"),[l,c]=E.useState(null),[d,m]=E.useState(""),[p,g]=E.useState("popular"),[y,x]=E.useState(null),S=E.useRef(null),C=E.useRef(null),b=E.useRef(null),_=E.useRef(void 0),[k,$]=E.useState(!1);E.useEffect(()=>{if(!s?.id)return;const z=async()=>{await Io(s.id)&&window.dispatchEvent(new Event("storage"))};return z(),S.current=setInterval(()=>{typeof document<"u"&&document.hidden||z()},7e3),()=>{S.current&&clearInterval(S.current)}},[s?.id]),E.useEffect(()=>{const z=C.current,te=b.current;if(!z||!te)return;const ue=z.querySelector(`button[data-tab="${r}"]`);if(!ue)return;const fe=ue.getBoundingClientRect(),K=z.getBoundingClientRect(),oe=fe.left-K.left+z.scrollLeft;te.style.width=`${fe.width}px`,te.style.transform=`translateX(${oe}px)`},[r]),E.useEffect(()=>{const z=C.current;if(!z)return;const te=ue=>{if(!(ue.key==="ArrowLeft"||ue.key==="ArrowRight"))return;ue.preventDefault();const fe=["avatars","powerups"],K=fe.indexOf(r);let oe=K;ue.key==="ArrowLeft"&&(oe=Math.max(0,K-1)),ue.key==="ArrowRight"&&(oe=Math.min(fe.length-1,K+1)),fe[oe]&&fe[oe]!==r&&o(fe[oe])};return z.addEventListener("keydown",te),()=>z.removeEventListener("keydown",te)},[r]),E.useEffect(()=>{const z=_.current??s?.energy??0,te=s?.energy??0;if(te>z){$(!0);const ue=setTimeout(()=>$(!1),900);return()=>clearTimeout(ue)}_.current=te},[s?.energy]);const F=Math.min(100,Math.round((s?.energy||0)/(s?.maxEnergy||500)*100)),B=`fill--${Math.round(F/5)*5}`,X=async z=>{if(s.energy<z.price){alert("Not enough energy!");return}c(z.id);const te=await Ux(s.id,z);c(null),te?(n(z),window.dispatchEvent(new Event("storage"))):alert("Purchase failed.")},L=z=>{const te=d.trim().toLowerCase();let ue=z.filter(fe=>!te||fe.name.toLowerCase().includes(te)||(fe.description||"").toLowerCase().includes(te));return p==="price-asc"&&(ue=ue.sort((fe,K)=>fe.price-K.price)),p==="price-desc"&&(ue=ue.sort((fe,K)=>K.price-fe.price)),ue};return a.jsxs("div",{className:"shop-page fade-in-bounce",children:[a.jsxs("header",{className:"shop-header",children:[a.jsx(gt,{size:32,className:"shop-logo"}),a.jsx("h1",{className:"shop-title gradient-text",children:"FitBuddyAI Shop"}),a.jsx("div",{className:"shop-energy",children:a.jsxs("div",{className:`energy-pill ${k?"pulse":""}`,"aria-live":"polite",children:[a.jsxs("span",{className:"energy-value",children:[" ",s.energy]}),a.jsx("div",{className:"energy-meter","aria-hidden":!0,children:a.jsx("div",{className:`fill ${B}`})})]})})]}),a.jsxs("div",{className:"shop-topbar",children:[a.jsxs("div",{className:"shop-tabs",ref:C,role:"tablist","aria-label":"Shop categories",children:[a.jsx("div",{className:"tab-indicator",ref:b,"aria-hidden":"true"}),a.jsx("button",{"data-tab":"avatars",role:"tab","aria-pressed":r==="avatars",className:r==="avatars"?"active":"",onClick:()=>o("avatars"),children:"Avatars"}),a.jsx("button",{"data-tab":"powerups",role:"tab","aria-pressed":r==="powerups",className:r==="powerups"?"active":"",onClick:()=>o("powerups"),children:"Powerups"})]}),a.jsxs("div",{className:"shop-controls",children:[a.jsxs("div",{className:"search-wrap",role:"search",children:[a.jsx(Hy,{size:18,className:"icon-muted"}),a.jsx("input",{"aria-label":"Search shop items",placeholder:"Search items",value:d,onChange:z=>m(z.target.value)})]}),a.jsxs("div",{className:"sort-wrap",children:[a.jsx(By,{size:16,className:"icon-muted"}),a.jsxs("select",{"aria-label":"Sort items",value:p,onChange:z=>g(z.target.value),children:[a.jsx("option",{value:"popular",children:"Recommended"}),a.jsx("option",{value:"price-asc",children:"Price: Low to High"}),a.jsx("option",{value:"price-desc",children:"Price: High to Low"})]})]})]})]}),a.jsxs("div",{className:"shop-featured",children:[a.jsxs("div",{className:"featured-left",children:[a.jsx(gt,{size:28}),a.jsxs("div",{children:[a.jsx("div",{className:"featured-title",children:"Limited-time: Double Energy Sundays"}),a.jsx("div",{className:"featured-desc",children:"Buy selected powerups and receive double energy back for your first workout."})]})]}),a.jsx("button",{className:"featured-cta",children:"Learn More"})]}),a.jsxs("div",{className:"shop-items-grid",children:[r==="avatars"&&L(Zx).map(z=>{const te=Array.isArray(s.inventory)&&s.inventory.some(ue=>ue.id===z.id);return a.jsxs("div",{className:"shop-card",onClick:()=>x(z),children:[a.jsx("div",{className:"shop-card-top",children:a.jsx("img",{src:z.image,alt:z.name,className:"shop-avatar-img"})}),a.jsxs("div",{className:"shop-card-body",children:[a.jsxs("h2",{className:"shop-item-title",children:[z.name," ",te&&a.jsx("span",{className:"owned-badge",children:"Owned"})]}),a.jsx("p",{className:"shop-item-desc",children:z.description}),a.jsxs("div",{className:"shop-card-footer",children:[a.jsxs("span",{className:"price-badge",children:[" ",z.price]}),a.jsx("button",{className:"shop-buy-btn",disabled:te||s.energy<z.price||l===z.id,onClick:ue=>{ue.stopPropagation(),X(z)},children:te?"Owned":l===z.id?"Buying...":a.jsxs(a.Fragment,{children:[a.jsx(ff,{size:16})," Buy"]})})]})]})]},z.id)}),r==="powerups"&&L(eb).map(z=>a.jsxs("div",{className:"shop-card",onClick:()=>x(z),children:[a.jsx("div",{className:"shop-card-top",children:a.jsx("div",{className:"shop-powerup-icon",children:z.icon})}),a.jsxs("div",{className:"shop-card-body",children:[a.jsx("h2",{className:"shop-item-title",children:z.name}),a.jsx("p",{className:"shop-item-desc",children:z.description}),a.jsxs("div",{className:"shop-card-footer",children:[a.jsxs("span",{className:"price-badge",children:[" ",z.price]}),a.jsx("button",{className:"shop-buy-btn",disabled:s.energy<z.price||l===z.id,onClick:te=>{te.stopPropagation(),X(z)},children:l===z.id?"Buying...":a.jsxs(a.Fragment,{children:[a.jsx(ff,{size:16})," Buy"]})})]})]})]},z.id))]}),y&&a.jsx("div",{className:"shop-preview",onClick:()=>x(null),children:a.jsxs("div",{className:"preview-card",onClick:z=>z.stopPropagation(),children:[a.jsx("button",{className:"preview-close",onClick:()=>x(null),children:""}),a.jsxs("div",{className:"preview-body",children:[a.jsxs("div",{className:"preview-demo",children:[y.type==="avatar"&&y.image&&a.jsx("img",{src:y.image,alt:y.name,className:"preview-img"}),y.type==="powerup"&&a.jsxs("div",{className:"powerup-demo",children:[y.id==="spinpfp"&&a.jsx("div",{className:"preview-demo-box spin-anim",children:""}),y.id==="sparkle"&&a.jsxs("div",{className:"preview-demo-box dots-anim",children:[a.jsx("span",{}),a.jsx("span",{}),a.jsx("span",{})]}),y.id==="confetti"&&a.jsx("div",{className:"preview-demo-box confetti-anim",children:""}),y.id==="glow"&&a.jsx("div",{className:"preview-demo-box glow-anim",children:""}),y.id==="trail"&&a.jsx("div",{className:"preview-demo-box trail-anim",children:""}),y.id==="animated-frames"&&a.jsx("div",{className:"preview-demo-box frames-anim",children:""}),y.id==="voice-chime"&&a.jsx("div",{className:"preview-demo-box chime-anim",children:""}),y.id==="vfx"&&a.jsx("div",{className:"preview-demo-box vfx-anim",children:""}),y.id==="status-glow"&&a.jsx("div",{className:"preview-demo-box statusglow-anim",children:""}),!["spinpfp","sparkle","confetti","glow","trail","animated-frames","voice-chime","vfx","status-glow"].includes(y.id)&&a.jsx("div",{className:"preview-demo-box",children:"Preview"})]})]}),a.jsx("h3",{children:y.name}),a.jsx("p",{children:y.description}),a.jsxs("div",{className:"preview-actions",children:[a.jsxs("span",{className:"price-badge",children:[" ",y.price]}),a.jsxs("div",{className:"preview-actions-row",children:[a.jsx("button",{className:"shop-buy-btn",onClick:()=>{X(y),x(null)},children:"Buy"}),a.jsx("button",{className:"shop-buy-btn",onClick:()=>{window.dispatchEvent(new CustomEvent("shop-try-on",{detail:{preview:y}}))},children:"Try On"})]})]})]})]})})]})},Bc="Hi! I am Buddy  your AI Fitness assistant. I can answer questions about your workouts, goals, and progress.",nb=500,qf=12,rb=["","Examples (MUST follow the JSON format exactly, but feel free to chnage the data and values):","","1) Simple numeric set (set energy to 10)","Human reply:","I've increased your energy to help with today's workout.","","JSON block:","```json","{",'  "__action": true,','  "updates": [','    { "op": "set", "path": "energy", "value": 10 }',"  ],",'  "summary": "Set energy to 10"',"}","```","","2) Change username","Human reply:","I can update your display name now.","","JSON block:","```json","{",'  "__action": true,','  "updates": [','    { "op": "set", "path": "username", "value": "fit_william" }',"  ],",'  "summary": "Change username to fit_william"',"}","```","","3) Add an item to inventory (push)","Human reply:","I'll add the SuperBand to your inventory for resistance training.","","JSON block:","```json","{",'  "__action": true,','  "updates": [',"    {",'      "op": "push",','      "path": "inventory",','      "value": {','        "id": "superband-01",','        "name": "SuperBand",','        "type": "equipment",','        "acquiredAt": "2025-09-05"',"      }","    }","  ],",'  "summary": "Add SuperBand to inventory"',"}","```","","4) Replace the full workout plan (ONLY if user explicitly requests a full replacement)","Human reply:","You asked to replace your entire workout plan. I will prepare a complete plan object  please confirm before applying.","","JSON block (skeleton example):","```json","{",'  "__action": true,','  "updates": [',"    {",'      "op": "set",','      "path": "workoutPlan",','      "value": { "id": "<id>", "name": "<name>", "startDate": "<YYYY-MM-DD>", "endDate": "<YYYY-MM-DD>", "dailyWorkouts": [ /* day objects */ ] }',"    }","  ],",'  "summary": "Replace entire workoutPlan (user-requested full replacement)"',"}","```","","Instruction: DO NOT create or emit a full workoutPlan unless the user explicitly asks for a full replacement. Prefer patch-style single-day or small updates. If the user asks for a full plan, emit a compact skeleton like above and ask for confirmation before applying.","","5) Multiple updates in one action:","Human reply:","I'll apply the three updates you requested: raise energy, add equipment, and update your display name.","","JSON block:","```json","{",'  "__action": true,','  "updates": [','    { "op": "set", "path": "energy", "value": 8 },',"    {",'      "op": "push",','      "path": "inventory",','      "value": { "id": "resmat-02", "name": "Travel Mat", "type": "equipment", "acquiredAt": "2025-09-05" }',"    },",'    { "op": "set", "path": "username", "value": "will_fit" }',"  ],",'  "summary": "Set energy to 8, add Travel Mat to inventory, change username to will_fit"',"}","```","","6) When no changes are intended:","Human reply only (no JSON block):","No changes are needed  here's a suggestion: try adding a 10-minute mobility warmup before your workouts this week.","","(Must NOT include a JSON block in this case.)","","Short checklist to follow exactly:","- Always emit human reply first.",'- If proposing changes emit exactly one fenced JSON block with the object keys: "__action", "updates", "summary".','- Use "set" to replace values and "push" to append to arrays.','- For "workoutPlan" send the full new object as the value for a "set".',"- No additional text inside or around the fenced JSON block.","","NEW EXAMPLES (Modify single days)","","7) Modify a single day's workouts (preferred when only one day needs adjustment)","Human reply:","I'll update day 3's workouts to an active recovery set  keeping the rest of your plan intact.","","JSON block:","```json","{",'  "__action": true,','  "updates": [','    { "op": "set", "path": "workoutPlan/dailyWorkouts/2/workouts", "value": [ { "name": "Foam Rolling", "description": "Release muscle tension.", "difficulty": "beginner", "duration": "15 minutes", "reps": "1x15", "muscleGroups": ["full body"], "equipment": ["Foam roller"] } ] }',"  ],",'  "summary": "Set Day 3 to active recovery workouts"',"}","```","","8) Modify a single day's metadata (type or totalTime)","Human reply:","I'll change day 3's type to 'activeRecovery' and adjust totalTime to '30 minutes'.","","JSON block:","```json","{",'  "__action": true,','  "updates": [','    { "op": "set", "path": "workoutPlan/dailyWorkouts/2/type", "value": "activeRecovery" },','    { "op": "set", "path": "workoutPlan/dailyWorkouts/2/totalTime", "value": "30 minutes" }',"  ],",'  "summary": "Update Day 3 type and totalTime"',"}","```","","9) Recommended example day (use as template for modifications)","Human reply:","Here's a recommended example day  when updating a day, keep the same object shape:","","Example day JSON:","```json","{",'    "date": "2025-09-10",','    "type": "Full Body",','    "completed": false,','    "totalTime": "30 minutes",','    "workouts": [',"        {",'            "name": "Lunges",','            "description": "",','            "difficulty": "beginner",','            "duration": "10 minutes",','            "reps": "3x10 each leg",','            "muscleGroups": ["quads","glutes","hamstrings"],','            "equipment": []',"        },","        {",'            "name": "Plank",','            "description": "",','            "difficulty": "beginner",','            "duration": "10 minutes",','            "reps": "3x30 seconds",','            "muscleGroups": ["core"],','            "equipment": []',"        },","        {",'            "name": "Overhead Press (Dumbbell)",','            "description": "",','            "difficulty": "beginner",','            "duration": "10 minutes",','            "reps": "3x10",','            "muscleGroups": ["shoulders"],','            "equipment": ["dumbbell"]',"        }","    ],",'    "alternativeWorkouts": []',"}","```","","Instruction: When modifying days, prefer the patch-style single-day updates above rather than replacing the whole `workoutPlan` unless the user explicitly asks for a full replacement."].join(`
`),sb=({userData:s})=>{const[n,r]=E.useState([{role:"assistant",text:Bc}]),[o,l]=E.useState(""),[c,d]=E.useState(!1),m=E.useRef(null),p=E.useRef(!1);E.useEffect(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[n,c]),E.useEffect(()=>{(()=>{try{const k=s?.id||"anon",$=sessionStorage.getItem(`fitbuddyai_chat_${k}`);if(!$)return;const F=JSON.parse($);Array.isArray(F)&&F.length&&r(F)}catch{}})(),(async()=>{try{p.current=!0;const k=s?.id;if(!k)return;await(await $e(()=>Promise.resolve().then(()=>Ys),void 0)).restoreUserDataFromServer(String(k));const F=sessionStorage.getItem(`fitbuddyai_chat_${k}`);if(p.current=!1,!F)return;const U=JSON.parse(F);Array.isArray(U)&&U.length&&r(U)}catch{p.current=!1}})()},[s?.id]),E.useEffect(()=>{const b=async()=>{try{p.current=!0;const k=s?.id;if(!k)return;await(await $e(()=>Promise.resolve().then(()=>Ys),void 0)).restoreUserDataFromServer(String(k));const F=sessionStorage.getItem(`fitbuddyai_chat_${k}`);if(p.current=!1,!F)return;const U=JSON.parse(F);Array.isArray(U)&&U.length&&r(U)}catch{p.current=!1}};window.addEventListener("fitbuddyai-login",b);const _=async()=>{try{p.current=!0;const k=s?.id;if(!k)return;await(await $e(()=>Promise.resolve().then(()=>Ys),void 0)).restoreUserDataFromServer(String(k));const F=localStorage.getItem(`fitbuddyai_chat_${k}`);if(p.current=!1,!F)return;const U=JSON.parse(F);Array.isArray(U)&&U.length&&r(U)}catch{}};return window.addEventListener("fitbuddyai-open-chat",_),()=>window.removeEventListener("fitbuddyai-login",b)},[s?.id]),E.useEffect(()=>{const b=_=>{try{if(!_.key)return;const $=`fitbuddyai_chat_${s?.id||"anon"}`;if(_.key===$){if(!_.newValue){r([{role:"assistant",text:Bc}]);return}try{const F=JSON.parse(_.newValue);Array.isArray(F)&&r(F)}catch{}}}catch{}};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[s?.id]),E.useEffect(()=>{let b=null;try{b=setTimeout(()=>{try{if(p.current)return;const _=s?.id||"anon";if(n.length===1&&n[0].role==="assistant"&&n[0].text==="Hi! I am Buddy  your AI Fitness assistant. I can answer questions about your workouts, goals, and progress.")return;try{sessionStorage.setItem(`fitbuddyai_chat_${_}`,JSON.stringify(n))}catch{}}catch{}},400)}catch{}return()=>{b&&clearTimeout(b)}},[n,s?.id]),E.useEffect(()=>{const b=()=>{try{const _=s?.id||"anon";try{sessionStorage.removeItem(`fitbuddyai_chat_${_}`)}catch{}try{localStorage.removeItem(`fitbuddyai_chat_${_}`)}catch{}r([{role:"assistant",text:Bc}])}catch{}};return window.addEventListener("fitbuddyai-logout",b),()=>window.removeEventListener("fitbuddyai-logout",b)},[s?.id]),E.useEffect(()=>{let b;return(()=>{const k=s?.id;if((b===void 0||b==="anon")&&k&&k!=="anon")try{const $=sessionStorage.getItem("fitbuddyai_chat_anon");if($)try{sessionStorage.setItem(`fitbuddyai_chat_${k}`,$)}catch{}try{sessionStorage.removeItem("fitbuddyai_chat_anon")}catch{}}catch{}b=k??"anon"})(),()=>{}},[s?.id]);const g=b=>{if(!b)return"No user data available.";try{const _={id:b.id,username:b.username,age:b.age,goals:b.goals||b.preferences||[],fitnessLevel:b.fitnessLevel||b.fitness_level||"unknown",energy:b.energy??null,streak:b.streak??null};return JSON.stringify(_)}catch{return"User data present but could not be summarized."}},y=b=>{if(!b)return b;let _=String(b);try{for(_=_.replace(/```json[\s\S]*?```/gi,""),_=_.replace(/```[\s\S]*?```/g,"");_.includes('"__action"');){const $=_.indexOf('"__action"');if($===-1)break;const F=_.lastIndexOf("{",$);if(F===-1)break;let U=0,B=-1;for(let X=F;X<_.length;X++){const L=_[X];if(L==="{")U++;else if(L==="}"&&(U--,U===0)){B=X;break}}if(B!==-1)_=(_.slice(0,F)+_.slice(B+1)).trim();else break}return _=_.replace(/\{[^\}]*__action[^\}]*\}/g,""),_=_.replace(/\n{3,}/g,`

`),_.trim()}catch{return b}},x=async(b,_)=>{try{const k=(b.updates||[]).map(q=>{try{if(q.path==="workoutPlan"&&typeof q.value=="string")try{q.value=JSON.parse(q.value)}catch{}}catch{}return q}),$={...b,updates:k},{getAuthToken:F,loadUserData:U}=await $e(async()=>{const{getAuthToken:q,loadUserData:H}=await Promise.resolve().then(()=>zt);return{getAuthToken:q,loadUserData:H}},void 0),B=U()||null,X=B?.id||B?.data?.id||s?.id;let L=F()||B?.token||B?.data?.token||s?.token||B?.jwt||B?.data?.jwt||B?.access_token||B?.data?.access_token;if(!X||X==="anon"){try{sessionStorage.setItem("fitbuddyai_chat_anon",JSON.stringify(n))}catch{}const q=encodeURIComponent(window.location.pathname||"/chat");window.location.href=`/signin?returnTo=${q}`;return}const z={"Content-Type":"application/json"};L&&(z.Authorization=`Bearer ${L}`);const te=await fetch("/api/user/apply-action",{method:"POST",headers:z,body:JSON.stringify({id:X,action:$})}),ue=await te.json();if(!te.ok)throw ue;const{user:fe}=ue,{saveUserData:K,saveWorkoutPlan:oe,appendChatMessage:re}=await $e(async()=>{const{saveUserData:q,saveWorkoutPlan:H,appendChatMessage:ae}=await Promise.resolve().then(()=>zt);return{saveUserData:q,saveWorkoutPlan:H,appendChatMessage:ae}},void 0);try{fe&&fe.workoutPlan&&oe(fe.workoutPlan)}catch{}K(fe,{skipBackup:!1}),window.dispatchEvent(new Event("fitbuddyai-login"));const V=_||ue.humanReply||ue.applied||"Buddy applied the changes.";r(q=>[...q,{role:"assistant",text:V}]);try{const q=s?.id||fe?.id;re({role:"assistant",text:V,ts:Date.now()},{userId:q})}catch{}const ce=ue.applied||b.summary||"Applied changes";let pe=ce;try{const q=String(ce).match(/^\s*Set\s+(\w+)\s+to\s+(.+)$/i);if(q){const H=q[1],ae=q[2];pe=`${H.charAt(0).toUpperCase()+H.slice(1)} set to ${ae}`}else pe=typeof ce=="string"?ce:JSON.stringify(ce)}catch{}r(q=>[...q,{role:"action",text:pe}]);try{const q=s?.id||fe?.id;re({role:"assistant",text:pe,ts:Date.now()},{userId:q})}catch{}}catch(k){console.error("Failed to apply action on server:",k),r($=>[...$,{role:"assistant",text:"Failed to apply changes on the server."}])}},S=async()=>{const b=o.trim();if(!b)return;const _={role:"user",text:b};r(L=>[...L,_]),l(""),d(!0);try{const{appendChatMessage:L}=await $e(async()=>{const{appendChatMessage:te}=await Promise.resolve().then(()=>zt);return{appendChatMessage:te}},void 0),z=s?.id;L({role:"user",text:b,ts:Date.now()},{userId:z})}catch{}const k=n.concat(_),F=k.slice(Math.max(k.length-qf,0)).map(L=>`${L.role==="user"?"User":"Assistant"}: ${L.text}`).join(`
`),U=s?.workoutPlan?(()=>{try{return`
User workoutPlan: ${JSON.stringify(s.workoutPlan).slice(0,nb)}`}catch{return""}})():"",X=`You are FitBuddyAI's AI assistant named Buddy. Use the following user profile to personalize answers: ${g(s)}

Conversation (most recent ${qf} messages):
${F}

Respond fully and directly to the user's last message. Keep answers actionable and concise.`+U+'\n\nWhen you propose changes to the user\'s profile or workout plan, produce both: (1) a human-readable reply, and (2) a JSON action block fenced as ```json containing {"__action":true, "updates":[...], "summary":"..."}. Only include the JSON block when you intend the site to apply changes. Close the JSON block with ```.'+rb;try{const L=localStorage.getItem("fitbuddyai_questionnaire_progress"),z=sessionStorage.getItem("fitbuddyai_user_data"),te=localStorage.getItem("fitbuddyai_workout_plan");let ue=null,fe=null,K=null;try{ue=L?JSON.parse(L):null}catch{ue=L}try{fe=z?JSON.parse(z):null}catch{fe=z}try{K=te?JSON.parse(te):null}catch{K=te}const oe=await nv({prompt:X,localStorageContext:{questionnaire:ue,userData:fe,workoutPlan:K}});let re=oe.text||"",V=null;try{let pe=null;const q=re.match(/```json([\s\S]*?)```/i);if(q&&q[1])pe=q[1].trim();else{const H=re.match(/```([\s\S]*?)```/i);H&&H[1]&&(pe=H[1].trim())}if(!pe){const H=Array.from(re.match(/\{[\s\S]*?\}/g)||[]);if(H.length)pe=H[H.length-1];else if(oe.raw){const ae=Array.from(String(oe.raw).match(/\{[\s\S]*?\}/g)||[]);ae.length&&(pe=ae[ae.length-1])}}if(pe){const H=pe.replace(/^```json\s*/i,"").replace(/\s*```$/,"");V=JSON.parse(H),re=re.replace(pe,"").replace(/```json[\s\S]*?```/i,"").trim()}else try{const ae=re.indexOf('"__action"');if(ae!==-1){const N=re.lastIndexOf("{",ae);if(N!==-1){let w=0,O=-1;for(let J=N;J<re.length;J++){const ee=re[J];if(ee==="{")w++;else if(ee==="}"&&(w--,w===0)){O=J;break}}if(O!==-1){const J=re.slice(N,O+1);try{V=JSON.parse(J),re=(re.slice(0,N)+re.slice(O+1)).trim()}catch{}}}}}catch{}}catch{V=null}const ce=y(re);if(V&&V.__action&&Array.isArray(V.updates))await x(V,ce);else{r(pe=>[...pe,{role:"assistant",text:ce}]);try{const{appendChatMessage:pe}=await $e(async()=>{const{appendChatMessage:H}=await Promise.resolve().then(()=>zt);return{appendChatMessage:H}},void 0),q=s?.id;pe({role:"assistant",text:ce,ts:Date.now()},{userId:q})}catch{}}}catch(L){console.error("Gemini chat error",L),r(z=>[...z,{role:"assistant",text:"Buddy is currently unavailable. Please try again later."}])}finally{d(!1)}},C=b=>{b.key==="Enter"&&!b.shiftKey&&(b.preventDefault(),S())};return a.jsx("div",{className:"gemini-page-root",children:a.jsx("div",{className:"gemini-page",children:a.jsxs("div",{className:"gemini-container",children:[a.jsxs("header",{className:"gemini-header",children:[a.jsx("h1",{children:"Chat with Buddy"}),a.jsx("p",{className:"gemini-sub",children:"Ask Buddy about your workouts, plan, or goals  Buddy knows your profile."})]}),a.jsxs("div",{className:"gemini-chat",ref:m,role:"log","aria-live":"polite",children:[n.map((b,_)=>{const k=b.role==="assistant",$=b.role==="user",F=(k||$)&&typeof b.text=="string"&&b.text.indexOf(`
`)===-1,U=["msg",k?"msg-assistant":b.role==="user"?"msg-user":"msg-action"];return F&&U.push("single-line"),a.jsxs("div",{className:U.join(" "),children:[k&&a.jsx("div",{className:"logo","aria-hidden":"true",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#ffffff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-dumbbell",children:[a.jsx("path",{d:"m6.5 6.5 11 11"}),a.jsx("path",{d:"m21 21-1-1"}),a.jsx("path",{d:"m3 3 1 1"}),a.jsx("path",{d:"m18 22 4-4"}),a.jsx("path",{d:"m2 6 4-4"}),a.jsx("path",{d:"m3 10 7-7"}),a.jsx("path",{d:"m14 21 7-7"})]})}),b.role==="user"&&a.jsx("div",{className:"logo user-logo","aria-hidden":!0,children:s?.avatar||s?.avatarUrl?a.jsx("img",{src:s?.avatar||s?.avatarUrl,alt:s?.username||"User"}):a.jsx("span",{className:"initials",children:(s?.username||"U").toString().trim().substring(0,2).toUpperCase()})}),a.jsx("div",{className:"msg-text",children:b.text})]},_)}),c&&a.jsxs("div",{className:"msg msg-assistant loading",children:[a.jsx("div",{className:"logo","aria-hidden":"true",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#ffffff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-dumbbell",children:[a.jsx("path",{d:"m6.5 6.5 11 11"}),a.jsx("path",{d:"m21 21-1-1"}),a.jsx("path",{d:"m3 3 1 1"}),a.jsx("path",{d:"m18 22 4-4"}),a.jsx("path",{d:"m2 6 4-4"}),a.jsx("path",{d:"m3 10 7-7"}),a.jsx("path",{d:"m14 21 7-7"})]})}),a.jsx("div",{className:"msg-text",children:"Buddy is typing..."})]})]}),a.jsxs("div",{className:"gemini-input",children:[a.jsx("input",{value:o,onChange:b=>l(b.target.value),onKeyDown:C,placeholder:"Ask Buddy about your plan or goals...","aria-label":"Ask Gemini"}),a.jsx("button",{className:"send-btn",onClick:S,disabled:c||!o.trim(),"aria-label":"Send message",children:"Send"})]})]})})})},ib=()=>{const[s,n]=E.useState(null);E.useEffect(()=>{try{const V=In(),ce=V?.email||V?.data?.email||V?.data?.email;if(["localhost","127.0.0.1"].includes(window.location.hostname)&&ce==="admin@local"){n(!0);return}const q=V?.role||V?.data?.role;if(q&&String(q).toLowerCase()==="admin"){n(!0);return}(async()=>{try{if(at&&typeof at.auth?.getSession=="function"){const ae=(await at.auth.getSession())?.data?.session?.access_token??null;if(ae)try{const N=ae.split(".");if(N.length>=2){const w=JSON.parse(atob(N[1].replace(/-/g,"+").replace(/_/g,"/"))),O=w?.roles||w?.role||[];if(Array.isArray(O)&&O.includes("admin")){n(!0);return}if(String(O).toLowerCase()==="admin"){n(!0);return}}}catch{}}}catch{}try{const H=No();if(H)try{const ae=H.split(".");if(ae.length>=2){const N=JSON.parse(atob(ae[1].replace(/-/g,"+").replace(/_/g,"/"))),w=N?.roles||N?.role||[];if(Array.isArray(w)&&w.includes("admin")){n(!0);return}if(String(w).toLowerCase()==="admin"){n(!0);return}}}catch{}}catch{}n(!1)})()}catch{n(!1)}},[]);const[r,o]=E.useState([]),[l,c]=E.useState([]),[d,m]=E.useState(!1),[p,g]=E.useState(null),[y,x]=E.useState(!1),[S,C]=E.useState(!1),[b,_]=E.useState([]),[k,$]=E.useState(null),[F,U]=E.useState([]),[B,X]=E.useState(""),L=async(V,ce)=>{const pe=ce?{...ce}:{},q=pe.headers?{...pe.headers}:{};try{if(at&&typeof at.auth?.getSession=="function"){const ae=(await at.auth.getSession())?.data?.session?.access_token??null;ae&&(q.Authorization=`Bearer ${ae}`)}}catch{}if(!q.Authorization)try{const H=No();H&&(q.Authorization=`Bearer ${H}`)}catch{}return pe.headers=q,fetch(V,pe)};E.useEffect(()=>{y&&s===!0&&(async()=>{m(!0);const{data:V,error:ce}=await at.from("workout_plans").select("*").eq("deleted",!0);ce||_(V||[]),m(!1)})()},[y,s]),E.useEffect(()=>{S&&s===!0&&(async()=>{m(!0);const{data:V,error:ce}=await at.from("banned_usernames").select("username");ce||U((V||[]).map(pe=>pe.username)),m(!1)})()},[S,s]),E.useEffect(()=>{if(s!==!0)return;(async()=>{m(!0),g(null);try{const ce=await L("/api/admin/users",{method:"GET"});if(!ce.ok){const ae=await ce.text();throw new Error(`Failed to load users: ${ce.status} ${ae}`)}const pe=await ce.json();c(pe?.users||[]);const{data:q,error:H}=await at.from("audit_logs").select("*").order("timestamp",{ascending:!1});if(H)if(String(H.message).toLowerCase().includes("relation")||String(H.message).toLowerCase().includes("could not find"))g("Audit log table not found. Run the DB setup SQL (sql/setup_db.sql) to create required tables.");else throw H;o(q||[])}catch(ce){g(ce.message||"Error")}finally{m(!1)}})()},[s]);const z=async V=>{$(V),(await L("/api/admin/users?action=restore_plan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:V})})).ok?_(pe=>pe.filter(q=>q.id!==V)):g("Failed to restore"),$(null)},te=async()=>{if(!B.trim())return;m(!0),(await L("/api/admin/users?action=ban_username",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:B.trim()})})).ok?U(ce=>[...ce,B.trim()]):g("Failed to ban username"),X(""),m(!1)},ue=async V=>{m(!0),(await L("/api/admin/users?action=unban_username",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:V})})).ok?U(pe=>pe.filter(q=>q!==V)):g("Failed to unban username"),m(!1)},fe=async V=>{m(!0),(await L("/api/admin/users?action=ban",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:V})})).ok?c(pe=>pe.map(q=>q.id===V?{...q,banned:!0}:q)):g("Failed to ban user"),m(!1)},K=async V=>{m(!0),(await L("/api/admin/users?action=unban",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:V})})).ok?c(pe=>pe.map(q=>q.id===V?{...q,banned:!1}:q)):g("Failed to unban user"),m(!1)},oe=async V=>{m(!0),(await L("/api/admin/users?action=delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:V})})).ok?c(pe=>pe.filter(q=>q.id!==V)):g("Failed to delete user"),m(!1)},re=()=>{const V=new Blob([r.map(q=>JSON.stringify(q)).join(`
`)],{type:"application/json"}),ce=URL.createObjectURL(V),pe=document.createElement("a");pe.href=ce,pe.download="ai_action_audit.log",pe.click(),URL.revokeObjectURL(ce)};return s===!1?a.jsx(ku,{}):a.jsxs("div",{className:"admin-audit-root",children:[a.jsx("div",{className:"admin-hero",children:a.jsxs("div",{children:[a.jsx("div",{className:"title",children:"Admin Console"}),a.jsx("div",{className:"subtitle",children:"Manage users, audit logs and site-wide policies."})]})}),a.jsxs("div",{className:"admin-grid",children:[a.jsxs("div",{className:"admin-card",children:[a.jsx("div",{className:"admin-section-title",children:"Admin Powers"}),a.jsxs("div",{className:"admin-powers",children:[a.jsx("button",{className:"admin-power-btn",onClick:re,disabled:r.length===0,children:"Download Audit Log"}),a.jsx("button",{className:"admin-power-btn",onClick:()=>x(!0),children:"Restore Workout Plans"}),a.jsx("button",{className:"admin-power-btn",onClick:()=>C(!0),children:"Manage Banned Usernames"}),a.jsx("div",{className:"admin-power-row",children:a.jsx("button",{className:"admin-power-btn secondary",onClick:()=>window.location.href="/",children:"Open App"})}),a.jsx("div",{className:"admin-power-note",children:"Tip: actions are proxied through the server to protect secrets and follow RLS."})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"admin-card mb-20",children:[a.jsx("div",{className:"admin-section-title",children:"Users"}),l.length===0&&a.jsx("div",{className:"muted",children:"No users found."}),a.jsx("div",{className:"users-list",children:l.map(V=>a.jsxs("div",{className:`user-row${V.banned?" banned":""}`.trim(),children:[a.jsxs("div",{className:"user-meta",children:[a.jsx("div",{className:"user-name",children:V.username||V.email}),a.jsx("div",{className:"user-email",children:V.email}),a.jsx("div",{className:"meta-id",children:V.id})]}),a.jsxs("div",{className:"user-actions",children:[V.banned?a.jsx("button",{className:"small-btn ghost",onClick:()=>K(V.id),disabled:d,children:"Unban"}):a.jsx("button",{className:"small-btn ghost",onClick:()=>fe(V.id),disabled:d,children:"Ban"}),a.jsx("button",{className:"small-btn negative",onClick:()=>oe(V.id),disabled:d,children:"Delete"})]})]},V.id))})]}),a.jsxs("div",{className:"admin-card",children:[a.jsx("div",{className:"admin-section-title",children:"AI Action Audit Log"}),d&&a.jsx("div",{className:"muted",children:"Loading..."}),p&&a.jsx("div",{className:"error",children:p}),a.jsxs("div",{className:"audit-list",children:[r.map((V,ce)=>a.jsxs("div",{className:"audit-row",children:[a.jsx("div",{className:"audit-ts",children:V.timestamp}),V.event==="rickroll"?a.jsxs("div",{className:"audit-rickroll",children:[a.jsx("div",{children:"Event: rickroll"}),a.jsxs("div",{children:["IP: ",V.ip||""]}),a.jsxs("div",{children:["Verified: ",String(V.verified)]}),a.jsxs("div",{children:["UserAgent: ",a.jsx("pre",{className:"audit-json-small",children:String(V.userAgent||"")})]})]}):a.jsx("pre",{className:"audit-json",children:JSON.stringify(V.action,null,2)})]},ce)),r.length===0&&!d&&a.jsx("div",{className:"muted",children:"No audit entries found."})]})]})]})]}),y&&a.jsx("div",{className:"admin-modal-overlay",children:a.jsxs("div",{className:"admin-modal",children:[a.jsx("h3",{children:"Restore Workout Plans"}),d&&a.jsx("div",{children:"Loading..."}),a.jsxs("div",{children:[b.map(V=>a.jsxs("div",{className:"admin-modal-list-item",children:[a.jsxs("div",{children:[a.jsx("b",{children:V.name}),a.jsx("div",{className:"meta-id",children:V.id})]}),a.jsx("div",{children:a.jsx("button",{className:"small-btn",onClick:()=>z(V.id),disabled:k===V.id,children:k===V.id?"Restoring...":"Restore"})})]},V.id)),b.length===0&&!d&&a.jsx("div",{children:"No deleted plans found."})]}),a.jsx("div",{className:"modal-footer",children:a.jsx("button",{className:"small-btn ghost",onClick:()=>x(!1),children:"Close"})})]})}),S&&a.jsx("div",{className:"admin-modal-overlay",children:a.jsxs("div",{className:"admin-modal",children:[a.jsx("h3",{children:"Manage Banned Usernames"}),d&&a.jsx("div",{children:"Loading..."}),a.jsxs("div",{children:[F.map(V=>a.jsxs("div",{className:"admin-modal-list-item",children:[a.jsx("div",{children:V}),a.jsx("div",{children:a.jsx("button",{className:"small-btn ghost",onClick:()=>ue(V),disabled:d,children:"Unban"})})]},V)),F.length===0&&!d&&a.jsx("div",{children:"No banned usernames."})]}),a.jsxs("div",{className:"admin-modal-input-row",children:[a.jsx("input",{type:"text",value:B,onChange:V=>X(V.target.value),placeholder:"Ban new username...",className:"admin-modal-input"}),a.jsx("button",{className:"small-btn warn",onClick:te,disabled:d||!B.trim(),children:"Ban"})]}),a.jsx("div",{className:"modal-footer",children:a.jsx("button",{className:"small-btn ghost",onClick:()=>C(!1),children:"Close"})})]})})]})};function ab(){E.useEffect(()=>{const s=Ro();try{if(localStorage.getItem("fitbuddyai_no_auto_restore")||sessionStorage.getItem("fitbuddyai_no_auto_restore"))return}catch{}try{const r=fn(),o=Zs();if(r||o&&o.dailyWorkouts&&o.dailyWorkouts.length>0)return}catch{}s?.id&&rs(s.id);const n=()=>{const r=Ro();r?.id&&na(r.id)};return window.addEventListener("beforeunload",n),()=>{n(),window.removeEventListener("beforeunload",n)}},[])}const Hf="https://www.youtube.com/watch?v=dQw4w9WgXcQ",ob=()=>{const[s,n]=E.useState("pending");return E.useEffect(()=>{Math.random()<.5?n("rick"):n("notfound")},[]),E.useEffect(()=>{if(s==="rick"){const o=setTimeout(async()=>{try{let l={"Content-Type":"application/json"};try{const{getAuthToken:c}=await $e(async()=>{const{getAuthToken:m}=await Promise.resolve().then(()=>zt);return{getAuthToken:m}},void 0),d=c();d&&(l.Authorization=`Bearer ${d}`)}catch{}await fetch("/api/rickroll",{method:"POST",headers:l,body:JSON.stringify({userId:null})})}catch{}finally{window.location.href=Hf}},150);return()=>clearTimeout(o)}},[s]),s==="pending"?a.jsx("div",{className:"rickroll-loading",children:a.jsx("p",{children:"Deciding your fate..."})}):s==="notfound"?a.jsx(ku,{}):a.jsxs("div",{className:"rickroll-redirect",children:[a.jsx("p",{children:"Redirecting you to something special..."}),a.jsx("a",{href:Hf,target:"_blank",rel:"noopener noreferrer",children:"Open"})]})};function lb({userData:s}){const[n,r]=E.useState(!1);if(E.useEffect(()=>{if(s?.id)try{Aw(s.id)}catch{}(async()=>{try{if(ts(s?.id)){r(!1);return}const g=s?.id;if(!g){r(!0);return}const y=await $e(()=>Promise.resolve().then(()=>Or),void 0).then(k=>k.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:g})})),x=await fetch("/api/userdata/load",y);if(!x.ok){r(!0);return}const S=await x.text();let C=null;try{C=S?JSON.parse(S):null}catch{C=null}const b=C?.stored??C?.payload??C??{},_=b&&b.accepted_terms&&b.accepted_privacy;r(!_)}catch{const g=ts(s?.id);r(!g)}})();const d=()=>{ts(s?.id)?r(!1):r(!0)},m=()=>{ts(s?.id)?r(!1):r(!0)};return window.addEventListener("fitbuddyai-tos-accepted",d),window.addEventListener("fitbuddyai-privacy-accepted",m),()=>{window.removeEventListener("fitbuddyai-tos-accepted",d),window.removeEventListener("fitbuddyai-privacy-accepted",m)}},[s?.id]),!n)return null;const o=Mo(s?.id),l=Uo(s?.id);return a.jsx("div",{className:"tos-banner compact",role:"region","aria-label":"Terms and Privacy banner",children:a.jsx("div",{className:"tos-inner inline",children:a.jsxs("div",{className:"tos-left",children:[a.jsx("div",{className:"tos-info","aria-hidden":"true",children:""}),a.jsxs("div",{className:"tos-text",children:["Please read and accept our ",a.jsx(En,{to:"/terms",className:o?"tos-link accepted":"tos-link",children:"Terms of Service"})," and ",a.jsx(En,{to:"/privacy",className:l?"tos-link accepted":"tos-link",children:"Privacy Policy"}),". This banner will remain until both are accepted."]})]})})})}function Ip(s={}){const n=s.count||30,r=s.gravity||.6,o=["#1ecb7b","#1e90cb","#ffb347","#ffd54a","#7bd389"],l=document.createElement("div");l.style.position="fixed",l.style.left="0",l.style.top="0",l.style.width="100%",l.style.height="0",l.style.pointerEvents="none",l.style.overflow="visible",l.style.zIndex="9999",document.body.appendChild(l);for(let c=0;c<n;c++){let d=function(){y+=r*.05,x+=g,S+=y,m.style.left=x+"px",m.style.top=S+"px";const b=(parseFloat(m.style.transform.replace("rotate(","").replace("deg)",""))||0)+C;m.style.transform="rotate("+b+"deg)",m.style.opacity=String(Math.max(0,1-S/(window.innerHeight*.9))),S<window.innerHeight+100?requestAnimationFrame(d):m.remove()};const m=document.createElement("div"),p=6+Math.random()*10;m.style.position="absolute",m.style.left=50+(Math.random()-.5)*60+"%",m.style.top="-10px",m.style.width=p+"px",m.style.height=p*.6+"px",m.style.background=o[Math.floor(Math.random()*o.length)],m.style.opacity="0.95",m.style.transform="rotate("+Math.random()*360+"deg)",m.style.borderRadius=Math.random()*3+"px",m.style.willChange="transform, top, opacity",l.appendChild(m);const g=(Math.random()-.5)*6;let y=2+Math.random()*4,x=window.innerWidth*.5+(Math.random()-.5)*window.innerWidth*.6,S=-20-Math.random()*50;const C=(Math.random()-.5)*10;requestAnimationFrame(d)}setTimeout(()=>l.remove(),5e3)}function cb(){const s=Mo(void 0),[n,r]=E.useState(s),[o,l]=E.useState(s);E.useEffect(()=>{const d=()=>{l(!0),r(!0)};return window.addEventListener("fitbuddyai-tos-accepted",d),()=>window.removeEventListener("fitbuddyai-tos-accepted",d)},[]);const c=()=>{if(n){hp(void 0),l(!0);try{Ip({count:40})}catch{}try{$e(()=>Promise.resolve().then(()=>zt),void 0).then(d=>{try{const p=d.loadUserData()?.id;p&&$e(()=>Promise.resolve().then(()=>Or),void 0).then(g=>g.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:p,accepted_terms:!0})})).then(g=>fetch("/api/userdata/save",g)).catch(()=>{})}catch{}}).catch(()=>{})}catch{}}};return a.jsxs("div",{className:"terms-page",children:[a.jsx("header",{className:"terms-hero",children:a.jsxs("div",{className:"terms-hero-inner",children:[a.jsx("div",{className:"hero-logo",children:a.jsx(gt,{size:36,color:"#fff"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"hero-title",children:"FitBuddyAI Terms of Service"}),a.jsx("p",{className:"hero-sub",children:"Short, clear summary about how to use the app safely and what we store."})]})]})}),a.jsxs("main",{className:"terms-container",children:[a.jsxs("article",{className:"terms-card",children:[a.jsx("h2",{children:"1. Use of the Service"}),a.jsx("p",{children:"FitBuddyAI provides workout suggestions and educational material to help you train safely. This is not medical advice. If you have a medical condition, please consult a healthcare professional before acting on any exercise recommendation."})]}),a.jsxs("article",{className:"terms-card",children:[a.jsx("h2",{children:"2. AI & Content"}),a.jsx("p",{children:"Some content or workout suggestions may be generated or assisted by AI. AI outputs are best-effort guidance and should be used in combination with your own judgment and professional advice."})]}),a.jsxs("article",{className:"terms-card",children:[a.jsx("h2",{children:"3. Data & Privacy"}),a.jsxs("p",{children:["We store workout plans and profile data locally for convenience. If you create an account, data may be backed up to our servers for sync across devices. See the ",a.jsx(En,{to:"/privacy",className:"tos-link",children:"Privacy Policy"})," for details."]})]}),a.jsxs("article",{className:"terms-card",children:[a.jsx("h2",{children:"4. Liability"}),a.jsx("p",{children:"By using FitBuddyAI you acknowledge that you are voluntarily participating in physical activity and accept responsibility for any risks. We are not liable for injuries caused while following the app."})]})]}),a.jsx("section",{className:"terms-full",children:a.jsxs("div",{className:"terms-full-inner",children:[a.jsx("h2",{children:"Full Terms of Service"}),a.jsx("p",{children:'The following terms ("Agreement") constitute a legally binding agreement between you ("User") and FitBuddyAI, LLC ("FitBuddyAI", "we", "us" or "our"), governing your access to and use of the FitBuddyAI website, mobile applications, services, software, APIs and associated content (collectively, the "Service"). By accessing, browsing, or using the Service you acknowledge that you have read, understood, and agree to be bound by this Agreement. If you do not agree to these terms, do not access or use the Service.'}),a.jsx("h3",{children:"1. Definitions"}),a.jsx("p",{children:'"Content" means any information, text, graphics, images, audio, video, code, algorithms, workout plans, recommendations, comments, and other materials provided by FitBuddyAI or Users. "User Content" means Content submitted or transmitted by Users. "Personal Data" means information that identifies or can be used to identify an individual, subject to the Privacy Policy.'}),a.jsx("h3",{children:"2. Scope of Service"}),a.jsx("p",{children:'FitBuddyAI provides fitness and wellness related guidance, educational materials, personalized workout plans, and software tools. The Service may include content generated or assisted by artificial intelligence. The Service is provided on an "as is" and "as available" basis. FitBuddyAI reserves the right to modify, suspend, or discontinue any aspect of the Service at any time without prior notice.'}),a.jsx("h3",{children:"3. User Eligibility and Conduct"}),a.jsx("p",{children:"Users represent and warrant that they are at least the minimum age required to use the Service under applicable law and that they have full authority to accept this Agreement. Users shall not misuse the Service or interfere with its operation. Prohibited conduct includes, but is not limited to: circumventing technical restrictions; attempting to access other Users' accounts; uploading malicious code; impersonating others; or using the Service for unlawful or harmful activities."}),a.jsx("h3",{children:"4. Medical Disclaimer and Assumption of Risk"}),a.jsx("p",{children:"The Service provides general fitness information and recommendations which are not a substitute for professional medical advice, diagnosis, or treatment. Users should consult a qualified healthcare professional before beginning any exercise program or if they have health concerns. By using the Service, Users acknowledge and assume all risks associated with participating in physical activity and agree that FitBuddyAI is not responsible for any injury, loss, or damage arising from use of the Service."}),a.jsx("h3",{children:"5. AI-Generated Content and Accuracy"}),a.jsx("p",{children:"Some Content may be generated or assisted by machine learning models, thirdparty APIs, or algorithmic systems. While FitBuddyAI strives for accuracy and utility, AI outputs may be incomplete, imprecise, or contextually inappropriate. FitBuddyAI disclaims any warranty regarding the suitability, reliability, or accuracy of AI-generated Content. Reliance on such Content is at the User's own risk."}),a.jsx("h3",{children:"6. Intellectual Property"}),a.jsx("p",{children:"FitBuddyAI and its licensors retain all right, title, and interest in and to the Service and Content provided by FitBuddyAI, including intellectual property rights. Users are granted a limited, non-exclusive, non-sublicensable, revocable license to access and use the Service for personal, non-commercial purposes in accordance with this Agreement. Users shall not reproduce, distribute, modify, create derivative works, reverse engineer, or otherwise exploit FitBuddyAI's intellectual property except as expressly authorized herein."}),a.jsx("h3",{children:"7. User Content and License to FitBuddyAI"}),a.jsx("p",{children:"By submitting User Content, Users grant FitBuddyAI a worldwide, royalty-free, sublicensable, transferable, perpetual, irrevocable license to use, host, store, reproduce, modify, create derivative works, communicate, publish, and distribute such User Content for the purposes of operating, improving, and promoting the Service. Users warrant that they have the rights to grant such license and that User Content does not violate third-party rights."}),a.jsx("h3",{children:"8. Payments and Subscriptions"}),a.jsx("p",{children:"Paid features of the Service are governed by separate subscription terms and payment agreements. Users agree to provide accurate billing information and authorize recurring charges as applicable. Refunds, cancellations, and dispute procedures are governed by the posted subscription terms and any applicable laws."}),a.jsx("h3",{children:"9. Third-Party Services and Links"}),a.jsx("p",{children:"The Service may contain links to third-party websites, services, or content. FitBuddyAI does not endorse and is not responsible for third-party offerings, practices, or privacy policies. Users access third-party resources at their own risk and should review the third-party terms and privacy policies."}),a.jsx("h3",{children:"10. Privacy and Data"}),a.jsx("p",{children:"Use of Personal Data is governed by FitBuddyAIs Privacy Policy. By using the Service, Users consent to FitBuddyAIs collection, processing, storage, and transfer of Personal Data in accordance with the Privacy Policy. FitBuddyAI will take commercially reasonable measures to secure User Data but cannot guarantee absolute security."}),a.jsx("h3",{children:"11. Warranties and Disclaimers"}),a.jsx("p",{children:'EXCEPT AS EXPRESSLY PROVIDED HEREIN, THE SERVICE IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND. FITBUDDYAI DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE, AND NON-INFRINGEMENT. FITBUDDYAI DOES NOT WARRANT THAT THE SERVICE WILL BE UNINTERRUPTED, ERROR-FREE, OR SECURE.'}),a.jsx("h3",{children:"12. Limitation of Liability"}),a.jsx("p",{children:"TO THE MAXIMUM EXTENT PERMITTED BY LAW, IN NO EVENT SHALL FITBUDDYAI, ITS AFFILIATES, LICENSORS, OR SERVICE PROVIDERS BE LIABLE FOR INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, OR FOR LOSS OF PROFITS, REVENUE, DATA, OR USE, ARISING OUT OF OR IN CONNECTION WITH THE SERVICE, WHETHER IN CONTRACT, TORT (INCLUDING NEGLIGENCE), STRICT LIABILITY, OR OTHERWISE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. FITBUDDYAI'S AGGREGATE LIABILITY FOR DIRECT DAMAGES SHALL NOT EXCEED THE AMOUNTS PAID BY THE USER TO FITBUDDYAI IN THE TWELVE (12) MONTHS PRECEDING THE CLAIM, OR ONE HUNDRED DOLLARS (USD $100), WHICHEVER IS GREATER."}),a.jsx("h3",{children:"13. Indemnification"}),a.jsx("p",{children:"Users agree to indemnify, defend, and hold harmless FitBuddyAI and its officers, directors, employees, agents, and affiliates from and against any and all losses, liabilities, claims, demands, damages, costs, and expenses (including reasonable attorneys fees) arising out of or relating to: (a) User's breach of this Agreement; (b) Users violation of any law or third-party rights; or (c) User Content."}),a.jsx("h3",{children:"14. Termination"}),a.jsx("p",{children:"FitBuddyAI may suspend or terminate a User's access to the Service at any time, with or without cause, and without liability. Upon termination, license rights granted to the User will immediately cease. Sections concerning ownership, disclaimers, limitations of liability, indemnity, and dispute resolution will survive termination."}),a.jsx("h3",{children:"15. Governing Law; Dispute Resolution"}),a.jsx("p",{children:"This Agreement shall be governed by and construed in accordance with the laws of the state in which FitBuddyAI is incorporated, without regard to conflict of laws principles. Any dispute arising out of or related to this Agreement shall be resolved exclusively through final and binding arbitration, except where prohibited by law. The arbitrator's decision will be final and binding and may be entered as a judgment in any court of competent jurisdiction."}),a.jsx("h3",{children:"16. Changes to Terms"}),a.jsx("p",{children:"FitBuddyAI may update these Terms from time to time. We will provide notice of material changes, for example by email to registered accounts or prominent notice within the Service. Continued use of the Service after changes constitute acceptance of the revised Terms."}),a.jsx("h3",{children:"17. Miscellaneous"}),a.jsx("p",{children:"This Agreement, together with the Privacy Policy and any other legal notices published by FitBuddyAI, constitutes the entire agreement between the parties concerning the subject matter herein. If any provision is found unenforceable, the remaining provisions will remain in full force. Failure to enforce a right is not a waiver of that right."}),a.jsxs("p",{children:[a.jsx("em",{children:"Effective Date:"})," The effective date of these Terms is the date you first use the Service. For questions regarding these Terms, please contact our support team."]})]})}),a.jsxs("div",{className:"terms-cta-bottom",children:[a.jsx("div",{className:"terms-cta-inner",children:a.jsxs("label",{className:"terms-checkbox",children:[a.jsx("input",{type:"checkbox",checked:n,onChange:d=>r(d.target.checked)}),a.jsx("span",{children:"I have read and agree to the Terms of Service"})]})}),a.jsx("div",{className:"terms-cta-inner stack",children:a.jsx("button",{className:"btn btn-primary btn-lg"+(o?" accepted-btn":""),onClick:c,disabled:!n||o,"aria-disabled":!n||o,children:o?"Accepted":"Accept"})})]})]})}function ub(){const s=Uo(void 0),[n,r]=E.useState(s),[o,l]=E.useState(s);E.useEffect(()=>{const d=()=>{l(!0),r(!0)};return window.addEventListener("fitbuddyai-privacy-accepted",d),()=>window.removeEventListener("fitbuddyai-privacy-accepted",d)},[]);const c=()=>{if(n){fp(void 0),l(!0);try{Ip({count:36})}catch{}try{$e(()=>Promise.resolve().then(()=>zt),void 0).then(d=>{try{const p=d.loadUserData()?.id;p&&$e(()=>Promise.resolve().then(()=>Or),void 0).then(g=>g.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:p,accepted_privacy:!0})})).then(g=>fetch("/api/userdata/save",g)).catch(()=>{})}catch{}}).catch(()=>{})}catch{}}};return a.jsxs("div",{className:"terms-page",children:[a.jsx("header",{className:"terms-hero",children:a.jsxs("div",{className:"terms-hero-inner",children:[a.jsx("div",{className:"hero-logo",children:a.jsx(gt,{size:36,color:"#fff"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"hero-title",children:"FitBuddyAI Privacy Policy"}),a.jsx("p",{className:"hero-sub",children:"How we collect, use, and protect your data  short summary."})]})]})}),a.jsxs("main",{className:"terms-container",children:[a.jsxs("article",{className:"terms-card",children:[a.jsx("h2",{children:"Data We Collect"}),a.jsx("p",{children:"We collect workout preferences, profile details, and optionally account information when you sign up. We do not collect sensitive medical data unless you explicitly provide it."})]}),a.jsxs("article",{className:"terms-card",children:[a.jsx("h2",{children:"How We Use Data"}),a.jsx("p",{children:"Data is used to personalize workout plans, sync across devices, and improve the service. We may use aggregated, anonymized data for analytics."})]}),a.jsxs("article",{className:"terms-card",children:[a.jsx("h2",{children:"Sharing & Third Parties"}),a.jsx("p",{children:"We do not sell personal data. We may share data with service providers who assist in backup, analytics, or authentication, under appropriate agreements."})]}),a.jsxs("article",{className:"terms-card",children:[a.jsx("h2",{children:"Security"}),a.jsx("p",{children:"We use industry-standard measures to secure data but cannot guarantee absolute security. Follow secure practices and protect your account credentials."})]})]}),a.jsx("section",{className:"terms-full",children:a.jsxs("div",{className:"terms-full-inner",children:[a.jsx("h2",{children:"Full Privacy Policy"}),a.jsx("p",{children:"This Privacy Policy explains how FitBuddyAI, LLC collects, uses, discloses, and protects the personal information of users of the Service. By using the Service you consent to the collection and use of information as described in this policy."}),a.jsx("h3",{children:"1. Information We Collect"}),a.jsx("p",{children:"We collect information you provide directly (profile, email, preferences), information generated by your use of the Service (workout logs, settings), and technical information (device, browser, IP) to operate and improve the Service."}),a.jsx("h3",{children:"2. Use of Information"}),a.jsx("p",{children:"Information is used to personalize content, provide support, enable backups (when opted-in), deliver notifications, and prevent abuse."}),a.jsx("h3",{children:"3. Sharing and Disclosure"}),a.jsx("p",{children:"We may share information with vendors who perform services for us, comply with legal obligations, or protect our rights. Aggregated or anonymized data may be used for research or analytics."}),a.jsx("h3",{children:"4. Data Retention and Rights"}),a.jsx("p",{children:"We retain data as long as necessary to provide the Service or as required by law. Users may request deletion or access to their data by contacting support."}),a.jsx("h3",{children:"5. International Transfers"}),a.jsx("p",{children:"Data may be processed in different jurisdictions. We take measures to protect data when transferring across borders."}),a.jsx("h3",{children:"6. Changes to Privacy Policy"}),a.jsx("p",{children:"We may update this Privacy Policy and will provide notice for material changes. Continued use after updates constitutes acceptance."}),a.jsxs("p",{children:[a.jsx("em",{children:"Effective Date:"})," The effective date is the date you first use the Service. For privacy questions, contact our support team."]})]})}),a.jsxs("div",{className:"terms-cta-bottom",children:[a.jsx("div",{className:"terms-cta-inner",children:a.jsxs("label",{className:"terms-checkbox",children:[a.jsx("input",{type:"checkbox",checked:n,onChange:d=>r(d.target.checked)}),a.jsx("span",{children:"I have read and agree to the Privacy Policy"})]})}),a.jsx("div",{className:"terms-cta-inner stack",children:a.jsx("button",{className:"btn btn-primary btn-lg"+(o?" accepted-btn":""),onClick:c,disabled:!n||o,"aria-disabled":!n||o,children:o?"Accepted":"Accept"})})]})]})}function db(){const[s,n]=E.useState(!1),r=()=>{n(!0)};return a.jsxs("div",{className:"terms-page help-page",children:[a.jsx("header",{className:"terms-hero",children:a.jsxs("div",{className:"terms-hero-inner",children:[a.jsx("div",{className:"hero-logo",children:a.jsx(gt,{size:36,color:"#fff"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"hero-title",children:"Help Center"}),a.jsx("p",{className:"hero-sub",children:"Find answers to common questions about using FitBuddyAI."})]})]})}),a.jsxs("main",{className:"help-categories",children:[a.jsxs("div",{className:"help-cards",children:[a.jsxs("article",{className:"help-card",children:[a.jsx("div",{className:"help-card-icon","aria-hidden":!0,children:a.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 8v4l3 3"})]})}),a.jsxs("div",{children:[a.jsx("h3",{children:"Getting Started"}),a.jsx("p",{children:"Complete the questionnaire to receive your personalized 30-day workout plan and get tips for first steps."})]})]}),a.jsxs("article",{className:"help-card",children:[a.jsx("div",{className:"help-card-icon","aria-hidden":!0,children:a.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),a.jsxs("div",{children:[a.jsx("h3",{children:"Account & Sign-in"}),a.jsx("p",{children:"Sign in to restore backups, save progress, and sync across devices. Reset options are available from the sign-in page."})]})]}),a.jsxs("article",{className:"help-card",children:[a.jsx("div",{className:"help-card-icon","aria-hidden":!0,children:a.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2"}),a.jsx("path",{d:"M16 3v4"}),a.jsx("path",{d:"M8 3v4"})]})}),a.jsxs("div",{children:[a.jsx("h3",{children:"Workouts & Plans"}),a.jsx("p",{children:"View and edit your plan on the calendar. Swap or regenerate workouts, and mark progress as you train."})]})]}),a.jsxs("article",{className:"help-card",children:[a.jsx("div",{className:"help-card-icon","aria-hidden":!0,children:a.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 12h18"}),a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M3 18h18"})]})}),a.jsxs("div",{children:[a.jsx("h3",{children:"Privacy & Data"}),a.jsx("p",{children:"Learn how we store and protect your data and how to control backups and sharing preferences."})]})]})]}),a.jsxs("div",{className:"faq-spot",children:[a.jsx("h2",{children:"Frequently Asked Questions"}),a.jsx(fb,{})]}),a.jsxs("div",{className:"help-support",children:[a.jsx("h3",{children:"Need more help?"}),a.jsx("p",{children:"If you can't find the answer, contact our support team."}),a.jsx("button",{className:"btn btn-primary help-contact",onClick:r,children:"Contact Support"})]})]}),a.jsx(hb,{open:s,onClose:()=>n(!1),onSubmitted:()=>{n(!1),console.log("support form submitted")}})]})}function hb({open:s,onClose:n,onSubmitted:r}){const[o,l]=E.useState(""),[c,d]=E.useState(""),[m,p]=E.useState(""),[g,y]=E.useState("");if(!s)return null;const x=S=>{S.preventDefault();try{r?.()}catch{}};return a.jsx("div",{className:"hc-modal-backdrop",role:"dialog","aria-modal":"true",children:a.jsxs("div",{className:"hc-modal",children:[a.jsxs("header",{className:"hc-modal-header",children:[a.jsx("h3",{children:"Contact Support"}),a.jsx("button",{className:"hc-close",onClick:n,"aria-label":"Close",children:""})]}),a.jsxs("form",{className:"hc-form",onSubmit:x,children:[a.jsxs("label",{children:["Name",a.jsx("input",{value:o,onChange:S=>l(S.target.value),required:!0})]}),a.jsxs("label",{children:["Email",a.jsx("input",{type:"email",value:c,onChange:S=>d(S.target.value),required:!0})]}),a.jsxs("label",{children:["Subject",a.jsx("input",{value:m,onChange:S=>p(S.target.value)})]}),a.jsxs("label",{children:["Message",a.jsx("textarea",{value:g,onChange:S=>y(S.target.value),rows:6,required:!0})]}),a.jsxs("div",{className:"hc-actions",children:[a.jsx("button",{type:"button",className:"btn",onClick:n,children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Send"})]})]})]})})}function fb(){const[s,n]=E.useState(0),r=[{q:"How do I get my personalized workout plan?",a:"Complete the questionnaire accessible from the Get Started button. The AI will generate a 30-day plan based on your answers.",icon:a.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 8v4l3 3"})]})},{q:"Can I change workouts or difficulty?",a:"Yes. On the calendar, tap a workout to see options for regenerating, swapping, or adjusting difficulty.",icon:a.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2"}),a.jsx("path",{d:"M16 3v4"}),a.jsx("path",{d:"M8 3v4"})]})},{q:"How do I restore my account or backups?",a:"If you signed up with an account, use Sign In to restore. If you used local storage, use the restore options in the settings or contact support for assistance.",icon:a.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]})},{q:"How is my data stored and protected?",a:"We store workout plans and profile data locally and optionally in cloud backups if enabled. See the Privacy Policy for more details.",icon:a.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 12h18"}),a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M3 18h18"})]})}],o=l=>n(s===l?null:l);return a.jsx("div",{className:"accordion",role:"region","aria-label":"Help center FAQ",children:r.map((l,c)=>a.jsx("div",{className:`accordion-item ${s===c?"open":""}`,children:a.jsxs("div",{className:"accordion-card",children:[a.jsx("div",{className:"help-card-icon faq-icon","aria-hidden":!0,children:l.icon}),a.jsxs("div",{className:"accordion-main",children:[a.jsxs("button",{className:"accordion-button","aria-expanded":s===c,"aria-controls":`acc-panel-${c}`,id:`acc-btn-${c}`,onClick:()=>o(c),children:[a.jsx("span",{children:l.q}),a.jsx("svg",{className:"chev",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),a.jsx("div",{id:`acc-panel-${c}`,role:"region","aria-labelledby":`acc-btn-${c}`,className:"accordion-panel",children:a.jsx("p",{children:l.a})})]})]})},c))})}const pb=({theme:s,onToggleTheme:n})=>{const r=s==="theme-dark";return a.jsx("div",{className:"settings-page",children:a.jsxs("div",{className:"settings-card",children:[a.jsxs("div",{className:"settings-header",children:[a.jsx("h1",{children:"Settings"}),a.jsx("p",{className:"settings-subtitle",children:"Personalize your FitBuddyAI experience."})]}),a.jsx("div",{className:"settings-section",children:a.jsxs("div",{className:"settings-row",children:[a.jsxs("div",{children:[a.jsx("h3",{children:"Theme"}),a.jsx("p",{className:"setting-help",children:"Switch between light and dark mode."})]}),a.jsx("button",{className:"toggle-btn",onClick:n,children:r?"Switch to Light Mode":"Switch to Dark Mode"})]})})]})})},mb=()=>{const s=E.useRef(null),n=E.useRef(null),r=E.useRef({x:0,y:0,active:!1});return E.useEffect(()=>{const o=s.current;if(!o)return;const l=o.getContext("2d");if(!l)return;const c=window.matchMedia("(max-width: 768px)").matches,m=!window.matchMedia("(prefers-reduced-motion: reduce)").matches,p=c?450:1600;let g=window.innerWidth,y=window.innerHeight;const x=window.devicePixelRatio||1;o.width=g*x,o.height=y*x,o.style.width=`${g}px`,o.style.height=`${y}px`,l.scale(x,x);const S=Array.from({length:p}).map(()=>({baseX:Math.random()*g,baseY:Math.random()*y,x:0,y:0,r:Math.random()*1.25+.35,jitter:(Math.random()-.5)*.25})).map(X=>({...X,x:X.baseX,y:X.baseY})),C=c?70:120,b=m?.045:.06,_=m?.14:0,k=(X=!1)=>{l.clearRect(0,0,g,y),l.beginPath();for(const L of S){if(m&&(L.x+=L.jitter,L.y+=L.jitter*.6,Math.abs(L.x-L.baseX)>10&&(L.jitter*=-1),Math.abs(L.y-L.baseY)>10&&(L.jitter*=-1)),r.current.active&&m){const z=L.x-r.current.x,te=L.y-r.current.y,ue=Math.hypot(z,te);if(ue<C&&ue>.01){const fe=(C-ue)/C;L.x+=z/ue*fe*C*_,L.y+=te/ue*fe*C*_}}L.x+=(L.baseX-L.x)*b,L.y+=(L.baseY-L.y)*b,l.moveTo(L.x+L.r,L.y),l.arc(L.x,L.y,L.r,0,Math.PI*2)}l.fillStyle="rgba(20, 120, 80, 0.18)",l.fill(),X||(n.current=requestAnimationFrame($))},$=X=>{k(!1)},F=X=>{r.current={x:X.clientX,y:X.clientY,active:!0}},U=()=>{r.current.active=!1},B=()=>{g=window.innerWidth,y=window.innerHeight,o.width=g*x,o.height=y*x,o.style.width=`${g}px`,o.style.height=`${y}px`,l.setTransform(1,0,0,1,0,0),l.scale(x,x)};return window.addEventListener("mousemove",F),window.addEventListener("mouseleave",U),window.addEventListener("resize",B),m?n.current=requestAnimationFrame($):k(!0),()=>{window.removeEventListener("mousemove",F),window.removeEventListener("mouseleave",U),window.removeEventListener("resize",B),n.current&&cancelAnimationFrame(n.current)}},[]),a.jsx("canvas",{ref:s,className:"dots-canvas","aria-hidden":"true"})};function gb(){const[s,n]=E.useState(null),[r,o]=E.useState(null),[l,c]=E.useState(0),d=Rn(),[m,p]=E.useState(0),[g,y]=E.useState(()=>typeof window>"u"?"theme-light":localStorage.getItem("fitbuddy_theme")==="theme-dark"?"theme-dark":"theme-light");ab(),E.useEffect(()=>{const b=g==="theme-dark";document.documentElement.classList.toggle("theme-dark",b),document.body.classList.toggle("theme-dark",b),localStorage.setItem("fitbuddy_theme",g)},[g]),E.useEffect(()=>{const b=s?.data?.theme||s?.theme;b&&b!==g&&y(b==="theme-dark"?"theme-dark":"theme-light")},[s,g]);const x=b=>{y(b);const _=s,k=_?{..._}:{data:{}};k.data={..._?.data??_??{},theme:b},n(k);try{mn(k,{skipBackup:!1})}catch($){console.warn("Failed to persist theme to user profile:",$)}},S=()=>{x(g==="theme-dark"?"theme-light":"theme-dark")};E.useEffect(()=>{if(!s?.id)return;let b=!1;const _=async()=>{if(b||typeof document<"u"&&document.hidden)return;const $=await Io(s.id);$&&n($)};_();const k=setInterval(_,15e3);return()=>{b=!0,clearInterval(k)}},[s?.id]),E.useEffect(()=>{const b=()=>n(null);return window.addEventListener("fitbuddyai-logout",b),()=>window.removeEventListener("fitbuddyai-logout",b)},[]),E.useEffect(()=>{const b=()=>{const _=In(),k=Zs();_&&n(_),k&&(o(k),c($=>$+1))};return window.addEventListener("fitbuddyai-login",b),()=>window.removeEventListener("fitbuddyai-login",b)},[]),E.useEffect(()=>{const b=()=>{const k=In();k&&(!s||k.id===s.id)&&n(k)};window.addEventListener("storage",b);let _=null;try{_=new BroadcastChannel("fitbuddyai"),_.onmessage=()=>b()}catch{}return()=>{window.removeEventListener("storage",b);try{_&&_.close()}catch{}}},[s]),E.useEffect(()=>{const b=In(),_=Zs();console.log("App startup - loadUserData ->",b),console.log("App startup - loadWorkoutPlan ->",_),b&&(n(b),b.id&&Io(b.id).then(k=>{k&&n(k)})),_&&(o(_),c(k=>k+1))},[]),E.useEffect(()=>{s?mn(s,{skipBackup:!0}):ri()},[s]),E.useEffect(()=>{r&&Er(r)},[r]),E.useEffect(()=>{console.log("App: workoutPlan updated (version:",l,"):",r)},[r,l]);const C=b=>{n(_=>{if(!_)return _;const k=(_.energy||0)-b.price,$=Array.isArray(_.inventory)?_.inventory:[];return{..._,energy:k,inventory:[...$,b]}})};return a.jsxs("div",{className:`App ${g}`,children:[a.jsx(mb,{}),a.jsx(Iw,{userData:s,profileVersion:m,theme:g,onToggleTheme:S}),a.jsx(lb,{userData:s}),a.jsxs(Sy,{children:[a.jsx(Tt,{path:"/",element:a.jsx(Xy,{})}),a.jsx(Tt,{path:"/profile",element:a.jsx(Hx,{userData:s,onProfileUpdate:b=>{n(b),p(_=>_+1)},profileVersion:m})}),a.jsx(Tt,{path:"/profile/settings",element:a.jsx(pb,{theme:g,onToggleTheme:S})}),a.jsx(Tt,{path:"/loading",element:a.jsx(Rw,{})}),a.jsx(Tt,{path:"/questionnaire",element:a.jsx(hv,{onComplete:(b,_)=>{n(b),o(_),c(k=>k+1),d("/calendar")}})}),a.jsx(Tt,{path:"/calendar",element:a.jsx(xf,{userData:s,children:a.jsx(Ow,{workoutPlan:r,userData:s,onUpdatePlan:b=>{o(b),c(_=>_+1)}},l)})}),a.jsx(Tt,{path:"/shop",element:a.jsx(tb,{user:s||{energy:0,inventory:[]},onPurchase:C})}),a.jsx(Tt,{path:"/chat",element:a.jsx(xf,{userData:s,children:a.jsx(sb,{userData:s})})}),a.jsx(Tt,{path:"/admin",element:a.jsx(ib,{})}),a.jsx(Tt,{path:"/help",element:a.jsx(db,{})}),a.jsx(Tt,{path:"/terms",element:a.jsx(cb,{})}),a.jsx(Tt,{path:"/privacy",element:a.jsx(ub,{})}),a.jsx(Tt,{path:"/signin",element:a.jsx(Vx,{})}),a.jsx(Tt,{path:"/signup",element:a.jsx(Kx,{})}),a.jsx(Tt,{path:"/verify-email",element:a.jsx(Xx,{})}),a.jsx(Tt,{path:"/rickroll",element:a.jsx(ob,{})}),a.jsx(Tt,{path:"*",element:a.jsx(ku,{})})]})]})}const yb=()=>{try{let s=!1;const n=async()=>{try{let r=null;try{const{loadUserData:o}=await $e(async()=>{const{loadUserData:c}=await Promise.resolve().then(()=>zt);return{loadUserData:c}},void 0),l=o();if(r=l?.id||l?.sub||l?.data?.id||null,!r)return}catch{return}try{if(await(await $e(()=>Promise.resolve().then(()=>Ys),void 0)).beaconBackupUserData(String(r)))return}catch{}try{(await $e(()=>Promise.resolve().then(()=>Ys),void 0)).backupUserDataToServer(String(r))}catch{}}catch{}};s||(window.addEventListener("beforeunload",n,{passive:!0}),window.addEventListener("fitbuddyai-logout",async()=>{try{const{loadUserData:r}=await $e(async()=>{const{loadUserData:d}=await Promise.resolve().then(()=>zt);return{loadUserData:d}},void 0),o=r(),l=o?.id||o?.sub||o?.data?.id||null;if(!l)return;const c=await $e(()=>Promise.resolve().then(()=>Ys),void 0);try{await c.backupAndDeleteSensitive(String(l))}catch{}try{await c.backupUserDataToServer(String(l))}catch{}}catch{}}),s=!0)}catch{}};yb();Ag.createRoot(document.getElementById("root")).render(a.jsx(nn.StrictMode,{children:a.jsx(Py,{children:a.jsx(gb,{})})}))});export default vb();
