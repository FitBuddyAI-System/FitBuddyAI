var mg=(i,r)=>()=>(r||i((r={exports:{}}).exports,r),r.exports);var ib=mg((hb,ia)=>{function gg(i,r){for(var n=0;n<r.length;n++){const a=r[n];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in i)){const u=Object.getOwnPropertyDescriptor(a,l);u&&Object.defineProperty(i,l,u.get?u:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();const yg="modulepreload",vg=function(i){return"/"+i},Hh={},$e=function(r,n,a){let l=Promise.resolve();if(n&&n.length>0){let y=function(g){return Promise.all(g.map(x=>Promise.resolve(x).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};var d=y;document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),p=m?.nonce||m?.getAttribute("nonce");l=y(n.map(g=>{if(g=vg(g),g in Hh)return;Hh[g]=!0;const x=g.endsWith(".css"),b=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${b}`))return;const N=document.createElement("link");if(N.rel=x?"stylesheet":yg,x||(N.as="script"),N.crossOrigin="",N.href=g,p&&N.setAttribute("nonce",p),document.head.appendChild(N),x)return new Promise((S,C)=>{N.addEventListener("load",S),N.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${g}`)))})}))}function u(m){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=m,window.dispatchEvent(p),!p.defaultPrevented)throw m}return l.then(m=>{for(const p of m||[])p.status==="rejected"&&u(p.reason);return r().catch(u)})};function au(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function wg(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var r=i.default;if(typeof r=="function"){var n=function a(){var l=!1;try{l=this instanceof a}catch{}return l?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};n.prototype=r.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(i).forEach(function(a){var l=Object.getOwnPropertyDescriptor(i,a);Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:function(){return i[a]}})}),n}var Sc={exports:{}},$i={},_c={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vh;function xg(){if(Vh)return Ue;Vh=1;var i=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.iterator;function b(w){return w===null||typeof w!="object"?null:(w=x&&w[x]||w["@@iterator"],typeof w=="function"?w:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function k(w,O,J){this.props=w,this.context=O,this.refs=C,this.updater=J||N}k.prototype.isReactComponent={},k.prototype.setState=function(w,O){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,O,"setState")},k.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function q(){}q.prototype=k.prototype;function $(w,O,J){this.props=w,this.context=O,this.refs=C,this.updater=J||N}var L=$.prototype=new q;L.constructor=$,S(L,k.prototype),L.isPureReactComponent=!0;var F=Array.isArray,ee=Object.prototype.hasOwnProperty,V={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function te(w,O,J){var Z,ie={},ue=null,se=null;if(O!=null)for(Z in O.ref!==void 0&&(se=O.ref),O.key!==void 0&&(ue=""+O.key),O)ee.call(O,Z)&&!W.hasOwnProperty(Z)&&(ie[Z]=O[Z]);var de=arguments.length-2;if(de===1)ie.children=J;else if(1<de){for(var _e=Array(de),Ae=0;Ae<de;Ae++)_e[Ae]=arguments[Ae+2];ie.children=_e}if(w&&w.defaultProps)for(Z in de=w.defaultProps,de)ie[Z]===void 0&&(ie[Z]=de[Z]);return{$$typeof:i,type:w,key:ue,ref:se,props:ie,_owner:V.current}}function fe(w,O){return{$$typeof:i,type:w.type,key:O,ref:w.ref,props:w.props,_owner:w._owner}}function pe(w){return typeof w=="object"&&w!==null&&w.$$typeof===i}function K(w){var O={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(J){return O[J]})}var oe=/\/+/g;function ne(w,O){return typeof w=="object"&&w!==null&&w.key!=null?K(""+w.key):O.toString(36)}function G(w,O,J,Z,ie){var ue=typeof w;(ue==="undefined"||ue==="boolean")&&(w=null);var se=!1;if(w===null)se=!0;else switch(ue){case"string":case"number":se=!0;break;case"object":switch(w.$$typeof){case i:case r:se=!0}}if(se)return se=w,ie=ie(se),w=Z===""?"."+ne(se,0):Z,F(ie)?(J="",w!=null&&(J=w.replace(oe,"$&/")+"/"),G(ie,O,J,"",function(Ae){return Ae})):ie!=null&&(pe(ie)&&(ie=fe(ie,J+(!ie.key||se&&se.key===ie.key?"":(""+ie.key).replace(oe,"$&/")+"/")+w)),O.push(ie)),1;if(se=0,Z=Z===""?".":Z+":",F(w))for(var de=0;de<w.length;de++){ue=w[de];var _e=Z+ne(ue,de);se+=G(ue,O,J,_e,ie)}else if(_e=b(w),typeof _e=="function")for(w=_e.call(w),de=0;!(ue=w.next()).done;)ue=ue.value,_e=Z+ne(ue,de++),se+=G(ue,O,J,_e,ie);else if(ue==="object")throw O=String(w),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return se}function ce(w,O,J){if(w==null)return w;var Z=[],ie=0;return G(w,Z,"","",function(ue){return O.call(J,ue,ie++)}),Z}function he(w){if(w._status===-1){var O=w._result;O=O(),O.then(function(J){(w._status===0||w._status===-1)&&(w._status=1,w._result=J)},function(J){(w._status===0||w._status===-1)&&(w._status=2,w._result=J)}),w._status===-1&&(w._status=0,w._result=O)}if(w._status===1)return w._result.default;throw w._result}var B={current:null},z={transition:null},ae={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:z,ReactCurrentOwner:V};function E(){throw Error("act(...) is not supported in production builds of React.")}return Ue.Children={map:ce,forEach:function(w,O,J){ce(w,function(){O.apply(this,arguments)},J)},count:function(w){var O=0;return ce(w,function(){O++}),O},toArray:function(w){return ce(w,function(O){return O})||[]},only:function(w){if(!pe(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},Ue.Component=k,Ue.Fragment=n,Ue.Profiler=l,Ue.PureComponent=$,Ue.StrictMode=a,Ue.Suspense=p,Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,Ue.act=E,Ue.cloneElement=function(w,O,J){if(w==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+w+".");var Z=S({},w.props),ie=w.key,ue=w.ref,se=w._owner;if(O!=null){if(O.ref!==void 0&&(ue=O.ref,se=V.current),O.key!==void 0&&(ie=""+O.key),w.type&&w.type.defaultProps)var de=w.type.defaultProps;for(_e in O)ee.call(O,_e)&&!W.hasOwnProperty(_e)&&(Z[_e]=O[_e]===void 0&&de!==void 0?de[_e]:O[_e])}var _e=arguments.length-2;if(_e===1)Z.children=J;else if(1<_e){de=Array(_e);for(var Ae=0;Ae<_e;Ae++)de[Ae]=arguments[Ae+2];Z.children=de}return{$$typeof:i,type:w.type,key:ie,ref:ue,props:Z,_owner:se}},Ue.createContext=function(w){return w={$$typeof:d,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},w.Provider={$$typeof:u,_context:w},w.Consumer=w},Ue.createElement=te,Ue.createFactory=function(w){var O=te.bind(null,w);return O.type=w,O},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(w){return{$$typeof:m,render:w}},Ue.isValidElement=pe,Ue.lazy=function(w){return{$$typeof:g,_payload:{_status:-1,_result:w},_init:he}},Ue.memo=function(w,O){return{$$typeof:y,type:w,compare:O===void 0?null:O}},Ue.startTransition=function(w){var O=z.transition;z.transition={};try{w()}finally{z.transition=O}},Ue.unstable_act=E,Ue.useCallback=function(w,O){return B.current.useCallback(w,O)},Ue.useContext=function(w){return B.current.useContext(w)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(w){return B.current.useDeferredValue(w)},Ue.useEffect=function(w,O){return B.current.useEffect(w,O)},Ue.useId=function(){return B.current.useId()},Ue.useImperativeHandle=function(w,O,J){return B.current.useImperativeHandle(w,O,J)},Ue.useInsertionEffect=function(w,O){return B.current.useInsertionEffect(w,O)},Ue.useLayoutEffect=function(w,O){return B.current.useLayoutEffect(w,O)},Ue.useMemo=function(w,O){return B.current.useMemo(w,O)},Ue.useReducer=function(w,O,J){return B.current.useReducer(w,O,J)},Ue.useRef=function(w){return B.current.useRef(w)},Ue.useState=function(w){return B.current.useState(w)},Ue.useSyncExternalStore=function(w,O,J){return B.current.useSyncExternalStore(w,O,J)},Ue.useTransition=function(){return B.current.useTransition()},Ue.version="18.3.1",Ue}var Gh;function ou(){return Gh||(Gh=1,_c.exports=xg()),_c.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jh;function bg(){if(Jh)return $i;Jh=1;var i=ou(),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(m,p,y){var g,x={},b=null,N=null;y!==void 0&&(b=""+y),p.key!==void 0&&(b=""+p.key),p.ref!==void 0&&(N=p.ref);for(g in p)a.call(p,g)&&!u.hasOwnProperty(g)&&(x[g]=p[g]);if(m&&m.defaultProps)for(g in p=m.defaultProps,p)x[g]===void 0&&(x[g]=p[g]);return{$$typeof:r,type:m,key:b,ref:N,props:x,_owner:l.current}}return $i.Fragment=n,$i.jsx=d,$i.jsxs=d,$i}var Kh;function kg(){return Kh||(Kh=1,Sc.exports=bg()),Sc.exports}var o=kg(),j=ou();const rr=au(j),Sg=gg({__proto__:null,default:rr},[j]);var yo={},jc={exports:{}},Qt={},Ec={exports:{}},Nc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qh;function _g(){return Qh||(Qh=1,function(i){function r(z,ae){var E=z.length;z.push(ae);e:for(;0<E;){var w=E-1>>>1,O=z[w];if(0<l(O,ae))z[w]=ae,z[E]=O,E=w;else break e}}function n(z){return z.length===0?null:z[0]}function a(z){if(z.length===0)return null;var ae=z[0],E=z.pop();if(E!==ae){z[0]=E;e:for(var w=0,O=z.length,J=O>>>1;w<J;){var Z=2*(w+1)-1,ie=z[Z],ue=Z+1,se=z[ue];if(0>l(ie,E))ue<O&&0>l(se,ie)?(z[w]=se,z[ue]=E,w=ue):(z[w]=ie,z[Z]=E,w=Z);else if(ue<O&&0>l(se,E))z[w]=se,z[ue]=E,w=ue;else break e}}return ae}function l(z,ae){var E=z.sortIndex-ae.sortIndex;return E!==0?E:z.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var p=[],y=[],g=1,x=null,b=3,N=!1,S=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(z){for(var ae=n(y);ae!==null;){if(ae.callback===null)a(y);else if(ae.startTime<=z)a(y),ae.sortIndex=ae.expirationTime,r(p,ae);else break;ae=n(y)}}function F(z){if(C=!1,L(z),!S)if(n(p)!==null)S=!0,he(ee);else{var ae=n(y);ae!==null&&B(F,ae.startTime-z)}}function ee(z,ae){S=!1,C&&(C=!1,q(te),te=-1),N=!0;var E=b;try{for(L(ae),x=n(p);x!==null&&(!(x.expirationTime>ae)||z&&!K());){var w=x.callback;if(typeof w=="function"){x.callback=null,b=x.priorityLevel;var O=w(x.expirationTime<=ae);ae=i.unstable_now(),typeof O=="function"?x.callback=O:x===n(p)&&a(p),L(ae)}else a(p);x=n(p)}if(x!==null)var J=!0;else{var Z=n(y);Z!==null&&B(F,Z.startTime-ae),J=!1}return J}finally{x=null,b=E,N=!1}}var V=!1,W=null,te=-1,fe=5,pe=-1;function K(){return!(i.unstable_now()-pe<fe)}function oe(){if(W!==null){var z=i.unstable_now();pe=z;var ae=!0;try{ae=W(!0,z)}finally{ae?ne():(V=!1,W=null)}}else V=!1}var ne;if(typeof $=="function")ne=function(){$(oe)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,ce=G.port2;G.port1.onmessage=oe,ne=function(){ce.postMessage(null)}}else ne=function(){k(oe,0)};function he(z){W=z,V||(V=!0,ne())}function B(z,ae){te=k(function(){z(i.unstable_now())},ae)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_continueExecution=function(){S||N||(S=!0,he(ee))},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_getFirstCallbackNode=function(){return n(p)},i.unstable_next=function(z){switch(b){case 1:case 2:case 3:var ae=3;break;default:ae=b}var E=b;b=ae;try{return z()}finally{b=E}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(z,ae){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var E=b;b=z;try{return ae()}finally{b=E}},i.unstable_scheduleCallback=function(z,ae,E){var w=i.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?w+E:w):E=w,z){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=E+O,z={id:g++,callback:ae,priorityLevel:z,startTime:E,expirationTime:O,sortIndex:-1},E>w?(z.sortIndex=E,r(y,z),n(p)===null&&z===n(y)&&(C?(q(te),te=-1):C=!0,B(F,E-w))):(z.sortIndex=O,r(p,z),S||N||(S=!0,he(ee))),z},i.unstable_shouldYield=K,i.unstable_wrapCallback=function(z){var ae=b;return function(){var E=b;b=ae;try{return z.apply(this,arguments)}finally{b=E}}}}(Nc)),Nc}var Yh;function jg(){return Yh||(Yh=1,Ec.exports=_g()),Ec.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xh;function Eg(){if(Xh)return Qt;Xh=1;var i=ou(),r=jg();function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,l={};function u(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(l[e]=t,e=0;e<t.length;e++)a.add(t[e])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},x={};function b(e){return p.call(x,e)?!0:p.call(g,e)?!1:y.test(e)?x[e]=!0:(g[e]=!0,!1)}function N(e,t,s,c){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return c?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function S(e,t,s,c){if(t===null||typeof t>"u"||N(e,t,s,c))return!0;if(c)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function C(e,t,s,c,h,f,v){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=v}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){k[e]=new C(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];k[t]=new C(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){k[e]=new C(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){k[e]=new C(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){k[e]=new C(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){k[e]=new C(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){k[e]=new C(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){k[e]=new C(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){k[e]=new C(e,5,!1,e.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function $(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(q,$);k[t]=new C(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(q,$);k[t]=new C(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(q,$);k[t]=new C(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){k[e]=new C(e,1,!1,e.toLowerCase(),null,!1,!1)}),k.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){k[e]=new C(e,1,!1,e.toLowerCase(),null,!0,!0)});function L(e,t,s,c){var h=k.hasOwnProperty(t)?k[t]:null;(h!==null?h.type!==0:c||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(S(t,s,h,c)&&(s=null),c||h===null?b(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):h.mustUseProperty?e[h.propertyName]=s===null?h.type===3?!1:"":s:(t=h.attributeName,c=h.attributeNamespace,s===null?e.removeAttribute(t):(h=h.type,s=h===3||h===4&&s===!0?"":""+s,c?e.setAttributeNS(c,t,s):e.setAttribute(t,s))))}var F=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ee=Symbol.for("react.element"),V=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),pe=Symbol.for("react.provider"),K=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),z=Symbol.iterator;function ae(e){return e===null||typeof e!="object"?null:(e=z&&e[z]||e["@@iterator"],typeof e=="function"?e:null)}var E=Object.assign,w;function O(e){if(w===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);w=t&&t[1]||""}return`
`+w+e}var J=!1;function Z(e,t){if(!e||J)return"";J=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(M){var c=M}Reflect.construct(e,[],t)}else{try{t.call()}catch(M){c=M}e.call(t.prototype)}else{try{throw Error()}catch(M){c=M}e()}}catch(M){if(M&&c&&typeof M.stack=="string"){for(var h=M.stack.split(`
`),f=c.stack.split(`
`),v=h.length-1,_=f.length-1;1<=v&&0<=_&&h[v]!==f[_];)_--;for(;1<=v&&0<=_;v--,_--)if(h[v]!==f[_]){if(v!==1||_!==1)do if(v--,_--,0>_||h[v]!==f[_]){var T=`
`+h[v].replace(" at new "," at ");return e.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",e.displayName)),T}while(1<=v&&0<=_);break}}}finally{J=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?O(e):""}function ie(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=Z(e.type,!1),e;case 11:return e=Z(e.type.render,!1),e;case 1:return e=Z(e.type,!0),e;default:return""}}function ue(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case V:return"Portal";case fe:return"Profiler";case te:return"StrictMode";case ne:return"Suspense";case G:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case K:return(e.displayName||"Context")+".Consumer";case pe:return(e._context.displayName||"Context")+".Provider";case oe:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ce:return t=e.displayName||null,t!==null?t:ue(e.type)||"Memo";case he:t=e._payload,e=e._init;try{return ue(e(t))}catch{}}return null}function se(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(t);case 8:return t===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function de(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _e(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ae(e){var t=_e(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),c=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var h=s.get,f=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return h.call(this)},set:function(v){c=""+v,f.call(this,v)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Be(e){e._valueTracker||(e._valueTracker=Ae(e))}function Ge(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),c="";return e&&(c=_e(e)?e.checked?"true":"false":e.value),e=c,e!==s?(t.setValue(e),!0):!1}function Ze(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ie(e,t){var s=t.checked;return E({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function I(e,t){var s=t.defaultValue==null?"":t.defaultValue,c=t.checked!=null?t.checked:t.defaultChecked;s=de(t.value!=null?t.value:s),e._wrapperState={initialChecked:c,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function U(e,t){t=t.checked,t!=null&&L(e,"checked",t,!1)}function ye(e,t){U(e,t);var s=de(t.value),c=t.type;if(s!=null)c==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(c==="submit"||c==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xe(e,t.type,s):t.hasOwnProperty("defaultValue")&&xe(e,t.type,de(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function je(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var c=t.type;if(!(c!=="submit"&&c!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function xe(e,t,s){(t!=="number"||Ze(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Se=Array.isArray;function Ce(e,t,s,c){if(e=e.options,t){t={};for(var h=0;h<s.length;h++)t["$"+s[h]]=!0;for(s=0;s<e.length;s++)h=t.hasOwnProperty("$"+e[s].value),e[s].selected!==h&&(e[s].selected=h),h&&c&&(e[s].defaultSelected=!0)}else{for(s=""+de(s),t=null,h=0;h<e.length;h++){if(e[h].value===s){e[h].selected=!0,c&&(e[h].defaultSelected=!0);return}t!==null||e[h].disabled||(t=e[h])}t!==null&&(t.selected=!0)}}function Te(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(n(91));return E({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Re(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(n(92));if(Se(s)){if(1<s.length)throw Error(n(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:de(s)}}function rt(e,t){var s=de(t.value),c=de(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),c!=null&&(e.defaultValue=""+c)}function at(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ht(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function At(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ht(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var St,fr=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,c,h){MSApp.execUnsafeLocalFunction(function(){return e(t,s,c,h)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(St=St||document.createElement("div"),St.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=St.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function It(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Rt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_t=["Webkit","ms","Moz","O"];Object.keys(Rt).forEach(function(e){_t.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Rt[t]=Rt[e]})});function Qr(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Rt.hasOwnProperty(e)&&Rt[e]?(""+t).trim():t+"px"}function nr(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var c=s.indexOf("--")===0,h=Qr(s,t[s],c);s==="float"&&(s="cssFloat"),c?e.setProperty(s,h):e[s]=h}}var Bo=E({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function An(e,t){if(t){if(Bo[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(n(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(n(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(t.style!=null&&typeof t.style!="object")throw Error(n(62))}}function In(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ls=null;function cs(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ii=null,Yr=null,Xr=null;function us(e){if(e=Ni(e)){if(typeof ii!="function")throw Error(n(280));var t=e.stateNode;t&&(t=Oa(t),ii(e.stateNode,e.type,t))}}function la(e){Yr?Xr?Xr.push(e):Xr=[e]:Yr=e}function ca(){if(Yr){var e=Yr,t=Xr;if(Xr=Yr=null,us(e),t)for(e=0;e<t.length;e++)us(t[e])}}function ua(e,t){return e(t)}function da(){}var ai=!1;function ha(e,t,s){if(ai)return e(t,s);ai=!0;try{return ua(e,t,s)}finally{ai=!1,(Yr!==null||Xr!==null)&&(da(),ca())}}function Zr(e,t){var s=e.stateNode;if(s===null)return null;var c=Oa(s);if(c===null)return null;s=c[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(n(231,t,typeof s));return s}var oi=!1;if(m)try{var Rn={};Object.defineProperty(Rn,"passive",{get:function(){oi=!0}}),window.addEventListener("test",Rn,Rn),window.removeEventListener("test",Rn,Rn)}catch{oi=!1}function Wo(e,t,s,c,h,f,v,_,T){var M=Array.prototype.slice.call(arguments,3);try{t.apply(s,M)}catch(Y){this.onError(Y)}}var Dn=!1,ds=null,hs=!1,li=null,en={onError:function(e){Dn=!0,ds=e}};function $o(e,t,s,c,h,f,v,_,T){Dn=!1,ds=null,Wo.apply(en,arguments)}function zo(e,t,s,c,h,f,v,_,T){if($o.apply(this,arguments),Dn){if(Dn){var M=ds;Dn=!1,ds=null}else throw Error(n(198));hs||(hs=!0,li=M)}}function Rr(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function D(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function H(e){if(Rr(e)!==e)throw Error(n(188))}function le(e){var t=e.alternate;if(!t){if(t=Rr(e),t===null)throw Error(n(188));return t!==e?null:e}for(var s=e,c=t;;){var h=s.return;if(h===null)break;var f=h.alternate;if(f===null){if(c=h.return,c!==null){s=c;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===s)return H(h),e;if(f===c)return H(h),t;f=f.sibling}throw Error(n(188))}if(s.return!==c.return)s=h,c=f;else{for(var v=!1,_=h.child;_;){if(_===s){v=!0,s=h,c=f;break}if(_===c){v=!0,c=h,s=f;break}_=_.sibling}if(!v){for(_=f.child;_;){if(_===s){v=!0,s=f,c=h;break}if(_===c){v=!0,c=f,s=h;break}_=_.sibling}if(!v)throw Error(n(189))}}if(s.alternate!==c)throw Error(n(190))}if(s.tag!==3)throw Error(n(188));return s.stateNode.current===s?e:t}function ge(e){return e=le(e),e!==null?Me(e):null}function Me(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Me(e);if(t!==null)return t;e=e.sibling}return null}var We=r.unstable_scheduleCallback,He=r.unstable_cancelCallback,ze=r.unstable_shouldYield,qt=r.unstable_requestPaint,Ke=r.unstable_now,Dr=r.unstable_getCurrentPriorityLevel,Je=r.unstable_ImmediatePriority,nt=r.unstable_UserBlockingPriority,Yt=r.unstable_NormalPriority,Ln=r.unstable_LowPriority,Lr=r.unstable_IdlePriority,Pe=null,sr=null;function De(e){if(sr&&typeof sr.onCommitFiberRoot=="function")try{sr.onCommitFiberRoot(Pe,e,void 0,(e.current.flags&128)===128)}catch{}}var pr=Math.clz32?Math.clz32:Ip,Op=Math.log,Ap=Math.LN2;function Ip(e){return e>>>=0,e===0?32:31-(Op(e)/Ap|0)|0}var fa=64,pa=4194304;function ci(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ma(e,t){var s=e.pendingLanes;if(s===0)return 0;var c=0,h=e.suspendedLanes,f=e.pingedLanes,v=s&268435455;if(v!==0){var _=v&~h;_!==0?c=ci(_):(f&=v,f!==0&&(c=ci(f)))}else v=s&~h,v!==0?c=ci(v):f!==0&&(c=ci(f));if(c===0)return 0;if(t!==0&&t!==c&&(t&h)===0&&(h=c&-c,f=t&-t,h>=f||h===16&&(f&4194240)!==0))return t;if((c&4)!==0&&(c|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=c;0<t;)s=31-pr(t),h=1<<s,c|=e[s],t&=~h;return c}function Rp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dp(e,t){for(var s=e.suspendedLanes,c=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes;0<f;){var v=31-pr(f),_=1<<v,T=h[v];T===-1?((_&s)===0||(_&c)!==0)&&(h[v]=Rp(_,t)):T<=t&&(e.expiredLanes|=_),f&=~_}}function qo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ku(){var e=fa;return fa<<=1,(fa&4194240)===0&&(fa=64),e}function Ho(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function ui(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-pr(t),e[t]=s}function Lp(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var c=e.eventTimes;for(e=e.expirationTimes;0<s;){var h=31-pr(s),f=1<<h;t[h]=0,c[h]=-1,e[h]=-1,s&=~f}}function Vo(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var c=31-pr(s),h=1<<c;h&t|e[c]&t&&(e[c]|=t),s&=~h}}var Qe=0;function Su(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var _u,Go,ju,Eu,Nu,Jo=!1,ga=[],tn=null,rn=null,nn=null,di=new Map,hi=new Map,sn=[],Mp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cu(e,t){switch(e){case"focusin":case"focusout":tn=null;break;case"dragenter":case"dragleave":rn=null;break;case"mouseover":case"mouseout":nn=null;break;case"pointerover":case"pointerout":di.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hi.delete(t.pointerId)}}function fi(e,t,s,c,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:s,eventSystemFlags:c,nativeEvent:f,targetContainers:[h]},t!==null&&(t=Ni(t),t!==null&&Go(t)),e):(e.eventSystemFlags|=c,t=e.targetContainers,h!==null&&t.indexOf(h)===-1&&t.push(h),e)}function Up(e,t,s,c,h){switch(t){case"focusin":return tn=fi(tn,e,t,s,c,h),!0;case"dragenter":return rn=fi(rn,e,t,s,c,h),!0;case"mouseover":return nn=fi(nn,e,t,s,c,h),!0;case"pointerover":var f=h.pointerId;return di.set(f,fi(di.get(f)||null,e,t,s,c,h)),!0;case"gotpointercapture":return f=h.pointerId,hi.set(f,fi(hi.get(f)||null,e,t,s,c,h)),!0}return!1}function Tu(e){var t=Mn(e.target);if(t!==null){var s=Rr(t);if(s!==null){if(t=s.tag,t===13){if(t=D(s),t!==null){e.blockedOn=t,Nu(e.priority,function(){ju(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ya(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Qo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var c=new s.constructor(s.type,s);ls=c,s.target.dispatchEvent(c),ls=null}else return t=Ni(s),t!==null&&Go(t),e.blockedOn=s,!1;t.shift()}return!0}function Pu(e,t,s){ya(e)&&s.delete(t)}function Fp(){Jo=!1,tn!==null&&ya(tn)&&(tn=null),rn!==null&&ya(rn)&&(rn=null),nn!==null&&ya(nn)&&(nn=null),di.forEach(Pu),hi.forEach(Pu)}function pi(e,t){e.blockedOn===t&&(e.blockedOn=null,Jo||(Jo=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Fp)))}function mi(e){function t(h){return pi(h,e)}if(0<ga.length){pi(ga[0],e);for(var s=1;s<ga.length;s++){var c=ga[s];c.blockedOn===e&&(c.blockedOn=null)}}for(tn!==null&&pi(tn,e),rn!==null&&pi(rn,e),nn!==null&&pi(nn,e),di.forEach(t),hi.forEach(t),s=0;s<sn.length;s++)c=sn[s],c.blockedOn===e&&(c.blockedOn=null);for(;0<sn.length&&(s=sn[0],s.blockedOn===null);)Tu(s),s.blockedOn===null&&sn.shift()}var fs=F.ReactCurrentBatchConfig,va=!0;function Bp(e,t,s,c){var h=Qe,f=fs.transition;fs.transition=null;try{Qe=1,Ko(e,t,s,c)}finally{Qe=h,fs.transition=f}}function Wp(e,t,s,c){var h=Qe,f=fs.transition;fs.transition=null;try{Qe=4,Ko(e,t,s,c)}finally{Qe=h,fs.transition=f}}function Ko(e,t,s,c){if(va){var h=Qo(e,t,s,c);if(h===null)fl(e,t,c,wa,s),Cu(e,c);else if(Up(h,e,t,s,c))c.stopPropagation();else if(Cu(e,c),t&4&&-1<Mp.indexOf(e)){for(;h!==null;){var f=Ni(h);if(f!==null&&_u(f),f=Qo(e,t,s,c),f===null&&fl(e,t,c,wa,s),f===h)break;h=f}h!==null&&c.stopPropagation()}else fl(e,t,c,null,s)}}var wa=null;function Qo(e,t,s,c){if(wa=null,e=cs(c),e=Mn(e),e!==null)if(t=Rr(e),t===null)e=null;else if(s=t.tag,s===13){if(e=D(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wa=e,null}function Ou(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dr()){case Je:return 1;case nt:return 4;case Yt:case Ln:return 16;case Lr:return 536870912;default:return 16}default:return 16}}var an=null,Yo=null,xa=null;function Au(){if(xa)return xa;var e,t=Yo,s=t.length,c,h="value"in an?an.value:an.textContent,f=h.length;for(e=0;e<s&&t[e]===h[e];e++);var v=s-e;for(c=1;c<=v&&t[s-c]===h[f-c];c++);return xa=h.slice(e,1<c?1-c:void 0)}function ba(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ka(){return!0}function Iu(){return!1}function Xt(e){function t(s,c,h,f,v){this._reactName=s,this._targetInst=h,this.type=c,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(s=e[_],this[_]=s?s(f):f[_]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ka:Iu,this.isPropagationStopped=Iu,this}return E(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ka)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ka)},persist:function(){},isPersistent:ka}),t}var ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xo=Xt(ps),gi=E({},ps,{view:0,detail:0}),$p=Xt(gi),Zo,el,yi,Sa=E({},gi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yi&&(yi&&e.type==="mousemove"?(Zo=e.screenX-yi.screenX,el=e.screenY-yi.screenY):el=Zo=0,yi=e),Zo)},movementY:function(e){return"movementY"in e?e.movementY:el}}),Ru=Xt(Sa),zp=E({},Sa,{dataTransfer:0}),qp=Xt(zp),Hp=E({},gi,{relatedTarget:0}),tl=Xt(Hp),Vp=E({},ps,{animationName:0,elapsedTime:0,pseudoElement:0}),Gp=Xt(Vp),Jp=E({},ps,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Kp=Xt(Jp),Qp=E({},ps,{data:0}),Du=Xt(Qp),Yp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function em(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Zp[e])?!!t[e]:!1}function rl(){return em}var tm=E({},gi,{key:function(e){if(e.key){var t=Yp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ba(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Xp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rl,charCode:function(e){return e.type==="keypress"?ba(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ba(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),rm=Xt(tm),nm=E({},Sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lu=Xt(nm),sm=E({},gi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rl}),im=Xt(sm),am=E({},ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),om=Xt(am),lm=E({},Sa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cm=Xt(lm),um=[9,13,27,32],nl=m&&"CompositionEvent"in window,vi=null;m&&"documentMode"in document&&(vi=document.documentMode);var dm=m&&"TextEvent"in window&&!vi,Mu=m&&(!nl||vi&&8<vi&&11>=vi),Uu=" ",Fu=!1;function Bu(e,t){switch(e){case"keyup":return um.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ms=!1;function hm(e,t){switch(e){case"compositionend":return Wu(t);case"keypress":return t.which!==32?null:(Fu=!0,Uu);case"textInput":return e=t.data,e===Uu&&Fu?null:e;default:return null}}function fm(e,t){if(ms)return e==="compositionend"||!nl&&Bu(e,t)?(e=Au(),xa=Yo=an=null,ms=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mu&&t.locale!=="ko"?null:t.data;default:return null}}var pm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $u(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pm[e.type]:t==="textarea"}function zu(e,t,s,c){la(c),t=Ca(t,"onChange"),0<t.length&&(s=new Xo("onChange","change",null,s,c),e.push({event:s,listeners:t}))}var wi=null,xi=null;function mm(e){od(e,0)}function _a(e){var t=xs(e);if(Ge(t))return e}function gm(e,t){if(e==="change")return t}var qu=!1;if(m){var sl;if(m){var il="oninput"in document;if(!il){var Hu=document.createElement("div");Hu.setAttribute("oninput","return;"),il=typeof Hu.oninput=="function"}sl=il}else sl=!1;qu=sl&&(!document.documentMode||9<document.documentMode)}function Vu(){wi&&(wi.detachEvent("onpropertychange",Gu),xi=wi=null)}function Gu(e){if(e.propertyName==="value"&&_a(xi)){var t=[];zu(t,xi,e,cs(e)),ha(mm,t)}}function ym(e,t,s){e==="focusin"?(Vu(),wi=t,xi=s,wi.attachEvent("onpropertychange",Gu)):e==="focusout"&&Vu()}function vm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _a(xi)}function wm(e,t){if(e==="click")return _a(t)}function xm(e,t){if(e==="input"||e==="change")return _a(t)}function bm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mr=typeof Object.is=="function"?Object.is:bm;function bi(e,t){if(mr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),c=Object.keys(t);if(s.length!==c.length)return!1;for(c=0;c<s.length;c++){var h=s[c];if(!p.call(t,h)||!mr(e[h],t[h]))return!1}return!0}function Ju(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ku(e,t){var s=Ju(e);e=0;for(var c;s;){if(s.nodeType===3){if(c=e+s.textContent.length,e<=t&&c>=t)return{node:s,offset:t-e};e=c}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Ju(s)}}function Qu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Yu(){for(var e=window,t=Ze();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Ze(e.document)}return t}function al(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function km(e){var t=Yu(),s=e.focusedElem,c=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Qu(s.ownerDocument.documentElement,s)){if(c!==null&&al(s)){if(t=c.start,e=c.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var h=s.textContent.length,f=Math.min(c.start,h);c=c.end===void 0?f:Math.min(c.end,h),!e.extend&&f>c&&(h=c,c=f,f=h),h=Ku(s,f);var v=Ku(s,c);h&&v&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==v.node||e.focusOffset!==v.offset)&&(t=t.createRange(),t.setStart(h.node,h.offset),e.removeAllRanges(),f>c?(e.addRange(t),e.extend(v.node,v.offset)):(t.setEnd(v.node,v.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Sm=m&&"documentMode"in document&&11>=document.documentMode,gs=null,ol=null,ki=null,ll=!1;function Xu(e,t,s){var c=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ll||gs==null||gs!==Ze(c)||(c=gs,"selectionStart"in c&&al(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ki&&bi(ki,c)||(ki=c,c=Ca(ol,"onSelect"),0<c.length&&(t=new Xo("onSelect","select",null,t,s),e.push({event:t,listeners:c}),t.target=gs)))}function ja(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var ys={animationend:ja("Animation","AnimationEnd"),animationiteration:ja("Animation","AnimationIteration"),animationstart:ja("Animation","AnimationStart"),transitionend:ja("Transition","TransitionEnd")},cl={},Zu={};m&&(Zu=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function Ea(e){if(cl[e])return cl[e];if(!ys[e])return e;var t=ys[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Zu)return cl[e]=t[s];return e}var ed=Ea("animationend"),td=Ea("animationiteration"),rd=Ea("animationstart"),nd=Ea("transitionend"),sd=new Map,id="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function on(e,t){sd.set(e,t),u(t,[e])}for(var ul=0;ul<id.length;ul++){var dl=id[ul],_m=dl.toLowerCase(),jm=dl[0].toUpperCase()+dl.slice(1);on(_m,"on"+jm)}on(ed,"onAnimationEnd"),on(td,"onAnimationIteration"),on(rd,"onAnimationStart"),on("dblclick","onDoubleClick"),on("focusin","onFocus"),on("focusout","onBlur"),on(nd,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Si="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Em=new Set("cancel close invalid load scroll toggle".split(" ").concat(Si));function ad(e,t,s){var c=e.type||"unknown-event";e.currentTarget=s,zo(c,t,void 0,e),e.currentTarget=null}function od(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var c=e[s],h=c.event;c=c.listeners;e:{var f=void 0;if(t)for(var v=c.length-1;0<=v;v--){var _=c[v],T=_.instance,M=_.currentTarget;if(_=_.listener,T!==f&&h.isPropagationStopped())break e;ad(h,_,M),f=T}else for(v=0;v<c.length;v++){if(_=c[v],T=_.instance,M=_.currentTarget,_=_.listener,T!==f&&h.isPropagationStopped())break e;ad(h,_,M),f=T}}}if(hs)throw e=li,hs=!1,li=null,e}function st(e,t){var s=t[wl];s===void 0&&(s=t[wl]=new Set);var c=e+"__bubble";s.has(c)||(ld(t,e,2,!1),s.add(c))}function hl(e,t,s){var c=0;t&&(c|=4),ld(s,e,c,t)}var Na="_reactListening"+Math.random().toString(36).slice(2);function _i(e){if(!e[Na]){e[Na]=!0,a.forEach(function(s){s!=="selectionchange"&&(Em.has(s)||hl(s,!1,e),hl(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Na]||(t[Na]=!0,hl("selectionchange",!1,t))}}function ld(e,t,s,c){switch(Ou(t)){case 1:var h=Bp;break;case 4:h=Wp;break;default:h=Ko}s=h.bind(null,t,s,e),h=void 0,!oi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(h=!0),c?h!==void 0?e.addEventListener(t,s,{capture:!0,passive:h}):e.addEventListener(t,s,!0):h!==void 0?e.addEventListener(t,s,{passive:h}):e.addEventListener(t,s,!1)}function fl(e,t,s,c,h){var f=c;if((t&1)===0&&(t&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var _=c.stateNode.containerInfo;if(_===h||_.nodeType===8&&_.parentNode===h)break;if(v===4)for(v=c.return;v!==null;){var T=v.tag;if((T===3||T===4)&&(T=v.stateNode.containerInfo,T===h||T.nodeType===8&&T.parentNode===h))return;v=v.return}for(;_!==null;){if(v=Mn(_),v===null)return;if(T=v.tag,T===5||T===6){c=f=v;continue e}_=_.parentNode}}c=c.return}ha(function(){var M=f,Y=cs(s),X=[];e:{var Q=sd.get(e);if(Q!==void 0){var me=Xo,we=e;switch(e){case"keypress":if(ba(s)===0)break e;case"keydown":case"keyup":me=rm;break;case"focusin":we="focus",me=tl;break;case"focusout":we="blur",me=tl;break;case"beforeblur":case"afterblur":me=tl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=Ru;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=qp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=im;break;case ed:case td:case rd:me=Gp;break;case nd:me=om;break;case"scroll":me=$p;break;case"wheel":me=cm;break;case"copy":case"cut":case"paste":me=Kp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=Lu}var be=(t&4)!==0,ft=!be&&e==="scroll",A=be?Q!==null?Q+"Capture":null:Q;be=[];for(var P=M,R;P!==null;){R=P;var re=R.stateNode;if(R.tag===5&&re!==null&&(R=re,A!==null&&(re=Zr(P,A),re!=null&&be.push(ji(P,re,R)))),ft)break;P=P.return}0<be.length&&(Q=new me(Q,we,null,s,Y),X.push({event:Q,listeners:be}))}}if((t&7)===0){e:{if(Q=e==="mouseover"||e==="pointerover",me=e==="mouseout"||e==="pointerout",Q&&s!==ls&&(we=s.relatedTarget||s.fromElement)&&(Mn(we)||we[Mr]))break e;if((me||Q)&&(Q=Y.window===Y?Y:(Q=Y.ownerDocument)?Q.defaultView||Q.parentWindow:window,me?(we=s.relatedTarget||s.toElement,me=M,we=we?Mn(we):null,we!==null&&(ft=Rr(we),we!==ft||we.tag!==5&&we.tag!==6)&&(we=null)):(me=null,we=M),me!==we)){if(be=Ru,re="onMouseLeave",A="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(be=Lu,re="onPointerLeave",A="onPointerEnter",P="pointer"),ft=me==null?Q:xs(me),R=we==null?Q:xs(we),Q=new be(re,P+"leave",me,s,Y),Q.target=ft,Q.relatedTarget=R,re=null,Mn(Y)===M&&(be=new be(A,P+"enter",we,s,Y),be.target=R,be.relatedTarget=ft,re=be),ft=re,me&&we)t:{for(be=me,A=we,P=0,R=be;R;R=vs(R))P++;for(R=0,re=A;re;re=vs(re))R++;for(;0<P-R;)be=vs(be),P--;for(;0<R-P;)A=vs(A),R--;for(;P--;){if(be===A||A!==null&&be===A.alternate)break t;be=vs(be),A=vs(A)}be=null}else be=null;me!==null&&cd(X,Q,me,be,!1),we!==null&&ft!==null&&cd(X,ft,we,be,!0)}}e:{if(Q=M?xs(M):window,me=Q.nodeName&&Q.nodeName.toLowerCase(),me==="select"||me==="input"&&Q.type==="file")var ke=gm;else if($u(Q))if(qu)ke=xm;else{ke=vm;var Ee=ym}else(me=Q.nodeName)&&me.toLowerCase()==="input"&&(Q.type==="checkbox"||Q.type==="radio")&&(ke=wm);if(ke&&(ke=ke(e,M))){zu(X,ke,s,Y);break e}Ee&&Ee(e,Q,M),e==="focusout"&&(Ee=Q._wrapperState)&&Ee.controlled&&Q.type==="number"&&xe(Q,"number",Q.value)}switch(Ee=M?xs(M):window,e){case"focusin":($u(Ee)||Ee.contentEditable==="true")&&(gs=Ee,ol=M,ki=null);break;case"focusout":ki=ol=gs=null;break;case"mousedown":ll=!0;break;case"contextmenu":case"mouseup":case"dragend":ll=!1,Xu(X,s,Y);break;case"selectionchange":if(Sm)break;case"keydown":case"keyup":Xu(X,s,Y)}var Ne;if(nl)e:{switch(e){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else ms?Bu(e,s)&&(Oe="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Oe="onCompositionStart");Oe&&(Mu&&s.locale!=="ko"&&(ms||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&ms&&(Ne=Au()):(an=Y,Yo="value"in an?an.value:an.textContent,ms=!0)),Ee=Ca(M,Oe),0<Ee.length&&(Oe=new Du(Oe,e,null,s,Y),X.push({event:Oe,listeners:Ee}),Ne?Oe.data=Ne:(Ne=Wu(s),Ne!==null&&(Oe.data=Ne)))),(Ne=dm?hm(e,s):fm(e,s))&&(M=Ca(M,"onBeforeInput"),0<M.length&&(Y=new Du("onBeforeInput","beforeinput",null,s,Y),X.push({event:Y,listeners:M}),Y.data=Ne))}od(X,t)})}function ji(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Ca(e,t){for(var s=t+"Capture",c=[];e!==null;){var h=e,f=h.stateNode;h.tag===5&&f!==null&&(h=f,f=Zr(e,s),f!=null&&c.unshift(ji(e,f,h)),f=Zr(e,t),f!=null&&c.push(ji(e,f,h))),e=e.return}return c}function vs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function cd(e,t,s,c,h){for(var f=t._reactName,v=[];s!==null&&s!==c;){var _=s,T=_.alternate,M=_.stateNode;if(T!==null&&T===c)break;_.tag===5&&M!==null&&(_=M,h?(T=Zr(s,f),T!=null&&v.unshift(ji(s,T,_))):h||(T=Zr(s,f),T!=null&&v.push(ji(s,T,_)))),s=s.return}v.length!==0&&e.push({event:t,listeners:v})}var Nm=/\r\n?/g,Cm=/\u0000|\uFFFD/g;function ud(e){return(typeof e=="string"?e:""+e).replace(Nm,`
`).replace(Cm,"")}function Ta(e,t,s){if(t=ud(t),ud(e)!==t&&s)throw Error(n(425))}function Pa(){}var pl=null,ml=null;function gl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var yl=typeof setTimeout=="function"?setTimeout:void 0,Tm=typeof clearTimeout=="function"?clearTimeout:void 0,dd=typeof Promise=="function"?Promise:void 0,Pm=typeof queueMicrotask=="function"?queueMicrotask:typeof dd<"u"?function(e){return dd.resolve(null).then(e).catch(Om)}:yl;function Om(e){setTimeout(function(){throw e})}function vl(e,t){var s=t,c=0;do{var h=s.nextSibling;if(e.removeChild(s),h&&h.nodeType===8)if(s=h.data,s==="/$"){if(c===0){e.removeChild(h),mi(t);return}c--}else s!=="$"&&s!=="$?"&&s!=="$!"||c++;s=h}while(s);mi(t)}function ln(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var ws=Math.random().toString(36).slice(2),Er="__reactFiber$"+ws,Ei="__reactProps$"+ws,Mr="__reactContainer$"+ws,wl="__reactEvents$"+ws,Am="__reactListeners$"+ws,Im="__reactHandles$"+ws;function Mn(e){var t=e[Er];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Mr]||s[Er]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=hd(e);e!==null;){if(s=e[Er])return s;e=hd(e)}return t}e=s,s=e.parentNode}return null}function Ni(e){return e=e[Er]||e[Mr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(n(33))}function Oa(e){return e[Ei]||null}var xl=[],bs=-1;function cn(e){return{current:e}}function it(e){0>bs||(e.current=xl[bs],xl[bs]=null,bs--)}function et(e,t){bs++,xl[bs]=e.current,e.current=t}var un={},Dt=cn(un),Ht=cn(!1),Un=un;function ks(e,t){var s=e.type.contextTypes;if(!s)return un;var c=e.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===t)return c.__reactInternalMemoizedMaskedChildContext;var h={},f;for(f in s)h[f]=t[f];return c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=h),h}function Vt(e){return e=e.childContextTypes,e!=null}function Aa(){it(Ht),it(Dt)}function fd(e,t,s){if(Dt.current!==un)throw Error(n(168));et(Dt,t),et(Ht,s)}function pd(e,t,s){var c=e.stateNode;if(t=t.childContextTypes,typeof c.getChildContext!="function")return s;c=c.getChildContext();for(var h in c)if(!(h in t))throw Error(n(108,se(e)||"Unknown",h));return E({},s,c)}function Ia(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||un,Un=Dt.current,et(Dt,e),et(Ht,Ht.current),!0}function md(e,t,s){var c=e.stateNode;if(!c)throw Error(n(169));s?(e=pd(e,t,Un),c.__reactInternalMemoizedMergedChildContext=e,it(Ht),it(Dt),et(Dt,e)):it(Ht),et(Ht,s)}var Ur=null,Ra=!1,bl=!1;function gd(e){Ur===null?Ur=[e]:Ur.push(e)}function Rm(e){Ra=!0,gd(e)}function dn(){if(!bl&&Ur!==null){bl=!0;var e=0,t=Qe;try{var s=Ur;for(Qe=1;e<s.length;e++){var c=s[e];do c=c(!0);while(c!==null)}Ur=null,Ra=!1}catch(h){throw Ur!==null&&(Ur=Ur.slice(e+1)),We(Je,dn),h}finally{Qe=t,bl=!1}}return null}var Ss=[],_s=0,Da=null,La=0,ir=[],ar=0,Fn=null,Fr=1,Br="";function Bn(e,t){Ss[_s++]=La,Ss[_s++]=Da,Da=e,La=t}function yd(e,t,s){ir[ar++]=Fr,ir[ar++]=Br,ir[ar++]=Fn,Fn=e;var c=Fr;e=Br;var h=32-pr(c)-1;c&=~(1<<h),s+=1;var f=32-pr(t)+h;if(30<f){var v=h-h%5;f=(c&(1<<v)-1).toString(32),c>>=v,h-=v,Fr=1<<32-pr(t)+h|s<<h|c,Br=f+e}else Fr=1<<f|s<<h|c,Br=e}function kl(e){e.return!==null&&(Bn(e,1),yd(e,1,0))}function Sl(e){for(;e===Da;)Da=Ss[--_s],Ss[_s]=null,La=Ss[--_s],Ss[_s]=null;for(;e===Fn;)Fn=ir[--ar],ir[ar]=null,Br=ir[--ar],ir[ar]=null,Fr=ir[--ar],ir[ar]=null}var Zt=null,er=null,ot=!1,gr=null;function vd(e,t){var s=ur(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function wd(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Zt=e,er=ln(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Zt=e,er=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Fn!==null?{id:Fr,overflow:Br}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=ur(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,Zt=e,er=null,!0):!1;default:return!1}}function _l(e){return(e.mode&1)!==0&&(e.flags&128)===0}function jl(e){if(ot){var t=er;if(t){var s=t;if(!wd(e,t)){if(_l(e))throw Error(n(418));t=ln(s.nextSibling);var c=Zt;t&&wd(e,t)?vd(c,s):(e.flags=e.flags&-4097|2,ot=!1,Zt=e)}}else{if(_l(e))throw Error(n(418));e.flags=e.flags&-4097|2,ot=!1,Zt=e}}}function xd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Zt=e}function Ma(e){if(e!==Zt)return!1;if(!ot)return xd(e),ot=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!gl(e.type,e.memoizedProps)),t&&(t=er)){if(_l(e))throw bd(),Error(n(418));for(;t;)vd(e,t),t=ln(t.nextSibling)}if(xd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){er=ln(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}er=null}}else er=Zt?ln(e.stateNode.nextSibling):null;return!0}function bd(){for(var e=er;e;)e=ln(e.nextSibling)}function js(){er=Zt=null,ot=!1}function El(e){gr===null?gr=[e]:gr.push(e)}var Dm=F.ReactCurrentBatchConfig;function Ci(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(n(309));var c=s.stateNode}if(!c)throw Error(n(147,e));var h=c,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(v){var _=h.refs;v===null?delete _[f]:_[f]=v},t._stringRef=f,t)}if(typeof e!="string")throw Error(n(284));if(!s._owner)throw Error(n(290,e))}return e}function Ua(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function kd(e){var t=e._init;return t(e._payload)}function Sd(e){function t(A,P){if(e){var R=A.deletions;R===null?(A.deletions=[P],A.flags|=16):R.push(P)}}function s(A,P){if(!e)return null;for(;P!==null;)t(A,P),P=P.sibling;return null}function c(A,P){for(A=new Map;P!==null;)P.key!==null?A.set(P.key,P):A.set(P.index,P),P=P.sibling;return A}function h(A,P){return A=wn(A,P),A.index=0,A.sibling=null,A}function f(A,P,R){return A.index=R,e?(R=A.alternate,R!==null?(R=R.index,R<P?(A.flags|=2,P):R):(A.flags|=2,P)):(A.flags|=1048576,P)}function v(A){return e&&A.alternate===null&&(A.flags|=2),A}function _(A,P,R,re){return P===null||P.tag!==6?(P=yc(R,A.mode,re),P.return=A,P):(P=h(P,R),P.return=A,P)}function T(A,P,R,re){var ke=R.type;return ke===W?Y(A,P,R.props.children,re,R.key):P!==null&&(P.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===he&&kd(ke)===P.type)?(re=h(P,R.props),re.ref=Ci(A,P,R),re.return=A,re):(re=lo(R.type,R.key,R.props,null,A.mode,re),re.ref=Ci(A,P,R),re.return=A,re)}function M(A,P,R,re){return P===null||P.tag!==4||P.stateNode.containerInfo!==R.containerInfo||P.stateNode.implementation!==R.implementation?(P=vc(R,A.mode,re),P.return=A,P):(P=h(P,R.children||[]),P.return=A,P)}function Y(A,P,R,re,ke){return P===null||P.tag!==7?(P=Jn(R,A.mode,re,ke),P.return=A,P):(P=h(P,R),P.return=A,P)}function X(A,P,R){if(typeof P=="string"&&P!==""||typeof P=="number")return P=yc(""+P,A.mode,R),P.return=A,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case ee:return R=lo(P.type,P.key,P.props,null,A.mode,R),R.ref=Ci(A,null,P),R.return=A,R;case V:return P=vc(P,A.mode,R),P.return=A,P;case he:var re=P._init;return X(A,re(P._payload),R)}if(Se(P)||ae(P))return P=Jn(P,A.mode,R,null),P.return=A,P;Ua(A,P)}return null}function Q(A,P,R,re){var ke=P!==null?P.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return ke!==null?null:_(A,P,""+R,re);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ee:return R.key===ke?T(A,P,R,re):null;case V:return R.key===ke?M(A,P,R,re):null;case he:return ke=R._init,Q(A,P,ke(R._payload),re)}if(Se(R)||ae(R))return ke!==null?null:Y(A,P,R,re,null);Ua(A,R)}return null}function me(A,P,R,re,ke){if(typeof re=="string"&&re!==""||typeof re=="number")return A=A.get(R)||null,_(P,A,""+re,ke);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case ee:return A=A.get(re.key===null?R:re.key)||null,T(P,A,re,ke);case V:return A=A.get(re.key===null?R:re.key)||null,M(P,A,re,ke);case he:var Ee=re._init;return me(A,P,R,Ee(re._payload),ke)}if(Se(re)||ae(re))return A=A.get(R)||null,Y(P,A,re,ke,null);Ua(P,re)}return null}function we(A,P,R,re){for(var ke=null,Ee=null,Ne=P,Oe=P=0,Nt=null;Ne!==null&&Oe<R.length;Oe++){Ne.index>Oe?(Nt=Ne,Ne=null):Nt=Ne.sibling;var Ve=Q(A,Ne,R[Oe],re);if(Ve===null){Ne===null&&(Ne=Nt);break}e&&Ne&&Ve.alternate===null&&t(A,Ne),P=f(Ve,P,Oe),Ee===null?ke=Ve:Ee.sibling=Ve,Ee=Ve,Ne=Nt}if(Oe===R.length)return s(A,Ne),ot&&Bn(A,Oe),ke;if(Ne===null){for(;Oe<R.length;Oe++)Ne=X(A,R[Oe],re),Ne!==null&&(P=f(Ne,P,Oe),Ee===null?ke=Ne:Ee.sibling=Ne,Ee=Ne);return ot&&Bn(A,Oe),ke}for(Ne=c(A,Ne);Oe<R.length;Oe++)Nt=me(Ne,A,Oe,R[Oe],re),Nt!==null&&(e&&Nt.alternate!==null&&Ne.delete(Nt.key===null?Oe:Nt.key),P=f(Nt,P,Oe),Ee===null?ke=Nt:Ee.sibling=Nt,Ee=Nt);return e&&Ne.forEach(function(xn){return t(A,xn)}),ot&&Bn(A,Oe),ke}function be(A,P,R,re){var ke=ae(R);if(typeof ke!="function")throw Error(n(150));if(R=ke.call(R),R==null)throw Error(n(151));for(var Ee=ke=null,Ne=P,Oe=P=0,Nt=null,Ve=R.next();Ne!==null&&!Ve.done;Oe++,Ve=R.next()){Ne.index>Oe?(Nt=Ne,Ne=null):Nt=Ne.sibling;var xn=Q(A,Ne,Ve.value,re);if(xn===null){Ne===null&&(Ne=Nt);break}e&&Ne&&xn.alternate===null&&t(A,Ne),P=f(xn,P,Oe),Ee===null?ke=xn:Ee.sibling=xn,Ee=xn,Ne=Nt}if(Ve.done)return s(A,Ne),ot&&Bn(A,Oe),ke;if(Ne===null){for(;!Ve.done;Oe++,Ve=R.next())Ve=X(A,Ve.value,re),Ve!==null&&(P=f(Ve,P,Oe),Ee===null?ke=Ve:Ee.sibling=Ve,Ee=Ve);return ot&&Bn(A,Oe),ke}for(Ne=c(A,Ne);!Ve.done;Oe++,Ve=R.next())Ve=me(Ne,A,Oe,Ve.value,re),Ve!==null&&(e&&Ve.alternate!==null&&Ne.delete(Ve.key===null?Oe:Ve.key),P=f(Ve,P,Oe),Ee===null?ke=Ve:Ee.sibling=Ve,Ee=Ve);return e&&Ne.forEach(function(pg){return t(A,pg)}),ot&&Bn(A,Oe),ke}function ft(A,P,R,re){if(typeof R=="object"&&R!==null&&R.type===W&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case ee:e:{for(var ke=R.key,Ee=P;Ee!==null;){if(Ee.key===ke){if(ke=R.type,ke===W){if(Ee.tag===7){s(A,Ee.sibling),P=h(Ee,R.props.children),P.return=A,A=P;break e}}else if(Ee.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===he&&kd(ke)===Ee.type){s(A,Ee.sibling),P=h(Ee,R.props),P.ref=Ci(A,Ee,R),P.return=A,A=P;break e}s(A,Ee);break}else t(A,Ee);Ee=Ee.sibling}R.type===W?(P=Jn(R.props.children,A.mode,re,R.key),P.return=A,A=P):(re=lo(R.type,R.key,R.props,null,A.mode,re),re.ref=Ci(A,P,R),re.return=A,A=re)}return v(A);case V:e:{for(Ee=R.key;P!==null;){if(P.key===Ee)if(P.tag===4&&P.stateNode.containerInfo===R.containerInfo&&P.stateNode.implementation===R.implementation){s(A,P.sibling),P=h(P,R.children||[]),P.return=A,A=P;break e}else{s(A,P);break}else t(A,P);P=P.sibling}P=vc(R,A.mode,re),P.return=A,A=P}return v(A);case he:return Ee=R._init,ft(A,P,Ee(R._payload),re)}if(Se(R))return we(A,P,R,re);if(ae(R))return be(A,P,R,re);Ua(A,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,P!==null&&P.tag===6?(s(A,P.sibling),P=h(P,R),P.return=A,A=P):(s(A,P),P=yc(R,A.mode,re),P.return=A,A=P),v(A)):s(A,P)}return ft}var Es=Sd(!0),_d=Sd(!1),Fa=cn(null),Ba=null,Ns=null,Nl=null;function Cl(){Nl=Ns=Ba=null}function Tl(e){var t=Fa.current;it(Fa),e._currentValue=t}function Pl(e,t,s){for(;e!==null;){var c=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,c!==null&&(c.childLanes|=t)):c!==null&&(c.childLanes&t)!==t&&(c.childLanes|=t),e===s)break;e=e.return}}function Cs(e,t){Ba=e,Nl=Ns=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Gt=!0),e.firstContext=null)}function or(e){var t=e._currentValue;if(Nl!==e)if(e={context:e,memoizedValue:t,next:null},Ns===null){if(Ba===null)throw Error(n(308));Ns=e,Ba.dependencies={lanes:0,firstContext:e}}else Ns=Ns.next=e;return t}var Wn=null;function Ol(e){Wn===null?Wn=[e]:Wn.push(e)}function jd(e,t,s,c){var h=t.interleaved;return h===null?(s.next=s,Ol(t)):(s.next=h.next,h.next=s),t.interleaved=s,Wr(e,c)}function Wr(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var hn=!1;function Al(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ed(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $r(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fn(e,t,s){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(qe&2)!==0){var h=c.pending;return h===null?t.next=t:(t.next=h.next,h.next=t),c.pending=t,Wr(e,s)}return h=c.interleaved,h===null?(t.next=t,Ol(c)):(t.next=h.next,h.next=t),c.interleaved=t,Wr(e,s)}function Wa(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var c=t.lanes;c&=e.pendingLanes,s|=c,t.lanes=s,Vo(e,s)}}function Nd(e,t){var s=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,s===c)){var h=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var v={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};f===null?h=f=v:f=f.next=v,s=s.next}while(s!==null);f===null?h=f=t:f=f.next=t}else h=f=t;s={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:c.shared,effects:c.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function $a(e,t,s,c){var h=e.updateQueue;hn=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,_=h.shared.pending;if(_!==null){h.shared.pending=null;var T=_,M=T.next;T.next=null,v===null?f=M:v.next=M,v=T;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,_=Y.lastBaseUpdate,_!==v&&(_===null?Y.firstBaseUpdate=M:_.next=M,Y.lastBaseUpdate=T))}if(f!==null){var X=h.baseState;v=0,Y=M=T=null,_=f;do{var Q=_.lane,me=_.eventTime;if((c&Q)===Q){Y!==null&&(Y=Y.next={eventTime:me,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var we=e,be=_;switch(Q=t,me=s,be.tag){case 1:if(we=be.payload,typeof we=="function"){X=we.call(me,X,Q);break e}X=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=be.payload,Q=typeof we=="function"?we.call(me,X,Q):we,Q==null)break e;X=E({},X,Q);break e;case 2:hn=!0}}_.callback!==null&&_.lane!==0&&(e.flags|=64,Q=h.effects,Q===null?h.effects=[_]:Q.push(_))}else me={eventTime:me,lane:Q,tag:_.tag,payload:_.payload,callback:_.callback,next:null},Y===null?(M=Y=me,T=X):Y=Y.next=me,v|=Q;if(_=_.next,_===null){if(_=h.shared.pending,_===null)break;Q=_,_=Q.next,Q.next=null,h.lastBaseUpdate=Q,h.shared.pending=null}}while(!0);if(Y===null&&(T=X),h.baseState=T,h.firstBaseUpdate=M,h.lastBaseUpdate=Y,t=h.shared.interleaved,t!==null){h=t;do v|=h.lane,h=h.next;while(h!==t)}else f===null&&(h.shared.lanes=0);qn|=v,e.lanes=v,e.memoizedState=X}}function Cd(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var c=e[t],h=c.callback;if(h!==null){if(c.callback=null,c=s,typeof h!="function")throw Error(n(191,h));h.call(c)}}}var Ti={},Nr=cn(Ti),Pi=cn(Ti),Oi=cn(Ti);function $n(e){if(e===Ti)throw Error(n(174));return e}function Il(e,t){switch(et(Oi,t),et(Pi,e),et(Nr,Ti),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:At(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=At(t,e)}it(Nr),et(Nr,t)}function Ts(){it(Nr),it(Pi),it(Oi)}function Td(e){$n(Oi.current);var t=$n(Nr.current),s=At(t,e.type);t!==s&&(et(Pi,e),et(Nr,s))}function Rl(e){Pi.current===e&&(it(Nr),it(Pi))}var lt=cn(0);function za(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Dl=[];function Ll(){for(var e=0;e<Dl.length;e++)Dl[e]._workInProgressVersionPrimary=null;Dl.length=0}var qa=F.ReactCurrentDispatcher,Ml=F.ReactCurrentBatchConfig,zn=0,ct=null,vt=null,jt=null,Ha=!1,Ai=!1,Ii=0,Lm=0;function Lt(){throw Error(n(321))}function Ul(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!mr(e[s],t[s]))return!1;return!0}function Fl(e,t,s,c,h,f){if(zn=f,ct=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qa.current=e===null||e.memoizedState===null?Bm:Wm,e=s(c,h),Ai){f=0;do{if(Ai=!1,Ii=0,25<=f)throw Error(n(301));f+=1,jt=vt=null,t.updateQueue=null,qa.current=$m,e=s(c,h)}while(Ai)}if(qa.current=Ja,t=vt!==null&&vt.next!==null,zn=0,jt=vt=ct=null,Ha=!1,t)throw Error(n(300));return e}function Bl(){var e=Ii!==0;return Ii=0,e}function Cr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?ct.memoizedState=jt=e:jt=jt.next=e,jt}function lr(){if(vt===null){var e=ct.alternate;e=e!==null?e.memoizedState:null}else e=vt.next;var t=jt===null?ct.memoizedState:jt.next;if(t!==null)jt=t,vt=e;else{if(e===null)throw Error(n(310));vt=e,e={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},jt===null?ct.memoizedState=jt=e:jt=jt.next=e}return jt}function Ri(e,t){return typeof t=="function"?t(e):t}function Wl(e){var t=lr(),s=t.queue;if(s===null)throw Error(n(311));s.lastRenderedReducer=e;var c=vt,h=c.baseQueue,f=s.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}c.baseQueue=h=f,s.pending=null}if(h!==null){f=h.next,c=c.baseState;var _=v=null,T=null,M=f;do{var Y=M.lane;if((zn&Y)===Y)T!==null&&(T=T.next={lane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),c=M.hasEagerState?M.eagerState:e(c,M.action);else{var X={lane:Y,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null};T===null?(_=T=X,v=c):T=T.next=X,ct.lanes|=Y,qn|=Y}M=M.next}while(M!==null&&M!==f);T===null?v=c:T.next=_,mr(c,t.memoizedState)||(Gt=!0),t.memoizedState=c,t.baseState=v,t.baseQueue=T,s.lastRenderedState=c}if(e=s.interleaved,e!==null){h=e;do f=h.lane,ct.lanes|=f,qn|=f,h=h.next;while(h!==e)}else h===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function $l(e){var t=lr(),s=t.queue;if(s===null)throw Error(n(311));s.lastRenderedReducer=e;var c=s.dispatch,h=s.pending,f=t.memoizedState;if(h!==null){s.pending=null;var v=h=h.next;do f=e(f,v.action),v=v.next;while(v!==h);mr(f,t.memoizedState)||(Gt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),s.lastRenderedState=f}return[f,c]}function Pd(){}function Od(e,t){var s=ct,c=lr(),h=t(),f=!mr(c.memoizedState,h);if(f&&(c.memoizedState=h,Gt=!0),c=c.queue,zl(Rd.bind(null,s,c,e),[e]),c.getSnapshot!==t||f||jt!==null&&jt.memoizedState.tag&1){if(s.flags|=2048,Di(9,Id.bind(null,s,c,h,t),void 0,null),Et===null)throw Error(n(349));(zn&30)!==0||Ad(s,t,h)}return h}function Ad(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=ct.updateQueue,t===null?(t={lastEffect:null,stores:null},ct.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Id(e,t,s,c){t.value=s,t.getSnapshot=c,Dd(t)&&Ld(e)}function Rd(e,t,s){return s(function(){Dd(t)&&Ld(e)})}function Dd(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!mr(e,s)}catch{return!0}}function Ld(e){var t=Wr(e,1);t!==null&&xr(t,e,1,-1)}function Md(e){var t=Cr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:e},t.queue=e,e=e.dispatch=Fm.bind(null,ct,e),[t.memoizedState,e]}function Di(e,t,s,c){return e={tag:e,create:t,destroy:s,deps:c,next:null},t=ct.updateQueue,t===null?(t={lastEffect:null,stores:null},ct.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(c=s.next,s.next=e,e.next=c,t.lastEffect=e)),e}function Ud(){return lr().memoizedState}function Va(e,t,s,c){var h=Cr();ct.flags|=e,h.memoizedState=Di(1|t,s,void 0,c===void 0?null:c)}function Ga(e,t,s,c){var h=lr();c=c===void 0?null:c;var f=void 0;if(vt!==null){var v=vt.memoizedState;if(f=v.destroy,c!==null&&Ul(c,v.deps)){h.memoizedState=Di(t,s,f,c);return}}ct.flags|=e,h.memoizedState=Di(1|t,s,f,c)}function Fd(e,t){return Va(8390656,8,e,t)}function zl(e,t){return Ga(2048,8,e,t)}function Bd(e,t){return Ga(4,2,e,t)}function Wd(e,t){return Ga(4,4,e,t)}function $d(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zd(e,t,s){return s=s!=null?s.concat([e]):null,Ga(4,4,$d.bind(null,t,e),s)}function ql(){}function qd(e,t){var s=lr();t=t===void 0?null:t;var c=s.memoizedState;return c!==null&&t!==null&&Ul(t,c[1])?c[0]:(s.memoizedState=[e,t],e)}function Hd(e,t){var s=lr();t=t===void 0?null:t;var c=s.memoizedState;return c!==null&&t!==null&&Ul(t,c[1])?c[0]:(e=e(),s.memoizedState=[e,t],e)}function Vd(e,t,s){return(zn&21)===0?(e.baseState&&(e.baseState=!1,Gt=!0),e.memoizedState=s):(mr(s,t)||(s=ku(),ct.lanes|=s,qn|=s,e.baseState=!0),t)}function Mm(e,t){var s=Qe;Qe=s!==0&&4>s?s:4,e(!0);var c=Ml.transition;Ml.transition={};try{e(!1),t()}finally{Qe=s,Ml.transition=c}}function Gd(){return lr().memoizedState}function Um(e,t,s){var c=yn(e);if(s={lane:c,action:s,hasEagerState:!1,eagerState:null,next:null},Jd(e))Kd(t,s);else if(s=jd(e,t,s,c),s!==null){var h=Wt();xr(s,e,c,h),Qd(s,t,c)}}function Fm(e,t,s){var c=yn(e),h={lane:c,action:s,hasEagerState:!1,eagerState:null,next:null};if(Jd(e))Kd(t,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var v=t.lastRenderedState,_=f(v,s);if(h.hasEagerState=!0,h.eagerState=_,mr(_,v)){var T=t.interleaved;T===null?(h.next=h,Ol(t)):(h.next=T.next,T.next=h),t.interleaved=h;return}}catch{}finally{}s=jd(e,t,h,c),s!==null&&(h=Wt(),xr(s,e,c,h),Qd(s,t,c))}}function Jd(e){var t=e.alternate;return e===ct||t!==null&&t===ct}function Kd(e,t){Ai=Ha=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Qd(e,t,s){if((s&4194240)!==0){var c=t.lanes;c&=e.pendingLanes,s|=c,t.lanes=s,Vo(e,s)}}var Ja={readContext:or,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},Bm={readContext:or,useCallback:function(e,t){return Cr().memoizedState=[e,t===void 0?null:t],e},useContext:or,useEffect:Fd,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Va(4194308,4,$d.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Va(4194308,4,e,t)},useInsertionEffect:function(e,t){return Va(4,2,e,t)},useMemo:function(e,t){var s=Cr();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var c=Cr();return t=s!==void 0?s(t):t,c.memoizedState=c.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},c.queue=e,e=e.dispatch=Um.bind(null,ct,e),[c.memoizedState,e]},useRef:function(e){var t=Cr();return e={current:e},t.memoizedState=e},useState:Md,useDebugValue:ql,useDeferredValue:function(e){return Cr().memoizedState=e},useTransition:function(){var e=Md(!1),t=e[0];return e=Mm.bind(null,e[1]),Cr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var c=ct,h=Cr();if(ot){if(s===void 0)throw Error(n(407));s=s()}else{if(s=t(),Et===null)throw Error(n(349));(zn&30)!==0||Ad(c,t,s)}h.memoizedState=s;var f={value:s,getSnapshot:t};return h.queue=f,Fd(Rd.bind(null,c,f,e),[e]),c.flags|=2048,Di(9,Id.bind(null,c,f,s,t),void 0,null),s},useId:function(){var e=Cr(),t=Et.identifierPrefix;if(ot){var s=Br,c=Fr;s=(c&~(1<<32-pr(c)-1)).toString(32)+s,t=":"+t+"R"+s,s=Ii++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=Lm++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Wm={readContext:or,useCallback:qd,useContext:or,useEffect:zl,useImperativeHandle:zd,useInsertionEffect:Bd,useLayoutEffect:Wd,useMemo:Hd,useReducer:Wl,useRef:Ud,useState:function(){return Wl(Ri)},useDebugValue:ql,useDeferredValue:function(e){var t=lr();return Vd(t,vt.memoizedState,e)},useTransition:function(){var e=Wl(Ri)[0],t=lr().memoizedState;return[e,t]},useMutableSource:Pd,useSyncExternalStore:Od,useId:Gd,unstable_isNewReconciler:!1},$m={readContext:or,useCallback:qd,useContext:or,useEffect:zl,useImperativeHandle:zd,useInsertionEffect:Bd,useLayoutEffect:Wd,useMemo:Hd,useReducer:$l,useRef:Ud,useState:function(){return $l(Ri)},useDebugValue:ql,useDeferredValue:function(e){var t=lr();return vt===null?t.memoizedState=e:Vd(t,vt.memoizedState,e)},useTransition:function(){var e=$l(Ri)[0],t=lr().memoizedState;return[e,t]},useMutableSource:Pd,useSyncExternalStore:Od,useId:Gd,unstable_isNewReconciler:!1};function yr(e,t){if(e&&e.defaultProps){t=E({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Hl(e,t,s,c){t=e.memoizedState,s=s(c,t),s=s==null?t:E({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Ka={isMounted:function(e){return(e=e._reactInternals)?Rr(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var c=Wt(),h=yn(e),f=$r(c,h);f.payload=t,s!=null&&(f.callback=s),t=fn(e,f,h),t!==null&&(xr(t,e,h,c),Wa(t,e,h))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var c=Wt(),h=yn(e),f=$r(c,h);f.tag=1,f.payload=t,s!=null&&(f.callback=s),t=fn(e,f,h),t!==null&&(xr(t,e,h,c),Wa(t,e,h))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Wt(),c=yn(e),h=$r(s,c);h.tag=2,t!=null&&(h.callback=t),t=fn(e,h,c),t!==null&&(xr(t,e,c,s),Wa(t,e,c))}};function Yd(e,t,s,c,h,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,f,v):t.prototype&&t.prototype.isPureReactComponent?!bi(s,c)||!bi(h,f):!0}function Xd(e,t,s){var c=!1,h=un,f=t.contextType;return typeof f=="object"&&f!==null?f=or(f):(h=Vt(t)?Un:Dt.current,c=t.contextTypes,f=(c=c!=null)?ks(e,h):un),t=new t(s,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ka,e.stateNode=t,t._reactInternals=e,c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=f),t}function Zd(e,t,s,c){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,c),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,c),t.state!==e&&Ka.enqueueReplaceState(t,t.state,null)}function Vl(e,t,s,c){var h=e.stateNode;h.props=s,h.state=e.memoizedState,h.refs={},Al(e);var f=t.contextType;typeof f=="object"&&f!==null?h.context=or(f):(f=Vt(t)?Un:Dt.current,h.context=ks(e,f)),h.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(Hl(e,t,f,s),h.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(t=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),t!==h.state&&Ka.enqueueReplaceState(h,h.state,null),$a(e,s,h,c),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function Ps(e,t){try{var s="",c=t;do s+=ie(c),c=c.return;while(c);var h=s}catch(f){h=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:h,digest:null}}function Gl(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Jl(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var zm=typeof WeakMap=="function"?WeakMap:Map;function eh(e,t,s){s=$r(-1,s),s.tag=3,s.payload={element:null};var c=t.value;return s.callback=function(){ro||(ro=!0,cc=c),Jl(e,t)},s}function th(e,t,s){s=$r(-1,s),s.tag=3;var c=e.type.getDerivedStateFromError;if(typeof c=="function"){var h=t.value;s.payload=function(){return c(h)},s.callback=function(){Jl(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(s.callback=function(){Jl(e,t),typeof c!="function"&&(mn===null?mn=new Set([this]):mn.add(this));var v=t.stack;this.componentDidCatch(t.value,{componentStack:v!==null?v:""})}),s}function rh(e,t,s){var c=e.pingCache;if(c===null){c=e.pingCache=new zm;var h=new Set;c.set(t,h)}else h=c.get(t),h===void 0&&(h=new Set,c.set(t,h));h.has(s)||(h.add(s),e=ng.bind(null,e,t,s),t.then(e,e))}function nh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function sh(e,t,s,c,h){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=$r(-1,1),t.tag=2,fn(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=h,e)}var qm=F.ReactCurrentOwner,Gt=!1;function Bt(e,t,s,c){t.child=e===null?_d(t,null,s,c):Es(t,e.child,s,c)}function ih(e,t,s,c,h){s=s.render;var f=t.ref;return Cs(t,h),c=Fl(e,t,s,c,f,h),s=Bl(),e!==null&&!Gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,zr(e,t,h)):(ot&&s&&kl(t),t.flags|=1,Bt(e,t,c,h),t.child)}function ah(e,t,s,c,h){if(e===null){var f=s.type;return typeof f=="function"&&!gc(f)&&f.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=f,oh(e,t,f,c,h)):(e=lo(s.type,null,c,t,t.mode,h),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&h)===0){var v=f.memoizedProps;if(s=s.compare,s=s!==null?s:bi,s(v,c)&&e.ref===t.ref)return zr(e,t,h)}return t.flags|=1,e=wn(f,c),e.ref=t.ref,e.return=t,t.child=e}function oh(e,t,s,c,h){if(e!==null){var f=e.memoizedProps;if(bi(f,c)&&e.ref===t.ref)if(Gt=!1,t.pendingProps=c=f,(e.lanes&h)!==0)(e.flags&131072)!==0&&(Gt=!0);else return t.lanes=e.lanes,zr(e,t,h)}return Kl(e,t,s,c,h)}function lh(e,t,s){var c=t.pendingProps,h=c.children,f=e!==null?e.memoizedState:null;if(c.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(As,tr),tr|=s;else{if((s&1073741824)===0)return e=f!==null?f.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,et(As,tr),tr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=f!==null?f.baseLanes:s,et(As,tr),tr|=c}else f!==null?(c=f.baseLanes|s,t.memoizedState=null):c=s,et(As,tr),tr|=c;return Bt(e,t,h,s),t.child}function ch(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Kl(e,t,s,c,h){var f=Vt(s)?Un:Dt.current;return f=ks(t,f),Cs(t,h),s=Fl(e,t,s,c,f,h),c=Bl(),e!==null&&!Gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,zr(e,t,h)):(ot&&c&&kl(t),t.flags|=1,Bt(e,t,s,h),t.child)}function uh(e,t,s,c,h){if(Vt(s)){var f=!0;Ia(t)}else f=!1;if(Cs(t,h),t.stateNode===null)Ya(e,t),Xd(t,s,c),Vl(t,s,c,h),c=!0;else if(e===null){var v=t.stateNode,_=t.memoizedProps;v.props=_;var T=v.context,M=s.contextType;typeof M=="object"&&M!==null?M=or(M):(M=Vt(s)?Un:Dt.current,M=ks(t,M));var Y=s.getDerivedStateFromProps,X=typeof Y=="function"||typeof v.getSnapshotBeforeUpdate=="function";X||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(_!==c||T!==M)&&Zd(t,v,c,M),hn=!1;var Q=t.memoizedState;v.state=Q,$a(t,c,v,h),T=t.memoizedState,_!==c||Q!==T||Ht.current||hn?(typeof Y=="function"&&(Hl(t,s,Y,c),T=t.memoizedState),(_=hn||Yd(t,s,_,c,Q,T,M))?(X||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(t.flags|=4194308)):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=c,t.memoizedState=T),v.props=c,v.state=T,v.context=M,c=_):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),c=!1)}else{v=t.stateNode,Ed(e,t),_=t.memoizedProps,M=t.type===t.elementType?_:yr(t.type,_),v.props=M,X=t.pendingProps,Q=v.context,T=s.contextType,typeof T=="object"&&T!==null?T=or(T):(T=Vt(s)?Un:Dt.current,T=ks(t,T));var me=s.getDerivedStateFromProps;(Y=typeof me=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(_!==X||Q!==T)&&Zd(t,v,c,T),hn=!1,Q=t.memoizedState,v.state=Q,$a(t,c,v,h);var we=t.memoizedState;_!==X||Q!==we||Ht.current||hn?(typeof me=="function"&&(Hl(t,s,me,c),we=t.memoizedState),(M=hn||Yd(t,s,M,c,Q,we,T)||!1)?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,we,T),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,we,T)),typeof v.componentDidUpdate=="function"&&(t.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof v.componentDidUpdate!="function"||_===e.memoizedProps&&Q===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&Q===e.memoizedState||(t.flags|=1024),t.memoizedProps=c,t.memoizedState=we),v.props=c,v.state=we,v.context=T,c=M):(typeof v.componentDidUpdate!="function"||_===e.memoizedProps&&Q===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&Q===e.memoizedState||(t.flags|=1024),c=!1)}return Ql(e,t,s,c,f,h)}function Ql(e,t,s,c,h,f){ch(e,t);var v=(t.flags&128)!==0;if(!c&&!v)return h&&md(t,s,!1),zr(e,t,f);c=t.stateNode,qm.current=t;var _=v&&typeof s.getDerivedStateFromError!="function"?null:c.render();return t.flags|=1,e!==null&&v?(t.child=Es(t,e.child,null,f),t.child=Es(t,null,_,f)):Bt(e,t,_,f),t.memoizedState=c.state,h&&md(t,s,!0),t.child}function dh(e){var t=e.stateNode;t.pendingContext?fd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fd(e,t.context,!1),Il(e,t.containerInfo)}function hh(e,t,s,c,h){return js(),El(h),t.flags|=256,Bt(e,t,s,c),t.child}var Yl={dehydrated:null,treeContext:null,retryLane:0};function Xl(e){return{baseLanes:e,cachePool:null,transitions:null}}function fh(e,t,s){var c=t.pendingProps,h=lt.current,f=!1,v=(t.flags&128)!==0,_;if((_=v)||(_=e!==null&&e.memoizedState===null?!1:(h&2)!==0),_?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),et(lt,h&1),e===null)return jl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(v=c.children,e=c.fallback,f?(c=t.mode,f=t.child,v={mode:"hidden",children:v},(c&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=v):f=co(v,c,0,null),e=Jn(e,c,s,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=Xl(s),t.memoizedState=Yl,e):Zl(t,v));if(h=e.memoizedState,h!==null&&(_=h.dehydrated,_!==null))return Hm(e,t,v,c,_,h,s);if(f){f=c.fallback,v=t.mode,h=e.child,_=h.sibling;var T={mode:"hidden",children:c.children};return(v&1)===0&&t.child!==h?(c=t.child,c.childLanes=0,c.pendingProps=T,t.deletions=null):(c=wn(h,T),c.subtreeFlags=h.subtreeFlags&14680064),_!==null?f=wn(_,f):(f=Jn(f,v,s,null),f.flags|=2),f.return=t,c.return=t,c.sibling=f,t.child=c,c=f,f=t.child,v=e.child.memoizedState,v=v===null?Xl(s):{baseLanes:v.baseLanes|s,cachePool:null,transitions:v.transitions},f.memoizedState=v,f.childLanes=e.childLanes&~s,t.memoizedState=Yl,c}return f=e.child,e=f.sibling,c=wn(f,{mode:"visible",children:c.children}),(t.mode&1)===0&&(c.lanes=s),c.return=t,c.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=c,t.memoizedState=null,c}function Zl(e,t){return t=co({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Qa(e,t,s,c){return c!==null&&El(c),Es(t,e.child,null,s),e=Zl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Hm(e,t,s,c,h,f,v){if(s)return t.flags&256?(t.flags&=-257,c=Gl(Error(n(422))),Qa(e,t,v,c)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=c.fallback,h=t.mode,c=co({mode:"visible",children:c.children},h,0,null),f=Jn(f,h,v,null),f.flags|=2,c.return=t,f.return=t,c.sibling=f,t.child=c,(t.mode&1)!==0&&Es(t,e.child,null,v),t.child.memoizedState=Xl(v),t.memoizedState=Yl,f);if((t.mode&1)===0)return Qa(e,t,v,null);if(h.data==="$!"){if(c=h.nextSibling&&h.nextSibling.dataset,c)var _=c.dgst;return c=_,f=Error(n(419)),c=Gl(f,c,void 0),Qa(e,t,v,c)}if(_=(v&e.childLanes)!==0,Gt||_){if(c=Et,c!==null){switch(v&-v){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(c.suspendedLanes|v))!==0?0:h,h!==0&&h!==f.retryLane&&(f.retryLane=h,Wr(e,h),xr(c,e,h,-1))}return mc(),c=Gl(Error(n(421))),Qa(e,t,v,c)}return h.data==="$?"?(t.flags|=128,t.child=e.child,t=sg.bind(null,e),h._reactRetry=t,null):(e=f.treeContext,er=ln(h.nextSibling),Zt=t,ot=!0,gr=null,e!==null&&(ir[ar++]=Fr,ir[ar++]=Br,ir[ar++]=Fn,Fr=e.id,Br=e.overflow,Fn=t),t=Zl(t,c.children),t.flags|=4096,t)}function ph(e,t,s){e.lanes|=t;var c=e.alternate;c!==null&&(c.lanes|=t),Pl(e.return,t,s)}function ec(e,t,s,c,h){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:c,tail:s,tailMode:h}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=s,f.tailMode=h)}function mh(e,t,s){var c=t.pendingProps,h=c.revealOrder,f=c.tail;if(Bt(e,t,c.children,s),c=lt.current,(c&2)!==0)c=c&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ph(e,s,t);else if(e.tag===19)ph(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=1}if(et(lt,c),(t.mode&1)===0)t.memoizedState=null;else switch(h){case"forwards":for(s=t.child,h=null;s!==null;)e=s.alternate,e!==null&&za(e)===null&&(h=s),s=s.sibling;s=h,s===null?(h=t.child,t.child=null):(h=s.sibling,s.sibling=null),ec(t,!1,h,s,f);break;case"backwards":for(s=null,h=t.child,t.child=null;h!==null;){if(e=h.alternate,e!==null&&za(e)===null){t.child=h;break}e=h.sibling,h.sibling=s,s=h,h=e}ec(t,!0,s,null,f);break;case"together":ec(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ya(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zr(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),qn|=t.lanes,(s&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(n(153));if(t.child!==null){for(e=t.child,s=wn(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=wn(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Vm(e,t,s){switch(t.tag){case 3:dh(t),js();break;case 5:Td(t);break;case 1:Vt(t.type)&&Ia(t);break;case 4:Il(t,t.stateNode.containerInfo);break;case 10:var c=t.type._context,h=t.memoizedProps.value;et(Fa,c._currentValue),c._currentValue=h;break;case 13:if(c=t.memoizedState,c!==null)return c.dehydrated!==null?(et(lt,lt.current&1),t.flags|=128,null):(s&t.child.childLanes)!==0?fh(e,t,s):(et(lt,lt.current&1),e=zr(e,t,s),e!==null?e.sibling:null);et(lt,lt.current&1);break;case 19:if(c=(s&t.childLanes)!==0,(e.flags&128)!==0){if(c)return mh(e,t,s);t.flags|=128}if(h=t.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),et(lt,lt.current),c)break;return null;case 22:case 23:return t.lanes=0,lh(e,t,s)}return zr(e,t,s)}var gh,tc,yh,vh;gh=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},tc=function(){},yh=function(e,t,s,c){var h=e.memoizedProps;if(h!==c){e=t.stateNode,$n(Nr.current);var f=null;switch(s){case"input":h=Ie(e,h),c=Ie(e,c),f=[];break;case"select":h=E({},h,{value:void 0}),c=E({},c,{value:void 0}),f=[];break;case"textarea":h=Te(e,h),c=Te(e,c),f=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(e.onclick=Pa)}An(s,c);var v;s=null;for(M in h)if(!c.hasOwnProperty(M)&&h.hasOwnProperty(M)&&h[M]!=null)if(M==="style"){var _=h[M];for(v in _)_.hasOwnProperty(v)&&(s||(s={}),s[v]="")}else M!=="dangerouslySetInnerHTML"&&M!=="children"&&M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(l.hasOwnProperty(M)?f||(f=[]):(f=f||[]).push(M,null));for(M in c){var T=c[M];if(_=h?.[M],c.hasOwnProperty(M)&&T!==_&&(T!=null||_!=null))if(M==="style")if(_){for(v in _)!_.hasOwnProperty(v)||T&&T.hasOwnProperty(v)||(s||(s={}),s[v]="");for(v in T)T.hasOwnProperty(v)&&_[v]!==T[v]&&(s||(s={}),s[v]=T[v])}else s||(f||(f=[]),f.push(M,s)),s=T;else M==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,_=_?_.__html:void 0,T!=null&&_!==T&&(f=f||[]).push(M,T)):M==="children"?typeof T!="string"&&typeof T!="number"||(f=f||[]).push(M,""+T):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&(l.hasOwnProperty(M)?(T!=null&&M==="onScroll"&&st("scroll",e),f||_===T||(f=[])):(f=f||[]).push(M,T))}s&&(f=f||[]).push("style",s);var M=f;(t.updateQueue=M)&&(t.flags|=4)}},vh=function(e,t,s,c){s!==c&&(t.flags|=4)};function Li(e,t){if(!ot)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function Mt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,c=0;if(t)for(var h=e.child;h!==null;)s|=h.lanes|h.childLanes,c|=h.subtreeFlags&14680064,c|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)s|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=c,e.childLanes=s,t}function Gm(e,t,s){var c=t.pendingProps;switch(Sl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(t),null;case 1:return Vt(t.type)&&Aa(),Mt(t),null;case 3:return c=t.stateNode,Ts(),it(Ht),it(Dt),Ll(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(e===null||e.child===null)&&(Ma(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,gr!==null&&(hc(gr),gr=null))),tc(e,t),Mt(t),null;case 5:Rl(t);var h=$n(Oi.current);if(s=t.type,e!==null&&t.stateNode!=null)yh(e,t,s,c,h),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!c){if(t.stateNode===null)throw Error(n(166));return Mt(t),null}if(e=$n(Nr.current),Ma(t)){c=t.stateNode,s=t.type;var f=t.memoizedProps;switch(c[Er]=t,c[Ei]=f,e=(t.mode&1)!==0,s){case"dialog":st("cancel",c),st("close",c);break;case"iframe":case"object":case"embed":st("load",c);break;case"video":case"audio":for(h=0;h<Si.length;h++)st(Si[h],c);break;case"source":st("error",c);break;case"img":case"image":case"link":st("error",c),st("load",c);break;case"details":st("toggle",c);break;case"input":I(c,f),st("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!f.multiple},st("invalid",c);break;case"textarea":Re(c,f),st("invalid",c)}An(s,f),h=null;for(var v in f)if(f.hasOwnProperty(v)){var _=f[v];v==="children"?typeof _=="string"?c.textContent!==_&&(f.suppressHydrationWarning!==!0&&Ta(c.textContent,_,e),h=["children",_]):typeof _=="number"&&c.textContent!==""+_&&(f.suppressHydrationWarning!==!0&&Ta(c.textContent,_,e),h=["children",""+_]):l.hasOwnProperty(v)&&_!=null&&v==="onScroll"&&st("scroll",c)}switch(s){case"input":Be(c),je(c,f,!0);break;case"textarea":Be(c),at(c);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(c.onclick=Pa)}c=h,t.updateQueue=c,c!==null&&(t.flags|=4)}else{v=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ht(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=v.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof c.is=="string"?e=v.createElement(s,{is:c.is}):(e=v.createElement(s),s==="select"&&(v=e,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):e=v.createElementNS(e,s),e[Er]=t,e[Ei]=c,gh(e,t,!1,!1),t.stateNode=e;e:{switch(v=In(s,c),s){case"dialog":st("cancel",e),st("close",e),h=c;break;case"iframe":case"object":case"embed":st("load",e),h=c;break;case"video":case"audio":for(h=0;h<Si.length;h++)st(Si[h],e);h=c;break;case"source":st("error",e),h=c;break;case"img":case"image":case"link":st("error",e),st("load",e),h=c;break;case"details":st("toggle",e),h=c;break;case"input":I(e,c),h=Ie(e,c),st("invalid",e);break;case"option":h=c;break;case"select":e._wrapperState={wasMultiple:!!c.multiple},h=E({},c,{value:void 0}),st("invalid",e);break;case"textarea":Re(e,c),h=Te(e,c),st("invalid",e);break;default:h=c}An(s,h),_=h;for(f in _)if(_.hasOwnProperty(f)){var T=_[f];f==="style"?nr(e,T):f==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,T!=null&&fr(e,T)):f==="children"?typeof T=="string"?(s!=="textarea"||T!=="")&&It(e,T):typeof T=="number"&&It(e,""+T):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(l.hasOwnProperty(f)?T!=null&&f==="onScroll"&&st("scroll",e):T!=null&&L(e,f,T,v))}switch(s){case"input":Be(e),je(e,c,!1);break;case"textarea":Be(e),at(e);break;case"option":c.value!=null&&e.setAttribute("value",""+de(c.value));break;case"select":e.multiple=!!c.multiple,f=c.value,f!=null?Ce(e,!!c.multiple,f,!1):c.defaultValue!=null&&Ce(e,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=Pa)}switch(s){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Mt(t),null;case 6:if(e&&t.stateNode!=null)vh(e,t,e.memoizedProps,c);else{if(typeof c!="string"&&t.stateNode===null)throw Error(n(166));if(s=$n(Oi.current),$n(Nr.current),Ma(t)){if(c=t.stateNode,s=t.memoizedProps,c[Er]=t,(f=c.nodeValue!==s)&&(e=Zt,e!==null))switch(e.tag){case 3:Ta(c.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ta(c.nodeValue,s,(e.mode&1)!==0)}f&&(t.flags|=4)}else c=(s.nodeType===9?s:s.ownerDocument).createTextNode(c),c[Er]=t,t.stateNode=c}return Mt(t),null;case 13:if(it(lt),c=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ot&&er!==null&&(t.mode&1)!==0&&(t.flags&128)===0)bd(),js(),t.flags|=98560,f=!1;else if(f=Ma(t),c!==null&&c.dehydrated!==null){if(e===null){if(!f)throw Error(n(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));f[Er]=t}else js(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Mt(t),f=!1}else gr!==null&&(hc(gr),gr=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=s,t):(c=c!==null,c!==(e!==null&&e.memoizedState!==null)&&c&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(lt.current&1)!==0?wt===0&&(wt=3):mc())),t.updateQueue!==null&&(t.flags|=4),Mt(t),null);case 4:return Ts(),tc(e,t),e===null&&_i(t.stateNode.containerInfo),Mt(t),null;case 10:return Tl(t.type._context),Mt(t),null;case 17:return Vt(t.type)&&Aa(),Mt(t),null;case 19:if(it(lt),f=t.memoizedState,f===null)return Mt(t),null;if(c=(t.flags&128)!==0,v=f.rendering,v===null)if(c)Li(f,!1);else{if(wt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(v=za(e),v!==null){for(t.flags|=128,Li(f,!1),c=v.updateQueue,c!==null&&(t.updateQueue=c,t.flags|=4),t.subtreeFlags=0,c=s,s=t.child;s!==null;)f=s,e=c,f.flags&=14680066,v=f.alternate,v===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=v.childLanes,f.lanes=v.lanes,f.child=v.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=v.memoizedProps,f.memoizedState=v.memoizedState,f.updateQueue=v.updateQueue,f.type=v.type,e=v.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return et(lt,lt.current&1|2),t.child}e=e.sibling}f.tail!==null&&Ke()>Is&&(t.flags|=128,c=!0,Li(f,!1),t.lanes=4194304)}else{if(!c)if(e=za(v),e!==null){if(t.flags|=128,c=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Li(f,!0),f.tail===null&&f.tailMode==="hidden"&&!v.alternate&&!ot)return Mt(t),null}else 2*Ke()-f.renderingStartTime>Is&&s!==1073741824&&(t.flags|=128,c=!0,Li(f,!1),t.lanes=4194304);f.isBackwards?(v.sibling=t.child,t.child=v):(s=f.last,s!==null?s.sibling=v:t.child=v,f.last=v)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Ke(),t.sibling=null,s=lt.current,et(lt,c?s&1|2:s&1),t):(Mt(t),null);case 22:case 23:return pc(),c=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==c&&(t.flags|=8192),c&&(t.mode&1)!==0?(tr&1073741824)!==0&&(Mt(t),t.subtreeFlags&6&&(t.flags|=8192)):Mt(t),null;case 24:return null;case 25:return null}throw Error(n(156,t.tag))}function Jm(e,t){switch(Sl(t),t.tag){case 1:return Vt(t.type)&&Aa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ts(),it(Ht),it(Dt),Ll(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Rl(t),null;case 13:if(it(lt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(n(340));js()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return it(lt),null;case 4:return Ts(),null;case 10:return Tl(t.type._context),null;case 22:case 23:return pc(),null;case 24:return null;default:return null}}var Xa=!1,Ut=!1,Km=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Os(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(c){dt(e,t,c)}else s.current=null}function rc(e,t,s){try{s()}catch(c){dt(e,t,c)}}var wh=!1;function Qm(e,t){if(pl=va,e=Yu(),al(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var c=s.getSelection&&s.getSelection();if(c&&c.rangeCount!==0){s=c.anchorNode;var h=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break e}var v=0,_=-1,T=-1,M=0,Y=0,X=e,Q=null;t:for(;;){for(var me;X!==s||h!==0&&X.nodeType!==3||(_=v+h),X!==f||c!==0&&X.nodeType!==3||(T=v+c),X.nodeType===3&&(v+=X.nodeValue.length),(me=X.firstChild)!==null;)Q=X,X=me;for(;;){if(X===e)break t;if(Q===s&&++M===h&&(_=v),Q===f&&++Y===c&&(T=v),(me=X.nextSibling)!==null)break;X=Q,Q=X.parentNode}X=me}s=_===-1||T===-1?null:{start:_,end:T}}else s=null}s=s||{start:0,end:0}}else s=null;for(ml={focusedElem:e,selectionRange:s},va=!1,ve=t;ve!==null;)if(t=ve,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ve=e;else for(;ve!==null;){t=ve;try{var we=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var be=we.memoizedProps,ft=we.memoizedState,A=t.stateNode,P=A.getSnapshotBeforeUpdate(t.elementType===t.type?be:yr(t.type,be),ft);A.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var R=t.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(re){dt(t,t.return,re)}if(e=t.sibling,e!==null){e.return=t.return,ve=e;break}ve=t.return}return we=wh,wh=!1,we}function Mi(e,t,s){var c=t.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&e)===e){var f=h.destroy;h.destroy=void 0,f!==void 0&&rc(t,s,f)}h=h.next}while(h!==c)}}function Za(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var c=s.create;s.destroy=c()}s=s.next}while(s!==t)}}function nc(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function xh(e){var t=e.alternate;t!==null&&(e.alternate=null,xh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Er],delete t[Ei],delete t[wl],delete t[Am],delete t[Im])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bh(e){return e.tag===5||e.tag===3||e.tag===4}function kh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function sc(e,t,s){var c=e.tag;if(c===5||c===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Pa));else if(c!==4&&(e=e.child,e!==null))for(sc(e,t,s),e=e.sibling;e!==null;)sc(e,t,s),e=e.sibling}function ic(e,t,s){var c=e.tag;if(c===5||c===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(c!==4&&(e=e.child,e!==null))for(ic(e,t,s),e=e.sibling;e!==null;)ic(e,t,s),e=e.sibling}var Tt=null,vr=!1;function pn(e,t,s){for(s=s.child;s!==null;)Sh(e,t,s),s=s.sibling}function Sh(e,t,s){if(sr&&typeof sr.onCommitFiberUnmount=="function")try{sr.onCommitFiberUnmount(Pe,s)}catch{}switch(s.tag){case 5:Ut||Os(s,t);case 6:var c=Tt,h=vr;Tt=null,pn(e,t,s),Tt=c,vr=h,Tt!==null&&(vr?(e=Tt,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Tt.removeChild(s.stateNode));break;case 18:Tt!==null&&(vr?(e=Tt,s=s.stateNode,e.nodeType===8?vl(e.parentNode,s):e.nodeType===1&&vl(e,s),mi(e)):vl(Tt,s.stateNode));break;case 4:c=Tt,h=vr,Tt=s.stateNode.containerInfo,vr=!0,pn(e,t,s),Tt=c,vr=h;break;case 0:case 11:case 14:case 15:if(!Ut&&(c=s.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){h=c=c.next;do{var f=h,v=f.destroy;f=f.tag,v!==void 0&&((f&2)!==0||(f&4)!==0)&&rc(s,t,v),h=h.next}while(h!==c)}pn(e,t,s);break;case 1:if(!Ut&&(Os(s,t),c=s.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=s.memoizedProps,c.state=s.memoizedState,c.componentWillUnmount()}catch(_){dt(s,t,_)}pn(e,t,s);break;case 21:pn(e,t,s);break;case 22:s.mode&1?(Ut=(c=Ut)||s.memoizedState!==null,pn(e,t,s),Ut=c):pn(e,t,s);break;default:pn(e,t,s)}}function _h(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Km),t.forEach(function(c){var h=ig.bind(null,e,c);s.has(c)||(s.add(c),c.then(h,h))})}}function wr(e,t){var s=t.deletions;if(s!==null)for(var c=0;c<s.length;c++){var h=s[c];try{var f=e,v=t,_=v;e:for(;_!==null;){switch(_.tag){case 5:Tt=_.stateNode,vr=!1;break e;case 3:Tt=_.stateNode.containerInfo,vr=!0;break e;case 4:Tt=_.stateNode.containerInfo,vr=!0;break e}_=_.return}if(Tt===null)throw Error(n(160));Sh(f,v,h),Tt=null,vr=!1;var T=h.alternate;T!==null&&(T.return=null),h.return=null}catch(M){dt(h,t,M)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)jh(t,e),t=t.sibling}function jh(e,t){var s=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wr(t,e),Tr(e),c&4){try{Mi(3,e,e.return),Za(3,e)}catch(be){dt(e,e.return,be)}try{Mi(5,e,e.return)}catch(be){dt(e,e.return,be)}}break;case 1:wr(t,e),Tr(e),c&512&&s!==null&&Os(s,s.return);break;case 5:if(wr(t,e),Tr(e),c&512&&s!==null&&Os(s,s.return),e.flags&32){var h=e.stateNode;try{It(h,"")}catch(be){dt(e,e.return,be)}}if(c&4&&(h=e.stateNode,h!=null)){var f=e.memoizedProps,v=s!==null?s.memoizedProps:f,_=e.type,T=e.updateQueue;if(e.updateQueue=null,T!==null)try{_==="input"&&f.type==="radio"&&f.name!=null&&U(h,f),In(_,v);var M=In(_,f);for(v=0;v<T.length;v+=2){var Y=T[v],X=T[v+1];Y==="style"?nr(h,X):Y==="dangerouslySetInnerHTML"?fr(h,X):Y==="children"?It(h,X):L(h,Y,X,M)}switch(_){case"input":ye(h,f);break;case"textarea":rt(h,f);break;case"select":var Q=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!f.multiple;var me=f.value;me!=null?Ce(h,!!f.multiple,me,!1):Q!==!!f.multiple&&(f.defaultValue!=null?Ce(h,!!f.multiple,f.defaultValue,!0):Ce(h,!!f.multiple,f.multiple?[]:"",!1))}h[Ei]=f}catch(be){dt(e,e.return,be)}}break;case 6:if(wr(t,e),Tr(e),c&4){if(e.stateNode===null)throw Error(n(162));h=e.stateNode,f=e.memoizedProps;try{h.nodeValue=f}catch(be){dt(e,e.return,be)}}break;case 3:if(wr(t,e),Tr(e),c&4&&s!==null&&s.memoizedState.isDehydrated)try{mi(t.containerInfo)}catch(be){dt(e,e.return,be)}break;case 4:wr(t,e),Tr(e);break;case 13:wr(t,e),Tr(e),h=e.child,h.flags&8192&&(f=h.memoizedState!==null,h.stateNode.isHidden=f,!f||h.alternate!==null&&h.alternate.memoizedState!==null||(lc=Ke())),c&4&&_h(e);break;case 22:if(Y=s!==null&&s.memoizedState!==null,e.mode&1?(Ut=(M=Ut)||Y,wr(t,e),Ut=M):wr(t,e),Tr(e),c&8192){if(M=e.memoizedState!==null,(e.stateNode.isHidden=M)&&!Y&&(e.mode&1)!==0)for(ve=e,Y=e.child;Y!==null;){for(X=ve=Y;ve!==null;){switch(Q=ve,me=Q.child,Q.tag){case 0:case 11:case 14:case 15:Mi(4,Q,Q.return);break;case 1:Os(Q,Q.return);var we=Q.stateNode;if(typeof we.componentWillUnmount=="function"){c=Q,s=Q.return;try{t=c,we.props=t.memoizedProps,we.state=t.memoizedState,we.componentWillUnmount()}catch(be){dt(c,s,be)}}break;case 5:Os(Q,Q.return);break;case 22:if(Q.memoizedState!==null){Ch(X);continue}}me!==null?(me.return=Q,ve=me):Ch(X)}Y=Y.sibling}e:for(Y=null,X=e;;){if(X.tag===5){if(Y===null){Y=X;try{h=X.stateNode,M?(f=h.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(_=X.stateNode,T=X.memoizedProps.style,v=T!=null&&T.hasOwnProperty("display")?T.display:null,_.style.display=Qr("display",v))}catch(be){dt(e,e.return,be)}}}else if(X.tag===6){if(Y===null)try{X.stateNode.nodeValue=M?"":X.memoizedProps}catch(be){dt(e,e.return,be)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===e)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===e)break e;for(;X.sibling===null;){if(X.return===null||X.return===e)break e;Y===X&&(Y=null),X=X.return}Y===X&&(Y=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:wr(t,e),Tr(e),c&4&&_h(e);break;case 21:break;default:wr(t,e),Tr(e)}}function Tr(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(bh(s)){var c=s;break e}s=s.return}throw Error(n(160))}switch(c.tag){case 5:var h=c.stateNode;c.flags&32&&(It(h,""),c.flags&=-33);var f=kh(e);ic(e,f,h);break;case 3:case 4:var v=c.stateNode.containerInfo,_=kh(e);sc(e,_,v);break;default:throw Error(n(161))}}catch(T){dt(e,e.return,T)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ym(e,t,s){ve=e,Eh(e)}function Eh(e,t,s){for(var c=(e.mode&1)!==0;ve!==null;){var h=ve,f=h.child;if(h.tag===22&&c){var v=h.memoizedState!==null||Xa;if(!v){var _=h.alternate,T=_!==null&&_.memoizedState!==null||Ut;_=Xa;var M=Ut;if(Xa=v,(Ut=T)&&!M)for(ve=h;ve!==null;)v=ve,T=v.child,v.tag===22&&v.memoizedState!==null?Th(h):T!==null?(T.return=v,ve=T):Th(h);for(;f!==null;)ve=f,Eh(f),f=f.sibling;ve=h,Xa=_,Ut=M}Nh(e)}else(h.subtreeFlags&8772)!==0&&f!==null?(f.return=h,ve=f):Nh(e)}}function Nh(e){for(;ve!==null;){var t=ve;if((t.flags&8772)!==0){var s=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Ut||Za(5,t);break;case 1:var c=t.stateNode;if(t.flags&4&&!Ut)if(s===null)c.componentDidMount();else{var h=t.elementType===t.type?s.memoizedProps:yr(t.type,s.memoizedProps);c.componentDidUpdate(h,s.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Cd(t,f,c);break;case 3:var v=t.updateQueue;if(v!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Cd(t,v,s)}break;case 5:var _=t.stateNode;if(s===null&&t.flags&4){s=_;var T=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":T.autoFocus&&s.focus();break;case"img":T.src&&(s.src=T.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var M=t.alternate;if(M!==null){var Y=M.memoizedState;if(Y!==null){var X=Y.dehydrated;X!==null&&mi(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ut||t.flags&512&&nc(t)}catch(Q){dt(t,t.return,Q)}}if(t===e){ve=null;break}if(s=t.sibling,s!==null){s.return=t.return,ve=s;break}ve=t.return}}function Ch(e){for(;ve!==null;){var t=ve;if(t===e){ve=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ve=s;break}ve=t.return}}function Th(e){for(;ve!==null;){var t=ve;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Za(4,t)}catch(T){dt(t,s,T)}break;case 1:var c=t.stateNode;if(typeof c.componentDidMount=="function"){var h=t.return;try{c.componentDidMount()}catch(T){dt(t,h,T)}}var f=t.return;try{nc(t)}catch(T){dt(t,f,T)}break;case 5:var v=t.return;try{nc(t)}catch(T){dt(t,v,T)}}}catch(T){dt(t,t.return,T)}if(t===e){ve=null;break}var _=t.sibling;if(_!==null){_.return=t.return,ve=_;break}ve=t.return}}var Xm=Math.ceil,eo=F.ReactCurrentDispatcher,ac=F.ReactCurrentOwner,cr=F.ReactCurrentBatchConfig,qe=0,Et=null,pt=null,Pt=0,tr=0,As=cn(0),wt=0,Ui=null,qn=0,to=0,oc=0,Fi=null,Jt=null,lc=0,Is=1/0,qr=null,ro=!1,cc=null,mn=null,no=!1,gn=null,so=0,Bi=0,uc=null,io=-1,ao=0;function Wt(){return(qe&6)!==0?Ke():io!==-1?io:io=Ke()}function yn(e){return(e.mode&1)===0?1:(qe&2)!==0&&Pt!==0?Pt&-Pt:Dm.transition!==null?(ao===0&&(ao=ku()),ao):(e=Qe,e!==0||(e=window.event,e=e===void 0?16:Ou(e.type)),e)}function xr(e,t,s,c){if(50<Bi)throw Bi=0,uc=null,Error(n(185));ui(e,s,c),((qe&2)===0||e!==Et)&&(e===Et&&((qe&2)===0&&(to|=s),wt===4&&vn(e,Pt)),Kt(e,c),s===1&&qe===0&&(t.mode&1)===0&&(Is=Ke()+500,Ra&&dn()))}function Kt(e,t){var s=e.callbackNode;Dp(e,t);var c=ma(e,e===Et?Pt:0);if(c===0)s!==null&&He(s),e.callbackNode=null,e.callbackPriority=0;else if(t=c&-c,e.callbackPriority!==t){if(s!=null&&He(s),t===1)e.tag===0?Rm(Oh.bind(null,e)):gd(Oh.bind(null,e)),Pm(function(){(qe&6)===0&&dn()}),s=null;else{switch(Su(c)){case 1:s=Je;break;case 4:s=nt;break;case 16:s=Yt;break;case 536870912:s=Lr;break;default:s=Yt}s=Fh(s,Ph.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Ph(e,t){if(io=-1,ao=0,(qe&6)!==0)throw Error(n(327));var s=e.callbackNode;if(Rs()&&e.callbackNode!==s)return null;var c=ma(e,e===Et?Pt:0);if(c===0)return null;if((c&30)!==0||(c&e.expiredLanes)!==0||t)t=oo(e,c);else{t=c;var h=qe;qe|=2;var f=Ih();(Et!==e||Pt!==t)&&(qr=null,Is=Ke()+500,Vn(e,t));do try{tg();break}catch(_){Ah(e,_)}while(!0);Cl(),eo.current=f,qe=h,pt!==null?t=0:(Et=null,Pt=0,t=wt)}if(t!==0){if(t===2&&(h=qo(e),h!==0&&(c=h,t=dc(e,h))),t===1)throw s=Ui,Vn(e,0),vn(e,c),Kt(e,Ke()),s;if(t===6)vn(e,c);else{if(h=e.current.alternate,(c&30)===0&&!Zm(h)&&(t=oo(e,c),t===2&&(f=qo(e),f!==0&&(c=f,t=dc(e,f))),t===1))throw s=Ui,Vn(e,0),vn(e,c),Kt(e,Ke()),s;switch(e.finishedWork=h,e.finishedLanes=c,t){case 0:case 1:throw Error(n(345));case 2:Gn(e,Jt,qr);break;case 3:if(vn(e,c),(c&130023424)===c&&(t=lc+500-Ke(),10<t)){if(ma(e,0)!==0)break;if(h=e.suspendedLanes,(h&c)!==c){Wt(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=yl(Gn.bind(null,e,Jt,qr),t);break}Gn(e,Jt,qr);break;case 4:if(vn(e,c),(c&4194240)===c)break;for(t=e.eventTimes,h=-1;0<c;){var v=31-pr(c);f=1<<v,v=t[v],v>h&&(h=v),c&=~f}if(c=h,c=Ke()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Xm(c/1960))-c,10<c){e.timeoutHandle=yl(Gn.bind(null,e,Jt,qr),c);break}Gn(e,Jt,qr);break;case 5:Gn(e,Jt,qr);break;default:throw Error(n(329))}}}return Kt(e,Ke()),e.callbackNode===s?Ph.bind(null,e):null}function dc(e,t){var s=Fi;return e.current.memoizedState.isDehydrated&&(Vn(e,t).flags|=256),e=oo(e,t),e!==2&&(t=Jt,Jt=s,t!==null&&hc(t)),e}function hc(e){Jt===null?Jt=e:Jt.push.apply(Jt,e)}function Zm(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var c=0;c<s.length;c++){var h=s[c],f=h.getSnapshot;h=h.value;try{if(!mr(f(),h))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vn(e,t){for(t&=~oc,t&=~to,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-pr(t),c=1<<s;e[s]=-1,t&=~c}}function Oh(e){if((qe&6)!==0)throw Error(n(327));Rs();var t=ma(e,0);if((t&1)===0)return Kt(e,Ke()),null;var s=oo(e,t);if(e.tag!==0&&s===2){var c=qo(e);c!==0&&(t=c,s=dc(e,c))}if(s===1)throw s=Ui,Vn(e,0),vn(e,t),Kt(e,Ke()),s;if(s===6)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gn(e,Jt,qr),Kt(e,Ke()),null}function fc(e,t){var s=qe;qe|=1;try{return e(t)}finally{qe=s,qe===0&&(Is=Ke()+500,Ra&&dn())}}function Hn(e){gn!==null&&gn.tag===0&&(qe&6)===0&&Rs();var t=qe;qe|=1;var s=cr.transition,c=Qe;try{if(cr.transition=null,Qe=1,e)return e()}finally{Qe=c,cr.transition=s,qe=t,(qe&6)===0&&dn()}}function pc(){tr=As.current,it(As)}function Vn(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Tm(s)),pt!==null)for(s=pt.return;s!==null;){var c=s;switch(Sl(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Aa();break;case 3:Ts(),it(Ht),it(Dt),Ll();break;case 5:Rl(c);break;case 4:Ts();break;case 13:it(lt);break;case 19:it(lt);break;case 10:Tl(c.type._context);break;case 22:case 23:pc()}s=s.return}if(Et=e,pt=e=wn(e.current,null),Pt=tr=t,wt=0,Ui=null,oc=to=qn=0,Jt=Fi=null,Wn!==null){for(t=0;t<Wn.length;t++)if(s=Wn[t],c=s.interleaved,c!==null){s.interleaved=null;var h=c.next,f=s.pending;if(f!==null){var v=f.next;f.next=h,c.next=v}s.pending=c}Wn=null}return e}function Ah(e,t){do{var s=pt;try{if(Cl(),qa.current=Ja,Ha){for(var c=ct.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}Ha=!1}if(zn=0,jt=vt=ct=null,Ai=!1,Ii=0,ac.current=null,s===null||s.return===null){wt=1,Ui=t,pt=null;break}e:{var f=e,v=s.return,_=s,T=t;if(t=Pt,_.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){var M=T,Y=_,X=Y.tag;if((Y.mode&1)===0&&(X===0||X===11||X===15)){var Q=Y.alternate;Q?(Y.updateQueue=Q.updateQueue,Y.memoizedState=Q.memoizedState,Y.lanes=Q.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var me=nh(v);if(me!==null){me.flags&=-257,sh(me,v,_,f,t),me.mode&1&&rh(f,M,t),t=me,T=M;var we=t.updateQueue;if(we===null){var be=new Set;be.add(T),t.updateQueue=be}else we.add(T);break e}else{if((t&1)===0){rh(f,M,t),mc();break e}T=Error(n(426))}}else if(ot&&_.mode&1){var ft=nh(v);if(ft!==null){(ft.flags&65536)===0&&(ft.flags|=256),sh(ft,v,_,f,t),El(Ps(T,_));break e}}f=T=Ps(T,_),wt!==4&&(wt=2),Fi===null?Fi=[f]:Fi.push(f),f=v;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var A=eh(f,T,t);Nd(f,A);break e;case 1:_=T;var P=f.type,R=f.stateNode;if((f.flags&128)===0&&(typeof P.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(mn===null||!mn.has(R)))){f.flags|=65536,t&=-t,f.lanes|=t;var re=th(f,_,t);Nd(f,re);break e}}f=f.return}while(f!==null)}Dh(s)}catch(ke){t=ke,pt===s&&s!==null&&(pt=s=s.return);continue}break}while(!0)}function Ih(){var e=eo.current;return eo.current=Ja,e===null?Ja:e}function mc(){(wt===0||wt===3||wt===2)&&(wt=4),Et===null||(qn&268435455)===0&&(to&268435455)===0||vn(Et,Pt)}function oo(e,t){var s=qe;qe|=2;var c=Ih();(Et!==e||Pt!==t)&&(qr=null,Vn(e,t));do try{eg();break}catch(h){Ah(e,h)}while(!0);if(Cl(),qe=s,eo.current=c,pt!==null)throw Error(n(261));return Et=null,Pt=0,wt}function eg(){for(;pt!==null;)Rh(pt)}function tg(){for(;pt!==null&&!ze();)Rh(pt)}function Rh(e){var t=Uh(e.alternate,e,tr);e.memoizedProps=e.pendingProps,t===null?Dh(e):pt=t,ac.current=null}function Dh(e){var t=e;do{var s=t.alternate;if(e=t.return,(t.flags&32768)===0){if(s=Gm(s,t,tr),s!==null){pt=s;return}}else{if(s=Jm(s,t),s!==null){s.flags&=32767,pt=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{wt=6,pt=null;return}}if(t=t.sibling,t!==null){pt=t;return}pt=t=e}while(t!==null);wt===0&&(wt=5)}function Gn(e,t,s){var c=Qe,h=cr.transition;try{cr.transition=null,Qe=1,rg(e,t,s,c)}finally{cr.transition=h,Qe=c}return null}function rg(e,t,s,c){do Rs();while(gn!==null);if((qe&6)!==0)throw Error(n(327));s=e.finishedWork;var h=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var f=s.lanes|s.childLanes;if(Lp(e,f),e===Et&&(pt=Et=null,Pt=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||no||(no=!0,Fh(Yt,function(){return Rs(),null})),f=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||f){f=cr.transition,cr.transition=null;var v=Qe;Qe=1;var _=qe;qe|=4,ac.current=null,Qm(e,s),jh(s,e),km(ml),va=!!pl,ml=pl=null,e.current=s,Ym(s),qt(),qe=_,Qe=v,cr.transition=f}else e.current=s;if(no&&(no=!1,gn=e,so=h),f=e.pendingLanes,f===0&&(mn=null),De(s.stateNode),Kt(e,Ke()),t!==null)for(c=e.onRecoverableError,s=0;s<t.length;s++)h=t[s],c(h.value,{componentStack:h.stack,digest:h.digest});if(ro)throw ro=!1,e=cc,cc=null,e;return(so&1)!==0&&e.tag!==0&&Rs(),f=e.pendingLanes,(f&1)!==0?e===uc?Bi++:(Bi=0,uc=e):Bi=0,dn(),null}function Rs(){if(gn!==null){var e=Su(so),t=cr.transition,s=Qe;try{if(cr.transition=null,Qe=16>e?16:e,gn===null)var c=!1;else{if(e=gn,gn=null,so=0,(qe&6)!==0)throw Error(n(331));var h=qe;for(qe|=4,ve=e.current;ve!==null;){var f=ve,v=f.child;if((ve.flags&16)!==0){var _=f.deletions;if(_!==null){for(var T=0;T<_.length;T++){var M=_[T];for(ve=M;ve!==null;){var Y=ve;switch(Y.tag){case 0:case 11:case 15:Mi(8,Y,f)}var X=Y.child;if(X!==null)X.return=Y,ve=X;else for(;ve!==null;){Y=ve;var Q=Y.sibling,me=Y.return;if(xh(Y),Y===M){ve=null;break}if(Q!==null){Q.return=me,ve=Q;break}ve=me}}}var we=f.alternate;if(we!==null){var be=we.child;if(be!==null){we.child=null;do{var ft=be.sibling;be.sibling=null,be=ft}while(be!==null)}}ve=f}}if((f.subtreeFlags&2064)!==0&&v!==null)v.return=f,ve=v;else e:for(;ve!==null;){if(f=ve,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Mi(9,f,f.return)}var A=f.sibling;if(A!==null){A.return=f.return,ve=A;break e}ve=f.return}}var P=e.current;for(ve=P;ve!==null;){v=ve;var R=v.child;if((v.subtreeFlags&2064)!==0&&R!==null)R.return=v,ve=R;else e:for(v=P;ve!==null;){if(_=ve,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:Za(9,_)}}catch(ke){dt(_,_.return,ke)}if(_===v){ve=null;break e}var re=_.sibling;if(re!==null){re.return=_.return,ve=re;break e}ve=_.return}}if(qe=h,dn(),sr&&typeof sr.onPostCommitFiberRoot=="function")try{sr.onPostCommitFiberRoot(Pe,e)}catch{}c=!0}return c}finally{Qe=s,cr.transition=t}}return!1}function Lh(e,t,s){t=Ps(s,t),t=eh(e,t,1),e=fn(e,t,1),t=Wt(),e!==null&&(ui(e,1,t),Kt(e,t))}function dt(e,t,s){if(e.tag===3)Lh(e,e,s);else for(;t!==null;){if(t.tag===3){Lh(t,e,s);break}else if(t.tag===1){var c=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(mn===null||!mn.has(c))){e=Ps(s,e),e=th(t,e,1),t=fn(t,e,1),e=Wt(),t!==null&&(ui(t,1,e),Kt(t,e));break}}t=t.return}}function ng(e,t,s){var c=e.pingCache;c!==null&&c.delete(t),t=Wt(),e.pingedLanes|=e.suspendedLanes&s,Et===e&&(Pt&s)===s&&(wt===4||wt===3&&(Pt&130023424)===Pt&&500>Ke()-lc?Vn(e,0):oc|=s),Kt(e,t)}function Mh(e,t){t===0&&((e.mode&1)===0?t=1:(t=pa,pa<<=1,(pa&130023424)===0&&(pa=4194304)));var s=Wt();e=Wr(e,t),e!==null&&(ui(e,t,s),Kt(e,s))}function sg(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Mh(e,s)}function ig(e,t){var s=0;switch(e.tag){case 13:var c=e.stateNode,h=e.memoizedState;h!==null&&(s=h.retryLane);break;case 19:c=e.stateNode;break;default:throw Error(n(314))}c!==null&&c.delete(t),Mh(e,s)}var Uh;Uh=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ht.current)Gt=!0;else{if((e.lanes&s)===0&&(t.flags&128)===0)return Gt=!1,Vm(e,t,s);Gt=(e.flags&131072)!==0}else Gt=!1,ot&&(t.flags&1048576)!==0&&yd(t,La,t.index);switch(t.lanes=0,t.tag){case 2:var c=t.type;Ya(e,t),e=t.pendingProps;var h=ks(t,Dt.current);Cs(t,s),h=Fl(null,t,c,e,h,s);var f=Bl();return t.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Vt(c)?(f=!0,Ia(t)):f=!1,t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Al(t),h.updater=Ka,t.stateNode=h,h._reactInternals=t,Vl(t,c,e,s),t=Ql(null,t,c,!0,f,s)):(t.tag=0,ot&&f&&kl(t),Bt(null,t,h,s),t=t.child),t;case 16:c=t.elementType;e:{switch(Ya(e,t),e=t.pendingProps,h=c._init,c=h(c._payload),t.type=c,h=t.tag=og(c),e=yr(c,e),h){case 0:t=Kl(null,t,c,e,s);break e;case 1:t=uh(null,t,c,e,s);break e;case 11:t=ih(null,t,c,e,s);break e;case 14:t=ah(null,t,c,yr(c.type,e),s);break e}throw Error(n(306,c,""))}return t;case 0:return c=t.type,h=t.pendingProps,h=t.elementType===c?h:yr(c,h),Kl(e,t,c,h,s);case 1:return c=t.type,h=t.pendingProps,h=t.elementType===c?h:yr(c,h),uh(e,t,c,h,s);case 3:e:{if(dh(t),e===null)throw Error(n(387));c=t.pendingProps,f=t.memoizedState,h=f.element,Ed(e,t),$a(t,c,null,s);var v=t.memoizedState;if(c=v.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){h=Ps(Error(n(423)),t),t=hh(e,t,c,s,h);break e}else if(c!==h){h=Ps(Error(n(424)),t),t=hh(e,t,c,s,h);break e}else for(er=ln(t.stateNode.containerInfo.firstChild),Zt=t,ot=!0,gr=null,s=_d(t,null,c,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(js(),c===h){t=zr(e,t,s);break e}Bt(e,t,c,s)}t=t.child}return t;case 5:return Td(t),e===null&&jl(t),c=t.type,h=t.pendingProps,f=e!==null?e.memoizedProps:null,v=h.children,gl(c,h)?v=null:f!==null&&gl(c,f)&&(t.flags|=32),ch(e,t),Bt(e,t,v,s),t.child;case 6:return e===null&&jl(t),null;case 13:return fh(e,t,s);case 4:return Il(t,t.stateNode.containerInfo),c=t.pendingProps,e===null?t.child=Es(t,null,c,s):Bt(e,t,c,s),t.child;case 11:return c=t.type,h=t.pendingProps,h=t.elementType===c?h:yr(c,h),ih(e,t,c,h,s);case 7:return Bt(e,t,t.pendingProps,s),t.child;case 8:return Bt(e,t,t.pendingProps.children,s),t.child;case 12:return Bt(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(c=t.type._context,h=t.pendingProps,f=t.memoizedProps,v=h.value,et(Fa,c._currentValue),c._currentValue=v,f!==null)if(mr(f.value,v)){if(f.children===h.children&&!Ht.current){t=zr(e,t,s);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var _=f.dependencies;if(_!==null){v=f.child;for(var T=_.firstContext;T!==null;){if(T.context===c){if(f.tag===1){T=$r(-1,s&-s),T.tag=2;var M=f.updateQueue;if(M!==null){M=M.shared;var Y=M.pending;Y===null?T.next=T:(T.next=Y.next,Y.next=T),M.pending=T}}f.lanes|=s,T=f.alternate,T!==null&&(T.lanes|=s),Pl(f.return,s,t),_.lanes|=s;break}T=T.next}}else if(f.tag===10)v=f.type===t.type?null:f.child;else if(f.tag===18){if(v=f.return,v===null)throw Error(n(341));v.lanes|=s,_=v.alternate,_!==null&&(_.lanes|=s),Pl(v,s,t),v=f.sibling}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===t){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}Bt(e,t,h.children,s),t=t.child}return t;case 9:return h=t.type,c=t.pendingProps.children,Cs(t,s),h=or(h),c=c(h),t.flags|=1,Bt(e,t,c,s),t.child;case 14:return c=t.type,h=yr(c,t.pendingProps),h=yr(c.type,h),ah(e,t,c,h,s);case 15:return oh(e,t,t.type,t.pendingProps,s);case 17:return c=t.type,h=t.pendingProps,h=t.elementType===c?h:yr(c,h),Ya(e,t),t.tag=1,Vt(c)?(e=!0,Ia(t)):e=!1,Cs(t,s),Xd(t,c,h),Vl(t,c,h,s),Ql(null,t,c,!0,e,s);case 19:return mh(e,t,s);case 22:return lh(e,t,s)}throw Error(n(156,t.tag))};function Fh(e,t){return We(e,t)}function ag(e,t,s,c){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(e,t,s,c){return new ag(e,t,s,c)}function gc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function og(e){if(typeof e=="function")return gc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===oe)return 11;if(e===ce)return 14}return 2}function wn(e,t){var s=e.alternate;return s===null?(s=ur(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function lo(e,t,s,c,h,f){var v=2;if(c=e,typeof e=="function")gc(e)&&(v=1);else if(typeof e=="string")v=5;else e:switch(e){case W:return Jn(s.children,h,f,t);case te:v=8,h|=8;break;case fe:return e=ur(12,s,t,h|2),e.elementType=fe,e.lanes=f,e;case ne:return e=ur(13,s,t,h),e.elementType=ne,e.lanes=f,e;case G:return e=ur(19,s,t,h),e.elementType=G,e.lanes=f,e;case B:return co(s,h,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case pe:v=10;break e;case K:v=9;break e;case oe:v=11;break e;case ce:v=14;break e;case he:v=16,c=null;break e}throw Error(n(130,e==null?e:typeof e,""))}return t=ur(v,s,t,h),t.elementType=e,t.type=c,t.lanes=f,t}function Jn(e,t,s,c){return e=ur(7,e,c,t),e.lanes=s,e}function co(e,t,s,c){return e=ur(22,e,c,t),e.elementType=B,e.lanes=s,e.stateNode={isHidden:!1},e}function yc(e,t,s){return e=ur(6,e,null,t),e.lanes=s,e}function vc(e,t,s){return t=ur(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function lg(e,t,s,c,h){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ho(0),this.expirationTimes=Ho(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ho(0),this.identifierPrefix=c,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function wc(e,t,s,c,h,f,v,_,T){return e=new lg(e,t,s,_,T),t===1?(t=1,f===!0&&(t|=8)):t=0,f=ur(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:c,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Al(f),e}function cg(e,t,s){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:c==null?null:""+c,children:e,containerInfo:t,implementation:s}}function Bh(e){if(!e)return un;e=e._reactInternals;e:{if(Rr(e)!==e||e.tag!==1)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Vt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(n(171))}if(e.tag===1){var s=e.type;if(Vt(s))return pd(e,s,t)}return t}function Wh(e,t,s,c,h,f,v,_,T){return e=wc(s,c,!0,e,h,f,v,_,T),e.context=Bh(null),s=e.current,c=Wt(),h=yn(s),f=$r(c,h),f.callback=t??null,fn(s,f,h),e.current.lanes=h,ui(e,h,c),Kt(e,c),e}function uo(e,t,s,c){var h=t.current,f=Wt(),v=yn(h);return s=Bh(s),t.context===null?t.context=s:t.pendingContext=s,t=$r(f,v),t.payload={element:e},c=c===void 0?null:c,c!==null&&(t.callback=c),e=fn(h,t,v),e!==null&&(xr(e,h,v,f),Wa(e,h,v)),v}function ho(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function $h(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function xc(e,t){$h(e,t),(e=e.alternate)&&$h(e,t)}function ug(){return null}var zh=typeof reportError=="function"?reportError:function(e){console.error(e)};function bc(e){this._internalRoot=e}fo.prototype.render=bc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(n(409));uo(e,t,null,null)},fo.prototype.unmount=bc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hn(function(){uo(null,e,null,null)}),t[Mr]=null}};function fo(e){this._internalRoot=e}fo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Eu();e={blockedOn:null,target:e,priority:t};for(var s=0;s<sn.length&&t!==0&&t<sn[s].priority;s++);sn.splice(s,0,e),s===0&&Tu(e)}};function kc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function po(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function qh(){}function dg(e,t,s,c,h){if(h){if(typeof c=="function"){var f=c;c=function(){var M=ho(v);f.call(M)}}var v=Wh(t,c,e,0,null,!1,!1,"",qh);return e._reactRootContainer=v,e[Mr]=v.current,_i(e.nodeType===8?e.parentNode:e),Hn(),v}for(;h=e.lastChild;)e.removeChild(h);if(typeof c=="function"){var _=c;c=function(){var M=ho(T);_.call(M)}}var T=wc(e,0,!1,null,null,!1,!1,"",qh);return e._reactRootContainer=T,e[Mr]=T.current,_i(e.nodeType===8?e.parentNode:e),Hn(function(){uo(t,T,s,c)}),T}function mo(e,t,s,c,h){var f=s._reactRootContainer;if(f){var v=f;if(typeof h=="function"){var _=h;h=function(){var T=ho(v);_.call(T)}}uo(t,v,e,h)}else v=dg(s,t,e,h,c);return ho(v)}_u=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=ci(t.pendingLanes);s!==0&&(Vo(t,s|1),Kt(t,Ke()),(qe&6)===0&&(Is=Ke()+500,dn()))}break;case 13:Hn(function(){var c=Wr(e,1);if(c!==null){var h=Wt();xr(c,e,1,h)}}),xc(e,1)}},Go=function(e){if(e.tag===13){var t=Wr(e,134217728);if(t!==null){var s=Wt();xr(t,e,134217728,s)}xc(e,134217728)}},ju=function(e){if(e.tag===13){var t=yn(e),s=Wr(e,t);if(s!==null){var c=Wt();xr(s,e,t,c)}xc(e,t)}},Eu=function(){return Qe},Nu=function(e,t){var s=Qe;try{return Qe=e,t()}finally{Qe=s}},ii=function(e,t,s){switch(t){case"input":if(ye(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var c=s[t];if(c!==e&&c.form===e.form){var h=Oa(c);if(!h)throw Error(n(90));Ge(c),ye(c,h)}}}break;case"textarea":rt(e,s);break;case"select":t=s.value,t!=null&&Ce(e,!!s.multiple,t,!1)}},ua=fc,da=Hn;var hg={usingClientEntryPoint:!1,Events:[Ni,xs,Oa,la,ca,fc]},Wi={findFiberByHostInstance:Mn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fg={bundleType:Wi.bundleType,version:Wi.version,rendererPackageName:Wi.rendererPackageName,rendererConfig:Wi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ge(e),e===null?null:e.stateNode},findFiberByHostInstance:Wi.findFiberByHostInstance||ug,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var go=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!go.isDisabled&&go.supportsFiber)try{Pe=go.inject(fg),sr=go}catch{}}return Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hg,Qt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kc(t))throw Error(n(200));return cg(e,t,null,s)},Qt.createRoot=function(e,t){if(!kc(e))throw Error(n(299));var s=!1,c="",h=zh;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(c=t.identifierPrefix),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=wc(e,1,!1,null,null,s,!1,c,h),e[Mr]=t.current,_i(e.nodeType===8?e.parentNode:e),new bc(t)},Qt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=ge(t),e=e===null?null:e.stateNode,e},Qt.flushSync=function(e){return Hn(e)},Qt.hydrate=function(e,t,s){if(!po(t))throw Error(n(200));return mo(null,e,t,!0,s)},Qt.hydrateRoot=function(e,t,s){if(!kc(e))throw Error(n(405));var c=s!=null&&s.hydratedSources||null,h=!1,f="",v=zh;if(s!=null&&(s.unstable_strictMode===!0&&(h=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),t=Wh(t,null,e,1,s??null,h,!1,f,v),e[Mr]=t.current,_i(e),c)for(e=0;e<c.length;e++)s=c[e],h=s._getVersion,h=h(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,h]:t.mutableSourceEagerHydrationData.push(s,h);return new fo(t)},Qt.render=function(e,t,s){if(!po(t))throw Error(n(200));return mo(null,e,t,!1,s)},Qt.unmountComponentAtNode=function(e){if(!po(e))throw Error(n(40));return e._reactRootContainer?(Hn(function(){mo(null,null,e,!1,function(){e._reactRootContainer=null,e[Mr]=null})}),!0):!1},Qt.unstable_batchedUpdates=fc,Qt.unstable_renderSubtreeIntoContainer=function(e,t,s,c){if(!po(s))throw Error(n(200));if(e==null||e._reactInternals===void 0)throw Error(n(38));return mo(e,t,s,!1,c)},Qt.version="18.3.1-next-f1338f8080-20240426",Qt}var Zh;function qf(){if(Zh)return jc.exports;Zh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(r){console.error(r)}}return i(),jc.exports=Eg(),jc.exports}var ef;function Ng(){if(ef)return yo;ef=1;var i=qf();return yo.createRoot=i.createRoot,yo.hydrateRoot=i.hydrateRoot,yo}var Cg=Ng();const Tg=au(Cg);qf();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yi(){return Yi=Object.assign?Object.assign.bind():function(i){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])}return i},Yi.apply(this,arguments)}var Cn;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Cn||(Cn={}));const tf="popstate";function Pg(i){i===void 0&&(i={});function r(a,l){let{pathname:u,search:d,hash:m}=a.location;return Bc("",{pathname:u,search:d,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(a,l){return typeof l=="string"?l:Eo(l)}return Ag(r,n,null,i)}function mt(i,r){if(i===!1||i===null||typeof i>"u")throw new Error(r)}function Hf(i,r){if(!i){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Og(){return Math.random().toString(36).substr(2,8)}function rf(i,r){return{usr:i.state,key:i.key,idx:r}}function Bc(i,r,n,a){return n===void 0&&(n=null),Yi({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof r=="string"?ti(r):r,{state:n,key:r&&r.key||a||Og()})}function Eo(i){let{pathname:r="/",search:n="",hash:a=""}=i;return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function ti(i){let r={};if(i){let n=i.indexOf("#");n>=0&&(r.hash=i.substr(n),i=i.substr(0,n));let a=i.indexOf("?");a>=0&&(r.search=i.substr(a),i=i.substr(0,a)),i&&(r.pathname=i)}return r}function Ag(i,r,n,a){a===void 0&&(a={});let{window:l=document.defaultView,v5Compat:u=!1}=a,d=l.history,m=Cn.Pop,p=null,y=g();y==null&&(y=0,d.replaceState(Yi({},d.state,{idx:y}),""));function g(){return(d.state||{idx:null}).idx}function x(){m=Cn.Pop;let k=g(),q=k==null?null:k-y;y=k,p&&p({action:m,location:C.location,delta:q})}function b(k,q){m=Cn.Push;let $=Bc(C.location,k,q);y=g()+1;let L=rf($,y),F=C.createHref($);try{d.pushState(L,"",F)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;l.location.assign(F)}u&&p&&p({action:m,location:C.location,delta:1})}function N(k,q){m=Cn.Replace;let $=Bc(C.location,k,q);y=g();let L=rf($,y),F=C.createHref($);d.replaceState(L,"",F),u&&p&&p({action:m,location:C.location,delta:0})}function S(k){let q=l.location.origin!=="null"?l.location.origin:l.location.href,$=typeof k=="string"?k:Eo(k);return $=$.replace(/ $/,"%20"),mt(q,"No window.location.(origin|href) available to create URL for href: "+$),new URL($,q)}let C={get action(){return m},get location(){return i(l,d)},listen(k){if(p)throw new Error("A history only accepts one active listener");return l.addEventListener(tf,x),p=k,()=>{l.removeEventListener(tf,x),p=null}},createHref(k){return r(l,k)},createURL:S,encodeLocation(k){let q=S(k);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:b,replace:N,go(k){return d.go(k)}};return C}var nf;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(nf||(nf={}));function Ig(i,r,n){return n===void 0&&(n="/"),Rg(i,r,n)}function Rg(i,r,n,a){let l=typeof r=="string"?ti(r):r,u=lu(l.pathname||"/",n);if(u==null)return null;let d=Vf(i);Dg(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let y=Gg(u);m=qg(d[p],y)}return m}function Vf(i,r,n,a){r===void 0&&(r=[]),n===void 0&&(n=[]),a===void 0&&(a="");let l=(u,d,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};p.relativePath.startsWith("/")&&(mt(p.relativePath.startsWith(a),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(a.length));let y=Tn([a,p.relativePath]),g=n.concat(p);u.children&&u.children.length>0&&(mt(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),Vf(u.children,r,g,y)),!(u.path==null&&!u.index)&&r.push({path:y,score:$g(y,u.index),routesMeta:g})};return i.forEach((u,d)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))l(u,d);else for(let p of Gf(u.path))l(u,d,p)}),r}function Gf(i){let r=i.split("/");if(r.length===0)return[];let[n,...a]=r,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(a.length===0)return l?[u,""]:[u];let d=Gf(a.join("/")),m=[];return m.push(...d.map(p=>p===""?u:[u,p].join("/"))),l&&m.push(...d),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function Dg(i){i.sort((r,n)=>r.score!==n.score?n.score-r.score:zg(r.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}const Lg=/^:[\w-]+$/,Mg=3,Ug=2,Fg=1,Bg=10,Wg=-2,sf=i=>i==="*";function $g(i,r){let n=i.split("/"),a=n.length;return n.some(sf)&&(a+=Wg),r&&(a+=Ug),n.filter(l=>!sf(l)).reduce((l,u)=>l+(Lg.test(u)?Mg:u===""?Fg:Bg),a)}function zg(i,r){return i.length===r.length&&i.slice(0,-1).every((a,l)=>a===r[l])?i[i.length-1]-r[r.length-1]:0}function qg(i,r,n){let{routesMeta:a}=i,l={},u="/",d=[];for(let m=0;m<a.length;++m){let p=a[m],y=m===a.length-1,g=u==="/"?r:r.slice(u.length)||"/",x=Hg({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},g),b=p.route;if(!x)return null;Object.assign(l,x.params),d.push({params:l,pathname:Tn([u,x.pathname]),pathnameBase:Yg(Tn([u,x.pathnameBase])),route:b}),x.pathnameBase!=="/"&&(u=Tn([u,x.pathnameBase]))}return d}function Hg(i,r){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,a]=Vg(i.path,i.caseSensitive,i.end),l=r.match(n);if(!l)return null;let u=l[0],d=u.replace(/(.)\/+$/,"$1"),m=l.slice(1);return{params:a.reduce((y,g,x)=>{let{paramName:b,isOptional:N}=g;if(b==="*"){let C=m[x]||"";d=u.slice(0,u.length-C.length).replace(/(.)\/+$/,"$1")}const S=m[x];return N&&!S?y[b]=void 0:y[b]=(S||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:d,pattern:i}}function Vg(i,r,n){r===void 0&&(r=!1),n===void 0&&(n=!0),Hf(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let a=[],l="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(a.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(a.push({paramName:"*"}),l+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":i!==""&&i!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,r?void 0:"i"),a]}function Gg(i){try{return i.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Hf(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),i}}function lu(i,r){if(r==="/")return i;if(!i.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,a=i.charAt(n);return a&&a!=="/"?null:i.slice(n)||"/"}function Jg(i,r){r===void 0&&(r="/");let{pathname:n,search:a="",hash:l=""}=typeof i=="string"?ti(i):i;return{pathname:n?n.startsWith("/")?n:Kg(n,r):r,search:Xg(a),hash:Zg(l)}}function Kg(i,r){let n=r.replace(/\/+$/,"").split("/");return i.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function Cc(i,r,n,a){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Qg(i){return i.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function Jf(i,r){let n=Qg(i);return r?n.map((a,l)=>l===n.length-1?a.pathname:a.pathnameBase):n.map(a=>a.pathnameBase)}function Kf(i,r,n,a){a===void 0&&(a=!1);let l;typeof i=="string"?l=ti(i):(l=Yi({},i),mt(!l.pathname||!l.pathname.includes("?"),Cc("?","pathname","search",l)),mt(!l.pathname||!l.pathname.includes("#"),Cc("#","pathname","hash",l)),mt(!l.search||!l.search.includes("#"),Cc("#","search","hash",l)));let u=i===""||l.pathname==="",d=u?"/":l.pathname,m;if(d==null)m=n;else{let x=r.length-1;if(!a&&d.startsWith("..")){let b=d.split("/");for(;b[0]==="..";)b.shift(),x-=1;l.pathname=b.join("/")}m=x>=0?r[x]:"/"}let p=Jg(l,m),y=d&&d!=="/"&&d.endsWith("/"),g=(u||d===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(y||g)&&(p.pathname+="/"),p}const Tn=i=>i.join("/").replace(/\/\/+/g,"/"),Yg=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),Xg=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Zg=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function ey(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const Qf=["post","put","patch","delete"];new Set(Qf);const ty=["get",...Qf];new Set(ty);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xi(){return Xi=Object.assign?Object.assign.bind():function(i){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])}return i},Xi.apply(this,arguments)}const cu=j.createContext(null),ry=j.createContext(null),ss=j.createContext(null),Do=j.createContext(null),is=j.createContext({outlet:null,matches:[],isDataRoute:!1}),Yf=j.createContext(null);function ny(i,r){let{relative:n}=r===void 0?{}:r;ta()||mt(!1);let{basename:a,navigator:l}=j.useContext(ss),{hash:u,pathname:d,search:m}=Zf(i,{relative:n}),p=d;return a!=="/"&&(p=d==="/"?a:Tn([a,d])),l.createHref({pathname:p,search:m,hash:u})}function ta(){return j.useContext(Do)!=null}function as(){return ta()||mt(!1),j.useContext(Do).location}function Xf(i){j.useContext(ss).static||j.useLayoutEffect(i)}function Ir(){let{isDataRoute:i}=j.useContext(is);return i?gy():sy()}function sy(){ta()||mt(!1);let i=j.useContext(cu),{basename:r,future:n,navigator:a}=j.useContext(ss),{matches:l}=j.useContext(is),{pathname:u}=as(),d=JSON.stringify(Jf(l,n.v7_relativeSplatPath)),m=j.useRef(!1);return Xf(()=>{m.current=!0}),j.useCallback(function(y,g){if(g===void 0&&(g={}),!m.current)return;if(typeof y=="number"){a.go(y);return}let x=Kf(y,JSON.parse(d),u,g.relative==="path");i==null&&r!=="/"&&(x.pathname=x.pathname==="/"?r:Tn([r,x.pathname])),(g.replace?a.replace:a.push)(x,g.state,g)},[r,a,d,u,i])}function Zf(i,r){let{relative:n}=r===void 0?{}:r,{future:a}=j.useContext(ss),{matches:l}=j.useContext(is),{pathname:u}=as(),d=JSON.stringify(Jf(l,a.v7_relativeSplatPath));return j.useMemo(()=>Kf(i,JSON.parse(d),u,n==="path"),[i,d,u,n])}function iy(i,r){return ay(i,r)}function ay(i,r,n,a){ta()||mt(!1);let{navigator:l}=j.useContext(ss),{matches:u}=j.useContext(is),d=u[u.length-1],m=d?d.params:{};d&&d.pathname;let p=d?d.pathnameBase:"/";d&&d.route;let y=as(),g;if(r){var x;let k=typeof r=="string"?ti(r):r;p==="/"||(x=k.pathname)!=null&&x.startsWith(p)||mt(!1),g=k}else g=y;let b=g.pathname||"/",N=b;if(p!=="/"){let k=p.replace(/^\//,"").split("/");N="/"+b.replace(/^\//,"").split("/").slice(k.length).join("/")}let S=Ig(i,{pathname:N}),C=dy(S&&S.map(k=>Object.assign({},k,{params:Object.assign({},m,k.params),pathname:Tn([p,l.encodeLocation?l.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?p:Tn([p,l.encodeLocation?l.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),u,n,a);return r&&C?j.createElement(Do.Provider,{value:{location:Xi({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Cn.Pop}},C):C}function oy(){let i=my(),r=ey(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},r),n?j.createElement("pre",{style:l},n):null,null)}const ly=j.createElement(oy,null);class cy extends j.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){console.error("React Router caught the following error during render",r,n)}render(){return this.state.error!==void 0?j.createElement(is.Provider,{value:this.props.routeContext},j.createElement(Yf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uy(i){let{routeContext:r,match:n,children:a}=i,l=j.useContext(cu);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(is.Provider,{value:r},a)}function dy(i,r,n,a){var l;if(r===void 0&&(r=[]),n===void 0&&(n=null),a===void 0&&(a=null),i==null){var u;if(!n)return null;if(n.errors)i=n.matches;else if((u=a)!=null&&u.v7_partialHydration&&r.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let d=i,m=(l=n)==null?void 0:l.errors;if(m!=null){let g=d.findIndex(x=>x.route.id&&m?.[x.route.id]!==void 0);g>=0||mt(!1),d=d.slice(0,Math.min(d.length,g+1))}let p=!1,y=-1;if(n&&a&&a.v7_partialHydration)for(let g=0;g<d.length;g++){let x=d[g];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(y=g),x.route.id){let{loaderData:b,errors:N}=n,S=x.route.loader&&b[x.route.id]===void 0&&(!N||N[x.route.id]===void 0);if(x.route.lazy||S){p=!0,y>=0?d=d.slice(0,y+1):d=[d[0]];break}}}return d.reduceRight((g,x,b)=>{let N,S=!1,C=null,k=null;n&&(N=m&&x.route.id?m[x.route.id]:void 0,C=x.route.errorElement||ly,p&&(y<0&&b===0?(yy("route-fallback"),S=!0,k=null):y===b&&(S=!0,k=x.route.hydrateFallbackElement||null)));let q=r.concat(d.slice(0,b+1)),$=()=>{let L;return N?L=C:S?L=k:x.route.Component?L=j.createElement(x.route.Component,null):x.route.element?L=x.route.element:L=g,j.createElement(uy,{match:x,routeContext:{outlet:g,matches:q,isDataRoute:n!=null},children:L})};return n&&(x.route.ErrorBoundary||x.route.errorElement||b===0)?j.createElement(cy,{location:n.location,revalidation:n.revalidation,component:C,error:N,children:$(),routeContext:{outlet:null,matches:q,isDataRoute:!0}}):$()},null)}var ep=function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i}(ep||{}),tp=function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i}(tp||{});function hy(i){let r=j.useContext(cu);return r||mt(!1),r}function fy(i){let r=j.useContext(ry);return r||mt(!1),r}function py(i){let r=j.useContext(is);return r||mt(!1),r}function rp(i){let r=py(),n=r.matches[r.matches.length-1];return n.route.id||mt(!1),n.route.id}function my(){var i;let r=j.useContext(Yf),n=fy(),a=rp();return r!==void 0?r:(i=n.errors)==null?void 0:i[a]}function gy(){let{router:i}=hy(ep.UseNavigateStable),r=rp(tp.UseNavigateStable),n=j.useRef(!1);return Xf(()=>{n.current=!0}),j.useCallback(function(l,u){u===void 0&&(u={}),n.current&&(typeof l=="number"?i.navigate(l):i.navigate(l,Xi({fromRouteId:r},u)))},[i,r])}const af={};function yy(i,r,n){af[i]||(af[i]=!0)}function vy(i,r){i?.v7_startTransition,i?.v7_relativeSplatPath}function Ot(i){mt(!1)}function wy(i){let{basename:r="/",children:n=null,location:a,navigationType:l=Cn.Pop,navigator:u,static:d=!1,future:m}=i;ta()&&mt(!1);let p=r.replace(/^\/*/,"/"),y=j.useMemo(()=>({basename:p,navigator:u,static:d,future:Xi({v7_relativeSplatPath:!1},m)}),[p,m,u,d]);typeof a=="string"&&(a=ti(a));let{pathname:g="/",search:x="",hash:b="",state:N=null,key:S="default"}=a,C=j.useMemo(()=>{let k=lu(g,p);return k==null?null:{location:{pathname:k,search:x,hash:b,state:N,key:S},navigationType:l}},[p,g,x,b,N,S,l]);return C==null?null:j.createElement(ss.Provider,{value:y},j.createElement(Do.Provider,{children:n,value:C}))}function xy(i){let{children:r,location:n}=i;return iy(Wc(r),n)}new Promise(()=>{});function Wc(i,r){r===void 0&&(r=[]);let n=[];return j.Children.forEach(i,(a,l)=>{if(!j.isValidElement(a))return;let u=[...r,l];if(a.type===j.Fragment){n.push.apply(n,Wc(a.props.children,u));return}a.type!==Ot&&mt(!1),!a.props.index||!a.props.children||mt(!1);let d={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=Wc(a.props.children,u)),n.push(d)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $c(){return $c=Object.assign?Object.assign.bind():function(i){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])}return i},$c.apply(this,arguments)}function by(i,r){if(i==null)return{};var n={},a=Object.keys(i),l,u;for(u=0;u<a.length;u++)l=a[u],!(r.indexOf(l)>=0)&&(n[l]=i[l]);return n}function ky(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function Sy(i,r){return i.button===0&&(!r||r==="_self")&&!ky(i)}const _y=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jy="6";try{window.__reactRouterVersion=jy}catch{}const Ey="startTransition",of=Sg[Ey];function Ny(i){let{basename:r,children:n,future:a,window:l}=i,u=j.useRef();u.current==null&&(u.current=Pg({window:l,v5Compat:!0}));let d=u.current,[m,p]=j.useState({action:d.action,location:d.location}),{v7_startTransition:y}=a||{},g=j.useCallback(x=>{y&&of?of(()=>p(x)):p(x)},[p,y]);return j.useLayoutEffect(()=>d.listen(g),[d,g]),j.useEffect(()=>vy(a),[a]),j.createElement(wy,{basename:r,children:n,location:m.location,navigationType:m.action,navigator:d,future:a})}const Cy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ty=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sr=j.forwardRef(function(r,n){let{onClick:a,relative:l,reloadDocument:u,replace:d,state:m,target:p,to:y,preventScrollReset:g,viewTransition:x}=r,b=by(r,_y),{basename:N}=j.useContext(ss),S,C=!1;if(typeof y=="string"&&Ty.test(y)&&(S=y,Cy))try{let L=new URL(window.location.href),F=y.startsWith("//")?new URL(L.protocol+y):new URL(y),ee=lu(F.pathname,N);F.origin===L.origin&&ee!=null?y=ee+F.search+F.hash:C=!0}catch{}let k=ny(y,{relative:l}),q=Py(y,{replace:d,state:m,target:p,preventScrollReset:g,relative:l,viewTransition:x});function $(L){a&&a(L),L.defaultPrevented||q(L)}return j.createElement("a",$c({},b,{href:S||k,onClick:C||u?a:$,ref:n,target:p}))});var lf;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(lf||(lf={}));var cf;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(cf||(cf={}));function Py(i,r){let{target:n,replace:a,state:l,preventScrollReset:u,relative:d,viewTransition:m}=r===void 0?{}:r,p=Ir(),y=as(),g=Zf(i,{relative:d});return j.useCallback(x=>{if(Sy(x,n)){x.preventDefault();let b=a!==void 0?a:Eo(y)===Eo(g);p(i,{replace:b,state:l,preventScrollReset:u,relative:d,viewTransition:m})}},[y,p,g,a,l,n,i,u,d,m])}var Oy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ay=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Iy=(i,r)=>{const n=j.forwardRef(({color:a="currentColor",size:l=24,strokeWidth:u=2,absoluteStrokeWidth:d,children:m,...p},y)=>j.createElement("svg",{ref:y,...Oy,width:l,height:l,stroke:a,strokeWidth:d?Number(u)*24/Number(l):u,className:`lucide lucide-${Ay(i)}`,...p},[...r.map(([g,x])=>j.createElement(g,x)),...(Array.isArray(m)?m:[m])||[]]));return n.displayName=`${i}`,n};var Xe=Iy;const Ry=Xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Dy=Xe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Or=Xe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),zc=Xe("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),qc=Xe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Ly=Xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Js=Xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),kt=Xe("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]),My=Xe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),uf=Xe("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),Hr=Xe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Uy=Xe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Hc=Xe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Fy=Xe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),By=Xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Gi=Xe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),df=Xe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Vc=Xe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Wy=Xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),$y=Xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),hf=Xe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),So=Xe("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),Jr=Xe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),np=Xe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),_r=Xe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),_o=Xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Xs=Xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Zi=Xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ks=Xe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function zy(){return o.jsx("footer",{className:"fb-footer",children:o.jsxs("div",{className:"fb-footer-inner",children:[o.jsxs("div",{className:"fb-brand",children:[o.jsx("div",{className:"fb-logo",children:o.jsx(kt,{size:28,color:"#fff"})}),o.jsxs("div",{children:[o.jsx("h4",{children:"FitBuddy"}),o.jsx("p",{className:"muted",children:"Your friendly AI fitness companion"})]})]}),o.jsxs("div",{className:"fb-links",children:[o.jsxs("div",{className:"fb-col",children:[o.jsx("h5",{children:"Product"}),o.jsx(Sr,{to:"/questionnaire",children:"Get Started"}),o.jsx(Sr,{to:"/chat",children:"AI Coach"}),o.jsx(Sr,{to:"/shop",children:"Shop"})]}),o.jsxs("div",{className:"fb-col",children:[o.jsx("h5",{children:"Legal"}),o.jsx(Sr,{to:"/terms",children:"Terms of Service"}),o.jsx(Sr,{to:"/privacy",children:"Privacy Policy"})]}),o.jsxs("div",{className:"fb-col",children:[o.jsx("h5",{children:"Support"}),o.jsx("a",{href:"mailto:support@fitbuddy.example",children:"support@fitbuddy.example"}),o.jsx(Sr,{to:"/help",children:"Help Center"})]})]}),o.jsxs("div",{className:"fb-bottom",children:[o.jsxs("div",{children:[" ",new Date().getFullYear()," FitBuddy, LLC. All rights reserved."]}),o.jsx("div",{className:"socials muted",children:"Made with  for a healthier life"})]})]})})}const bn=[{text:"Set Goals",color:"primary",icon:o.jsx(_r,{size:20})},{text:"Track Progress",color:"blue",icon:o.jsx(Ks,{size:20})},{text:"Plan Workouts",color:"orange",icon:o.jsx(Or,{size:20})},{text:"Stay Motivated",color:"purple",icon:o.jsx(So,{size:20})},{text:"AI Powered",color:"pink",icon:o.jsx(Jr,{size:20})},{text:"Fun & Easy",color:"green",icon:o.jsx(np,{size:20})},{text:"Personalized",color:"blue2",icon:o.jsx(Xs,{size:20})}],qy=()=>{if(typeof document>"u")return!0;const i=document.referrer;if(console.log("[IntroBubbles] Referrer:",String(i).slice(0,200)),i)try{const r=new URL(i);if(console.log("[IntroBubbles] Referrer hostname:",r.hostname,"Current hostname:",window.location.hostname),r.hostname===window.location.hostname&&window.sessionStorage.getItem("fitbuddy-skip-intro")==="1")return console.log("[IntroBubbles] Skipping intro due to sessionStorage flag."),!1}catch(r){console.log("[IntroBubbles] Referrer parse error:",r)}return console.log("[IntroBubbles] Showing intro."),!0},Hy=({onFinish:i})=>{const[r,n]=j.useState(null),[a,l]=j.useState("wait"),[u,d]=j.useState(!1),[m,p]=j.useState(0);j.useEffect(()=>{const x=qy();console.log("[IntroBubbles] useEffect: shouldShowIntro() =",x),n(x)},[]);const y=j.useRef();if(!y.current){y.current={angle:Array.from({length:bn.length},()=>Math.random()*30-15),dist:Array.from({length:bn.length},()=>Math.random()*30-15),edge:Array.from({length:bn.length},()=>Math.floor(Math.random()*4)),edgePos:Array.from({length:bn.length},()=>Math.random()*100)};try{const x=JSON.stringify(y.current).slice(0,400);console.log("[IntroBubbles] Random seeds generated:",x)}catch{console.log("[IntroBubbles] Random seeds generated")}}const g=j.useRef(i);return j.useEffect(()=>{g.current=i},[i]),j.useEffect(()=>{if(r===null)return;if(!r){console.log("[IntroBubbles] Skipping intro, calling onFinish immediately."),g.current();return}const x=[];console.log("[IntroBubbles] Starting intro animation."),l("flyin"),p(0);for(let N=0;N<bn.length;N++)x.push(setTimeout(()=>{p(S=>S+1),console.log(`[IntroBubbles] Bubble ${N} now visible.`)},N*400));const b=bn.length*400+800;return x.push(setTimeout(()=>{l("meet"),console.log("[IntroBubbles] Phase changed: meet")},b)),x.push(setTimeout(()=>{l("orbit"),console.log("[IntroBubbles] Phase changed: orbit")},b+1e3)),x.push(setTimeout(()=>{l("fadeout"),console.log("[IntroBubbles] Phase changed: fadeout")},b+4e3)),x.push(setTimeout(()=>{console.log("[IntroBubbles] onFinish called. Hiding overlay."),d(!0),g.current()},b)),()=>{x.forEach(clearTimeout),console.log("[IntroBubbles] Cleaned up timers.")}},[r]),r===null||!r?null:(console.log("[IntroBubbles] Rendering. Phase:",a,"Hide:",u,"VisibleBubbles:",m),o.jsx("div",{className:`intro-bubbles-overlay${u?" hide":""} ${a==="fadeout"?"fade-white":""}`,children:o.jsxs("div",{className:"bubbles-centerpiece",children:[o.jsx("div",{className:"center-logo",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"72",height:"72",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-dumbbell",children:[o.jsx("path",{d:"m6.5 6.5 11 11"}),o.jsx("path",{d:"m21 21-1-1"}),o.jsx("path",{d:"m3 3 1 1"}),o.jsx("path",{d:"m18 22 4-4"}),o.jsx("path",{d:"m2 6 4-4"}),o.jsx("path",{d:"m3 10 7-7"}),o.jsx("path",{d:"m14 21 7-7"})]})}),o.jsx("div",{className:a==="orbit"?"bubbles-rotate":"",children:bn.map((x,b)=>{if(b>=m)return null;const N=y.current.edge[b],S=y.current.edgePos[b];let C=0,k=0;N===0?(C=S,k=-10):N===1?(C=110,k=S):N===2?(C=S,k=110):(C=-10,k=S);const q=360/bn.length*b,$=210;let L=`bubble bubble-color-${x.color}`;a==="flyin"&&(L+=" bubble-fly-in"),a==="orbit"&&(L+=" bubble-orbit"),a==="meet"&&(L+=" bubble-meet");try{const F=JSON.stringify({i:b,phase:a,bubbleClass:L,offX:C,offY:k,angle:q,distance:$}).slice(0,300);console.log(`[IntroBubbles] Rendering bubble ${b}:`,F)}catch{console.log(`[IntroBubbles] Rendering bubble ${b}`)}return o.jsxs("div",{className:L,"data-offscreen-x":C,"data-offscreen-y":k,"data-angle":q,"data-distance":$,children:[o.jsx("span",{className:"bubble-icon",children:x.icon}),x.text]},b)})})]})}))},Tc=["Set Goals","Track Progress","Plan Workouts","Stay Motivated","AI Powered","Fun & Easy","Personalized"],Qs=[];for(;Qs.length<3;){const i=Math.floor(Math.random()*7);Qs.includes(i)||Qs.push(i)}const Vy=()=>{const i=as(),r=Ir(),a=new URLSearchParams(i.search).get("intro"),l=a===null||a==="1",[u,d]=j.useState(!l),m=a!=="0",p=()=>{d(!0),i.search.includes("intro")&&r("/",{replace:!0})};return o.jsxs("div",{className:"welcome-page",children:[!u&&o.jsx(Hy,{onFinish:p}),u&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"hero-section",children:[o.jsxs("div",{className:"hero-content",children:[o.jsxs("div",{className:"logo-section"+(m?" bounce-in":""),children:[o.jsx("div",{className:"logo logo-centered",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-dumbbell",children:[o.jsx("path",{d:"m6.5 6.5 11 11"}),o.jsx("path",{d:"m21 21-1-1"}),o.jsx("path",{d:"m3 3 1 1"}),o.jsx("path",{d:"m18 22 4-4"}),o.jsx("path",{d:"m2 6 4-4"}),o.jsx("path",{d:"m3 10 7-7"}),o.jsx("path",{d:"m14 21 7-7"})]})}),o.jsx("h1",{className:"app-title",children:"Fitbuddy"}),o.jsx("p",{className:"app-subtitle",children:"Your AI-Powered Fitness Companion"})]}),o.jsxs("div",{className:"hero-text fade-in-up",children:[o.jsx("h2",{children:"Transform Your Fitness Journey"}),o.jsx("p",{children:"Get personalized workout plans powered by AI, track your progress, and achieve your fitness goals with fun, gamified experience."})]}),o.jsxs("div",{className:"cta-section fade-in-up",children:[o.jsx(Sr,{to:"/questionnaire",className:"btn btn-primary btn-large",children:"Start Your Journey"}),o.jsx("p",{className:"cta-subtitle",children:"Free  Personalized  AI-Powered"})]})]}),o.jsxs("div",{className:"hero-illustration",children:[o.jsxs("div",{className:"floating-card card-1",children:[o.jsx(_r,{size:24}),o.jsx("span",{children:Tc[Qs[0]]})]}),o.jsxs("div",{className:"floating-card card-2",children:[o.jsx(Or,{size:24}),o.jsx("span",{children:Tc[Qs[1]]})]}),o.jsxs("div",{className:"floating-card card-3",children:[o.jsx(Ks,{size:24}),o.jsx("span",{children:Tc[Qs[2]]})]})]})]}),o.jsx("div",{className:"features-section",children:o.jsxs("div",{className:"container",children:[o.jsx("h3",{className:"section-title",children:"Why Choose Fitbuddy?"}),o.jsxs("div",{className:"features-grid",children:[o.jsxs("div",{className:"feature-card card fade-in-up",children:[o.jsx("div",{className:"feature-icon",children:o.jsx(_r,{size:32})}),o.jsx("h4",{children:"AI-Powered Plans"}),o.jsx("p",{children:"Get personalized workout routines generated by advanced AI based on your goals, fitness level, and preferences."})]}),o.jsxs("div",{className:"feature-card card fade-in-up",children:[o.jsx("div",{className:"feature-icon",children:o.jsx(Or,{size:32})}),o.jsx("h4",{children:"Smart Calendar"}),o.jsx("p",{children:"Visualize your workout schedule with an intuitive calendar. Easily modify or request new workouts for any day."})]}),o.jsxs("div",{className:"feature-card card fade-in-up",children:[o.jsx("div",{className:"feature-icon",children:o.jsx(Ks,{size:32})}),o.jsx("h4",{children:"Adaptive Training"}),o.jsx("p",{children:"Your workouts evolve with you. The AI adjusts difficulty and variety based on your progress and feedback."})]})]})]})}),o.jsx("div",{className:"how-it-works-section",children:o.jsxs("div",{className:"container",children:[o.jsx("h3",{className:"section-title",children:"How It Works"}),o.jsxs("div",{className:"steps-container",children:[o.jsxs("div",{className:"step",children:[o.jsx("div",{className:"step-number",children:"1"}),o.jsxs("div",{className:"step-content",children:[o.jsx("h4",{children:"Tell Us About You"}),o.jsx("p",{children:"Answer a few questions about your fitness goals, experience level, and preferences."})]})]}),o.jsxs("div",{className:"step",children:[o.jsx("div",{className:"step-number",children:"2"}),o.jsxs("div",{className:"step-content",children:[o.jsx("h4",{children:"Get Your AI Plan"}),o.jsx("p",{children:"Our AI creates a personalized 30-day workout calendar tailored specifically for you."})]})]}),o.jsxs("div",{className:"step",children:[o.jsx("div",{className:"step-number",children:"3"}),o.jsxs("div",{className:"step-content",children:[o.jsx("h4",{children:"Train & Adapt"}),o.jsx("p",{children:"Follow your workouts, track progress, and request changes whenever you need them."})]})]})]})]})}),o.jsx("div",{className:"final-cta-section",children:o.jsx("div",{className:"container",children:o.jsxs("div",{className:"final-cta-content",children:[o.jsx("h3",{children:"Ready to Transform Your Fitness?"}),o.jsx("p",{children:"Join thousands of users who have already started their journey with Fatbuddy."}),o.jsx(Sr,{to:"/questionnaire",className:"btn btn-primary btn-large",children:"Get Started Now"})]})})})]}),o.jsx("div",{className:"welcome-footer-spacer",children:o.jsx(zy,{})})]})},Gy="AIzaSyCdu8joW4s3FN2ybROS9f0Vj26fsmNGSlQ",uu=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${Gy}`,Hi=async(i,r,n)=>{const a=new Date().toISOString().split("T")[0],l=r.startDate||a,u=`{
    "type": "object",
    "properties": {
      "id": { "type": "string" },
      "name": { "type": "string" },
      "description": { "type": "string" },
      "startDate": { "type": "string", "pattern": "\\d{4}-\\d{2}-\\d{2}" },
      "endDate": { "type": "string", "pattern": "\\d{4}-\\d{2}-\\d{2}" },
      "totalDays": { "type": "number" },
      "totalTime": { "type": "string" },
      "weeklyStructure": { "type": "array", "items": { "type": "string" } },
      "dailyWorkouts": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "date": { "type": "string", "pattern": "\\d{4}-\\d{2}-\\d{2}" },
            "type": { "type": "string" },
            "completed": { "type": "boolean" },
            "totalTime": { "type": "string" },
            "workouts": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "difficulty": { "type": "string" },
                  "duration": { "type": "string" },
                  "reps": { "anyOf": [{ "type": "number" }, { "type": "string" }] },
                  "muscleGroups": { "type": "array", "items": { "type": "string" } },
                  "equipment": { "type": "array", "items": { "type": "string" } },
                  "description": { "type": "string" },
                  "sets": { "type": "number" },
                  "rest": { "type": "string" }
                },
                "required": ["name","difficulty","duration","reps","muscleGroups"]
              }
            },
            "alternativeWorkouts": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "difficulty": { "type": "string" },
                  "duration": { "type": "string" },
                  "reps": { "anyOf": [{ "type": "number" }, { "type": "string" }] },
                  "muscleGroups": { "type": "array", "items": { "type": "string" } },
                  "equipment": { "type": "array", "items": { "type": "string" } },
                  "description": { "type": "string" }
                },
                "required": ["name","difficulty","duration","reps","muscleGroups"]
              }
            }
          },
          "required": ["date","type","workouts","alternativeWorkouts"]
        }
      }
    },
    "required": ["id","name","description","startDate","endDate","totalDays","totalTime","weeklyStructure","dailyWorkouts"]
  }`,d=JSON.stringify(n.map(k=>({id:k.id,title:k.title,subtitle:k.subtitle,type:k.type,options:k.options||[]})),null,2),m=JSON.stringify(r,null,2),y=`Please strictly adhere to the following JSON schema without adding any extra text, markdown, or code fences. Ensure all required fields are present and match the specified types. For the 'type' field in dailyWorkouts, use only one of the following values: 'strength', 'cardio', 'flexibility', 'rest', or 'mixed'.

Schema:
${u}

User Data:
${JSON.stringify(i,null,2)}

Questions Context:
${d}

Answers Context:
${m}

The current date is ${a}. The plan MUST start on ${l}.

Follow the provided weeklyStructure order as given by the schema.


  In dailyWorkouts, items must include keys in this order: date, type, completed, totalTime, workouts, alternativeWorkouts.

  Each workout entry must have ONLY these fields (and in the schema above these are required where noted): name, difficulty, duration, reps, muscleGroups, equipment, description. Additional optional fields allowed are: sets (number) and rest (string).

  Field formats (MUST be human-readable where indicated):
  - duration: a human-readable time string such as "5 minutes", "30 sec", "1 min per side" or "15-20 minutes".
  - reps: either a number (e.g. 10) or a short string like "AMRAP", "to failure", "8-12". If an exercise is time-based, reps can be an empty string or a descriptor.
  - muscleGroups: an array of short strings naming targeted body parts, e.g. ["chest","triceps","quads"]. Use common single-word names; avoid sentences.

  Ensure the JSON is syntactically valid: all arrays, objects, quotes, commas, brackets and braces must be closed. No trailing commas. Do not truncate any lists or objects.

Generate and return the JSON now.`,g=Math.random().toString(36).slice(2,9),x=new Date().toISOString(),b=`${y}

Variation-hint: please vary the workout details. RequestNonce:${g} RequestTime:${x}`,N=await fetch("/api/ai/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:b,userId:i?.id||null,meta:{nonce:g,ts:x}})});if(!N.ok)throw new Error("AI generation failed");const C=(await N.json()).text||"";return Jy(C,i)},Jy=(i,r)=>{console.log("Parsing AI response:",i);try{let n=i;const a=i.match(/```(?:json)?\s*([\s\S]*?)```/i);a&&a[1]?n=a[1].trim():n=i.replace(/```[a-zA-Z]*\n?|```/g,"").trim(),console.log("Extracted AI JSON:",n);const l=n.match(/{[\s\S]*}/);if(l&&(n=l[0],console.log("Trimmed to JSON block:",n)),n.startsWith("{")&&n.endsWith("}")){let u=JSON.parse(n);if(u.workout_plan&&(console.warn("parseAIResponse: unwrapping top-level workout_plan field"),u=u.workout_plan),!u.dailyWorkouts&&u.workouts&&(console.warn("parseAIResponse: mapping top-level 'workouts' to 'dailyWorkouts'"),u.dailyWorkouts=u.workouts),u.dailyWorkouts&&u.dailyWorkouts.length>0&&u.dailyWorkouts.every(m=>!m.date)&&u.startDate&&u.weeklyStructure){const m=new Date(u.startDate),p=u.weeklyStructure.map(b=>b.split(":")[0].trim()),y={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},g=p.map(b=>{const N=y[b]??new Date(u.startDate).getDay(),S=new Date(m);for(let C=0;C<7;C++){if(S.getDay()===N)return new Date(S);S.setDate(S.getDate()+1)}return new Date(m)}),x=p.length;u.dailyWorkouts.forEach((b,N)=>{const S=Math.floor(N/x),C=N%x,k=new Date(g[C]);k.setDate(k.getDate()+S*7),b.date=k.toISOString().split("T")[0],b.type=p[C].toLowerCase()}),console.warn("parseAIResponse: assigned fallback dates/types from weeklyStructure")}if(console.log("Parsed AI response JSON:",u),!u.dailyWorkouts)throw new Error("Parsed response missing dailyWorkouts");const d=u.dailyWorkouts.map(m=>({date:m.date,totalTime:m.totalTime||"",workouts:((m.workouts??m.exercises)||[]).map(p=>{if(typeof p=="string")return{name:p,description:p,difficulty:"beginner",muscleGroups:[],equipment:[],duration:"",reps:""};const y=p.name??p.exercise??"",g=p.description??p.instructions??"",x=p.duration??(p.durationSeconds?`${p.durationSeconds} sec`:""),b=p.sets,N=p.reps??"",S=p.rest??"";return{name:y,description:g,difficulty:p.difficulty||"beginner",muscleGroups:p.muscleGroups||[],equipment:p.equipment||[],duration:x,reps:N,...b!==void 0?{sets:b}:{},...S?{rest:S}:{}}}),alternativeWorkouts:((m.alternativeWorkouts??m.alternativeExercises)||[]).map(p=>{if(typeof p=="string")return{name:p,description:p,difficulty:"beginner",muscleGroups:[],equipment:[],duration:"",reps:""};const y=p.name??p.exercise??"",g=p.description??p.instructions??"",x=p.duration??(p.durationSeconds?`${p.durationSeconds} sec`:""),b=p.sets,N=p.reps??"",S=p.rest??"";return{name:y,description:g,difficulty:p.difficulty||"beginner",muscleGroups:p.muscleGroups||[],equipment:p.equipment||[],duration:x,reps:N,...b!==void 0?{sets:b}:{},...S?{rest:S}:{}}}),completed:!1,type:m.type||"mixed"}));return console.log("Mapped daily workouts:",d),{id:u.id||`plan-${Date.now()}`,name:u.name||`${r.username||"User"}'s Fitness Plan`,description:u.description||"A personalized workout plan.",startDate:u.startDate||new Date().toISOString().split("T")[0],endDate:u.endDate||new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],totalDays:u.totalDays||30,weeklyStructure:u.weeklyStructure||[],dailyWorkouts:d}}else throw new Error("Response is not in JSON format")}catch(n){throw console.error("Error parsing AI response:",n),console.error("Raw AI response:",i),n}},Pc=async(i,r,n,a,l,u,d)=>{const m=new Date().toISOString().split("T")[0],p=r.startDate||m,y=`{
    "type": "object",
    "properties": {
      "date": { "type": "string", "pattern": "\\d{4}-\\d{2}-\\d{2}" },
      "type": { "type": "string" },
      "totalTime": { "type": "string" },
      "workouts": { "type": "array", "items": { "type": "object" } },
      "alternativeWorkouts": { "type": "array", "items": { "type": "object" } }
    },
    "required": ["date","type","workouts","alternativeWorkouts"]
  }`,g=JSON.stringify(i,null,2),x=JSON.stringify(n.map($=>({id:$.id,title:$.title,type:$.type,options:$.options||[]})),null,2),b=JSON.stringify(r,null,2),N=JSON.stringify(u,null,2),S=JSON.stringify(d,null,2),C=`Here is the JSON schema for a DayWorkout:
${y}

Preferred start date: ${p}
User data:
${g}

User questionnaire schema and answers:
${x}
${b}

Existing plan workouts:
${N}
Current day old workout:
${S}

Current date: ${m}
Generate one DayWorkout JSON for ${a}, type '${l}', compatible with others. No wrappers, no markdown, pure JSON.`,k=`
IMPORTANT: return only the pure JSON object matching the DayWorkout schema, no markdown or code fences.`;let q=null;for(let $=1;$<=2;$++){const L=Math.random().toString(36).slice(2,9),F=new Date().toISOString(),ee=`${C}

Variation-hint: please vary the workout details and ordering where possible. RequestNonce:${L} RequestTime:${F}`,V=$===1?ee:ee+k;console.log(`generateWorkoutForDay: attempt ${$}, nonce=${L}, promptStart=`,V.slice(0,300));const fe=(await(await fetch(uu,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:V}]}]})})).json()).candidates?.[0]?.content?.parts?.[0]?.text||"";console.log("generateWorkoutForDay: received AI text=",fe);try{let K=fe.match(/```(?:json)?\s*([\s\S]*?)```/i)?.[1]?.trim()??fe.replace(/```[a-zA-Z]*\\n?|```/g,"").trim();const oe=K.match(/{[\s\S]*}/);return oe&&(K=oe[0]),console.log("generateWorkoutForDay: parsing cleaned=",K),JSON.parse(K)}catch(pe){if(console.warn(`generateWorkoutForDay: parse failed on attempt ${$}:`,pe),q=pe,$===2)throw q}}throw new Error("generateWorkoutForDay: unknown error")};async function Ky(i){console.log("Requesting AI response with prompt:",i.prompt);const n=await(await fetch(uu,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:i.prompt}]}]})})).json();console.log("Raw AI response:",n);const a=n.candidates?.[0];console.log("Candidate content:",a?.content),console.log("Candidate content.parts:",a?.content?.parts),console.log("Candidate content.parts[0].text:",a?.content?.parts?.[0]?.text);const l=a?.content?.parts?.[0]?.text||"";let u=l;const d=l.match(/```(?:json)?\n([\s\S]*?)```/);d&&d[1]&&(u=d[1].trim()),console.log("Cleaned AI JSON or text:",u);try{return JSON.parse(u)}catch{return console.warn("AI response is not valid JSON, returning raw text instead."),u}}async function Qy(i){const r=[i.prompt],n=i.localStorageContext;n?(n.questionnaire&&r.push(`

Local: fitbuddy_questionnaire_progress: ${JSON.stringify(n.questionnaire).slice(0,1200)}`),n.userData&&r.push(`

Local: fitbuddy_user_data: ${JSON.stringify(n.userData).slice(0,1200)}`),n.workoutPlan&&r.push(`

Local: fitbuddy_workout_plan: ${JSON.stringify(n.workoutPlan).slice(0,2e3)}`)):i.workoutPlan&&r.push(`

User workoutPlan (truncated): ${JSON.stringify(i.workoutPlan).slice(0,2e3)}`);const a=r.join(`
`);console.log("Requesting AI text response with prompt (trim):",a.slice(0,300));const m=(await(await fetch(uu,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:a}]}]})})).json()).candidates?.[0]?.content?.parts?.[0]?.text||"",p=m.match(/```(?:json)?\n([\s\S]*?)```/);return{text:p&&p[1]?p[1].trim():m.trim(),raw:m}}async function ra(i){const r=localStorage.getItem("fitbuddy_questionnaire_progress"),n=localStorage.getItem("fitbuddy_workout_plan"),a=localStorage.getItem("fitbuddy_assessment_data"),l=sessionStorage.getItem(`fitbuddy_chat_${i}`)||localStorage.getItem(`fitbuddy_chat_${i}`),u=sessionStorage.getItem("fitbuddy_user_data")||localStorage.getItem("fitbuddy_user_data");if(i)try{const d={userId:i};r!=null&&(d.fitbuddy_questionnaire_progress=r),n!=null&&(d.fitbuddy_workout_plan=n),a!=null&&(d.fitbuddy_assessment_data=a),l!=null&&(d.chat_history=l),u!=null&&(d.fitbuddy_user_data=u);try{const p=sessionStorage.getItem("fitbuddy_user_data")||localStorage.getItem("fitbuddy_user_data");if(p)try{const y=JSON.parse(p);if(y&&typeof y=="object"){const g={...y};g.token&&delete g.token,g.jwt&&delete g.jwt,d.fitbuddy_user_data=g,g.accepted_terms!==void 0&&(d.accepted_terms=g.accepted_terms),g.accepted_privacy!==void 0&&(d.accepted_privacy=g.accepted_privacy),g.chat_history!==void 0&&d.chat_history===void 0&&(d.chat_history=g.chat_history)}}catch{}}catch{}const m=await $e(()=>Promise.resolve().then(()=>On),void 0).then(p=>p.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}));await fetch("/api/userdata/save",m)}catch{}}function Yy(i){try{if(!i||typeof navigator>"u"||typeof navigator.sendBeacon!="function")return!1;const r=localStorage.getItem("fitbuddy_questionnaire_progress"),n=localStorage.getItem("fitbuddy_workout_plan"),a=localStorage.getItem("fitbuddy_assessment_data"),l={userId:i};r!=null&&(l.fitbuddy_questionnaire_progress=r),n!=null&&(l.fitbuddy_workout_plan=n),a!=null&&(l.fitbuddy_assessment_data=a);try{const m=sessionStorage.getItem("fitbuddy_user_data")||localStorage.getItem("fitbuddy_user_data");if(m)try{const p=JSON.parse(m);p&&typeof p=="object"&&(p.accepted_terms!==void 0&&(l.accepted_terms=p.accepted_terms),p.accepted_privacy!==void 0&&(l.accepted_privacy=p.accepted_privacy),p.chat_history!==void 0&&l.chat_history===void 0&&(l.chat_history=p.chat_history))}catch{}}catch{}const u="/api/userdata/save",d=new Blob([JSON.stringify(l)],{type:"application/json"});return navigator.sendBeacon(u,d)}catch{return!1}}async function rs(i){if(i)try{const r="/api/userdata/load";console.log("[cloudBackupService] restoreUserDataFromServer -> POSTing",r,"userId=",i);const n=await $e(()=>Promise.resolve().then(()=>On),void 0).then(p=>p.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:i})})),a=await fetch(r,n),l=await a.text();if(console.log("[cloudBackupService] restoreUserDataFromServer -> response status:",a.status,"ok:",a.ok),l&&l.length>0&&console.log("[cloudBackupService] restoreUserDataFromServer -> response snippet:",l.slice(0,1e3)),!a.ok)return;let u=null;try{u=l?JSON.parse(l):null}catch(p){console.warn("[cloudBackupService] restoreUserDataFromServer -> failed to parse JSON response:",p);return}const d=u?.stored??u?.payload??u;if(!d)return;const m=p=>{try{const y=d[p];if(y==null)return;const g=typeof y=="string"?y:JSON.stringify(y);if(p==="fitbuddy_user_data")try{sessionStorage.setItem(p,g)}catch{}else try{localStorage.setItem(p,g)}catch{}}catch{}};m("fitbuddy_questionnaire_progress"),m("fitbuddy_workout_plan"),m("fitbuddy_assessment_data");try{const p=d.chat_history??d.fitbuddy_chat??d.fitbuddy_chat_history;if(p!=null)try{const y=typeof p=="string"?p:JSON.stringify(p);try{sessionStorage.setItem(`fitbuddy_chat_${i}`,y)}catch{try{localStorage.setItem(`fitbuddy_chat_${i}`,y)}catch{}}}catch{}}catch{}console.log("[cloudBackupService] restoreUserDataFromServer -> wrote keys from payload:",Object.keys(d))}catch{}}async function du(i){if(!i)return!1;try{const r=`fitbuddy_chat_${i}`,n=localStorage.getItem(r),a=localStorage.getItem("fitbuddy_tos_accepted_v1"),l={userId:i};if(n!=null)try{l.chat_history=JSON.parse(n)}catch{l.chat_history=n}if(a!=null)try{l.fitbuddy_tos_accepted_v1=JSON.parse(a)}catch{l.fitbuddy_tos_accepted_v1=a}if(l.chat_history===void 0&&l.fitbuddy_tos_accepted_v1===void 0)return!0;const u=await $e(()=>Promise.resolve().then(()=>On),void 0).then(m=>m.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}));if(!(await fetch("/api/userdata/save",u)).ok)return!1;try{localStorage.removeItem(r)}catch{}try{localStorage.removeItem("fitbuddy_tos_accepted_v1")}catch{}return!0}catch{return!1}}const Ys=Object.freeze(Object.defineProperty({__proto__:null,backupAndDeleteSensitive:du,backupUserDataToServer:ra,beaconBackupUserData:Yy,restoreUserDataFromServer:rs},Symbol.toStringTag,{value:"Module"})),gt={QUESTIONNAIRE_PROGRESS:"fitbuddy_questionnaire_progress",USER_DATA:"fitbuddy_user_data",ASSESSMENT_DATA:"fitbuddy_assessment_data",WORKOUT_PLAN:"fitbuddy_workout_plan"},na={TOKEN:"fitbuddy_token"};function hu(i){if(!i)return null;try{let r=JSON.parse(i);if(typeof r=="string")try{r=JSON.parse(r),console.log("[localStorage] safeParseStored -> double-encoded JSON parsed")}catch{}return r}catch(r){return console.warn("[localStorage] safeParseStored -> parse failed:",r),null}}let es=null;const Xy=800;function Kr(){try{const i=sessionStorage.getItem(gt.USER_DATA),r=i&&JSON.parse(i).data?.id||null;if(!r)return;es&&clearTimeout(es),es=window.setTimeout(async()=>{es=null;try{await ra(r)}catch(n){console.warn("Auto backup failed:",n)}},Xy)}catch(i){console.warn("Failed to schedule backup:",i)}}const fu=i=>{try{localStorage.setItem(gt.ASSESSMENT_DATA,JSON.stringify({data:i,timestamp:Date.now()})),Kr()}catch(r){console.warn("Failed to save assessment data:",r)}},Gc=()=>{try{const i=localStorage.getItem(gt.ASSESSMENT_DATA);if(!i)return null;const r=hu(i);if(!r)return null;const{data:n,timestamp:a}=r;return console.log("[localStorage] loadAssessmentData -> found data, timestamp:",a),Date.now()-a>10080*60*1e3?(sp(),null):n}catch(i){return console.warn("Failed to load assessment data:",i),null}},sp=()=>{try{localStorage.removeItem(gt.ASSESSMENT_DATA),Kr()}catch(i){console.warn("Failed to clear assessment data:",i)}},jo=i=>{try{localStorage.setItem(gt.QUESTIONNAIRE_PROGRESS,JSON.stringify(i)),Kr()}catch(r){console.warn("Failed to save questionnaire progress:",r)}},hr=()=>{try{const i=localStorage.getItem(gt.QUESTIONNAIRE_PROGRESS);if(!i)return null;const r=hu(i);return r?Date.now()-r.timestamp>1440*60*1e3?(ri(),null):r:null}catch(i){return console.warn("Failed to load questionnaire progress:",i),null}},ri=()=>{try{localStorage.removeItem(gt.QUESTIONNAIRE_PROGRESS),Kr()}catch(i){console.warn("Failed to clear questionnaire progress:",i)}},jr=(i,r)=>{try{try{if((sessionStorage.getItem("fitbuddy_no_auto_restore")||localStorage.getItem("fitbuddy_no_auto_restore"))&&!(r&&r.forceSave))return}catch{}let n={};if(i&&typeof i=="object"&&("data"in i||"token"in i)){if(n.data=i.data||null,"token"in i&&i.token)try{sessionStorage.setItem(na.TOKEN,String(i.token))}catch{}}else n.data=i||null;const a={...n,timestamp:Date.now()};try{sessionStorage.setItem(gt.USER_DATA,JSON.stringify(a))}catch{}try{const l=new BroadcastChannel("fitbuddy");l.postMessage({type:"user-update",timestamp:Date.now()}),l.close()}catch{}(!r||!r.skipBackup)&&Kr();try{sessionStorage.removeItem("fitbuddy_no_auto_restore")}catch{}try{localStorage.removeItem("fitbuddy_no_auto_restore")}catch{}}catch(n){console.warn("Failed to save user data:",n)}},Ar=()=>{try{const i=sessionStorage.getItem(gt.USER_DATA);if(!i)return null;const{data:r,timestamp:n}=JSON.parse(i);return Date.now()-n>10080*60*1e3?(ni(),null):r}catch(i){return console.warn("Failed to load user data:",i),null}},ni=()=>{try{try{sessionStorage.removeItem(gt.USER_DATA)}catch{}try{sessionStorage.removeItem(na.TOKEN)}catch{}es&&(clearTimeout(es),es=null);try{const i=new BroadcastChannel("fitbuddy");i.postMessage({type:"user-clear",timestamp:Date.now()}),i.close()}catch{}}catch(i){console.warn("Failed to clear user data:",i)}},ip=i=>{try{if(!i)return;sessionStorage.setItem(na.TOKEN,String(i))}catch{}},No=()=>{try{const i=sessionStorage.getItem(na.TOKEN);return i||null}catch{return null}},pu=()=>{try{sessionStorage.removeItem(na.TOKEN)}catch{}},En=i=>{try{const a={data:(u=>u&&{id:u.id,name:u.name,description:u.description,startDate:typeof u.startDate=="string"?u.startDate:u.startDate?new Date(u.startDate).toISOString().split("T")[0]:void 0,endDate:typeof u.endDate=="string"?u.endDate:u.endDate?new Date(u.endDate).toISOString().split("T")[0]:void 0,totalDays:typeof u.totalDays=="number"?u.totalDays:Array.isArray(u.dailyWorkouts)?u.dailyWorkouts.filter(Boolean).length:void 0,totalTime:u.totalTime,weeklyStructure:Array.isArray(u.weeklyStructure)?u.weeklyStructure.slice():[],dailyWorkouts:Array.isArray(u.dailyWorkouts)?u.dailyWorkouts.filter(Boolean).map(m=>({date:typeof m?.date=="string"?m.date:m?.date?new Date(m.date).toISOString().split("T")[0]:"",type:m?.type,completed:!!m?.completed,totalTime:m?.totalTime||"",workouts:Array.isArray(m?.workouts)?m.workouts.filter(Boolean).map(p=>({name:p?.name??"",description:p?.description??"",difficulty:p?.difficulty??"beginner",duration:p?.duration??"",reps:p?.reps??"",muscleGroups:Array.isArray(p?.muscleGroups)?p.muscleGroups:p?.muscleGroups?[p.muscleGroups]:[],equipment:Array.isArray(p?.equipment)?p.equipment:p?.equipment?[p.equipment]:[],sets:typeof p?.sets=="number"?p.sets:void 0,rest:p?.rest||void 0})):[],alternativeWorkouts:Array.isArray(m?.alternativeWorkouts)?m.alternativeWorkouts.filter(Boolean).map(p=>({name:p?.name??"",description:p?.description??"",difficulty:p?.difficulty??"beginner",duration:p?.duration??"",reps:p?.reps??"",muscleGroups:Array.isArray(p?.muscleGroups)?p.muscleGroups:p?.muscleGroups?[p.muscleGroups]:[],equipment:Array.isArray(p?.equipment)?p.equipment:p?.equipment?[p.equipment]:[],sets:typeof p?.sets=="number"?p.sets:void 0,rest:p?.rest||void 0})):[]})):[]})(i),timestamp:Date.now()},l=JSON.stringify(a);localStorage.setItem(gt.WORKOUT_PLAN,l);try{const u=localStorage.getItem(gt.WORKOUT_PLAN);if(!u)throw new Error("Written value missing");JSON.parse(u)}catch(u){console.warn("Workout plan verification failed after save; removing corrupted key.",u);try{localStorage.removeItem(gt.WORKOUT_PLAN)}catch{}return}Kr()}catch(r){console.warn("Failed to save workout plan:",r)}},Zs=()=>{try{const i=localStorage.getItem(gt.WORKOUT_PLAN);if(!i)return null;console.log("[localStorage] loadWorkoutPlan -> raw length:",i.length);const r=hu(i);if(!r)return null;const{data:n,timestamp:a}=r;return Date.now()-a>720*60*60*1e3?(sa(),null):n}catch(i){return console.warn("Failed to load workout plan:",i),null}},sa=()=>{try{localStorage.removeItem(gt.WORKOUT_PLAN),Kr()}catch(i){console.warn("Failed to clear workout plan:",i)}},Zy=()=>{ri(),ni(),sa()},ev=(i,r)=>{try{const a=`fitbuddy_chat_${r?.userId||(()=>{try{const m=sessionStorage.getItem(gt.USER_DATA);return m&&JSON.parse(m).data?.id||null}catch{return null}})()||"anon"}`,l=sessionStorage.getItem(a)||localStorage.getItem(a);let u=[];if(l)try{u=JSON.parse(l),Array.isArray(u)||(u=[])}catch{u=[]}const d={role:i.role,text:i.text,ts:i.ts||Date.now()};u.push(d);try{sessionStorage.setItem(a,JSON.stringify(u))}catch{try{localStorage.setItem(a,JSON.stringify(u))}catch{}}try{const m=sessionStorage.getItem(gt.USER_DATA);if(m)try{const p=JSON.parse(m);p.chat_history=p.chat_history||[],p.chat_history.push(d);try{sessionStorage.setItem(gt.USER_DATA,JSON.stringify(p))}catch{}}catch{}}catch{}Kr()}catch(n){console.warn("appendChatMessage failed",n)}},tv=i=>{try{const r=sessionStorage.getItem(gt.USER_DATA);let n=r?JSON.parse(r):{data:null,timestamp:Date.now()};n.accepted_terms=i.accepted_terms??n.accepted_terms??null,n.accepted_privacy=i.accepted_privacy??n.accepted_privacy??null;try{sessionStorage.setItem(gt.USER_DATA,JSON.stringify(n))}catch{}Kr()}catch(r){console.warn("setAcceptanceFlags failed",r)}},zt=Object.freeze(Object.defineProperty({__proto__:null,appendChatMessage:ev,clearAllData:Zy,clearAssessmentData:sp,clearAuthToken:pu,clearQuestionnaireProgress:ri,clearUserData:ni,clearWorkoutPlan:sa,getAuthToken:No,loadAssessmentData:Gc,loadQuestionnaireProgress:hr,loadUserData:Ar,loadWorkoutPlan:Zs,saveAssessmentData:fu,saveAuthToken:ip,saveQuestionnaireProgress:jo,saveUserData:jr,saveWorkoutPlan:En,setAcceptanceFlags:tv},Symbol.toStringTag,{value:"Module"})),rv="https://corsproxy.io/?key=7cf03de1&url=https://script.google.com/macros/s/AKfycbwFDdT0QVaP2jY8t4N0048PfQW_rYxB4noFaG-nExO9MZ5h3DCuNLUPNg3-qntT01tg/exec?gid=0",kn=[{id:"age",title:"How old are you?",subtitle:"This helps us create age-appropriate workouts",type:"number",min:13,max:100,icon:o.jsx(Or,{size:32})},{id:"fitnessLevel",title:"What's your current fitness level?",subtitle:"Be honest - we'll adjust everything to match your abilities",type:"single",options:["Beginner - Just starting out","Intermediate - I work out sometimes","Advanced - I exercise regularly"],icon:o.jsx(kt,{size:32})},{id:"fitnessBackground",title:"Tell us about your fitness journey so far",subtitle:"Share any previous experience, challenges, or what's worked for you before",type:"textarea",icon:o.jsx(Hr,{size:32})},{id:"motivation",title:"What motivates you to start this fitness journey?",subtitle:"Understanding your 'why' helps us keep you motivated",type:"textarea",icon:o.jsx(_r,{size:32})},{id:"goals",title:"What are your fitness goals?",subtitle:"Select all that apply - we'll create a plan that covers everything",type:"multiple",options:["Lose weight","Build muscle","Improve endurance","Increase flexibility","General health","Sport-specific training","Stress relief","Better sleep","Improve posture","Boost confidence","Other"],icon:o.jsx(_r,{size:32})},{id:"specificGoals",title:"Can you be more specific about your main goal?",subtitle:"For example: 'Lose 20 pounds for my wedding' or 'Run a 5K without stopping'",type:"textarea",icon:o.jsx(_r,{size:32})},{id:"timeAvailable",title:"How much time can you dedicate daily?",subtitle:"We'll make sure every minute counts",type:"slider",min:15,max:120,step:15,icon:o.jsx(Js,{size:32})},{id:"startDate",title:"When would you like to start your workout plan?",subtitle:"Please enter your preferred start date (YYYY-MM-DD)",type:"text",icon:o.jsx(Or,{size:32})},{id:"exerciseFormat",title:"How do you prefer to track your exercises?",subtitle:"This helps us format your workout instructions perfectly for you",type:"single",options:["Time-based (e.g., 30 seconds)","Rep-based (e.g., 10 reps)","Mixed - both time and reps","Other"],icon:o.jsx(Js,{size:32})},{id:"planDuration",title:"How long do you want your workout plan to be?",subtitle:"We can create plans of different lengths to match your goals and commitment level",type:"single",options:["1 week (Mini)","2 weeks (Quick start)","1 month (Standard)","6 weeks (Build habits)","3 months (Transformation)","6 months (Lifestyle change)"],icon:o.jsx(Or,{size:32})},{id:"daysPerWeek",title:"How many days per week do you want to work out?",subtitle:"We'll plan rest days to help you recover",type:"single",options:["3 days","4 days","5 days","6 days","7 days","Other"],icon:o.jsx(Or,{size:32})},{id:"preferredTime",title:"When do you prefer to work out?",subtitle:"We can tailor workouts to your energy levels throughout the day",type:"single",options:["Early morning (5-8 AM)","Morning (8-11 AM)","Lunch time (11 AM-2 PM)","Afternoon (2-5 PM)","Evening (5-8 PM)","Night (8-11 PM)","Varies/Flexible","Other"],icon:o.jsx(Js,{size:32})},{id:"energyLevels",title:"How would you rate your current energy levels?",subtitle:"This helps us design workouts that match your vitality",type:"rating",min:1,max:10,icon:o.jsx(Hr,{size:32})},{id:"preferences",title:"What types of workouts do you enjoy?",subtitle:"Let's make fitness fun for you",type:"multiple",options:["Strength training","Cardio workouts","Yoga & stretching","HIIT workouts","Bodyweight exercises","Dance workouts","Outdoor activities","Swimming","Pilates","Martial arts","Team sports","Walking/Hiking","Other"],icon:o.jsx(Hr,{size:32})},{id:"dislikes",title:"Are there any exercises you want to avoid?",subtitle:"We'll make sure to exclude anything you don't enjoy or can't do",type:"textarea",icon:o.jsx(Hr,{size:32})},{id:"injuries",title:"Do you have any injuries or physical limitations?",subtitle:"This helps us create safe workouts tailored to your needs",type:"textarea",icon:o.jsx(Hr,{size:32})},{id:"equipment",title:"What equipment do you have access to?",subtitle:"We'll work with whatever you've got",type:"multiple",options:["No equipment (bodyweight only)","Dumbbells","Resistance bands","Yoga mat","Pull-up bar","Gym membership","Treadmill/bike","Kettlebells","Barbell","Medicine ball","Foam roller","Suspension trainer (TRX)","Other"],icon:o.jsx(kt,{size:32})},{id:"budget",title:"Are you interested in additional fitness resources?",subtitle:"We can suggest equipment or services within your budget",type:"single",options:["No budget for additional equipment","Small budget ($0-50)","Medium budget ($50-200)","Higher budget ($200+)","Already have everything I need"],icon:o.jsx(_r,{size:32})},{id:"lifestyle",title:"How would you describe your lifestyle?",subtitle:"This helps us understand how to fit fitness into your routine",type:"single",options:["Very sedentary (desk job, little movement)","Mostly sedentary with some walking","Moderately active (some daily movement)","Active (regular movement throughout day)","Very active (physical job or lots of movement)"],icon:o.jsx(Xs,{size:32})},{id:"sleepQuality",title:"How well do you sleep?",subtitle:"Sleep affects recovery and workout performance",type:"rating",min:1,max:10,icon:o.jsx(Hr,{size:32})},{id:"stressLevel",title:"What's your current stress level?",subtitle:"We can include stress-relief exercises in your plan",type:"rating",min:1,max:10,icon:o.jsx(Hr,{size:32})},{id:"socialPreference",title:"Do you prefer working out alone or with others?",subtitle:"This helps us suggest the right type of workout environment",type:"single",options:["Definitely alone","Mostly alone","No preference","Mostly with others","Definitely with others"],icon:o.jsx(Xs,{size:32})},{id:"progressTracking",title:"How do you like to track your progress?",subtitle:"We can suggest the best methods for you",type:"multiple",options:["Weight/measurements","Progress photos","Workout logs","Fitness apps","Wearable devices","How I feel","Performance improvements","I don't like tracking","Other"],icon:o.jsx(_r,{size:32})},{id:"concerns",title:"Any questions, concerns, or special requests?",subtitle:"Share anything else that would help us create the perfect plan for you - dietary restrictions, work schedule, family commitments, past injuries, fears, or anything else on your mind",type:"textarea",icon:o.jsx(Hr,{size:32})}],nv=({onRegenerate:i,onEditResponses:r})=>o.jsx("div",{className:"menu-screen",children:o.jsxs("div",{className:"menu-container menu-container--hero",children:[o.jsxs("div",{className:"menu-hero",children:[o.jsx("div",{className:"menu-hero-icon",children:o.jsx(kt,{size:48})}),o.jsx("h1",{className:"menu-header",children:"Assessment Complete"}),o.jsx("p",{className:"menu-subtitle",children:"Nice work  we've saved your answers and can generate a refreshed plan anytime."})]}),o.jsxs("div",{className:"menu-actions",children:[o.jsxs("button",{className:"btn btn-primary menu-btn menu-btn--large",onClick:()=>i(),children:[o.jsx(Gi,{size:18}),o.jsx("span",{children:"Regenerate Plan"})]}),o.jsxs("button",{className:"btn btn-outline menu-btn menu-btn--alt",onClick:()=>r(),children:[o.jsx(Xs,{size:18}),o.jsx("span",{children:"Edit Responses"})]})]}),o.jsx("div",{className:"menu-footer",children:o.jsx("small",{className:"menu-note",children:"Tip: Regenerating will create a fresh plan based on your current answers  your previous plan is saved in your profile."})})]})}),sv=()=>o.jsx("div",{className:"questionnaire-page",children:o.jsx("div",{className:"questionnaire-container",children:o.jsxs("div",{className:"followup-loading-content",children:[o.jsx("div",{className:"spinner"}),o.jsx("h2",{className:"loading-title",children:"Generating Follow-Up Questions"}),o.jsx("p",{className:"loading-subtitle",children:"Hang tight while we personalize your questionnaire..."}),o.jsx("p",{className:"ai-disclaimer",children:"Disclaimer: These follow-up questions are AI-generated and may not be perfect."})]})})}),iv=({onRetry:i})=>o.jsx("div",{className:"questionnaire-page",children:o.jsx("div",{className:"questionnaire-container error-screen",children:o.jsxs("div",{className:"error-content",children:[o.jsx("h2",{className:"error-title",children:"Oops! Something went wrong."}),o.jsx("p",{className:"error-message",children:"We couldn't generate your plan. Please try again."}),o.jsx("button",{className:"btn error-btn",onClick:i,children:"Retry"})]})})}),av=({onComplete:i})=>{const r=async(I,U)=>{try{console.log("Preparing data to send to Google Sheet webhook...");const ye=Object.entries(I).map(([Se,Ce],Te)=>{const Re=U.find(rt=>rt.id===Se);return{questionOrder:Te+1,questionType:Re?.aiGenerated?"AI":"Base",question:Re?.title||Se,answer:Array.isArray(Ce)?Ce.join("; "):String(Ce)}}),je={timestamp:new Date().toISOString(),rows:ye};console.log("Sending POST request to Google Sheet webhook with payload:",je);const xe=await fetch(rv,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)});if(!xe.ok)throw new Error(`Failed with status ${xe.status}`);console.log("Data successfully sent to Google Sheet:",await xe.json())}catch(ye){console.error("Failed to send to Google Sheet:",ye)}},[n,a]=j.useState(0),[l,u]=j.useState({}),[d,m]=j.useState({}),[p,y]=j.useState(kn),[g,x]=j.useState(!1),[b,N]=j.useState(!1),S=5,[C,k]=j.useState(!1),[q,$]=j.useState(!1),[L,F]=j.useState(null),[ee,V]=j.useState(!1),[W,te]=j.useState(null),[fe,pe]=j.useState(null),K=Ir(),[oe,ne]=j.useState(!1);rr.useEffect(()=>{const I=()=>{document.visibilityState==="visible"&&ne(!0)};return document.addEventListener("visibilitychange",I),()=>document.removeEventListener("visibilitychange",I)},[]);const G=(I=!1)=>{if(oe&&!I){ne(!1),console.log("Skipped automatic navigation to /loading due to recent tab return");return}K("/loading")},[ce,he]=j.useState(!1),B=p[n],z=kn.length+S,ae=(n+1)/z*100;j.useEffect(()=>{let I=!0;return(async()=>{try{try{if(localStorage.getItem("fitbuddy_no_auto_restore")||sessionStorage.getItem("fitbuddy_no_auto_restore"))return}catch{}const ye=hr(),je=Zs();if(ye||je)return;const xe=Ar();if(!xe||!xe.id||(await rs(xe.id),!I))return;const Se=Gc();Se&&u(Te=>({...Te||{},...Se||{}}));const Ce=hr();Ce&&(y(Ce.questionsList||p),u(Ce.answers||{}),m(Ce.customInputs||{}),a(Ce.currentQuestion||0),N(!0),Ce.completed&&(k(!0),$(!0))),F(xe)}catch(ye){console.warn("Failed to restore server data in Questionnaire:",ye)}})(),()=>{I=!1}},[]);const E=rr.useRef(null);rr.useEffect(()=>{E.current&&E.current.style.setProperty("--progress-width",`${ae}%`)},[ae]),j.useEffect(()=>{const I=hr();if(I){if(I.questionsList){const U=I.questionsList.map(ye=>({...ye,icon:O(ye.iconType||"")}));y(U),U.length>kn.length&&x(!0)}if(I.completed){k(!0),$(!0),u(I.answers);return}a(I.currentQuestion),u(I.answers),m(I.customInputs||{}),N(!0)}},[]),j.useEffect(()=>{if(b||Object.keys(l).length>0){const I=p.map(({icon:U,...ye})=>ye);jo({currentQuestion:n,answers:l,customInputs:d,completed:C,timestamp:Date.now(),userData:L,questionsList:I})}},[n,l,d,b,C,p]);const w=Object.keys(l).length>=23&&!g,O=I=>{switch(I){case"Target":case"target":return o.jsx(_r,{size:32});case"Clock":case"clock":return o.jsx(Js,{size:32});case"Dumbbell":case"dumbbell":case"equipment":return o.jsx(kt,{size:32});case"Heart":case"heart":case"heartRate":return o.jsx(Hr,{size:32});case"Calendar":case"calendar":return o.jsx(Or,{size:32});case"User":case"user":return o.jsx(Xs,{size:32});case"Star":case"star":return o.jsx(np,{size:32});default:return o.jsx(_r,{size:32})}},J=async(I=!1)=>{if(!I&&Object.keys(l).length<23)return console.log("[AI-FOLLOWUP] Not enough answers for follow-up. answers.length:",Object.keys(l).length),!1;V(!0),te(null);try{const U={...l};Object.keys(d).forEach(Se=>{if(d[Se]){const Ce=U[Se];if(typeof Ce=="string"&&Ce==="Other")U[Se]=d[Se];else if(Array.isArray(Ce)&&Ce.includes("Other")){const Te=Ce.filter(Re=>Re!=="Other");Te.push(d[Se]),U[Se]=Te}}});const ye={questions:p.slice(0,23).map(Se=>({id:Se.id,title:Se.title})),answers:U},je=`Based on the following user questions and responses, generate exactly 5 additional follow-up questions in JSON array format. Only return valid JSON; no extra text. Each object should have id, title, subtitle, type (single, multiple, textarea (for written responses), rating, slider, number), options, iconType, aiGenerated:true. Context: ${JSON.stringify(ye)}`;console.log("[AI-FOLLOWUP] Prompt:",je);const xe=await Ky({prompt:je});if(console.log("[AI-FOLLOWUP] Received AI response:",xe),Array.isArray(xe)){const Se=xe.map((Ce,Te)=>(console.log(`[AI-FOLLOWUP] Generated Q${Te+1}:`,Ce),{...Ce,icon:O(Ce.iconType||"")}));return y(Ce=>{const Te=[...Ce,...Se];return console.log("[AI-FOLLOWUP] allQuestions after append:",Te),setTimeout(()=>{try{n===kn.length-1&&a(kn.length)}catch{}},0),Te}),x(!0),console.log("[AI-FOLLOWUP] Follow-up questions appended and flag set."),!0}else console.error("[AI-FOLLOWUP] AI response is not an array:",xe),te("Invalid AI response format")}catch(U){console.error("[AI-FOLLOWUP] Error fetching follow-up questions:",U),te("Failed to fetch follow-up questions. Please try again.")}finally{V(!1),console.log("[AI-FOLLOWUP] Done loading follow-up questions.")}return!1};j.useEffect(()=>{w&&J()},[w]);const Z=I=>{if(B.id==="startDate"){const U=new Date().toISOString().split("T")[0];I&&I<U?pe("Start date cannot be in the past"):pe(null)}u(U=>({...U,[B.id]:I}))},ie=async()=>{if(console.log("[NAV] handleNext called. currentQuestion:",n,"allQuestions.length:",p.length),n<p.length-1)n===22&&console.log("[NAV] About to answer 23rd question. Next click will trigger AI follow-up logic."),a(I=>{const U=I+1;return console.log("[NAV] Advancing to question index:",U),U});else{if(!g&&n===kn.length-1){console.log("[NAV] At last base question; generating follow-ups instead of final plan.");const I=await J(!0);a(I?kn.length:U=>Math.min(p.length-1,U+1));return}if(ce){console.log("[PLAN] Generation already in progress, ignoring duplicate request");return}he(!0),G(!0),te(null),G();try{r(l,p);const I={...l};Object.keys(d).forEach(xe=>{if(d[xe]){const Se=I[xe];if(typeof Se=="string"&&Se==="Other")I[xe]=d[xe];else if(Array.isArray(Se)&&Se.includes("Other")){const Ce=Se.filter(Te=>Te!=="Other");Ce.push(d[xe]),I[xe]=Ce}}});const U={username:I.username||"",age:I.age,fitnessLevel:I.fitnessLevel?.split(" -")[0].toLowerCase(),fitnessBackground:I.fitnessBackground,motivation:I.motivation,goals:I.goals||[],specificGoals:I.specificGoals,timeAvailable:I.timeAvailable,exerciseFormat:I.exerciseFormat,planDuration:I.planDuration,daysPerWeek:I.daysPerWeek,preferredTime:I.preferredTime,energyLevels:I.energyLevels,preferences:I.preferences||[],dislikes:I.dislikes,injuries:I.injuries,equipment:I.equipment||[],budget:I.budget,lifestyle:I.lifestyle,sleepQuality:I.sleepQuality,stressLevel:I.stressLevel,socialPreference:I.socialPreference,progressTracking:I.progressTracking,concerns:I.concerns};F(U);let ye;const je=2;for(let xe=1;xe<=je+1;xe++)try{console.log(`[PLAN] Generating workout plan, attempt ${xe}`);const Se=(I.planDuration||"").toString().toLowerCase(),Te=(Re=>Re.includes("1 week")?1:Re.includes("2 week")?2:Re.includes("6 week")?6:Re.includes("1 month")?4:Re.includes("3 month")?12:Re.includes("6 month")?24:2)(Se);if(Te<=1)ye=await Hi(U,I,p);else{const Re=I.startDate||new Date().toISOString().split("T")[0],rt=[];let at=new Date(Re);for(let _t=0;_t<Te;_t++){const Qr={...I,startDate:at.toISOString().split("T")[0],planDuration:"1 week (part)"};try{const nr=await Hi(U,Qr,p);rt.push(nr),at.setDate(at.getDate()+7)}catch(nr){throw console.warn("Week generation failed for week",_t,nr),nr}}const ht=[];let At="",St="",fr="",It="",Rt=[];rt.forEach(_t=>{fr||(fr=_t.startDate),It=_t.endDate||It,At=At||_t.name,St=St||_t.description,Array.isArray(_t.weeklyStructure)&&Rt.length===0&&(Rt=_t.weeklyStructure),Array.isArray(_t.dailyWorkouts)&&ht.push(..._t.dailyWorkouts)}),ye={id:`merged-plan-${Date.now()}`,name:At||`${U.username||"User"}'s Plan`,description:St||"Merged weekly plan",startDate:fr||Re,endDate:It||ht[ht.length-1]?.date||Re,totalDays:ht.length,weeklyStructure:Rt,dailyWorkouts:ht}}console.log(`[PLAN] Workout plan generated on attempt ${xe}`);break}catch(Se){console.error(`[PLAN] Attempt ${xe} failed:`,Se),xe===je+1&&te("Failed to generate workout plan. Please try again.")}if(ye){console.log("[PLAN] Plan complete, calling onComplete."),k(!0),$(!0);try{const xe=p.map(({icon:Se,...Ce})=>Ce);jo({currentQuestion:n,answers:l,customInputs:d,completed:!0,timestamp:Date.now(),userData:U,questionsList:xe})}catch(xe){console.warn("Failed to save completed questionnaire progress:",xe)}try{const xe=Ar();if(xe){const Se={...U,...xe};i(Se,ye)}else{const{id:Se,token:Ce,access_token:Te,jwt:Re,sub:rt,...at}=U||{};i(at,ye)}}catch{const{id:Se,token:Ce,access_token:Te,jwt:Re,sub:rt,...at}=U||{};i(at,ye)}}}catch(I){console.error("[PLAN] Error generating plan:",I),te("Failed to generate workout plan. Please try again.")}finally{console.log("[PLAN] Done loading plan."),he(!1)}}},ue=()=>{n>0?a(I=>I-1):K("/")},se=()=>{const I=l[B.id];return B.type==="multiple"?I&&I.length>0:B.type==="textarea"?I&&I.trim().length>0:B.type==="rating"?I!==void 0&&I>0:I!==void 0&&I!==""},de=async()=>{if(se()){ie();return}if(n===kn.length-1&&!g){await J(!0),a(je=>Math.min(p.length-1,je+1));return}const U=n===z-1,ye=g&&n===p.length-1;if(U||ye){ie();return}a(je=>Math.min(p.length-1,je+1))},_e=()=>{const I=l[B.id];switch(B.type){case"text":if(B.id==="startDate"){const U=new Date().toISOString().split("T")[0];return o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"date",className:"input question-input",min:U,value:I||"",onChange:ye=>Z(ye.target.value),onKeyDown:ye=>ye.key==="Enter"&&!fe&&se()&&ie(),"aria-label":B.title}),fe&&o.jsx("div",{className:"error-message",role:"alert",children:fe})]})}return o.jsx("input",{type:"text",className:"input question-input",placeholder:"Enter your name",value:I||"",onChange:U=>Z(U.target.value),onKeyDown:U=>U.key==="Enter"&&se()&&ie(),"aria-label":B.title});case"number":return o.jsx("input",{type:"number",className:"input question-input",placeholder:"Enter your age",min:B.min,max:B.max,value:I||"",onChange:U=>Z(parseInt(U.target.value)),onKeyDown:U=>U.key==="Enter"&&se()&&ie(),"aria-label":B.title});case"textarea":return o.jsx("textarea",{className:"input question-textarea",placeholder:"Share your thoughts...",rows:4,value:I||"",onChange:U=>Z(U.target.value),"aria-label":B.title});case"rating":return o.jsxs("div",{className:"rating-container",children:[o.jsx("div",{className:"rating-scale",children:Array.from({length:B.max||10},(U,ye)=>ye+1).map(U=>o.jsx("button",{className:`rating-button ${I===U?"selected":""}`,onClick:()=>Z(U),"aria-label":`Rating ${U}`,children:U},U))}),o.jsxs("div",{className:"rating-labels",children:[o.jsx("span",{children:"Poor"}),o.jsx("span",{children:"Excellent"})]}),I&&o.jsxs("div",{className:"rating-value",children:["You rated: ",I,"/10"]})]});case"slider":return o.jsxs("div",{className:"slider-container",children:[o.jsx("input",{type:"range",className:"slider",min:B.min,max:B.max,step:B.step,value:I||B.min,onChange:U=>Z(parseInt(U.target.value)),"aria-label":B.title}),o.jsxs("div",{className:"slider-value",children:[I||B.min," minutes"]})]});case"single":return o.jsxs("div",{className:"options-container",children:[o.jsx("div",{className:"options-grid",children:B.options?.map((U,ye)=>o.jsx("button",{className:`option-button ${I===U?"selected":""}`,onClick:()=>Z(U),"aria-label":U,children:U},ye))}),I==="Other"&&o.jsx("div",{className:"custom-input-container",children:o.jsx("input",{type:"text",className:"input custom-input",placeholder:"Please specify...",value:d[B.id]||"",onChange:U=>m(ye=>({...ye,[B.id]:U.target.value}))})})]});case"multiple":return o.jsxs("div",{className:"options-container",children:[o.jsx("div",{className:"options-grid",children:B.options?.map((U,ye)=>o.jsx("button",{className:`option-button ${I&&I.includes(U)?"selected":""}`,onClick:()=>{const je=I||[],xe=je.includes(U)?je.filter(Se=>Se!==U):[...je,U];Z(xe)},"aria-label":U,children:U},ye))}),I&&I.includes("Other")&&o.jsx("div",{className:"custom-input-container",children:o.jsx("input",{type:"text",className:"input custom-input",placeholder:"Please specify...",value:d[B.id]||"",onChange:U=>m(ye=>({...ye,[B.id]:U.target.value}))})})]});default:return o.jsx("input",{type:"text",className:"input question-input",placeholder:"Enter your response",value:I||"",onChange:U=>Z(U.target.value),onKeyDown:U=>U.key==="Enter"&&se()&&ie(),"aria-label":B.title})}},Ae=()=>{ri(),a(0),u({}),m({}),k(!1),$(!1)},Be=()=>{console.log("Edit Responses button clicked"),$(!1),k(!1),a(0),Ze(!1);const I=hr();I?.answers?(u(I.answers),console.log("Previous answers loaded into state:",I.answers)):console.warn("No previous answers found to populate."),console.log("Questionnaire reset to allow editing of responses")},[Ge,Ze]=j.useState(!1);j.useEffect(()=>{const I=hr();if(console.log("Loaded questionnaire progress:",I),I?.completed){if(Ze(!0),I.userData&&(F(I.userData),console.log("Restored userData:",I.userData)),I.answers&&(u(I.answers),console.log("Restored answers:",I.answers)),I.customInputs&&(m(I.customInputs),console.log("Restored customInputs:",I.customInputs)),I.questionsList){const U=I.questionsList.map(ye=>({...ye,icon:O(ye.iconType||"")}));y(U),console.log("Restored questionsList:",U)}}else console.warn("No completed progress found in local storage.")},[]);const Ie=async()=>{console.log("handleRegenerate invoked"),console.log("State before regeneration  userData:",L,"answers:",l,"allQuestions length:",p.length);let I=L,U=l,ye=p;if(!I){console.log("No userData in state, attempting to load from localStorage");const je=hr();if(console.log("loadQuestionnaireProgress returned:",je),je?.userData){if(console.log("Found saved.userData:",je.userData),I=je.userData,U=je.answers,u(U),console.log("State after restoring answers:",U),je.customInputs&&m(je.customInputs),je.questionsList){console.log("Restoring questionsList of length:",je.questionsList.length);const xe=je.questionsList.map(Se=>({...Se,icon:O(Se.iconType||"")}));y(xe),console.log("State after restoring allQuestions length:",xe.length),ye=xe}F(I),console.log("State after restoring userData:",I),console.log("Regenerate: restored state from localStorage",je)}else{const xe=Gc();console.log("loadAssessmentData returned:",xe),xe&&(I=xe,F(I))}}if(!I&&U){console.log("Reconstructing userData from currentAnswers");const je={username:U.username||"",age:U.age,fitnessLevel:typeof U.fitnessLevel=="string"?U.fitnessLevel.split(" -")[0].toLowerCase():"",fitnessBackground:U.fitnessBackground,motivation:U.motivation,goals:U.goals||[],specificGoals:U.specificGoals,timeAvailable:U.timeAvailable,exerciseFormat:U.exerciseFormat,planDuration:U.planDuration,daysPerWeek:U.daysPerWeek,preferredTime:U.preferredTime,energyLevels:U.energyLevels,preferences:U.preferences||[],dislikes:U.dislikes,injuries:U.injuries,equipment:U.equipment||[],budget:U.budget,lifestyle:U.lifestyle,sleepQuality:U.sleepQuality,stressLevel:U.stressLevel,socialPreference:U.socialPreference,progressTracking:U.progressTracking,concerns:U.concerns};I=je,F(I),console.log("Reconstructed userData:",je),fu(I)}if(console.log("After restoration  currentUser:",I),!I){console.warn("No userData available to regenerate plan. Exiting handleRegenerate");return}console.log("Regenerate Plan clicked with userData:",I),te(null);try{G();const je=(U.planDuration||"").toString().toLowerCase(),Se=(Te=>Te.includes("1 week")?1:Te.includes("2 week")?2:Te.includes("6 week")?6:Te.includes("1 month")?4:Te.includes("3 month")?12:Te.includes("6 month")?24:2)(je);let Ce;if(Se<=1)Ce=await Hi(I,U,ye);else{const Te=U.startDate||new Date().toISOString().split("T")[0],Re=[];let rt=new Date(Te);for(let ht=0;ht<Se;ht++){const At={...U,startDate:rt.toISOString().split("T")[0],planDuration:"1 week (part)"},St=await Hi(I,At,ye);Re.push(St),rt.setDate(rt.getDate()+7)}const at=[];Re.forEach(ht=>{Array.isArray(ht.dailyWorkouts)&&at.push(...ht.dailyWorkouts)}),Ce={id:`merged-plan-${Date.now()}`,name:Re[0]?.name||"Merged Plan",description:Re[0]?.description||"",startDate:Re[0]?.startDate||Te,endDate:Re[Re.length-1]?.endDate||at[at.length-1]?.date||Te,totalDays:at.length,weeklyStructure:Re[0]?.weeklyStructure||[],dailyWorkouts:at}}console.log("New plan generated:",Ce),k(!0),$(!0);try{const Te=ye.map(({icon:Re,...rt})=>rt);jo({currentQuestion:0,answers:U,customInputs:{},completed:!0,timestamp:Date.now(),userData:I,questionsList:Te})}catch(Te){console.warn("Failed to save completed progress on regenerate:",Te)}try{const Te=Ar();if(Te){const Re={...I,...Te};i(Re,Ce)}else{const{id:Re,token:rt,access_token:at,jwt:ht,sub:At,...St}=I||{};i(St,Ce)}}catch{const{id:Re,token:rt,access_token:at,jwt:ht,sub:At,...St}=I||{};i(St,Ce)}K("/calendar")}catch(je){console.error("Error regenerating plan:",je),te("Failed to generate a new plan. Please try again.")}finally{}};return j.useEffect(()=>{C&&!g&&J()},[C,g]),ee?o.jsx(sv,{}):W?o.jsx(iv,{onRetry:Ie}):Ge?o.jsx(nv,{onRegenerate:Ie,onEditResponses:Be}):C&&q?o.jsxs("div",{className:"completion-screen",children:[o.jsx("h2",{children:"Questionnaire Completed"}),o.jsx("p",{children:"Your responses have been saved. What would you like to do?"}),o.jsx("button",{className:"btn",onClick:Be,children:"Edit Responses"}),o.jsx("button",{className:"btn btn-secondary",onClick:Ae,children:"Start Over"})]}):o.jsx("div",{className:"questionnaire-page",children:o.jsxs("div",{className:"questionnaire-container",children:[o.jsxs("div",{className:"questionnaire-header",children:["          ",o.jsx("button",{className:"back-button",onClick:ue,"aria-label":"Go back to previous question",children:o.jsx(qc,{size:24})}),"          ",o.jsxs("div",{className:"progress-container",ref:E,children:[o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:"progress-fill"})}),o.jsxs("span",{className:"progress-text",children:[n+1," of ",z]})]}),"        "]}),b&&n===0&&o.jsx("div",{className:"restoration-notification",children:o.jsxs("div",{className:"notification-content",children:[o.jsx(Gi,{size:20}),o.jsx("span",{children:"Your previous progress has been restored!"}),o.jsx("button",{className:"restart-button",onClick:Ae,children:"Start Fresh"})]})}),o.jsxs("div",{className:"question-container card fade-in-up",children:[o.jsx("div",{className:"question-icon",children:B.icon}),B.aiGenerated&&o.jsx("div",{className:"ai-badge",children:" AI Personalized Question"}),o.jsx("h2",{className:"question-title",children:B.title}),o.jsx("p",{className:"question-subtitle",children:B.subtitle}),o.jsx("div",{className:"question-input-container",children:_e()})]}),"        ",o.jsxs("div",{className:"questionnaire-navigation",children:[o.jsxs("button",{className:`btn btn-secondary ${n===0?"disabled":""}`,onClick:()=>a(I=>Math.max(0,I-1)),disabled:n===0,children:[o.jsx(qc,{size:20}),"Previous"]}),(()=>{const I=n===z-1||g&&n===p.length-1;return o.jsxs("button",{className:`btn ${se()?"btn-primary":"btn-secondary"} continue-skip-btn${se()?"":" fake-disabled"}`,onClick:()=>{ce||(I?ie():de())},tabIndex:0,"aria-disabled":!se()||ce,disabled:ce,onKeyDown:U=>{if(U.key==="Enter"||U.key===" "){if(U.preventDefault(),ce)return;I?ie():de()}},children:[o.jsx("span",{className:"continue-text",children:I?ce?"Generating":"Generate My Plan":"Continue"}),!se()&&o.jsx("span",{className:"skip-inline-btn",children:"Skip"})]})})()]})]})})};function Co(i){"@babel/helpers - typeof";return Co=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Co(i)}function ns(i){if(i===null||i===!0||i===!1)return NaN;var r=Number(i);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)}function yt(i,r){if(r.length<i)throw new TypeError(i+" argument"+(i>1?"s":"")+" required, but only "+r.length+" present")}function Ft(i){yt(1,arguments);var r=Object.prototype.toString.call(i);return i instanceof Date||Co(i)==="object"&&r==="[object Date]"?new Date(i.getTime()):typeof i=="number"||r==="[object Number]"?new Date(i):((typeof i=="string"||r==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function ov(i,r){yt(2,arguments);var n=Ft(i).getTime(),a=ns(r);return new Date(n+a)}var lv={};function Lo(){return lv}function cv(i){var r=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return r.setUTCFullYear(i.getFullYear()),i.getTime()-r.getTime()}function ff(i){yt(1,arguments);var r=Ft(i);return r.setHours(0,0,0,0),r}function uv(i,r){yt(2,arguments);var n=ff(i),a=ff(r);return n.getTime()===a.getTime()}function dv(i){return yt(1,arguments),i instanceof Date||Co(i)==="object"&&Object.prototype.toString.call(i)==="[object Date]"}function hv(i){if(yt(1,arguments),!dv(i)&&typeof i!="number")return!1;var r=Ft(i);return!isNaN(Number(r))}function fv(i){yt(1,arguments);var r=Ft(i),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function pv(i,r){var n;yt(1,arguments);var a=i||{},l=Ft(a.start),u=Ft(a.end),d=u.getTime();if(!(l.getTime()<=d))throw new RangeError("Invalid interval");var m=[],p=l;p.setHours(0,0,0,0);var y=Number((n=void 0)!==null&&n!==void 0?n:1);if(y<1||isNaN(y))throw new RangeError("`options.step` must be a number greater than 1");for(;p.getTime()<=d;)m.push(Ft(p)),p.setDate(p.getDate()+y),p.setHours(0,0,0,0);return m}function mv(i){yt(1,arguments);var r=Ft(i);return r.setDate(1),r.setHours(0,0,0,0),r}function gv(i,r){yt(2,arguments);var n=ns(r);return ov(i,-n)}var yv=864e5;function vv(i){yt(1,arguments);var r=Ft(i),n=r.getTime();r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0);var a=r.getTime(),l=n-a;return Math.floor(l/yv)+1}function To(i){yt(1,arguments);var r=1,n=Ft(i),a=n.getUTCDay(),l=(a<r?7:0)+a-r;return n.setUTCDate(n.getUTCDate()-l),n.setUTCHours(0,0,0,0),n}function ap(i){yt(1,arguments);var r=Ft(i),n=r.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(n+1,0,4),a.setUTCHours(0,0,0,0);var l=To(a),u=new Date(0);u.setUTCFullYear(n,0,4),u.setUTCHours(0,0,0,0);var d=To(u);return r.getTime()>=l.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function wv(i){yt(1,arguments);var r=ap(i),n=new Date(0);n.setUTCFullYear(r,0,4),n.setUTCHours(0,0,0,0);var a=To(n);return a}var xv=6048e5;function bv(i){yt(1,arguments);var r=Ft(i),n=To(r).getTime()-wv(r).getTime();return Math.round(n/xv)+1}function Po(i,r){var n,a,l,u,d,m,p,y;yt(1,arguments);var g=Lo(),x=ns((n=(a=(l=(u=r?.weekStartsOn)!==null&&u!==void 0?u:r==null||(d=r.locale)===null||d===void 0||(m=d.options)===null||m===void 0?void 0:m.weekStartsOn)!==null&&l!==void 0?l:g.weekStartsOn)!==null&&a!==void 0?a:(p=g.locale)===null||p===void 0||(y=p.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&n!==void 0?n:0);if(!(x>=0&&x<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var b=Ft(i),N=b.getUTCDay(),S=(N<x?7:0)+N-x;return b.setUTCDate(b.getUTCDate()-S),b.setUTCHours(0,0,0,0),b}function op(i,r){var n,a,l,u,d,m,p,y;yt(1,arguments);var g=Ft(i),x=g.getUTCFullYear(),b=Lo(),N=ns((n=(a=(l=(u=r?.firstWeekContainsDate)!==null&&u!==void 0?u:r==null||(d=r.locale)===null||d===void 0||(m=d.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&l!==void 0?l:b.firstWeekContainsDate)!==null&&a!==void 0?a:(p=b.locale)===null||p===void 0||(y=p.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(N>=1&&N<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=new Date(0);S.setUTCFullYear(x+1,0,N),S.setUTCHours(0,0,0,0);var C=Po(S,r),k=new Date(0);k.setUTCFullYear(x,0,N),k.setUTCHours(0,0,0,0);var q=Po(k,r);return g.getTime()>=C.getTime()?x+1:g.getTime()>=q.getTime()?x:x-1}function kv(i,r){var n,a,l,u,d,m,p,y;yt(1,arguments);var g=Lo(),x=ns((n=(a=(l=(u=r?.firstWeekContainsDate)!==null&&u!==void 0?u:r==null||(d=r.locale)===null||d===void 0||(m=d.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&l!==void 0?l:g.firstWeekContainsDate)!==null&&a!==void 0?a:(p=g.locale)===null||p===void 0||(y=p.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&n!==void 0?n:1),b=op(i,r),N=new Date(0);N.setUTCFullYear(b,0,x),N.setUTCHours(0,0,0,0);var S=Po(N,r);return S}var Sv=6048e5;function _v(i,r){yt(1,arguments);var n=Ft(i),a=Po(n,r).getTime()-kv(n,r).getTime();return Math.round(a/Sv)+1}function Ye(i,r){for(var n=i<0?"-":"",a=Math.abs(i).toString();a.length<r;)a="0"+a;return n+a}var Sn={y:function(r,n){var a=r.getUTCFullYear(),l=a>0?a:1-a;return Ye(n==="yy"?l%100:l,n.length)},M:function(r,n){var a=r.getUTCMonth();return n==="M"?String(a+1):Ye(a+1,2)},d:function(r,n){return Ye(r.getUTCDate(),n.length)},a:function(r,n){var a=r.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h:function(r,n){return Ye(r.getUTCHours()%12||12,n.length)},H:function(r,n){return Ye(r.getUTCHours(),n.length)},m:function(r,n){return Ye(r.getUTCMinutes(),n.length)},s:function(r,n){return Ye(r.getUTCSeconds(),n.length)},S:function(r,n){var a=n.length,l=r.getUTCMilliseconds(),u=Math.floor(l*Math.pow(10,a-3));return Ye(u,n.length)}},Ds={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},jv={G:function(r,n,a){var l=r.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return a.era(l,{width:"abbreviated"});case"GGGGG":return a.era(l,{width:"narrow"});case"GGGG":default:return a.era(l,{width:"wide"})}},y:function(r,n,a){if(n==="yo"){var l=r.getUTCFullYear(),u=l>0?l:1-l;return a.ordinalNumber(u,{unit:"year"})}return Sn.y(r,n)},Y:function(r,n,a,l){var u=op(r,l),d=u>0?u:1-u;if(n==="YY"){var m=d%100;return Ye(m,2)}return n==="Yo"?a.ordinalNumber(d,{unit:"year"}):Ye(d,n.length)},R:function(r,n){var a=ap(r);return Ye(a,n.length)},u:function(r,n){var a=r.getUTCFullYear();return Ye(a,n.length)},Q:function(r,n,a){var l=Math.ceil((r.getUTCMonth()+1)/3);switch(n){case"Q":return String(l);case"QQ":return Ye(l,2);case"Qo":return a.ordinalNumber(l,{unit:"quarter"});case"QQQ":return a.quarter(l,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(l,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(l,{width:"wide",context:"formatting"})}},q:function(r,n,a){var l=Math.ceil((r.getUTCMonth()+1)/3);switch(n){case"q":return String(l);case"qq":return Ye(l,2);case"qo":return a.ordinalNumber(l,{unit:"quarter"});case"qqq":return a.quarter(l,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(l,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(l,{width:"wide",context:"standalone"})}},M:function(r,n,a){var l=r.getUTCMonth();switch(n){case"M":case"MM":return Sn.M(r,n);case"Mo":return a.ordinalNumber(l+1,{unit:"month"});case"MMM":return a.month(l,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(l,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(l,{width:"wide",context:"formatting"})}},L:function(r,n,a){var l=r.getUTCMonth();switch(n){case"L":return String(l+1);case"LL":return Ye(l+1,2);case"Lo":return a.ordinalNumber(l+1,{unit:"month"});case"LLL":return a.month(l,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(l,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(l,{width:"wide",context:"standalone"})}},w:function(r,n,a,l){var u=_v(r,l);return n==="wo"?a.ordinalNumber(u,{unit:"week"}):Ye(u,n.length)},I:function(r,n,a){var l=bv(r);return n==="Io"?a.ordinalNumber(l,{unit:"week"}):Ye(l,n.length)},d:function(r,n,a){return n==="do"?a.ordinalNumber(r.getUTCDate(),{unit:"date"}):Sn.d(r,n)},D:function(r,n,a){var l=vv(r);return n==="Do"?a.ordinalNumber(l,{unit:"dayOfYear"}):Ye(l,n.length)},E:function(r,n,a){var l=r.getUTCDay();switch(n){case"E":case"EE":case"EEE":return a.day(l,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(l,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(l,{width:"short",context:"formatting"});case"EEEE":default:return a.day(l,{width:"wide",context:"formatting"})}},e:function(r,n,a,l){var u=r.getUTCDay(),d=(u-l.weekStartsOn+8)%7||7;switch(n){case"e":return String(d);case"ee":return Ye(d,2);case"eo":return a.ordinalNumber(d,{unit:"day"});case"eee":return a.day(u,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(u,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(u,{width:"short",context:"formatting"});case"eeee":default:return a.day(u,{width:"wide",context:"formatting"})}},c:function(r,n,a,l){var u=r.getUTCDay(),d=(u-l.weekStartsOn+8)%7||7;switch(n){case"c":return String(d);case"cc":return Ye(d,n.length);case"co":return a.ordinalNumber(d,{unit:"day"});case"ccc":return a.day(u,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(u,{width:"narrow",context:"standalone"});case"cccccc":return a.day(u,{width:"short",context:"standalone"});case"cccc":default:return a.day(u,{width:"wide",context:"standalone"})}},i:function(r,n,a){var l=r.getUTCDay(),u=l===0?7:l;switch(n){case"i":return String(u);case"ii":return Ye(u,n.length);case"io":return a.ordinalNumber(u,{unit:"day"});case"iii":return a.day(l,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(l,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(l,{width:"short",context:"formatting"});case"iiii":default:return a.day(l,{width:"wide",context:"formatting"})}},a:function(r,n,a){var l=r.getUTCHours(),u=l/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(u,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(u,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(u,{width:"wide",context:"formatting"})}},b:function(r,n,a){var l=r.getUTCHours(),u;switch(l===12?u=Ds.noon:l===0?u=Ds.midnight:u=l/12>=1?"pm":"am",n){case"b":case"bb":return a.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(u,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(u,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(u,{width:"wide",context:"formatting"})}},B:function(r,n,a){var l=r.getUTCHours(),u;switch(l>=17?u=Ds.evening:l>=12?u=Ds.afternoon:l>=4?u=Ds.morning:u=Ds.night,n){case"B":case"BB":case"BBB":return a.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(u,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(u,{width:"wide",context:"formatting"})}},h:function(r,n,a){if(n==="ho"){var l=r.getUTCHours()%12;return l===0&&(l=12),a.ordinalNumber(l,{unit:"hour"})}return Sn.h(r,n)},H:function(r,n,a){return n==="Ho"?a.ordinalNumber(r.getUTCHours(),{unit:"hour"}):Sn.H(r,n)},K:function(r,n,a){var l=r.getUTCHours()%12;return n==="Ko"?a.ordinalNumber(l,{unit:"hour"}):Ye(l,n.length)},k:function(r,n,a){var l=r.getUTCHours();return l===0&&(l=24),n==="ko"?a.ordinalNumber(l,{unit:"hour"}):Ye(l,n.length)},m:function(r,n,a){return n==="mo"?a.ordinalNumber(r.getUTCMinutes(),{unit:"minute"}):Sn.m(r,n)},s:function(r,n,a){return n==="so"?a.ordinalNumber(r.getUTCSeconds(),{unit:"second"}):Sn.s(r,n)},S:function(r,n){return Sn.S(r,n)},X:function(r,n,a,l){var u=l._originalDate||r,d=u.getTimezoneOffset();if(d===0)return"Z";switch(n){case"X":return mf(d);case"XXXX":case"XX":return Yn(d);case"XXXXX":case"XXX":default:return Yn(d,":")}},x:function(r,n,a,l){var u=l._originalDate||r,d=u.getTimezoneOffset();switch(n){case"x":return mf(d);case"xxxx":case"xx":return Yn(d);case"xxxxx":case"xxx":default:return Yn(d,":")}},O:function(r,n,a,l){var u=l._originalDate||r,d=u.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+pf(d,":");case"OOOO":default:return"GMT"+Yn(d,":")}},z:function(r,n,a,l){var u=l._originalDate||r,d=u.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+pf(d,":");case"zzzz":default:return"GMT"+Yn(d,":")}},t:function(r,n,a,l){var u=l._originalDate||r,d=Math.floor(u.getTime()/1e3);return Ye(d,n.length)},T:function(r,n,a,l){var u=l._originalDate||r,d=u.getTime();return Ye(d,n.length)}};function pf(i,r){var n=i>0?"-":"+",a=Math.abs(i),l=Math.floor(a/60),u=a%60;if(u===0)return n+String(l);var d=r;return n+String(l)+d+Ye(u,2)}function mf(i,r){if(i%60===0){var n=i>0?"-":"+";return n+Ye(Math.abs(i)/60,2)}return Yn(i,r)}function Yn(i,r){var n=r||"",a=i>0?"-":"+",l=Math.abs(i),u=Ye(Math.floor(l/60),2),d=Ye(l%60,2);return a+u+n+d}var gf=function(r,n){switch(r){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},lp=function(r,n){switch(r){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Ev=function(r,n){var a=r.match(/(P+)(p+)?/)||[],l=a[1],u=a[2];if(!u)return gf(r,n);var d;switch(l){case"P":d=n.dateTime({width:"short"});break;case"PP":d=n.dateTime({width:"medium"});break;case"PPP":d=n.dateTime({width:"long"});break;case"PPPP":default:d=n.dateTime({width:"full"});break}return d.replace("{{date}}",gf(l,n)).replace("{{time}}",lp(u,n))},Nv={p:lp,P:Ev},Cv=["D","DD"],Tv=["YY","YYYY"];function Pv(i){return Cv.indexOf(i)!==-1}function Ov(i){return Tv.indexOf(i)!==-1}function yf(i,r,n){if(i==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(r,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(i==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(r,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(i==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(r,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(i==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(r,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Av={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Iv=function(r,n,a){var l,u=Av[r];return typeof u=="string"?l=u:n===1?l=u.one:l=u.other.replace("{{count}}",n.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+l:l+" ago":l};function Oc(i){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.width?String(r.width):i.defaultWidth,a=i.formats[n]||i.formats[i.defaultWidth];return a}}var Rv={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Dv={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Lv={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Mv={date:Oc({formats:Rv,defaultWidth:"full"}),time:Oc({formats:Dv,defaultWidth:"full"}),dateTime:Oc({formats:Lv,defaultWidth:"full"})},Uv={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Fv=function(r,n,a,l){return Uv[r]};function zi(i){return function(r,n){var a=n!=null&&n.context?String(n.context):"standalone",l;if(a==="formatting"&&i.formattingValues){var u=i.defaultFormattingWidth||i.defaultWidth,d=n!=null&&n.width?String(n.width):u;l=i.formattingValues[d]||i.formattingValues[u]}else{var m=i.defaultWidth,p=n!=null&&n.width?String(n.width):i.defaultWidth;l=i.values[p]||i.values[m]}var y=i.argumentCallback?i.argumentCallback(r):r;return l[y]}}var Bv={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Wv={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},$v={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zv={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qv={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Hv={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Vv=function(r,n){var a=Number(r),l=a%100;if(l>20||l<10)switch(l%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},Gv={ordinalNumber:Vv,era:zi({values:Bv,defaultWidth:"wide"}),quarter:zi({values:Wv,defaultWidth:"wide",argumentCallback:function(r){return r-1}}),month:zi({values:$v,defaultWidth:"wide"}),day:zi({values:zv,defaultWidth:"wide"}),dayPeriod:zi({values:qv,defaultWidth:"wide",formattingValues:Hv,defaultFormattingWidth:"wide"})};function qi(i){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.width,l=a&&i.matchPatterns[a]||i.matchPatterns[i.defaultMatchWidth],u=r.match(l);if(!u)return null;var d=u[0],m=a&&i.parsePatterns[a]||i.parsePatterns[i.defaultParseWidth],p=Array.isArray(m)?Kv(m,function(x){return x.test(d)}):Jv(m,function(x){return x.test(d)}),y;y=i.valueCallback?i.valueCallback(p):p,y=n.valueCallback?n.valueCallback(y):y;var g=r.slice(d.length);return{value:y,rest:g}}}function Jv(i,r){for(var n in i)if(i.hasOwnProperty(n)&&r(i[n]))return n}function Kv(i,r){for(var n=0;n<i.length;n++)if(r(i[n]))return n}function Qv(i){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.match(i.matchPattern);if(!a)return null;var l=a[0],u=r.match(i.parsePattern);if(!u)return null;var d=i.valueCallback?i.valueCallback(u[0]):u[0];d=n.valueCallback?n.valueCallback(d):d;var m=r.slice(l.length);return{value:d,rest:m}}}var Yv=/^(\d+)(th|st|nd|rd)?/i,Xv=/\d+/i,Zv={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ew={any:[/^b/i,/^(a|c)/i]},tw={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},rw={any:[/1/i,/2/i,/3/i,/4/i]},nw={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sw={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},iw={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},aw={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ow={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},lw={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},cw={ordinalNumber:Qv({matchPattern:Yv,parsePattern:Xv,valueCallback:function(r){return parseInt(r,10)}}),era:qi({matchPatterns:Zv,defaultMatchWidth:"wide",parsePatterns:ew,defaultParseWidth:"any"}),quarter:qi({matchPatterns:tw,defaultMatchWidth:"wide",parsePatterns:rw,defaultParseWidth:"any",valueCallback:function(r){return r+1}}),month:qi({matchPatterns:nw,defaultMatchWidth:"wide",parsePatterns:sw,defaultParseWidth:"any"}),day:qi({matchPatterns:iw,defaultMatchWidth:"wide",parsePatterns:aw,defaultParseWidth:"any"}),dayPeriod:qi({matchPatterns:ow,defaultMatchWidth:"any",parsePatterns:lw,defaultParseWidth:"any"})},uw={code:"en-US",formatDistance:Iv,formatLong:Mv,formatRelative:Fv,localize:Gv,match:cw,options:{weekStartsOn:0,firstWeekContainsDate:1}},dw=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fw=/^'([^]*?)'?$/,pw=/''/g,mw=/[a-zA-Z]/;function dr(i,r,n){var a,l,u,d,m,p,y,g,x,b,N,S,C,k;yt(2,arguments);var q=String(r),$=Lo(),L=(a=(l=void 0)!==null&&l!==void 0?l:$.locale)!==null&&a!==void 0?a:uw,F=ns((u=(d=(m=(p=void 0)!==null&&p!==void 0?p:void 0)!==null&&m!==void 0?m:$.firstWeekContainsDate)!==null&&d!==void 0?d:(y=$.locale)===null||y===void 0||(g=y.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&u!==void 0?u:1);if(!(F>=1&&F<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var ee=ns((x=(b=(N=(S=void 0)!==null&&S!==void 0?S:void 0)!==null&&N!==void 0?N:$.weekStartsOn)!==null&&b!==void 0?b:(C=$.locale)===null||C===void 0||(k=C.options)===null||k===void 0?void 0:k.weekStartsOn)!==null&&x!==void 0?x:0);if(!(ee>=0&&ee<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!L.localize)throw new RangeError("locale must contain localize property");if(!L.formatLong)throw new RangeError("locale must contain formatLong property");var V=Ft(i);if(!hv(V))throw new RangeError("Invalid time value");var W=cv(V),te=gv(V,W),fe={firstWeekContainsDate:F,weekStartsOn:ee,locale:L,_originalDate:V},pe=q.match(hw).map(function(K){var oe=K[0];if(oe==="p"||oe==="P"){var ne=Nv[oe];return ne(K,L.formatLong)}return K}).join("").match(dw).map(function(K){if(K==="''")return"'";var oe=K[0];if(oe==="'")return gw(K);var ne=jv[oe];if(ne)return Ov(K)&&yf(K,r,String(i)),Pv(K)&&yf(K,r,String(i)),ne(te,K,L.localize,fe);if(oe.match(mw))throw new RangeError("Format string contains an unescaped latin alphabet character `"+oe+"`");return K}).join("");return pe}function gw(i){var r=i.match(fw);return r?r[1].replace(pw,"'"):i}const yw={images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Lunges",resources:[{label:"Lunge technique guide",url:"https://example.com/lunges/technique"},{label:"Walking lunge progression",url:"https://example.com/lunges/progression"},{label:"Lunge programming for strength",url:"https://example.com/lunges/programming"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Forward lunge finish"],difficulty:"Moderate",duration:"5-12 min",exampleNote:"Step forward, lower until back knee is near floor, then drive through front heel to stand.",meta:{exercise:"Lower Body / Quads / Glutes / Hamstrings / Calves",movement:"Squat/Lunge -- Sagittal",equipment:"Bodyweight / Optional Weights",trainingType:"Strength / Hypertrophy / Endurance / Balance-Stability",planeOfMotion:"Sagittal",description:"Step forward and lower body by bending knees until back knee is just above the floor; push back to start. Keep torso upright and core engaged."}},vw={images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed/aclHkVaku9U",featuredVideo:!0,resources:[{label:"Harvard Health: How to do a squat",url:"https://www.health.harvard.edu/staying-healthy/squat-exercise"},{label:"ACE Fitness: Squat technique and tips",url:"https://www.acefitness.org/education-and-resources/lifestyle/exercise-library/136/squat/"},{label:"Video: How to Do a Barbell Squat (YouTube)",url:"https://www.youtube.com/watch?v=aclHkVaku9U"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Proper squat depth and posture"],difficulty:"Moderate",duration:"8-15 min",exampleNote:"Keep chest up, push hips back, and drive through heels to stand.",meta:{exercise:"Lower Body / Quads / Glutes / Hamstrings / Calves / Core Stabilizers",movement:"Squat/Lunge -- Sagittal",equipment:"Bodyweight / Free Weights",trainingType:"Strength / Hypertrophy / Endurance / Power-Plyometrics / Balance-Stability",planeOfMotion:"Sagittal",description:"Stand shoulder-width apart, lower by bending hips and knees, then push through heels to return to standing. Avoid knees caving and keep heels down."}},ww={images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Bridges+exercise",resources:[{label:"Glute bridge progressions",url:"https://example.com/bridges/progressions"},{label:"Hip thrust vs bridge comparison",url:"https://example.com/bridges/compare"},{label:"Bridge programming for glute strength",url:"https://example.com/bridges/program"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Bridge top squeeze"],difficulty:"Easy",duration:"5-10 min",exampleNote:"Press through heels to lift hips until body forms straight line from shoulders to knees.",meta:{exercise:"Lower Body / Glutes / Hamstrings / Core Stabilizers / Lower Back",movement:"Push -- Hip Hinge/Extension",equipment:"Bodyweight / Optional Weights",trainingType:"Strength / Hypertrophy",planeOfMotion:"Sagittal",description:"Lie on your back with knees bent and feet flat, press through heels to lift hips toward ceiling and squeeze glutes at top."}},xw={images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Punches+drill",resources:[{label:"Basic punching technique",url:"https://example.com/punches/technique"},{label:"Shadowboxing routines",url:"https://example.com/punches/shadowboxing"},{label:"Rotational power drills",url:"https://example.com/punches/power"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Punching stance"],difficulty:"Moderate",duration:"3-8 min",exampleNote:"Stand in a fighting stance, extend the arm and rotate torso for power, retract quickly.",meta:{exercise:"Upper Body / Arms / Shoulders / Chest / Core  Rotation",movement:"Push -- Horizontal / Rotation",equipment:"Bodyweight / Optional Weights",trainingType:"Endurance / Power-Plyometrics",planeOfMotion:"Transverse",description:"Stand with feet shoulder-width and rotate through the torso while extending the arm to punch, then retract. Focus on controlled power and posture."}},bw={images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Superman+exercise",resources:[{label:"Superman back extension tips",url:"https://example.com/superman/tips"},{label:"Lower back strengthening program",url:"https://example.com/superman/program"},{label:"Glute and hamstring pairing",url:"https://example.com/superman/pairings"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Superman top position"],difficulty:"Easy",duration:"3-8 min",exampleNote:"Lift arms, chest, and legs slightly off the ground squeezing glutes and lower back.",meta:{exercise:"Core / Lower Back / Glutes / Hamstrings / Shoulders",movement:"Extension -- Sagittal Isometric Hold",equipment:"Bodyweight",trainingType:"Endurance / Balance-Stability",planeOfMotion:"Sagittal",description:"Lie face down and lift arms, chest, and legs a few inches off the ground, holding briefly at the top."}},vf={"Sit-ups":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed/1fbU_MkV7NE",featuredVideo:!0,resources:[{label:"NHS: How to do sit-ups safely",url:"https://www.nhs.uk/live-well/exercise/how-to-do-a-sit-up-or-crunch/"},{label:"LIVESTRONG: How to Do a Sit Up",url:"https://www.livestrong.com/article/137075-how-to-do-a-sit-up/"},{label:"Video: How to Do a Sit Up (YouTube)",url:"https://www.youtube.com/watch?v=1fbU_MkV7NE"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Controlled sit-up finish"],difficulty:"Moderate",duration:"3-10 min",exampleNote:"Lie on your back with knees bent and feet flat; curl up using the core and avoid neck strain.",meta:{exercise:"Core / Abs",movement:"Push -- Sagittal Flexion",equipment:"Bodyweight",trainingType:"Endurance / Hypertrophy",planeOfMotion:"Sagittal",description:"Lie on your back with knees bent and feet flat on the floor. Cross arms or place hands by your head. Tighten core and curl upper body toward knees, then lower with control."}},"Reverse Crunches":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Reverse+Crunches",resources:[{label:"Reverse crunch tutorial",url:"https://example.com/reverse-crunches/tutorial"},{label:"Lower-abs progressions",url:"https://example.com/reverse-crunches/progressions"},{label:"Reverse crunch common errors",url:"https://example.com/reverse-crunches/errors"}],galleryImages:["/images/we09532.png"],imageCaptions:["Reverse crunch top position"],difficulty:"Moderate",duration:"5-10 min",exampleNote:"Curl hips off the floor and draw knees toward chest using the abs.",meta:{exercise:"Core / Abs / Lower Back Stabilizers",movement:"Pull -- Sagittal Flexion",equipment:"Bodyweight",trainingType:"Endurance / Hypertrophy",planeOfMotion:"Sagittal",description:"Lie on your back with knees bent and feet lifted. Contract abs to curl hips off the floor and draw knees toward your chest. Lower down under control."}},"Bicycle Crunches":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Bicycle+Crunches",resources:[{label:"Bicycle crunch form guide",url:"https://example.com/bicycle-crunches/form"},{label:"Oblique strengthening routine",url:"https://example.com/bicycle-crunches/obliques"},{label:"Progressions for bicycle crunches",url:"https://example.com/bicycle-crunches/progressions"}],galleryImages:["/images/we09532.png"],imageCaptions:["Bicycle crunch twist"],difficulty:"Moderate",duration:"5-8 min",exampleNote:"Perform slow, controlled alternating twist motions to target obliques.",meta:{exercise:"Core / Abs / Obliques",movement:"Rotation -- Transverse Flexion",equipment:"Bodyweight",trainingType:"Endurance / Hypertrophy",planeOfMotion:"Transverse",description:"Lie on your back with hands behind head and legs lifted. Bring one knee toward chest while twisting the opposite elbow toward it, then switch sides."}},"Flutter Kicks":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Flutter+Kicks",resources:[{label:"Flutter kicks technique",url:"https://example.com/flutter-kicks/technique"},{label:"Core endurance workouts",url:"https://example.com/flutter-kicks/endurance"},{label:"Protect your lower back while flutter kicking",url:"https://example.com/flutter-kicks/lower-back"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Flutter kicks supine"],difficulty:"Moderate",duration:"1-3 min",exampleNote:"Keep core tight and lower back pressed to the floor while performing small kicking motions.",meta:{exercise:"Core / Abs / Hip Flexors",movement:"Push -- Sagittal Flexion/Stability",equipment:"Bodyweight",trainingType:"Endurance / Hypertrophy / Balance-Stability",planeOfMotion:"Sagittal",description:"Lie flat on your back with legs extended, hands under hips for support. Lift legs a few inches and alternate small kicks while keeping the core engaged."}},"Leg Raises":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed/2XcmRr0Vj3I",featuredVideo:!0,resources:[{label:"Penn State Health: How to do leg raises",url:"https://www.pennstatehealth.org/health-a-to-z/leg-raises"},{label:"Nuffield Health: Straight leg raise technique",url:"https://www.nuffieldhealth.com/article/how-to-do-a-straight-leg-raise"},{label:"Video: Lying Leg Raises (YouTube)",url:"https://www.youtube.com/watch?v=2XcmRr0Vj3I"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Leg raise - controlled descent"],difficulty:"Moderate",duration:"5-10 min",exampleNote:"Keep legs straight and lift toward the ceiling, lowering with control.",meta:{exercise:"Core / Abs / Hip Flexors",movement:"Push -- Sagittal Flexion",equipment:"Bodyweight",trainingType:"Endurance / Hypertrophy",planeOfMotion:"Sagittal",description:"Lie flat with legs extended and hands under hips. Slowly lift legs toward ceiling, then lower with control while maintaining tension in the abs."}},"Elbow Plank":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Elbow+Plank",resources:[{label:"Plank form and variations",url:"https://example.com/elbow-plank/form"},{label:"Plank progressions for endurance",url:"https://example.com/elbow-plank/progressions"},{label:"Shoulder and core stability tips",url:"https://example.com/elbow-plank/stability"}],galleryImages:["/images/we09532.png"],imageCaptions:["Elbow plank alignment"],difficulty:"Easy",duration:"30s-2min",exampleNote:"Form a straight line from head to heels on elbows; keep hips level and core braced.",meta:{exercise:"Core / Abs / Lower Back / Shoulders",movement:"Anti-Rotation / Stability -- Isometric Hold",equipment:"Bodyweight",trainingType:"Endurance / Balance-Stability",planeOfMotion:"Sagittal",description:"Start face down with elbows under shoulders and legs extended. Lift body into a straight line and hold while breathing evenly."}},Lunges:yw,"High Knees":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=High+Knees",resources:[{label:"High knees drill and form",url:"https://example.com/high-knees/drill"},{label:"Warm-up plyometrics",url:"https://example.com/high-knees/plyometrics"},{label:"Cardio interval ideas",url:"https://example.com/high-knees/cardio"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["High knees sprint form"],difficulty:"Moderate",duration:"30s-3min",exampleNote:"Drive knees up rapidly while pumping opposite arm and staying light on the feet.",meta:{exercise:"Lower Body / Quads / Hamstrings / Glutes / Calves / Core Stabilizers",movement:"Running/Carry -- Sagittal",equipment:"Bodyweight",trainingType:"Endurance / Power-Plyometrics / Balance-Stability",planeOfMotion:"Sagittal",description:"Quickly drive one knee toward the chest while pumping the opposite arm, alternating rapidly to raise heart rate."}},"Side Kicks":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Side+Kicks",resources:[{label:"Side kick mechanics",url:"https://example.com/side-kicks/mechanics"},{label:"Hip abductor strengthening",url:"https://example.com/side-kicks/hip-abductors"},{label:"Balance drills for kicks",url:"https://example.com/side-kicks/balance"}],galleryImages:["/images/we09532.png"],imageCaptions:["Side kick height"],difficulty:"Moderate",duration:"3-8 min",exampleNote:"Shift weight to one leg and lift the opposite leg to the side with control.",meta:{exercise:"Lower Body / Glutes / Hip Abductors / Quads / Core Stabilizers",movement:"Push -- Frontal",equipment:"Bodyweight",trainingType:"Strength / Hypertrophy / Balance-Stability",planeOfMotion:"Frontal",description:"Stand with feet shoulder-width apart, shift weight to one leg, lift the other leg out to the side while keeping torso upright."}},"Mountain Climbers":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Mountain+Climbers",resources:[{label:"Mountain climber intervals",url:"https://example.com/mountain-climbers/intervals"},{label:"Plank-to-mountain transitions",url:"https://example.com/mountain-climbers/transitions"},{label:"Core conditioning with mountain climbers",url:"https://example.com/mountain-climbers/core"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Mountain climbers quick drive"],difficulty:"Moderate",duration:"30s-2min",exampleNote:"From high plank, drive knees toward chest alternately while keeping torso stable.",meta:{exercise:"Core / Abs / Shoulders / Arms / Quads / Hip Flexors",movement:"Push -- Sagittal Dynamic Stability",equipment:"Bodyweight",trainingType:"Endurance / Power-Plyometrics / Balance-Stability",planeOfMotion:"Sagittal",description:"Start in a high plank and alternately drive knees toward chest at a steady pace while keeping hips low."}},Squats:vw,"Donkey Kicks":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Donkey+Kicks",resources:[{label:"Donkey kick variations",url:"https://example.com/donkey-kicks/variations"},{label:"Glute activation exercises",url:"https://example.com/donkey-kicks/activation"},{label:"Band-assisted donkey kicks",url:"https://example.com/donkey-kicks/band"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Donkey kick top"],difficulty:"Easy",duration:"3-8 min",exampleNote:"From all fours, lift one knee to the ceiling with knee bent at 90 degrees, squeezing glutes at top.",meta:{exercise:"Lower Body / Glutes / Hamstrings / Core Stabilizers",movement:"Push -- Sagittal Hip Extension",equipment:"Bodyweight / Optional Bands",trainingType:"Strength / Hypertrophy / Balance-Stability",planeOfMotion:"Sagittal",description:"Start on all fours and lift one leg upward with knee bent at 90 degrees, squeeze glutes at the top, then lower with control."}},Bridges:ww,"Jump Knee Tucks":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Jump+Knee+Tucks",resources:[{label:"Plyometric tuck jump progressions",url:"https://example.com/jump-knee-tucks/progressions"},{label:"Landing mechanics for knee tucks",url:"https://example.com/jump-knee-tucks/landing"},{label:"Plyometric conditioning",url:"https://example.com/jump-knee-tucks/conditioning"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Tuck jump peak"],difficulty:"Hard",duration:"1-5 min",exampleNote:"Explosively jump and drive knees to chest; land softly and reset.",meta:{exercise:"Lower Body / Quads / Hamstrings / Glutes / Calves / Core Stabilizers",movement:"Squat/Lunge + Jump -- Explosive Plyometric",equipment:"Bodyweight",trainingType:"Power-Plyometrics / Endurance",planeOfMotion:"Sagittal",description:"Bend into a quarter squat, explode upward bringing knees toward chest, and land softly absorbing impact."}},"Side Leg Raises":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Side+Leg+Raises",resources:[{label:"Side leg raise technique",url:"https://example.com/side-leg-raises/technique"},{label:"Glute med strengthening routine",url:"https://example.com/side-leg-raises/routine"},{label:"Ankle and hip mobility for side raises",url:"https://example.com/side-leg-raises/mobility"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Side leg raise top"],difficulty:"Easy",duration:"3-8 min",exampleNote:"Lie on your side and lift the top leg with control, keeping hips stacked.",meta:{exercise:"Lower Body / Glutes / Hip Abductors / Core Stabilizers",movement:"Push -- Frontal Hip Abduction",equipment:"Bodyweight / Optional Bands",trainingType:"Strength / Balance-Stability",planeOfMotion:"Frontal",description:"Lie on your side and lift the top leg upward while keeping your hips stacked and torso stable."}},"Close-Grip Push-ups":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Close-Grip+Push-ups",resources:[{label:"Close-grip push-up form",url:"https://example.com/close-grip-pushups/form"},{label:"Triceps-focused bodyweight work",url:"https://example.com/close-grip-pushups/triceps"},{label:"Progressions for stronger push-ups",url:"https://example.com/close-grip-pushups/progressions"}],galleryImages:["/images/we09532.png"],imageCaptions:["Close-grip push-up finish"],difficulty:"Moderate",duration:"5-12 min",exampleNote:"Hands close under shoulders; lower chest while keeping elbows tucked to emphasize triceps.",meta:{exercise:"Upper Body / Chest / Triceps / Shoulders / Core Stabilizers",movement:"Push -- Horizontal",equipment:"Bodyweight",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"From a push-up position, place hands closer than shoulder width and lower chest while keeping elbows near the ribs."}},Punches:xw,"Pseudo Planche":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Pseudo+Planche",resources:[{label:"Pseudo planche progressions",url:"https://example.com/pseudo-planche/progressions"},{label:"Wrist and shoulder prep for planche",url:"https://example.com/pseudo-planche/prep"},{label:"Advanced bodyweight skills programming",url:"https://example.com/pseudo-planche/program"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Pseudo planche lean"],difficulty:"Hard",duration:"Varies",exampleNote:"Lean shoulders forward in push-up position to increase horizontal load on shoulders and core.",meta:{exercise:"Upper Body / Chest / Triceps / Shoulders / Core Stabilizers",movement:"Push -- Horizontal with Forward Lean",equipment:"Bodyweight",trainingType:"Strength / Hypertrophy / Balance-Stability / Power (advanced variations)",planeOfMotion:"Sagittal",description:"From a push-up position, place hands lower toward hips and lean shoulders forward to increase load on the shoulders and core."}},"Sitting Pull-ups":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Sitting+Pull-ups",resources:[{label:"Assisted pull-up options",url:"https://example.com/sitting-pullups/assisted"},{label:"Seated pull mechanics",url:"https://example.com/sitting-pullups/mechanics"},{label:"Upper back strengthening",url:"https://example.com/sitting-pullups/upper-back"}],galleryImages:["/images/we09532.png"],imageCaptions:["Sitting pull-up setup"],difficulty:"Moderate",duration:"Varies",exampleNote:"Sit under a bar or rings and pull chest toward the bar using the back and arms. Focus on technique over momentum.",meta:{exercise:"Upper Body / Back / Biceps / Forearms / Shoulders / Core Stabilizers",movement:"Pull -- Vertical",equipment:"Bodyweight / Suspension Trainer / Bar / Rings",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Sit or use an assisted setup to pull the chest toward a bar, focusing on scapular retraction and elbow drive."}},"Doorframe Rows":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Doorframe+Rows",resources:[{label:"Doorframe row setup and safety",url:"https://example.com/doorframe-rows/setup"},{label:"Horizontal pulling programming",url:"https://example.com/doorframe-rows/programming"},{label:"Grip and wrist considerations",url:"https://example.com/doorframe-rows/grip"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Doorframe row body angle"],difficulty:"Easy",duration:"5-12 min",exampleNote:"Grip the doorframe and lean back, pulling the chest toward the frame while keeping the body straight.",meta:{exercise:"Upper Body / Back / Biceps / Forearms / Shoulders / Core Stabilizers",movement:"Pull -- Horizontal",equipment:"Bodyweight / Doorframe or Sturdy Support",trainingType:"Strength / Endurance / Balance-Stability",planeOfMotion:"Sagittal",description:"Stand facing an open door, grip the frame, and lean back. Pull your chest toward the frame using back muscles and squeeze shoulder blades."}},"Scapular Shrugs":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Scapular+Shrugs",resources:[{label:"Scapular control drills",url:"https://example.com/scapular-shrugs/drills"},{label:"Shoulder health routines",url:"https://example.com/scapular-shrugs/shoulder-health"},{label:"Band-based scapular work",url:"https://example.com/scapular-shrugs/bands"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Scapular shrug small range"],difficulty:"Easy",duration:"2-6 min",exampleNote:"From a hang, pull shoulder blades down and together without bending elbows to create a small upward movement.",meta:{exercise:"Upper Body / Back / Trapezius / Rhomboids / Lats / Shoulders / Core Stabilizers",movement:"Pull -- Vertical Scapular Depression/Elevation",equipment:"Bodyweight / Pull-Up Bar",trainingType:"Strength / Hypertrophy / Balance-Stability",planeOfMotion:"Sagittal",description:"Hang from a bar and pull shoulder blades down and together to produce a slight lift, focusing on scapular control."}},Superman:bw,"Back Lifts":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Back+Lifts",resources:[{label:"Back lift variations",url:"https://example.com/back-lifts/variations"},{label:"Safe tempo for back lifts",url:"https://example.com/back-lifts/tempo"},{label:"Lower back strengthening plans",url:"https://example.com/back-lifts/plans"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Back lift top"],difficulty:"Moderate",duration:"5-12 min",exampleNote:"Lift torso using lower back and glutes; avoid jerky motions.",meta:{exercise:"Core / Lower Back / Glutes / Hamstrings",movement:"Extension -- Hip Hinge",equipment:"Bodyweight / Roman Chair / Stability Ball",trainingType:"Strength / Hypertrophy",planeOfMotion:"Sagittal",description:"Perform controlled back extensions focusing on hip hinge mechanics and lower back engagement."}},"Alternative Arm Leg Plank":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Arm+Leg+Plank",resources:[{label:"Arm/leg plank progressions",url:"https://example.com/arm-leg-plank/progressions"},{label:"Anti-rotation core drills",url:"https://example.com/arm-leg-plank/anti-rotation"},{label:"Plank stability programming",url:"https://example.com/arm-leg-plank/program"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Arm-leg plank balance"],difficulty:"Moderate",duration:"30s-2min",exampleNote:"Lift opposite arm and leg while maintaining a straight plank line and steady breathing.",meta:{exercise:"Core / Abs / Lower Back / Shoulders / Glutes",movement:"Anti-Rotation / Stability -- Isometric Hold with Alternating Lift",equipment:"Bodyweight",trainingType:"Endurance / Balance-Stability",planeOfMotion:"Sagittal with Transverse Stability Demand",description:"From a plank position, lift one arm and the opposite leg while keeping hips level and core braced."}},"Push-ups":{images:["/images/we09532.png"],video:"https://www.youtube.com/embed?listType=search&list=Push-ups",resources:[{label:"Push-up form checklist",url:"https://example.com/push-ups/form"},{label:"Push-up progressions and regressions",url:"https://example.com/push-ups/progressions"},{label:"Programming push-ups for strength",url:"https://example.com/push-ups/programming"}],galleryImages:["/images/we09532.png"],imageCaptions:["Standard push-up finish"],difficulty:"Moderate",duration:"5-15 min",exampleNote:"Keep body straight and lower chest to floor, then push back up using chest and triceps.",meta:{exercise:"Upper Body / Chest / Triceps / Shoulders / Core Stabilizers",movement:"Push -- Horizontal",equipment:"Bodyweight",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"From a high plank, lower chest toward floor and press back up, keeping core engaged."}},"Chest Expansions":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Chest+Expansions",resources:[{label:"Chest expansion mobility sequence",url:"https://example.com/chest-expansions/mobility"},{label:"Band-assisted chest opens",url:"https://example.com/chest-expansions/band"},{label:"Upper body flexibility routine",url:"https://example.com/chest-expansions/flexibility"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Chest expansion range"],difficulty:"Easy",duration:"3-8 min",exampleNote:"Open the arms wide and squeeze shoulder blades together; focus on posture and range of motion.",meta:{exercise:"Upper Body / Chest / Shoulders / Upper Back / Arms",movement:"Push -- Horizontal Abduction/Adduction",equipment:"Bodyweight / Bands",trainingType:"Endurance / Mobility-Flexibility",planeOfMotion:"Frontal",description:"Extend arms forward and open wide to stretch and mobilize the chest and shoulders."}},"Chest Squeezes":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Chest+Squeezes",resources:[{label:"Chest squeeze variations",url:"https://example.com/chest-squeezes/variations"},{label:"Medicine ball chest squeeze",url:"https://example.com/chest-squeezes/medicine-ball"},{label:"Isometric chest work for posture",url:"https://example.com/chest-squeezes/isometrics"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Chest squeeze hold"],difficulty:"Easy",duration:"2-6 min",exampleNote:"Press hands or an object together in front of chest to contract chest muscles.",meta:{exercise:"Upper Body / Chest / Shoulders / Arms",movement:"Push -- Horizontal Adduction/Isometric Hold",equipment:"Bodyweight / Bands / Dumbbell / Medicine Ball",trainingType:"Endurance / Mobility-Flexibility",planeOfMotion:"Frontal",description:"Squeeze hands or an object toward the midline to contract chest muscles and improve posture."}},"Pike Push-ups":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Pike+Push-ups",resources:[{label:"Pike push-up progression",url:"https://example.com/pike-pushups/progression"},{label:"Shoulder press alternatives",url:"https://example.com/pike-pushups/alternatives"},{label:"Inverted push-up technique",url:"https://example.com/pike-pushups/inverted"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Pike push-up peak"],difficulty:"Hard",duration:"Varies",exampleNote:"Walk feet toward hands to create a pike position and lower head toward the floor using shoulders.",meta:{exercise:"Upper Body / Shoulders / Triceps / Chest / Core Stabilizers",movement:"Push -- Vertical Press Variation",equipment:"Bodyweight",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Assume a pike (inverted V) position and lower the top of the head toward the floor, pressing back up to start."}},"Shoulder Taps":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Shoulder+Taps",resources:[{label:"Shoulder tap stability drill",url:"https://example.com/shoulder-taps/drill"},{label:"Anti-rotation core work",url:"https://example.com/shoulder-taps/anti-rotation"},{label:"Progressions for single-arm stability",url:"https://example.com/shoulder-taps/progressions"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Shoulder tap balance"],difficulty:"Easy",duration:"1-5 min",exampleNote:"From plank, lift one hand to tap the opposite shoulder while keeping hips square and body stable.",meta:{exercise:"Upper Body / Shoulders / Triceps / Chest / Core Stabilizers",movement:"Anti-Rotation / Stability -- Isometric Hold with Alternating Lift",equipment:"Bodyweight",trainingType:"Endurance / Balance-Stability / Strength",planeOfMotion:"Sagittal",description:"Maintain a stable plank while alternately tapping opposite shoulders with controlled motion."}},"Clapping Push-ups":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Clapping+Push-ups",resources:[{label:"Plyometric push-up progressions",url:"https://example.com/clapping-pushups/progressions"},{label:"Safe landing mechanics for plyo",url:"https://example.com/clapping-pushups/landing"},{label:"Upper body power drills",url:"https://example.com/clapping-pushups/power"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Clap push-up explosion"],difficulty:"Hard",duration:"Varies",exampleNote:"Explode off the ground and clap hands before returning to push-up position; land softly.",meta:{exercise:"Upper Body / Chest / Triceps / Shoulders / Core Stabilizers",movement:"Push -- Horizontal Explosive",equipment:"Bodyweight",trainingType:"Power-Plyometrics / Strength / Hypertrophy",planeOfMotion:"Sagittal",description:"Perform an explosive push-up so hands leave the ground, clap, and land in a controlled manner."}},"Cable Woodchop":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Cable+Woodchop",resources:[{label:"Cable woodchop technique",url:"https://example.com/cable-woodchop/technique"},{label:"Rotational core programming",url:"https://example.com/cable-woodchop/programming"},{label:"Anti-rotation vs rotation training",url:"https://example.com/cable-woodchop/rotation"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Cable woodchop finish"],difficulty:"Moderate",duration:"5-12 min",exampleNote:"Pull a handle diagonally across the body using torso rotation; control the return.",meta:{exercise:"Core / Abs / Obliques / Shoulders / Back Stabilizers",movement:"Rotation -- Transverse",equipment:"Cables / Bands",trainingType:"Strength / Hypertrophy / Endurance / Balance-Stability",planeOfMotion:"Transverse",description:"Attach a handle high on a cable and pull diagonally across the body while rotating the torso, then return smoothly."}},"Hanging Leg Raises":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Hanging+Leg+Raises",resources:[{label:"Hanging leg raise progressions",url:"https://example.com/hanging-leg-raises/progressions"},{label:"Grip endurance tips",url:"https://example.com/hanging-leg-raises/grip"},{label:"Core-to-hip flexor coordination drills",url:"https://example.com/hanging-leg-raises/coordination"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Hanging leg raise top"],difficulty:"Hard",duration:"Varies",exampleNote:"Hang from a bar and raise legs toward parallel while keeping control and avoiding swing.",meta:{exercise:"Core / Abs / Hip Flexors",movement:"Push -- Sagittal Flexion",equipment:"Bodyweight / Pull-Up Bar",trainingType:"Strength / Hypertrophy",planeOfMotion:"Sagittal",description:"Hang from a bar and lift legs upward while maintaining a controlled motion and braced core."}},"Crunch Machine":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Crunch+Machine",resources:[{label:"Using the crunch machine safely",url:"https://example.com/crunch-machine/safety"},{label:"Machine-based core workouts",url:"https://example.com/crunch-machine/workouts"},{label:"Adjusting machine settings for form",url:"https://example.com/crunch-machine/settings"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Crunch machine setup"],difficulty:"Easy",duration:"5-12 min",exampleNote:"Use a crunch machine to perform controlled spinal flexion focusing on the abs.",meta:{exercise:"Core / Abs / Obliques  secondary",movement:"Push -- Sagittal Flexion",equipment:"Machine",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Sit in the crunch machine and curl the torso forward under control, keeping tension in the abs."}},"Cable Crunch":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Cable+Crunch",resources:[{label:"Cable crunch form and setup",url:"https://example.com/cable-crunch/form"},{label:"Rope attachment best practices",url:"https://example.com/cable-crunch/rope"},{label:"Core strength progressions",url:"https://example.com/cable-crunch/progressions"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Cable crunch finish"],difficulty:"Moderate",duration:"5-12 min",exampleNote:"Attach a rope to a high pulley and curl the torso down while keeping hips stable.",meta:{exercise:"Core / Abs / Obliques  secondary",movement:"Push -- Sagittal Flexion",equipment:"Cables / Rope Attachment",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Kneel in front of a high pulley and pull the rope down with core contraction to flex the spine."}},"Rotary Torso Machine":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Rotary+Torso+Machine",resources:[{label:"Rotary torso machine technique",url:"https://example.com/rotary-torso/technique"},{label:"Machine-based rotation programming",url:"https://example.com/rotary-torso/programming"},{label:"Comparing rotational tools",url:"https://example.com/rotary-torso/compare"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Rotary torso setup"],difficulty:"Easy",duration:"5-10 min",exampleNote:"Use the rotary torso machine to rotate the torso slowly and with control.",meta:{exercise:"Core / Abs / Obliques / Lower Back Stabilizers",movement:"Rotation -- Transverse",equipment:"Machine",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Transverse",description:"Use a rotary torso machine to perform controlled rotations, focusing on controlled movement and posture."}},"Leg Press Machine":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Leg+Press+Machine",resources:[{label:"Leg press setup and foot placement",url:"https://example.com/leg-press/setup"},{label:"Programming leg press for hypertrophy",url:"https://example.com/leg-press/programming"},{label:"Knee and hip safety on leg press",url:"https://example.com/leg-press/safety"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Leg press foot placement"],difficulty:"Moderate",duration:"Varies",exampleNote:"Place feet on platform and press while keeping lower back against the seat; control range of motion.",meta:{exercise:"Lower Body / Quads / Glutes / Hamstrings / Calves",movement:"Squat/Lunge -- Sagittal",equipment:"Machine  Leg Press",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Use the leg press machine to push the platform under control, focusing on foot placement and knee tracking."}},"Weighted Lunges":{images:["/images/fitbuddy_head.png"],video:"https://www.youtube.com/embed?listType=search&list=Weighted+Lunges",resources:[{label:"Weighted lunge variations",url:"https://example.com/weighted-lunges/variations"},{label:"Programming lunges for mass",url:"https://example.com/weighted-lunges/programming"},{label:"Lunge safety with weights",url:"https://example.com/weighted-lunges/safety"}],galleryImages:["/images/fitbuddy_head.png"],imageCaptions:["Weighted lunge stance"],difficulty:"Moderate",duration:"8-20 min",exampleNote:"Step forward with weight and lower into a controlled lunge, keeping torso upright and pushing through the front heel.",meta:{exercise:"Lower Body / Quads / Glutes / Hamstrings / Calves / Core Stabilizers",movement:"Squat/Lunge -- Sagittal",equipment:"Free Weights  Dumbbells / Barbells / Kettlebells",trainingType:"Strength / Hypertrophy / Endurance",planeOfMotion:"Sagittal",description:"Perform lunges while holding weight, focusing on balance, knee tracking, and controlled movement."}}},kw=({name:i,exercise:r,onClose:n})=>{const a=vf[i]||vf.Default||{},l=r?{...a,...r}:a,u={images:l.images||[],galleryImages:l.galleryImages||[],imageCaptions:l.imageCaptions||[],video:l.video||"",featuredVideo:l.featuredVideo||!1,resources:Array.isArray(l.resources)?l.resources:[],difficulty:l.difficulty||"",duration:l.duration||"",exampleNote:l.exampleNote||"",meta:l.meta||{}},d=r&&r.muscleGroups&&r.muscleGroups.length?r.muscleGroups.join(", "):u.meta?.muscleGroups&&u.meta.muscleGroups.length?u.meta.muscleGroups.join(", "):l.muscleGroups&&l.muscleGroups.join?l.muscleGroups.join(", "):"",m=r&&(r.sets||r.reps)?r.sets?`${r.sets} sets  ${r.reps||""}`:`${r.reps} reps`:u.sets&&u.reps?`${u.sets} sets  ${u.reps}`:u.meta?.reps?`${u.meta.reps} reps`:null,p=m?m.toString().toLowerCase().endsWith("reps")?m:`${m} reps`:null;return o.jsx("div",{className:"exercise-modal-overlay",onClick:n,children:o.jsxs("div",{className:"exercise-detail-modal",onClick:y=>y.stopPropagation(),role:"dialog","aria-label":`${i} details`,children:[o.jsxs("div",{className:"exercise-detail-header",children:[o.jsxs("div",{className:"header-left",children:[o.jsx("div",{className:"illustration","aria-hidden":!0,children:o.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"3",y:"11",width:"18",height:"8",rx:"2",fill:"#F3FBF6"}),o.jsx("path",{d:"M7 11V8a3 3 0 0 1 3-3h4",stroke:"#2EB06A",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("circle",{cx:"17",cy:"6",r:"1.6",fill:"#2EB06A"})]})}),o.jsxs("div",{className:"title-block",children:[o.jsxs("div",{className:"title-text",children:[o.jsx("h3",{children:i}),o.jsxs("div",{className:"tag-row",children:[(()=>{const g=((r&&r.difficulty?r.difficulty:u.difficulty||"")||"").toString().toLowerCase().trim();let x="Unknown",b="unknown";return g.includes("easy")||g.includes("beginner")?(x="Beginner",b="beginner"):g.includes("moder")||g.includes("inter")||g.includes("medium")||g.includes("intermediate")?(x="Intermediate",b="intermediate"):g.includes("hard")||g.includes("adv")||g.includes("advanced")?(x="Advanced",b="advanced"):g&&(x=g.charAt(0).toUpperCase()+g.slice(1),b=g.replace(/\s+/g,"-")),o.jsx("span",{className:`tag tag-difficulty tag-${b}`,children:x})})(),o.jsxs("span",{className:"meta-pill duration",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-clock",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("polyline",{points:"12 6 12 12 16 14"})]}),u.duration||""]}),p?o.jsxs("span",{className:"meta-pill reps",children:[o.jsx(kt,{size:14}),p]}):null,o.jsxs("span",{className:"meta-pill target",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-zap",children:o.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),d]})]})]}),o.jsx("div",{className:"header-subinfo","aria-hidden":!0})]})]}),o.jsx("button",{className:"close-btn",onClick:n,"aria-label":"Close",children:o.jsx(Zi,{size:18})})]}),o.jsxs("div",{className:"exercise-body",children:[o.jsx("div",{className:"hero-media",children:u.video?o.jsx("div",{className:"hero-video",children:o.jsx("iframe",{src:u.video,title:`${i} video`,frameBorder:"0",allowFullScreen:!0})}):o.jsx("div",{className:"hero-placeholder",children:o.jsx("svg",{width:"96",height:"64",viewBox:"0 0 96 64",fill:"none",children:o.jsx("rect",{width:"96",height:"64",rx:"8",fill:"#F3FBF6"})})})}),o.jsxs("div",{className:"meta-grid",children:[o.jsxs("div",{className:"meta-item",children:[o.jsx("div",{className:"meta-icon",children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{d:"M12 2v20",stroke:"#4CAF50",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),o.jsxs("div",{className:"meta-content",children:[o.jsx("div",{className:"meta-label",children:"Exercise"}),o.jsx("div",{className:"meta-value",children:u.meta?.exercise||""})]})]}),o.jsxs("div",{className:"meta-item",children:[o.jsx("div",{className:"meta-icon",children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{d:"M4 12h16",stroke:"#1E90CB",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),o.jsxs("div",{className:"meta-content",children:[o.jsx("div",{className:"meta-label",children:"Movement"}),o.jsx("div",{className:"meta-value",children:u.meta?.movement||""})]})]}),o.jsxs("div",{className:"meta-item",children:[o.jsx("div",{className:"meta-icon",children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:o.jsx("rect",{x:"3",y:"6",width:"18",height:"12",rx:"2",stroke:"#FF9600",strokeWidth:"1.2"})})}),o.jsxs("div",{className:"meta-content",children:[o.jsx("div",{className:"meta-label",children:"Equipment"}),o.jsx("div",{className:"meta-value",children:u.meta?.equipment||""})]})]}),o.jsxs("div",{className:"meta-item",children:[o.jsx("div",{className:"meta-icon",children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{d:"M12 20V4",stroke:"#6A5ACD",strokeWidth:"1.2",strokeLinecap:"round"})})}),o.jsxs("div",{className:"meta-content",children:[o.jsx("div",{className:"meta-label",children:"Type of Training"}),o.jsx("div",{className:"meta-value",children:u.meta?.trainingType||""})]})]}),o.jsxs("div",{className:"meta-item",children:[o.jsx("div",{className:"meta-icon",children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:o.jsx("circle",{cx:"12",cy:"12",r:"8",stroke:"#2E8B57",strokeWidth:"1.2"})})}),o.jsxs("div",{className:"meta-content",children:[o.jsx("div",{className:"meta-label",children:"Plane of Motion"}),o.jsx("div",{className:"meta-value",children:u.meta?.planeOfMotion||""})]})]})]}),o.jsxs("div",{className:"description",children:[o.jsx("div",{className:"desc-label",children:"Description"}),o.jsx("div",{className:"desc-text",children:u.meta?.description||u.exampleNote||"No description available."})]}),o.jsx("div",{className:"image-gallery",children:(u.galleryImages&&u.galleryImages.length?u.galleryImages:u.images||[]).slice(0,2).map((y,g)=>o.jsxs("figure",{className:"gallery-item",children:[o.jsx("img",{src:y,alt:`${i} image ${g+1}`}),o.jsx("figcaption",{children:u.imageCaptions&&u.imageCaptions[g]||u.resources?.[g]?.label||""})]},g))}),o.jsx("div",{className:"section-divider"}),o.jsxs("div",{className:"meta-resources",children:[o.jsx("h4",{children:"Resources"}),o.jsx("div",{className:"resource-cards",children:u.resources.map((y,g)=>o.jsxs("div",{className:"resource-card",children:[o.jsxs("div",{className:"resource-card-left",children:[o.jsx("div",{className:"resource-icon",children:o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:o.jsx("rect",{x:"3",y:"6",width:"18",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"1.4"})})}),o.jsxs("div",{className:"resource-body",children:[o.jsx("div",{className:"resource-title",children:y.label}),o.jsx("div",{className:"resource-caption",children:y.caption||""})]})]}),o.jsx("div",{className:"resource-actions",children:o.jsx("a",{className:`resource-btn btn btn-primary ${g%2===0?"green":"blue"}`,href:y.url,target:"_blank",rel:"noreferrer",children:"Open"})})]},g))})]})]})]})})};var ia={};(function i(r,n,a,l){var u=!!(r.Worker&&r.Blob&&r.Promise&&r.OffscreenCanvas&&r.OffscreenCanvasRenderingContext2D&&r.HTMLCanvasElement&&r.HTMLCanvasElement.prototype.transferControlToOffscreen&&r.URL&&r.URL.createObjectURL),d=typeof Path2D=="function"&&typeof DOMMatrix=="function",m=function(){if(!r.OffscreenCanvas)return!1;var E=new OffscreenCanvas(1,1),w=E.getContext("2d");w.fillRect(0,0,1,1);var O=E.transferToImageBitmap();try{w.createPattern(O,"no-repeat")}catch{return!1}return!0}();function p(){}function y(E){var w=n.exports.Promise,O=w!==void 0?w:r.Promise;return typeof O=="function"?new O(E):(E(p,p),null)}var g=function(E,w){return{transform:function(O){if(E)return O;if(w.has(O))return w.get(O);var J=new OffscreenCanvas(O.width,O.height),Z=J.getContext("2d");return Z.drawImage(O,0,0),w.set(O,J),J},clear:function(){w.clear()}}}(m,new Map),x=function(){var E=Math.floor(16.666666666666668),w,O,J={},Z=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(w=function(ie){var ue=Math.random();return J[ue]=requestAnimationFrame(function se(de){Z===de||Z+E-1<de?(Z=de,delete J[ue],ie()):J[ue]=requestAnimationFrame(se)}),ue},O=function(ie){J[ie]&&cancelAnimationFrame(J[ie])}):(w=function(ie){return setTimeout(ie,E)},O=function(ie){return clearTimeout(ie)}),{frame:w,cancel:O}}(),b=function(){var E,w,O={};function J(Z){function ie(ue,se){Z.postMessage({options:ue||{},callback:se})}Z.init=function(se){var de=se.transferControlToOffscreen();Z.postMessage({canvas:de},[de])},Z.fire=function(se,de,_e){if(w)return ie(se,null),w;var Ae=Math.random().toString(36).slice(2);return w=y(function(Be){function Ge(Ze){Ze.data.callback===Ae&&(delete O[Ae],Z.removeEventListener("message",Ge),w=null,g.clear(),_e(),Be())}Z.addEventListener("message",Ge),ie(se,Ae),O[Ae]=Ge.bind(null,{data:{callback:Ae}})}),w},Z.reset=function(){Z.postMessage({reset:!0});for(var se in O)O[se](),delete O[se]}}return function(){if(E)return E;if(!a&&u){var Z=["var CONFETTI, SIZE = {}, module = {};","("+i.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{E=new Worker(URL.createObjectURL(new Blob([Z])))}catch(ie){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn(" Could not load worker",ie),null}J(E)}return E}}(),N={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function S(E,w){return w?w(E):E}function C(E){return E!=null}function k(E,w,O){return S(E&&C(E[w])?E[w]:N[w],O)}function q(E){return E<0?0:Math.floor(E)}function $(E,w){return Math.floor(Math.random()*(w-E))+E}function L(E){return parseInt(E,16)}function F(E){return E.map(ee)}function ee(E){var w=String(E).replace(/[^0-9a-f]/gi,"");return w.length<6&&(w=w[0]+w[0]+w[1]+w[1]+w[2]+w[2]),{r:L(w.substring(0,2)),g:L(w.substring(2,4)),b:L(w.substring(4,6))}}function V(E){var w=k(E,"origin",Object);return w.x=k(w,"x",Number),w.y=k(w,"y",Number),w}function W(E){E.width=document.documentElement.clientWidth,E.height=document.documentElement.clientHeight}function te(E){var w=E.getBoundingClientRect();E.width=w.width,E.height=w.height}function fe(E){var w=document.createElement("canvas");return w.style.position="fixed",w.style.top="0px",w.style.left="0px",w.style.pointerEvents="none",w.style.zIndex=E,w}function pe(E,w,O,J,Z,ie,ue,se,de){E.save(),E.translate(w,O),E.rotate(ie),E.scale(J,Z),E.arc(0,0,1,ue,se,de),E.restore()}function K(E){var w=E.angle*(Math.PI/180),O=E.spread*(Math.PI/180);return{x:E.x,y:E.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:E.startVelocity*.5+Math.random()*E.startVelocity,angle2D:-w+(.5*O-Math.random()*O),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:E.color,shape:E.shape,tick:0,totalTicks:E.ticks,decay:E.decay,drift:E.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:E.gravity*3,ovalScalar:.6,scalar:E.scalar,flat:E.flat}}function oe(E,w){w.x+=Math.cos(w.angle2D)*w.velocity+w.drift,w.y+=Math.sin(w.angle2D)*w.velocity+w.gravity,w.velocity*=w.decay,w.flat?(w.wobble=0,w.wobbleX=w.x+10*w.scalar,w.wobbleY=w.y+10*w.scalar,w.tiltSin=0,w.tiltCos=0,w.random=1):(w.wobble+=w.wobbleSpeed,w.wobbleX=w.x+10*w.scalar*Math.cos(w.wobble),w.wobbleY=w.y+10*w.scalar*Math.sin(w.wobble),w.tiltAngle+=.1,w.tiltSin=Math.sin(w.tiltAngle),w.tiltCos=Math.cos(w.tiltAngle),w.random=Math.random()+2);var O=w.tick++/w.totalTicks,J=w.x+w.random*w.tiltCos,Z=w.y+w.random*w.tiltSin,ie=w.wobbleX+w.random*w.tiltCos,ue=w.wobbleY+w.random*w.tiltSin;if(E.fillStyle="rgba("+w.color.r+", "+w.color.g+", "+w.color.b+", "+(1-O)+")",E.beginPath(),d&&w.shape.type==="path"&&typeof w.shape.path=="string"&&Array.isArray(w.shape.matrix))E.fill(B(w.shape.path,w.shape.matrix,w.x,w.y,Math.abs(ie-J)*.1,Math.abs(ue-Z)*.1,Math.PI/10*w.wobble));else if(w.shape.type==="bitmap"){var se=Math.PI/10*w.wobble,de=Math.abs(ie-J)*.1,_e=Math.abs(ue-Z)*.1,Ae=w.shape.bitmap.width*w.scalar,Be=w.shape.bitmap.height*w.scalar,Ge=new DOMMatrix([Math.cos(se)*de,Math.sin(se)*de,-Math.sin(se)*_e,Math.cos(se)*_e,w.x,w.y]);Ge.multiplySelf(new DOMMatrix(w.shape.matrix));var Ze=E.createPattern(g.transform(w.shape.bitmap),"no-repeat");Ze.setTransform(Ge),E.globalAlpha=1-O,E.fillStyle=Ze,E.fillRect(w.x-Ae/2,w.y-Be/2,Ae,Be),E.globalAlpha=1}else if(w.shape==="circle")E.ellipse?E.ellipse(w.x,w.y,Math.abs(ie-J)*w.ovalScalar,Math.abs(ue-Z)*w.ovalScalar,Math.PI/10*w.wobble,0,2*Math.PI):pe(E,w.x,w.y,Math.abs(ie-J)*w.ovalScalar,Math.abs(ue-Z)*w.ovalScalar,Math.PI/10*w.wobble,0,2*Math.PI);else if(w.shape==="star")for(var Ie=Math.PI/2*3,I=4*w.scalar,U=8*w.scalar,ye=w.x,je=w.y,xe=5,Se=Math.PI/xe;xe--;)ye=w.x+Math.cos(Ie)*U,je=w.y+Math.sin(Ie)*U,E.lineTo(ye,je),Ie+=Se,ye=w.x+Math.cos(Ie)*I,je=w.y+Math.sin(Ie)*I,E.lineTo(ye,je),Ie+=Se;else E.moveTo(Math.floor(w.x),Math.floor(w.y)),E.lineTo(Math.floor(w.wobbleX),Math.floor(Z)),E.lineTo(Math.floor(ie),Math.floor(ue)),E.lineTo(Math.floor(J),Math.floor(w.wobbleY));return E.closePath(),E.fill(),w.tick<w.totalTicks}function ne(E,w,O,J,Z){var ie=w.slice(),ue=E.getContext("2d"),se,de,_e=y(function(Ae){function Be(){se=de=null,ue.clearRect(0,0,J.width,J.height),g.clear(),Z(),Ae()}function Ge(){a&&!(J.width===l.width&&J.height===l.height)&&(J.width=E.width=l.width,J.height=E.height=l.height),!J.width&&!J.height&&(O(E),J.width=E.width,J.height=E.height),ue.clearRect(0,0,J.width,J.height),ie=ie.filter(function(Ze){return oe(ue,Ze)}),ie.length?se=x.frame(Ge):Be()}se=x.frame(Ge),de=Be});return{addFettis:function(Ae){return ie=ie.concat(Ae),_e},canvas:E,promise:_e,reset:function(){se&&x.cancel(se),de&&de()}}}function G(E,w){var O=!E,J=!!k(w||{},"resize"),Z=!1,ie=k(w,"disableForReducedMotion",Boolean),ue=u&&!!k(w||{},"useWorker"),se=ue?b():null,de=O?W:te,_e=E&&se?!!E.__confetti_initialized:!1,Ae=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Be;function Ge(Ie,I,U){for(var ye=k(Ie,"particleCount",q),je=k(Ie,"angle",Number),xe=k(Ie,"spread",Number),Se=k(Ie,"startVelocity",Number),Ce=k(Ie,"decay",Number),Te=k(Ie,"gravity",Number),Re=k(Ie,"drift",Number),rt=k(Ie,"colors",F),at=k(Ie,"ticks",Number),ht=k(Ie,"shapes"),At=k(Ie,"scalar"),St=!!k(Ie,"flat"),fr=V(Ie),It=ye,Rt=[],_t=E.width*fr.x,Qr=E.height*fr.y;It--;)Rt.push(K({x:_t,y:Qr,angle:je,spread:xe,startVelocity:Se,color:rt[It%rt.length],shape:ht[$(0,ht.length)],ticks:at,decay:Ce,gravity:Te,drift:Re,scalar:At,flat:St}));return Be?Be.addFettis(Rt):(Be=ne(E,Rt,de,I,U),Be.promise)}function Ze(Ie){var I=ie||k(Ie,"disableForReducedMotion",Boolean),U=k(Ie,"zIndex",Number);if(I&&Ae)return y(function(Se){Se()});O&&Be?E=Be.canvas:O&&!E&&(E=fe(U),document.body.appendChild(E)),J&&!_e&&de(E);var ye={width:E.width,height:E.height};se&&!_e&&se.init(E),_e=!0,se&&(E.__confetti_initialized=!0);function je(){if(se){var Se={getBoundingClientRect:function(){if(!O)return E.getBoundingClientRect()}};de(Se),se.postMessage({resize:{width:Se.width,height:Se.height}});return}ye.width=ye.height=null}function xe(){Be=null,J&&(Z=!1,r.removeEventListener("resize",je)),O&&E&&(document.body.contains(E)&&document.body.removeChild(E),E=null,_e=!1)}return J&&!Z&&(Z=!0,r.addEventListener("resize",je,!1)),se?se.fire(Ie,ye,xe):Ge(Ie,ye,xe)}return Ze.reset=function(){se&&se.reset(),Be&&Be.reset()},Ze}var ce;function he(){return ce||(ce=G(null,{useWorker:!0,resize:!0})),ce}function B(E,w,O,J,Z,ie,ue){var se=new Path2D(E),de=new Path2D;de.addPath(se,new DOMMatrix(w));var _e=new Path2D;return _e.addPath(de,new DOMMatrix([Math.cos(ue)*Z,Math.sin(ue)*Z,-Math.sin(ue)*ie,Math.cos(ue)*ie,O,J])),_e}function z(E){if(!d)throw new Error("path confetti are not supported in this browser");var w,O;typeof E=="string"?w=E:(w=E.path,O=E.matrix);var J=new Path2D(w),Z=document.createElement("canvas"),ie=Z.getContext("2d");if(!O){for(var ue=1e3,se=ue,de=ue,_e=0,Ae=0,Be,Ge,Ze=0;Ze<ue;Ze+=2)for(var Ie=0;Ie<ue;Ie+=2)ie.isPointInPath(J,Ze,Ie,"nonzero")&&(se=Math.min(se,Ze),de=Math.min(de,Ie),_e=Math.max(_e,Ze),Ae=Math.max(Ae,Ie));Be=_e-se,Ge=Ae-de;var I=10,U=Math.min(I/Be,I/Ge);O=[U,0,0,U,-Math.round(Be/2+se)*U,-Math.round(Ge/2+de)*U]}return{type:"path",path:w,matrix:O}}function ae(E){var w,O=1,J="#000000",Z='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof E=="string"?w=E:(w=E.text,O="scalar"in E?E.scalar:O,Z="fontFamily"in E?E.fontFamily:Z,J="color"in E?E.color:J);var ie=10*O,ue=""+ie+"px "+Z,se=new OffscreenCanvas(ie,ie),de=se.getContext("2d");de.font=ue;var _e=de.measureText(w),Ae=Math.ceil(_e.actualBoundingBoxRight+_e.actualBoundingBoxLeft),Be=Math.ceil(_e.actualBoundingBoxAscent+_e.actualBoundingBoxDescent),Ge=2,Ze=_e.actualBoundingBoxLeft+Ge,Ie=_e.actualBoundingBoxAscent+Ge;Ae+=Ge+Ge,Be+=Ge+Ge,se=new OffscreenCanvas(Ae,Be),de=se.getContext("2d"),de.font=ue,de.fillStyle=J,de.fillText(w,Ze,Ie);var I=1/O;return{type:"bitmap",bitmap:se.transferToImageBitmap(),matrix:[I,0,0,I,-Ae*I/2,-Be*I/2]}}n.exports=function(){return he().apply(this,arguments)},n.exports.reset=function(){he().reset()},n.exports.create=G,n.exports.shapeFromPath=z,n.exports.shapeFromText=ae})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),ia,!1);const Sw=ia.exports;ia.exports.create;const _w=({workout:i,onClose:r,onComplete:n,onRegenerateWorkout:a,isRegenerating:l,onUpdateWorkout:u})=>{const[d,m]=j.useState(!1),[p,y]=j.useState(!1),[g,x]=j.useState(i),[b,N]=j.useState(i.completed);rr.useEffect(()=>{N(i.completed)},[i.completed]);const S=K=>{const[oe,ne,G]=K.split("-").map(Number);return new Date(oe,ne-1,G).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},C=K=>{switch(K){case"strength":return"strength";case"cardio":return"cardio";case"flexibility":return"flexibility";case"rest":return"rest";case"mixed":return"mixed";default:return"mixed"}},k=K=>{if(!K)return{label:"",cls:""};const oe=(K||"").toString().toLowerCase();return oe==="easy"||oe==="beginner"?{label:"Easy",cls:"difficulty-easy"}:oe==="medium"||oe==="intermediate"?{label:"Medium",cls:"difficulty-medium"}:oe==="hard"||oe==="advanced"?{label:"Hard",cls:"difficulty-hard"}:{label:oe.charAt(0).toUpperCase()+oe.slice(1),cls:`difficulty-${oe.replace(/\s+/g,"-")}`}},q=d?i.alternativeWorkouts:i.workouts,[$,L]=rr.useState(null),[F,ee]=rr.useState(null),V=(K,oe=!1)=>{const ne={...g};oe?ne.alternativeWorkouts=ne.alternativeWorkouts.filter((G,ce)=>ce!==K):ne.workouts=ne.workouts.filter((G,ce)=>ce!==K),x(ne)},W=(K,oe=!1)=>{if(oe){const ne=g.alternativeWorkouts[K];x({...g,workouts:[...g.workouts,ne],alternativeWorkouts:g.alternativeWorkouts.filter((G,ce)=>ce!==K)})}else{const ne=g.workouts[K];x({...g,workouts:g.workouts.filter((G,ce)=>ce!==K),alternativeWorkouts:[...g.alternativeWorkouts,ne]})}},te=()=>{const K=g.workouts.length>0,oe=g.alternativeWorkouts.length>0;if(!K&&!oe){u&&u({...g,workouts:[],alternativeWorkouts:[]}),r();return}u&&u(g),y(!1),r()},fe=()=>{x(i),y(!1)},pe=()=>{b||Sw({particleCount:100,spread:70,origin:{y:.3},zIndex:9999});const K=!b;N(K),u&&u({...i,completed:K}),n()};return o.jsx("div",{className:"modal-overlay",onClick:r,children:o.jsxs("div",{className:"workout-modal",onClick:K=>K.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsxs("div",{className:"modal-title-section",children:[o.jsx("div",{className:`workout-type-badge ${C(i.type)}`,children:i.type==="rest"?"Rest Day":i.type==="strength"?"Strength":i.type==="cardio"?"Cardio":i.type==="flexibility"?"Flexibility":"Mixed"}),o.jsxs("div",{children:[o.jsx("h2",{children:S(i.date)}),i.completed&&o.jsxs("span",{className:"completed-badge",children:[o.jsx(zc,{size:16}),"Completed"]})]})]}),"          ",o.jsx("button",{className:"close-button",onClick:r,title:"Close modal",children:o.jsx(Zi,{size:24})})]}),o.jsx("div",{className:"modal-content",children:i.type==="rest"?i.isRickroll?o.jsxs("div",{className:"rest-day-content rickroll-rest",children:[o.jsx("div",{className:"rest-icon",children:o.jsx(Ks,{size:48})}),o.jsx("h3",{children:"Rest & Recharge"}),o.jsx("p",{children:"Todays a gentle recovery day  take it slow and treat yourself. A short, uplifting break can do wonders. Enjoy this pick-me-up while you rest."}),o.jsx("div",{className:"rickroll-embed",children:o.jsx("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/dQw4w9WgXcQ?rel=0",title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),o.jsxs("div",{className:"rest-activities",children:[o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Slow breathing or meditation (5-10 min)"})]}),o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Enjoy a calming drink while you relax"})]})]})]}):o.jsxs("div",{className:"rest-day-content",children:[o.jsx("div",{className:"rest-icon",children:o.jsx(Ks,{size:48})}),o.jsx("h3",{children:"Recovery Day"}),o.jsx("p",{children:"Take this day to rest and let your muscles recover. You can do light stretching, meditation, or gentle walking."}),o.jsxs("div",{className:"rest-activities",children:[o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Meditation (10-15 min)"})]}),o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Light walking"})]}),o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Relaxing bath"})]}),o.jsxs("div",{className:"activity-item",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Reading or relaxing"})]})]})]}):o.jsxs("div",{className:"workout-content",children:[o.jsxs("div",{className:"workout-toggle",children:[o.jsx("button",{className:`toggle-button ${d?"":"active"}`,onClick:()=>m(!1),children:"Main Workout"}),o.jsx("button",{className:`toggle-button ${d?"active":""}`,onClick:()=>m(!0),children:"Alternative"})]}),"              ",o.jsx("div",{className:"exercise-list",children:(p?d?g.alternativeWorkouts:g.workouts:q).map((K,oe)=>o.jsxs("div",{className:"exercise-card",role:p?void 0:"button",tabIndex:p?void 0:0,onClick:()=>{p||(L(K.name),ee(K))},onKeyDown:ne=>{!p&&(ne.key==="Enter"||ne.key===" ")&&(ne.preventDefault(),L(K.name),ee(K))},children:[o.jsxs("div",{className:"exercise-header",children:[o.jsxs("div",{className:"exercise-title-section",children:[o.jsx("h4",{children:K.name}),(()=>{const{label:ne,cls:G}=k(K.difficulty);return o.jsx("div",{className:`difficulty-badge ${G}`,children:ne})})()]}),p&&o.jsxs("div",{className:"exercise-actions",children:[o.jsx("button",{className:"action-btn swap-btn",onClick:ne=>{ne.stopPropagation(),W(oe,d)},title:d?"Move to main workout":"Move to alternative",children:d?o.jsx(Ry,{size:16}):o.jsx(Dy,{size:16})}),o.jsx("button",{className:"action-btn delete-btn",onClick:ne=>{ne.stopPropagation(),V(oe,d)},title:"Delete exercise",children:o.jsx(_o,{size:16})})]})]}),o.jsxs("div",{className:"exercise-details",children:[K.sets&&K.reps&&o.jsxs("div",{className:"detail-item",children:[o.jsx(kt,{size:16}),o.jsxs("span",{children:[K.sets," sets  ",K.reps," reps"]})]}),K.duration&&o.jsxs("div",{className:"detail-item",children:[o.jsx(Js,{size:16}),o.jsx("span",{children:K.duration})]}),K.muscleGroups&&K.muscleGroups.length>0&&o.jsxs("div",{className:"detail-item",children:[o.jsx(Ks,{size:16}),o.jsx("span",{children:K.muscleGroups.join(", ")})]})]}),o.jsx("p",{className:"exercise-description",children:K.description}),Array.isArray(K.equipment)&&K.equipment.some(ne=>ne!=="No equipment")&&o.jsx("div",{className:"equipment-tags",children:K.equipment.filter(ne=>ne!=="No equipment").map((ne,G)=>o.jsx("span",{className:"equipment-tag",children:ne},G))})]},oe))})]})}),$&&o.jsx(kw,{name:$,exercise:F||void 0,onClose:()=>{L(null),ee(null)}}),i.type!=="rest"&&o.jsx("div",{className:"modal-footer",children:o.jsx("div",{className:"action-buttons",children:p?o.jsxs(o.Fragment,{children:[o.jsxs("button",{className:"btn btn-secondary",onClick:fe,children:[o.jsx(Zi,{size:16}),"Cancel"]}),o.jsxs("button",{className:"btn btn-primary",onClick:te,children:[o.jsx(Vc,{size:16}),"Save Changes"]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("button",{className:"btn btn-secondary",onClick:()=>y(!0),children:[o.jsx(Hc,{size:16}),"Edit Workout"]}),o.jsx("button",{className:"btn btn-secondary",onClick:a,disabled:!!l,"aria-busy":!!l,children:l?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"button-spinner",children:o.jsx("div",{className:"loading-dumbbell small",children:o.jsx(kt,{size:16,color:"#fff"})})}),o.jsx("span",{className:"generating-text",children:"Generating..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(df,{size:16}),"New Workout"]})}),o.jsx("button",{className:`btn ${b?"btn-accent":"btn-primary"}`,onClick:pe,children:b?o.jsxs(o.Fragment,{children:[o.jsx(df,{size:16}),"Mark Incomplete"]}):o.jsxs(o.Fragment,{children:[o.jsx(zc,{size:16}),"Complete Workout"]})})]})})}),i.type!=="rest"&&o.jsxs("div",{className:"add-workout-section",children:[o.jsx("h3",{children:"Select Date and Workout Type"}),o.jsxs("div",{className:"date-picker-container",children:[o.jsx("label",{htmlFor:"workout-date",children:"Date:"}),o.jsx("input",{type:"date",id:"workout-date",className:"date-picker",value:g.date,onChange:K=>x({...g,date:K.target.value})})]}),o.jsxs("div",{className:"workout-type-container",children:[o.jsx("label",{htmlFor:"workout-type",children:"Workout Type:"}),o.jsxs("select",{id:"workout-type",className:"workout-type-selector",value:g.type,onChange:K=>x({...g,type:K.target.value}),children:[o.jsx("option",{value:"strength",children:"Strength"}),o.jsx("option",{value:"cardio",children:"Cardio"}),o.jsx("option",{value:"flexibility",children:"Flexibility"}),o.jsx("option",{value:"rest",children:"Rest"})]})]}),o.jsx("button",{className:"add-workout-button",onClick:te,children:"Add Workout Day"})]}),o.jsx("style",{children:`
            .add-workout-section {
              margin-top: 20px;
              padding: 15px;
              background-color: var(--light-blue);
              border-radius: 8px;
              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            }
            .date-picker-container, .workout-type-container {
              margin-bottom: 15px;
            }
            .date-picker, .workout-type-selector {
              width: 100%;
              padding: 10px;
              border: 1px solid var(--gray);
              border-radius: 4px;
              font-size: 16px;
            }
            .add-workout-button {
              width: 100%;
              padding: 10px;
              background-color: var(--green);
              color: white;
              font-size: 16px;
              border: none;
              border-radius: 4px;
              cursor: pointer;
              transition: background-color 0.3s;
            }
            .add-workout-button:hover {
              background-color: var(--dark-green);
            }
          `})]})})},jw=({workoutPlan:i,userData:r,onUpdatePlan:n})=>{const a=j.useRef(0),l=j.useRef(0),[u,d]=j.useState(new Date),[m,p]=j.useState(null),[y,g]=j.useState(!1),[x,b]=j.useState(null),[N,S]=j.useState(!1),[C,k]=j.useState(null),[q,$]=j.useState(!1),[L,F]=j.useState(!1),[ee,V]=j.useState(!1),[W,te]=j.useState(!1),[fe,pe]=j.useState([]),[K,oe]=j.useState(!1),[ne,G]=j.useState(["strength"]),[ce,he]=j.useState(""),[B,z]=j.useState([]),[ae,E]=j.useState(""),[w,O]=j.useState(!1),[J,Z]=j.useState(""),[ie,ue]=j.useState(null),[se,de]=j.useState(null),[_e,Ae]=j.useState(!1),[Be,Ge]=j.useState(!1),[Ze,Ie]=j.useState(null),[I,U]=j.useState(!1),[ye,je]=j.useState("strength"),[xe,Se]=j.useState({duration:"30 min",muscleGroups:[],equipment:[]}),[Ce,Te]=j.useState(!1),[Re,rt]=j.useState([]);if(j.useEffect(()=>{if(i&&i.dailyWorkouts.length>0&&!I){const[D,H,le]=i.startDate.split("-").map(Number);d(new Date(D,H-1,le))}},[i]),j.useEffect(()=>{let D=!0;return(async()=>{try{if(i&&i.dailyWorkouts&&i.dailyWorkouts.length>0)return;try{if(localStorage.getItem("fitbuddy_no_auto_restore")||sessionStorage.getItem("fitbuddy_no_auto_restore"))return}catch{}const le=Ar();if(!le||!le.id||(await rs(le.id),!D))return;const ge=Zs();ge&&n(ge)}catch(le){console.warn("Failed to restore server data in WorkoutCalendar:",le)}})(),()=>{D=!1}},[n]),j.useEffect(()=>{},[i]),j.useEffect(()=>{},[]),j.useEffect(()=>{if(i){let D=i.dailyWorkouts.map(H=>{if(H.type==="mixed"&&(!H.workouts||H.workouts.length===0)&&cs(H)==="0 min"){const le={...H,type:"rest",workouts:[{name:"Rest Day",description:"Take a well-deserved break and let your body recover.",duration:"0 min",difficulty:"beginner",muscleGroups:[]}],alternativeWorkouts:[]};return Math.random()<1e-6&&(le.isRickroll=!0),le}return H});try{const H=Array.isArray(i.weeklyStructure)?i.weeklyStructure:[],le=typeof i.totalDays=="number"&&i.totalDays>0?i.totalDays:i.dailyWorkouts?i.dailyWorkouts.length:0;if(i.startDate&&le>0&&H.length===7){const ge=i.startDate.split("-").map(Number);if(ge.length===3){const Me=new Date(ge[0],ge[1]-1,ge[2]),We=new Set((D||[]).map(He=>He.date));for(let He=0;He<le;He++){const ze=new Date(Me.getTime());ze.setDate(Me.getDate()+He);const qt=dr(ze,"yyyy-MM-dd"),Ke=He%7;if((H[Ke]||"").toString().toLowerCase().includes("rest")&&!We.has(qt)){const Je={date:qt,workouts:[{name:"Rest Day",description:"Take a well-deserved break and let your body recover.",duration:"0 min",difficulty:"beginner",muscleGroups:[]}],alternativeWorkouts:[],completed:!1,type:"rest"};Math.random()<1/1e6&&(Je.isRickroll=!0),D=[...D,Je],We.add(qt)}}}}}catch(H){console.warn("Failed to populate missing rest days from weeklyStructure:",H)}if(JSON.stringify(D)!==JSON.stringify(i.dailyWorkouts)){const H={...i,dailyWorkouts:D,totalDays:D.length};n(H);try{console.log("[WorkoutCalendar] Saving normalized plan to localStorage:",{totalDays:H.totalDays,dailyWorkoutsCount:H.dailyWorkouts.length}),En(H)}catch(le){console.warn("Failed to save normalized plan locally:",le)}}}},[i,n]),!i||!r)return o.jsx("div",{className:"calendar-no-plan-container",children:o.jsxs("div",{className:"calendar-no-plan-content fade-in-bounce",children:[o.jsx("div",{className:"calendar-no-plan-icon-bg",children:o.jsx(kt,{size:48,color:"#fff"})}),o.jsx("h1",{className:"calendar-no-plan-title",children:"No Plan"}),o.jsx("h2",{className:"calendar-no-plan-message",children:"No Workout Plan Found"}),o.jsx("p",{className:"calendar-no-plan-desc",children:"Please complete the questionnaire first to generate your personalized workout plan."}),o.jsx("a",{className:"calendar-no-plan-btn",href:"/questionnaire",children:"Go to Questionnaire"})]})});const at=mv(u),ht=fv(u),At=pv({start:at,end:ht}),St=Array(at.getDay()).fill(null),fr=Array((7-(at.getDay()+At.length)%7)%7).fill(null),It=D=>{let H;if(typeof D=="string")if(D.includes("T"))H=new Date(D);else{const[le,ge,Me]=D.split("-").map(Number);H=new Date(le,ge-1,Me)}else H=D;if(isNaN(H.getTime()))throw new RangeError("Invalid time value");return dr(H,"yyyy-MM-dd")},Rt=D=>{const H=It(D.toISOString());return i.dailyWorkouts.find(ge=>ge.date===H)||null},_t=D=>{const H=dr(D,"yyyy-MM-dd");if(W){pe(ge=>ge.includes(H)?ge.filter(Me=>Me!==H):[...ge,H]);return}if(w){if(x===H||_e)return;const ge=new Date(D.getFullYear(),D.getMonth(),D.getDate()-1);us(ge),O(!1),Ie(H);return}if(x===H||_e)return;if(Ce){rt(ge=>ge.includes(H)?ge.filter(Me=>Me!==H):[...ge,H]);return}const le=Rt(D);if(N&&le){ii(le);return}if(N&&!le){const ge=new Date(D.getFullYear(),D.getMonth(),D.getDate()-1);us(ge);return}le&&(p(le),g(!0))},Qr=D=>{const H=i.dailyWorkouts.map(ge=>ge.date===D?{...ge,completed:!ge.completed}:ge),le={...i,dailyWorkouts:H};n(le)},nr=D=>{const H=new Date(u);D==="prev"?H.setMonth(H.getMonth()-1):H.setMonth(H.getMonth()+1),U(!0),d(H),window.setTimeout(()=>U(!1),2e3)},Bo=D=>{switch(D){case"strength":return"strength";case"cardio":return"cardio";case"flexibility":return"flexibility";case"rest":return"rest";case"mixed":return"mixed";default:return"mixed"}},An=i.dailyWorkouts.filter(D=>D.completed).length,In=i.dailyWorkouts.filter(D=>D.type!=="rest").length,ls=In>0?An/In*100:0,cs=D=>{if(D.type==="rest")return"0 min";let H=0;return D.workouts.forEach(le=>{if(le.duration){const ge=le.duration.match(/(\d+)/);ge&&(H+=parseInt(ge[1]))}}),H>0?`${H} min`:"30 min"},ii=D=>{k({...D}),$(!0),S(!0)},Yr=()=>{if(!C||!i)return;const D=i.dailyWorkouts.map(le=>le.date===C.date?C:le),H={...i,dailyWorkouts:D};n(H),$(!1),S(!1),k(null)},Xr=()=>{$(!1),S(!1),k(null)},us=D=>{if(!i)return;let H;D?H=new Date(D.getFullYear(),D.getMonth(),D.getDate()+1):H=new Date;const le=dr(H,"yyyy-MM-dd"),ge=i.dailyWorkouts.find(ze=>ze.date===le);if(ge){const ze={...ge,type:"rest",workouts:[{name:"Rest Day",description:"Take a well-deserved break and let your body recover.",duration:"0 min",difficulty:"beginner",muscleGroups:[]}],alternativeWorkouts:[]};Zr(ze);return}const Me={date:le,workouts:[{name:"Rest Day",description:"Take a well-deserved break and let your body recover.",duration:"0 min",difficulty:"beginner",muscleGroups:[]}],alternativeWorkouts:[],completed:!1,type:"rest"},We=[...i?.dailyWorkouts||[],Me];Math.random()<1/1e6&&(Me.isRickroll=!0);const He={...i,dailyWorkouts:We};n(He)},la=()=>{ae?(us(new Date(ae)),E(""),F(!1)):F(!0)},ca=()=>{J?(ha(new Date(J),ye,xe),Z(""),V(!1)):V(!0)},ua=()=>{const D=Date.now();if(D-l.current<350){console.debug("[WorkoutCalendar] handleSelectToAddToggle ignored - rapid duplicate");return}l.current=D,console.debug("[WorkoutCalendar] handleSelectToAddToggle called",{addMode:W,showBatchAddPanel:K,selectedForAddLength:fe.length}),W?(console.debug("[WorkoutCalendar] exiting selection mode"),te(!1),pe([]),oe(!1),S(!0)):(te(!0),Te(!1),pe([]),oe(!1),S(!0))},da=()=>{if(console.debug("[WorkoutCalendar] handleConfirmSelection",{selectedForAddLength:fe.length}),fe.length===0){alert("Please select at least one date before confirming.");return}te(!1),oe(!0),S(!0)},ai=async()=>{if(!i||!r)return;if(fe.length===0){alert("Please select at least one date.");return}oe(!1),S(!1),te(!1),z([...fe]);const D=hr(),H=D?.answers||{},le=D?.questionsList||[];let ge=[...i.dailyWorkouts];for(const We of fe){if(ge.some(He=>He.date===We)){console.warn("Skipping existing date during batch add:",We);continue}try{const He=ne&&ne.length>0?ne.join(","):"mixed",ze={...H,batchComments:ce},qt=ge.filter(nt=>nt.date!==We),Ke=await Pc(r,ze,le,We,He,qt,[]),Je=((nt,Yt)=>{const Ln=(nt?.date||Yt||"").toString();let Lr=Ln;try{Ln.includes("T")&&(Lr=dr(new Date(Ln),"yyyy-MM-dd"))}catch{Lr=Yt}Lr=Yt;const Pe=Array.isArray(nt?.workouts)?nt.workouts:Array.isArray(nt?.exercises)?nt.exercises:[],sr=Array.isArray(nt?.alternativeWorkouts)?nt.alternativeWorkouts:Array.isArray(nt?.alternativeExercises)?nt.alternativeExercises:[];return{date:Lr,type:nt?.type||"mixed",workouts:Pe.map(De=>({name:De?.name||De?.exercise||"Exercise",description:De?.description||De?.instructions||"",difficulty:De?.difficulty||"beginner",duration:De?.duration||(De?.durationSeconds?`${De.durationSeconds} sec`:""),reps:De?.reps??"",muscleGroups:Array.isArray(De?.muscleGroups)?De.muscleGroups:De?.muscleGroups?[De.muscleGroups]:[],equipment:Array.isArray(De?.equipment)?De.equipment:De?.equipment?[De.equipment]:[],sets:typeof De?.sets=="number"?De.sets:void 0,rest:De?.rest||void 0})),alternativeWorkouts:sr.map(De=>({name:De?.name||De?.exercise||"Alt Exercise",description:De?.description||De?.instructions||"",difficulty:De?.difficulty||"beginner",duration:De?.duration||(De?.durationSeconds?`${De.durationSeconds} sec`:""),reps:De?.reps??"",muscleGroups:Array.isArray(De?.muscleGroups)?De.muscleGroups:De?.muscleGroups?[De.muscleGroups]:[],equipment:Array.isArray(De?.equipment)?De.equipment:De?.equipment?[De.equipment]:[],sets:typeof De?.sets=="number"?De.sets:void 0,rest:De?.rest||void 0})),completed:!!nt?.completed,totalTime:nt?.totalTime||""}})(Ke,We);ge=[...ge,Je]}catch(He){console.error("Batch generate error for date",We,He)}}const Me={...i,dailyWorkouts:ge,totalDays:ge.length};n(Me);try{console.log("[WorkoutCalendar] Saving batch-generated plan to localStorage:",{totalDays:Me.totalDays,dailyWorkoutsCount:Me.dailyWorkouts.length}),En(Me)}catch(We){console.warn("Failed to save batch-generated plan locally:",We)}z([]),pe([])},ha=async(D,H,le)=>{if(!i||!r)return;let ge,Me;if(D){if(ge=new Date(D.getFullYear(),D.getMonth(),D.getDate()+1),Me=dr(ge,"yyyy-MM-dd"),i.dailyWorkouts.find(nt=>nt.date===Me))return}else{const Je=i.dailyWorkouts.length>0?new Date(Math.max(...i.dailyWorkouts.map(nt=>new Date(nt.date).getTime()))):new Date(i.startDate);ge=new Date(Je.getTime()+1440*60*1e3),Me=dr(ge,"yyyy-MM-dd")}const We=[...r.preferences||[],...le?.muscleGroups||[],...le?.equipment||[],`Workout type: ${H||"mixed"}`,`Duration: ${le?.duration||"30 min"}`],He={...r,preferences:We},ze=await Hi(He,{},[]),qt={date:Me,type:H||"mixed",workouts:ze.dailyWorkouts[0]?.workouts||[],alternativeWorkouts:[],completed:!1},Ke=[...i.dailyWorkouts,qt],Dr={...i,dailyWorkouts:Ke,totalDays:Ke.length};n(Dr)},Zr=D=>{if(!i)return;const H=i.dailyWorkouts.map(ge=>ge.date===D.date?D:ge),le={...i,dailyWorkouts:H};n(le)},oi=async D=>{if(!i||!r)return;g(!1),b(D.date),Ge(!0);const H=hr(),le=H?.answers||{},ge=H?.questionsList||[];try{const Me=i.dailyWorkouts.filter(Je=>Je.date!==D.date),We=[...D.workouts,...D.alternativeWorkouts];console.log("[AI] Sending generateWorkoutForDay request:",{username:r?.username,date:D.date,type:D.type,othersCount:Me.length,currentDayListLength:We.length});const He=await Pc(r,le,ge,D.date,D.type,Me,We);console.log("[AI] Received response for generateWorkoutForDay:",He);const qt=(Je=>{const nt=(Je?.date||D.date||"").toString();let Yt=nt;try{nt.includes("T")&&(Yt=dr(new Date(nt),"yyyy-MM-dd"))}catch{Yt=D.date}Yt=D.date;const Ln=Array.isArray(Je?.workouts)?Je.workouts:Array.isArray(Je?.exercises)?Je.exercises:[],Lr=Array.isArray(Je?.alternativeWorkouts)?Je.alternativeWorkouts:Array.isArray(Je?.alternativeExercises)?Je.alternativeExercises:[];return{date:Yt,type:Je?.type||D.type||"mixed",workouts:Ln.map(Pe=>({name:Pe?.name||Pe?.exercise||"Exercise",description:Pe?.description||Pe?.instructions||"",difficulty:Pe?.difficulty||"beginner",duration:Pe?.duration||(Pe?.durationSeconds?`${Pe.durationSeconds} sec`:""),reps:Pe?.reps??"",muscleGroups:Array.isArray(Pe?.muscleGroups)?Pe.muscleGroups:Pe?.muscleGroups?[Pe.muscleGroups]:[],equipment:Array.isArray(Pe?.equipment)?Pe.equipment:Pe?.equipment?[Pe.equipment]:[],sets:typeof Pe?.sets=="number"?Pe.sets:void 0,rest:Pe?.rest||void 0})),alternativeWorkouts:Lr.map(Pe=>({name:Pe?.name||Pe?.exercise||"Alt Exercise",description:Pe?.description||Pe?.instructions||"",difficulty:Pe?.difficulty||"beginner",duration:Pe?.duration||(Pe?.durationSeconds?`${Pe.durationSeconds} sec`:""),reps:Pe?.reps??"",muscleGroups:Array.isArray(Pe?.muscleGroups)?Pe.muscleGroups:Pe?.muscleGroups?[Pe.muscleGroups]:[],equipment:Array.isArray(Pe?.equipment)?Pe.equipment:Pe?.equipment?[Pe.equipment]:[],sets:typeof Pe?.sets=="number"?Pe.sets:void 0,rest:Pe?.rest||void 0})),completed:!!Je?.completed,totalTime:Je?.totalTime||""}})(He);console.log("[REGenerate] Normalized regenerated day:",qt);const Ke=i.dailyWorkouts.map(Je=>Je.date===D.date?qt:Je),Dr={...i,dailyWorkouts:Ke};n(Dr);try{console.log("[WorkoutCalendar] Saving regenerated plan to localStorage:",{dailyWorkoutsCount:Dr.dailyWorkouts.length}),En(Dr),console.log("[REGenerate] saved regenerated plan to localStorage")}catch(Je){console.warn("Failed to save regenerated plan locally:",Je)}p(qt),g(!0),Ie(qt.date),window.setTimeout(()=>Ie(null),2e3),b(null),Ge(!1)}catch(Me){console.error("Error regenerating single-day workout with AI:",Me),b(null),Ge(!1)}},Rn=async()=>{if(!i||!r||!J)return;b(J);const D=hr(),H=D?.answers||{},le=D?.questionsList||[];try{const ge=i.dailyWorkouts.filter(ze=>ze.date!==J);console.log("[AI] Sending generateWorkoutForDay request:",{username:r?.username,date:J,type:ye,othersCount:ge.length});const Me=await Pc(r,H,le,J,ye,ge,[]);console.log("[AI] Received response for generateWorkoutForDay:",Me);const We=[...i.dailyWorkouts,Me],He={...i,dailyWorkouts:We};n(He);try{En(He)}catch(ze){console.warn("Failed to save generated day locally:",ze)}console.log("[Calendar] Updated plan after generation:",{totalDays:He.totalDays||He.dailyWorkouts.length,dailyWorkoutsCount:He.dailyWorkouts.length,addedDate:J,addedDay:Me}),b(null)}catch(ge){console.error("Error generating workout:",ge),b(null)}},Wo=(D,H)=>{ue(H),Ae(!0);try{D.dataTransfer.effectAllowed="move"}catch{}},Dn=(D,H)=>{D.preventDefault();try{D.dataTransfer.dropEffect="move"}catch{}de(It(H.toISOString()))},ds=()=>{de(null)},hs=()=>{Ae(!1),ue(null),de(null)},li=(D,H)=>{if(D.preventDefault(),!ie||!i){Ae(!1);return}const le=It(H.toISOString()),ge=ie.date;if(le===ge){ue(null),de(null),Ae(!1);return}const Me=i.dailyWorkouts.find(ze=>ze.date===le);let We=[...i.dailyWorkouts];Me?We=We.map(ze=>ze.date===ge?{...Me,date:ge}:ze.date===le?{...ie,date:le}:ze):We=We.map(ze=>ze.date===ge?{...ze,date:le}:ze),U(!0),d(u);const He={...i,dailyWorkouts:We};n(He),window.setTimeout(()=>U(!1),2e3),ue(null),de(null),Ae(!1)},en=(D,H)=>{Se(le=>({...le,[D]:H}))},$o=async()=>{if(!i)return;const D=i.dailyWorkouts.map(le=>le.date);rt(D);const H={...i,dailyWorkouts:[]};try{localStorage.setItem("fitbuddy_no_auto_restore","1"),sessionStorage.setItem("fitbuddy_no_auto_restore","1"),setTimeout(()=>{try{localStorage.removeItem("fitbuddy_no_auto_restore")}catch{}try{sessionStorage.removeItem("fitbuddy_no_auto_restore")}catch{}},3e5)}catch(le){console.warn("Failed to set no-auto-restore guard:",le)}n(H);try{En(H)}catch(le){console.warn("Failed to persist cleared plan:",le)}try{const{loadUserData:le}=await $e(async()=>{const{loadUserData:We}=await Promise.resolve().then(()=>zt);return{loadUserData:We}},void 0),Me=le()?.id;Me&&ra(Me).catch(()=>{})}catch{}S(!1),Te(!1),alert("Calendar has been cleared!")},zo=()=>{if(!i)return;if(Re.length===0){alert("Please select at least one date to delete.");return}const D=i.dailyWorkouts.filter(H=>!Re.includes(H.date));n({...i,dailyWorkouts:D}),rt([]),Te(!1),S(!1)},Rr=()=>{rt([]),Te(!1)};return o.jsxs("div",{className:"calendar-page",children:[o.jsxs("div",{className:"calendar-container",children:[o.jsxs("div",{className:"calendar-header",children:[o.jsxs("div",{className:"user-info",children:[o.jsxs("h1",{children:["Welcome back, ",r?.username?.trim()||"User","!"]}),o.jsx("p",{children:i.description})]}),o.jsxs("div",{className:"progress-stats",children:[o.jsxs("div",{className:"stat-card",children:[o.jsx(_r,{size:24}),o.jsxs("div",{className:"stat-content",children:[o.jsx("span",{className:"stat-number",children:An}),o.jsx("span",{className:"stat-label",children:"Completed"})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx(Js,{size:24}),o.jsxs("div",{className:"stat-content",children:[o.jsx("span",{className:"stat-number",children:In-An}),o.jsx("span",{className:"stat-label",children:"Remaining"})]})]}),o.jsx("div",{className:"progress-circle",children:o.jsxs("svg",{viewBox:"0 0 36 36",className:"circular-chart",children:[o.jsx("path",{className:"circle-bg",d:`M18 2.0845\r
                    a 15.9155 15.9155 0 0 1 0 31.831\r
                    a 15.9155 15.9155 0 0 1 0 -31.831`}),o.jsx("path",{className:"circle",strokeDasharray:`${ls}, 100`,d:`M18 2.0845\r
                    a 15.9155 15.9155 0 0 1 0 31.831\r
                    a 15.9155 15.9155 0 0 1 0 -31.831`}),o.jsxs("text",{x:"18",y:"20.35",className:"percentage",children:[Math.round(ls),"%"]})]})})]})]}),o.jsxs("div",{className:"calendar-nav",children:[o.jsx("button",{className:"nav-button",onClick:()=>nr("prev"),onDragEnter:()=>{const D=Date.now();D-a.current>=1e3&&(nr("prev"),a.current=D)},"aria-label":"Previous month",children:o.jsx(qc,{size:20})}),o.jsx("h2",{className:"month-year",children:dr(u,"MMMM yyyy")}),o.jsx("button",{className:"nav-button",onClick:()=>nr("next"),onDragEnter:()=>{const D=Date.now();D-a.current>=1e3&&(nr("next"),a.current=D)},"aria-label":"Next month",children:o.jsx(Ly,{size:20})})]}),o.jsxs("div",{className:"calendar-grid",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(D=>o.jsx("div",{className:"day-header",children:D},D)),St.map((D,H)=>o.jsx("div",{className:"calendar-day empty"},`empty-start-${H}`)),At.map(D=>{const H=Rt(D),le=dr(D,"yyyy-MM-dd"),ge=uv(D,new Date),Me=se===le,We=x===le,He=Ze===le;return o.jsxs("div",{className:`calendar-day ${ge?"today":""} ${H?"has-workout":""} ${Me?"drag-over":""}`+(Ce?" delete-active":"")+(W?" add-active":"")+(We?" loading":"")+(He?" just-updated":"")+(fe.includes(le)?" selected":"")+(w?" rest-pending":"")+(Re.includes(le)?" delete-selected":""),onClick:()=>_t(D),onDragOver:ze=>Dn(ze,D),onDragLeave:ds,onDrop:ze=>li(ze,D),children:[o.jsx("span",{className:"day-number",children:dr(D,"d")}),H?o.jsxs("div",{className:`workout-indicator ${Bo(H.type)} ${H.completed?"completed":""}`,draggable:!N,onDragStart:ze=>Wo(ze,H),onDragEnd:hs,children:[(We||B.includes(le))&&o.jsx("div",{className:"loader-overlay inside-indicator",children:o.jsx("div",{className:"loading-dumbbell small",children:o.jsx(kt,{size:28,color:"#fff"})})}),o.jsxs("div",{className:"workout-content",children:[o.jsx("span",{className:"workout-type",children:H.type==="rest"?"Rest":H.type==="strength"?"Strength":H.type==="cardio"?"Cardio":H.type==="flexibility"?"Flexibility":"Mixed"}),o.jsx("span",{className:"workout-duration",children:H.totalTime?` ${H.totalTime}`:` ${cs(H)}`}),H.completed&&o.jsx(zc,{size:14,className:"check-icon"}),!H.completed&&H.type!=="rest"&&o.jsx(Fy,{size:14,className:"play-icon"})]})]}):B.includes(le)?o.jsx("div",{className:"loader-overlay inside-indicator",children:o.jsx("div",{className:"loading-dumbbell small",children:o.jsx(kt,{size:28,color:"#fff"})})}):null]},D.toISOString())}),fr.map((D,H)=>o.jsx("div",{className:"calendar-day empty"},`empty-end-${H}`))]}),o.jsxs("div",{className:"calendar-legend",children:[o.jsx("h3",{children:"Workout Types"}),o.jsxs("div",{className:"legend-items",children:[o.jsxs("div",{className:"legend-item",children:[o.jsx("div",{className:"legend-color strength"}),o.jsx("span",{children:"Strength Training"})]}),o.jsxs("div",{className:"legend-item",children:[o.jsx("div",{className:"legend-color cardio"}),o.jsx("span",{children:"Cardio"})]}),o.jsxs("div",{className:"legend-item",children:[o.jsx("div",{className:"legend-color flexibility"}),o.jsx("span",{children:"Flexibility"})]}),o.jsxs("div",{className:"legend-item",children:[o.jsx("div",{className:"legend-color mixed"}),o.jsx("span",{children:"Mixed"})]}),o.jsxs("div",{className:"legend-item",children:[o.jsx("div",{className:"legend-color rest"}),o.jsx("span",{children:"Rest Day"})]})]})]})]}),"      ",y&&m&&o.jsx(_w,{workout:m,onClose:()=>g(!1),onComplete:()=>Qr(m.date),onRegenerateWorkout:()=>oi(m),isRegenerating:Be,onUpdateWorkout:Zr}),o.jsx("button",{className:`edit-fab ${N?"active":""}`,onClick:()=>S(!N),"aria-label":"Edit workouts",children:N?o.jsx(Zi,{size:24}):o.jsx(Hc,{size:24})}),o.jsxs("div",{className:`edit-menu ${N?"open":""}`,children:[o.jsxs("div",{className:"edit-menu-header",children:[o.jsx("h3",{children:"Workout Editor"}),o.jsx("p",{children:"Customize your workout plan"})]}),o.jsxs("div",{className:"edit-menu-content",children:["          ",o.jsxs("div",{className:"edit-section",children:[o.jsxs("h4",{children:[o.jsx($y,{size:16})," Quick Actions"]}),"            ",o.jsxs("div",{className:"edit-actions",children:[o.jsxs("button",{className:"edit-action-btn",onClick:ua,children:[o.jsx(By,{size:16}),W?"Selecting...":"Select to Add"]}),W&&o.jsxs("button",{className:"edit-action-btn confirm-btn",onClick:da,children:[o.jsx(Vc,{size:16})," Confirm"]}),K&&o.jsxs("div",{className:"batch-add-panel",children:[o.jsxs("h4",{children:["Batch Add Workouts (",fe.length," selected)"]}),o.jsx("label",{children:"Choose workout types (multi-select):"}),o.jsx("div",{className:"batch-types",children:["strength","cardio","flexibility","mixed","rest"].map(D=>o.jsxs("label",{className:`batch-type ${ne.includes(D)?"selected":""}`,children:[o.jsx("input",{type:"checkbox",checked:ne.includes(D),onChange:H=>{G(le=>H.target.checked?[...le,D]:le.filter(ge=>ge!==D))}}),D]},D))}),o.jsx("label",{children:"Comments (optional):"}),o.jsx("textarea",{"aria-label":"Batch comments",value:ce,onChange:D=>he(D.target.value)}),o.jsxs("div",{className:"batch-actions",children:[o.jsx("button",{className:"save-btn",onClick:ai,disabled:fe.length===0,children:"Generate"}),o.jsx("button",{className:"cancel-btn",onClick:()=>{oe(!1),pe([])},children:"Cancel"})]})]}),o.jsxs("button",{className:"edit-action-btn",onClick:()=>{O(!0),S(!1),F(!1)},title:"Click a calendar day to assign a Rest Day",children:[o.jsx(Or,{size:16}),w?"Click a day to add Rest":"Add Rest Day"]}),o.jsxs("button",{className:"edit-action-btn",onClick:()=>{Te(D=>{const H=!D;return H&&te(!1),H})},children:[o.jsx(_o,{size:16})," ",Ce?"Stop Delete":"Delete Days"]}),Ce&&o.jsxs("div",{className:"delete-action-row",children:[o.jsxs("button",{className:"confirm-btn",onClick:zo,disabled:Re.length===0,children:[o.jsx(_o,{size:16})," Delete ",Re.length>0?`(${Re.length})`:""]}),o.jsx("button",{className:"cancel-btn",onClick:Rr,children:"Cancel"})]}),o.jsxs("button",{className:"edit-action-btn clear-calendar-btn",onClick:$o,children:[o.jsx(_o,{size:16}),"Clear Calendar"]})]}),L&&o.jsxs("div",{className:"date-picker-section",children:[o.jsx("label",{htmlFor:"rest-date",children:"Select date for rest day:"}),o.jsx("input",{id:"rest-date",type:"date",value:ae,onChange:D=>E(D.target.value),className:"date-input"}),o.jsxs("div",{className:"date-picker-actions",children:[o.jsx("button",{className:"save-btn",onClick:la,disabled:!ae,children:"Add Rest Day"}),o.jsx("button",{className:"cancel-btn",onClick:()=>{F(!1),E("")},children:"Cancel"})]})]}),ee&&o.jsxs("div",{className:"date-picker-section",children:[o.jsx("label",{htmlFor:"workout-date",children:"Select date for workout day:"}),o.jsx("input",{id:"workout-date",type:"date",value:J,onChange:D=>Z(D.target.value),className:"date-input"}),o.jsx("label",{htmlFor:"workout-type",children:"Select workout type:"}),o.jsxs("select",{id:"workout-type",value:ye,onChange:D=>je(D.target.value),children:[o.jsx("option",{value:"strength",children:"Strength"}),o.jsx("option",{value:"cardio",children:"Cardio"}),o.jsx("option",{value:"flexibility",children:"Flexibility"}),o.jsx("option",{value:"mixed",children:"Mixed"})]}),o.jsx("label",{htmlFor:"workout-duration",children:"Duration:"}),o.jsx("input",{id:"workout-duration",type:"text",value:xe.duration,onChange:D=>en("duration",D.target.value)}),o.jsx("label",{htmlFor:"muscle-groups",children:"Muscle Groups:"}),o.jsx("input",{id:"muscle-groups",type:"text",placeholder:"e.g., Legs, Arms",onChange:D=>en("muscleGroups",D.target.value.split(",").map(H=>H.trim()))}),o.jsx("label",{htmlFor:"equipment",children:"Equipment:"}),o.jsx("input",{id:"equipment",type:"text",placeholder:"e.g., Dumbbells, Mat",onChange:D=>en("equipment",D.target.value.split(",").map(H=>H.trim()))}),o.jsxs("div",{className:"date-picker-actions",children:[o.jsx("button",{className:"save-btn",onClick:ca,disabled:!J,children:"Add Workout Day"}),o.jsx("button",{className:"cancel-btn",onClick:()=>{V(!1),Z("")},children:"Cancel"})]}),J&&i?.dailyWorkouts.find(D=>D.date===J)&&o.jsx("div",{className:"error-message",children:"This date already has a workout. Please select a different date."})]})]}),q&&C&&o.jsxs("div",{className:"edit-section",children:[o.jsxs("h4",{children:[o.jsx(Hc,{size:16})," Editing ",(()=>{const[D,H,le]=C.date.split("-").map(Number);return dr(new Date(D,H-1,le),"MMM d")})()]}),o.jsxs("div",{className:"workout-edit-form",children:[o.jsxs("label",{children:["Workout Type:",o.jsxs("select",{value:C.type,onChange:D=>k({...C,type:D.target.value}),children:[o.jsx("option",{value:"strength",children:"Strength"}),o.jsx("option",{value:"cardio",children:"Cardio"}),o.jsx("option",{value:"flexibility",children:"Flexibility"}),o.jsx("option",{value:"mixed",children:"Mixed"}),o.jsx("option",{value:"rest",children:"Rest"})]})]}),o.jsxs("div",{className:"edit-actions",children:[o.jsxs("button",{className:"save-btn",onClick:Yr,children:[o.jsx(Vc,{size:16}),"Save Changes"]}),o.jsxs("button",{className:"cancel-btn",onClick:Xr,children:[o.jsx(Zi,{size:16}),"Cancel"]})]})]})]}),o.jsxs("div",{className:"edit-section",children:[o.jsx("h4",{children:"Tips"}),o.jsxs("ul",{className:"edit-tips",children:[o.jsx("li",{children:"Click on any day to view and edit workouts"}),o.jsx("li",{children:"Use quick actions to add new workout or rest days"}),o.jsx("li",{children:"Changes are saved automatically to your plan"})]})]})]})]}),N&&o.jsx("div",{className:"edit-menu-overlay",onClick:()=>S(!1)}),o.jsx("div",{className:"edit-menu-popup-root","aria-hidden":!N,children:N&&W&&o.jsxs("div",{className:"workout-popup",children:[o.jsx("h3",{children:"Workout Details"}),o.jsx("label",{htmlFor:"workout-type",children:"Workout Type:"}),o.jsxs("select",{id:"workout-type",value:ye,onChange:D=>je(D.target.value),children:[o.jsx("option",{value:"strength",children:"Strength"}),o.jsx("option",{value:"cardio",children:"Cardio"}),o.jsx("option",{value:"flexibility",children:"Flexibility"}),o.jsx("option",{value:"mixed",children:"Mixed"})]}),o.jsx("label",{htmlFor:"workout-duration",children:"Duration:"}),o.jsx("input",{id:"workout-duration",type:"text",value:xe.duration,onChange:D=>en("duration",D.target.value)}),o.jsx("label",{htmlFor:"muscle-groups",children:"Muscle Groups:"}),o.jsx("input",{id:"muscle-groups",type:"text",placeholder:"e.g., Legs, Arms",onChange:D=>en("muscleGroups",D.target.value.split(",").map(H=>H.trim()))}),o.jsx("label",{htmlFor:"equipment",children:"Equipment:"}),o.jsx("input",{id:"equipment",type:"text",placeholder:"e.g., Dumbbells, Mat",onChange:D=>en("equipment",D.target.value.split(",").map(H=>H.trim()))}),o.jsxs("div",{className:"workout-popup-actions",children:[o.jsx("button",{className:"save-btn",onClick:Rn,children:"Generate Workout"}),o.jsx("button",{className:"cancel-btn",onClick:()=>te(!1),children:"Cancel"})]})]})})]})},cp="fitbuddy_tos_accepted_v1";function aa(){try{const i=localStorage.getItem(cp);return i?JSON.parse(i):{}}catch{return{}}}function mu(i){try{localStorage.setItem(cp,JSON.stringify(i))}catch{}}function Mo(i){try{const r=aa(),n=i?String(i):"__anon__",a=r[n],l=r.__anon__;return!!(a&&(a.tos||a.acceptedAt)||l&&(l.tos||l.acceptedAt))}catch{return!1}}function Uo(i){try{const r=aa(),n=i?String(i):"__anon__",a=r[n],l=r.__anon__;return!!(a&&a.privacy||l&&l.privacy)}catch{return!1}}function ts(i){return Mo(i)&&Uo(i)}function up(i){try{const r=aa(),n=i?String(i):"__anon__",a=r[n]||{};a.tos={acceptedAt:new Date().toISOString()},r[n]=a,mu(r);try{window.dispatchEvent(new CustomEvent("fitbuddy-tos-accepted",{detail:{userId:n}}))}catch{}return!0}catch{return!1}}function dp(i){try{const r=aa(),n=i?String(i):"__anon__",a=r[n]||{};a.privacy={acceptedAt:new Date().toISOString()},r[n]=a,mu(r);try{window.dispatchEvent(new CustomEvent("fitbuddy-privacy-accepted",{detail:{userId:n}}))}catch{}return!0}catch{return!1}}function Ew(i){try{if(!i)return!1;const r=aa(),n=r.__anon__;if(!n)return!1;const a=String(i),l=r[a]||{};let u=!1;if(n.tos&&!l.tos&&(l.tos=n.tos,u=!0),n.privacy&&!l.privacy&&(l.privacy=n.privacy,u=!0),u){if(r[a]=l,delete r.__anon__,mu(r),l.tos)try{window.dispatchEvent(new CustomEvent("fitbuddy-tos-accepted",{detail:{userId:a}}))}catch{}if(l.privacy)try{window.dispatchEvent(new CustomEvent("fitbuddy-privacy-accepted",{detail:{userId:a}}))}catch{}}return u}catch{return!1}}function wf({userData:i,children:r}){const[n,a]=j.useState(!1),[l,u]=j.useState(!1),[d,m]=j.useState(!1);if(j.useEffect(()=>{(()=>{u(Mo(i?.id)),m(Uo(i?.id)),a(!ts(i?.id))})();const g=()=>{u(!0),a(!ts(i?.id))},x=()=>{m(!0),a(!ts(i?.id))};return window.addEventListener("fitbuddy-tos-accepted",g),window.addEventListener("fitbuddy-privacy-accepted",x),()=>{window.removeEventListener("fitbuddy-tos-accepted",g),window.removeEventListener("fitbuddy-privacy-accepted",x)}},[i?.id]),!n)return o.jsx(o.Fragment,{children:r});const p=()=>{try{up(i?.id)}catch{}try{dp(i?.id)}catch{}if(i?.id)try{$e(()=>Promise.resolve().then(()=>On),void 0).then(y=>y.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:i.id,accepted_terms:!0,accepted_privacy:!0})})).then(y=>{fetch("/api/userdata/save",y).catch(()=>{})}).catch(()=>{})}catch{}a(!1)};return o.jsxs("div",{className:"agreement-guard-wrapper","aria-hidden":"false",children:[o.jsx("div",{className:"agreement-guard-underlay","aria-hidden":"true",children:r}),o.jsx("div",{className:"agreement-guard-backdrop",role:"dialog","aria-modal":"true","aria-label":"Terms and Privacy agreement",children:o.jsxs("div",{className:"agreement-guard-modal",role:"document",children:[o.jsx("h2",{className:"agreement-guard-title",children:"Before you continue"}),o.jsxs("p",{className:"agreement-guard-body",children:["To continue, please agree to our ",o.jsx("a",{className:l?"agreement-accepted":"",href:"/terms",target:"_blank",rel:"noopener noreferrer",children:"Terms of Service"})," and ",o.jsx("a",{className:d?"agreement-accepted":"",href:"/privacy",target:"_blank",rel:"noopener noreferrer",children:"Privacy Policy"}),". Both will open in a new tab if you want to review them."]}),o.jsx("div",{className:"agreement-guard-actions",children:o.jsx("button",{className:"btn btn-agree",onClick:p,children:"I have read and agree"})})]})})]})}const Nw=({profileVersion:i,userData:r})=>{const n=Ir(),a=as(),[l,u]=rr.useState(null),[d,m]=rr.useState(null);rr.useEffect(()=>{const b=()=>{if(r){u(r);return}try{const{loadUserData:C}=require("../services/localStorage"),k=C();u(k||null)}catch{u(null)}};b(),window.addEventListener("storage",b);const N=C=>{try{const k=C?.detail?.preview;k?.type==="avatar"&&k?.image&&(m(k.image),setTimeout(()=>m(null),4e3))}catch{}};window.addEventListener("shop-try-on",N);const S=setInterval(b,1e3);return()=>{window.removeEventListener("storage",b),window.removeEventListener("shop-try-on",N),clearInterval(S)}},[a.pathname,i,r]);const p=rr.useMemo(()=>{try{const b=l||(()=>{try{const{loadUserData:S}=require("../services/localStorage");return S()||null}catch{return null}})();if(!b)return!1;if(b.role&&String(b.role).toLowerCase()==="admin")return!0;const N=b?.token||b?.access_token||null;if(N&&typeof N=="string")try{const S=N.split(".");if(S.length>=2){const C=JSON.parse(atob(S[1].replace(/-/g,"+").replace(/_/g,"/"))),k=C?.roles||C?.role||C?.roles?.join?.(",");if(Array.isArray(k)&&k.includes("admin")||String(k).toLowerCase()==="admin")return!0}}catch{}return String(b.username||"").toLowerCase()==="admin"}catch{return!1}},[l]),y=rr.useMemo(()=>{try{return l?!!(l.id||l.sub):!1}catch{return!1}},[l]),g=()=>{switch(a.pathname){case"/":return"Welcome to FitBuddy";case"/questionnaire":return"Fitness Assessment";case"/calendar":return"Your Workout Plan";case"/profile":return"Your Profile";case"/signin":return"Sign In";case"/signup":return"Sign Up";case"/chat":return"Chat with Buddy";default:return"FitBuddy"}},x=b=>a.pathname===b;return o.jsx("header",{className:"app-header",children:o.jsxs("div",{className:"header-container",children:[o.jsxs("div",{className:"header-brand",onClick:()=>n("/?intro=0"),children:[o.jsx("div",{className:"logo",children:o.jsx(kt,{size:48})}),o.jsxs("div",{className:"brand-text",children:[o.jsx("h1",{className:"brand-title",children:"FitBuddy"}),o.jsx("p",{className:"brand-subtitle",children:"Your AI Fitness Companion"})]})]}),o.jsxs("div",{className:"page-title",children:[o.jsx("h2",{children:g()}),l&&(()=>{const b=l.username?.trim(),N=l.username?.trim(),S=b||N||"User";return o.jsxs("p",{className:"user-greeting",children:["Hello, ",S,"! "]})})()]}),o.jsxs("nav",{className:"header-nav",children:[o.jsxs("button",{className:`nav-button ${x("/")?"active":""}`,onClick:()=>n("/?intro=0"),"aria-label":"Home",children:[o.jsx(Uy,{size:20,className:"home-icon"}),o.jsx("span",{children:"Home"})]}),o.jsxs("button",{className:`nav-button ${x("/questionnaire")?"active":""}`,onClick:()=>{hr()?.completed?n("/questionnaire?edit=true"):n("/questionnaire")},"aria-label":"Questionnaire",children:[o.jsx(Xs,{size:20}),o.jsx("span",{children:"Assessment"})]}),o.jsxs("button",{className:`nav-button ${x("/calendar")?"active":""}`,onClick:()=>n("/calendar"),"aria-label":"Workout Calendar",disabled:!y,children:[o.jsx(Or,{size:20}),o.jsx("span",{children:"Calendar"})]}),o.jsxs("button",{className:`nav-button ${x("/chat")?"active":""}`,onClick:()=>{try{window.dispatchEvent(new CustomEvent("fitbuddy-open-chat"))}catch{}n("/chat")},"aria-label":"Chat with Buddy",children:[o.jsx("span",{className:"sparkles-mobile-only",children:o.jsx(Jr,{size:20})}),o.jsx("span",{children:"Chat"})]}),p&&o.jsxs("button",{className:`nav-button ${x("/admin")?"active":""}`,onClick:()=>n("/admin"),"aria-label":"Admin",children:[o.jsx("span",{className:"flame-mobile-only",children:o.jsx(uf,{size:20})}),o.jsx("span",{children:"Admin"})]}),y&&o.jsx(o.Fragment,{children:o.jsxs("div",{className:"header-counters",children:[o.jsxs("div",{className:"header-counter streak",children:[o.jsx(uf,{size:20,color:"#ffb347",style:{marginRight:4}}),o.jsx("span",{className:"counter-value",children:l?.streak??0})]}),o.jsxs("div",{className:"header-counter energy",children:[o.jsx(Jr,{size:20,color:"#1e90cb",style:{marginRight:4}}),o.jsx("span",{className:"counter-value",children:l?.energy??0})]})]})}),o.jsxs("div",{className:"profile-section",children:[o.jsx("img",{src:d||(l&&l.avatar&&l.avatar.trim()?l.avatar:"/images/fitbuddy_head.png"),alt:"Profile",className:"profile-image",onClick:()=>n(y?"/profile":"/signin")}),o.jsxs("div",{className:"dropdown",children:[o.jsx("button",{className:"dropdown-button",onClick:()=>n(y?"/profile":"/signin"),children:y?l.username&&l.username.trim()||"User":"Sign In"}),o.jsx("div",{className:"dropdown-content",children:y?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>n("/profile"),children:" Profile"}),o.jsx("button",{onClick:()=>n("/profile/settings"),children:"Settings"}),o.jsx("button",{onClick:()=>n("/profile/friends"),children:"Friends"}),o.jsx("button",{onClick:()=>n("/profile/achievements"),children:"Achievements"}),o.jsx("button",{onClick:()=>{(async()=>{try{localStorage.setItem("fitbuddy_no_auto_restore","1")}catch{}try{sessionStorage.setItem("fitbuddy_no_auto_restore","1")}catch{}try{const{loadUserData:b}=await $e(async()=>{const{loadUserData:C}=await Promise.resolve().then(()=>zt);return{loadUserData:C}},void 0),N=b(),S=N?.id||N?.sub||N?.data?.id||null;if(S){const C=(async()=>{try{await du(String(S))}catch{}})(),k=new Promise(q=>setTimeout(q,2e3));await Promise.race([C,k])}}catch{}try{ni()}catch{}try{ri()}catch{}try{sa()}catch{}window.dispatchEvent(new Event("fitbuddy-logout")),n("/signin")})()},children:"Sign Out"})]}):o.jsx("button",{onClick:()=>n("/signin"),children:"Sign In"})})]})]})]})]})})},Cw=()=>o.jsx("div",{className:"loading-screen",children:o.jsxs("div",{className:"loading-container fade-in-bounce",children:[o.jsx("div",{className:"loading-dumbbell",children:o.jsx(kt,{size:40,color:"#fff"})}),o.jsx("h2",{className:"loading-title",children:"Hang tight!"}),o.jsx("p",{className:"loading-desc",children:"Your personalized plan is on its way..."}),o.jsx("p",{className:"ai-disclaimer",children:"Disclaimer: This plan is AI-generated and may not be perfect for everyone. Check important info."})]})}),Tw=i=>{let r;return i?r=i:typeof fetch>"u"?r=(...n)=>$e(async()=>{const{default:a}=await Promise.resolve().then(()=>si);return{default:a}},void 0).then(({default:a})=>a(...n)):r=fetch,(...n)=>r(...n)};class gu extends Error{constructor(r,n="FunctionsError",a){super(r),this.name=n,this.context=a}}class Pw extends gu{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class xf extends gu{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class bf extends gu{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var Jc;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Jc||(Jc={}));var Ow=function(i,r,n,a){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function m(g){try{y(a.next(g))}catch(x){d(x)}}function p(g){try{y(a.throw(g))}catch(x){d(x)}}function y(g){g.done?u(g.value):l(g.value).then(m,p)}y((a=a.apply(i,r||[])).next())})};class Aw{constructor(r,{headers:n={},customFetch:a,region:l=Jc.Any}={}){this.url=r,this.headers=n,this.region=l,this.fetch=Tw(a)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r,n={}){var a;return Ow(this,void 0,void 0,function*(){try{const{headers:l,method:u,body:d}=n;let m={},{region:p}=n;p||(p=this.region);const y=new URL(`${this.url}/${r}`);p&&p!=="any"&&(m["x-region"]=p,y.searchParams.set("forceFunctionRegion",p));let g;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",g=d):typeof d=="string"?(m["Content-Type"]="text/plain",g=d):typeof FormData<"u"&&d instanceof FormData?g=d:(m["Content-Type"]="application/json",g=JSON.stringify(d)));const x=yield this.fetch(y.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:g}).catch(C=>{throw new Pw(C)}),b=x.headers.get("x-relay-error");if(b&&b==="true")throw new xf(x);if(!x.ok)throw new bf(x);let N=((a=x.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),S;return N==="application/json"?S=yield x.json():N==="application/octet-stream"?S=yield x.blob():N==="text/event-stream"?S=x:N==="multipart/form-data"?S=yield x.formData():S=yield x.text(),{data:S,error:null,response:x}}catch(l){return{data:null,error:l,response:l instanceof bf||l instanceof xf?l.context:void 0}}})}}var Ct={},Ls={},Ms={},Us={},Fs={},Bs={},Iw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ei=Iw();const Rw=ei.fetch,hp=ei.fetch.bind(ei),fp=ei.Headers,Dw=ei.Request,Lw=ei.Response,si=Object.freeze(Object.defineProperty({__proto__:null,Headers:fp,Request:Dw,Response:Lw,default:hp,fetch:Rw},Symbol.toStringTag,{value:"Module"})),Mw=wg(si);var vo={},kf;function pp(){if(kf)return vo;kf=1,Object.defineProperty(vo,"__esModule",{value:!0});class i extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return vo.default=i,vo}var Sf;function mp(){if(Sf)return Bs;Sf=1;var i=Bs&&Bs.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Bs,"__esModule",{value:!0});const r=i(Mw),n=i(pp());class a{constructor(u){var d,m;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(d=u.shouldThrowOnError)!==null&&d!==void 0?d:!1,this.signal=u.signal,this.isMaybeSingle=(m=u.isMaybeSingle)!==null&&m!==void 0?m:!1,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=r.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,d){return this.headers=new Headers(this.headers),this.headers.set(u,d),this}then(u,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const m=this.fetch;let p=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async y=>{var g,x,b,N;let S=null,C=null,k=null,q=y.status,$=y.statusText;if(y.ok){if(this.method!=="HEAD"){const V=await y.text();V===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?C=V:C=JSON.parse(V))}const F=(x=this.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),ee=(b=y.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");F&&ee&&ee.length>1&&(k=parseInt(ee[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(S={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,k=null,q=406,$="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const F=await y.text();try{S=JSON.parse(F),Array.isArray(S)&&y.status===404&&(C=[],S=null,q=200,$="OK")}catch{y.status===404&&F===""?(q=204,$="No Content"):S={message:F}}if(S&&this.isMaybeSingle&&(!((N=S?.details)===null||N===void 0)&&N.includes("0 rows"))&&(S=null,q=200,$="OK"),S&&this.shouldThrowOnError)throw new n.default(S)}return{error:S,data:C,count:k,status:q,statusText:$}});return this.shouldThrowOnError||(p=p.catch(y=>{var g,x,b;return{error:{message:`${(g=y?.name)!==null&&g!==void 0?g:"FetchError"}: ${y?.message}`,details:`${(x=y?.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(b=y?.code)!==null&&b!==void 0?b:""}`},data:null,count:null,status:0,statusText:""}})),p.then(u,d)}returns(){return this}overrideTypes(){return this}}return Bs.default=a,Bs}var _f;function gp(){if(_f)return Fs;_f=1;var i=Fs&&Fs.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Fs,"__esModule",{value:!0});const r=i(mp());class n extends r.default{select(l){let u=!1;const d=(l??"*").split("").map(m=>/\s/.test(m)&&!u?"":(m==='"'&&(u=!u),m)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:u=!0,nullsFirst:d,foreignTable:m,referencedTable:p=m}={}){const y=p?`${p}.order`:"order",g=this.url.searchParams.get(y);return this.url.searchParams.set(y,`${g?`${g},`:""}${l}.${u?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:u,referencedTable:d=u}={}){const m=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(m,`${l}`),this}range(l,u,{foreignTable:d,referencedTable:m=d}={}){const p=typeof m>"u"?"offset":`${m}.offset`,y=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(p,`${l}`),this.url.searchParams.set(y,`${u-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:u=!1,settings:d=!1,buffers:m=!1,wal:p=!1,format:y="text"}={}){var g;const x=[l?"analyze":null,u?"verbose":null,d?"settings":null,m?"buffers":null,p?"wal":null].filter(Boolean).join("|"),b=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${y}; for="${b}"; options=${x};`),y==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return Fs.default=n,Fs}var jf;function yu(){if(jf)return Us;jf=1;var i=Us&&Us.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Us,"__esModule",{value:!0});const r=i(gp());class n extends r.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}in(l,u){const d=Array.from(new Set(u)).map(m=>typeof m=="string"&&new RegExp("[,()]").test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(l,`in.(${d})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:d,type:m}={}){let p="";m==="plain"?p="pl":m==="phrase"?p="ph":m==="websearch"&&(p="w");const y=d===void 0?"":`(${d})`;return this.url.searchParams.append(l,`${p}fts${y}.${u}`),this}match(l){return Object.entries(l).forEach(([u,d])=>{this.url.searchParams.append(u,`eq.${d}`)}),this}not(l,u,d){return this.url.searchParams.append(l,`not.${u}.${d}`),this}or(l,{foreignTable:u,referencedTable:d=u}={}){const m=d?`${d}.or`:"or";return this.url.searchParams.append(m,`(${l})`),this}filter(l,u,d){return this.url.searchParams.append(l,`${u}.${d}`),this}}return Us.default=n,Us}var Ef;function yp(){if(Ef)return Ms;Ef=1;var i=Ms&&Ms.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ms,"__esModule",{value:!0});const r=i(yu());class n{constructor(l,{headers:u={},schema:d,fetch:m}){this.url=l,this.headers=new Headers(u),this.schema=d,this.fetch=m}select(l,{head:u=!1,count:d}={}){const m=u?"HEAD":"GET";let p=!1;const y=(l??"*").split("").map(g=>/\s/.test(g)&&!p?"":(g==='"'&&(p=!p),g)).join("");return this.url.searchParams.set("select",y),d&&this.headers.append("Prefer",`count=${d}`),new r.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:u,defaultToNull:d=!0}={}){var m;const p="POST";if(u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const y=l.reduce((g,x)=>g.concat(Object.keys(x)),[]);if(y.length>0){const g=[...new Set(y)].map(x=>`"${x}"`);this.url.searchParams.set("columns",g.join(","))}}return new r.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(l,{onConflict:u,ignoreDuplicates:d=!1,count:m,defaultToNull:p=!0}={}){var y;const g="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),m&&this.headers.append("Prefer",`count=${m}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const x=l.reduce((b,N)=>b.concat(Object.keys(N)),[]);if(x.length>0){const b=[...new Set(x)].map(N=>`"${N}"`);this.url.searchParams.set("columns",b.join(","))}}return new r.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}update(l,{count:u}={}){var d;const m="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new r.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:l}={}){var u;const d="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new r.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Ms.default=n,Ms}var Nf;function Uw(){if(Nf)return Ls;Nf=1;var i=Ls&&Ls.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ls,"__esModule",{value:!0});const r=i(yp()),n=i(yu());class a{constructor(u,{headers:d={},schema:m,fetch:p}={}){this.url=u,this.headers=new Headers(d),this.schemaName=m,this.fetch=p}from(u){const d=new URL(`${this.url}/${u}`);return new r.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new a(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,d={},{head:m=!1,get:p=!1,count:y}={}){var g;let x;const b=new URL(`${this.url}/rpc/${u}`);let N;m||p?(x=m?"HEAD":"GET",Object.entries(d).filter(([C,k])=>k!==void 0).map(([C,k])=>[C,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([C,k])=>{b.searchParams.append(C,k)})):(x="POST",N=d);const S=new Headers(this.headers);return y&&S.set("Prefer",`count=${y}`),new n.default({method:x,url:b,headers:S,schema:this.schemaName,body:N,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return Ls.default=a,Ls}var Cf;function Fw(){if(Cf)return Ct;Cf=1;var i=Ct&&Ct.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.PostgrestError=Ct.PostgrestBuilder=Ct.PostgrestTransformBuilder=Ct.PostgrestFilterBuilder=Ct.PostgrestQueryBuilder=Ct.PostgrestClient=void 0;const r=i(Uw());Ct.PostgrestClient=r.default;const n=i(yp());Ct.PostgrestQueryBuilder=n.default;const a=i(yu());Ct.PostgrestFilterBuilder=a.default;const l=i(gp());Ct.PostgrestTransformBuilder=l.default;const u=i(mp());Ct.PostgrestBuilder=u.default;const d=i(pp());return Ct.PostgrestError=d.default,Ct.default={PostgrestClient:r.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:u.default,PostgrestError:d.default},Ct}var Bw=Fw();const Ww=au(Bw),{PostgrestClient:$w,PostgrestQueryBuilder:ob,PostgrestFilterBuilder:lb,PostgrestTransformBuilder:cb,PostgrestBuilder:ub,PostgrestError:db}=Ww;class zw{static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const a=n.node,l=parseInt(a.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let n=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(n+=`

Suggested solution: ${r.workaround}`),new Error(n)}static createWebSocket(r,n){const a=this.getWebSocketConstructor();return new a(r,n)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const qw="2.15.5",Hw=`realtime-js/${qw}`,Vw="1.0.0",Kc=1e4,Gw=1e3,Jw=100;var Ji;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Ji||(Ji={}));var xt;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(xt||(xt={}));var kr;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(kr||(kr={}));var Qc;(function(i){i.websocket="websocket"})(Qc||(Qc={}));var Zn;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Zn||(Zn={}));class Kw{constructor(){this.HEADER_LENGTH=1}decode(r,n){return r.constructor===ArrayBuffer?n(this._binaryDecode(r)):n(typeof r=="string"?JSON.parse(r):{})}_binaryDecode(r){const n=new DataView(r),a=new TextDecoder;return this._decodeBroadcast(r,n,a)}_decodeBroadcast(r,n,a){const l=n.getUint8(1),u=n.getUint8(2);let d=this.HEADER_LENGTH+2;const m=a.decode(r.slice(d,d+l));d=d+l;const p=a.decode(r.slice(d,d+u));d=d+u;const y=JSON.parse(a.decode(r.slice(d,r.byteLength)));return{ref:null,topic:m,event:p,payload:y}}}class vp{constructor(r,n){this.callback=r,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var tt;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(tt||(tt={}));const Tf=(i,r,n={})=>{var a;const l=(a=n.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(r).reduce((u,d)=>(u[d]=Qw(d,i,r,l),u),{})},Qw=(i,r,n,a)=>{const l=r.find(m=>m.name===i),u=l?.type,d=n[i];return u&&!a.includes(u)?wp(u,d):Yc(d)},wp=(i,r)=>{if(i.charAt(0)==="_"){const n=i.slice(1,i.length);return e0(r,n)}switch(i){case tt.bool:return Yw(r);case tt.float4:case tt.float8:case tt.int2:case tt.int4:case tt.int8:case tt.numeric:case tt.oid:return Xw(r);case tt.json:case tt.jsonb:return Zw(r);case tt.timestamp:return t0(r);case tt.abstime:case tt.date:case tt.daterange:case tt.int4range:case tt.int8range:case tt.money:case tt.reltime:case tt.text:case tt.time:case tt.timestamptz:case tt.timetz:case tt.tsrange:case tt.tstzrange:return Yc(r);default:return Yc(r)}},Yc=i=>i,Yw=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},Xw=i=>{if(typeof i=="string"){const r=parseFloat(i);if(!Number.isNaN(r))return r}return i},Zw=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(r){return console.log(`JSON parse error: ${r}`),i}return i},e0=(i,r)=>{if(typeof i!="string")return i;const n=i.length-1,a=i[n];if(i[0]==="{"&&a==="}"){let u;const d=i.slice(1,n);try{u=JSON.parse("["+d+"]")}catch{u=d?d.split(","):[]}return u.map(m=>wp(r,m))}return i},t0=i=>typeof i=="string"?i.replace(" ","T"):i,xp=i=>{let r=i;return r=r.replace(/^ws/i,"http"),r=r.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),r.replace(/\/+$/,"")+"/api/broadcast"};class Ac{constructor(r,n,a={},l=Kc){this.channel=r,this.event=n,this.payload=a,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,n){var a;return this._hasReceived(r)&&n((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:r,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:n}){this.recHooks.filter(a=>a.status===r).forEach(a=>a.callback(n))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var Pf;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Pf||(Pf={}));class Ki{constructor(r,n){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},l=>{const{onJoin:u,onLeave:d,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ki.syncState(this.state,l,u,d),this.pendingDiffs.forEach(p=>{this.state=Ki.syncDiff(this.state,p,u,d)}),this.pendingDiffs=[],m()}),this.channel._on(a.diff,{},l=>{const{onJoin:u,onLeave:d,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Ki.syncDiff(this.state,l,u,d),m())}),this.onJoin((l,u,d)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:u,newPresences:d})}),this.onLeave((l,u,d)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:u,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,n,a,l){const u=this.cloneDeep(r),d=this.transformState(n),m={},p={};return this.map(u,(y,g)=>{d[y]||(p[y]=g)}),this.map(d,(y,g)=>{const x=u[y];if(x){const b=g.map(k=>k.presence_ref),N=x.map(k=>k.presence_ref),S=g.filter(k=>N.indexOf(k.presence_ref)<0),C=x.filter(k=>b.indexOf(k.presence_ref)<0);S.length>0&&(m[y]=S),C.length>0&&(p[y]=C)}else m[y]=g}),this.syncDiff(u,{joins:m,leaves:p},a,l)}static syncDiff(r,n,a,l){const{joins:u,leaves:d}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return a||(a=()=>{}),l||(l=()=>{}),this.map(u,(m,p)=>{var y;const g=(y=r[m])!==null&&y!==void 0?y:[];if(r[m]=this.cloneDeep(p),g.length>0){const x=r[m].map(N=>N.presence_ref),b=g.filter(N=>x.indexOf(N.presence_ref)<0);r[m].unshift(...b)}a(m,g,p)}),this.map(d,(m,p)=>{let y=r[m];if(!y)return;const g=p.map(x=>x.presence_ref);y=y.filter(x=>g.indexOf(x.presence_ref)<0),r[m]=y,l(m,y,p),y.length===0&&delete r[m]}),r}static map(r,n){return Object.getOwnPropertyNames(r).map(a=>n(a,r[a]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((n,a)=>{const l=r[a];return"metas"in l?n[a]=l.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):n[a]=l,n},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Of;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Of||(Of={}));var Qi;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Qi||(Qi={}));var Gr;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Gr||(Gr={}));class vu{constructor(r,n={config:{}},a){this.topic=r,this.params=n,this.socket=a,this.bindings={},this.state=xt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ac(this,kr.join,this.params,this.timeout),this.rejoinTimer=new vp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(kr.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Ki(this),this.broadcastEndpointURL=xp(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(r,n=this.timeout){var a,l,u;if(this.socket.isConnected()||this.socket.connect(),this.state==xt.closed){const{config:{broadcast:d,presence:m,private:p}}=this.params,y=(l=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(N=>N.filter))!==null&&l!==void 0?l:[],g=!!this.bindings[Qi.PRESENCE]&&this.bindings[Qi.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,x={},b={broadcast:d,presence:Object.assign(Object.assign({},m),{enabled:g}),postgres_changes:y,private:p};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(N=>r?.(Gr.CHANNEL_ERROR,N)),this._onClose(()=>r?.(Gr.CLOSED)),this.updateJoinPayload(Object.assign({config:b},x)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:N})=>{var S;if(this.socket.setAuth(),N===void 0){r?.(Gr.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,k=(S=C?.length)!==null&&S!==void 0?S:0,q=[];for(let $=0;$<k;$++){const L=C[$],{filter:{event:F,schema:ee,table:V,filter:W}}=L,te=N&&N[$];if(te&&te.event===F&&te.schema===ee&&te.table===V&&te.filter===W)q.push(Object.assign(Object.assign({},L),{id:te.id}));else{this.unsubscribe(),this.state=xt.errored,r?.(Gr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=q,r&&r(Gr.SUBSCRIBED);return}}).receive("error",N=>{this.state=xt.errored,r?.(Gr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(N).join(", ")||"error")))}).receive("timeout",()=>{r?.(Gr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,n={}){return await this.send({type:"presence",event:"track",payload:r},n.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,n,a){return this.state===xt.joined&&r===Qi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(r,n,a)}async send(r,n={}){var a,l;if(!this._canPush()&&r.type==="broadcast"){const{event:u,payload:d}=r,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:d,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);return await((l=y.body)===null||l===void 0?void 0:l.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var d,m,p;const y=this._push(r.type,r,n.timeout||this.timeout);r.type==="broadcast"&&!(!((p=(m=(d=this.params)===null||d===void 0?void 0:d.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&u("ok"),y.receive("ok",()=>u("ok")),y.receive("error",()=>u("error")),y.receive("timeout",()=>u("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=xt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(kr.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(l=>{a=new Ac(this,kr.leave,{},r),a.receive("ok",()=>{n(),l("ok")}).receive("timeout",()=>{n(),l("timed out")}).receive("error",()=>{l("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=xt.closed,this.bindings={}}async _fetchWithTimeout(r,n,a){const l=new AbortController,u=setTimeout(()=>l.abort(),a),d=await this.socket.fetch(r,Object.assign(Object.assign({},n),{signal:l.signal}));return clearTimeout(u),d}_push(r,n,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new Ac(this,r,n,a);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>Jw){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(r,n,a){return n}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,n,a){var l,u;const d=r.toLocaleLowerCase(),{close:m,error:p,leave:y,join:g}=kr;if(a&&[m,p,y,g].indexOf(d)>=0&&a!==this._joinRef())return;let b=this._onMessage(d,n,a);if(n&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(N=>{var S,C,k;return((S=N.filter)===null||S===void 0?void 0:S.event)==="*"||((k=(C=N.filter)===null||C===void 0?void 0:C.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===d}).map(N=>N.callback(b,a)):(u=this.bindings[d])===null||u===void 0||u.filter(N=>{var S,C,k,q,$,L;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in N){const F=N.id,ee=(S=N.filter)===null||S===void 0?void 0:S.event;return F&&((C=n.ids)===null||C===void 0?void 0:C.includes(F))&&(ee==="*"||ee?.toLocaleLowerCase()===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const F=($=(q=N?.filter)===null||q===void 0?void 0:q.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return F==="*"||F===((L=n?.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return N.type.toLocaleLowerCase()===d}).map(N=>{if(typeof b=="object"&&"ids"in b){const S=b.data,{schema:C,table:k,commit_timestamp:q,type:$,errors:L}=S;b=Object.assign(Object.assign({},{schema:C,table:k,commit_timestamp:q,eventType:$,new:{},old:{},errors:L}),this._getPayloadRecords(S))}N.callback(b,a)})}_isClosed(){return this.state===xt.closed}_isJoined(){return this.state===xt.joined}_isJoining(){return this.state===xt.joining}_isLeaving(){return this.state===xt.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,n,a){const l=r.toLocaleLowerCase(),u={type:l,filter:n,callback:a};return this.bindings[l]?this.bindings[l].push(u):this.bindings[l]=[u],this}_off(r,n){const a=r.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(l=>{var u;return!(((u=l.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===a&&vu.isEqual(l.filter,n))})),this}static isEqual(r,n){if(Object.keys(r).length!==Object.keys(n).length)return!1;for(const a in r)if(r[a]!==n[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(kr.close,{},r)}_onError(r){this._on(kr.error,{},n=>r(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xt.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const n={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(n.new=Tf(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(n.old=Tf(r.columns,r.old_record)),n}}const Ic=()=>{},wo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},r0=[1e3,2e3,5e3,1e4],n0=1e4,s0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class i0{constructor(r,n){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Kc,this.transport=null,this.heartbeatIntervalMs=wo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ic,this.ref=0,this.reconnectTimer=null,this.logger=Ic,this.conn=null,this.sendBuffer=[],this.serializer=new Kw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>{let u;return l?u=l:typeof fetch>"u"?u=(...d)=>$e(async()=>{const{default:m}=await Promise.resolve().then(()=>si);return{default:m}},void 0).then(({default:m})=>m(...d)).catch(m=>{throw new Error(`Failed to load @supabase/node-fetch: ${m.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):u=fetch,(...d)=>u(...d)},!(!((a=n?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${r}/${Qc.websocket}`,this.httpEndpoint=xp(r),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=zw.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const n=r.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Vw}))}disconnect(r,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},r?this.conn.close(r,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const n=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const r=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,n,a){this.logger(r,n,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Ji.connecting:return Zn.Connecting;case Ji.open:return Zn.Open;case Ji.closing:return Zn.Closing;default:return Zn.Closed}}isConnected(){return this.connectionState()===Zn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,n={config:{}}){const a=`realtime:${r}`,l=this.getChannels().find(u=>u.topic===a);if(l)return l;{const u=new vu(`realtime:${r}`,n,this);return this.channels.push(u),u}}push(r){const{topic:n,event:a,payload:l,ref:u}=r,d=()=>{this.encode(r,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${n} ${a} (${u})`,l),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(Gw,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},wo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let n=this.channels.find(a=>a.topic===r&&(a._isJoined()||a._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${r}"`),n.unsubscribe())}_remove(r){this.channels=this.channels.filter(n=>n.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(y){this.log("error","error in heartbeat callback",y)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:l,payload:u,ref:d}=n,m=d?`(${d})`:"",p=u.status||"";this.log("receive",`${p} ${a} ${l} ${m}`.trim(),u),this.channels.filter(y=>y._isMember(a)).forEach(y=>y._trigger(l,u,d)),this._triggerStateCallbacks("message",n)})}_clearTimer(r){var n;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(r){var n;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(kr.error))}_appendParams(r,n){if(Object.keys(n).length===0)return r;const a=r.match(/\?/)?"&":"?",l=new URLSearchParams(n);return`${r}${a}${l}`}_workerObjectUrl(r){let n;if(r)n=r;else{const a=new Blob([s0],{type:"application/javascript"});n=URL.createObjectURL(a)}return n}_setConnectionState(r,n=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(r=null){let n;r?n=r:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(a=>{const l={access_token:n,version:Hw};n&&a.updateJoinPayload(l),a.joinedOnce&&a._isJoined()&&a._push(kr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${r}`,n)})}_triggerStateCallbacks(r,n){try{this.stateChangeCallbacks[r].forEach(a=>{try{a(n)}catch(l){this.log("error",`error in ${r} callback`,l)}})}catch(a){this.log("error",`error triggering ${r} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new vp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},wo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var n,a,l,u,d,m,p,y,g;if(this.transport=(n=r?.transport)!==null&&n!==void 0?n:null,this.timeout=(a=r?.timeout)!==null&&a!==void 0?a:Kc,this.heartbeatIntervalMs=(l=r?.heartbeatIntervalMs)!==null&&l!==void 0?l:wo.HEARTBEAT_INTERVAL,this.worker=(u=r?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(d=r?.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(m=r?.heartbeatCallback)!==null&&m!==void 0?m:Ic,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=r?.reconnectAfterMs)!==null&&p!==void 0?p:x=>r0[x-1]||n0,this.encode=(y=r?.encode)!==null&&y!==void 0?y:(x,b)=>b(JSON.stringify(x)),this.decode=(g=r?.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}class wu extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}}function bt(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class a0 extends wu{constructor(r,n,a){super(r),this.name="StorageApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Xc extends wu{constructor(r,n){super(r),this.name="StorageUnknownError",this.originalError=n}}var o0=function(i,r,n,a){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function m(g){try{y(a.next(g))}catch(x){d(x)}}function p(g){try{y(a.throw(g))}catch(x){d(x)}}function y(g){g.done?u(g.value):l(g.value).then(m,p)}y((a=a.apply(i,r||[])).next())})};const bp=i=>{let r;return i?r=i:typeof fetch>"u"?r=(...n)=>$e(async()=>{const{default:a}=await Promise.resolve().then(()=>si);return{default:a}},void 0).then(({default:a})=>a(...n)):r=fetch,(...n)=>r(...n)},l0=()=>o0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $e(()=>Promise.resolve().then(()=>si),void 0)).Response:Response}),Zc=i=>{if(Array.isArray(i))return i.map(n=>Zc(n));if(typeof i=="function"||i!==Object(i))return i;const r={};return Object.entries(i).forEach(([n,a])=>{const l=n.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));r[l]=Zc(a)}),r},c0=i=>{if(typeof i!="object"||i===null)return!1;const r=Object.getPrototypeOf(i);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)};var os=function(i,r,n,a){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function m(g){try{y(a.next(g))}catch(x){d(x)}}function p(g){try{y(a.throw(g))}catch(x){d(x)}}function y(g){g.done?u(g.value):l(g.value).then(m,p)}y((a=a.apply(i,r||[])).next())})};const Rc=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),u0=(i,r,n)=>os(void 0,void 0,void 0,function*(){const a=yield l0();i instanceof a&&!n?.noResolveJson?i.json().then(l=>{const u=i.status||500,d=l?.statusCode||u+"";r(new a0(Rc(l),u,d))}).catch(l=>{r(new Xc(Rc(l),l))}):r(new Xc(Rc(i),i))}),d0=(i,r,n,a)=>{const l={method:i,headers:r?.headers||{}};return i==="GET"||!a?l:(c0(a)?(l.headers=Object.assign({"Content-Type":"application/json"},r?.headers),l.body=JSON.stringify(a)):l.body=a,r?.duplex&&(l.duplex=r.duplex),Object.assign(Object.assign({},l),n))};function oa(i,r,n,a,l,u){return os(this,void 0,void 0,function*(){return new Promise((d,m)=>{i(n,d0(r,a,l,u)).then(p=>{if(!p.ok)throw p;return a?.noResolveJson?p:p.json()}).then(p=>d(p)).catch(p=>u0(p,m,a))})})}function Oo(i,r,n,a){return os(this,void 0,void 0,function*(){return oa(i,"GET",r,n,a)})}function Pr(i,r,n,a,l){return os(this,void 0,void 0,function*(){return oa(i,"POST",r,a,l,n)})}function eu(i,r,n,a,l){return os(this,void 0,void 0,function*(){return oa(i,"PUT",r,a,l,n)})}function h0(i,r,n,a){return os(this,void 0,void 0,function*(){return oa(i,"HEAD",r,Object.assign(Object.assign({},n),{noResolveJson:!0}),a)})}function kp(i,r,n,a,l){return os(this,void 0,void 0,function*(){return oa(i,"DELETE",r,a,l,n)})}var $t=function(i,r,n,a){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function m(g){try{y(a.next(g))}catch(x){d(x)}}function p(g){try{y(a.throw(g))}catch(x){d(x)}}function y(g){g.done?u(g.value):l(g.value).then(m,p)}y((a=a.apply(i,r||[])).next())})};const f0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Af={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class p0{constructor(r,n={},a,l){this.shouldThrowOnError=!1,this.url=r,this.headers=n,this.bucketId=a,this.fetch=bp(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(r,n,a,l){return $t(this,void 0,void 0,function*(){try{let u;const d=Object.assign(Object.assign({},Af),l);let m=Object.assign(Object.assign({},this.headers),r==="POST"&&{"x-upsert":String(d.upsert)});const p=d.metadata;typeof Blob<"u"&&a instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),p&&u.append("metadata",this.encodeMetadata(p)),u.append("",a)):typeof FormData<"u"&&a instanceof FormData?(u=a,u.append("cacheControl",d.cacheControl),p&&u.append("metadata",this.encodeMetadata(p))):(u=a,m["cache-control"]=`max-age=${d.cacheControl}`,m["content-type"]=d.contentType,p&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),l?.headers&&(m=Object.assign(Object.assign({},m),l.headers));const y=this._removeEmptyFolders(n),g=this._getFinalPath(y),x=yield(r=="PUT"?eu:Pr)(this.fetch,`${this.url}/object/${g}`,u,Object.assign({headers:m},d?.duplex?{duplex:d.duplex}:{}));return{data:{path:y,id:x.Id,fullPath:x.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(bt(u))return{data:null,error:u};throw u}})}upload(r,n,a){return $t(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",r,n,a)})}uploadToSignedUrl(r,n,a,l){return $t(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),m=new URL(this.url+`/object/upload/sign/${d}`);m.searchParams.set("token",n);try{let p;const y=Object.assign({upsert:Af.upsert},l),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&a instanceof Blob?(p=new FormData,p.append("cacheControl",y.cacheControl),p.append("",a)):typeof FormData<"u"&&a instanceof FormData?(p=a,p.append("cacheControl",y.cacheControl)):(p=a,g["cache-control"]=`max-age=${y.cacheControl}`,g["content-type"]=y.contentType);const x=yield eu(this.fetch,m.toString(),p,{headers:g});return{data:{path:u,fullPath:x.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(bt(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(r,n){return $t(this,void 0,void 0,function*(){try{let a=this._getFinalPath(r);const l=Object.assign({},this.headers);n?.upsert&&(l["x-upsert"]="true");const u=yield Pr(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:l}),d=new URL(this.url+u.url),m=d.searchParams.get("token");if(!m)throw new wu("No token returned by API");return{data:{signedUrl:d.toString(),path:r,token:m},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bt(a))return{data:null,error:a};throw a}})}update(r,n,a){return $t(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",r,n,a)})}move(r,n,a){return $t(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n,destinationBucket:a?.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(bt(l))return{data:null,error:l};throw l}})}copy(r,n,a){return $t(this,void 0,void 0,function*(){try{return{data:{path:(yield Pr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n,destinationBucket:a?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(bt(l))return{data:null,error:l};throw l}})}createSignedUrl(r,n,a){return $t(this,void 0,void 0,function*(){try{let l=this._getFinalPath(r),u=yield Pr(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:n},a?.transform?{transform:a.transform}:{}),{headers:this.headers});const d=a?.download?`&download=${a.download===!0?"":a.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${d}`)},{data:u,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(bt(l))return{data:null,error:l};throw l}})}createSignedUrls(r,n,a){return $t(this,void 0,void 0,function*(){try{const l=yield Pr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:r},{headers:this.headers}),u=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{data:l.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${u}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(bt(l))return{data:null,error:l};throw l}})}download(r,n){return $t(this,void 0,void 0,function*(){const l=typeof n?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(n?.transform||{}),d=u?`?${u}`:"";try{const m=this._getFinalPath(r);return{data:yield(yield Oo(this.fetch,`${this.url}/${l}/${m}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(bt(m))return{data:null,error:m};throw m}})}info(r){return $t(this,void 0,void 0,function*(){const n=this._getFinalPath(r);try{const a=yield Oo(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Zc(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bt(a))return{data:null,error:a};throw a}})}exists(r){return $t(this,void 0,void 0,function*(){const n=this._getFinalPath(r);try{return yield h0(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bt(a)&&a instanceof Xc){const l=a.originalError;if([400,404].includes(l?.status))return{data:!1,error:a}}throw a}})}getPublicUrl(r,n){const a=this._getFinalPath(r),l=[],u=n?.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&l.push(u);const m=typeof n?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(n?.transform||{});p!==""&&l.push(p);let y=l.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${a}${y}`)}}}remove(r){return $t(this,void 0,void 0,function*(){try{return{data:yield kp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}list(r,n,a){return $t(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},f0),n),{prefix:r||""});return{data:yield Pr(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},a),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(bt(l))return{data:null,error:l};throw l}})}listV2(r,n){return $t(this,void 0,void 0,function*(){try{const a=Object.assign({},r);return{data:yield Pr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bt(a))return{data:null,error:a};throw a}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const n=[];return r.width&&n.push(`width=${r.width}`),r.height&&n.push(`height=${r.height}`),r.resize&&n.push(`resize=${r.resize}`),r.format&&n.push(`format=${r.format}`),r.quality&&n.push(`quality=${r.quality}`),n.join("&")}}const m0="2.12.1",g0={"X-Client-Info":`storage-js/${m0}`};var Ws=function(i,r,n,a){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function m(g){try{y(a.next(g))}catch(x){d(x)}}function p(g){try{y(a.throw(g))}catch(x){d(x)}}function y(g){g.done?u(g.value):l(g.value).then(m,p)}y((a=a.apply(i,r||[])).next())})};class y0{constructor(r,n={},a,l){this.shouldThrowOnError=!1;const u=new URL(r);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href,this.headers=Object.assign(Object.assign({},g0),n),this.fetch=bp(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ws(this,void 0,void 0,function*(){try{return{data:yield Oo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}})}getBucket(r){return Ws(this,void 0,void 0,function*(){try{return{data:yield Oo(this.fetch,`${this.url}/bucket/${r}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}createBucket(r,n={public:!1}){return Ws(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bt(a))return{data:null,error:a};throw a}})}updateBucket(r,n){return Ws(this,void 0,void 0,function*(){try{return{data:yield eu(this.fetch,`${this.url}/bucket/${r}`,{id:r,name:r,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(bt(a))return{data:null,error:a};throw a}})}emptyBucket(r){return Ws(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket/${r}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}deleteBucket(r){return Ws(this,void 0,void 0,function*(){try{return{data:yield kp(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}}class v0 extends y0{constructor(r,n={},a,l){super(r,n,a,l)}from(r){return new p0(this.url,this.headers,r,this.fetch)}}const w0="2.57.4";let Vi="";typeof Deno<"u"?Vi="deno":typeof document<"u"?Vi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Vi="react-native":Vi="node";const x0={"X-Client-Info":`supabase-js-${Vi}/${w0}`},b0={headers:x0},k0={schema:"public"},S0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_0={};var j0=function(i,r,n,a){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function m(g){try{y(a.next(g))}catch(x){d(x)}}function p(g){try{y(a.throw(g))}catch(x){d(x)}}function y(g){g.done?u(g.value):l(g.value).then(m,p)}y((a=a.apply(i,r||[])).next())})};const E0=i=>{let r;return i?r=i:typeof fetch>"u"?r=hp:r=fetch,(...n)=>r(...n)},N0=()=>typeof Headers>"u"?fp:Headers,C0=(i,r,n)=>{const a=E0(n),l=N0();return(u,d)=>j0(void 0,void 0,void 0,function*(){var m;const p=(m=yield r())!==null&&m!==void 0?m:i;let y=new l(d?.headers);return y.has("apikey")||y.set("apikey",i),y.has("Authorization")||y.set("Authorization",`Bearer ${p}`),a(u,Object.assign(Object.assign({},d),{headers:y}))})};var T0=function(i,r,n,a){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function m(g){try{y(a.next(g))}catch(x){d(x)}}function p(g){try{y(a.throw(g))}catch(x){d(x)}}function y(g){g.done?u(g.value):l(g.value).then(m,p)}y((a=a.apply(i,r||[])).next())})};function P0(i){return i.endsWith("/")?i:i+"/"}function O0(i,r){var n,a;const{db:l,auth:u,realtime:d,global:m}=i,{db:p,auth:y,realtime:g,global:x}=r,b={db:Object.assign(Object.assign({},p),l),auth:Object.assign(Object.assign({},y),u),realtime:Object.assign(Object.assign({},g),d),storage:{},global:Object.assign(Object.assign(Object.assign({},x),m),{headers:Object.assign(Object.assign({},(n=x?.headers)!==null&&n!==void 0?n:{}),(a=m?.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>T0(this,void 0,void 0,function*(){return""})};return i.accessToken?b.accessToken=i.accessToken:delete b.accessToken,b}function A0(i){const r=i?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(P0(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Sp="2.71.1",Vs=30*1e3,tu=3,Dc=tu*Vs,I0="http://localhost:9999",R0="supabase.auth.token",D0={"X-Client-Info":`gotrue-js/${Sp}`},ru="X-Supabase-Api-Version",_p={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},L0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,M0=600*1e3;class xu extends Error{constructor(r,n,a){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=a}}function Le(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class U0 extends xu{constructor(r,n,a){super(r,n,a),this.name="AuthApiError",this.status=n,this.code=a}}function F0(i){return Le(i)&&i.name==="AuthApiError"}class jp extends xu{constructor(r,n){super(r),this.name="AuthUnknownError",this.originalError=n}}class Pn extends xu{constructor(r,n,a,l){super(r,a,l),this.name=n,this.status=a}}class jn extends Pn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function B0(i){return Le(i)&&i.name==="AuthSessionMissingError"}class xo extends Pn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bo extends Pn{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class ko extends Pn{constructor(r,n=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function W0(i){return Le(i)&&i.name==="AuthImplicitGrantRedirectError"}class If extends Pn{constructor(r,n=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class nu extends Pn{constructor(r,n){super(r,"AuthRetryableFetchError",n,void 0)}}function Lc(i){return Le(i)&&i.name==="AuthRetryableFetchError"}class Rf extends Pn{constructor(r,n,a){super(r,"AuthWeakPasswordError",n,"weak_password"),this.reasons=a}}class su extends Pn{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ao="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Df=` 	
\r=`.split(""),$0=(()=>{const i=new Array(128);for(let r=0;r<i.length;r+=1)i[r]=-1;for(let r=0;r<Df.length;r+=1)i[Df[r].charCodeAt(0)]=-2;for(let r=0;r<Ao.length;r+=1)i[Ao[r].charCodeAt(0)]=r;return i})();function Lf(i,r,n){if(i!==null)for(r.queue=r.queue<<8|i,r.queuedBits+=8;r.queuedBits>=6;){const a=r.queue>>r.queuedBits-6&63;n(Ao[a]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const a=r.queue>>r.queuedBits-6&63;n(Ao[a]),r.queuedBits-=6}}function Ep(i,r,n){const a=$0[i];if(a>-1)for(r.queue=r.queue<<6|a,r.queuedBits+=6;r.queuedBits>=8;)n(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Mf(i){const r=[],n=d=>{r.push(String.fromCodePoint(d))},a={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},u=d=>{H0(d,a,n)};for(let d=0;d<i.length;d+=1)Ep(i.charCodeAt(d),l,u);return r.join("")}function z0(i,r){if(i<=127){r(i);return}else if(i<=2047){r(192|i>>6),r(128|i&63);return}else if(i<=65535){r(224|i>>12),r(128|i>>6&63),r(128|i&63);return}else if(i<=1114111){r(240|i>>18),r(128|i>>12&63),r(128|i>>6&63),r(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function q0(i,r){for(let n=0;n<i.length;n+=1){let a=i.charCodeAt(n);if(a>55295&&a<=56319){const l=(a-55296)*1024&65535;a=(i.charCodeAt(n+1)-56320&65535|l)+65536,n+=1}z0(a,r)}}function H0(i,r,n){if(r.utf8seq===0){if(i<=127){n(i);return}for(let a=1;a<6;a+=1)if((i>>7-a&1)===0){r.utf8seq=a;break}if(r.utf8seq===2)r.codepoint=i&31;else if(r.utf8seq===3)r.codepoint=i&15;else if(r.utf8seq===4)r.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|i&63,r.utf8seq-=1,r.utf8seq===0&&n(r.codepoint)}}function V0(i){const r=[],n={queue:0,queuedBits:0},a=l=>{r.push(l)};for(let l=0;l<i.length;l+=1)Ep(i.charCodeAt(l),n,a);return new Uint8Array(r)}function G0(i){const r=[];return q0(i,n=>r.push(n)),new Uint8Array(r)}function J0(i){const r=[],n={queue:0,queuedBits:0},a=l=>{r.push(l)};return i.forEach(l=>Lf(l,n,a)),Lf(null,n,a),r.join("")}function K0(i){return Math.round(Date.now()/1e3)+i}function Q0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const r=Math.random()*16|0;return(i=="x"?r:r&3|8).toString(16)})}const br=()=>typeof window<"u"&&typeof document<"u",Kn={tested:!1,writable:!1},Np=()=>{if(!br())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kn.tested)return Kn.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Kn.tested=!0,Kn.writable=!0}catch{Kn.tested=!0,Kn.writable=!1}return Kn.writable};function Y0(i){const r={},n=new URL(i);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((l,u)=>{r[u]=l})}catch{}return n.searchParams.forEach((a,l)=>{r[l]=a}),r}const Cp=i=>{let r;return i?r=i:typeof fetch>"u"?r=(...n)=>$e(async()=>{const{default:a}=await Promise.resolve().then(()=>si);return{default:a}},void 0).then(({default:a})=>a(...n)):r=fetch,(...n)=>r(...n)},X0=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Gs=async(i,r,n)=>{await i.setItem(r,JSON.stringify(n))},Qn=async(i,r)=>{const n=await i.getItem(r);if(!n)return null;try{return JSON.parse(n)}catch{return n}},_n=async(i,r)=>{await i.removeItem(r)};class Fo{constructor(){this.promise=new Fo.promiseConstructor((r,n)=>{this.resolve=r,this.reject=n})}}Fo.promiseConstructor=Promise;function Mc(i){const r=i.split(".");if(r.length!==3)throw new su("Invalid JWT structure");for(let a=0;a<r.length;a++)if(!L0.test(r[a]))throw new su("JWT not in base64url format");return{header:JSON.parse(Mf(r[0])),payload:JSON.parse(Mf(r[1])),signature:V0(r[2]),raw:{header:r[0],payload:r[1]}}}async function Z0(i){return await new Promise(r=>{setTimeout(()=>r(null),i)})}function ex(i,r){return new Promise((a,l)=>{(async()=>{for(let u=0;u<1/0;u++)try{const d=await i(u);if(!r(u,null,d)){a(d);return}}catch(d){if(!r(u,d)){l(d);return}}})()})}function tx(i){return("0"+i.toString(16)).substr(-2)}function rx(){const r=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=n.length;let l="";for(let u=0;u<56;u++)l+=n.charAt(Math.floor(Math.random()*a));return l}return crypto.getRandomValues(r),Array.from(r,tx).join("")}async function nx(i){const n=new TextEncoder().encode(i),a=await crypto.subtle.digest("SHA-256",n),l=new Uint8Array(a);return Array.from(l).map(u=>String.fromCharCode(u)).join("")}async function sx(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const n=await nx(i);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $s(i,r,n=!1){const a=rx();let l=a;n&&(l+="/PASSWORD_RECOVERY"),await Gs(i,`${r}-code-verifier`,l);const u=await sx(a);return[u,a===u?"plain":"s256"]}const ix=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ax(i){const r=i.headers.get(ru);if(!r||!r.match(ix))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function ox(i){if(!i)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(i<=r)throw new Error("JWT has expired")}function lx(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const cx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function zs(i){if(!cx.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Uc(){const i={};return new Proxy(i,{get:(r,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Uf(i){return JSON.parse(JSON.stringify(i))}var ux=function(i,r){var n={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&r.indexOf(a)<0&&(n[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(i);l<a.length;l++)r.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(i,a[l])&&(n[a[l]]=i[a[l]]);return n};const Xn=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),dx=[502,503,504];async function Ff(i){var r;if(!X0(i))throw new nu(Xn(i),0);if(dx.includes(i.status))throw new nu(Xn(i),i.status);let n;try{n=await i.json()}catch(u){throw new jp(Xn(u),u)}let a;const l=ax(i);if(l&&l.getTime()>=_p["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?a=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(a=n.error_code),a){if(a==="weak_password")throw new Rf(Xn(n),i.status,((r=n.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(a==="session_not_found")throw new jn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((u,d)=>u&&typeof d=="string",!0))throw new Rf(Xn(n),i.status,n.weak_password.reasons);throw new U0(Xn(n),i.status||500,a)}const hx=(i,r,n,a)=>{const l={method:i,headers:r?.headers||{}};return i==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),l.body=JSON.stringify(a),Object.assign(Object.assign({},l),n))};async function Fe(i,r,n,a){var l;const u=Object.assign({},a?.headers);u[ru]||(u[ru]=_p["2024-01-01"].name),a?.jwt&&(u.Authorization=`Bearer ${a.jwt}`);const d=(l=a?.query)!==null&&l!==void 0?l:{};a?.redirectTo&&(d.redirect_to=a.redirectTo);const m=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",p=await fx(i,r,n+m,{headers:u,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(p):{data:Object.assign({},p),error:null}}async function fx(i,r,n,a,l,u){const d=hx(r,a,l,u);let m;try{m=await i(n,Object.assign({},d))}catch(p){throw console.error(p),new nu(Xn(p),0)}if(m.ok||await Ff(m),a?.noResolveJson)return m;try{return await m.json()}catch(p){await Ff(p)}}function Vr(i){var r;let n=null;yx(i)&&(n=Object.assign({},i),i.expires_at||(n.expires_at=K0(i.expires_in)));const a=(r=i.user)!==null&&r!==void 0?r:i;return{data:{session:n,user:a},error:null}}function Bf(i){const r=Vr(i);return!r.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((n,a)=>n&&typeof a=="string",!0)&&(r.data.weak_password=i.weak_password),r}function Nn(i){var r;return{data:{user:(r=i.user)!==null&&r!==void 0?r:i},error:null}}function px(i){return{data:i,error:null}}function mx(i){const{action_link:r,email_otp:n,hashed_token:a,redirect_to:l,verification_type:u}=i,d=ux(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:r,email_otp:n,hashed_token:a,redirect_to:l,verification_type:u},p=Object.assign({},d);return{data:{properties:m,user:p},error:null}}function gx(i){return i}function yx(i){return i.access_token&&i.refresh_token&&i.expires_in}const Fc=["global","local","others"];var vx=function(i,r){var n={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&r.indexOf(a)<0&&(n[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(i);l<a.length;l++)r.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(i,a[l])&&(n[a[l]]=i[a[l]]);return n};class wx{constructor({url:r="",headers:n={},fetch:a}){this.url=r,this.headers=n,this.fetch=Cp(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(r,n=Fc[0]){if(Fc.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Fc.join(", ")}`);try{return await Fe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(a){if(Le(a))return{data:null,error:a};throw a}}async inviteUserByEmail(r,n={}){try{return await Fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Nn})}catch(a){if(Le(a))return{data:{user:null},error:a};throw a}}async generateLink(r){try{const{options:n}=r,a=vx(r,["options"]),l=Object.assign(Object.assign({},a),n);return"newEmail"in a&&(l.new_email=a?.newEmail,delete l.newEmail),await Fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:mx,redirectTo:n?.redirectTo})}catch(n){if(Le(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(r){try{return await Fe(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:Nn})}catch(n){if(Le(n))return{data:{user:null},error:n};throw n}}async listUsers(r){var n,a,l,u,d,m,p;try{const y={nextPage:null,lastPage:0,total:0},g=await Fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(n=r?.page)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:"",per_page:(u=(l=r?.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:gx});if(g.error)throw g.error;const x=await g.json(),b=(d=g.headers.get("x-total-count"))!==null&&d!==void 0?d:0,N=(p=(m=g.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return N.length>0&&(N.forEach(S=>{const C=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(S.split(";")[1].split("=")[1]);y[`${k}Page`]=C}),y.total=parseInt(b)),{data:Object.assign(Object.assign({},x),y),error:null}}catch(y){if(Le(y))return{data:{users:[]},error:y};throw y}}async getUserById(r){zs(r);try{return await Fe(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:Nn})}catch(n){if(Le(n))return{data:{user:null},error:n};throw n}}async updateUserById(r,n){zs(r);try{return await Fe(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:n,headers:this.headers,xform:Nn})}catch(a){if(Le(a))return{data:{user:null},error:a};throw a}}async deleteUser(r,n=!1){zs(r);try{return await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:n},xform:Nn})}catch(a){if(Le(a))return{data:{user:null},error:a};throw a}}async _listFactors(r){zs(r.userId);try{const{data:n,error:a}=await Fe(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:n,error:a}}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _deleteFactor(r){zs(r.userId),zs(r.id);try{return{data:await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}}}function Wf(i={}){return{getItem:r=>i[r]||null,setItem:(r,n)=>{i[r]=n},removeItem:r=>{delete i[r]}}}function xx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const qs={debug:!!(globalThis&&Np()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Tp extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class bx extends Tp{}async function kx(i,r,n){qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,r);const a=new globalThis.AbortController;return r>0&&setTimeout(()=>{a.abort(),qs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async l=>{if(l){qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,l.name);try{return await n()}finally{qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,l.name)}}else{if(r===0)throw qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new bx(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(qs.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}xx();const Sx={url:I0,storageKey:R0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:D0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function $f(i,r,n){return await n()}const Hs={};class ea{constructor(r){var n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ea.nextInstanceID,ea.nextInstanceID+=1,this.instanceID>0&&br()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},Sx),r);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new wx({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Cp(l.fetch),this.lock=l.lock||$f,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:br()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=kx:this.lock=$f,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Np()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Wf(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Wf(this.memoryStorage)),br()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}get jwks(){var r,n;return(n=(r=Hs[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(r){Hs[this.storageKey]=Object.assign(Object.assign({},Hs[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,n;return(n=(r=Hs[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){Hs[this.storageKey]=Object.assign(Object.assign({},Hs[this.storageKey]),{cachedAt:r})}_debug(...r){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Sp}) ${new Date().toISOString()}`,...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{const n=Y0(window.location.href);let a="none";if(this._isImplicitGrantCallback(n)?a="implicit":await this._isPKCECallback(n)&&(a="pkce"),br()&&this.detectSessionInUrl&&a!=="none"){const{data:l,error:u}=await this._getSessionFromURL(n,a);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),W0(u)){const p=(r=u.details)===null||r===void 0?void 0:r.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:d,redirectType:m}=l;return this._debug("#_initialize()","detected session in URL",d,"redirect type",m),await this._saveSession(d),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Le(n)?{error:n}:{error:new jp("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var n,a,l;try{const u=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(n=r?.options)===null||n===void 0?void 0:n.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(l=r?.options)===null||l===void 0?void 0:l.captchaToken}},xform:Vr}),{data:d,error:m}=u;if(m||!d)return{data:{user:null,session:null},error:m};const p=d.session,y=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:y,session:p},error:null}}catch(u){if(Le(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(r){var n,a,l;try{let u;if("email"in r){const{email:g,password:x,options:b}=r;let N=null,S=null;this.flowType==="pkce"&&([N,S]=await $s(this.storage,this.storageKey)),u=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:g,password:x,data:(n=b?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:N,code_challenge_method:S},xform:Vr})}else if("phone"in r){const{phone:g,password:x,options:b}=r;u=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:x,data:(a=b?.data)!==null&&a!==void 0?a:{},channel:(l=b?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Vr})}else throw new bo("You must provide either an email or phone number and a password");const{data:d,error:m}=u;if(m||!d)return{data:{user:null,session:null},error:m};const p=d.session,y=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:y,session:p},error:null}}catch(u){if(Le(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(r){try{let n;if("email"in r){const{email:u,password:d,options:m}=r;n=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:d,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Bf})}else if("phone"in r){const{phone:u,password:d,options:m}=r;n=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:d,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Bf})}else throw new bo("You must provide either an email or phone number and a password");const{data:a,error:l}=n;return l?{data:{user:null,session:null},error:l}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new xo}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:l})}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(r){var n,a,l,u;return await this._handleProviderSignIn(r.provider,{redirectTo:(n=r.options)===null||n===void 0?void 0:n.redirectTo,scopes:(a=r.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=r.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(u=r.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:n}=r;if(n==="solana")return await this.signInWithSolana(r);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(r){var n,a,l,u,d,m,p,y,g,x,b,N;let S,C;if("message"in r)S=r.message,C=r.signature;else{const{chain:k,wallet:q,statement:$,options:L}=r;let F;if(br())if(typeof q=="object")F=q;else{const V=window;if("solana"in V&&typeof V.solana=="object"&&("signIn"in V.solana&&typeof V.solana.signIn=="function"||"signMessage"in V.solana&&typeof V.solana.signMessage=="function"))F=V.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=q}const ee=new URL((n=L?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in F&&F.signIn){const V=await F.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L?.signInWithSolana),{version:"1",domain:ee.host,uri:ee.href}),$?{statement:$}:null));let W;if(Array.isArray(V)&&V[0]&&typeof V[0]=="object")W=V[0];else if(V&&typeof V=="object"&&"signedMessage"in V&&"signature"in V)W=V;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)S=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),C=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in F)||typeof F.signMessage!="function"||!("publicKey"in F)||typeof F!="object"||!F.publicKey||!("toBase58"in F.publicKey)||typeof F.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${ee.host} wants you to sign in with your Solana account:`,F.publicKey.toBase58(),...$?["",$,""]:[""],"Version: 1",`URI: ${ee.href}`,`Issued At: ${(l=(a=L?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((u=L?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((d=L?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((m=L?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((p=L?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((y=L?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((x=(g=L?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||x===void 0)&&x.length?["Resources",...L.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const V=await F.signMessage(new TextEncoder().encode(S),"utf8");if(!V||!(V instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=V}}try{const{data:k,error:q}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:J0(C)},!((b=r.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(N=r.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:Vr});if(q)throw q;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new xo}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:q})}catch(k){if(Le(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(r){const n=await Qn(this.storage,`${this.storageKey}-code-verifier`),[a,l]=(n??"").split("/");try{const{data:u,error:d}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:a},xform:Vr});if(await _n(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new xo}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:l??null}),error:d})}catch(u){if(Le(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(r){try{const{options:n,provider:a,token:l,access_token:u,nonce:d}=r,m=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:l,access_token:u,nonce:d,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Vr}),{data:p,error:y}=m;return y?{data:{user:null,session:null},error:y}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new xo}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:y})}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(r){var n,a,l,u,d;try{if("email"in r){const{email:m,options:p}=r;let y=null,g=null;this.flowType==="pkce"&&([y,g]=await $s(this.storage,this.storageKey));const{error:x}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(n=p?.data)!==null&&n!==void 0?n:{},create_user:(a=p?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:y,code_challenge_method:g},redirectTo:p?.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in r){const{phone:m,options:p}=r,{data:y,error:g}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(l=p?.data)!==null&&l!==void 0?l:{},create_user:(u=p?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(d=p?.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:y?.message_id},error:g}}throw new bo("You must provide either an email or phone number.")}catch(m){if(Le(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(r){var n,a;try{let l,u;"options"in r&&(l=(n=r.options)===null||n===void 0?void 0:n.redirectTo,u=(a=r.options)===null||a===void 0?void 0:a.captchaToken);const{data:d,error:m}=await Fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:u}}),redirectTo:l,xform:Vr});if(m)throw m;if(!d)throw new Error("An error occurred on token verification.");const p=d.session,y=d.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:y,session:p},error:null}}catch(l){if(Le(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(r){var n,a,l;try{let u=null,d=null;return this.flowType==="pkce"&&([u,d]=await $s(this.storage,this.storageKey)),await Fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(a=(n=r.options)===null||n===void 0?void 0:n.redirectTo)!==null&&a!==void 0?a:void 0}),!((l=r?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:d}),headers:this.headers,xform:px})}catch(u){if(Le(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;if(a)throw a;if(!n)throw new jn;const{error:l}=await Fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:l}})}catch(r){if(Le(r))return{data:{user:null,session:null},error:r};throw r}}async resend(r){try{const n=`${this.url}/resend`;if("email"in r){const{email:a,type:l,options:u}=r,{error:d}=await Fe(this.fetch,"POST",n,{headers:this.headers,body:{email:a,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in r){const{phone:a,type:l,options:u}=r,{data:d,error:m}=await Fe(this.fetch,"POST",n,{headers:this.headers,body:{phone:a,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:d?.message_id},error:m}}throw new bo("You must provide either an email or phone number and a type")}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(r,n){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await a,await n()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=n();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await r(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const n=await Qn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?r=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const a=r.expires_at?r.expires_at*1e3-Date.now()<Dc:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",r.expires_at),!a){if(this.userStorage){const d=await Qn(this.userStorage,this.storageKey+"-user");d?.user?r.user=d.user:r.user=Uc()}if(this.storage.isServer&&r.user){let d=this.suppressGetSessionWarning;r=new Proxy(r,{get:(p,y,g)=>(!d&&y==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,y,g))})}return{data:{session:r},error:null}}const{session:l,error:u}=await this._callRefreshToken(r.refresh_token);return u?{data:{session:null},error:u}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(r){return r?await this._getUser(r):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(r){try{return r?await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:Nn}):await this._useSession(async n=>{var a,l,u;const{data:d,error:m}=n;if(m)throw m;return!(!((a=d.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new jn}:await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0,xform:Nn})})}catch(n){if(Le(n))return B0(n)&&(await this._removeSession(),await _n(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(r,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,n))}async _updateUser(r,n={}){try{return await this._useSession(async a=>{const{data:l,error:u}=a;if(u)throw u;if(!l.session)throw new jn;const d=l.session;let m=null,p=null;this.flowType==="pkce"&&r.email!=null&&([m,p]=await $s(this.storage,this.storageKey));const{data:y,error:g}=await Fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:m,code_challenge_method:p}),jwt:d.access_token,xform:Nn});if(g)throw g;return d.user=y.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(a){if(Le(a))return{data:{user:null},error:a};throw a}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new jn;const n=Date.now()/1e3;let a=n,l=!0,u=null;const{payload:d}=Mc(r.access_token);if(d.exp&&(a=d.exp,l=a<=n),l){const{session:m,error:p}=await this._callRefreshToken(r.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!m)return{data:{user:null,session:null},error:null};u=m}else{const{data:m,error:p}=await this._getUser(r.access_token);if(p)throw p;u={access_token:r.access_token,refresh_token:r.refresh_token,user:m.user,token_type:"bearer",expires_in:a-n,expires_at:a},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(n){if(Le(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async n=>{var a;if(!r){const{data:d,error:m}=n;if(m)throw m;r=(a=d.session)!==null&&a!==void 0?a:void 0}if(!r?.refresh_token)throw new jn;const{session:l,error:u}=await this._callRefreshToken(r.refresh_token);return u?{data:{user:null,session:null},error:u}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(r,n){try{if(!br())throw new ko("No browser detected.");if(r.error||r.error_description||r.error_code)throw new ko(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new If("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ko("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new If("No code detected.");const{data:$,error:L}=await this._exchangeCodeForSession(r.code);if(L)throw L;const F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:$.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:l,access_token:u,refresh_token:d,expires_in:m,expires_at:p,token_type:y}=r;if(!u||!m||!d||!y)throw new ko("No session defined in URL");const g=Math.round(Date.now()/1e3),x=parseInt(m);let b=g+x;p&&(b=parseInt(p));const N=b-g;N*1e3<=Vs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${N}s, should have been closer to ${x}s`);const S=b-x;g-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,b,g):g-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,b,g);const{data:C,error:k}=await this._getUser(u);if(k)throw k;const q={provider_token:a,provider_refresh_token:l,access_token:u,expires_in:x,expires_at:b,refresh_token:d,token_type:y,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:q,redirectType:r.type},error:null}}catch(a){if(Le(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(r){return!!(r.access_token||r.error_description)}async _isPKCECallback(r){const n=await Qn(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&n)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async n=>{var a;const{data:l,error:u}=n;if(u)return{error:u};const d=(a=l.session)===null||a===void 0?void 0:a.access_token;if(d){const{error:m}=await this.admin.signOut(d,r);if(m&&!(F0(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return r!=="others"&&(await this._removeSession(),await _n(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(r){const n=Q0(),a={id:n,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:a}}}async _emitInitialSession(r){return await this._useSession(async n=>{var a,l;try{const{data:{session:u},error:d}=n;if(d)throw d;await((a=this.stateChangeEmitters.get(r))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",r,"session",u)}catch(u){await((l=this.stateChangeEmitters.get(r))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",u),console.error(u)}})}async resetPasswordForEmail(r,n={}){let a=null,l=null;this.flowType==="pkce"&&([a,l]=await $s(this.storage,this.storageKey,!0));try{return await Fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:a,code_challenge_method:l,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(u){if(Le(u))return{data:null,error:u};throw u}}async getUserIdentities(){var r;try{const{data:n,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(r=n.user.identities)!==null&&r!==void 0?r:[]},error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}}async linkIdentity(r){var n;try{const{data:a,error:l}=await this._useSession(async u=>{var d,m,p,y,g;const{data:x,error:b}=u;if(b)throw b;const N=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(d=r.options)===null||d===void 0?void 0:d.redirectTo,scopes:(m=r.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=r.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await Fe(this.fetch,"GET",N,{headers:this.headers,jwt:(g=(y=x.session)===null||y===void 0?void 0:y.access_token)!==null&&g!==void 0?g:void 0})});if(l)throw l;return br()&&!(!((n=r.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(a?.url),{data:{provider:r.provider,url:a?.url},error:null}}catch(a){if(Le(a))return{data:{provider:r.provider,url:null},error:a};throw a}}async unlinkIdentity(r){try{return await this._useSession(async n=>{var a,l;const{data:u,error:d}=n;if(d)throw d;return await Fe(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(l=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0})})}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _refreshAccessToken(r){const n=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(n,"begin");try{const a=Date.now();return await ex(async l=>(l>0&&await Z0(200*Math.pow(2,l-1)),this._debug(n,"refreshing attempt",l),await Fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Vr})),(l,u)=>{const d=200*Math.pow(2,l);return u&&Lc(u)&&Date.now()+d-a<Vs})}catch(a){if(this._debug(n,"error",a),Le(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(n,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,n){const a=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",n,"url",a),br()&&!n.skipBrowserRedirect&&window.location.assign(a),{data:{provider:r,url:a},error:null}}async _recoverAndRefresh(){var r,n;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const l=await Qn(this.storage,this.storageKey);if(l&&this.userStorage){let d=await Qn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:l.user},await Gs(this.userStorage,this.storageKey+"-user",d)),l.user=(r=d?.user)!==null&&r!==void 0?r:Uc()}else if(l&&!l.user&&!l.user){const d=await Qn(this.storage,this.storageKey+"-user");d&&d?.user?(l.user=d.user,await _n(this.storage,this.storageKey+"-user"),await Gs(this.storage,this.storageKey,l)):l.user=Uc()}if(this._debug(a,"session from storage",l),!this._isValidSession(l)){this._debug(a,"session is not valid"),l!==null&&await this._removeSession();return}const u=((n=l.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Dc;if(this._debug(a,`session has${u?"":" not"} expired with margin of ${Dc}s`),u){if(this.autoRefreshToken&&l.refresh_token){const{error:d}=await this._callRefreshToken(l.refresh_token);d&&(console.error(d),Lc(d)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:m}=await this._getUser(l.access_token);!m&&d?.user?(l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(a,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(a,"error",l),console.error(l);return}finally{this._debug(a,"end")}}async _callRefreshToken(r){var n,a;if(!r)throw new jn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Fo;const{data:u,error:d}=await this._refreshAccessToken(r);if(d)throw d;if(!u.session)throw new jn;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const m={session:u.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(u){if(this._debug(l,"error",u),Le(u)){const d={session:null,error:u};return Lc(u)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(d),d}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(u),u}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(r,n,a=!0){const l=`#_notifyAllSubscribers(${r})`;this._debug(l,"begin",n,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:r,session:n});const u=[],d=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(r,n)}catch(p){u.push(p)}});if(await Promise.all(d),u.length>0){for(let m=0;m<u.length;m+=1)console.error(u[m]);throw u[0]}}finally{this._debug(l,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0;const n=Object.assign({},r),a=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&n.user&&await Gs(this.userStorage,this.storageKey+"-user",{user:n.user});const l=Object.assign({},n);delete l.user;const u=Uf(l);await Gs(this.storage,this.storageKey,u)}else{const l=Uf(n);await Gs(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await _n(this.storage,this.storageKey),await _n(this.storage,this.storageKey+"-code-verifier"),await _n(this.storage,this.storageKey+"-user"),this.userStorage&&await _n(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&br()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),Vs);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async n=>{const{data:{session:a}}=n;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((a.expires_at*1e3-r)/Vs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${Vs}ms, refresh threshold is ${tu} ticks`),l<=tu&&await this._callRefreshToken(a.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof Tp)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!br()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const n=`#_onVisibilityChanged(${r})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,n,a){const l=[`provider=${encodeURIComponent(n)}`];if(a?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&l.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[u,d]=await $s(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(d)}`});l.push(m.toString())}if(a?.queryParams){const u=new URLSearchParams(a.queryParams);l.push(u.toString())}return a?.skipBrowserRedirect&&l.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${r}?${l.join("&")}`}async _unenroll(r){try{return await this._useSession(async n=>{var a;const{data:l,error:u}=n;return u?{data:null,error:u}:await Fe(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token})})}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _enroll(r){try{return await this._useSession(async n=>{var a,l;const{data:u,error:d}=n;if(d)return{data:null,error:d};const m=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:{issuer:r.issuer}),{data:p,error:y}=await Fe(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(a=u?.session)===null||a===void 0?void 0:a.access_token});return y?{data:null,error:y}:(r.factorType==="totp"&&(!((l=p?.totp)===null||l===void 0)&&l.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var a;const{data:l,error:u}=n;if(u)return{data:null,error:u};const{data:d,error:m}=await Fe(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:{code:r.code,challenge_id:r.challengeId},headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token});return m?{data:null,error:m}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:m})})}catch(n){if(Le(n))return{data:null,error:n};throw n}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var a;const{data:l,error:u}=n;return u?{data:null,error:u}:await Fe(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:{channel:r.channel},headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token})})}catch(n){if(Le(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(r){const{data:n,error:a}=await this._challenge({factorId:r.factorId});return a?{data:null,error:a}:await this._verify({factorId:r.factorId,challengeId:n.id,code:r.code})}async _listFactors(){const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a=r?.factors||[],l=a.filter(d=>d.factor_type==="totp"&&d.status==="verified"),u=a.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:a,totp:l,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async r=>{var n,a;const{data:{session:l},error:u}=r;if(u)return{data:null,error:u};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Mc(l.access_token);let m=null;d.aal&&(m=d.aal);let p=m;((a=(n=l.user.factors)===null||n===void 0?void 0:n.filter(x=>x.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(p="aal2");const g=d.amr||[];return{data:{currentLevel:m,nextLevel:p,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(r,n={keys:[]}){let a=n.keys.find(m=>m.kid===r);if(a)return a;const l=Date.now();if(a=this.jwks.keys.find(m=>m.kid===r),a&&this.jwks_cached_at+M0>l)return a;const{data:u,error:d}=await Fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=l,a=u.keys.find(m=>m.kid===r),!a)?null:a}async getClaims(r,n={}){try{let a=r;if(!a){const{data:N,error:S}=await this.getSession();if(S||!N.session)return{data:null,error:S};a=N.session.access_token}const{header:l,payload:u,signature:d,raw:{header:m,payload:p}}=Mc(a);n?.allowExpired||ox(u.exp);const y=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!y){const{error:N}=await this.getUser(a);if(N)throw N;return{data:{claims:u,header:l,signature:d},error:null}}const g=lx(l.alg),x=await crypto.subtle.importKey("jwk",y,g,!0,["verify"]);if(!await crypto.subtle.verify(g,x,d,G0(`${m}.${p}`)))throw new su("Invalid JWT signature");return{data:{claims:u,header:l,signature:d},error:null}}catch(a){if(Le(a))return{data:null,error:a};throw a}}}ea.nextInstanceID=0;const _x=ea;class jx extends _x{constructor(r){super(r)}}var Ex=function(i,r,n,a){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function m(g){try{y(a.next(g))}catch(x){d(x)}}function p(g){try{y(a.throw(g))}catch(x){d(x)}}function y(g){g.done?u(g.value):l(g.value).then(m,p)}y((a=a.apply(i,r||[])).next())})};class Nx{constructor(r,n,a){var l,u,d;this.supabaseUrl=r,this.supabaseKey=n;const m=A0(r);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const p=`sb-${m.hostname.split(".")[0]}-auth-token`,y={db:k0,realtime:_0,auth:Object.assign(Object.assign({},S0),{storageKey:p}),global:b0},g=O0(a??{},y);this.storageKey=(l=g.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(u=g.global.headers)!==null&&u!==void 0?u:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(x,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=g.auth)!==null&&d!==void 0?d:{},this.headers,g.global.fetch),this.fetch=C0(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new $w(new URL("rest/v1",m).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new v0(this.storageUrl.href,this.headers,this.fetch,a?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new Aw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,n={},a={}){return this.rest.rpc(r,n,a)}channel(r,n={config:{}}){return this.realtime.channel(r,n)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var r,n;return Ex(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(n=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:n,detectSessionInUrl:a,storage:l,userStorage:u,storageKey:d,flowType:m,lock:p,debug:y},g,x){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new jx({url:this.authUrl.href,headers:Object.assign(Object.assign({},b),g),storageKey:d,autoRefreshToken:r,persistSession:n,detectSessionInUrl:a,storage:l,userStorage:u,flowType:m,lock:p,debug:y,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(N=>N.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new i0(this.realtimeUrl.href,Object.assign(Object.assign({},r),{params:Object.assign({apikey:this.supabaseKey},r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,a)=>{this._handleTokenChanged(n,"CLIENT",a?.access_token)})}_handleTokenChanged(r,n,a){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:r==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Cx=(i,r,n)=>new Nx(i,r,n);function Tx(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const r=i.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Tx()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Px="https://hkvkomtaffybchjdjfws.supabase.co",Ox="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhrdmtvbXRhZmZ5YmNoamRqZndzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY4MTc3ODQsImV4cCI6MjA3MjM5Mzc4NH0.A0Eaqx1g8ADX0uiUL8eDw-2h6RF50csP-KKCTtVdhCE",ut=Cx(Px,Ox);async function iu(i){const r=i&&i.headers?{...i.headers}:{};try{if(ut&&typeof ut.auth?.getSession=="function"){const a=(await ut.auth.getSession())?.data?.session?.access_token??null;a&&(r.Authorization=`Bearer ${a}`)}}catch{}if(!r.Authorization)try{const n=No();n&&(r.Authorization=`Bearer ${n}`)}catch{}return{...i||{},headers:r}}const On=Object.freeze(Object.defineProperty({__proto__:null,attachAuthHeaders:iu,default:iu},Symbol.toStringTag,{value:"Module"}));async function Ax(i,r){try{const n={id:r.id,name:r.name,price:r.price,type:r.type,image:r.image||null,description:r.description||""},a=await iu({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:i,item:n})}),l=await fetch("/api/user?action=buy",a);if(!l.ok){try{const d=await l.json();console.warn("[buyShopItem] server error",d.code||d.message||l.status)}catch{console.warn("[buyShopItem] server error status",l.status)}return null}const u=await l.json();if(u.user){try{jr({data:u.user})}catch{}return u.user}return null}catch{return null}}async function Io(i){try{try{const{data:l,error:u}=await ut.from("app_users").select("*").eq("id",i).limit(1).maybeSingle();if(u||!l)return null;try{jr({data:l})}catch{}return l}catch{return null}const n=await fetch(`/api/user/${i}`);if(!n.ok)return null;const a=await n.json();if(a.user){try{jr({data:a.user})}catch{}return a.user}return null}catch{return null}}async function Ix(i,r){const n=String(i).trim().toLowerCase();if(!0){const d=await ut.auth.signInWithPassword({email:n,password:r});if(d.error||!d.data?.session){const x=d.error?.message||"Sign in failed";if(/confirm|verify|not.*confirmed|email.*confirm/i.test(x)){const b=new Error("Email not confirmed");throw b.code="ERR_EMAIL_UNCONFIRMED",b}throw new Error(x)}const m=d.data.session.access_token,p=d.data.user;let y=p.user_metadata&&p.user_metadata.username||null;if(!y)try{const{data:x}=await ut.from("app_users").select("username").eq("id",p.id).limit(1).maybeSingle();x&&x.username&&(y=x.username)}catch{}const g={data:{id:p.id,email:p.email,username:y||p.email,energy:p.user_metadata&&p.user_metadata.energy||0}};try{sessionStorage.removeItem("fitbuddy_no_auto_restore")}catch{}try{localStorage.removeItem("fitbuddy_no_auto_restore")}catch{}try{jr({data:g.data,token:m},{skipBackup:!0,forceSave:!0})}catch{}try{m&&ip(m)}catch{}try{const x=g.data.username;x&&await ut.auth.updateUser({data:{display_name:x,username:x}})}catch(x){console.warn("[authService] failed to update supabase user metadata",x&&x.message||String(x))}return g.data}const l=await fetch("/api/auth?action=signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:r})});if(!l.ok){const d=await l.json();throw new Error(d.message||"Sign in failed")}const u=await l.json();if(u.user){const d={data:u.user,token:u.token??null};try{jr(d,{skipBackup:!0})}catch{}}return u.user}async function Rx(i,r,n){const a=String(i).trim().toLowerCase();if(!0){const m=await ut.auth.signUp({email:a,password:n,options:{data:{username:r,energy:100}}});if(m.error)throw new Error(m.error.message||"Sign up failed");const p=m.data?.session?.access_token??null,y=m.data?.user??null,g={data:y?{id:y.id,email:y.email,username:r,energy:100}:null,token:p};try{sessionStorage.removeItem("fitbuddy_no_auto_restore")}catch{}try{localStorage.removeItem("fitbuddy_no_auto_restore")}catch{}try{jr(g,{skipBackup:!0,forceSave:!0})}catch{}return g.data}const u=await fetch("/api/auth?action=signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,username:r,password:n})});if(!u.ok){const m=await u.json();throw new Error(m.message||"Sign up failed")}const d=await u.json();if(d.user){const m={data:d.user,token:d.token??null};try{jr(m,{skipBackup:!0})}catch{}}return d.user}function Ro(){try{return Ar()}catch{return null}}function Dx(){try{pu()}catch{}try{sessionStorage.removeItem("fitbuddy_no_auto_restore")}catch{}try{localStorage.removeItem("fitbuddy_no_auto_restore")}catch{}try{const{clearUserData:i}=require("./localStorage");i()}catch{}try{sessionStorage.removeItem("fitbuddyUsername")}catch{}try{ut&&typeof ut.auth?.signOut=="function"&&ut.auth.signOut().catch(()=>{})}catch{}}const Lx=()=>{const i=Ir(),r=()=>{try{localStorage.setItem("fitbuddy_no_auto_restore","1")}catch{}try{sessionStorage.setItem("fitbuddy_no_auto_restore","1")}catch{}try{pu()}catch{}try{ni()}catch{}try{ri()}catch{}try{sa()}catch{}try{Dx()}catch{}try{window.dispatchEvent(new Event("fitbuddy-logout"))}catch{}i("/signin"),(async()=>{try{let n=null;try{const{loadUserData:a}=await $e(async()=>{const{loadUserData:u}=await Promise.resolve().then(()=>zt);return{loadUserData:u}},void 0),l=a();n=l?.id||l?.sub||l?.data?.id||null}catch{}if(n){try{await du(String(n))}catch{}try{await ra(String(n))}catch{}}}catch{}})();try{setTimeout(()=>{try{sessionStorage.removeItem("fitbuddy_no_auto_restore")}catch{}try{localStorage.removeItem("fitbuddy_no_auto_restore")}catch{}},3e3)}catch{}};return o.jsx("button",{className:"btn signout-btn",onClick:r,children:"Sign Out"})},Mx=({userData:i,onProfileUpdate:r})=>{const[n,a]=j.useState(i||Ro()),[l,u]=j.useState(!1),[d,m]=j.useState(n?.username||""),[p,y]=j.useState(n?.avatar||"/images/fitbuddy_head.png"),[g,x]=j.useState(!1),[b,N]=j.useState(""),S=Ir();if(j.useEffect(()=>{let F=!1;const ee=async()=>{const W=Ro();if(!W?.id)return;const te=await Io(W.id);!F&&te&&a(te)};ee();const V=setInterval(ee,1e3);return()=>{F=!0,clearInterval(V)}},[]),!n)return o.jsx("div",{className:"profile-page",children:o.jsxs("div",{className:"profile-card fade-in-bounce",children:[o.jsx("div",{className:"profile-avatar-bg",children:o.jsx("img",{src:"/images/fitbuddy_head.png",alt:"User Avatar",className:"avatar","data-testid":"profile-avatar"})}),o.jsx("h1",{className:"profile-username-gradient",children:"Guest"}),o.jsxs("div",{className:"profile-actions-row",children:[o.jsx("button",{className:"btn edit-profile",onClick:()=>S("/signin"),children:"Sign In"}),o.jsx("button",{className:"btn view-achievements",onClick:()=>S("/signup"),children:"Sign Up"})]}),o.jsx("p",{className:"not-logged-in-desc",children:"Sign in to track your workouts, earn energy, and unlock achievements!"})]})});const C=["https://api.dicebear.com/7.x/bottts/svg?seed=FitBuddy1","https://api.dicebear.com/7.x/bottts/svg?seed=DragonHead","https://api.dicebear.com/7.x/bottts/svg?seed=Duolingo"],k=["/images/fitbuddy_head.png",...C,"https://api.dicebear.com/7.x/bottts/svg?seed=FitBuddy2","https://api.dicebear.com/7.x/bottts/svg?seed=FitBuddy3","https://api.dicebear.com/7.x/bottts/svg?seed=FitBuddy4","https://api.dicebear.com/7.x/bottts/svg?seed=Pizza","https://we09532.github.io/Image_Hosting/Fishwins/Fishwin_Head.png","https://api.dicebear.com/7.x/bottts/svg?seed=Language","https://api.dicebear.com/7.x/bottts/svg?seed=Fitness","https://media1.giphy.com/media/4bjIKBOWUnVPICCzJc/source.gif"],q=()=>{m(n?.username||""),y(n?.avatar||"/images/fitbuddy_head.png"),u(!0),N("")},$=()=>{u(!1),N("")},L=async()=>{x(!0),N("");try{const F=await fetch("/api/user?action=update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n.id,username:d,avatar:p})});if(F.ok){const ee=await F.json();a(ee.user),r(ee.user),u(!1)}else{const ee={...n,username:d,avatar:p};try{const{saveUserData:V}=await $e(async()=>{const{saveUserData:W}=await Promise.resolve().then(()=>zt);return{saveUserData:W}},void 0);V({data:ee})}catch{}a(ee),r(ee),u(!1),N("Saved locally (session)  server unavailable.")}}catch{const ee={...n,username:d,avatar:p};try{const{saveUserData:V}=await $e(async()=>{const{saveUserData:W}=await Promise.resolve().then(()=>zt);return{saveUserData:W}},void 0);V({data:ee})}catch{}a(ee),r(ee),u(!1),N("Saved locally (network error).")}finally{x(!1)}};return o.jsx("div",{className:"profile-page",children:o.jsxs("div",{className:"profile-card fade-in-bounce",children:[o.jsx("div",{className:"profile-avatar-bg",children:o.jsx("img",{src:l?p:n.avatar||"/images/fitbuddy_head.png",alt:"User Avatar",className:"avatar","data-testid":"profile-avatar"})}),l?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"avatar-select-row",children:k.map(F=>{const V=!C.includes(F)||Array.isArray(n.inventory)&&n.inventory.some(W=>W.image===F);return o.jsxs("button",{className:`avatar-select-btn${p===F?" selected":""}${V?"":" locked"}`,onClick:()=>{V?y(F):S("/shop")},type:"button","aria-label":V?"Choose avatar":"Locked avatar",children:[!V&&o.jsx("span",{className:"avatar-lock-emoji",children:""}),o.jsx("img",{src:F,alt:"avatar option",className:"avatar avatar-option"})]},F)})}),o.jsx("input",{className:"edit-username-input",value:d,onChange:F=>m(F.target.value),maxLength:20,placeholder:"Username"}),b&&o.jsx("div",{className:"edit-error",children:b}),o.jsxs("div",{className:"profile-actions-row",children:[o.jsx("button",{className:"btn edit-profile",onClick:L,disabled:g,children:g?"Saving...":"Save"}),o.jsx("button",{className:"btn view-achievements",onClick:$,disabled:g,children:"Cancel"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("h1",{className:"profile-username-gradient",children:n.username}),o.jsxs("div",{className:"profile-stats-row",children:[o.jsxs("div",{className:"profile-stat",children:[o.jsx("span",{className:"profile-stat-label",children:"Workouts"}),o.jsx("span",{className:"profile-stat-value",children:n?.workouts?.length??"-"})]}),o.jsxs("div",{className:"profile-stat",children:[o.jsx("span",{className:"profile-stat-label",children:"Streak"}),o.jsx("span",{className:"profile-stat-value streak",children:n?.streak??"-"})]}),o.jsxs("div",{className:"profile-stat",children:[o.jsx("span",{className:"profile-stat-label",children:"Energy"}),o.jsx("span",{className:"profile-stat-value points",children:n?.energy??0})]})]}),o.jsxs("div",{className:"profile-actions-row",children:[o.jsx("button",{className:"btn edit-profile",onClick:q,children:"Edit Profile"}),o.jsx("button",{className:"btn view-achievements",children:"View Achievements"}),o.jsx(Lx,{})]})]})]})})},Ux=()=>{const i=Ir(),[r,n]=j.useState(""),[a,l]=j.useState(""),[u,d]=j.useState(""),[m,p]=j.useState(!1),[y,g]=j.useState(!1),[x,b]=j.useState(""),N=async S=>{S.preventDefault(),p(!0),d("");const C=String(r).trim().toLowerCase();try{const k=await Ix(C,a),q=k?{user:k,token:null}:null;if(q&&q.user){const $={data:q.user,token:q.token||null};try{jr($,{skipBackup:!0,forceSave:!0})}catch{}await(async(F=2e3)=>{const ee=Date.now();for(;Date.now()-ee<F;){try{const{getAuthToken:V,loadUserData:W}=await $e(async()=>{const{getAuthToken:fe,loadUserData:pe}=await Promise.resolve().then(()=>zt);return{getAuthToken:fe,loadUserData:pe}},void 0),te=V()||W()?.token||W()?.data?.token||null;if(te)return te}catch{}await new Promise(V=>setTimeout(V,150))}return null})(3e3);try{sessionStorage.setItem("fitbuddyUsername",q.user.username)}catch{}try{await rs(q.user.id)}catch(F){console.warn("Failed to restore user data from server:",F)}try{window.dispatchEvent(new Event("fitbuddy-login"))}catch{}try{const F="/api/userdata/load";console.log("[SignInPage] POSTing to userdata save endpoint to retrieve stored payload",F);const ee=await $e(()=>Promise.resolve().then(()=>On),void 0).then(pe=>pe.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:q.user.id})})),V=async(pe,K,oe=3,ne=500)=>{let G=null,ce=null;for(let he=1;he<=oe;he++)try{const B=await fetch(pe,K),z=await B.text();if(G=B,ce=z,B.ok)return{res:B,text:z};if(he<oe&&(B.status===401||B.status===403||B.status>=500&&B.status<600)){console.warn(`[SignInPage] userdata POST attempt ${he} failed status ${B.status}. Retrying after ${ne}ms`),await new Promise(ae=>setTimeout(ae,ne));continue}return{res:B,text:z}}catch(B){if(G=null,ce=null,he<oe){console.warn(`[SignInPage] userdata POST attempt ${he} threw, retrying after ${ne}ms`,B),await new Promise(z=>setTimeout(z,ne));continue}throw B}return{res:G,text:ce}},{res:W,text:te}=await V(F,ee,3,500);if(!W)throw new Error("Failed to receive a response from userdata endpoint");console.log("[SignInPage] userdata POST response status:",W.status,"ok:",W.ok),te&&te.length&&console.log("[SignInPage] userdata POST response snippet:",te.slice(0,500));const fe=W.headers.get("x-userdata-source");if(fe&&console.log("[SignInPage] userdata source header:",fe),W.ok){let pe=null;try{pe=te?JSON.parse(te):null}catch(oe){console.warn("[SignInPage] userdata POST returned invalid JSON; invoking restoreUserDataFromServer fallback",oe);try{await rs(q.user.id)}catch(ne){console.warn("[SignInPage] fallback restore failed:",ne)}}const K=pe?.stored??pe?.payload??pe;if(K)try{const oe=K.fitbuddy_assessment_data,ne=K.fitbuddy_workout_plan,G=oe?.data??oe??null,ce=ne?.data??ne??null;G&&fu(G),ce&&En(ce)}catch(oe){console.warn("Failed to save restored payload values:",oe)}}else{console.warn("[SignInPage] userdata POST returned non-ok status");try{await rs(q.user.id)}catch(pe){console.warn("[SignInPage] fallback restore failed:",pe)}}}catch(F){console.warn("Failed to fetch userdata payload via POST:",F)}i("/profile")}else throw new Error("Invalid server response.")}catch(k){if(k&&(k.code==="ERR_EMAIL_UNCONFIRMED"||/Email not confirmed/i.test(k.message||""))){d("Your email address is not confirmed. Please check your inbox for the confirmation link."),b(C),g(!0);return}d(k.message)}finally{p(!1)}};return o.jsxs("div",{className:"signin-page",children:[o.jsxs("form",{className:"signin-form",onSubmit:N,children:[o.jsx("h1",{children:"Sign In"}),o.jsxs("label",{children:["Email",o.jsx("input",{type:"email",value:r,onChange:S=>n(S.target.value),required:!0,autoComplete:"username"})]}),o.jsxs("label",{children:["Password",o.jsx("input",{type:"password",value:a,onChange:S=>l(S.target.value),required:!0,autoComplete:"current-password"})]}),u&&o.jsx("div",{className:"error",children:u}),o.jsx("button",{className:"btn",type:"submit",disabled:m,children:m?"Signing in...":"Sign In"}),o.jsxs("div",{className:"signup-link",children:["Don't have an account? ",o.jsx("span",{onClick:()=>i("/signup"),children:"Sign Up"})]})]}),y&&o.jsx(Fx,{email:x,onClose:()=>g(!1),onSent:()=>{g(!1),i("/verify-email?email="+encodeURIComponent(x))}})]})};function Fx({email:i,onClose:r,onSent:n}){const[a,l]=j.useState(!1),[u,d]=j.useState(""),m=async()=>{l(!0),d("");try{const p=`${"https://hkvkomtaffybchjdjfws.supabase.co".replace(/\/$/,"")}/auth/v1/recover`;(await fetch(p,{method:"POST",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhrdmtvbXRhZmZ5YmNoamRqZndzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY4MTc3ODQsImV4cCI6MjA3MjM5Mzc4NH0.A0Eaqx1g8ADX0uiUL8eDw-2h6RF50csP-KKCTtVdhCE"||"","Content-Type":"application/json"},body:JSON.stringify({email:i})})).ok?(d("Verification email resent  check your inbox (and spam)."),n()):d("Failed to resend verification email. Please contact support.")}catch{d("Failed to resend verification email. Please contact support.")}l(!1)};return o.jsx("div",{className:"hc-modal-backdrop",role:"dialog","aria-modal":"true",children:o.jsxs("div",{className:"hc-modal",children:[o.jsxs("header",{className:"hc-modal-header",children:[o.jsx("h3",{children:"Resend confirmation"}),o.jsx("button",{className:"btn",onClick:r,children:"Close"})]}),o.jsxs("div",{className:"hc-modal-body",children:[o.jsxs("p",{children:["We can resend the verification email to ",o.jsx("strong",{children:i}),". Would you like to resend it now?"]}),u&&o.jsx("div",{className:"info",children:u}),o.jsxs("div",{className:"hc-modal-actions",children:[o.jsx("button",{className:"btn",onClick:r,disabled:a,children:"Cancel"}),o.jsx("button",{className:"btn btn-primary",onClick:m,disabled:a,children:a?"Sending...":"Resend"})]})]})]})})}const Bx=()=>{const i=Ir(),[r,n]=j.useState(""),[a,l]=j.useState(""),[u,d]=j.useState(""),[m,p]=j.useState(""),[y,g]=j.useState(""),[x,b]=j.useState(!1),N=async S=>{if(S.preventDefault(),g(""),u!==m){g("Passwords do not match");return}b(!0);try{const C=String(r).trim().toLowerCase();if(!0&&ut){const q=await ut.auth.signUp({email:C,password:u,options:{data:{username:a,energy:100}}});if(q.error)throw new Error(q.error.message||"Sign up failed");const $=q.data?.session?.access_token??null,L=q.data?.user??null;if(L){const F={data:{id:L.id,email:L.email,username:L.user_metadata&&L.user_metadata.username||a,energy:L.user_metadata&&L.user_metadata.energy||100},token:$};try{sessionStorage.removeItem("fitbuddy_no_auto_restore")}catch{}try{localStorage.removeItem("fitbuddy_no_auto_restore")}catch{}try{jr(F,{skipBackup:!0,forceSave:!0})}catch{}}i($?"/profile":`/verify-email?email=${encodeURIComponent(C)}`)}else await Rx(C,a,u),i("/signin")}catch(C){g(C.message)}finally{b(!1)}};return o.jsx("div",{className:"signup-page",children:o.jsxs("form",{className:"signup-form",onSubmit:N,children:[o.jsx("h1",{children:"Sign Up"}),o.jsxs("label",{children:["Email",o.jsx("input",{type:"email",value:r,onChange:S=>n(S.target.value),required:!0})]}),o.jsxs("label",{children:["Username",o.jsx("input",{type:"text",value:a,onChange:S=>l(S.target.value),required:!0})]}),o.jsxs("label",{children:["Password",o.jsx("input",{type:"password",value:u,onChange:S=>d(S.target.value),required:!0,autoComplete:"new-password"})]}),o.jsxs("label",{children:["Confirm Password",o.jsx("input",{type:"password",value:m,onChange:S=>p(S.target.value),required:!0,autoComplete:"new-password"})]}),y&&o.jsx("div",{className:"error",children:y}),o.jsx("button",{className:"btn",type:"submit",disabled:x,children:x?"Signing up...":"Sign Up"}),o.jsxs("div",{className:"signin-link",children:["Already have an account? ",o.jsx("span",{onClick:()=>i("/signin"),children:"Sign In"})]})]})})};function Wx(i){try{const r="analytics_verify_page_views",n=localStorage.getItem(r),a=n&&Number(n)||0;localStorage.setItem(r,String(a+1))}catch{}}function $x(){return new URLSearchParams(as().search)}const zx=()=>{const i=Ir(),n=$x().get("email")||"",[a,l]=j.useState(!1),[u,d]=j.useState("");return j.useEffect(()=>{Wx({email:n})},[n]),o.jsx("div",{className:"email-verify-page",children:o.jsxs("div",{className:"verify-card",children:[o.jsx("h1",{children:"Confirm your email"}),o.jsxs("p",{children:["We sent a confirmation link to ",o.jsx("strong",{children:n||"your email address"}),". Please check your inbox and click the link to finish signing up."]}),o.jsx("p",{children:"If you don't see the email, check your spam/junk folder."}),o.jsx("p",{children:"After clicking the link you'll be signed in automatically."}),o.jsxs("div",{className:"verify-actions",children:[o.jsx("button",{className:"btn",onClick:()=>i("/signin"),children:"Back to Sign In"}),o.jsx("button",{className:"btn",disabled:a,onClick:async()=>{l(!0),d("");try{const m="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhrdmtvbXRhZmZ5YmNoamRqZndzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY4MTc3ODQsImV4cCI6MjA3MjM5Mzc4NH0.A0Eaqx1g8ADX0uiUL8eDw-2h6RF50csP-KKCTtVdhCE",p=`${"https://hkvkomtaffybchjdjfws.supabase.co".replace(/\/$/,"")}/auth/v1/recover`,y=JSON.stringify({email:n});if((await fetch(p,{method:"POST",headers:{apikey:m||"","Content-Type":"application/json"},body:y})).ok)d("Verification email resent  check your inbox (and spam).");else try{await ut.auth.resetPasswordForEmail(n),d("Verification email resent  check your inbox (and spam).")}catch{d("Failed to resend verification email. Contact support.")}}catch{d("Failed to resend verification email. Contact support.")}l(!1)},children:"Resend confirmation"})]}),u&&o.jsx("div",{className:"info",children:u})]})})},bu=()=>o.jsx("div",{className:"notfound-container",children:o.jsxs("div",{className:"notfound-content fade-in-bounce",children:[o.jsx("div",{className:"notfound-icon-bg",children:o.jsx(kt,{size:48,color:"#fff"})}),o.jsx("h1",{className:"notfound-title",children:"404"}),o.jsx("h2",{className:"notfound-message",children:"Page Not Found"}),o.jsx("p",{className:"notfound-desc",children:"Oops! The page you are looking for does not exist."}),o.jsx("a",{className:"notfound-home-btn",href:"/?intro=0",children:"Go Home"})]})}),qx=[{id:"avatar1",name:"Bot Buddy",image:"https://api.dicebear.com/7.x/bottts/svg?seed=FitBuddy1",price:100,type:"avatar",description:"A friendly robot avatar."},{id:"avatar2",name:"Dragon Head",image:"https://api.dicebear.com/7.x/bottts/svg?seed=DragonHead",price:200,type:"avatar",description:"Unleash your inner dragon!"},{id:"avatar3",name:"Duolingo Owl",image:"https://api.dicebear.com/7.x/bottts/svg?seed=Duolingo",price:250,type:"avatar",description:"Inspired by the language learning legend."},{id:"avatar4",name:"Neo Cat",image:"https://api.dicebear.com/7.x/croodles/svg?seed=NeoCat",price:120,type:"avatar",description:"A sleek cyber cat."},{id:"avatar5",name:"Mountain Goat",image:"https://api.dicebear.com/7.x/bottts/svg?seed=Goat",price:140,type:"avatar",description:"Sturdy and sure-footed."},{id:"avatar6",name:"Galaxy Fox",image:"https://api.dicebear.com/7.x/bottts/svg?seed=GalaxyFox",price:220,type:"avatar",description:"Out-of-this-world style."},{id:"avatar7",name:"Pixel Pup",image:"https://api.dicebear.com/7.x/bottts/svg?seed=PixelPup",price:80,type:"avatar",description:"Cute pixel-styled puppy."},{id:"avatar8",name:"Samurai",image:"https://api.dicebear.com/7.x/bottts/svg?seed=Samurai",price:300,type:"avatar",description:"Honor and style."},{id:"avatar9",name:"Astronaut",image:"https://api.dicebear.com/7.x/bottts/svg?seed=Astronaut",price:260,type:"avatar",description:"Reach for the stars."},{id:"avatar10",name:"Vintage Robot",image:"https://api.dicebear.com/7.x/bottts/svg?seed=VintageBot",price:110,type:"avatar",description:"Retro charm."},{id:"avatar11",name:"Neon Ninja",image:"https://api.dicebear.com/7.x/bottts/svg?seed=NeonNinja",price:210,type:"avatar",description:"Stealthy and bright."},{id:"avatar12",name:"Forest Sprite",image:"https://api.dicebear.com/7.x/bottts/svg?seed=ForestSprite",price:130,type:"avatar",description:"Whimsical woodland friend."}],Hx=[{id:"spinpfp",name:"Spinning Profile Picture",icon:o.jsx(Gi,{size:32,color:"#1e90cb"}),price:300,type:"powerup",description:"Make your profile picture spin for 7 days!"},{id:"sparkle",name:"Sparkle Effect",icon:o.jsx(Jr,{size:32,color:"#ffb347"}),price:150,type:"powerup",description:"Add a sparkle effect to your avatar."},{id:"smile",name:"Smile Badge",icon:o.jsx(So,{size:32,color:"#1ecb7b"}),price:80,type:"powerup",description:"Show off your positivity!"},{id:"glow",name:"Glow Outline",icon:o.jsx(Jr,{size:32,color:"#1ecb7b"}),price:140,type:"powerup",description:"Add a soft glow behind your avatar."},{id:"confetti",name:"Confetti Burst",icon:o.jsx(Jr,{size:32,color:"#ffb347"}),price:220,type:"powerup",description:"Celebrate finishes with confetti."},{id:"badge-pro",name:"Pro Badge",icon:o.jsx(So,{size:32,color:"#1ecb7b"}),price:190,type:"powerup",description:"Show you are a FitBuddy Pro."},{id:"trail",name:"Movement Trail",icon:o.jsx(Gi,{size:32,color:"#1e90cb"}),price:170,type:"powerup",description:"Leave a subtle trail when you move."},{id:"animated-frames",name:"Animated Frames",icon:o.jsx(Jr,{size:32,color:"#ffb347"}),price:250,type:"powerup",description:"Frame your avatar with animated borders."},{id:"voice-chime",name:"Voice Chime",icon:o.jsx(So,{size:32,color:"#1ecb7b"}),price:120,type:"powerup",description:"Play a chime when you start workouts."},{id:"seasonal-halo",name:"Seasonal Halo",icon:o.jsx(Jr,{size:32,color:"#1ecb7b"}),price:160,type:"powerup",description:"A seasonal halo that changes with events."},{id:"vfx",name:"VFX Pack",icon:o.jsx(Jr,{size:32,color:"#ffb347"}),price:320,type:"powerup",description:"A bundle of effects for your avatar."},{id:"status-glow",name:"Status Glow",icon:o.jsx(Gi,{size:32,color:"#1e90cb"}),price:90,type:"powerup",description:"Show a small glow if you are active."}],Vx=({user:i,onPurchase:r})=>{const[n,a]=j.useState("avatars"),[l,u]=j.useState(null),[d,m]=j.useState(""),[p,y]=j.useState("popular"),[g,x]=j.useState(null),b=j.useRef(null),N=j.useRef(null),S=j.useRef(null),C=j.useRef(void 0),[k,q]=j.useState(!1);j.useEffect(()=>{if(!i?.id)return;const W=async()=>{await Io(i.id)&&window.dispatchEvent(new Event("storage"))};return b.current=setInterval(W,7e3),()=>{b.current&&clearInterval(b.current)}},[i?.id]),j.useEffect(()=>{const W=N.current,te=S.current;if(!W||!te)return;const fe=W.querySelector(`button[data-tab="${n}"]`);if(!fe)return;const pe=fe.getBoundingClientRect(),K=W.getBoundingClientRect(),oe=pe.left-K.left+W.scrollLeft;te.style.width=`${pe.width}px`,te.style.transform=`translateX(${oe}px)`},[n]),j.useEffect(()=>{const W=N.current;if(!W)return;const te=fe=>{if(!(fe.key==="ArrowLeft"||fe.key==="ArrowRight"))return;fe.preventDefault();const pe=["avatars","powerups"],K=pe.indexOf(n);let oe=K;fe.key==="ArrowLeft"&&(oe=Math.max(0,K-1)),fe.key==="ArrowRight"&&(oe=Math.min(pe.length-1,K+1)),pe[oe]&&pe[oe]!==n&&a(pe[oe])};return W.addEventListener("keydown",te),()=>W.removeEventListener("keydown",te)},[n]),j.useEffect(()=>{const W=C.current??i?.energy??0,te=i?.energy??0;if(te>W){q(!0);const fe=setTimeout(()=>q(!1),900);return()=>clearTimeout(fe)}C.current=te},[i?.energy]);const $=Math.min(100,Math.round((i?.energy||0)/(i?.maxEnergy||500)*100)),F=`fill--${Math.round($/5)*5}`,ee=async W=>{if(i.energy<W.price){alert("Not enough energy!");return}u(W.id);const te=await Ax(i.id,W);u(null),te?(r(W),window.dispatchEvent(new Event("storage"))):alert("Purchase failed.")},V=W=>{const te=d.trim().toLowerCase();let fe=W.filter(pe=>!te||pe.name.toLowerCase().includes(te)||(pe.description||"").toLowerCase().includes(te));return p==="price-asc"&&(fe=fe.sort((pe,K)=>pe.price-K.price)),p==="price-desc"&&(fe=fe.sort((pe,K)=>K.price-pe.price)),fe};return o.jsxs("div",{className:"shop-page fade-in-bounce",children:[o.jsxs("header",{className:"shop-header",children:[o.jsx(kt,{size:32,className:"shop-logo"}),o.jsx("h1",{className:"shop-title gradient-text",children:"FitBuddy Shop"}),o.jsx("div",{className:"shop-energy",children:o.jsxs("div",{className:`energy-pill ${k?"pulse":""}`,"aria-live":"polite",children:[o.jsxs("span",{className:"energy-value",children:[" ",i.energy]}),o.jsx("div",{className:"energy-meter","aria-hidden":!0,children:o.jsx("div",{className:`fill ${F}`})})]})})]}),o.jsxs("div",{className:"shop-topbar",children:[o.jsxs("div",{className:"shop-tabs",ref:N,role:"tablist","aria-label":"Shop categories",children:[o.jsx("div",{className:"tab-indicator",ref:S,"aria-hidden":"true"}),o.jsx("button",{"data-tab":"avatars",role:"tab","aria-pressed":n==="avatars",className:n==="avatars"?"active":"",onClick:()=>a("avatars"),children:"Avatars"}),o.jsx("button",{"data-tab":"powerups",role:"tab","aria-pressed":n==="powerups",className:n==="powerups"?"active":"",onClick:()=>a("powerups"),children:"Powerups"})]}),o.jsxs("div",{className:"shop-controls",children:[o.jsxs("div",{className:"search-wrap",role:"search",children:[o.jsx(Wy,{size:18,className:"icon-muted"}),o.jsx("input",{"aria-label":"Search shop items",placeholder:"Search items",value:d,onChange:W=>m(W.target.value)})]}),o.jsxs("div",{className:"sort-wrap",children:[o.jsx(My,{size:16,className:"icon-muted"}),o.jsxs("select",{"aria-label":"Sort items",value:p,onChange:W=>y(W.target.value),children:[o.jsx("option",{value:"popular",children:"Recommended"}),o.jsx("option",{value:"price-asc",children:"Price: Low to High"}),o.jsx("option",{value:"price-desc",children:"Price: High to Low"})]})]})]})]}),o.jsxs("div",{className:"shop-featured",children:[o.jsxs("div",{className:"featured-left",children:[o.jsx(kt,{size:28}),o.jsxs("div",{children:[o.jsx("div",{className:"featured-title",children:"Limited-time: Double Energy Sundays"}),o.jsx("div",{className:"featured-desc",children:"Buy selected powerups and receive double energy back for your first workout."})]})]}),o.jsx("button",{className:"featured-cta",children:"Learn More"})]}),o.jsxs("div",{className:"shop-items-grid",children:[n==="avatars"&&V(qx).map(W=>{const te=Array.isArray(i.inventory)&&i.inventory.some(fe=>fe.id===W.id);return o.jsxs("div",{className:"shop-card",onClick:()=>x(W),children:[o.jsx("div",{className:"shop-card-top",children:o.jsx("img",{src:W.image,alt:W.name,className:"shop-avatar-img"})}),o.jsxs("div",{className:"shop-card-body",children:[o.jsxs("h2",{className:"shop-item-title",children:[W.name," ",te&&o.jsx("span",{className:"owned-badge",children:"Owned"})]}),o.jsx("p",{className:"shop-item-desc",children:W.description}),o.jsxs("div",{className:"shop-card-footer",children:[o.jsxs("span",{className:"price-badge",children:[" ",W.price]}),o.jsx("button",{className:"shop-buy-btn",disabled:te||i.energy<W.price||l===W.id,onClick:fe=>{fe.stopPropagation(),ee(W)},children:te?"Owned":l===W.id?"Buying...":o.jsxs(o.Fragment,{children:[o.jsx(hf,{size:16})," Buy"]})})]})]})]},W.id)}),n==="powerups"&&V(Hx).map(W=>o.jsxs("div",{className:"shop-card",onClick:()=>x(W),children:[o.jsx("div",{className:"shop-card-top",children:o.jsx("div",{className:"shop-powerup-icon",children:W.icon})}),o.jsxs("div",{className:"shop-card-body",children:[o.jsx("h2",{className:"shop-item-title",children:W.name}),o.jsx("p",{className:"shop-item-desc",children:W.description}),o.jsxs("div",{className:"shop-card-footer",children:[o.jsxs("span",{className:"price-badge",children:[" ",W.price]}),o.jsx("button",{className:"shop-buy-btn",disabled:i.energy<W.price||l===W.id,onClick:te=>{te.stopPropagation(),ee(W)},children:l===W.id?"Buying...":o.jsxs(o.Fragment,{children:[o.jsx(hf,{size:16})," Buy"]})})]})]})]},W.id))]}),g&&o.jsx("div",{className:"shop-preview",onClick:()=>x(null),children:o.jsxs("div",{className:"preview-card",onClick:W=>W.stopPropagation(),children:[o.jsx("button",{className:"preview-close",onClick:()=>x(null),children:""}),o.jsxs("div",{className:"preview-body",children:[o.jsxs("div",{className:"preview-demo",children:[g.type==="avatar"&&g.image&&o.jsx("img",{src:g.image,alt:g.name,className:"preview-img"}),g.type==="powerup"&&o.jsxs("div",{className:"powerup-demo",children:[g.id==="spinpfp"&&o.jsx("div",{className:"preview-demo-box spin-anim",children:""}),g.id==="sparkle"&&o.jsxs("div",{className:"preview-demo-box dots-anim",children:[o.jsx("span",{}),o.jsx("span",{}),o.jsx("span",{})]}),g.id==="confetti"&&o.jsx("div",{className:"preview-demo-box confetti-anim",children:""}),g.id==="glow"&&o.jsx("div",{className:"preview-demo-box glow-anim",children:""}),g.id==="trail"&&o.jsx("div",{className:"preview-demo-box trail-anim",children:""}),g.id==="animated-frames"&&o.jsx("div",{className:"preview-demo-box frames-anim",children:""}),g.id==="voice-chime"&&o.jsx("div",{className:"preview-demo-box chime-anim",children:""}),g.id==="vfx"&&o.jsx("div",{className:"preview-demo-box vfx-anim",children:""}),g.id==="status-glow"&&o.jsx("div",{className:"preview-demo-box statusglow-anim",children:""}),!["spinpfp","sparkle","confetti","glow","trail","animated-frames","voice-chime","vfx","status-glow"].includes(g.id)&&o.jsx("div",{className:"preview-demo-box",children:"Preview"})]})]}),o.jsx("h3",{children:g.name}),o.jsx("p",{children:g.description}),o.jsxs("div",{className:"preview-actions",children:[o.jsxs("span",{className:"price-badge",children:[" ",g.price]}),o.jsxs("div",{className:"preview-actions-row",children:[o.jsx("button",{className:"shop-buy-btn",onClick:()=>{ee(g),x(null)},children:"Buy"}),o.jsx("button",{className:"shop-buy-btn",onClick:()=>{window.dispatchEvent(new CustomEvent("shop-try-on",{detail:{preview:g}}))},children:"Try On"})]})]})]})]})})]})},Gx=({userData:i})=>{const[r,n]=j.useState([{role:"assistant",text:"Hi! I am Buddy  your AI Fitness assistant. I can answer questions about your workouts, goals, and progress."}]),[a,l]=j.useState(""),[u,d]=j.useState(!1),m=j.useRef(null),p=j.useRef(!1);j.useEffect(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[r,u]),j.useEffect(()=>{(()=>{try{const k=i?.id||"anon",q=sessionStorage.getItem(`fitbuddy_chat_${k}`)||localStorage.getItem(`fitbuddy_chat_${k}`);if(!q)return;const $=JSON.parse(q);Array.isArray($)&&$.length&&n($)}catch{}})(),(async()=>{try{p.current=!0;const k=i?.id;if(!k)return;await(await $e(()=>Promise.resolve().then(()=>Ys),void 0)).restoreUserDataFromServer(String(k));const $=sessionStorage.getItem(`fitbuddy_chat_${k}`)||localStorage.getItem(`fitbuddy_chat_${k}`);if(p.current=!1,!$)return;const L=JSON.parse($);Array.isArray(L)&&L.length&&n(L)}catch{p.current=!1}})()},[i?.id]),j.useEffect(()=>{const S=async()=>{try{p.current=!0;const k=i?.id;if(!k)return;await(await $e(()=>Promise.resolve().then(()=>Ys),void 0)).restoreUserDataFromServer(String(k));const $=sessionStorage.getItem(`fitbuddy_chat_${k}`)||localStorage.getItem(`fitbuddy_chat_${k}`);if(p.current=!1,!$)return;const L=JSON.parse($);Array.isArray(L)&&L.length&&n(L)}catch{p.current=!1}};window.addEventListener("fitbuddy-login",S);const C=async()=>{try{p.current=!0;const k=i?.id;if(!k)return;await(await $e(()=>Promise.resolve().then(()=>Ys),void 0)).restoreUserDataFromServer(String(k));const $=localStorage.getItem(`fitbuddy_chat_${k}`);if(p.current=!1,!$)return;const L=JSON.parse($);Array.isArray(L)&&L.length&&n(L)}catch{}};return window.addEventListener("fitbuddy-open-chat",C),()=>window.removeEventListener("fitbuddy-login",S)},[i?.id]),j.useEffect(()=>{const S=C=>{try{if(!C.key)return;const q=`fitbuddy_chat_${i?.id||"anon"}`;if(C.key===q){if(!C.newValue){n([{role:"assistant",text:"Hi! I am Buddy  your AI Fitness assistant. I can answer questions about your workouts, goals, and progress."}]);return}try{const $=JSON.parse(C.newValue);Array.isArray($)&&n($)}catch{}}}catch{}};return window.addEventListener("storage",S),()=>window.removeEventListener("storage",S)},[i?.id]),j.useEffect(()=>{let S=null;try{S=setTimeout(()=>{try{if(p.current)return;const C=i?.id||"anon";if(r.length===1&&r[0].role==="assistant"&&r[0].text==="Hi! I am Buddy  your AI Fitness assistant. I can answer questions about your workouts, goals, and progress.")return;try{sessionStorage.setItem(`fitbuddy_chat_${C}`,JSON.stringify(r))}catch{localStorage.setItem(`fitbuddy_chat_${C}`,JSON.stringify(r))}}catch{}},400)}catch{}return()=>{S&&clearTimeout(S)}},[r,i?.id]),j.useEffect(()=>{const S=()=>{try{const C=i?.id||"anon";try{sessionStorage.removeItem(`fitbuddy_chat_${C}`)}catch{}try{localStorage.removeItem(`fitbuddy_chat_${C}`)}catch{}n([{role:"assistant",text:"Hi! I am Buddy  your AI fitness assistant. I can answer questions about your workouts, goals, and progress."}])}catch{}};return window.addEventListener("fitbuddy-logout",S),()=>window.removeEventListener("fitbuddy-logout",S)},[i?.id]),j.useEffect(()=>{let S;return(()=>{const k=i?.id;if((S===void 0||S==="anon")&&k&&k!=="anon")try{const q=localStorage.getItem("fitbuddy_chat_anon");if(q)try{localStorage.setItem(`fitbuddy_chat_${k}`,q)}catch{}localStorage.removeItem("fitbuddy_chat_anon")}catch{}S=k??"anon"})(),()=>{}},[i?.id]);const y=S=>{if(!S)return"No user data available.";try{const C={id:S.id,username:S.username,age:S.age,goals:S.goals||S.preferences||[],fitnessLevel:S.fitnessLevel||S.fitness_level||"unknown",energy:S.energy??null,streak:S.streak??null};return JSON.stringify(C)}catch{return"User data present but could not be summarized."}},g=S=>{if(!S)return S;let C=String(S);try{for(C=C.replace(/```json[\s\S]*?```/gi,""),C=C.replace(/```[\s\S]*?```/g,"");C.includes('"__action"');){const q=C.indexOf('"__action"');if(q===-1)break;const $=C.lastIndexOf("{",q);if($===-1)break;let L=0,F=-1;for(let ee=$;ee<C.length;ee++){const V=C[ee];if(V==="{")L++;else if(V==="}"&&(L--,L===0)){F=ee;break}}if(F!==-1)C=(C.slice(0,$)+C.slice(F+1)).trim();else break}return C=C.replace(/\{[^\}]*__action[^\}]*\}/g,""),C=C.replace(/\n{3,}/g,`

`),C.trim()}catch{return S}},x=async(S,C)=>{try{const k=(S.updates||[]).map(B=>{try{if(B.path==="workoutPlan"&&typeof B.value=="string")try{B.value=JSON.parse(B.value)}catch{}}catch{}return B}),q={...S,updates:k},{getAuthToken:$,loadUserData:L}=await $e(async()=>{const{getAuthToken:B,loadUserData:z}=await Promise.resolve().then(()=>zt);return{getAuthToken:B,loadUserData:z}},void 0),F=L()||null,ee=F?.id||F?.data?.id||i?.id;let V=$()||F?.token||F?.data?.token||i?.token||F?.jwt||F?.data?.jwt||F?.access_token||F?.data?.access_token;if(!ee||ee==="anon"){try{sessionStorage.setItem("fitbuddy_chat_anon",JSON.stringify(r))}catch{}const B=encodeURIComponent(window.location.pathname||"/chat");window.location.href=`/signin?returnTo=${B}`;return}const W={"Content-Type":"application/json"};V&&(W.Authorization=`Bearer ${V}`);const te=await fetch("/api/user/apply-action",{method:"POST",headers:W,body:JSON.stringify({id:ee,action:q})}),fe=await te.json();if(!te.ok)throw fe;const{user:pe}=fe,{saveUserData:K,saveWorkoutPlan:oe,appendChatMessage:ne}=await $e(async()=>{const{saveUserData:B,saveWorkoutPlan:z,appendChatMessage:ae}=await Promise.resolve().then(()=>zt);return{saveUserData:B,saveWorkoutPlan:z,appendChatMessage:ae}},void 0);try{pe&&pe.workoutPlan&&oe(pe.workoutPlan)}catch{}K(pe,{skipBackup:!1}),window.dispatchEvent(new Event("fitbuddy-login"));const G=C||fe.humanReply||fe.applied||"Buddy applied the changes.";n(B=>[...B,{role:"assistant",text:G}]);try{const B=i?.id||pe?.id;ne({role:"assistant",text:G,ts:Date.now()},{userId:B})}catch{}const ce=fe.applied||S.summary||"Applied changes";let he=ce;try{const B=String(ce).match(/^\s*Set\s+(\w+)\s+to\s+(.+)$/i);if(B){const z=B[1],ae=B[2];he=`${z.charAt(0).toUpperCase()+z.slice(1)} set to ${ae}`}else he=typeof ce=="string"?ce:JSON.stringify(ce)}catch{}n(B=>[...B,{role:"action",text:he}]);try{const B=i?.id||pe?.id;ne({role:"assistant",text:he,ts:Date.now()},{userId:B})}catch{}}catch(k){console.error("Failed to apply action on server:",k),n(q=>[...q,{role:"assistant",text:"Failed to apply changes on the server."}])}},b=async()=>{const S=a.trim();if(!S)return;const C={role:"user",text:S};n(V=>[...V,C]),l(""),d(!0);try{const{appendChatMessage:V}=await $e(async()=>{const{appendChatMessage:te}=await Promise.resolve().then(()=>zt);return{appendChatMessage:te}},void 0),W=i?.id;V({role:"user",text:S,ts:Date.now()},{userId:W})}catch{}const k=r.concat(C).map(V=>`${V.role==="user"?"User":"Assistant"}: ${V.text}`).join(`
`),q=i?.workoutPlan?`
User workoutPlan: ${JSON.stringify(i.workoutPlan).slice(0,800)}`:"",$=`You are FitBuddy's AI assistant named Buddy. Use the following user profile to personalize answers: ${y(i)}

Conversation:
${k}

Respond fully and directly to the user's last message. Keep answers actionable and concise.`,F=["","Examples (MUST follow the JSON format exactly, but feel free to chnage the data and values):","","1) Simple numeric set (set energy to 10)","Human reply:","I've increased your energy to help with today's workout.","","JSON block:","```json","{",'  "__action": true,','  "updates": [','    { "op": "set", "path": "energy", "value": 10 }',"  ],",'  "summary": "Set energy to 10"',"}","```","","2) Change username","Human reply:","I can update your display name now.","","JSON block:","```json","{",'  "__action": true,','  "updates": [','    { "op": "set", "path": "username", "value": "fit_william" }',"  ],",'  "summary": "Change username to fit_william"',"}","```","","3) Add an item to inventory (push)","Human reply:","I'll add the SuperBand to your inventory for resistance training.","","JSON block:","```json","{",'  "__action": true,','  "updates": [',"    {",'      "op": "push",','      "path": "inventory",','      "value": {','        "id": "superband-01",','        "name": "SuperBand",','        "type": "equipment",','        "acquiredAt": "2025-09-05"',"      }","    }","  ],",'  "summary": "Add SuperBand to inventory"',"}","```","","4) Replace the full workout plan (ONLY if user explicitly requests a full replacement)","Human reply:","You asked to replace your entire workout plan. I will prepare a complete plan object  please confirm before applying.","","JSON block (skeleton example):","```json","{",'  "__action": true,','  "updates": [',"    {",'      "op": "set",','      "path": "workoutPlan",','      "value": { "id": "<id>", "name": "<name>", "startDate": "<YYYY-MM-DD>", "endDate": "<YYYY-MM-DD>", "dailyWorkouts": [ /* day objects */ ] }',"    }","  ],",'  "summary": "Replace entire workoutPlan (user-requested full replacement)"',"}","```","","Instruction: DO NOT create or emit a full workoutPlan unless the user explicitly asks for a full replacement. Prefer patch-style single-day or small updates. If the user asks for a full plan, emit a compact skeleton like above and ask for confirmation before applying.","","5) Multiple updates in one action:","Human reply:","I'll apply the three updates you requested: raise energy, add equipment, and update your display name.","","JSON block:","```json","{",'  "__action": true,','  "updates": [','    { "op": "set", "path": "energy", "value": 8 },',"    {",'      "op": "push",','      "path": "inventory",','      "value": { "id": "resmat-02", "name": "Travel Mat", "type": "equipment", "acquiredAt": "2025-09-05" }',"    },",'    { "op": "set", "path": "username", "value": "will_fit" }',"  ],",'  "summary": "Set energy to 8, add Travel Mat to inventory, change username to will_fit"',"}","```","","6) When no changes are intended:","Human reply only (no JSON block):","No changes are needed  here's a suggestion: try adding a 10-minute mobility warmup before your workouts this week.","","(Must NOT include a JSON block in this case.)","","Short checklist to follow exactly:","- Always emit human reply first.",'- If proposing changes emit exactly one fenced JSON block with the object keys: "__action", "updates", "summary".','- Use "set" to replace values and "push" to append to arrays.','- For "workoutPlan" send the full new object as the value for a "set".',"- No additional text inside or around the fenced JSON block.","","NEW EXAMPLES (Modify single days)","","7) Modify a single day's workouts (preferred when only one day needs adjustment)","Human reply:","I'll update day 3's workouts to an active recovery set  keeping the rest of your plan intact.","","JSON block:","```json","{",'  "__action": true,','  "updates": [','    { "op": "set", "path": "workoutPlan/dailyWorkouts/2/workouts", "value": [ { "name": "Foam Rolling", "description": "Release muscle tension.", "difficulty": "beginner", "duration": "15 minutes", "reps": "1x15", "muscleGroups": ["full body"], "equipment": ["Foam roller"] } ] }',"  ],",'  "summary": "Set Day 3 to active recovery workouts"',"}","```","","8) Modify a single day's metadata (type or totalTime)","Human reply:","I'll change day 3's type to 'activeRecovery' and adjust totalTime to '30 minutes'.","","JSON block:","```json","{",'  "__action": true,','  "updates": [','    { "op": "set", "path": "workoutPlan/dailyWorkouts/2/type", "value": "activeRecovery" },','    { "op": "set", "path": "workoutPlan/dailyWorkouts/2/totalTime", "value": "30 minutes" }',"  ],",'  "summary": "Update Day 3 type and totalTime"',"}","```","","9) Recommended example day (use as template for modifications)","Human reply:","Here's a recommended example day  when updating a day, keep the same object shape:","","Example day JSON:","```json","{",'    "date": "2025-09-10",','    "type": "Full Body",','    "completed": false,','    "totalTime": "30 minutes",','    "workouts": [',"        {",'            "name": "Lunges",','            "description": "",','            "difficulty": "beginner",','            "duration": "10 minutes",','            "reps": "3x10 each leg",','            "muscleGroups": ["quads","glutes","hamstrings"],','            "equipment": []',"        },","        {",'            "name": "Plank",','            "description": "",','            "difficulty": "beginner",','            "duration": "10 minutes",','            "reps": "3x30 seconds",','            "muscleGroups": ["core"],','            "equipment": []',"        },","        {",'            "name": "Overhead Press (Dumbbell)",','            "description": "",','            "difficulty": "beginner",','            "duration": "10 minutes",','            "reps": "3x10",','            "muscleGroups": ["shoulders"],','            "equipment": ["dumbbell"]',"        }","    ],",'    "alternativeWorkouts": []',"}","```","","Instruction: When modifying days, prefer the patch-style single-day updates above rather than replacing the whole `workoutPlan` unless the user explicitly asks for a full replacement."].join(`
`),ee=$+q+'\n\nWhen you propose changes to the user\'s profile or workout plan, produce both: (1) a human-readable reply, and (2) a JSON action block fenced as ```json containing {"__action":true, "updates":[...], "summary":"..."}. Only include the JSON block when you intend the site to apply changes. Close the JSON block with ```.'+F;try{const V=localStorage.getItem("fitbuddy_questionnaire_progress"),W=localStorage.getItem("fitbuddy_user_data"),te=localStorage.getItem("fitbuddy_workout_plan");let fe=null,pe=null,K=null;try{fe=V?JSON.parse(V):null}catch{fe=V}try{pe=W?JSON.parse(W):null}catch{pe=W}try{K=te?JSON.parse(te):null}catch{K=te}const oe=await Qy({prompt:ee,localStorageContext:{questionnaire:fe,userData:pe,workoutPlan:K}});let ne=oe.text||"",G=null;try{let he=null;const B=ne.match(/```json([\s\S]*?)```/i);if(B&&B[1])he=B[1].trim();else{const z=ne.match(/```([\s\S]*?)```/i);z&&z[1]&&(he=z[1].trim())}if(!he){const z=Array.from(ne.match(/\{[\s\S]*?\}/g)||[]);if(z.length)he=z[z.length-1];else if(oe.raw){const ae=Array.from(String(oe.raw).match(/\{[\s\S]*?\}/g)||[]);ae.length&&(he=ae[ae.length-1])}}if(he){const z=he.replace(/^```json\s*/i,"").replace(/\s*```$/,"");G=JSON.parse(z),ne=ne.replace(he,"").replace(/```json[\s\S]*?```/i,"").trim()}else try{const ae=ne.indexOf('"__action"');if(ae!==-1){const E=ne.lastIndexOf("{",ae);if(E!==-1){let w=0,O=-1;for(let J=E;J<ne.length;J++){const Z=ne[J];if(Z==="{")w++;else if(Z==="}"&&(w--,w===0)){O=J;break}}if(O!==-1){const J=ne.slice(E,O+1);try{G=JSON.parse(J),ne=(ne.slice(0,E)+ne.slice(O+1)).trim()}catch{}}}}}catch{}}catch{G=null}const ce=g(ne);if(G&&G.__action&&Array.isArray(G.updates))await x(G,ce);else{n(he=>[...he,{role:"assistant",text:ce}]);try{const{appendChatMessage:he}=await $e(async()=>{const{appendChatMessage:z}=await Promise.resolve().then(()=>zt);return{appendChatMessage:z}},void 0),B=i?.id;he({role:"assistant",text:ce,ts:Date.now()},{userId:B})}catch{}}}catch(V){console.error("Gemini chat error",V),n(W=>[...W,{role:"assistant",text:"Buddy is currently unavailable. Please try again later."}])}finally{d(!1)}},N=S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),b())};return o.jsx("div",{className:"gemini-page-root",children:o.jsx("div",{className:"gemini-page",children:o.jsxs("div",{className:"gemini-container",children:[o.jsxs("header",{className:"gemini-header",children:[o.jsx("h1",{children:"Chat with Buddy"}),o.jsx("p",{className:"gemini-sub",children:"Ask Buddy about your workouts, plan, or goals  Buddy knows your profile."})]}),o.jsxs("div",{className:"gemini-chat",ref:m,role:"log","aria-live":"polite",children:[r.map((S,C)=>{const k=S.role==="assistant",q=S.role==="user",$=(k||q)&&typeof S.text=="string"&&S.text.indexOf(`
`)===-1,L=["msg",k?"msg-assistant":S.role==="user"?"msg-user":"msg-action"];return $&&L.push("single-line"),o.jsxs("div",{className:L.join(" "),children:[k&&o.jsx("div",{className:"logo","aria-hidden":"true",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#ffffff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-dumbbell",children:[o.jsx("path",{d:"m6.5 6.5 11 11"}),o.jsx("path",{d:"m21 21-1-1"}),o.jsx("path",{d:"m3 3 1 1"}),o.jsx("path",{d:"m18 22 4-4"}),o.jsx("path",{d:"m2 6 4-4"}),o.jsx("path",{d:"m3 10 7-7"}),o.jsx("path",{d:"m14 21 7-7"})]})}),S.role==="user"&&o.jsx("div",{className:"logo user-logo","aria-hidden":!0,children:i?.avatar||i?.avatarUrl?o.jsx("img",{src:i?.avatar||i?.avatarUrl,alt:i?.username||"User"}):o.jsx("span",{className:"initials",children:(i?.username||"U").toString().trim().substring(0,2).toUpperCase()})}),o.jsx("div",{className:"msg-text",children:S.text})]},C)}),u&&o.jsxs("div",{className:"msg msg-assistant loading",children:[o.jsx("div",{className:"logo","aria-hidden":"true",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#ffffff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-dumbbell",children:[o.jsx("path",{d:"m6.5 6.5 11 11"}),o.jsx("path",{d:"m21 21-1-1"}),o.jsx("path",{d:"m3 3 1 1"}),o.jsx("path",{d:"m18 22 4-4"}),o.jsx("path",{d:"m2 6 4-4"}),o.jsx("path",{d:"m3 10 7-7"}),o.jsx("path",{d:"m14 21 7-7"})]})}),o.jsx("div",{className:"msg-text",children:"Buddy is typing..."})]})]}),o.jsxs("div",{className:"gemini-input",children:[o.jsx("input",{value:a,onChange:S=>l(S.target.value),onKeyDown:N,placeholder:"Ask Buddy about your plan or goals...","aria-label":"Ask Gemini"}),o.jsx("button",{className:"send-btn",onClick:b,disabled:u||!a.trim(),"aria-label":"Send message",children:"Send"})]})]})})})},Jx=()=>{const[i,r]=j.useState(null);j.useEffect(()=>{try{const G=Ar(),ce=G?.email||G?.data?.email||G?.data?.email;if(["localhost","127.0.0.1"].includes(window.location.hostname)&&ce==="admin@local"){r(!0);return}const B=G?.role||G?.data?.role;if(B&&String(B).toLowerCase()==="admin"){r(!0);return}(async()=>{try{if(ut&&typeof ut.auth?.getSession=="function"){const ae=(await ut.auth.getSession())?.data?.session?.access_token??null;if(ae)try{const E=ae.split(".");if(E.length>=2){const w=JSON.parse(atob(E[1].replace(/-/g,"+").replace(/_/g,"/"))),O=w?.roles||w?.role||[];if(Array.isArray(O)&&O.includes("admin")){r(!0);return}if(String(O).toLowerCase()==="admin"){r(!0);return}}}catch{}}}catch{}try{const z=No();if(z)try{const ae=z.split(".");if(ae.length>=2){const E=JSON.parse(atob(ae[1].replace(/-/g,"+").replace(/_/g,"/"))),w=E?.roles||E?.role||[];if(Array.isArray(w)&&w.includes("admin")){r(!0);return}if(String(w).toLowerCase()==="admin"){r(!0);return}}}catch{}}catch{}r(!1)})()}catch{r(!1)}},[]);const[n,a]=j.useState([]),[l,u]=j.useState([]),[d,m]=j.useState(!1),[p,y]=j.useState(null),[g,x]=j.useState(!1),[b,N]=j.useState(!1),[S,C]=j.useState([]),[k,q]=j.useState(null),[$,L]=j.useState([]),[F,ee]=j.useState(""),V=async(G,ce)=>{const he=ce?{...ce}:{},B=he.headers?{...he.headers}:{};try{if(ut&&typeof ut.auth?.getSession=="function"){const ae=(await ut.auth.getSession())?.data?.session?.access_token??null;ae&&(B.Authorization=`Bearer ${ae}`)}}catch{}if(!B.Authorization)try{const z=No();z&&(B.Authorization=`Bearer ${z}`)}catch{}return he.headers=B,fetch(G,he)};j.useEffect(()=>{g&&i===!0&&(async()=>{m(!0);const{data:G,error:ce}=await ut.from("workout_plans").select("*").eq("deleted",!0);ce||C(G||[]),m(!1)})()},[g,i]),j.useEffect(()=>{b&&i===!0&&(async()=>{m(!0);const{data:G,error:ce}=await ut.from("banned_usernames").select("username");ce||L((G||[]).map(he=>he.username)),m(!1)})()},[b,i]),j.useEffect(()=>{if(i!==!0)return;(async()=>{m(!0),y(null);try{const ce=await V("/api/admin/users",{method:"GET"});if(!ce.ok){const ae=await ce.text();throw new Error(`Failed to load users: ${ce.status} ${ae}`)}const he=await ce.json();u(he?.users||[]);const{data:B,error:z}=await ut.from("audit_logs").select("*").order("timestamp",{ascending:!1});if(z)if(String(z.message).toLowerCase().includes("relation")||String(z.message).toLowerCase().includes("could not find"))y("Audit log table not found. Run the DB setup SQL (sql/setup_db.sql) to create required tables.");else throw z;a(B||[])}catch(ce){y(ce.message||"Error")}finally{m(!1)}})()},[i]);const W=async G=>{q(G),(await V("/api/admin/users?action=restore_plan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:G})})).ok?C(he=>he.filter(B=>B.id!==G)):y("Failed to restore"),q(null)},te=async()=>{if(!F.trim())return;m(!0),(await V("/api/admin/users?action=ban_username",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:F.trim()})})).ok?L(ce=>[...ce,F.trim()]):y("Failed to ban username"),ee(""),m(!1)},fe=async G=>{m(!0),(await V("/api/admin/users?action=unban_username",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:G})})).ok?L(he=>he.filter(B=>B!==G)):y("Failed to unban username"),m(!1)},pe=async G=>{m(!0),(await V("/api/admin/users?action=ban",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:G})})).ok?u(he=>he.map(B=>B.id===G?{...B,banned:!0}:B)):y("Failed to ban user"),m(!1)},K=async G=>{m(!0),(await V("/api/admin/users?action=unban",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:G})})).ok?u(he=>he.map(B=>B.id===G?{...B,banned:!1}:B)):y("Failed to unban user"),m(!1)},oe=async G=>{m(!0),(await V("/api/admin/users?action=delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:G})})).ok?u(he=>he.filter(B=>B.id!==G)):y("Failed to delete user"),m(!1)},ne=()=>{const G=new Blob([n.map(B=>JSON.stringify(B)).join(`
`)],{type:"application/json"}),ce=URL.createObjectURL(G),he=document.createElement("a");he.href=ce,he.download="ai_action_audit.log",he.click(),URL.revokeObjectURL(ce)};return i===!1?o.jsx(bu,{}):o.jsxs("div",{className:"admin-audit-root",children:[o.jsx("div",{className:"admin-hero",children:o.jsxs("div",{children:[o.jsx("div",{className:"title",children:"Admin Console"}),o.jsx("div",{className:"subtitle",children:"Manage users, audit logs and site-wide policies."})]})}),o.jsxs("div",{className:"admin-grid",children:[o.jsxs("div",{className:"admin-card",children:[o.jsx("div",{className:"admin-section-title",children:"Admin Powers"}),o.jsxs("div",{className:"admin-powers",children:[o.jsx("button",{className:"admin-power-btn",onClick:ne,disabled:n.length===0,children:"Download Audit Log"}),o.jsx("button",{className:"admin-power-btn",onClick:()=>x(!0),children:"Restore Workout Plans"}),o.jsx("button",{className:"admin-power-btn",onClick:()=>N(!0),children:"Manage Banned Usernames"}),o.jsx("div",{className:"admin-power-row",children:o.jsx("button",{className:"admin-power-btn secondary",onClick:()=>window.location.href="/",children:"Open App"})}),o.jsx("div",{className:"admin-power-note",children:"Tip: actions are proxied through the server to protect secrets and follow RLS."})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"admin-card mb-20",children:[o.jsx("div",{className:"admin-section-title",children:"Users"}),l.length===0&&o.jsx("div",{className:"muted",children:"No users found."}),o.jsx("div",{className:"users-list",children:l.map(G=>o.jsxs("div",{className:`user-row${G.banned?" banned":""}`.trim(),children:[o.jsxs("div",{className:"user-meta",children:[o.jsx("div",{className:"user-name",children:G.username||G.email}),o.jsx("div",{className:"user-email",children:G.email}),o.jsx("div",{className:"meta-id",children:G.id})]}),o.jsxs("div",{className:"user-actions",children:[G.banned?o.jsx("button",{className:"small-btn ghost",onClick:()=>K(G.id),disabled:d,children:"Unban"}):o.jsx("button",{className:"small-btn ghost",onClick:()=>pe(G.id),disabled:d,children:"Ban"}),o.jsx("button",{className:"small-btn negative",onClick:()=>oe(G.id),disabled:d,children:"Delete"})]})]},G.id))})]}),o.jsxs("div",{className:"admin-card",children:[o.jsx("div",{className:"admin-section-title",children:"AI Action Audit Log"}),d&&o.jsx("div",{className:"muted",children:"Loading..."}),p&&o.jsx("div",{className:"error",children:p}),o.jsxs("div",{className:"audit-list",children:[n.map((G,ce)=>o.jsxs("div",{className:"audit-row",children:[o.jsx("div",{className:"audit-ts",children:G.timestamp}),G.event==="rickroll"?o.jsxs("div",{className:"audit-rickroll",children:[o.jsx("div",{children:"Event: rickroll"}),o.jsxs("div",{children:["IP: ",G.ip||""]}),o.jsxs("div",{children:["Verified: ",String(G.verified)]}),o.jsxs("div",{children:["UserAgent: ",o.jsx("pre",{className:"audit-json-small",children:String(G.userAgent||"")})]})]}):o.jsx("pre",{className:"audit-json",children:JSON.stringify(G.action,null,2)})]},ce)),n.length===0&&!d&&o.jsx("div",{className:"muted",children:"No audit entries found."})]})]})]})]}),g&&o.jsx("div",{className:"admin-modal-overlay",children:o.jsxs("div",{className:"admin-modal",children:[o.jsx("h3",{children:"Restore Workout Plans"}),d&&o.jsx("div",{children:"Loading..."}),o.jsxs("div",{children:[S.map(G=>o.jsxs("div",{className:"admin-modal-list-item",children:[o.jsxs("div",{children:[o.jsx("b",{children:G.name}),o.jsx("div",{className:"meta-id",children:G.id})]}),o.jsx("div",{children:o.jsx("button",{className:"small-btn",onClick:()=>W(G.id),disabled:k===G.id,children:k===G.id?"Restoring...":"Restore"})})]},G.id)),S.length===0&&!d&&o.jsx("div",{children:"No deleted plans found."})]}),o.jsx("div",{className:"modal-footer",children:o.jsx("button",{className:"small-btn ghost",onClick:()=>x(!1),children:"Close"})})]})}),b&&o.jsx("div",{className:"admin-modal-overlay",children:o.jsxs("div",{className:"admin-modal",children:[o.jsx("h3",{children:"Manage Banned Usernames"}),d&&o.jsx("div",{children:"Loading..."}),o.jsxs("div",{children:[$.map(G=>o.jsxs("div",{className:"admin-modal-list-item",children:[o.jsx("div",{children:G}),o.jsx("div",{children:o.jsx("button",{className:"small-btn ghost",onClick:()=>fe(G),disabled:d,children:"Unban"})})]},G)),$.length===0&&!d&&o.jsx("div",{children:"No banned usernames."})]}),o.jsxs("div",{className:"admin-modal-input-row",children:[o.jsx("input",{type:"text",value:F,onChange:G=>ee(G.target.value),placeholder:"Ban new username...",className:"admin-modal-input"}),o.jsx("button",{className:"small-btn warn",onClick:te,disabled:d||!F.trim(),children:"Ban"})]}),o.jsx("div",{className:"modal-footer",children:o.jsx("button",{className:"small-btn ghost",onClick:()=>N(!1),children:"Close"})})]})})]})};function Kx(){j.useEffect(()=>{const i=Ro();try{if(localStorage.getItem("fitbuddy_no_auto_restore")||sessionStorage.getItem("fitbuddy_no_auto_restore"))return}catch{}try{const n=hr(),a=Zs();if(n||a&&a.dailyWorkouts&&a.dailyWorkouts.length>0)return}catch{}i?.id&&rs(i.id);const r=()=>{const n=Ro();n?.id&&ra(n.id)};return window.addEventListener("beforeunload",r),()=>{r(),window.removeEventListener("beforeunload",r)}},[])}const zf="https://www.youtube.com/watch?v=dQw4w9WgXcQ",Qx=()=>{const[i,r]=j.useState("pending");return j.useEffect(()=>{Math.random()<.5?r("rick"):r("notfound")},[]),j.useEffect(()=>{if(i==="rick"){const a=setTimeout(async()=>{try{let l={"Content-Type":"application/json"};try{const{getAuthToken:u}=await $e(async()=>{const{getAuthToken:m}=await Promise.resolve().then(()=>zt);return{getAuthToken:m}},void 0),d=u();d&&(l.Authorization=`Bearer ${d}`)}catch{}await fetch("/api/rickroll",{method:"POST",headers:l,body:JSON.stringify({userId:null})})}catch{}finally{window.location.href=zf}},150);return()=>clearTimeout(a)}},[i]),i==="pending"?o.jsx("div",{className:"rickroll-loading",children:o.jsx("p",{children:"Deciding your fate..."})}):i==="notfound"?o.jsx(bu,{}):o.jsxs("div",{className:"rickroll-redirect",children:[o.jsx("p",{children:"Redirecting you to something special..."}),o.jsx("a",{href:zf,target:"_blank",rel:"noopener noreferrer",children:"Open"})]})};function Yx({userData:i}){const[r,n]=j.useState(!1);if(j.useEffect(()=>{if(i?.id)try{Ew(i.id)}catch{}(async()=>{try{if(ts(i?.id)){n(!1);return}const y=i?.id;if(!y){n(!0);return}const g=await $e(()=>Promise.resolve().then(()=>On),void 0).then(k=>k.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:y})})),x=await fetch("/api/userdata/load",g);if(!x.ok){n(!0);return}const b=await x.text();let N=null;try{N=b?JSON.parse(b):null}catch{N=null}const S=N?.stored??N?.payload??N??{},C=S&&S.accepted_terms&&S.accepted_privacy;n(!C)}catch{const y=ts(i?.id);n(!y)}})();const d=()=>{ts(i?.id)?n(!1):n(!0)},m=()=>{ts(i?.id)?n(!1):n(!0)};return window.addEventListener("fitbuddy-tos-accepted",d),window.addEventListener("fitbuddy-privacy-accepted",m),()=>{window.removeEventListener("fitbuddy-tos-accepted",d),window.removeEventListener("fitbuddy-privacy-accepted",m)}},[i?.id]),!r)return null;const a=Mo(i?.id),l=Uo(i?.id);return o.jsx("div",{className:"tos-banner compact",role:"region","aria-label":"Terms and Privacy banner",children:o.jsx("div",{className:"tos-inner inline",children:o.jsxs("div",{className:"tos-left",children:[o.jsx("div",{className:"tos-info","aria-hidden":"true",children:""}),o.jsxs("div",{className:"tos-text",children:["Please read and accept our ",o.jsx(Sr,{to:"/terms",className:a?"tos-link accepted":"tos-link",children:"Terms of Service"})," and ",o.jsx(Sr,{to:"/privacy",className:l?"tos-link accepted":"tos-link",children:"Privacy Policy"}),". This banner will remain until both are accepted."]})]})})})}function Pp(i={}){const r=i.count||30,n=i.gravity||.6,a=["#1ecb7b","#1e90cb","#ffb347","#ffd54a","#7bd389"],l=document.createElement("div");l.style.position="fixed",l.style.left="0",l.style.top="0",l.style.width="100%",l.style.height="0",l.style.pointerEvents="none",l.style.overflow="visible",l.style.zIndex="9999",document.body.appendChild(l);for(let u=0;u<r;u++){let d=function(){g+=n*.05,x+=y,b+=g,m.style.left=x+"px",m.style.top=b+"px";const S=(parseFloat(m.style.transform.replace("rotate(","").replace("deg)",""))||0)+N;m.style.transform="rotate("+S+"deg)",m.style.opacity=String(Math.max(0,1-b/(window.innerHeight*.9))),b<window.innerHeight+100?requestAnimationFrame(d):m.remove()};const m=document.createElement("div"),p=6+Math.random()*10;m.style.position="absolute",m.style.left=50+(Math.random()-.5)*60+"%",m.style.top="-10px",m.style.width=p+"px",m.style.height=p*.6+"px",m.style.background=a[Math.floor(Math.random()*a.length)],m.style.opacity="0.95",m.style.transform="rotate("+Math.random()*360+"deg)",m.style.borderRadius=Math.random()*3+"px",m.style.willChange="transform, top, opacity",l.appendChild(m);const y=(Math.random()-.5)*6;let g=2+Math.random()*4,x=window.innerWidth*.5+(Math.random()-.5)*window.innerWidth*.6,b=-20-Math.random()*50;const N=(Math.random()-.5)*10;requestAnimationFrame(d)}setTimeout(()=>l.remove(),5e3)}function Xx(){const i=Mo(void 0),[r,n]=j.useState(i),[a,l]=j.useState(i);j.useEffect(()=>{const d=()=>{l(!0),n(!0)};return window.addEventListener("fitbuddy-tos-accepted",d),()=>window.removeEventListener("fitbuddy-tos-accepted",d)},[]);const u=()=>{if(r){up(void 0),l(!0);try{Pp({count:40})}catch{}try{$e(()=>Promise.resolve().then(()=>zt),void 0).then(d=>{try{const p=d.loadUserData()?.id;p&&$e(()=>Promise.resolve().then(()=>On),void 0).then(y=>y.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:p,accepted_terms:!0})})).then(y=>fetch("/api/userdata/save",y)).catch(()=>{})}catch{}}).catch(()=>{})}catch{}}};return o.jsxs("div",{className:"terms-page",children:[o.jsx("header",{className:"terms-hero",children:o.jsxs("div",{className:"terms-hero-inner",children:[o.jsx("div",{className:"hero-logo",children:o.jsx(kt,{size:36,color:"#fff"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"hero-title",children:"FitBuddy Terms of Service"}),o.jsx("p",{className:"hero-sub",children:"Short, clear summary about how to use the app safely and what we store."})]})]})}),o.jsxs("main",{className:"terms-container",children:[o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"1. Use of the Service"}),o.jsx("p",{children:"FitBuddy provides workout suggestions and educational material to help you train safely. This is not medical advice. If you have a medical condition, please consult a healthcare professional before acting on any exercise recommendation."})]}),o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"2. AI & Content"}),o.jsx("p",{children:"Some content or workout suggestions may be generated or assisted by AI. AI outputs are best-effort guidance and should be used in combination with your own judgment and professional advice."})]}),o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"3. Data & Privacy"}),o.jsxs("p",{children:["We store workout plans and profile data locally for convenience. If you create an account, data may be backed up to our servers for sync across devices. See the ",o.jsx(Sr,{to:"/privacy",className:"tos-link",children:"Privacy Policy"})," for details."]})]}),o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"4. Liability"}),o.jsx("p",{children:"By using FitBuddy you acknowledge that you are voluntarily participating in physical activity and accept responsibility for any risks. We are not liable for injuries caused while following the app."})]})]}),o.jsx("section",{className:"terms-full",children:o.jsxs("div",{className:"terms-full-inner",children:[o.jsx("h2",{children:"Full Terms of Service"}),o.jsx("p",{children:'The following terms ("Agreement") constitute a legally binding agreement between you ("User") and FitBuddy, LLC ("FitBuddy", "we", "us" or "our"), governing your access to and use of the FitBuddy website, mobile applications, services, software, APIs and associated content (collectively, the "Service"). By accessing, browsing, or using the Service you acknowledge that you have read, understood, and agree to be bound by this Agreement. If you do not agree to these terms, do not access or use the Service.'}),o.jsx("h3",{children:"1. Definitions"}),o.jsx("p",{children:'"Content" means any information, text, graphics, images, audio, video, code, algorithms, workout plans, recommendations, comments, and other materials provided by FitBuddy or Users. "User Content" means Content submitted or transmitted by Users. "Personal Data" means information that identifies or can be used to identify an individual, subject to the Privacy Policy.'}),o.jsx("h3",{children:"2. Scope of Service"}),o.jsx("p",{children:'FitBuddy provides fitness and wellness related guidance, educational materials, personalized workout plans, and software tools. The Service may include content generated or assisted by artificial intelligence. The Service is provided on an "as is" and "as available" basis. FitBuddy reserves the right to modify, suspend, or discontinue any aspect of the Service at any time without prior notice.'}),o.jsx("h3",{children:"3. User Eligibility and Conduct"}),o.jsx("p",{children:"Users represent and warrant that they are at least the minimum age required to use the Service under applicable law and that they have full authority to accept this Agreement. Users shall not misuse the Service or interfere with its operation. Prohibited conduct includes, but is not limited to: circumventing technical restrictions; attempting to access other Users' accounts; uploading malicious code; impersonating others; or using the Service for unlawful or harmful activities."}),o.jsx("h3",{children:"4. Medical Disclaimer and Assumption of Risk"}),o.jsx("p",{children:"The Service provides general fitness information and recommendations which are not a substitute for professional medical advice, diagnosis, or treatment. Users should consult a qualified healthcare professional before beginning any exercise program or if they have health concerns. By using the Service, Users acknowledge and assume all risks associated with participating in physical activity and agree that FitBuddy is not responsible for any injury, loss, or damage arising from use of the Service."}),o.jsx("h3",{children:"5. AI-Generated Content and Accuracy"}),o.jsx("p",{children:"Some Content may be generated or assisted by machine learning models, thirdparty APIs, or algorithmic systems. While FitBuddy strives for accuracy and utility, AI outputs may be incomplete, imprecise, or contextually inappropriate. FitBuddy disclaims any warranty regarding the suitability, reliability, or accuracy of AI-generated Content. Reliance on such Content is at the User's own risk."}),o.jsx("h3",{children:"6. Intellectual Property"}),o.jsx("p",{children:"FitBuddy and its licensors retain all right, title, and interest in and to the Service and Content provided by FitBuddy, including intellectual property rights. Users are granted a limited, non-exclusive, non-sublicensable, revocable license to access and use the Service for personal, non-commercial purposes in accordance with this Agreement. Users shall not reproduce, distribute, modify, create derivative works, reverse engineer, or otherwise exploit FitBuddy's intellectual property except as expressly authorized herein."}),o.jsx("h3",{children:"7. User Content and License to FitBuddy"}),o.jsx("p",{children:"By submitting User Content, Users grant FitBuddy a worldwide, royalty-free, sublicensable, transferable, perpetual, irrevocable license to use, host, store, reproduce, modify, create derivative works, communicate, publish, and distribute such User Content for the purposes of operating, improving, and promoting the Service. Users warrant that they have the rights to grant such license and that User Content does not violate third-party rights."}),o.jsx("h3",{children:"8. Payments and Subscriptions"}),o.jsx("p",{children:"Paid features of the Service are governed by separate subscription terms and payment agreements. Users agree to provide accurate billing information and authorize recurring charges as applicable. Refunds, cancellations, and dispute procedures are governed by the posted subscription terms and any applicable laws."}),o.jsx("h3",{children:"9. Third-Party Services and Links"}),o.jsx("p",{children:"The Service may contain links to third-party websites, services, or content. FitBuddy does not endorse and is not responsible for third-party offerings, practices, or privacy policies. Users access third-party resources at their own risk and should review the third-party terms and privacy policies."}),o.jsx("h3",{children:"10. Privacy and Data"}),o.jsx("p",{children:"Use of Personal Data is governed by FitBuddys Privacy Policy. By using the Service, Users consent to FitBuddys collection, processing, storage, and transfer of Personal Data in accordance with the Privacy Policy. FitBuddy will take commercially reasonable measures to secure User Data but cannot guarantee absolute security."}),o.jsx("h3",{children:"11. Warranties and Disclaimers"}),o.jsx("p",{children:'EXCEPT AS EXPRESSLY PROVIDED HEREIN, THE SERVICE IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND. FITBUDDY DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE, AND NON-INFRINGEMENT. FITBUDDY DOES NOT WARRANT THAT THE SERVICE WILL BE UNINTERRUPTED, ERROR-FREE, OR SECURE.'}),o.jsx("h3",{children:"12. Limitation of Liability"}),o.jsx("p",{children:"TO THE MAXIMUM EXTENT PERMITTED BY LAW, IN NO EVENT SHALL FITBUDDY, ITS AFFILIATES, LICENSORS, OR SERVICE PROVIDERS BE LIABLE FOR INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, OR FOR LOSS OF PROFITS, REVENUE, DATA, OR USE, ARISING OUT OF OR IN CONNECTION WITH THE SERVICE, WHETHER IN CONTRACT, TORT (INCLUDING NEGLIGENCE), STRICT LIABILITY, OR OTHERWISE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. FITBUDDY'S AGGREGATE LIABILITY FOR DIRECT DAMAGES SHALL NOT EXCEED THE AMOUNTS PAID BY THE USER TO FITBUDDY IN THE TWELVE (12) MONTHS PRECEDING THE CLAIM, OR ONE HUNDRED DOLLARS (USD $100), WHICHEVER IS GREATER."}),o.jsx("h3",{children:"13. Indemnification"}),o.jsx("p",{children:"Users agree to indemnify, defend, and hold harmless FitBuddy and its officers, directors, employees, agents, and affiliates from and against any and all losses, liabilities, claims, demands, damages, costs, and expenses (including reasonable attorneys fees) arising out of or relating to: (a) User's breach of this Agreement; (b) Users violation of any law or third-party rights; or (c) User Content."}),o.jsx("h3",{children:"14. Termination"}),o.jsx("p",{children:"FitBuddy may suspend or terminate a User's access to the Service at any time, with or without cause, and without liability. Upon termination, license rights granted to the User will immediately cease. Sections concerning ownership, disclaimers, limitations of liability, indemnity, and dispute resolution will survive termination."}),o.jsx("h3",{children:"15. Governing Law; Dispute Resolution"}),o.jsx("p",{children:"This Agreement shall be governed by and construed in accordance with the laws of the state in which FitBuddy is incorporated, without regard to conflict of laws principles. Any dispute arising out of or related to this Agreement shall be resolved exclusively through final and binding arbitration, except where prohibited by law. The arbitrator's decision will be final and binding and may be entered as a judgment in any court of competent jurisdiction."}),o.jsx("h3",{children:"16. Changes to Terms"}),o.jsx("p",{children:"FitBuddy may update these Terms from time to time. We will provide notice of material changes, for example by email to registered accounts or prominent notice within the Service. Continued use of the Service after changes constitute acceptance of the revised Terms."}),o.jsx("h3",{children:"17. Miscellaneous"}),o.jsx("p",{children:"This Agreement, together with the Privacy Policy and any other legal notices published by FitBuddy, constitutes the entire agreement between the parties concerning the subject matter herein. If any provision is found unenforceable, the remaining provisions will remain in full force. Failure to enforce a right is not a waiver of that right."}),o.jsxs("p",{children:[o.jsx("em",{children:"Effective Date:"})," The effective date of these Terms is the date you first use the Service. For questions regarding these Terms, please contact our support team."]})]})}),o.jsxs("div",{className:"terms-cta-bottom",children:[o.jsx("div",{className:"terms-cta-inner",children:o.jsxs("label",{className:"terms-checkbox",children:[o.jsx("input",{type:"checkbox",checked:r,onChange:d=>n(d.target.checked)}),o.jsx("span",{children:"I have read and agree to the Terms of Service"})]})}),o.jsx("div",{className:"terms-cta-inner stack",children:o.jsx("button",{className:"btn btn-primary btn-lg"+(a?" accepted-btn":""),onClick:u,disabled:!r||a,"aria-disabled":!r||a,children:a?"Accepted":"Accept"})})]})]})}function Zx(){const i=Uo(void 0),[r,n]=j.useState(i),[a,l]=j.useState(i);j.useEffect(()=>{const d=()=>{l(!0),n(!0)};return window.addEventListener("fitbuddy-privacy-accepted",d),()=>window.removeEventListener("fitbuddy-privacy-accepted",d)},[]);const u=()=>{if(r){dp(void 0),l(!0);try{Pp({count:36})}catch{}try{$e(()=>Promise.resolve().then(()=>zt),void 0).then(d=>{try{const p=d.loadUserData()?.id;p&&$e(()=>Promise.resolve().then(()=>On),void 0).then(y=>y.attachAuthHeaders({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:p,accepted_privacy:!0})})).then(y=>fetch("/api/userdata/save",y)).catch(()=>{})}catch{}}).catch(()=>{})}catch{}}};return o.jsxs("div",{className:"terms-page",children:[o.jsx("header",{className:"terms-hero",children:o.jsxs("div",{className:"terms-hero-inner",children:[o.jsx("div",{className:"hero-logo",children:o.jsx(kt,{size:36,color:"#fff"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"hero-title",children:"FitBuddy Privacy Policy"}),o.jsx("p",{className:"hero-sub",children:"How we collect, use, and protect your data  short summary."})]})]})}),o.jsxs("main",{className:"terms-container",children:[o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"Data We Collect"}),o.jsx("p",{children:"We collect workout preferences, profile details, and optionally account information when you sign up. We do not collect sensitive medical data unless you explicitly provide it."})]}),o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"How We Use Data"}),o.jsx("p",{children:"Data is used to personalize workout plans, sync across devices, and improve the service. We may use aggregated, anonymized data for analytics."})]}),o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"Sharing & Third Parties"}),o.jsx("p",{children:"We do not sell personal data. We may share data with service providers who assist in backup, analytics, or authentication, under appropriate agreements."})]}),o.jsxs("article",{className:"terms-card",children:[o.jsx("h2",{children:"Security"}),o.jsx("p",{children:"We use industry-standard measures to secure data but cannot guarantee absolute security. Follow secure practices and protect your account credentials."})]})]}),o.jsx("section",{className:"terms-full",children:o.jsxs("div",{className:"terms-full-inner",children:[o.jsx("h2",{children:"Full Privacy Policy"}),o.jsx("p",{children:"This Privacy Policy explains how FitBuddy, LLC collects, uses, discloses, and protects the personal information of users of the Service. By using the Service you consent to the collection and use of information as described in this policy."}),o.jsx("h3",{children:"1. Information We Collect"}),o.jsx("p",{children:"We collect information you provide directly (profile, email, preferences), information generated by your use of the Service (workout logs, settings), and technical information (device, browser, IP) to operate and improve the Service."}),o.jsx("h3",{children:"2. Use of Information"}),o.jsx("p",{children:"Information is used to personalize content, provide support, enable backups (when opted-in), deliver notifications, and prevent abuse."}),o.jsx("h3",{children:"3. Sharing and Disclosure"}),o.jsx("p",{children:"We may share information with vendors who perform services for us, comply with legal obligations, or protect our rights. Aggregated or anonymized data may be used for research or analytics."}),o.jsx("h3",{children:"4. Data Retention and Rights"}),o.jsx("p",{children:"We retain data as long as necessary to provide the Service or as required by law. Users may request deletion or access to their data by contacting support."}),o.jsx("h3",{children:"5. International Transfers"}),o.jsx("p",{children:"Data may be processed in different jurisdictions. We take measures to protect data when transferring across borders."}),o.jsx("h3",{children:"6. Changes to Privacy Policy"}),o.jsx("p",{children:"We may update this Privacy Policy and will provide notice for material changes. Continued use after updates constitutes acceptance."}),o.jsxs("p",{children:[o.jsx("em",{children:"Effective Date:"})," The effective date is the date you first use the Service. For privacy questions, contact our support team."]})]})}),o.jsxs("div",{className:"terms-cta-bottom",children:[o.jsx("div",{className:"terms-cta-inner",children:o.jsxs("label",{className:"terms-checkbox",children:[o.jsx("input",{type:"checkbox",checked:r,onChange:d=>n(d.target.checked)}),o.jsx("span",{children:"I have read and agree to the Privacy Policy"})]})}),o.jsx("div",{className:"terms-cta-inner stack",children:o.jsx("button",{className:"btn btn-primary btn-lg"+(a?" accepted-btn":""),onClick:u,disabled:!r||a,"aria-disabled":!r||a,children:a?"Accepted":"Accept"})})]})]})}function eb(){const[i,r]=j.useState(!1),n=()=>{r(!0)};return o.jsxs("div",{className:"terms-page help-page",children:[o.jsx("header",{className:"terms-hero",children:o.jsxs("div",{className:"terms-hero-inner",children:[o.jsx("div",{className:"hero-logo",children:o.jsx(kt,{size:36,color:"#fff"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"hero-title",children:"Help Center"}),o.jsx("p",{className:"hero-sub",children:"Find answers to common questions about using FitBuddy."})]})]})}),o.jsxs("main",{className:"help-categories",children:[o.jsxs("div",{className:"help-cards",children:[o.jsxs("article",{className:"help-card",children:[o.jsx("div",{className:"help-card-icon","aria-hidden":!0,children:o.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("path",{d:"M12 8v4l3 3"})]})}),o.jsxs("div",{children:[o.jsx("h3",{children:"Getting Started"}),o.jsx("p",{children:"Complete the questionnaire to receive your personalized 30-day workout plan and get tips for first steps."})]})]}),o.jsxs("article",{className:"help-card",children:[o.jsx("div",{className:"help-card-icon","aria-hidden":!0,children:o.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),o.jsxs("div",{children:[o.jsx("h3",{children:"Account & Sign-in"}),o.jsx("p",{children:"Sign in to restore backups, save progress, and sync across devices. Reset options are available from the sign-in page."})]})]}),o.jsxs("article",{className:"help-card",children:[o.jsx("div",{className:"help-card-icon","aria-hidden":!0,children:o.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2"}),o.jsx("path",{d:"M16 3v4"}),o.jsx("path",{d:"M8 3v4"})]})}),o.jsxs("div",{children:[o.jsx("h3",{children:"Workouts & Plans"}),o.jsx("p",{children:"View and edit your plan on the calendar. Swap or regenerate workouts, and mark progress as you train."})]})]}),o.jsxs("article",{className:"help-card",children:[o.jsx("div",{className:"help-card-icon","aria-hidden":!0,children:o.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 12h18"}),o.jsx("path",{d:"M3 6h18"}),o.jsx("path",{d:"M3 18h18"})]})}),o.jsxs("div",{children:[o.jsx("h3",{children:"Privacy & Data"}),o.jsx("p",{children:"Learn how we store and protect your data and how to control backups and sharing preferences."})]})]})]}),o.jsxs("div",{className:"faq-spot",children:[o.jsx("h2",{children:"Frequently Asked Questions"}),o.jsx(rb,{})]}),o.jsxs("div",{className:"help-support",children:[o.jsx("h3",{children:"Need more help?"}),o.jsx("p",{children:"If you can't find the answer, contact our support team."}),o.jsx("button",{className:"btn btn-primary help-contact",onClick:n,children:"Contact Support"})]})]}),o.jsx(tb,{open:i,onClose:()=>r(!1),onSubmitted:()=>{r(!1),console.log("support form submitted")}})]})}function tb({open:i,onClose:r,onSubmitted:n}){const[a,l]=j.useState(""),[u,d]=j.useState(""),[m,p]=j.useState(""),[y,g]=j.useState("");if(!i)return null;const x=b=>{b.preventDefault();try{n?.()}catch{}};return o.jsx("div",{className:"hc-modal-backdrop",role:"dialog","aria-modal":"true",children:o.jsxs("div",{className:"hc-modal",children:[o.jsxs("header",{className:"hc-modal-header",children:[o.jsx("h3",{children:"Contact Support"}),o.jsx("button",{className:"hc-close",onClick:r,"aria-label":"Close",children:""})]}),o.jsxs("form",{className:"hc-form",onSubmit:x,children:[o.jsxs("label",{children:["Name",o.jsx("input",{value:a,onChange:b=>l(b.target.value),required:!0})]}),o.jsxs("label",{children:["Email",o.jsx("input",{type:"email",value:u,onChange:b=>d(b.target.value),required:!0})]}),o.jsxs("label",{children:["Subject",o.jsx("input",{value:m,onChange:b=>p(b.target.value)})]}),o.jsxs("label",{children:["Message",o.jsx("textarea",{value:y,onChange:b=>g(b.target.value),rows:6,required:!0})]}),o.jsxs("div",{className:"hc-actions",children:[o.jsx("button",{type:"button",className:"btn",onClick:r,children:"Cancel"}),o.jsx("button",{type:"submit",className:"btn btn-primary",children:"Send"})]})]})]})})}function rb(){const[i,r]=j.useState(0),n=[{q:"How do I get my personalized workout plan?",a:"Complete the questionnaire accessible from the Get Started button. The AI will generate a 30-day plan based on your answers.",icon:o.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("path",{d:"M12 8v4l3 3"})]})},{q:"Can I change workouts or difficulty?",a:"Yes. On the calendar, tap a workout to see options for regenerating, swapping, or adjusting difficulty.",icon:o.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2"}),o.jsx("path",{d:"M16 3v4"}),o.jsx("path",{d:"M8 3v4"})]})},{q:"How do I restore my account or backups?",a:"If you signed up with an account, use Sign In to restore. If you used local storage, use the restore options in the settings or contact support for assistance.",icon:o.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]})},{q:"How is my data stored and protected?",a:"We store workout plans and profile data locally and optionally in cloud backups if enabled. See the Privacy Policy for more details.",icon:o.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 12h18"}),o.jsx("path",{d:"M3 6h18"}),o.jsx("path",{d:"M3 18h18"})]})}],a=l=>r(i===l?null:l);return o.jsx("div",{className:"accordion",role:"region","aria-label":"Help center FAQ",children:n.map((l,u)=>o.jsx("div",{className:`accordion-item ${i===u?"open":""}`,children:o.jsxs("div",{className:"accordion-card",children:[o.jsx("div",{className:"help-card-icon faq-icon","aria-hidden":!0,children:l.icon}),o.jsxs("div",{className:"accordion-main",children:[o.jsxs("button",{className:"accordion-button","aria-expanded":i===u,"aria-controls":`acc-panel-${u}`,id:`acc-btn-${u}`,onClick:()=>a(u),children:[o.jsx("span",{children:l.q}),o.jsx("svg",{className:"chev",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),o.jsx("div",{id:`acc-panel-${u}`,role:"region","aria-labelledby":`acc-btn-${u}`,className:"accordion-panel",children:o.jsx("p",{children:l.a})})]})]})},u))})}function nb(){const[i,r]=j.useState(null),[n,a]=j.useState(null),[l,u]=j.useState(0),d=Ir(),[m,p]=j.useState(0);Kx(),j.useEffect(()=>{if(!i?.id)return;let g=!1;const b=setInterval(async()=>{if(g)return;const N=await Io(i.id);N&&r(N)},1e3);return()=>{g=!0,clearInterval(b)}},[i?.id]),j.useEffect(()=>{const g=()=>r(null);return window.addEventListener("fitbuddy-logout",g),()=>window.removeEventListener("fitbuddy-logout",g)},[]),j.useEffect(()=>{const g=()=>{const x=Ar(),b=Zs();x&&r(x),b&&(a(b),u(N=>N+1))};return window.addEventListener("fitbuddy-login",g),()=>window.removeEventListener("fitbuddy-login",g)},[]),j.useEffect(()=>{const g=()=>{const b=Ar();b&&(!i||b.id===i.id)&&r(b)};window.addEventListener("storage",g);let x=null;try{x=new BroadcastChannel("fitbuddy"),x.onmessage=()=>g()}catch{}return()=>{window.removeEventListener("storage",g);try{x&&x.close()}catch{}}},[i]),j.useEffect(()=>{const g=Ar(),x=Zs();console.log("App startup - loadUserData ->",g),console.log("App startup - loadWorkoutPlan ->",x),g&&(r(g),g.id&&Io(g.id).then(b=>{b&&r(b)})),x&&(a(x),u(b=>b+1))},[]),j.useEffect(()=>{i?jr(i,{skipBackup:!0}):ni()},[i]),j.useEffect(()=>{n&&En(n)},[n]),j.useEffect(()=>{console.log("App: workoutPlan updated (version:",l,"):",n)},[n,l]);const y=g=>{r(x=>{if(!x)return x;const b=(x.energy||0)-g.price,N=Array.isArray(x.inventory)?x.inventory:[];return{...x,energy:b,inventory:[...N,g]}})};return o.jsxs("div",{className:"App",children:[o.jsx(Nw,{userData:i,profileVersion:m}),o.jsx(Yx,{userData:i}),o.jsxs(xy,{children:[o.jsx(Ot,{path:"/",element:o.jsx(Vy,{})}),o.jsx(Ot,{path:"/profile",element:o.jsx(Mx,{userData:i,onProfileUpdate:g=>{r(g),p(x=>x+1)},profileVersion:m})}),o.jsx(Ot,{path:"/loading",element:o.jsx(Cw,{})}),o.jsx(Ot,{path:"/questionnaire",element:o.jsx(av,{onComplete:(g,x)=>{r(g),a(x),u(b=>b+1),d("/calendar")}})}),o.jsx(Ot,{path:"/calendar",element:o.jsx(wf,{userData:i,children:o.jsx(jw,{workoutPlan:n,userData:i,onUpdatePlan:g=>{a(g),u(x=>x+1)}},l)})}),o.jsx(Ot,{path:"/shop",element:o.jsx(Vx,{user:i||{energy:0,inventory:[]},onPurchase:y})}),o.jsx(Ot,{path:"/chat",element:o.jsx(wf,{userData:i,children:o.jsx(Gx,{userData:i})})}),o.jsx(Ot,{path:"/admin",element:o.jsx(Jx,{})}),o.jsx(Ot,{path:"/help",element:o.jsx(eb,{})}),o.jsx(Ot,{path:"/terms",element:o.jsx(Xx,{})}),o.jsx(Ot,{path:"/privacy",element:o.jsx(Zx,{})}),o.jsx(Ot,{path:"/signin",element:o.jsx(Ux,{})}),o.jsx(Ot,{path:"/signup",element:o.jsx(Bx,{})}),o.jsx(Ot,{path:"/verify-email",element:o.jsx(zx,{})}),o.jsx(Ot,{path:"/rickroll",element:o.jsx(Qx,{})}),o.jsx(Ot,{path:"*",element:o.jsx(bu,{})})]})]})}const sb=()=>{try{let i=!1;const r=async()=>{try{let n=null;try{const{loadUserData:a}=await $e(async()=>{const{loadUserData:u}=await Promise.resolve().then(()=>zt);return{loadUserData:u}},void 0),l=a();if(n=l?.id||l?.sub||l?.data?.id||null,!n)return}catch{return}try{if(await(await $e(()=>Promise.resolve().then(()=>Ys),void 0)).beaconBackupUserData(String(n)))return}catch{}try{(await $e(()=>Promise.resolve().then(()=>Ys),void 0)).backupUserDataToServer(String(n))}catch{}}catch{}};i||(window.addEventListener("beforeunload",r,{passive:!0}),window.addEventListener("fitbuddy-logout",async()=>{try{const{loadUserData:n}=await $e(async()=>{const{loadUserData:d}=await Promise.resolve().then(()=>zt);return{loadUserData:d}},void 0),a=n(),l=a?.id||a?.sub||a?.data?.id||null;if(!l)return;const u=await $e(()=>Promise.resolve().then(()=>Ys),void 0);try{await u.backupAndDeleteSensitive(String(l))}catch{}try{await u.backupUserDataToServer(String(l))}catch{}}catch{}}),i=!0)}catch{}};sb();Tg.createRoot(document.getElementById("root")).render(o.jsx(rr.StrictMode,{children:o.jsx(Ny,{children:o.jsx(nb,{})})}))});export default ib();
